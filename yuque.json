[
  {
    "id": 178424476,
    "type": "Doc",
    "slug": "si102bo68ffu8kkk",
    "title": "使用workerman接收websocket消息，并在thinkphp6控制器里处理取得的数据",
    "description": "tags: [workerman,websocket,thinkphp,php]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:一、创建...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [workerman,websocket,thinkphp,php]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"hQdjE\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">一、创建workerman服务，并启动</span></h1><div class=\"ne-quote\"><p id=\"u9d0cbc6e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">用以接收websocket消息</span></p></div><h2 id=\"S0X6N\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">1、安装workerman服务</span></h2><pre data-language=\"plain\" id=\"GZmWM\" class=\"ne-codeblock language-plain\"><code>composer require workerman/workerman</code></pre><p id=\"u6be47292\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h2 id=\"L4ZCy\"><span class=\"ne-text\">2、根目录下创建文件：</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">server.php</span></strong></h2><h3 id=\"oqY8Y\" data-lake-index-type=\"2\"><span lake-read-ignore=\"true\">1. </span><span class=\"ne-text\"> 方法1：使用回调函数</span></h3><pre data-language=\"php\" id=\"YdRIm\" class=\"ne-codeblock language-php\"><code>&lt;?php\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Workerman\\Worker;\nuse Workerman\\Connection\\AsyncTcpConnection;\n\n$worker = new Worker();\n\n$worker-&gt;onWorkerStart = function ($worker) {\n\n    $con = new AsyncTcpConnection('ws://127.0.0.1:7600/wcf/socket_receiver');\n\n    // websocket握手成功后\n    $con-&gt;onWebSocketConnect = function (AsyncTcpConnection $con,) {\n        $con-&gt;send('hello');\n    };\n\n    // 当收到消息时\n    $con-&gt;onMessage = function (AsyncTcpConnection $con, $data) {\n        echo $data.PHP_EOL;\n        //方法一：使用回调函数给控制器传递消息\n        $gogogoInstance = new \\app\\wx\\controller\\Gogogo();\n        call_user_func_array([$gogogoInstance, 'getMsgData'], [$data]);\n    };\n\n    $con-&gt;onError = function (AsyncTcpConnection $con, $code, $msg) {\n        echo &quot;error $code $msg\\n&quot;;\n    };\n\n    $con-&gt;connect();\n};\n\nWorker::runAll();\n</code></pre><h3 id=\"PzPsz\" data-lake-index-type=\"2\"><span lake-read-ignore=\"true\">2. </span><span class=\"ne-text\">方法2：使用thinkphp容器及中间件</span></h3><pre data-language=\"php\" id=\"WCpz6\" class=\"ne-codeblock language-php\"><code>&lt;?php\nrequire_once __DIR__.'/vendor/autoload.php';\nrequire_once __DIR__.'/app/wx/controller/Index.php';\n\nuse Workerman\\Worker;\nuse Workerman\\Connection\\AsyncTcpConnection;\n\nuse think\\Container;\n\n$worker = new Worker();\n\n$worker-&gt;onWorkerStart = function ($worker) {\n\n    $con = new AsyncTcpConnection('ws://127.0.0.1:7600/wcf/socket_receiver');\n\n    // websocket握手成功后\n    $con-&gt;onWebSocketConnect = function (AsyncTcpConnection $con,) {\n        $con-&gt;send('hello');\n    };\n\n    // 当收到消息时\n    $con-&gt;onMessage = function (AsyncTcpConnection $con, $data) {\n        echo $data.PHP_EOL;\n        $webSocketService = Container::getInstance()-&gt;make(\\App\\Service\\WebSocketService::class);\n        $webSocketService-&gt;handleMessage($data);\n\n    };\n\n    $con-&gt;onError = function (AsyncTcpConnection $con, $code, $msg) {\n        echo &quot;error $code $msg\\n&quot;;\n    };\n\n    $con-&gt;connect();\n};\n\nWorker::runAll();\n</code></pre><p id=\"ubdea4198\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h2 id=\"OQEG8\"><span class=\"ne-text\">3、创建中间件（如果需要【方法2代码】）</span></h2><p id=\"u518945ab\" class=\"ne-p\"><span class=\"ne-text\">文件：app\\service\\WebSocketService.php</span></p><pre data-language=\"php\" id=\"nveOM\" class=\"ne-codeblock language-php\"><code>namespace app\\service;\n\nclass WebSocketService\n{\n\n    public function handleMessage($message)\n    {\n        // 这里可以调用控制器方法\n        $controller = new \\app\\wx\\controller\\Gogogo();\n        $controller-&gt;getMsgData($message);\n    }\n}</code></pre><p id=\"u393aa3c5\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h2 id=\"hisFC\"><span class=\"ne-text\">4、创建控制器处理数据</span></h2><p id=\"ud4784dd3\" class=\"ne-p\"><span class=\"ne-text\">文件：app/wx/controller/Gogogo.php</span></p><pre data-language=\"php\" id=\"pMEn0\" class=\"ne-codeblock language-php\"><code>namespace app\\wx\\controller;\n\nclass Gogogo\n{\n\n    public function getMsgData($message)\n    {\n        // 处理接收到的WebSocket消息\n        file_put_contents(&quot;t.txt&quot;, gettype($message).PHP_EOL, FILE_APPEND);\n        file_put_contents(&quot;t.txt&quot;, $message.PHP_EOL, FILE_APPEND);\n        // 你可以在这里进行其他业务逻辑处理\n    }\n}</code></pre></div>",
    "body": "tags: [workerman,websocket,thinkphp,php]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<a name=\"hQdjE\"></a>\n# 一、创建workerman服务，并启动\n> 用以接收websocket消息\n\n<a name=\"S0X6N\"></a>\n## 1、安装workerman服务\n```\ncomposer require workerman/workerman\n```\n\n<a name=\"L4ZCy\"></a>\n## 2、根目录下创建文件：**server.php**\n<a name=\"oqY8Y\"></a>\n###  方法1：使用回调函数\n```php\n<?php\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Workerman\\Worker;\nuse Workerman\\Connection\\AsyncTcpConnection;\n\n$worker = new Worker();\n\n$worker->onWorkerStart = function ($worker) {\n\n    $con = new AsyncTcpConnection('ws://127.0.0.1:7600/wcf/socket_receiver');\n\n    // websocket握手成功后\n    $con->onWebSocketConnect = function (AsyncTcpConnection $con,) {\n        $con->send('hello');\n    };\n\n    // 当收到消息时\n    $con->onMessage = function (AsyncTcpConnection $con, $data) {\n        echo $data.PHP_EOL;\n        //方法一：使用回调函数给控制器传递消息\n        $gogogoInstance = new \\app\\wx\\controller\\Gogogo();\n        call_user_func_array([$gogogoInstance, 'getMsgData'], [$data]);\n    };\n\n    $con->onError = function (AsyncTcpConnection $con, $code, $msg) {\n        echo \"error $code $msg\\n\";\n    };\n\n    $con->connect();\n};\n\nWorker::runAll();\n\n```\n<a name=\"PzPsz\"></a>\n### 方法2：使用thinkphp容器及中间件\n```php\n<?php\nrequire_once __DIR__.'/vendor/autoload.php';\nrequire_once __DIR__.'/app/wx/controller/Index.php';\n\nuse Workerman\\Worker;\nuse Workerman\\Connection\\AsyncTcpConnection;\n\nuse think\\Container;\n\n$worker = new Worker();\n\n$worker->onWorkerStart = function ($worker) {\n\n    $con = new AsyncTcpConnection('ws://127.0.0.1:7600/wcf/socket_receiver');\n\n    // websocket握手成功后\n    $con->onWebSocketConnect = function (AsyncTcpConnection $con,) {\n        $con->send('hello');\n    };\n\n    // 当收到消息时\n    $con->onMessage = function (AsyncTcpConnection $con, $data) {\n        echo $data.PHP_EOL;\n        $webSocketService = Container::getInstance()->make(\\App\\Service\\WebSocketService::class);\n        $webSocketService->handleMessage($data);\n\n    };\n\n    $con->onError = function (AsyncTcpConnection $con, $code, $msg) {\n        echo \"error $code $msg\\n\";\n    };\n\n    $con->connect();\n};\n\nWorker::runAll();\n\n```\n\n<a name=\"OQEG8\"></a>\n## 3、创建中间件（如果需要【方法2代码】）\n文件：app\\service\\WebSocketService.php\n```php\nnamespace app\\service;\n\nclass WebSocketService\n{\n\n    public function handleMessage($message)\n    {\n        // 这里可以调用控制器方法\n        $controller = new \\app\\wx\\controller\\Gogogo();\n        $controller->getMsgData($message);\n    }\n}\n```\n\n<a name=\"hisFC\"></a>\n## 4、创建控制器处理数据\n文件：app/wx/controller/Gogogo.php\n```php\nnamespace app\\wx\\controller;\n\nclass Gogogo\n{\n\n    public function getMsgData($message)\n    {\n        // 处理接收到的WebSocket消息\n        file_put_contents(\"t.txt\", gettype($message).PHP_EOL, FILE_APPEND);\n        file_put_contents(\"t.txt\", $message.PHP_EOL, FILE_APPEND);\n        // 你可以在这里进行其他业务逻辑处理\n    }\n}\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [workerman,websocket,thinkphp,php]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"hQdjE\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">一、创建workerman服务，并启动</span></h1><div class=\"ne-quote\"><p id=\"u9d0cbc6e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">用以接收websocket消息</span></p></div><h2 id=\"S0X6N\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">1、安装workerman服务</span></h2><pre data-language=\"plain\" id=\"GZmWM\" class=\"ne-codeblock language-plain\"><code>composer require workerman/workerman</code></pre><p id=\"u6be47292\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h2 id=\"L4ZCy\"><span class=\"ne-text\">2、根目录下创建文件：</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">server.php</span></strong></h2><h3 id=\"oqY8Y\" data-lake-index-type=\"2\"><span lake-read-ignore=\"true\">1. </span><span class=\"ne-text\"> 方法1：使用回调函数</span></h3><pre data-language=\"php\" id=\"YdRIm\" class=\"ne-codeblock language-php\"><code>&lt;?php\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Workerman\\Worker;\nuse Workerman\\Connection\\AsyncTcpConnection;\n\n$worker = new Worker();\n\n$worker-&gt;onWorkerStart = function ($worker) {\n\n    $con = new AsyncTcpConnection('ws://127.0.0.1:7600/wcf/socket_receiver');\n\n    // websocket握手成功后\n    $con-&gt;onWebSocketConnect = function (AsyncTcpConnection $con,) {\n        $con-&gt;send('hello');\n    };\n\n    // 当收到消息时\n    $con-&gt;onMessage = function (AsyncTcpConnection $con, $data) {\n        echo $data.PHP_EOL;\n        //方法一：使用回调函数给控制器传递消息\n        $gogogoInstance = new \\app\\wx\\controller\\Gogogo();\n        call_user_func_array([$gogogoInstance, 'getMsgData'], [$data]);\n    };\n\n    $con-&gt;onError = function (AsyncTcpConnection $con, $code, $msg) {\n        echo &quot;error $code $msg\\n&quot;;\n    };\n\n    $con-&gt;connect();\n};\n\nWorker::runAll();\n</code></pre><h3 id=\"PzPsz\" data-lake-index-type=\"2\"><span lake-read-ignore=\"true\">2. </span><span class=\"ne-text\">方法2：使用thinkphp容器及中间件</span></h3><pre data-language=\"php\" id=\"WCpz6\" class=\"ne-codeblock language-php\"><code>&lt;?php\nrequire_once __DIR__.'/vendor/autoload.php';\nrequire_once __DIR__.'/app/wx/controller/Index.php';\n\nuse Workerman\\Worker;\nuse Workerman\\Connection\\AsyncTcpConnection;\n\nuse think\\Container;\n\n$worker = new Worker();\n\n$worker-&gt;onWorkerStart = function ($worker) {\n\n    $con = new AsyncTcpConnection('ws://127.0.0.1:7600/wcf/socket_receiver');\n\n    // websocket握手成功后\n    $con-&gt;onWebSocketConnect = function (AsyncTcpConnection $con,) {\n        $con-&gt;send('hello');\n    };\n\n    // 当收到消息时\n    $con-&gt;onMessage = function (AsyncTcpConnection $con, $data) {\n        echo $data.PHP_EOL;\n        $webSocketService = Container::getInstance()-&gt;make(\\App\\Service\\WebSocketService::class);\n        $webSocketService-&gt;handleMessage($data);\n\n    };\n\n    $con-&gt;onError = function (AsyncTcpConnection $con, $code, $msg) {\n        echo &quot;error $code $msg\\n&quot;;\n    };\n\n    $con-&gt;connect();\n};\n\nWorker::runAll();\n</code></pre><p id=\"ubdea4198\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h2 id=\"OQEG8\"><span class=\"ne-text\">3、创建中间件（如果需要【方法2代码】）</span></h2><p id=\"u518945ab\" class=\"ne-p\"><span class=\"ne-text\">文件：app\\service\\WebSocketService.php</span></p><pre data-language=\"php\" id=\"nveOM\" class=\"ne-codeblock language-php\"><code>namespace app\\service;\n\nclass WebSocketService\n{\n\n    public function handleMessage($message)\n    {\n        // 这里可以调用控制器方法\n        $controller = new \\app\\wx\\controller\\Gogogo();\n        $controller-&gt;getMsgData($message);\n    }\n}</code></pre><p id=\"u393aa3c5\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h2 id=\"hisFC\"><span class=\"ne-text\">4、创建控制器处理数据</span></h2><p id=\"ud4784dd3\" class=\"ne-p\"><span class=\"ne-text\">文件：app/wx/controller/Gogogo.php</span></p><pre data-language=\"php\" id=\"pMEn0\" class=\"ne-codeblock language-php\"><code>namespace app\\wx\\controller;\n\nclass Gogogo\n{\n\n    public function getMsgData($message)\n    {\n        // 处理接收到的WebSocket消息\n        file_put_contents(&quot;t.txt&quot;, gettype($message).PHP_EOL, FILE_APPEND);\n        file_put_contents(&quot;t.txt&quot;, $message.PHP_EOL, FILE_APPEND);\n        // 你可以在这里进行其他业务逻辑处理\n    }\n}</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [workerman,websocket,thinkphp,php]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h1 data-lake-id=\"hQdjE\" id=\"hQdjE\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">一、创建workerman服务，并启动</span></h1><blockquote data-lake-id=\"u0b89799b\" id=\"u0b89799b\"><p data-lake-id=\"u9d0cbc6e\" id=\"u9d0cbc6e\"><span data-lake-id=\"u0f3a4d79\" id=\"u0f3a4d79\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">用以接收websocket消息</span></p></blockquote><h2 data-lake-id=\"S0X6N\" id=\"S0X6N\"><span data-lake-id=\"u8ce89b55\" id=\"u8ce89b55\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">1、安装workerman服务</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22composer%20require%20workerman%2Fworkerman%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22GZmWM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u6be47292\" id=\"u6be47292\"><span data-lake-id=\"uc6784a8c\" id=\"uc6784a8c\" class=\"lake-fontsize-11\">​</span><br></p><h2 data-lake-id=\"L4ZCy\" id=\"L4ZCy\"><span data-lake-id=\"ufa7bf620\" id=\"ufa7bf620\" class=\"lake-fontsize-11\">2、根目录下创建文件：</span><strong><span data-lake-id=\"u69b01341\" id=\"u69b01341\" class=\"lake-fontsize-11\" style=\"color: #DF2A3F\">server.php</span></strong></h2><h3 data-lake-id=\"oqY8Y\" id=\"oqY8Y\" data-lake-index-type=\"2\"><span data-lake-id=\"ube35b3a7\" id=\"ube35b3a7\" class=\"lake-fontsize-11\"> 方法1：使用回调函数</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22server.php%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnrequire_once%20__DIR__.'%2Fvendor%2Fautoload.php'%3B%5Cn%5Cnuse%20Workerman%5C%5CWorker%3B%5Cnuse%20Workerman%5C%5CConnection%5C%5CAsyncTcpConnection%3B%5Cn%5Cn%24worker%20%3D%20new%20Worker()%3B%5Cn%5Cn%24worker-%3EonWorkerStart%20%3D%20function%20(%24worker)%20%7B%5Cn%5Cn%20%20%20%20%24con%20%3D%20new%20AsyncTcpConnection('ws%3A%2F%2F127.0.0.1%3A7600%2Fwcf%2Fsocket_receiver')%3B%5Cn%5Cn%20%20%20%20%2F%2F%20websocket%E6%8F%A1%E6%89%8B%E6%88%90%E5%8A%9F%E5%90%8E%5Cn%20%20%20%20%24con-%3EonWebSocketConnect%20%3D%20function%20(AsyncTcpConnection%20%24con%2C)%20%7B%5Cn%20%20%20%20%20%20%20%20%24con-%3Esend('hello')%3B%5Cn%20%20%20%20%7D%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%E5%BD%93%E6%94%B6%E5%88%B0%E6%B6%88%E6%81%AF%E6%97%B6%5Cn%20%20%20%20%24con-%3EonMessage%20%3D%20function%20(AsyncTcpConnection%20%24con%2C%20%24data)%20%7B%5Cn%20%20%20%20%20%20%20%20echo%20%24data.PHP_EOL%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%BB%99%E6%8E%A7%E5%88%B6%E5%99%A8%E4%BC%A0%E9%80%92%E6%B6%88%E6%81%AF%5Cn%20%20%20%20%20%20%20%20%24gogogoInstance%20%3D%20new%20%5C%5Capp%5C%5Cwx%5C%5Ccontroller%5C%5CGogogo()%3B%5Cn%20%20%20%20%20%20%20%20call_user_func_array(%5B%24gogogoInstance%2C%20'getMsgData'%5D%2C%20%5B%24data%5D)%3B%5Cn%20%20%20%20%7D%3B%5Cn%5Cn%20%20%20%20%24con-%3EonError%20%3D%20function%20(AsyncTcpConnection%20%24con%2C%20%24code%2C%20%24msg)%20%7B%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22error%20%24code%20%24msg%5C%5Cn%5C%22%3B%5Cn%20%20%20%20%7D%3B%5Cn%5Cn%20%20%20%20%24con-%3Econnect()%3B%5Cn%7D%3B%5Cn%5CnWorker%3A%3ArunAll()%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22server.php%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22YdRIm%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"PzPsz\" id=\"PzPsz\" data-lake-index-type=\"2\"><span data-lake-id=\"ub4297612\" id=\"ub4297612\" class=\"lake-fontsize-11\">方法2：使用thinkphp容器及中间件</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22server2.php%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnrequire_once%20__DIR__.'%2Fvendor%2Fautoload.php'%3B%5Cnrequire_once%20__DIR__.'%2Fapp%2Fwx%2Fcontroller%2FIndex.php'%3B%5Cn%5Cnuse%20Workerman%5C%5CWorker%3B%5Cnuse%20Workerman%5C%5CConnection%5C%5CAsyncTcpConnection%3B%5Cn%5Cnuse%20think%5C%5CContainer%3B%5Cn%5Cn%24worker%20%3D%20new%20Worker()%3B%5Cn%5Cn%24worker-%3EonWorkerStart%20%3D%20function%20(%24worker)%20%7B%5Cn%5Cn%20%20%20%20%24con%20%3D%20new%20AsyncTcpConnection('ws%3A%2F%2F127.0.0.1%3A7600%2Fwcf%2Fsocket_receiver')%3B%5Cn%5Cn%20%20%20%20%2F%2F%20websocket%E6%8F%A1%E6%89%8B%E6%88%90%E5%8A%9F%E5%90%8E%5Cn%20%20%20%20%24con-%3EonWebSocketConnect%20%3D%20function%20(AsyncTcpConnection%20%24con%2C)%20%7B%5Cn%20%20%20%20%20%20%20%20%24con-%3Esend('hello')%3B%5Cn%20%20%20%20%7D%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%E5%BD%93%E6%94%B6%E5%88%B0%E6%B6%88%E6%81%AF%E6%97%B6%5Cn%20%20%20%20%24con-%3EonMessage%20%3D%20function%20(AsyncTcpConnection%20%24con%2C%20%24data)%20%7B%5Cn%20%20%20%20%20%20%20%20echo%20%24data.PHP_EOL%3B%5Cn%20%20%20%20%20%20%20%20%24webSocketService%20%3D%20Container%3A%3AgetInstance()-%3Emake(%5C%5CApp%5C%5CService%5C%5CWebSocketService%3A%3Aclass)%3B%5Cn%20%20%20%20%20%20%20%20%24webSocketService-%3EhandleMessage(%24data)%3B%5Cn%5Cn%20%20%20%20%7D%3B%5Cn%5Cn%20%20%20%20%24con-%3EonError%20%3D%20function%20(AsyncTcpConnection%20%24con%2C%20%24code%2C%20%24msg)%20%7B%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22error%20%24code%20%24msg%5C%5Cn%5C%22%3B%5Cn%20%20%20%20%7D%3B%5Cn%5Cn%20%20%20%20%24con-%3Econnect()%3B%5Cn%7D%3B%5Cn%5CnWorker%3A%3ArunAll()%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22server2.php%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22WCpz6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ubdea4198\" id=\"ubdea4198\"><span data-lake-id=\"u9500f39f\" id=\"u9500f39f\" class=\"lake-fontsize-11\">​</span><br></p><h2 data-lake-id=\"OQEG8\" id=\"OQEG8\"><span data-lake-id=\"ud60b480a\" id=\"ud60b480a\" class=\"lake-fontsize-11\">3、创建中间件（如果需要【方法2代码】）</span></h2><p data-lake-id=\"u518945ab\" id=\"u518945ab\"><span data-lake-id=\"u7b51777d\" id=\"u7b51777d\">文件：app\\service\\WebSocketService.php</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22namespace%20app%5C%5Cservice%3B%5Cn%5Cnclass%20WebSocketService%5Cn%7B%5Cn%5Cn%20%20%20%20public%20function%20handleMessage(%24message)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E8%B0%83%E7%94%A8%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95%5Cn%20%20%20%20%20%20%20%20%24controller%20%3D%20new%20%5C%5Capp%5C%5Cwx%5C%5Ccontroller%5C%5CGogogo()%3B%5Cn%20%20%20%20%20%20%20%20%24controller-%3EgetMsgData(%24message)%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22nveOM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u393aa3c5\" id=\"u393aa3c5\"><span data-lake-id=\"u99d09eba\" id=\"u99d09eba\">​</span><br></p><h2 data-lake-id=\"hisFC\" id=\"hisFC\"><span data-lake-id=\"u499f64e7\" id=\"u499f64e7\">4、创建控制器处理数据</span></h2><p data-lake-id=\"ud4784dd3\" id=\"ud4784dd3\"><span data-lake-id=\"u162a3d52\" id=\"u162a3d52\">文件：app/wx/controller/Gogogo.php</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22Gogogo%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22namespace%20app%5C%5Cwx%5C%5Ccontroller%3B%5Cn%5Cnclass%20Gogogo%5Cn%7B%5Cn%5Cn%20%20%20%20public%20function%20getMsgData(%24message)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%A4%84%E7%90%86%E6%8E%A5%E6%94%B6%E5%88%B0%E7%9A%84WebSocket%E6%B6%88%E6%81%AF%5Cn%20%20%20%20%20%20%20%20file_put_contents(%5C%22t.txt%5C%22%2C%20gettype(%24message).PHP_EOL%2C%20FILE_APPEND)%3B%5Cn%20%20%20%20%20%20%20%20file_put_contents(%5C%22t.txt%5C%22%2C%20%24message.PHP_EOL%2C%20FILE_APPEND)%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%99%E9%87%8C%E8%BF%9B%E8%A1%8C%E5%85%B6%E4%BB%96%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%A4%84%E7%90%86%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22Gogogo%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22pMEn0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 358,
    "created_at": "2024-07-18T01:29:21.000Z",
    "updated_at": "2024-07-18T02:53:42.000Z",
    "content_updated_at": "2024-07-18T02:53:40.000Z",
    "published_at": "2024-07-18T02:53:42.000Z",
    "first_published_at": "2024-07-18T02:53:39.740Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2671360158,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 170624773,
    "type": "Doc",
    "slug": "ggm4isp7cq2rgynw",
    "title": "宝塔面板进程守护管理器（Supervisor）踩坑日记",
    "description": "tags: [守护进程,supervisor]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:宝塔面板，正常使用过程中，突然守护进程异常...",
    "cover": "https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348561561-38e57629-0f27-4c02-8e74-7b8ea2884690.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [守护进程,supervisor]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">宝塔面板，正常使用过程中，突然守护进程异常报错，无论重启还是停止均无法执行。</span></p><p id=\"u39a81ff7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这里记录一下，以便后期参考使用</span></p></div><p id=\"u238309a8\" class=\"ne-p\"><br></p><h2 id=\"GqPox\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">找到错误日志：</span></h2><p id=\"u2bc2e375\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348561561-38e57629-0f27-4c02-8e74-7b8ea2884690.png\" width=\"1549\" id=\"u28b1112f\" class=\"ne-image\"></p><p id=\"u662bb748\" class=\"ne-p\"><span class=\"ne-text\">排查看到：</span></p><p id=\"uaaf2fff4\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">Failed to start supervisord.service:Unit is not loaded properly: Is a directory.</span></strong></p><p id=\"ubfc7b708\" class=\"ne-p\"><span class=\"ne-text\">提示 </span><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">supervisord.service </span></strong><span class=\"ne-text\">单元是一个目录。</span></p><p id=\"u4f1ec4ce\" class=\"ne-p\"><span class=\"ne-text\">找到对应位置：</span></p><p id=\"u42d783c1\" class=\"ne-p\"><span class=\"ne-text\">/usr/lib/systemd/system  并搜索：</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">supervisord.service</span></strong></p><p id=\"ufdf03a70\" class=\"ne-p\"><span class=\"ne-text\">可以看到 搜索到的是一个目录而非文件。</span></p><p id=\"ua4fb4207\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348991148-de5860cd-b407-4ae8-927b-27eb7e219e99.png\" width=\"1252\" id=\"u72342fce\" class=\"ne-image\"></p><h2 id=\"Q8O4G\"><span class=\"ne-text\">修复方案：</span></h2><h3 id=\"XaV1n\"><span class=\"ne-text\">一、</span></h3><p id=\"u535d8daa\" class=\"ne-p\"><span class=\"ne-text\">找到：软件商店》守护进程》点击修复。之后正常</span></p><p id=\"u073a01fd\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ud8b17128\" class=\"ne-p\"><span class=\"ne-text\">二、</span></p><p id=\"u5ae47a2f\" class=\"ne-p\"><span class=\"ne-text\">找到unit目录 /usr/lib/systemd/system ，删除文件夹supervisord.service 新建文件supervisord.service，</span></p><p id=\"u7d98bb9a\" class=\"ne-p\"><span class=\"ne-text\">并创建文件内容：</span></p><pre data-language=\"shell\" id=\"J5B10\" class=\"ne-codeblock language-shell\"><code>[Unit]\nDescription=Process Monitoring and Control Daemon\nAfter=rc-local.service nss-user-lookup.target\n\n[Service]\nType=forking\nExecStart=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord -c /etc/supervisor/supervisord.conf\nExecStop=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord  shutdown\nExecReload=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord  reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n[Install]\nWantedBy=multi-user.target</code></pre><p id=\"ufe1f2943\" class=\"ne-p\"><span class=\"ne-text\">之后正常。</span></p></div>",
    "body": "tags: [守护进程,supervisor]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n> 宝塔面板，正常使用过程中，突然守护进程异常报错，无论重启还是停止均无法执行。\n> 这里记录一下，以便后期参考使用\n\n\n<a name=\"GqPox\"></a>\n## 找到错误日志：\n![d2e06cd87d88f75fa02fd0bad240037.png](https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348561561-38e57629-0f27-4c02-8e74-7b8ea2884690.png#averageHue=%2354514f&clientId=u5e8e42e4-989a-4&from=paste&height=709&id=u28b1112f&originHeight=709&originWidth=1549&originalType=binary&ratio=1&rotation=0&showTitle=false&size=123584&status=done&style=none&taskId=u287102a5-d45a-4f76-a577-ddf23ecfec6&title=&width=1549)<br />排查看到：<br />**Failed to start supervisord.service:Unit is not loaded properly: Is a directory.**<br />提示 **supervisord.service **单元是一个目录。<br />找到对应位置：<br />/usr/lib/systemd/system  并搜索：**supervisord.service**<br />可以看到 搜索到的是一个目录而非文件。<br />![c12343cbeefa0ae544142b7cbb51e57.png](https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348991148-de5860cd-b407-4ae8-927b-27eb7e219e99.png#averageHue=%23fafafa&clientId=u5e8e42e4-989a-4&from=paste&height=815&id=u72342fce&originHeight=815&originWidth=1252&originalType=binary&ratio=1&rotation=0&showTitle=false&size=75986&status=done&style=none&taskId=ue0fe2e79-4c8a-495c-b07a-c17c111c152&title=&width=1252)\n<a name=\"Q8O4G\"></a>\n## 修复方案：\n<a name=\"XaV1n\"></a>\n### 一、\n找到：软件商店》守护进程》点击修复。之后正常\n\n二、<br />找到unit目录 /usr/lib/systemd/system ，删除文件夹supervisord.service 新建文件supervisord.service，<br />并创建文件内容：\n```shell\n[Unit]\nDescription=Process Monitoring and Control Daemon\nAfter=rc-local.service nss-user-lookup.target\n\n[Service]\nType=forking\nExecStart=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord -c /etc/supervisor/supervisord.conf\nExecStop=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord  shutdown\nExecReload=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord  reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n[Install]\nWantedBy=multi-user.target\n```\n之后正常。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [守护进程,supervisor]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">宝塔面板，正常使用过程中，突然守护进程异常报错，无论重启还是停止均无法执行。</span></p><p id=\"u39a81ff7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这里记录一下，以便后期参考使用</span></p></div><p id=\"u238309a8\" class=\"ne-p\"><br></p><h2 id=\"GqPox\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">找到错误日志：</span></h2><p id=\"u2bc2e375\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348561561-38e57629-0f27-4c02-8e74-7b8ea2884690.png\" width=\"1549\" id=\"u28b1112f\" class=\"ne-image\"></p><p id=\"u662bb748\" class=\"ne-p\"><span class=\"ne-text\">排查看到：</span></p><p id=\"uaaf2fff4\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">Failed to start supervisord.service:Unit is not loaded properly: Is a directory.</span></strong></p><p id=\"ubfc7b708\" class=\"ne-p\"><span class=\"ne-text\">提示 </span><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">supervisord.service </span></strong><span class=\"ne-text\">单元是一个目录。</span></p><p id=\"u4f1ec4ce\" class=\"ne-p\"><span class=\"ne-text\">找到对应位置：</span></p><p id=\"u42d783c1\" class=\"ne-p\"><span class=\"ne-text\">/usr/lib/systemd/system  并搜索：</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F\">supervisord.service</span></strong></p><p id=\"ufdf03a70\" class=\"ne-p\"><span class=\"ne-text\">可以看到 搜索到的是一个目录而非文件。</span></p><p id=\"ua4fb4207\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1716348991148-de5860cd-b407-4ae8-927b-27eb7e219e99.png\" width=\"1252\" id=\"u72342fce\" class=\"ne-image\"></p><h2 id=\"Q8O4G\"><span class=\"ne-text\">修复方案：</span></h2><h3 id=\"XaV1n\"><span class=\"ne-text\">一、</span></h3><p id=\"u535d8daa\" class=\"ne-p\"><span class=\"ne-text\">找到：软件商店》守护进程》点击修复。之后正常</span></p><p id=\"u073a01fd\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ud8b17128\" class=\"ne-p\"><span class=\"ne-text\">二、</span></p><p id=\"u5ae47a2f\" class=\"ne-p\"><span class=\"ne-text\">找到unit目录 /usr/lib/systemd/system ，删除文件夹supervisord.service 新建文件supervisord.service，</span></p><p id=\"u7d98bb9a\" class=\"ne-p\"><span class=\"ne-text\">并创建文件内容：</span></p><pre data-language=\"shell\" id=\"J5B10\" class=\"ne-codeblock language-shell\"><code>[Unit]\nDescription=Process Monitoring and Control Daemon\nAfter=rc-local.service nss-user-lookup.target\n\n[Service]\nType=forking\nExecStart=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord -c /etc/supervisor/supervisord.conf\nExecStop=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord  shutdown\nExecReload=/www/server/panel/pyenv/bin/python /www/server/panel/pyenv/bin/supervisord  reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n[Install]\nWantedBy=multi-user.target</code></pre><p id=\"ufe1f2943\" class=\"ne-p\"><span class=\"ne-text\">之后正常。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [守护进程,supervisor]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"u417dd081\" id=\"u417dd081\"><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">宝塔面板，正常使用过程中，突然守护进程异常报错，无论重启还是停止均无法执行。</span></p><p data-lake-id=\"u39a81ff7\" id=\"u39a81ff7\"><span data-lake-id=\"u52030f42\" id=\"u52030f42\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">这里记录一下，以便后期参考使用</span></p></blockquote><p data-lake-id=\"u238309a8\" id=\"u238309a8\"><br></p><h2 data-lake-id=\"GqPox\" id=\"GqPox\"><span data-lake-id=\"u04fcd0a9\" id=\"u04fcd0a9\" style=\"color: rgb(51, 51, 51)\">找到错误日志：</span></h2><p data-lake-id=\"u2bc2e375\" id=\"u2bc2e375\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2024%2Fpng%2F27022430%2F1716348561561-38e57629-0f27-4c02-8e74-7b8ea2884690.png%22%2C%22taskId%22%3A%22u287102a5-d45a-4f76-a577-ddf23ecfec6%22%2C%22clientId%22%3A%22u5e8e42e4-989a-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1549%2C%22height%22%3A709%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22d2e06cd87d88f75fa02fd0bad240037.png%22%2C%22size%22%3A123584%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1549%2C%22originHeight%22%3A709%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E7%89%9B%E8%82%89%20%E5%B0%8F%E5%9E%8B%3A1111.1.%20%E5%B0%8F%E5%88%80%E6%B2%B9%2C%20LLDITIOND%20ING%20IND%20%20IND%20ING%20IND%20IND%20INDITION%20%20DITION%20%20DITIONDITIONDITING%20INDITIONDITIONDITINN%20%20INDITIO%20%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%AE%A2%2C%20%E5%B0%8F%E5%9E%8B%3A111111111111111111%20%E5%B0%8F%E7%89%9B%E7%89%9B%E8%82%89%2C%20GET%20LIST%5C%5CNFILES%20GET%20LIST%5C%5COFILES%20GET%20LIST%5C%5CNFILES%20EET%20LIST%5C%5CNFILE%20%E5%B0%8F%E9%87%8F11181111111811181118111811181118111811510111811%20%E5%B0%8F%E5%88%80%E6%B2%B9%2C%20%E5%AE%9D%E5%9F%B9UNUX%E8%A5%BF%E9%A5%ADG2014-2024%20%E5%B9%BF%E4%B8%9C%E9%80%9A%E5%9F%B9%E5%AE%89%E9%87%91%E6%8C%89%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8(BTCN)%20%E8%AE%BA%E5%9D%9B%E6%B1%82%E5%8A%A9%2C%5D%20%20%20%20%20I%20%20%E6%AD%A3%E7%89%88%E7%9B%B2%E5%95%86%20I%20%E8%81%94%E7%B3%BB%E4%BA%BA%E5%B7%A5%E5%95%86%E6%9C%8D)%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A34%2C%22y%22%3A49%2C%22width%22%3A1519%2C%22height%22%3A16%2C%22text%22%3A%22%E7%89%9B%E8%82%89%22%7D%2C%7B%22x%22%3A34%2C%22y%22%3A72%2C%22width%22%3A1482%2C%22height%22%3A17%2C%22text%22%3A%22%E5%B0%8F%E5%9E%8B%3A1111.1.%22%7D%2C%7B%22x%22%3A36%2C%22y%22%3A117%2C%22width%22%3A1516%2C%22height%22%3A20%2C%22text%22%3A%22%E5%B0%8F%E5%88%80%E6%B2%B9%2C%22%7D%2C%7B%22x%22%3A34%2C%22y%22%3A160%2C%22width%22%3A1522%2C%22height%22%3A20%2C%22text%22%3A%22LLDITIOND%20ING%20IND%20%20IND%20ING%20IND%20IND%20INDITION%20%20DITION%20%20DITIONDITIONDITING%20INDITIONDITIONDITINN%20%20INDITIO%22%7D%2C%7B%22x%22%3A33%2C%22y%22%3A186%2C%22width%22%3A1474%2C%22height%22%3A18%2C%22text%22%3A%22%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%B0%8F%E5%AE%A2%2C%22%7D%2C%7B%22x%22%3A35%2C%22y%22%3A255%2C%22width%22%3A1519%2C%22height%22%3A19%2C%22text%22%3A%22%E5%B0%8F%E5%9E%8B%3A111111111111111111%22%7D%2C%7B%22x%22%3A34%2C%22y%22%3A325%2C%22width%22%3A1523%2C%22height%22%3A16%2C%22text%22%3A%22%E5%B0%8F%E7%89%9B%E7%89%9B%E8%82%89%2C%22%7D%2C%7B%22x%22%3A33%2C%22y%22%3A346%2C%22width%22%3A404%2C%22height%22%3A18%2C%22text%22%3A%22GET%20LIST%5C%5CNFILES%20GET%20LIST%5C%5COFILES%20GET%20LIST%5C%5CNFILES%20EET%20LIST%5C%5CNFILE%22%7D%2C%7B%22x%22%3A35%2C%22y%22%3A395%2C%22width%22%3A1476%2C%22height%22%3A16%2C%22text%22%3A%22%E5%B0%8F%E9%87%8F11181111111811181118111811181118111811510111811%22%7D%2C%7B%22x%22%3A36%2C%22y%22%3A507%2C%22width%22%3A1516%2C%22height%22%3A18%2C%22text%22%3A%22%E5%B0%8F%E5%88%80%E6%B2%B9%2C%22%7D%2C%7B%22x%22%3A477%2C%22y%22%3A693%2C%22width%22%3A701%2C%22height%22%3A15%2C%22text%22%3A%22%E5%AE%9D%E5%9F%B9UNUX%E8%A5%BF%E9%A5%ADG2014-2024%20%E5%B9%BF%E4%B8%9C%E9%80%9A%E5%9F%B9%E5%AE%89%E9%87%91%E6%8C%89%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8(BTCN)%20%E8%AE%BA%E5%9D%9B%E6%B1%82%E5%8A%A9%2C%5D%20%20%20%20%20I%20%20%E6%AD%A3%E7%89%88%E7%9B%B2%E5%95%86%20I%20%E8%81%94%E7%B3%BB%E4%BA%BA%E5%B7%A5%E5%95%86%E6%9C%8D)%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%2354514f%22%2C%22id%22%3A%22u28b1112f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u662bb748\" id=\"u662bb748\"><span data-lake-id=\"udab1aa8e\" id=\"udab1aa8e\">排查看到：</span></p><p data-lake-id=\"uaaf2fff4\" id=\"uaaf2fff4\"><strong><span data-lake-id=\"uf7280728\" id=\"uf7280728\" style=\"color: #DF2A3F\">Failed to start supervisord.service:Unit is not loaded properly: Is a directory.</span></strong></p><p data-lake-id=\"ubfc7b708\" id=\"ubfc7b708\"><span data-lake-id=\"ube967854\" id=\"ube967854\">提示 </span><strong><span data-lake-id=\"ua3bd184c\" id=\"ua3bd184c\" style=\"color: #DF2A3F\">supervisord.service </span></strong><span data-lake-id=\"u664c6115\" id=\"u664c6115\">单元是一个目录。</span></p><p data-lake-id=\"u4f1ec4ce\" id=\"u4f1ec4ce\"><span data-lake-id=\"u42946fa6\" id=\"u42946fa6\">找到对应位置：</span></p><p data-lake-id=\"u42d783c1\" id=\"u42d783c1\"><span data-lake-id=\"u817ea447\" id=\"u817ea447\">/usr/lib/systemd/system  并搜索：</span><strong><span data-lake-id=\"ua0fdf5c7\" id=\"ua0fdf5c7\" style=\"color: #DF2A3F\">supervisord.service</span></strong></p><p data-lake-id=\"ufdf03a70\" id=\"ufdf03a70\"><span data-lake-id=\"uae62eef5\" id=\"uae62eef5\">可以看到 搜索到的是一个目录而非文件。</span></p><p data-lake-id=\"ua4fb4207\" id=\"ua4fb4207\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2024%2Fpng%2F27022430%2F1716348991148-de5860cd-b407-4ae8-927b-27eb7e219e99.png%22%2C%22taskId%22%3A%22ue0fe2e79-4c8a-495c-b07a-c17c111c152%22%2C%22clientId%22%3A%22u5e8e42e4-989a-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1252%2C%22height%22%3A815%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22c12343cbeefa0ae544142b7cbb51e57.png%22%2C%22size%22%3A75986%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1252%2C%22originHeight%22%3A815%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22LIB%20%E6%A0%B9%E7%9B%AE%E5%BD%95%20SYSTEMD%20SYSTEM%20USR%20%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5%20%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%98%B2%E5%A4%8D%E6%94%B9%20%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95%20%E5%88%86%E4%BA%AB%E5%88%97%E8%A1%A8%20%E6%96%B0%E5%BB%BA%20%E6%94%B6%E8%97%8F%E5%A4%B9V%20%2F%E6%A0%B9%E7%9B%AE%E5%BD%95)(1...%20%E8%BF%9C%E7%A8%8B%E4%B8%8B%E8%BD%BD%20%2FMYDATA(41...%20%5D%E7%BB%88%E7%AB%AF%20%E4%B8%8A%E4%BC%A0%20%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%90%9C%E7%B4%A2%20%E5%A4%A7%E5%B0%8F%20%E5%A4%87%E6%B3%A8%20%E9%98%B2%E7%AF%A1%E6%94%B9%20%E6%96%87%E4%BB%B6%E5%90%8D%20%E6%9D%83%E9%99%90%2F%E6%89%80%E6%9C%89%E8%80%85%20%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%20755%2FROOT%202019%2F10%2F08%2017%3A19%3A39%20RUNLEVEL2.TARGET.WANTS%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%20%E5%8F%A3%20755%2FROOT%202019%2F10%2F08%2017%3A19%3A39%20RUNLEVEL3.TARGET.WANTS%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%202019%2F10%2F08%2017%3A19%3A39%20RUNLEVEL4.TARGET.WANTS%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%87%BA%20RUNLEVEL5.TARGET.WANTS%20755%2FROOT%202019%2F10%2F08%2017%3A19%3A39%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E7%9F%B3%20%E8%AE%A1%E7%AE%97%20755%2FROOT%202019%2F10%2F08%2017%3A14%3A20%20SHUTDOWN.TARGET.WANTS%20%E8%AE%A1%E7%AE%97%202020%2F08%2F08%20%2021%3A11%3A55%20%E6%9C%AA%E9%98%B2%E6%8A%A4%20SOCKETS.TARGET.WANTS%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%B0755%2FROOT%20%E8%AE%A1%E7%AE%97%202024%2F04%2F30%2009%3A14%3A00%20SUPERVISORD.SERVICE%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%87%B8755%2FROOT%202019%2F10%2F08%2017%3A19%3A39%20SYSINIT.TARGET.WANTS%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%20755%2FROOT%202019%2F09%2F1402%3A19%3A27%20SYSLOG.TARGET.WANTS%20%E8%AE%A1%E7%AE%97%20%E6%9C%AA%E9%98%B2%E6%8A%A4%202019%2F10%2F08%2017%3A19%3A39%20TIMERS.TARGET.WANTS%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%A36%20403%20B%20644%2FROOT%202019%2F09%2F14%2002%3A19%3A25%20SLICE%20NETWORKMANAGER-DISPATCHER.SERVICE%20%E6%9C%AA%E9%98%B2%E6%8A%A4%20%E5%8F%A3%20644%2FROOT%202019%2F09%2F14%2002%3A04%3A33%20353%20B%20NETWORKMANAGER-WAIT-ONLINE.SERVICE%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%AC%202019%2F09%2F14%2002%3A04%3A33%20303%20B%20644%2FROOT%20%E6%9C%AA%E9%98%B2%E6%8A%A4%20644%2FROOT%201.41%20KB%20NETWORKMANAGER.SERVICE%202019%2F09%2F14%2002%3A04%3A33%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%A3%20644%2FROOT%20275B%202019%2F08%2F09%2009%3A10%3A23%20ARP-ETHERS.SERVICE%20%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%A3%202018%2F10%2F31%2001%3A10%3A18%20ATD.SERVICE%20644%2FROOT%20222%20B%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A173%2C%22y%22%3A19%2C%22width%22%3A21%2C%22height%22%3A13%2C%22text%22%3A%22LIB%22%7D%2C%7B%22x%22%3A65%2C%22y%22%3A19%2C%22width%22%3A45%2C%22height%22%3A15%2C%22text%22%3A%22%E6%A0%B9%E7%9B%AE%E5%BD%95%22%7D%2C%7B%22x%22%3A216%2C%22y%22%3A20%2C%22width%22%3A54%2C%22height%22%3A14%2C%22text%22%3A%22SYSTEMD%22%7D%2C%7B%22x%22%3A288%2C%22y%22%3A20%2C%22width%22%3A50%2C%22height%22%3A14%2C%22text%22%3A%22SYSTEM%22%7D%2C%7B%22x%22%3A128%2C%22y%22%3A21%2C%22width%22%3A24%2C%22height%22%3A11%2C%22text%22%3A%22USR%22%7D%2C%7B%22x%22%3A990%2C%22y%22%3A79%2C%22width%22%3A50%2C%22height%22%3A16%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5%22%7D%2C%7B%22x%22%3A894%2C%22y%22%3A79%2C%22width%22%3A74%2C%22height%22%3A14%2C%22text%22%3A%22%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%98%B2%E5%A4%8D%E6%94%B9%22%7D%2C%7B%22x%22%3A534%2C%22y%22%3A79%2C%22width%22%3A75%2C%22height%22%3A15%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95%22%7D%2C%7B%22x%22%3A390%2C%22y%22%3A79%2C%22width%22%3A51%2C%22height%22%3A15%2C%22text%22%3A%22%E5%88%86%E4%BA%AB%E5%88%97%E8%A1%A8%22%7D%2C%7B%22x%22%3A162%2C%22y%22%3A79%2C%22width%22%3A34%2C%22height%22%3A15%2C%22text%22%3A%22%E6%96%B0%E5%BB%BA%22%7D%2C%7B%22x%22%3A318%2C%22y%22%3A80%2C%22width%22%3A47%2C%22height%22%3A14%2C%22text%22%3A%22%E6%94%B6%E8%97%8F%E5%A4%B9V%22%7D%2C%7B%22x%22%3A655%2C%22y%22%3A80%2C%22width%22%3A76%2C%22height%22%3A15%2C%22text%22%3A%22%2F%E6%A0%B9%E7%9B%AE%E5%BD%95)(1...%22%7D%2C%7B%22x%22%3A77%2C%22y%22%3A80%2C%22width%22%3A55%2C%22height%22%3A13%2C%22text%22%3A%22%E8%BF%9C%E7%A8%8B%E4%B8%8B%E8%BD%BD%22%7D%2C%7B%22x%22%3A772%2C%22y%22%3A80%2C%22width%22%3A88%2C%22height%22%3A14%2C%22text%22%3A%22%2FMYDATA(41...%22%7D%2C%7B%22x%22%3A472%2C%22y%22%3A80%2C%22width%22%3A43%2C%22height%22%3A15%2C%22text%22%3A%22%5D%E7%BB%88%E7%AB%AF%22%7D%2C%7B%22x%22%3A32%2C%22y%22%3A80%2C%22width%22%3A25%2C%22height%22%3A14%2C%22text%22%3A%22%E4%B8%8A%E4%BC%A0%22%7D%2C%7B%22x%22%3A223%2C%22y%22%3A80%2C%22width%22%3A75%2C%22height%22%3A14%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%90%9C%E7%B4%A2%22%7D%2C%7B%22x%22%3A617%2C%22y%22%3A128%2C%22width%22%3A31%2C%22height%22%3A16%2C%22text%22%3A%22%E5%A4%A7%E5%B0%8F%22%7D%2C%7B%22x%22%3A852%2C%22y%22%3A128%2C%22width%22%3A30%2C%22height%22%3A17%2C%22text%22%3A%22%E5%A4%87%E6%B3%A8%22%7D%2C%7B%22x%22%3A418%2C%22y%22%3A129%2C%22width%22%3A41%2C%22height%22%3A16%2C%22text%22%3A%22%E9%98%B2%E7%AF%A1%E6%94%B9%22%7D%2C%7B%22x%22%3A72%2C%22y%22%3A129%2C%22width%22%3A40%2C%22height%22%3A16%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%E5%90%8D%22%7D%2C%7B%22x%22%3A498%2C%22y%22%3A129%2C%22width%22%3A80%2C%22height%22%3A15%2C%22text%22%3A%22%E6%9D%83%E9%99%90%2F%E6%89%80%E6%9C%89%E8%80%85%22%7D%2C%7B%22x%22%3A708%2C%22y%22%3A129%2C%22width%22%3A54%2C%22height%22%3A15%2C%22text%22%3A%22%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4%22%7D%2C%7B%22x%22%3A614%2C%22y%22%3A156%2C%22width%22%3A30%2C%22height%22%3A17%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A417%2C%22y%22%3A158%2C%22width%22%3A59%2C%22height%22%3A14%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%22%7D%2C%7B%22x%22%3A495%2C%22y%22%3A158%2C%22width%22%3A62%2C%22height%22%3A15%2C%22text%22%3A%22755%2FROOT%22%7D%2C%7B%22x%22%3A707%2C%22y%22%3A158%2C%22width%22%3A120%2C%22height%22%3A14%2C%22text%22%3A%222019%2F10%2F08%2017%3A19%3A39%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A161%2C%22width%22%3A129%2C%22height%22%3A13%2C%22text%22%3A%22RUNLEVEL2.TARGET.WANTS%22%7D%2C%7B%22x%22%3A615%2C%22y%22%3A197%2C%22width%22%3A30%2C%22height%22%3A17%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A197%2C%22width%22%3A60%2C%22height%22%3A16%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%20%E5%8F%A3%22%7D%2C%7B%22x%22%3A494%2C%22y%22%3A198%2C%22width%22%3A65%2C%22height%22%3A16%2C%22text%22%3A%22755%2FROOT%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A198%2C%22width%22%3A121%2C%22height%22%3A13%2C%22text%22%3A%222019%2F10%2F08%2017%3A19%3A39%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A199%2C%22width%22%3A130%2C%22height%22%3A13%2C%22text%22%3A%22RUNLEVEL3.TARGET.WANTS%22%7D%2C%7B%22x%22%3A615%2C%22y%22%3A236%2C%22width%22%3A29%2C%22height%22%3A17%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A237%2C%22width%22%3A143%2C%22height%22%3A17%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A238%2C%22width%22%3A120%2C%22height%22%3A13%2C%22text%22%3A%222019%2F10%2F08%2017%3A19%3A39%22%7D%2C%7B%22x%22%3A99%2C%22y%22%3A241%2C%22width%22%3A131%2C%22height%22%3A14%2C%22text%22%3A%22RUNLEVEL4.TARGET.WANTS%22%7D%2C%7B%22x%22%3A616%2C%22y%22%3A277%2C%22width%22%3A28%2C%22height%22%3A16%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A417%2C%22y%22%3A277%2C%22width%22%3A56%2C%22height%22%3A16%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%87%BA%22%7D%2C%7B%22x%22%3A99%2C%22y%22%3A277%2C%22width%22%3A130%2C%22height%22%3A15%2C%22text%22%3A%22RUNLEVEL5.TARGET.WANTS%22%7D%2C%7B%22x%22%3A495%2C%22y%22%3A278%2C%22width%22%3A63%2C%22height%22%3A17%2C%22text%22%3A%22755%2FROOT%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A279%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222019%2F10%2F08%2017%3A19%3A39%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A317%2C%22width%22%3A83%2C%22height%22%3A17%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E7%9F%B3%22%7D%2C%7B%22x%22%3A615%2C%22y%22%3A317%2C%22width%22%3A28%2C%22height%22%3A16%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A487%2C%22y%22%3A318%2C%22width%22%3A71%2C%22height%22%3A16%2C%22text%22%3A%22755%2FROOT%22%7D%2C%7B%22x%22%3A707%2C%22y%22%3A319%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222019%2F10%2F08%2017%3A14%3A20%22%7D%2C%7B%22x%22%3A101%2C%22y%22%3A320%2C%22width%22%3A132%2C%22height%22%3A12%2C%22text%22%3A%22SHUTDOWN.TARGET.WANTS%22%7D%2C%7B%22x%22%3A614%2C%22y%22%3A356%2C%22width%22%3A30%2C%22height%22%3A17%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A358%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222020%2F08%2F08%20%2021%3A11%3A55%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A358%2C%22width%22%3A144%2C%22height%22%3A16%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%22%7D%2C%7B%22x%22%3A101%2C%22y%22%3A359%2C%22width%22%3A119%2C%22height%22%3A12%2C%22text%22%3A%22SOCKETS.TARGET.WANTS%22%7D%2C%7B%22x%22%3A415%2C%22y%22%3A395%2C%22width%22%3A146%2C%22height%22%3A22%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%B0755%2FROOT%22%7D%2C%7B%22x%22%3A616%2C%22y%22%3A396%2C%22width%22%3A29%2C%22height%22%3A16%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A707%2C%22y%22%3A399%2C%22width%22%3A121%2C%22height%22%3A13%2C%22text%22%3A%222024%2F04%2F30%2009%3A14%3A00%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A400%2C%22width%22%3A113%2C%22height%22%3A14%2C%22text%22%3A%22SUPERVISORD.SERVICE%22%7D%2C%7B%22x%22%3A616%2C%22y%22%3A436%2C%22width%22%3A29%2C%22height%22%3A17%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A437%2C%22width%22%3A144%2C%22height%22%3A19%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%87%B8755%2FROOT%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A439%2C%22width%22%3A121%2C%22height%22%3A13%2C%22text%22%3A%222019%2F10%2F08%2017%3A19%3A39%22%7D%2C%7B%22x%22%3A102%2C%22y%22%3A441%2C%22width%22%3A111%2C%22height%22%3A13%2C%22text%22%3A%22SYSINIT.TARGET.WANTS%22%7D%2C%7B%22x%22%3A616%2C%22y%22%3A477%2C%22width%22%3A29%2C%22height%22%3A15%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A478%2C%22width%22%3A137%2C%22height%22%3A16%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%20755%2FROOT%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A478%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222019%2F09%2F1402%3A19%3A27%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A479%2C%22width%22%3A113%2C%22height%22%3A16%2C%22text%22%3A%22SYSLOG.TARGET.WANTS%22%7D%2C%7B%22x%22%3A616%2C%22y%22%3A516%2C%22width%22%3A29%2C%22height%22%3A16%2C%22text%22%3A%22%E8%AE%A1%E7%AE%97%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A518%2C%22width%22%3A143%2C%22height%22%3A15%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A518%2C%22width%22%3A120%2C%22height%22%3A13%2C%22text%22%3A%222019%2F10%2F08%2017%3A19%3A39%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A519%2C%22width%22%3A113%2C%22height%22%3A13%2C%22text%22%3A%22TIMERS.TARGET.WANTS%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A558%2C%22width%22%3A85%2C%22height%22%3A15%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%A36%22%7D%2C%7B%22x%22%3A617%2C%22y%22%3A558%2C%22width%22%3A34%2C%22height%22%3A13%2C%22text%22%3A%22403%20B%22%7D%2C%7B%22x%22%3A489%2C%22y%22%3A558%2C%22width%22%3A69%2C%22height%22%3A15%2C%22text%22%3A%22644%2FROOT%22%7D%2C%7B%22x%22%3A707%2C%22y%22%3A559%2C%22width%22%3A121%2C%22height%22%3A13%2C%22text%22%3A%222019%2F09%2F14%2002%3A19%3A25%22%7D%2C%7B%22x%22%3A105%2C%22y%22%3A559%2C%22width%22%3A31%2C%22height%22%3A13%2C%22text%22%3A%22SLICE%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A596%2C%22width%22%3A210%2C%22height%22%3A17%2C%22text%22%3A%22NETWORKMANAGER-DISPATCHER.SERVICE%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A598%2C%22width%22%3A57%2C%22height%22%3A15%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%20%E5%8F%A3%22%7D%2C%7B%22x%22%3A493%2C%22y%22%3A598%2C%22width%22%3A64%2C%22height%22%3A15%2C%22text%22%3A%22644%2FROOT%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A598%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222019%2F09%2F14%2002%3A04%3A33%22%7D%2C%7B%22x%22%3A617%2C%22y%22%3A599%2C%22width%22%3A34%2C%22height%22%3A12%2C%22text%22%3A%22353%20B%22%7D%2C%7B%22x%22%3A99%2C%22y%22%3A636%2C%22width%22%3A217%2C%22height%22%3A17%2C%22text%22%3A%22NETWORKMANAGER-WAIT-ONLINE.SERVICE%22%7D%2C%7B%22x%22%3A417%2C%22y%22%3A637%2C%22width%22%3A59%2C%22height%22%3A16%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%AC%22%7D%2C%7B%22x%22%3A705%2C%22y%22%3A638%2C%22width%22%3A122%2C%22height%22%3A14%2C%22text%22%3A%222019%2F09%2F14%2002%3A04%3A33%22%7D%2C%7B%22x%22%3A616%2C%22y%22%3A638%2C%22width%22%3A35%2C%22height%22%3A14%2C%22text%22%3A%22303%20B%22%7D%2C%7B%22x%22%3A495%2C%22y%22%3A639%2C%22width%22%3A64%2C%22height%22%3A14%2C%22text%22%3A%22644%2FROOT%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A677%2C%22width%22%3A60%2C%22height%22%3A19%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%22%7D%2C%7B%22x%22%3A495%2C%22y%22%3A678%2C%22width%22%3A64%2C%22height%22%3A17%2C%22text%22%3A%22644%2FROOT%22%7D%2C%7B%22x%22%3A617%2C%22y%22%3A679%2C%22width%22%3A45%2C%22height%22%3A14%2C%22text%22%3A%221.41%20KB%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A679%2C%22width%22%3A147%2C%22height%22%3A13%2C%22text%22%3A%22NETWORKMANAGER.SERVICE%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A680%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222019%2F09%2F14%2002%3A04%3A33%22%7D%2C%7B%22x%22%3A415%2C%22y%22%3A716%2C%22width%22%3A58%2C%22height%22%3A17%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%A3%22%7D%2C%7B%22x%22%3A495%2C%22y%22%3A718%2C%22width%22%3A63%2C%22height%22%3A17%2C%22text%22%3A%22644%2FROOT%22%7D%2C%7B%22x%22%3A617%2C%22y%22%3A718%2C%22width%22%3A35%2C%22height%22%3A14%2C%22text%22%3A%22275B%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A718%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222019%2F08%2F09%2009%3A10%3A23%22%7D%2C%7B%22x%22%3A100%2C%22y%22%3A718%2C%22width%22%3A107%2C%22height%22%3A17%2C%22text%22%3A%22ARP-ETHERS.SERVICE%22%7D%2C%7B%22x%22%3A416%2C%22y%22%3A756%2C%22width%22%3A60%2C%22height%22%3A17%2C%22text%22%3A%22%E6%9C%AA%E9%98%B2%E6%8A%A4%E5%8F%A3%22%7D%2C%7B%22x%22%3A706%2C%22y%22%3A758%2C%22width%22%3A121%2C%22height%22%3A14%2C%22text%22%3A%222018%2F10%2F31%2001%3A10%3A18%22%7D%2C%7B%22x%22%3A101%2C%22y%22%3A758%2C%22width%22%3A63%2C%22height%22%3A15%2C%22text%22%3A%22ATD.SERVICE%22%7D%2C%7B%22x%22%3A495%2C%22y%22%3A759%2C%22width%22%3A63%2C%22height%22%3A14%2C%22text%22%3A%22644%2FROOT%22%7D%2C%7B%22x%22%3A617%2C%22y%22%3A759%2C%22width%22%3A35%2C%22height%22%3A12%2C%22text%22%3A%22222%20B%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23fafafa%22%2C%22id%22%3A%22u72342fce%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"Q8O4G\" id=\"Q8O4G\"><span data-lake-id=\"u5fa53b07\" id=\"u5fa53b07\">修复方案：</span></h2><h3 data-lake-id=\"XaV1n\" id=\"XaV1n\"><span data-lake-id=\"u08a795f0\" id=\"u08a795f0\">一、</span></h3><p data-lake-id=\"u535d8daa\" id=\"u535d8daa\"><span data-lake-id=\"u289c036c\" id=\"u289c036c\">找到：软件商店》守护进程》点击修复。之后正常</span></p><p data-lake-id=\"u073a01fd\" id=\"u073a01fd\"><span data-lake-id=\"u8b1addcd\" id=\"u8b1addcd\">​</span><br></p><p data-lake-id=\"ud8b17128\" id=\"ud8b17128\"><span data-lake-id=\"u2fc0df58\" id=\"u2fc0df58\">二、</span></p><p data-lake-id=\"u5ae47a2f\" id=\"u5ae47a2f\"><span data-lake-id=\"u80ebf65f\" id=\"u80ebf65f\">找到unit目录 /usr/lib/systemd/system ，删除文件夹supervisord.service 新建文件supervisord.service，</span></p><p data-lake-id=\"u7d98bb9a\" id=\"u7d98bb9a\"><span data-lake-id=\"u2f3249ca\" id=\"u2f3249ca\">并创建文件内容：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%5BUnit%5D%5CnDescription%3DProcess%20Monitoring%20and%20Control%20Daemon%5CnAfter%3Drc-local.service%20nss-user-lookup.target%5Cn%5Cn%5BService%5D%5CnType%3Dforking%5CnExecStart%3D%2Fwww%2Fserver%2Fpanel%2Fpyenv%2Fbin%2Fpython%20%2Fwww%2Fserver%2Fpanel%2Fpyenv%2Fbin%2Fsupervisord%20-c%20%2Fetc%2Fsupervisor%2Fsupervisord.conf%5CnExecStop%3D%2Fwww%2Fserver%2Fpanel%2Fpyenv%2Fbin%2Fpython%20%2Fwww%2Fserver%2Fpanel%2Fpyenv%2Fbin%2Fsupervisord%20%20shutdown%5CnExecReload%3D%2Fwww%2Fserver%2Fpanel%2Fpyenv%2Fbin%2Fpython%20%2Fwww%2Fserver%2Fpanel%2Fpyenv%2Fbin%2Fsupervisord%20%20reload%5CnKillMode%3Dprocess%5CnRestart%3Don-failure%5CnRestartSec%3D42s%5Cn%5BInstall%5D%5CnWantedBy%3Dmulti-user.target%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22J5B10%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufe1f2943\" id=\"ufe1f2943\"><span data-lake-id=\"u5ebec043\" id=\"u5ebec043\">之后正常。</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 223,
    "created_at": "2024-05-22T03:25:46.000Z",
    "updated_at": "2024-05-22T03:36:36.000Z",
    "content_updated_at": "2024-05-22T03:36:36.000Z",
    "published_at": "2024-05-22T03:36:36.000Z",
    "first_published_at": "2024-05-22T03:36:13.265Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2535829662,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 170528056,
    "type": "Doc",
    "slug": "rqgntw9e6vwcvvka",
    "title": "通过 Python|PHP 生成mysql数据字典",
    "description": "tags: [mysql,数据字典]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:使用PHP和python生成数据字典，直接上代码，并...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql,数据字典]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />使用PHP和python生成数据字典，直接上代码，并保存到markdown里面</span></p></div><p id=\"u4df76582\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h2 id=\"ul4WD\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">php</span></h2><pre data-language=\"php\" id=\"wWA0p\" class=\"ne-codeblock language-php\"><code>&lt;?php\n  $database_name = '改成your database name';\n$output_file = $database_name . '.md'; // Markdown 文件名\n\n// 修改配置\n$conn = new mysqli('127.0.0.1', 'root', '123456', $database_name, 3306);\n\nif ($conn-&gt;connect_error) {\n  die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\n}\n\n$output = ''; // 用于存储 Markdown 内容\n\n$query_tables = &quot;SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE table_type='BASE TABLE' AND TABLE_SCHEMA='$database_name'&quot;;\n$result_tables = $conn-&gt;query($query_tables);\n\nif ($result_tables-&gt;num_rows &gt; 0) {\n  while ($table = $result_tables-&gt;fetch_assoc()) {\n    $table_name = $table['TABLE_NAME'];\n    $table_comment = $table['TABLE_COMMENT'];\n\n    $query_columns = &quot;SELECT ORDINAL_POSITION, COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE, COLUMN_COMMENT FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='$database_name' AND TABLE_NAME='$table_name'&quot;;\n    $result_columns = $conn-&gt;query($query_columns);\n\n    $output .= &quot;\\n\\n\\n### $table_name ($table_comment) \\n| 序号 | 字段名称 | 数据类型 | 是否为空 | 字段说明 |\\n| :--: |----| ---- | ---- | ---- |\\n&quot;;\n\n    $count = 1;\n    while ($column = $result_columns-&gt;fetch_assoc()) {\n      $ordinal_position = $column['ORDINAL_POSITION'];\n      $column_name = $column['COLUMN_NAME'];\n      $column_type = $column['COLUMN_TYPE'];\n      $is_nullable = $column['IS_NULLABLE'];\n      $column_comment = $column['COLUMN_COMMENT'];\n\n      $output .= &quot;| $count | $column_name | $column_type | $is_nullable | $column_comment |\\n&quot;;\n      $count++;\n    }\n  }\n}\n\n$conn-&gt;close();\n\n// 将 Markdown 内容写入文件\nfile_put_contents($output_file, $output);\n?&gt;</code></pre><h2 id=\"LsY1U\"><span class=\"ne-text\">python</span></h2><pre data-language=\"python\" id=\"xRGyY\" class=\"ne-codeblock language-python\"><code>def generate(database_name):\n    &quot;&quot;&quot;\n    生成数据库字典表\n    &quot;&quot;&quot;\n    importlib.reload(sys)\n\n    # 使用前修改配置\n    conn = mysql.connector.connect(\n        host='127.0.0.1',\n        port='3306',\n        user='root',\n        password='123456',\n        use_pure=True\n    )\n\n    cursor = conn.cursor()\n\n    cursor.execute(\n        &quot;SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE table_type='BASE TABLE' AND TABLE_SCHEMA='%s'&quot; % database_name\n    )\n\n    tables = cursor.fetchall()\n\n    markdown_table_header = &quot;&quot;&quot;\\n\\n\\n### %s (%s) \\n| 序号 | 字段名称 | 数据类型 | 是否为空 | 字段说明 |\\n| :--: |----| ---- | ---- | ---- |\\n&quot;&quot;&quot;\n    markdown_table_row = &quot;&quot;&quot;| %s | %s | %s | %s | %s |&quot;&quot;&quot;\n\n    f = open(database_name + '.md', 'w')\n\n    for table in tables:\n\n        cursor.execute(\n            &quot;SELECT ORDINAL_POSITION, COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE, COLUMN_COMMENT &quot;\n            &quot;FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='%s' AND TABLE_NAME='%s'&quot; % (\n                database_name, table[0]\n            )\n        )\n\n        tmp_table = cursor.fetchall()\n        p = markdown_table_header % (table[0], remove_newline(table[1]))\n        for col in tmp_table:\n            p += (remove_newline(markdown_table_row % col) + &quot;\\n&quot;)\n        print(p)\n        f.writelines(p)\n\n    f.close()\n</code></pre></div>",
    "body": "tags: [mysql,数据字典]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n> <br />使用PHP和python生成数据字典，直接上代码，并保存到markdown里面\n\n\n<a name=\"ul4WD\"></a>\n## php\n```php\n<?php\n  $database_name = '改成your database name';\n$output_file = $database_name . '.md'; // Markdown 文件名\n\n// 修改配置\n$conn = new mysqli('127.0.0.1', 'root', '123456', $database_name, 3306);\n\nif ($conn->connect_error) {\n  die(\"Connection failed: \" . $conn->connect_error);\n}\n\n$output = ''; // 用于存储 Markdown 内容\n\n$query_tables = \"SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE table_type='BASE TABLE' AND TABLE_SCHEMA='$database_name'\";\n$result_tables = $conn->query($query_tables);\n\nif ($result_tables->num_rows > 0) {\n  while ($table = $result_tables->fetch_assoc()) {\n    $table_name = $table['TABLE_NAME'];\n    $table_comment = $table['TABLE_COMMENT'];\n\n    $query_columns = \"SELECT ORDINAL_POSITION, COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE, COLUMN_COMMENT FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='$database_name' AND TABLE_NAME='$table_name'\";\n    $result_columns = $conn->query($query_columns);\n\n    $output .= \"\\n\\n\\n### $table_name ($table_comment) \\n| 序号 | 字段名称 | 数据类型 | 是否为空 | 字段说明 |\\n| :--: |----| ---- | ---- | ---- |\\n\";\n\n    $count = 1;\n    while ($column = $result_columns->fetch_assoc()) {\n      $ordinal_position = $column['ORDINAL_POSITION'];\n      $column_name = $column['COLUMN_NAME'];\n      $column_type = $column['COLUMN_TYPE'];\n      $is_nullable = $column['IS_NULLABLE'];\n      $column_comment = $column['COLUMN_COMMENT'];\n\n      $output .= \"| $count | $column_name | $column_type | $is_nullable | $column_comment |\\n\";\n      $count++;\n    }\n  }\n}\n\n$conn->close();\n\n// 将 Markdown 内容写入文件\nfile_put_contents($output_file, $output);\n?>\n```\n<a name=\"LsY1U\"></a>\n## python\n```python\ndef generate(database_name):\n    \"\"\"\n    生成数据库字典表\n    \"\"\"\n    importlib.reload(sys)\n\n    # 使用前修改配置\n    conn = mysql.connector.connect(\n        host='127.0.0.1',\n        port='3306',\n        user='root',\n        password='123456',\n        use_pure=True\n    )\n\n    cursor = conn.cursor()\n\n    cursor.execute(\n        \"SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE table_type='BASE TABLE' AND TABLE_SCHEMA='%s'\" % database_name\n    )\n\n    tables = cursor.fetchall()\n\n    markdown_table_header = \"\"\"\\n\\n\\n### %s (%s) \\n| 序号 | 字段名称 | 数据类型 | 是否为空 | 字段说明 |\\n| :--: |----| ---- | ---- | ---- |\\n\"\"\"\n    markdown_table_row = \"\"\"| %s | %s | %s | %s | %s |\"\"\"\n\n    f = open(database_name + '.md', 'w')\n\n    for table in tables:\n\n        cursor.execute(\n            \"SELECT ORDINAL_POSITION, COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE, COLUMN_COMMENT \"\n            \"FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='%s' AND TABLE_NAME='%s'\" % (\n                database_name, table[0]\n            )\n        )\n\n        tmp_table = cursor.fetchall()\n        p = markdown_table_header % (table[0], remove_newline(table[1]))\n        for col in tmp_table:\n            p += (remove_newline(markdown_table_row % col) + \"\\n\")\n        print(p)\n        f.writelines(p)\n\n    f.close()\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql,数据字典]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />使用PHP和python生成数据字典，直接上代码，并保存到markdown里面</span></p></div><p id=\"u4df76582\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h2 id=\"ul4WD\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">php</span></h2><pre data-language=\"php\" id=\"wWA0p\" class=\"ne-codeblock language-php\"><code>&lt;?php\n  $database_name = '改成your database name';\n$output_file = $database_name . '.md'; // Markdown 文件名\n\n// 修改配置\n$conn = new mysqli('127.0.0.1', 'root', '123456', $database_name, 3306);\n\nif ($conn-&gt;connect_error) {\n  die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\n}\n\n$output = ''; // 用于存储 Markdown 内容\n\n$query_tables = &quot;SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE table_type='BASE TABLE' AND TABLE_SCHEMA='$database_name'&quot;;\n$result_tables = $conn-&gt;query($query_tables);\n\nif ($result_tables-&gt;num_rows &gt; 0) {\n  while ($table = $result_tables-&gt;fetch_assoc()) {\n    $table_name = $table['TABLE_NAME'];\n    $table_comment = $table['TABLE_COMMENT'];\n\n    $query_columns = &quot;SELECT ORDINAL_POSITION, COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE, COLUMN_COMMENT FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='$database_name' AND TABLE_NAME='$table_name'&quot;;\n    $result_columns = $conn-&gt;query($query_columns);\n\n    $output .= &quot;\\n\\n\\n### $table_name ($table_comment) \\n| 序号 | 字段名称 | 数据类型 | 是否为空 | 字段说明 |\\n| :--: |----| ---- | ---- | ---- |\\n&quot;;\n\n    $count = 1;\n    while ($column = $result_columns-&gt;fetch_assoc()) {\n      $ordinal_position = $column['ORDINAL_POSITION'];\n      $column_name = $column['COLUMN_NAME'];\n      $column_type = $column['COLUMN_TYPE'];\n      $is_nullable = $column['IS_NULLABLE'];\n      $column_comment = $column['COLUMN_COMMENT'];\n\n      $output .= &quot;| $count | $column_name | $column_type | $is_nullable | $column_comment |\\n&quot;;\n      $count++;\n    }\n  }\n}\n\n$conn-&gt;close();\n\n// 将 Markdown 内容写入文件\nfile_put_contents($output_file, $output);\n?&gt;</code></pre><h2 id=\"LsY1U\"><span class=\"ne-text\">python</span></h2><pre data-language=\"python\" id=\"xRGyY\" class=\"ne-codeblock language-python\"><code>def generate(database_name):\n    &quot;&quot;&quot;\n    生成数据库字典表\n    &quot;&quot;&quot;\n    importlib.reload(sys)\n\n    # 使用前修改配置\n    conn = mysql.connector.connect(\n        host='127.0.0.1',\n        port='3306',\n        user='root',\n        password='123456',\n        use_pure=True\n    )\n\n    cursor = conn.cursor()\n\n    cursor.execute(\n        &quot;SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE table_type='BASE TABLE' AND TABLE_SCHEMA='%s'&quot; % database_name\n    )\n\n    tables = cursor.fetchall()\n\n    markdown_table_header = &quot;&quot;&quot;\\n\\n\\n### %s (%s) \\n| 序号 | 字段名称 | 数据类型 | 是否为空 | 字段说明 |\\n| :--: |----| ---- | ---- | ---- |\\n&quot;&quot;&quot;\n    markdown_table_row = &quot;&quot;&quot;| %s | %s | %s | %s | %s |&quot;&quot;&quot;\n\n    f = open(database_name + '.md', 'w')\n\n    for table in tables:\n\n        cursor.execute(\n            &quot;SELECT ORDINAL_POSITION, COLUMN_NAME, COLUMN_TYPE, IS_NULLABLE, COLUMN_COMMENT &quot;\n            &quot;FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='%s' AND TABLE_NAME='%s'&quot; % (\n                database_name, table[0]\n            )\n        )\n\n        tmp_table = cursor.fetchall()\n        p = markdown_table_header % (table[0], remove_newline(table[1]))\n        for col in tmp_table:\n            p += (remove_newline(markdown_table_row % col) + &quot;\\n&quot;)\n        print(p)\n        f.writelines(p)\n\n    f.close()\n</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [mysql,数据字典]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"u11ff7a54\" id=\"u11ff7a54\"><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br />使用PHP和python生成数据字典，直接上代码，并保存到markdown里面</span></p></blockquote><p data-lake-id=\"u4df76582\" id=\"u4df76582\"><span data-lake-id=\"u7fe8bb2b\" id=\"u7fe8bb2b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><h2 data-lake-id=\"ul4WD\" id=\"ul4WD\"><span data-lake-id=\"u574bb54c\" id=\"u574bb54c\" style=\"color: rgb(51, 51, 51)\">php</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%20%20%24database_name%20%3D%20'%E6%94%B9%E6%88%90your%20database%20name'%3B%5Cn%24output_file%20%3D%20%24database_name%20.%20'.md'%3B%20%2F%2F%20Markdown%20%E6%96%87%E4%BB%B6%E5%90%8D%5Cn%5Cn%2F%2F%20%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%5Cn%24conn%20%3D%20new%20mysqli('127.0.0.1'%2C%20'root'%2C%20'123456'%2C%20%24database_name%2C%203306)%3B%5Cn%5Cnif%20(%24conn-%3Econnect_error)%20%7B%5Cn%20%20die(%5C%22Connection%20failed%3A%20%5C%22%20.%20%24conn-%3Econnect_error)%3B%5Cn%7D%5Cn%5Cn%24output%20%3D%20''%3B%20%2F%2F%20%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8%20Markdown%20%E5%86%85%E5%AE%B9%5Cn%5Cn%24query_tables%20%3D%20%5C%22SELECT%20TABLE_NAME%2C%20TABLE_COMMENT%20FROM%20information_schema.TABLES%20WHERE%20table_type%3D'BASE%20TABLE'%20AND%20TABLE_SCHEMA%3D'%24database_name'%5C%22%3B%5Cn%24result_tables%20%3D%20%24conn-%3Equery(%24query_tables)%3B%5Cn%5Cnif%20(%24result_tables-%3Enum_rows%20%3E%200)%20%7B%5Cn%20%20while%20(%24table%20%3D%20%24result_tables-%3Efetch_assoc())%20%7B%5Cn%20%20%20%20%24table_name%20%3D%20%24table%5B'TABLE_NAME'%5D%3B%5Cn%20%20%20%20%24table_comment%20%3D%20%24table%5B'TABLE_COMMENT'%5D%3B%5Cn%5Cn%20%20%20%20%24query_columns%20%3D%20%5C%22SELECT%20ORDINAL_POSITION%2C%20COLUMN_NAME%2C%20COLUMN_TYPE%2C%20IS_NULLABLE%2C%20COLUMN_COMMENT%20FROM%20information_schema.COLUMNS%20WHERE%20TABLE_SCHEMA%3D'%24database_name'%20AND%20TABLE_NAME%3D'%24table_name'%5C%22%3B%5Cn%20%20%20%20%24result_columns%20%3D%20%24conn-%3Equery(%24query_columns)%3B%5Cn%5Cn%20%20%20%20%24output%20.%3D%20%5C%22%5C%5Cn%5C%5Cn%5C%5Cn%23%23%23%20%24table_name%20(%24table_comment)%20%5C%5Cn%7C%20%E5%BA%8F%E5%8F%B7%20%7C%20%E5%AD%97%E6%AE%B5%E5%90%8D%E7%A7%B0%20%7C%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%20%7C%20%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA%20%7C%20%E5%AD%97%E6%AE%B5%E8%AF%B4%E6%98%8E%20%7C%5C%5Cn%7C%20%3A--%3A%20%7C----%7C%20----%20%7C%20----%20%7C%20----%20%7C%5C%5Cn%5C%22%3B%5Cn%5Cn%20%20%20%20%24count%20%3D%201%3B%5Cn%20%20%20%20while%20(%24column%20%3D%20%24result_columns-%3Efetch_assoc())%20%7B%5Cn%20%20%20%20%20%20%24ordinal_position%20%3D%20%24column%5B'ORDINAL_POSITION'%5D%3B%5Cn%20%20%20%20%20%20%24column_name%20%3D%20%24column%5B'COLUMN_NAME'%5D%3B%5Cn%20%20%20%20%20%20%24column_type%20%3D%20%24column%5B'COLUMN_TYPE'%5D%3B%5Cn%20%20%20%20%20%20%24is_nullable%20%3D%20%24column%5B'IS_NULLABLE'%5D%3B%5Cn%20%20%20%20%20%20%24column_comment%20%3D%20%24column%5B'COLUMN_COMMENT'%5D%3B%5Cn%5Cn%20%20%20%20%20%20%24output%20.%3D%20%5C%22%7C%20%24count%20%7C%20%24column_name%20%7C%20%24column_type%20%7C%20%24is_nullable%20%7C%20%24column_comment%20%7C%5C%5Cn%5C%22%3B%5Cn%20%20%20%20%20%20%24count%2B%2B%3B%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%5Cn%24conn-%3Eclose()%3B%5Cn%5Cn%2F%2F%20%E5%B0%86%20Markdown%20%E5%86%85%E5%AE%B9%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%5Cnfile_put_contents(%24output_file%2C%20%24output)%3B%5Cn%3F%3E%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22wWA0p%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"LsY1U\" id=\"LsY1U\"><span data-lake-id=\"u9ebef22a\" id=\"u9ebef22a\">python</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22python%22%2C%22code%22%3A%22def%20generate(database_name)%3A%5Cn%20%20%20%20%5C%22%5C%22%5C%22%5Cn%20%20%20%20%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E5%85%B8%E8%A1%A8%5Cn%20%20%20%20%5C%22%5C%22%5C%22%5Cn%20%20%20%20importlib.reload(sys)%5Cn%5Cn%20%20%20%20%23%20%E4%BD%BF%E7%94%A8%E5%89%8D%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20conn%20%3D%20mysql.connector.connect(%5Cn%20%20%20%20%20%20%20%20host%3D'127.0.0.1'%2C%5Cn%20%20%20%20%20%20%20%20port%3D'3306'%2C%5Cn%20%20%20%20%20%20%20%20user%3D'root'%2C%5Cn%20%20%20%20%20%20%20%20password%3D'123456'%2C%5Cn%20%20%20%20%20%20%20%20use_pure%3DTrue%5Cn%20%20%20%20)%5Cn%5Cn%20%20%20%20cursor%20%3D%20conn.cursor()%5Cn%5Cn%20%20%20%20cursor.execute(%5Cn%20%20%20%20%20%20%20%20%5C%22SELECT%20TABLE_NAME%2C%20TABLE_COMMENT%20FROM%20information_schema.TABLES%20WHERE%20table_type%3D'BASE%20TABLE'%20AND%20TABLE_SCHEMA%3D'%25s'%5C%22%20%25%20database_name%5Cn%20%20%20%20)%5Cn%5Cn%20%20%20%20tables%20%3D%20cursor.fetchall()%5Cn%5Cn%20%20%20%20markdown_table_header%20%3D%20%5C%22%5C%22%5C%22%5C%5Cn%5C%5Cn%5C%5Cn%23%23%23%20%25s%20(%25s)%20%5C%5Cn%7C%20%E5%BA%8F%E5%8F%B7%20%7C%20%E5%AD%97%E6%AE%B5%E5%90%8D%E7%A7%B0%20%7C%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%20%7C%20%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA%20%7C%20%E5%AD%97%E6%AE%B5%E8%AF%B4%E6%98%8E%20%7C%5C%5Cn%7C%20%3A--%3A%20%7C----%7C%20----%20%7C%20----%20%7C%20----%20%7C%5C%5Cn%5C%22%5C%22%5C%22%5Cn%20%20%20%20markdown_table_row%20%3D%20%5C%22%5C%22%5C%22%7C%20%25s%20%7C%20%25s%20%7C%20%25s%20%7C%20%25s%20%7C%20%25s%20%7C%5C%22%5C%22%5C%22%5Cn%5Cn%20%20%20%20f%20%3D%20open(database_name%20%2B%20'.md'%2C%20'w')%5Cn%5Cn%20%20%20%20for%20table%20in%20tables%3A%5Cn%5Cn%20%20%20%20%20%20%20%20cursor.execute(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22SELECT%20ORDINAL_POSITION%2C%20COLUMN_NAME%2C%20COLUMN_TYPE%2C%20IS_NULLABLE%2C%20COLUMN_COMMENT%20%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22FROM%20information_schema.COLUMNS%20WHERE%20TABLE_SCHEMA%3D'%25s'%20AND%20TABLE_NAME%3D'%25s'%5C%22%20%25%20(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20database_name%2C%20table%5B0%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20)%5Cn%20%20%20%20%20%20%20%20)%5Cn%5Cn%20%20%20%20%20%20%20%20tmp_table%20%3D%20cursor.fetchall()%5Cn%20%20%20%20%20%20%20%20p%20%3D%20markdown_table_header%20%25%20(table%5B0%5D%2C%20remove_newline(table%5B1%5D))%5Cn%20%20%20%20%20%20%20%20for%20col%20in%20tmp_table%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20p%20%2B%3D%20(remove_newline(markdown_table_row%20%25%20col)%20%2B%20%5C%22%5C%5Cn%5C%22)%5Cn%20%20%20%20%20%20%20%20print(p)%5Cn%20%20%20%20%20%20%20%20f.writelines(p)%5Cn%5Cn%20%20%20%20f.close()%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22xRGyY%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 391,
    "created_at": "2024-05-21T09:03:33.000Z",
    "updated_at": "2024-05-21T09:06:06.000Z",
    "content_updated_at": "2024-05-21T09:06:04.000Z",
    "published_at": "2024-05-21T09:06:05.000Z",
    "first_published_at": "2024-05-21T09:05:40.898Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2534116812,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 166339016,
    "type": "Doc",
    "slug": "bdt87gu9io7g6w5u",
    "title": "使用eacharts画行政区域规划图",
    "description": "tags: [eacharts，行政区域，规划图]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author:  小灰灰cover:  https://cdn.n...",
    "cover": "https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510784705-88bc093f-570c-41ee-b729-246c9541366d.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [eacharts，行政区域，规划图]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author:  小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:  </span><a href=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868\" data-href=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868</span></a></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">用</span><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> </span><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">Echarts</span></strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> </span><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">无论是制作省份地图还是区县域地图，他们的步骤都是基本一样的。</span></p><p id=\"u83900fc8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">下面就 利用 Echarts 简单绘制省份地图 的步骤与经验与各位分享一下。</span></p><p id=\"uda068592\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png\" width=\"868\" id=\"u703bdffe\" class=\"ne-image\"></p><h2 id=\"ZXHmU\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1、准备工作</span></strong></h2><ul class=\"ne-ul\"><li id=\"u51ec2bcc\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1.1 下载js静态文件</span></strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"><br /></span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ua4d1a73b\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">china.js</span></li><li id=\"u9892844f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">echarts.min.js</span></li></ul></ul><p id=\"ud484da87\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510784705-88bc093f-570c-41ee-b729-246c9541366d.png\" width=\"260\" id=\"udb861626\" class=\"ne-image\" style=\"color: rgb(25, 27, 31)\"></p><ul class=\"ne-ul\"><li id=\"uf20774fb\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1.2 下载中国各省、各市的 .json 文件</span></strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"><br /></span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ue904c3b9\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">省份或者地区的数据文件</span></li><li id=\"u720a75eb\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">网址：</span><a href=\"https://github.com/longwosion/geojson-map-china\" data-href=\"https://github.com/longwosion/geojson-map-china\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">https://github.com/longwosion/geojson-map-china</span></a></li></ul></ul><h2 id=\"ZYiIm\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2、获取省份数据</span></strong></h2><ul class=\"ne-ul\"><li id=\"u117bc229\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2.1 第一步：获取XX省的地图 json 数据文件（例：河南省）（是以各省身份证号 前两位 开头命名的）</span></strong></li><li id=\"u3a1f842e\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2.2 第二步：将获取到的JSON文件 转换 成 js 文件（河南省：henan.js）</span></strong></li><li id=\"u152d4435\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2.3 第三步：修改转换后的 js 文件</span></strong></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uef52a53e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">打开 js 文件</span></li><li id=\"u22acf94c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">添加变量 xx (这里命名习惯为 ：（省名拼音小写+Json）例：henanJson)</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul class=\"ne-list-wrap\"><ul ne-level=\"2\" class=\"ne-ul\"><li id=\"u6f2c2f26\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">var xx = (js文件)</span></li><li id=\"u0c58ab34\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">例：<br />var henanJson = {&quot;type&quot;: &quot;FeatureCollection&quot;,<br />&quot;cp&quot;:[118.8586,32.915],<br />........<br />}</span></li></ul></ul></ul><p id=\"uf7951655\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510951892-f7694d60-34a3-4f93-9b5c-8a6ea154222f.png\" width=\"1184\" id=\"u9b451a79\" class=\"ne-image\"></p><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u74ae620c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">保存 js 文件</span></li></ul></ul><h2 id=\"nVntk\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3、编写 HTML 代码</span></strong></h2><ul class=\"ne-ul\"><li id=\"u7e00773f\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3.1 在&lt;head&gt; &lt;/head&gt;中引入 js 文件</span></strong></li></ul><p id=\"u3b5e6124\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"BaNGJ\" class=\"ne-codeblock language-plain\"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;/static/js/echarts.min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;/static/js/henan.js&quot;&gt;&lt;/script&gt;</code></pre><ul class=\"ne-ul\"><li id=\"ucf51fd32\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3.2 在&lt;body&gt;&lt;/body&gt;中写入作图代码</span></strong></li></ul><p id=\"u158289e1\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"LuSWX\" class=\"ne-codeblock language-plain\"><code>&lt;div&gt;\n    {# 标记 #}\n     &lt;a class=&quot;btn btn-success btn-sm&quot; &gt;江苏省&lt;/a&gt;\n    {# 地图代码开始 #}\n     &lt;div class=&quot;x-body&quot;&gt;\n         &lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;\n         &lt;div id=&quot;main&quot; style=&quot;width: 949.75px;height:450px;&quot;&gt;&lt;/div&gt;\n     &lt;/div&gt;\n                    \n      &lt;script type=&quot;text/javascript&quot;&gt;\n               echarts.registerMap('henan', henanJson);\n\n               // 基于准备好的dom，初始化echarts实例\n               var myChart = echarts.init(document.getElementById('main'));\n\n               var option = {\n                      title: {\n                          text: '',\n                          left: 'center'\n                      },\n                      tooltip: {\n                          trigger: 'item'\n                      },\n                      series: [\n                          {\n                              name: '河南省',\n                              type: 'map',\n                              mapType: '河南省',\n                              roam: true, // 是否开启鼠标缩放和平移漫游\n                              label: {\n                                  show: true // 显示省份名称\n                              },\n                              data: [\n                                  // 这里可以添加数据，例如：\n                                   {name: '卫滨区', selected: true},\n                                   //{name: '开封市', value: 200},\n                                  // ...\n                              ]\n                          }\n                      ]\n                  };\n            myChart.setOption(option);\n       &lt;/script&gt;                    \n&lt;/div&gt;</code></pre><ul class=\"ne-ul\"><li id=\"uf5a4513d\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3.3 运行代码，就能看到结果</span></strong></li></ul><p id=\"u91b691a4\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510854010-6c0686b0-9d1b-4a2f-ab95-8af08fe59241.png\" width=\"473\" id=\"u3c3ace7a\" class=\"ne-image\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"><br /> 如果各位对省图还需要其他显示功能，大家不妨访问 </span><a href=\"https://echarts.apache.org/\" data-href=\"https://echarts.apache.org/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">Echarts</span></a><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> 的官网。</span></p></div>",
    "body": "tags: [eacharts，行政区域，规划图]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author:  小灰灰<br />cover:  [https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&clientId=u657576c4-b898-4&from=paste&height=480&id=u703bdffe&originHeight=480&originWidth=868&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=90821&status=done&style=none&taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&title=&width=868](https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&clientId=u657576c4-b898-4&from=paste&height=480&id=u703bdffe&originHeight=480&originWidth=868&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=90821&status=done&style=none&taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&title=&width=868)\n\n---\n\n用 **Echarts** 无论是制作省份地图还是区县域地图，他们的步骤都是基本一样的。<br />下面就 利用 Echarts 简单绘制省份地图 的步骤与经验与各位分享一下。\n\n![image.png](https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&clientId=u657576c4-b898-4&from=paste&height=480&id=u703bdffe&originHeight=480&originWidth=868&originalType=binary&ratio=1&rotation=0&showTitle=false&size=90821&status=done&style=none&taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&title=&width=868)\n<a name=\"ZXHmU\"></a>\n## **1、准备工作**\n\n- **1.1 下载js静态文件**\n\n   - china.js\n   - echarts.min.js\n\n![image.png](https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510784705-88bc093f-570c-41ee-b729-246c9541366d.png#averageHue=%233d4043&clientId=u657576c4-b898-4&from=paste&id=udb861626&originHeight=38&originWidth=260&originalType=url&ratio=1&rotation=0&showTitle=false&size=1703&status=done&style=none&taskId=uaf535bfe-2c52-427d-8e67-ab25fcc05a8&title=)\n\n- **1.2 下载中国各省、各市的 .json 文件**\n\n   - 省份或者地区的数据文件\n   - 网址：[https://github.com/longwosion/geojson-map-china](https://github.com/longwosion/geojson-map-china)\n<a name=\"ZYiIm\"></a>\n## **2、获取省份数据**\n\n- **2.1 第一步：获取XX省的地图 json 数据文件（例：河南省）（是以各省身份证号 前两位 开头命名的）**\n- **2.2 第二步：将获取到的JSON文件 转换 成 js 文件（河南省：henan.js）**\n- **2.3 第三步：修改转换后的 js 文件**\n   - 打开 js 文件\n   - 添加变量 xx (这里命名习惯为 ：（省名拼音小写+Json）例：henanJson)\n      - var xx = (js文件)\n      - 例：<br />var henanJson = {\"type\": \"FeatureCollection\",<br />\"cp\":[118.8586,32.915],<br />........<br />}\n\n![image.png](https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510951892-f7694d60-34a3-4f93-9b5c-8a6ea154222f.png#averageHue=%235b5e8b&clientId=u657576c4-b898-4&from=paste&height=429&id=u9b451a79&originHeight=429&originWidth=1184&originalType=binary&ratio=1&rotation=0&showTitle=false&size=374949&status=done&style=none&taskId=u01faf51c-565c-4fdd-b010-1ec72562547&title=&width=1184)\n\n   - 保存 js 文件\n<a name=\"nVntk\"></a>\n## **3、编写 HTML 代码**\n\n- **3.1 在<head> </head>中引入 js 文件**\n\n```\n<script type=\"text/javascript\" src=\"/static/js/echarts.min.js\"></script>\n<script type=\"text/javascript\" src=\"/static/js/henan.js\"></script>\n```\n\n- **3.2 在<body></body>中写入作图代码**\n\n```\n<div>\n    {# 标记 #}\n     <a class=\"btn btn-success btn-sm\" >江苏省</a>\n    {# 地图代码开始 #}\n     <div class=\"x-body\">\n         <!-- 为ECharts准备一个具备大小（宽高）的Dom -->\n         <div id=\"main\" style=\"width: 949.75px;height:450px;\"></div>\n     </div>\n                    \n      <script type=\"text/javascript\">\n               echarts.registerMap('henan', henanJson);\n\n               // 基于准备好的dom，初始化echarts实例\n               var myChart = echarts.init(document.getElementById('main'));\n\n               var option = {\n                      title: {\n                          text: '',\n                          left: 'center'\n                      },\n                      tooltip: {\n                          trigger: 'item'\n                      },\n                      series: [\n                          {\n                              name: '河南省',\n                              type: 'map',\n                              mapType: '河南省',\n                              roam: true, // 是否开启鼠标缩放和平移漫游\n                              label: {\n                                  show: true // 显示省份名称\n                              },\n                              data: [\n                                  // 这里可以添加数据，例如：\n                                   {name: '卫滨区', selected: true},\n                                   //{name: '开封市', value: 200},\n                                  // ...\n                              ]\n                          }\n                      ]\n                  };\n            myChart.setOption(option);\n       </script>                    \n</div>\n```\n\n- **3.3 运行代码，就能看到结果**\n\n![image.png](https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510854010-6c0686b0-9d1b-4a2f-ab95-8af08fe59241.png#averageHue=%23f5f5f5&clientId=u657576c4-b898-4&from=paste&height=384&id=u3c3ace7a&originHeight=384&originWidth=473&originalType=binary&ratio=1&rotation=0&showTitle=false&size=39651&status=done&style=none&taskId=ua68ad514-05df-41da-a18e-c2979ee164f&title=&width=473)<br /> 如果各位对省图还需要其他显示功能，大家不妨访问 [Echarts](https://echarts.apache.org/) 的官网。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [eacharts，行政区域，规划图]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author:  小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:  </span><a href=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868\" data-href=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868</span></a></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">用</span><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> </span><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">Echarts</span></strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> </span><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">无论是制作省份地图还是区县域地图，他们的步骤都是基本一样的。</span></p><p id=\"u83900fc8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">下面就 利用 Echarts 简单绘制省份地图 的步骤与经验与各位分享一下。</span></p><p id=\"uda068592\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png\" width=\"868\" id=\"u703bdffe\" class=\"ne-image\"></p><h2 id=\"ZXHmU\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1、准备工作</span></strong></h2><ul class=\"ne-ul\"><li id=\"u51ec2bcc\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1.1 下载js静态文件</span></strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"><br /></span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ua4d1a73b\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">china.js</span></li><li id=\"u9892844f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">echarts.min.js</span></li></ul></ul><p id=\"ud484da87\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510784705-88bc093f-570c-41ee-b729-246c9541366d.png\" width=\"260\" id=\"udb861626\" class=\"ne-image\" style=\"color: rgb(25, 27, 31)\"></p><ul class=\"ne-ul\"><li id=\"uf20774fb\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1.2 下载中国各省、各市的 .json 文件</span></strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"><br /></span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ue904c3b9\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">省份或者地区的数据文件</span></li><li id=\"u720a75eb\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">网址：</span><a href=\"https://github.com/longwosion/geojson-map-china\" data-href=\"https://github.com/longwosion/geojson-map-china\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">https://github.com/longwosion/geojson-map-china</span></a></li></ul></ul><h2 id=\"ZYiIm\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2、获取省份数据</span></strong></h2><ul class=\"ne-ul\"><li id=\"u117bc229\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2.1 第一步：获取XX省的地图 json 数据文件（例：河南省）（是以各省身份证号 前两位 开头命名的）</span></strong></li><li id=\"u3a1f842e\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2.2 第二步：将获取到的JSON文件 转换 成 js 文件（河南省：henan.js）</span></strong></li><li id=\"u152d4435\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">2.3 第三步：修改转换后的 js 文件</span></strong></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uef52a53e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">打开 js 文件</span></li><li id=\"u22acf94c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">添加变量 xx (这里命名习惯为 ：（省名拼音小写+Json）例：henanJson)</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul class=\"ne-list-wrap\"><ul ne-level=\"2\" class=\"ne-ul\"><li id=\"u6f2c2f26\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">var xx = (js文件)</span></li><li id=\"u0c58ab34\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">例：<br />var henanJson = {&quot;type&quot;: &quot;FeatureCollection&quot;,<br />&quot;cp&quot;:[118.8586,32.915],<br />........<br />}</span></li></ul></ul></ul><p id=\"uf7951655\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510951892-f7694d60-34a3-4f93-9b5c-8a6ea154222f.png\" width=\"1184\" id=\"u9b451a79\" class=\"ne-image\"></p><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u74ae620c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">保存 js 文件</span></li></ul></ul><h2 id=\"nVntk\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3、编写 HTML 代码</span></strong></h2><ul class=\"ne-ul\"><li id=\"u7e00773f\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3.1 在&lt;head&gt; &lt;/head&gt;中引入 js 文件</span></strong></li></ul><p id=\"u3b5e6124\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"BaNGJ\" class=\"ne-codeblock language-plain\"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;/static/js/echarts.min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;/static/js/henan.js&quot;&gt;&lt;/script&gt;</code></pre><ul class=\"ne-ul\"><li id=\"ucf51fd32\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3.2 在&lt;body&gt;&lt;/body&gt;中写入作图代码</span></strong></li></ul><p id=\"u158289e1\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"LuSWX\" class=\"ne-codeblock language-plain\"><code>&lt;div&gt;\n    {# 标记 #}\n     &lt;a class=&quot;btn btn-success btn-sm&quot; &gt;江苏省&lt;/a&gt;\n    {# 地图代码开始 #}\n     &lt;div class=&quot;x-body&quot;&gt;\n         &lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;\n         &lt;div id=&quot;main&quot; style=&quot;width: 949.75px;height:450px;&quot;&gt;&lt;/div&gt;\n     &lt;/div&gt;\n                    \n      &lt;script type=&quot;text/javascript&quot;&gt;\n               echarts.registerMap('henan', henanJson);\n\n               // 基于准备好的dom，初始化echarts实例\n               var myChart = echarts.init(document.getElementById('main'));\n\n               var option = {\n                      title: {\n                          text: '',\n                          left: 'center'\n                      },\n                      tooltip: {\n                          trigger: 'item'\n                      },\n                      series: [\n                          {\n                              name: '河南省',\n                              type: 'map',\n                              mapType: '河南省',\n                              roam: true, // 是否开启鼠标缩放和平移漫游\n                              label: {\n                                  show: true // 显示省份名称\n                              },\n                              data: [\n                                  // 这里可以添加数据，例如：\n                                   {name: '卫滨区', selected: true},\n                                   //{name: '开封市', value: 200},\n                                  // ...\n                              ]\n                          }\n                      ]\n                  };\n            myChart.setOption(option);\n       &lt;/script&gt;                    \n&lt;/div&gt;</code></pre><ul class=\"ne-ul\"><li id=\"uf5a4513d\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">3.3 运行代码，就能看到结果</span></strong></li></ul><p id=\"u91b691a4\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713510854010-6c0686b0-9d1b-4a2f-ab95-8af08fe59241.png\" width=\"473\" id=\"u3c3ace7a\" class=\"ne-image\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"><br /> 如果各位对省图还需要其他显示功能，大家不妨访问 </span><a href=\"https://echarts.apache.org/\" data-href=\"https://echarts.apache.org/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">Echarts</span></a><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> 的官网。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [eacharts，行政区域，规划图]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author:  小灰灰</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:  </span><a href=\"https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868\" target=\"_blank\" data-lake-id=\"u45aaf044\" id=\"u45aaf044\"><span data-lake-id=\"u8d8faafd\" id=\"u8d8faafd\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">https://cdn.nlark.com/yuque/0/2024/png/27022430/1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png#averageHue=%233f617b&amp;clientId=u657576c4-b898-4&amp;from=paste&amp;height=480&amp;id=u703bdffe&amp;originHeight=480&amp;originWidth=868&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=90821&amp;status=done&amp;style=none&amp;taskId=ubac07a77-db62-4e93-a048-a3ef0ce9eb0&amp;title=&amp;width=868</span></a></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"u3bd90f2e\" id=\"u3bd90f2e\" style=\"color: rgb(25, 27, 31)\">用</span><span data-lake-id=\"uc92ad5ed\" id=\"uc92ad5ed\" style=\"color: rgb(25, 27, 31)\"> </span><strong><span data-lake-id=\"u35f2cb1d\" id=\"u35f2cb1d\" style=\"color: rgb(25, 27, 31)\">Echarts</span></strong><span data-lake-id=\"ubd19044b\" id=\"ubd19044b\" style=\"color: rgb(25, 27, 31)\"> </span><span data-lake-id=\"u8d3e5003\" id=\"u8d3e5003\" style=\"color: rgb(25, 27, 31)\">无论是制作省份地图还是区县域地图，他们的步骤都是基本一样的。</span></p><p data-lake-id=\"u83900fc8\" id=\"u83900fc8\"><span data-lake-id=\"u2c689eb1\" id=\"u2c689eb1\" style=\"color: rgb(25, 27, 31)\">下面就 利用 Echarts 简单绘制省份地图 的步骤与经验与各位分享一下。</span></p><p data-lake-id=\"uda068592\" id=\"uda068592\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2024%2Fpng%2F27022430%2F1713511104993-e973c846-fd56-4cfb-a732-a9779e788c8e.png%22%2C%22taskId%22%3A%22ubac07a77-db62-4e93-a048-a3ef0ce9eb0%22%2C%22clientId%22%3A%22u657576c4-b898-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A868%2C%22height%22%3A480%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A90821%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A868%2C%22originHeight%22%3A480%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22OCHARTS3%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A103%2C%22y%22%3A136%2C%22width%22%3A635%2C%22height%22%3A134%2C%22text%22%3A%22OCHARTS3%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%233f617b%22%2C%22id%22%3A%22u703bdffe%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"ZXHmU\" id=\"ZXHmU\"><strong><span data-lake-id=\"u64f9649e\" id=\"u64f9649e\" style=\"color: rgb(25, 27, 31)\">1、准备工作</span></strong></h2><ul list=\"u037cc862\"><li fid=\"ufd2eab38\" data-lake-id=\"u51ec2bcc\" id=\"u51ec2bcc\"><strong><span data-lake-id=\"uf71e16a0\" id=\"uf71e16a0\" style=\"color: rgb(25, 27, 31)\">1.1 下载js静态文件</span></strong><span data-lake-id=\"ub4854e35\" id=\"ub4854e35\" style=\"color: rgb(25, 27, 31)\"><br /><br /></span></li></ul><ul list=\"u037cc862\" data-lake-indent=\"1\"><li fid=\"ubf68ca33\" data-lake-id=\"ua4d1a73b\" id=\"ua4d1a73b\"><span data-lake-id=\"u80be3cb7\" id=\"u80be3cb7\" style=\"color: rgb(25, 27, 31)\">china.js</span></li><li fid=\"ubf68ca33\" data-lake-id=\"u9892844f\" id=\"u9892844f\"><span data-lake-id=\"uc250006f\" id=\"uc250006f\" style=\"color: rgb(25, 27, 31)\">echarts.min.js</span></li></ul><p data-lake-id=\"ud484da87\" id=\"ud484da87\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2024%2Fpng%2F27022430%2F1713510784705-88bc093f-570c-41ee-b729-246c9541366d.png%22%2C%22taskId%22%3A%22uaf535bfe-2c52-427d-8e67-ab25fcc05a8%22%2C%22clientId%22%3A%22u657576c4-b898-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A1703%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A260%2C%22originHeight%22%3A38%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22CHINAJS%20JS%20101%20ECHARTS.MINJS%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A94%2C%22y%22%3A4%2C%22width%22%3A43%2C%22height%22%3A12%2C%22text%22%3A%22CHINAJS%22%7D%2C%7B%22x%22%3A75%2C%22y%22%3A10%2C%22width%22%3A15%2C%22height%22%3A9%2C%22text%22%3A%22JS%22%7D%2C%7B%22x%22%3A76%2C%22y%22%3A21%2C%22width%22%3A17%2C%22height%22%3A10%2C%22text%22%3A%22101%22%7D%2C%7B%22x%22%3A75%2C%22y%22%3A25%2C%22width%22%3A99%2C%22height%22%3A14%2C%22text%22%3A%22ECHARTS.MINJS%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%233d4043%22%2C%22id%22%3A%22udb861626%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" style=\"color: rgb(25, 27, 31)\"></card></p><ul list=\"ua8dd3353\"><li fid=\"u19205c8f\" data-lake-id=\"uf20774fb\" id=\"uf20774fb\"><strong><span data-lake-id=\"u828342a1\" id=\"u828342a1\" style=\"color: rgb(25, 27, 31)\">1.2 下载中国各省、各市的 .json 文件</span></strong><span data-lake-id=\"u6e2ecba7\" id=\"u6e2ecba7\" style=\"color: rgb(25, 27, 31)\"><br /><br /></span></li></ul><ul list=\"ua8dd3353\" data-lake-indent=\"1\"><li fid=\"u166112fc\" data-lake-id=\"ue904c3b9\" id=\"ue904c3b9\"><span data-lake-id=\"u92dc8761\" id=\"u92dc8761\" style=\"color: rgb(25, 27, 31)\">省份或者地区的数据文件</span></li><li fid=\"u166112fc\" data-lake-id=\"u720a75eb\" id=\"u720a75eb\"><span data-lake-id=\"u3ec2a8dd\" id=\"u3ec2a8dd\" style=\"color: rgb(25, 27, 31)\">网址：</span><a href=\"https://github.com/longwosion/geojson-map-china\" target=\"_blank\" data-lake-id=\"ucf4e53f8\" id=\"ucf4e53f8\"><span data-lake-id=\"uddc90941\" id=\"uddc90941\" style=\"color: rgb(25, 27, 31)\">https://github.com/longwosion/geojson-map-china</span></a></li></ul><h2 data-lake-id=\"ZYiIm\" id=\"ZYiIm\"><strong><span data-lake-id=\"ub7663edb\" id=\"ub7663edb\" style=\"color: rgb(25, 27, 31)\">2、获取省份数据</span></strong></h2><ul list=\"u1afb4d28\"><li fid=\"uece89617\" data-lake-id=\"u117bc229\" id=\"u117bc229\"><strong><span data-lake-id=\"ubf1f37b4\" id=\"ubf1f37b4\" style=\"color: rgb(25, 27, 31)\">2.1 第一步：获取XX省的地图 json 数据文件（例：河南省）（是以各省身份证号 前两位 开头命名的）</span></strong></li><li fid=\"uece89617\" data-lake-id=\"u3a1f842e\" id=\"u3a1f842e\"><strong><span data-lake-id=\"ud8e8ccf6\" id=\"ud8e8ccf6\" style=\"color: rgb(25, 27, 31)\">2.2 第二步：将获取到的JSON文件 转换 成 js 文件（河南省：henan.js）</span></strong></li><li fid=\"uece89617\" data-lake-id=\"u152d4435\" id=\"u152d4435\"><strong><span data-lake-id=\"u208d8ad1\" id=\"u208d8ad1\" style=\"color: rgb(25, 27, 31)\">2.3 第三步：修改转换后的 js 文件</span></strong></li></ul><ul list=\"u1afb4d28\" data-lake-indent=\"1\"><li fid=\"uc7b6d0c1\" data-lake-id=\"uef52a53e\" id=\"uef52a53e\"><span data-lake-id=\"u065dd28d\" id=\"u065dd28d\" style=\"color: rgb(25, 27, 31)\">打开 js 文件</span></li><li fid=\"uc7b6d0c1\" data-lake-id=\"u22acf94c\" id=\"u22acf94c\"><span data-lake-id=\"uacebaeea\" id=\"uacebaeea\" style=\"color: rgb(25, 27, 31)\">添加变量 xx (这里命名习惯为 ：（省名拼音小写+Json）例：henanJson)</span></li></ul><ul list=\"u1afb4d28\" data-lake-indent=\"2\"><li fid=\"u863d1b09\" data-lake-id=\"u6f2c2f26\" id=\"u6f2c2f26\"><span data-lake-id=\"ucf12c149\" id=\"ucf12c149\" style=\"color: rgb(25, 27, 31)\">var xx = (js文件)</span></li><li fid=\"u863d1b09\" data-lake-id=\"u0c58ab34\" id=\"u0c58ab34\"><span data-lake-id=\"u06055c12\" id=\"u06055c12\" style=\"color: rgb(25, 27, 31)\">例：<br />var henanJson = {&quot;type&quot;: &quot;FeatureCollection&quot;,<br />&quot;cp&quot;:[118.8586,32.915],<br />........<br />}</span></li></ul><p data-lake-id=\"uf7951655\" id=\"uf7951655\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2024%2Fpng%2F27022430%2F1713510951892-f7694d60-34a3-4f93-9b5c-8a6ea154222f.png%22%2C%22taskId%22%3A%22u01faf51c-565c-4fdd-b010-1ec72562547%22%2C%22clientId%22%3A%22u657576c4-b898-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1184%2C%22height%22%3A429%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A374949%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1184%2C%22originHeight%22%3A429%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22ENANJSON%20%E6%AD%A4%E6%96%87%E6%A1%A3%E5%8C%85%E5%90%AB%E5%BE%88%E9%95%BF%E7%9A%84%E8%A1%8C.%E5%B7%B2%E5%90%AF%E7%94%A8%E8%87%AA%E5%8A%A8%E6%8D%A2%E8%A1%8C%E6%9D%A5%E6%8F%90%E9%AB%98%E7%BC%96%E8%BE%91%E5%99%A8%E6%80%A7%E8%83%BD.%20%7B%5C%22TYPE%5C%22%3A%5C%22FEATURECOLLECTION%5C%22%2C%5C%22FEATURES%5C%22%3A%5BL%5C%22TYPE%5C%22%3A%20E%5C%22%3A%5C%22FEATURE%5C%22%2C%5C%22PROPERTIES%5C%22%3A%7B%5C%22ADCODE%5C%22%3A41010%20VAR%20HENANJSON%20%3A%5C%22CANTER%5C%22%3A%5B113%2C665412%2C34.757975%5D.%5C%22CENTROID%5C%22%3A%5C%22CHILDRENNUM%5C%22%3B34.34.6262561%2C%5C%22CHILDRENNUM%5C%22%3B%5C%22LEVEL%5C%22%3B%5C%22GITY%20%5C%22SAROUTOS%5C%22%3A%5BJO9900%2C41000)%2C%5C%22SITE%5C%22%3A%20%20NULTIPS%3A%2F%2F9EO3SON-HXKI.VID'%3B%5C%22GEOMETCY'%3B(%5C%22TYPER%3B%20%20MULTIPON'%2C%5C%22COOOY%2034.919066)%2C(114%2C220522%2C34.906801)%2C(114%2C114%2C34.34.8327)%2C(114%2C114%2C199826%2C34.34.332739)%2C(114%2C36.36.33562%20.828883%5D%2C%5B114.133703%2C34.825628%5D%2C%5B114.122504%2C34.81833%5D.%203%5D%2C%5B114.134143%2C34.802154%5D%2C%5B114.161762%2C34.781238%5D%2C%2036%2C665611%2C(114.150375.34%2C65669)%2C%20(114.157567%2C34%2C6259791%2C%20%20(114%2C15157%2C34%2C62881%2C%20%20%201114%2C15659%2C34.60576L%20(114%2C14553.34%2C62456%5D%2C(114%2C127726%2C36.36.61710)%2C(114%2C125461.3686)%2C(114%2C13686)%2C36868%2C368%2C3686)%2C(33653365%2036.58496%2C31%2C1314.329803.34%2C37537537531%2C36.34.34.34.34.34.34.36.307337%20%2C36.36.36.3578871%2C300296%2C3637%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A1%2C%22y%22%3A16%2C%22width%22%3A60%2C%22height%22%3A13%2C%22text%22%3A%22ENANJSON%22%7D%2C%7B%22x%22%3A12%2C%22y%22%3A47%2C%22width%22%3A359%2C%22height%22%3A17%2C%22text%22%3A%22%E6%AD%A4%E6%96%87%E6%A1%A3%E5%8C%85%E5%90%AB%E5%BE%88%E9%95%BF%E7%9A%84%E8%A1%8C.%E5%B7%B2%E5%90%AF%E7%94%A8%E8%87%AA%E5%8A%A8%E6%8D%A2%E8%A1%8C%E6%9D%A5%E6%8F%90%E9%AB%98%E7%BC%96%E8%BE%91%E5%99%A8%E6%80%A7%E8%83%BD.%22%7D%2C%7B%22x%22%3A246%2C%22y%22%3A83%2C%22width%22%3A514%2C%22height%22%3A20%2C%22text%22%3A%22%7B%5C%22TYPE%5C%22%3A%5C%22FEATURECOLLECTION%5C%22%2C%5C%22FEATURES%5C%22%3A%5BL%5C%22TYPE%5C%22%3A%22%7D%2C%7B%22x%22%3A743%2C%22y%22%3A84%2C%22width%22%3A438%2C%22height%22%3A19%2C%22text%22%3A%22E%5C%22%3A%5C%22FEATURE%5C%22%2C%5C%22PROPERTIES%5C%22%3A%7B%5C%22ADCODE%5C%22%3A41010%22%7D%2C%7B%22x%22%3A61%2C%22y%22%3A85%2C%22width%22%3A142%2C%22height%22%3A17%2C%22text%22%3A%22VAR%20HENANJSON%22%7D%2C%7B%22x%22%3A94%2C%22y%22%3A117%2C%22width%22%3A1066%2C%22height%22%3A21%2C%22text%22%3A%22%3A%5C%22CANTER%5C%22%3A%5B113%2C665412%2C34.757975%5D.%5C%22CENTROID%5C%22%3A%5C%22CHILDRENNUM%5C%22%3B34.34.6262561%2C%5C%22CHILDRENNUM%5C%22%3B%5C%22LEVEL%5C%22%3B%5C%22GITY%22%7D%2C%7B%22x%22%3A76%2C%22y%22%3A155%2C%22width%22%3A1103%2C%22height%22%3A21%2C%22text%22%3A%22%5C%22SAROUTOS%5C%22%3A%5BJO9900%2C41000)%2C%5C%22SITE%5C%22%3A%20%20NULTIPS%3A%2F%2F9EO3SON-HXKI.VID'%3B%5C%22GEOMETCY'%3B(%5C%22TYPER%3B%20%20MULTIPON'%2C%5C%22COOOY%22%7D%2C%7B%22x%22%3A71%2C%22y%22%3A189%2C%22width%22%3A1112%2C%22height%22%3A20%2C%22text%22%3A%2234.919066)%2C(114%2C220522%2C34.906801)%2C(114%2C114%2C34.34.8327)%2C(114%2C114%2C199826%2C34.34.332739)%2C(114%2C36.36.33562%22%7D%2C%7B%22x%22%3A79%2C%22y%22%3A224%2C%22width%22%3A578%2C%22height%22%3A19%2C%22text%22%3A%22.828883%5D%2C%5B114.133703%2C34.825628%5D%2C%5B114.122504%2C34.81833%5D.%22%7D%2C%7B%22x%22%3A644%2C%22y%22%3A224%2C%22width%22%3A516%2C%22height%22%3A19%2C%22text%22%3A%223%5D%2C%5B114.134143%2C34.802154%5D%2C%5B114.161762%2C34.781238%5D%2C%22%7D%2C%7B%22x%22%3A72%2C%22y%22%3A292%2C%22width%22%3A1102%2C%22height%22%3A21%2C%22text%22%3A%2236%2C665611%2C(114.150375.34%2C65669)%2C%20(114.157567%2C34%2C6259791%2C%20%20(114%2C15157%2C34%2C62881%2C%20%20%201114%2C15659%2C34.60576L%22%7D%2C%7B%22x%22%3A74%2C%22y%22%3A329%2C%22width%22%3A1100%2C%22height%22%3A19%2C%22text%22%3A%22(114%2C14553.34%2C62456%5D%2C(114%2C127726%2C36.36.61710)%2C(114%2C125461.3686)%2C(114%2C13686)%2C36868%2C368%2C3686)%2C(33653365%22%7D%2C%7B%22x%22%3A72%2C%22y%22%3A364%2C%22width%22%3A1112%2C%22height%22%3A17%2C%22text%22%3A%2236.58496%2C31%2C1314.329803.34%2C37537537531%2C36.34.34.34.34.34.34.36.307337%20%2C36.36.36.3578871%2C300296%2C3637%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%235b5e8b%22%2C%22id%22%3A%22u9b451a79%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><ul list=\"u848b3ae8\" data-lake-indent=\"1\"><li fid=\"uc64db09f\" data-lake-id=\"u74ae620c\" id=\"u74ae620c\"><span data-lake-id=\"ub287c476\" id=\"ub287c476\" style=\"color: rgb(25, 27, 31)\">保存 js 文件</span></li></ul><h2 data-lake-id=\"nVntk\" id=\"nVntk\"><strong><span data-lake-id=\"u1e518c54\" id=\"u1e518c54\" style=\"color: rgb(25, 27, 31)\">3、编写 HTML 代码</span></strong></h2><ul list=\"uf8c3935f\"><li fid=\"uc51b0ace\" data-lake-id=\"u7e00773f\" id=\"u7e00773f\"><strong><span data-lake-id=\"u37b3fdfa\" id=\"u37b3fdfa\" style=\"color: rgb(25, 27, 31)\">3.1 在&lt;head&gt; &lt;/head&gt;中引入 js 文件</span></strong></li></ul><p data-lake-id=\"u3b5e6124\" id=\"u3b5e6124\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3Cscript%20type%3D%5C%22text%2Fjavascript%5C%22%20src%3D%5C%22%2Fstatic%2Fjs%2Fecharts.min.js%5C%22%3E%3C%2Fscript%3E%5Cn%3Cscript%20type%3D%5C%22text%2Fjavascript%5C%22%20src%3D%5C%22%2Fstatic%2Fjs%2Fhenan.js%5C%22%3E%3C%2Fscript%3E%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BaNGJ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u0829507a\"><li fid=\"u4213f5ee\" data-lake-id=\"ucf51fd32\" id=\"ucf51fd32\"><strong><span data-lake-id=\"u3e816a7a\" id=\"u3e816a7a\" style=\"color: rgb(25, 27, 31)\">3.2 在&lt;body&gt;&lt;/body&gt;中写入作图代码</span></strong></li></ul><p data-lake-id=\"u158289e1\" id=\"u158289e1\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3Cdiv%3E%5Cn%20%20%20%20%7B%23%20%E6%A0%87%E8%AE%B0%20%23%7D%5Cn%20%20%20%20%20%3Ca%20class%3D%5C%22btn%20btn-success%20btn-sm%5C%22%20%3E%E6%B1%9F%E8%8B%8F%E7%9C%81%3C%2Fa%3E%5Cn%20%20%20%20%7B%23%20%E5%9C%B0%E5%9B%BE%E4%BB%A3%E7%A0%81%E5%BC%80%E5%A7%8B%20%23%7D%5Cn%20%20%20%20%20%3Cdiv%20class%3D%5C%22x-body%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%3C!--%20%E4%B8%BAECharts%E5%87%86%E5%A4%87%E4%B8%80%E4%B8%AA%E5%85%B7%E5%A4%87%E5%A4%A7%E5%B0%8F%EF%BC%88%E5%AE%BD%E9%AB%98%EF%BC%89%E7%9A%84Dom%20--%3E%5Cn%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%5C%22main%5C%22%20style%3D%5C%22width%3A%20949.75px%3Bheight%3A450px%3B%5C%22%3E%3C%2Fdiv%3E%5Cn%20%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%3Cscript%20type%3D%5C%22text%2Fjavascript%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echarts.registerMap('henan'%2C%20henanJson)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E5%9F%BA%E4%BA%8E%E5%87%86%E5%A4%87%E5%A5%BD%E7%9A%84dom%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96echarts%E5%AE%9E%E4%BE%8B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20myChart%20%3D%20echarts.init(document.getElementById('main'))%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20option%20%3D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20''%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%20'center'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tooltip%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20trigger%3A%20'item'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20series%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20'%E6%B2%B3%E5%8D%97%E7%9C%81'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20'map'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mapType%3A%20'%E6%B2%B3%E5%8D%97%E7%9C%81'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20roam%3A%20true%2C%20%2F%2F%20%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%E9%BC%A0%E6%A0%87%E7%BC%A9%E6%94%BE%E5%92%8C%E5%B9%B3%E7%A7%BB%E6%BC%AB%E6%B8%B8%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20label%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20show%3A%20true%20%2F%2F%20%E6%98%BE%E7%A4%BA%E7%9C%81%E4%BB%BD%E5%90%8D%E7%A7%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bname%3A%20'%E5%8D%AB%E6%BB%A8%E5%8C%BA'%2C%20selected%3A%20true%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%7Bname%3A%20'%E5%BC%80%E5%B0%81%E5%B8%82'%2C%20value%3A%20200%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20...%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20myChart.setOption(option)%3B%5Cn%20%20%20%20%20%20%20%3C%2Fscript%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%3C%2Fdiv%3E%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22LuSWX%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"uece74e6f\"><li fid=\"ud0cfd5d0\" data-lake-id=\"uf5a4513d\" id=\"uf5a4513d\"><strong><span data-lake-id=\"ud83eb5f1\" id=\"ud83eb5f1\" style=\"color: rgb(25, 27, 31)\">3.3 运行代码，就能看到结果</span></strong></li></ul><p data-lake-id=\"u91b691a4\" id=\"u91b691a4\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2024%2Fpng%2F27022430%2F1713510854010-6c0686b0-9d1b-4a2f-ab95-8af08fe59241.png%22%2C%22taskId%22%3A%22ua68ad514-05df-41da-a18e-c2979ee164f%22%2C%22clientId%22%3A%22u657576c4-b898-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A473%2C%22height%22%3A384%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A39651%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A473%2C%22originHeight%22%3A384%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E8%BE%89%E5%8E%BF%E5%B8%82%20%E5%8D%AB%E8%BE%89%E5%B8%82%20%E6%B3%89%E5%8C%BA%20%E7%89%A7%E9%87%8E%E5%8C%BA%20%E5%8D%AB%E6%BB%A8%E5%8C%BA%E6%B1%9F%E6%97%97%E5%8C%BA%20%E5%BB%B6%E6%B4%A5%E5%8E%BF%20%E9%95%BF%E5%9E%A3%E5%B8%82%20%E8%8E%B7%E5%98%89%E5%8E%BF%3F%E6%96%B0%E4%B9%A1%E5%8E%BF%20%E8%BE%89%E5%8E%BF%E5%B8%82%20%E5%8E%9F%E9%98%B3%E5%8E%BF%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A79%2C%22y%22%3A104%2C%22width%22%3A38%2C%22height%22%3A13%2C%22text%22%3A%22%E8%BE%89%E5%8E%BF%E5%B8%82%22%7D%2C%7B%22x%22%3A179%2C%22y%22%3A117%2C%22width%22%3A36%2C%22height%22%3A14%2C%22text%22%3A%22%E5%8D%AB%E8%BE%89%E5%B8%82%22%7D%2C%7B%22x%22%3A136%2C%22y%22%3A155%2C%22width%22%3A26%2C%22height%22%3A12%2C%22text%22%3A%22%E6%B3%89%E5%8C%BA%22%7D%2C%7B%22x%22%3A135%2C%22y%22%3A169%2C%22width%22%3A39%2C%22height%22%3A15%2C%22text%22%3A%22%E7%89%A7%E9%87%8E%E5%8C%BA%22%7D%2C%7B%22x%22%3A125%2C%22y%22%3A189%2C%22width%22%3A64%2C%22height%22%3A16%2C%22text%22%3A%22%E5%8D%AB%E6%BB%A8%E5%8C%BA%E6%B1%9F%E6%97%97%E5%8C%BA%22%7D%2C%7B%22x%22%3A218%2C%22y%22%3A192%2C%22width%22%3A38%2C%22height%22%3A14%2C%22text%22%3A%22%E5%BB%B6%E6%B4%A5%E5%8E%BF%22%7D%2C%7B%22x%22%3A350%2C%22y%22%3A212%2C%22width%22%3A38%2C%22height%22%3A13%2C%22text%22%3A%22%E9%95%BF%E5%9E%A3%E5%B8%82%22%7D%2C%7B%22x%22%3A69%2C%22y%22%3A215%2C%22width%22%3A89%2C%22height%22%3A17%2C%22text%22%3A%22%E8%8E%B7%E5%98%89%E5%8E%BF%3F%E6%96%B0%E4%B9%A1%E5%8E%BF%22%7D%2C%7B%22x%22%3A286%2C%22y%22%3A251%2C%22width%22%3A45%2C%22height%22%3A15%2C%22text%22%3A%22%E8%BE%89%E5%8E%BF%E5%B8%82%22%7D%2C%7B%22x%22%3A147%2C%22y%22%3A275%2C%22width%22%3A36%2C%22height%22%3A14%2C%22text%22%3A%22%E5%8E%9F%E9%98%B3%E5%8E%BF%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f5f5f5%22%2C%22id%22%3A%22u3c3ace7a%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><span data-lake-id=\"u8f5ef70a\" id=\"u8f5ef70a\" style=\"color: rgb(25, 27, 31)\"><br /> 如果各位对省图还需要其他显示功能，大家不妨访问 </span><a href=\"https://echarts.apache.org/\" target=\"_blank\" data-lake-id=\"u6507162c\" id=\"u6507162c\"><span data-lake-id=\"u7b6c0235\" id=\"u7b6c0235\" style=\"color: rgb(25, 27, 31)\">Echarts</span></a><span data-lake-id=\"ue3d42e7b\" id=\"ue3d42e7b\" style=\"color: rgb(25, 27, 31)\"> 的官网。</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 4,
    "hits": 4,
    "comments_count": 0,
    "word_count": 519,
    "created_at": "2024-04-19T07:11:26.000Z",
    "updated_at": "2024-04-19T07:19:42.000Z",
    "content_updated_at": "2024-04-19T07:19:41.000Z",
    "published_at": "2024-04-19T07:19:41.000Z",
    "first_published_at": "2024-04-19T07:17:35.194Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2459866520,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 165974604,
    "type": "Doc",
    "slug": "heb7ffb3o4bicvqf",
    "title": "php简单读取文档数据的几种方法对比和效率",
    "description": "tags: [读取文档,效率]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: 小灰灰cover:在处理大数据文件时，效率往往受到文件大小、内存限制、...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [读取文档,效率]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: 小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在处理大数据文件时，效率往往受到文件大小、内存限制、CPU性能以及具体实现算法的影响。以下是对之前给出的几种方法在处理大数据效率方面的分析：</span></p></div><h2 id=\"Wojfr\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">1. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 file() 函数</span></h2><p id=\"u5d445294\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">file()函数会一次性将整个文件内容加载到内存中，转化为数组。对于非常大的文件，这可能会导致内存溢出。此外，一次性处理大量数据也增加了CPU负担。因此，对于大数据文件，这种方法的效率较低，且可能因内存限制而无法处理。</span></p><pre data-language=\"php\" id=\"m973X\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$fileContent = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); // 去除换行符并忽略空行\n\n// 使用array_map处理每一行，按逗号分割\n$data = array_map(function ($line) {\n    return explode(',', $line);\n}, $fileContent);\n\n// 合并为一维数组并去重\n$flatData = array_unique(array_merge(...$data));\n\nprint_r($flatData);</code></pre><p id=\"u89b875b3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h2 id=\"BwrNS\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">2. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 file_get_contents() 和 preg_split() 函数</span></h2><p id=\"u65b5402d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">file_get_contents()同样会一次性将文件内容读取到内存中，虽然之后使用preg_split()时不需要额外的文件读取操作，但正则表达式的复杂度可能影响处理速度。同样，内存消耗和一次性处理大量数据的问题依然存在，使得这种方法在处理大数据时效率不高且可能受限于内存。</span></p><pre data-language=\"php\" id=\"y3yoH\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$fileContent = file_get_contents($filename);\n\n// 使用正则表达式按换行和逗号分割\n$data = preg_split(&quot;/[\\n,]+/&quot;, $fileContent);\n\n// 去除重复值\n$uniqueData = array_unique($data);\n\nprint_r($uniqueData);\n</code></pre><h2 id=\"Mev4i\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">3. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 fopen()、fgets() 和 explode() 函数</span></h2><p id=\"ud64f4aac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这种逐行读取文件的方法具有较好的内存管理特性。每次只读取文件的一小部分（一行），处理完成后释放内存，再读取下一行。这种方式对内存的占用相对较小，更适合处理大数据文件。然而，频繁的文件读取操作和字符串处理（如explode()）可能会增加CPU负担。</span></p><pre data-language=\"php\" id=\"AKGof\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$file = fopen($filename, 'r');\n\n$data = [];\nwhile (($line = fgets($file)) !== false) {\n    $trimmedLine = trim($line);\n    if ($trimmedLine === '') {\n        continue; // 跳过空行\n    }\n\n    $items = explode(',', $trimmedLine);\n    if (!empty($items)) {\n        $data[] = $items;\n    }\n}\n\nfclose($file);\n\n// 合并为一维数组\n$flatData = array_merge(...$data);\n\n// 统计每项数据的数量\n$itemCounts = array_count_values($flatData);\n\n// 打印或处理每个项目的数量\nforeach ($itemCounts as $item =&gt; $count) {\n    echo &quot;项目 '{$item}' 出现了 {$count} 次。\\n&quot;;\n}\n\n/*\n// 去除重复值\n$uniqueFlatData = array_unique($flatData);\n\n// 输出处理后的数组\nprint_r($uniqueFlatData);\n*/\n\n</code></pre><h2 id=\"nl3yB\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">4. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 SPL 的 SplFileObject 类</span></h2><p id=\"udec37eed\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">SplFileObject类提供了类似fopen()、fgets()的逐行读取机制，但它以面向对象的方式封装了这些操作，提供了更丰富的功能和更易用的接口。在处理大数据文件时，它的内存效率与方法3相似，同样具有良好的内存管理特性，避免一次性加载整个文件到内存。</span></p><pre data-language=\"php\" id=\"FHErn\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$file = new SplFileObject($filename);\n\n$data = [];\nwhile (!$file-&gt;eof()) {\n    $line = $file-&gt;fgets();\n    $trimmedLine = trim($line);\n    if ($trimmedLine === '') {\n        continue; // 跳过空行\n    }\n    $items = explode(',', $trimmedLine);\n    if (!empty($items)) {\n        $data[] = $items;\n    }\n}\n\n// 合并为一维数组并去重\n$flatData = array_unique(array_merge(...$data));\n\nprint_r($flatData);\n</code></pre><h2 id=\"h7efL\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">结论：</span></h2><p id=\"ueada85ac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">对于大数据文件，方法3</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F; font-size: 14px\">（fopen()、fgets()、explode()）</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">和方法4（</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F; font-size: 14px\">SplFileObject类</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">）由于采用了逐行读取的方式，能够有效降低内存消耗，避免一次性加载整个文件带来的内存压力，因此在效率上优于方法1（file()）和方法2（file_get_contents() + preg_split()）。在这两者之间，方法4提供了面向对象的接口和更丰富的功能，但底层处理逻辑与方法3相似，因此在处理大数据效率上，二者相差不大，主要取决于具体的实现细节和环境因素（如CPU性能、磁盘I/O速度等）。</span></p><p id=\"uf884bdad\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">综上所述，推荐在处理大数据文件时使用方法3（fopen()、fgets()、explode()）或方法4（SplFileObject类），它们在内存效率上表现更好，更适合应对大数据场景。在实际应用中，如果对面向对象编程更熟悉或者需要利用SplFileObject提供的其他高级功能，可以选择方法4；否则，方法3的简单直接可能更适合大多数场景。</span></p></div>",
    "body": "tags: [读取文档,效率]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: 小灰灰<br />cover:\n\n---\n\n> 在处理大数据文件时，效率往往受到文件大小、内存限制、CPU性能以及具体实现算法的影响。以下是对之前给出的几种方法在处理大数据效率方面的分析：\n\n<a name=\"Wojfr\"></a>\n## 使用 file() 函数\n<br />file()函数会一次性将整个文件内容加载到内存中，转化为数组。对于非常大的文件，这可能会导致内存溢出。此外，一次性处理大量数据也增加了CPU负担。因此，对于大数据文件，这种方法的效率较低，且可能因内存限制而无法处理。\n```php\n$filename = 'path/to/your_file.txt';\n$fileContent = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); // 去除换行符并忽略空行\n\n// 使用array_map处理每一行，按逗号分割\n$data = array_map(function ($line) {\n    return explode(',', $line);\n}, $fileContent);\n\n// 合并为一维数组并去重\n$flatData = array_unique(array_merge(...$data));\n\nprint_r($flatData);\n```\n\n<a name=\"BwrNS\"></a>\n## 使用 file_get_contents() 和 preg_split() 函数\n<br />file_get_contents()同样会一次性将文件内容读取到内存中，虽然之后使用preg_split()时不需要额外的文件读取操作，但正则表达式的复杂度可能影响处理速度。同样，内存消耗和一次性处理大量数据的问题依然存在，使得这种方法在处理大数据时效率不高且可能受限于内存。\n```php\n$filename = 'path/to/your_file.txt';\n$fileContent = file_get_contents($filename);\n\n// 使用正则表达式按换行和逗号分割\n$data = preg_split(\"/[\\n,]+/\", $fileContent);\n\n// 去除重复值\n$uniqueData = array_unique($data);\n\nprint_r($uniqueData);\n\n```\n<a name=\"Mev4i\"></a>\n## 使用 fopen()、fgets() 和 explode() 函数\n<br />这种逐行读取文件的方法具有较好的内存管理特性。每次只读取文件的一小部分（一行），处理完成后释放内存，再读取下一行。这种方式对内存的占用相对较小，更适合处理大数据文件。然而，频繁的文件读取操作和字符串处理（如explode()）可能会增加CPU负担。\n```php\n$filename = 'path/to/your_file.txt';\n$file = fopen($filename, 'r');\n\n$data = [];\nwhile (($line = fgets($file)) !== false) {\n    $trimmedLine = trim($line);\n    if ($trimmedLine === '') {\n        continue; // 跳过空行\n    }\n\n    $items = explode(',', $trimmedLine);\n    if (!empty($items)) {\n        $data[] = $items;\n    }\n}\n\nfclose($file);\n\n// 合并为一维数组\n$flatData = array_merge(...$data);\n\n// 统计每项数据的数量\n$itemCounts = array_count_values($flatData);\n\n// 打印或处理每个项目的数量\nforeach ($itemCounts as $item => $count) {\n    echo \"项目 '{$item}' 出现了 {$count} 次。\\n\";\n}\n\n/*\n// 去除重复值\n$uniqueFlatData = array_unique($flatData);\n\n// 输出处理后的数组\nprint_r($uniqueFlatData);\n*/\n\n\n```\n<a name=\"nl3yB\"></a>\n## 使用 SPL 的 SplFileObject 类\n<br />SplFileObject类提供了类似fopen()、fgets()的逐行读取机制，但它以面向对象的方式封装了这些操作，提供了更丰富的功能和更易用的接口。在处理大数据文件时，它的内存效率与方法3相似，同样具有良好的内存管理特性，避免一次性加载整个文件到内存。\n```php\n$filename = 'path/to/your_file.txt';\n$file = new SplFileObject($filename);\n\n$data = [];\nwhile (!$file->eof()) {\n    $line = $file->fgets();\n    $trimmedLine = trim($line);\n    if ($trimmedLine === '') {\n        continue; // 跳过空行\n    }\n    $items = explode(',', $trimmedLine);\n    if (!empty($items)) {\n        $data[] = $items;\n    }\n}\n\n// 合并为一维数组并去重\n$flatData = array_unique(array_merge(...$data));\n\nprint_r($flatData);\n\n```\n<a name=\"h7efL\"></a>\n## 结论：\n<br />对于大数据文件，方法3**（fopen()、fgets()、explode()）**和方法4（**SplFileObject类**）由于采用了逐行读取的方式，能够有效降低内存消耗，避免一次性加载整个文件带来的内存压力，因此在效率上优于方法1（file()）和方法2（file_get_contents() + preg_split()）。在这两者之间，方法4提供了面向对象的接口和更丰富的功能，但底层处理逻辑与方法3相似，因此在处理大数据效率上，二者相差不大，主要取决于具体的实现细节和环境因素（如CPU性能、磁盘I/O速度等）。\n\n综上所述，推荐在处理大数据文件时使用方法3（fopen()、fgets()、explode()）或方法4（SplFileObject类），它们在内存效率上表现更好，更适合应对大数据场景。在实际应用中，如果对面向对象编程更熟悉或者需要利用SplFileObject提供的其他高级功能，可以选择方法4；否则，方法3的简单直接可能更适合大多数场景。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [读取文档,效率]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: 小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在处理大数据文件时，效率往往受到文件大小、内存限制、CPU性能以及具体实现算法的影响。以下是对之前给出的几种方法在处理大数据效率方面的分析：</span></p></div><h2 id=\"Wojfr\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">1. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 file() 函数</span></h2><p id=\"u5d445294\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">file()函数会一次性将整个文件内容加载到内存中，转化为数组。对于非常大的文件，这可能会导致内存溢出。此外，一次性处理大量数据也增加了CPU负担。因此，对于大数据文件，这种方法的效率较低，且可能因内存限制而无法处理。</span></p><pre data-language=\"php\" id=\"m973X\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$fileContent = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); // 去除换行符并忽略空行\n\n// 使用array_map处理每一行，按逗号分割\n$data = array_map(function ($line) {\n    return explode(',', $line);\n}, $fileContent);\n\n// 合并为一维数组并去重\n$flatData = array_unique(array_merge(...$data));\n\nprint_r($flatData);</code></pre><p id=\"u89b875b3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h2 id=\"BwrNS\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">2. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 file_get_contents() 和 preg_split() 函数</span></h2><p id=\"u65b5402d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">file_get_contents()同样会一次性将文件内容读取到内存中，虽然之后使用preg_split()时不需要额外的文件读取操作，但正则表达式的复杂度可能影响处理速度。同样，内存消耗和一次性处理大量数据的问题依然存在，使得这种方法在处理大数据时效率不高且可能受限于内存。</span></p><pre data-language=\"php\" id=\"y3yoH\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$fileContent = file_get_contents($filename);\n\n// 使用正则表达式按换行和逗号分割\n$data = preg_split(&quot;/[\\n,]+/&quot;, $fileContent);\n\n// 去除重复值\n$uniqueData = array_unique($data);\n\nprint_r($uniqueData);\n</code></pre><h2 id=\"Mev4i\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">3. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 fopen()、fgets() 和 explode() 函数</span></h2><p id=\"ud64f4aac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这种逐行读取文件的方法具有较好的内存管理特性。每次只读取文件的一小部分（一行），处理完成后释放内存，再读取下一行。这种方式对内存的占用相对较小，更适合处理大数据文件。然而，频繁的文件读取操作和字符串处理（如explode()）可能会增加CPU负担。</span></p><pre data-language=\"php\" id=\"AKGof\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$file = fopen($filename, 'r');\n\n$data = [];\nwhile (($line = fgets($file)) !== false) {\n    $trimmedLine = trim($line);\n    if ($trimmedLine === '') {\n        continue; // 跳过空行\n    }\n\n    $items = explode(',', $trimmedLine);\n    if (!empty($items)) {\n        $data[] = $items;\n    }\n}\n\nfclose($file);\n\n// 合并为一维数组\n$flatData = array_merge(...$data);\n\n// 统计每项数据的数量\n$itemCounts = array_count_values($flatData);\n\n// 打印或处理每个项目的数量\nforeach ($itemCounts as $item =&gt; $count) {\n    echo &quot;项目 '{$item}' 出现了 {$count} 次。\\n&quot;;\n}\n\n/*\n// 去除重复值\n$uniqueFlatData = array_unique($flatData);\n\n// 输出处理后的数组\nprint_r($uniqueFlatData);\n*/\n\n</code></pre><h2 id=\"nl3yB\" data-lake-index-type=\"0\"><span lake-read-ignore=\"true\">4. </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">使用 SPL 的 SplFileObject 类</span></h2><p id=\"udec37eed\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">SplFileObject类提供了类似fopen()、fgets()的逐行读取机制，但它以面向对象的方式封装了这些操作，提供了更丰富的功能和更易用的接口。在处理大数据文件时，它的内存效率与方法3相似，同样具有良好的内存管理特性，避免一次性加载整个文件到内存。</span></p><pre data-language=\"php\" id=\"FHErn\" class=\"ne-codeblock language-php\"><code>$filename = 'path/to/your_file.txt';\n$file = new SplFileObject($filename);\n\n$data = [];\nwhile (!$file-&gt;eof()) {\n    $line = $file-&gt;fgets();\n    $trimmedLine = trim($line);\n    if ($trimmedLine === '') {\n        continue; // 跳过空行\n    }\n    $items = explode(',', $trimmedLine);\n    if (!empty($items)) {\n        $data[] = $items;\n    }\n}\n\n// 合并为一维数组并去重\n$flatData = array_unique(array_merge(...$data));\n\nprint_r($flatData);\n</code></pre><h2 id=\"h7efL\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">结论：</span></h2><p id=\"ueada85ac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">对于大数据文件，方法3</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F; font-size: 14px\">（fopen()、fgets()、explode()）</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">和方法4（</span><strong><span class=\"ne-text\" style=\"color: #DF2A3F; font-size: 14px\">SplFileObject类</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">）由于采用了逐行读取的方式，能够有效降低内存消耗，避免一次性加载整个文件带来的内存压力，因此在效率上优于方法1（file()）和方法2（file_get_contents() + preg_split()）。在这两者之间，方法4提供了面向对象的接口和更丰富的功能，但底层处理逻辑与方法3相似，因此在处理大数据效率上，二者相差不大，主要取决于具体的实现细节和环境因素（如CPU性能、磁盘I/O速度等）。</span></p><p id=\"uf884bdad\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">综上所述，推荐在处理大数据文件时使用方法3（fopen()、fgets()、explode()）或方法4（SplFileObject类），它们在内存效率上表现更好，更适合应对大数据场景。在实际应用中，如果对面向对象编程更熟悉或者需要利用SplFileObject提供的其他高级功能，可以选择方法4；否则，方法3的简单直接可能更适合大多数场景。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [读取文档,效率]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u7e775ff9\" id=\"u7e775ff9\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"ua767a10c\" id=\"ua767a10c\" style=\"color: rgb(38, 38, 38)\">copyright_author: 小灰灰</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"u54ebe117\" id=\"u54ebe117\"><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">在处理大数据文件时，效率往往受到文件大小、内存限制、CPU性能以及具体实现算法的影响。以下是对之前给出的几种方法在处理大数据效率方面的分析：</span></p></blockquote><h2 data-lake-id=\"Wojfr\" id=\"Wojfr\" data-lake-index-type=\"0\"><span data-lake-id=\"ud3751600\" id=\"ud3751600\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">使用 file() 函数</span></h2><p data-lake-id=\"u5d445294\" id=\"u5d445294\"><span data-lake-id=\"ue2fd7b73\" id=\"ue2fd7b73\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u00f84404\" id=\"u00f84404\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">file()函数会一次性将整个文件内容加载到内存中，转化为数组。对于非常大的文件，这可能会导致内存溢出。此外，一次性处理大量数据也增加了CPU负担。因此，对于大数据文件，这种方法的效率较低，且可能因内存限制而无法处理。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%24filename%20%3D%20'path%2Fto%2Fyour_file.txt'%3B%5Cn%24fileContent%20%3D%20file(%24filename%2C%20FILE_IGNORE_NEW_LINES%20%7C%20FILE_SKIP_EMPTY_LINES)%3B%20%2F%2F%20%E5%8E%BB%E9%99%A4%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%B9%B6%E5%BF%BD%E7%95%A5%E7%A9%BA%E8%A1%8C%5Cn%5Cn%2F%2F%20%E4%BD%BF%E7%94%A8array_map%E5%A4%84%E7%90%86%E6%AF%8F%E4%B8%80%E8%A1%8C%EF%BC%8C%E6%8C%89%E9%80%97%E5%8F%B7%E5%88%86%E5%89%B2%5Cn%24data%20%3D%20array_map(function%20(%24line)%20%7B%5Cn%20%20%20%20return%20explode('%2C'%2C%20%24line)%3B%5Cn%7D%2C%20%24fileContent)%3B%5Cn%5Cn%2F%2F%20%E5%90%88%E5%B9%B6%E4%B8%BA%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E5%B9%B6%E5%8E%BB%E9%87%8D%5Cn%24flatData%20%3D%20array_unique(array_merge(...%24data))%3B%5Cn%5Cnprint_r(%24flatData)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22m973X%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u89b875b3\" id=\"u89b875b3\"><span data-lake-id=\"ue84c59b4\" id=\"ue84c59b4\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><h2 data-lake-id=\"BwrNS\" id=\"BwrNS\" data-lake-index-type=\"0\"><span data-lake-id=\"ufe8507d0\" id=\"ufe8507d0\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">使用 file_get_contents() 和 preg_split() 函数</span></h2><p data-lake-id=\"u65b5402d\" id=\"u65b5402d\"><span data-lake-id=\"ua61af10e\" id=\"ua61af10e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u7a0c9276\" id=\"u7a0c9276\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">file_get_contents()同样会一次性将文件内容读取到内存中，虽然之后使用preg_split()时不需要额外的文件读取操作，但正则表达式的复杂度可能影响处理速度。同样，内存消耗和一次性处理大量数据的问题依然存在，使得这种方法在处理大数据时效率不高且可能受限于内存。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%24filename%20%3D%20'path%2Fto%2Fyour_file.txt'%3B%5Cn%24fileContent%20%3D%20file_get_contents(%24filename)%3B%5Cn%5Cn%2F%2F%20%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8C%89%E6%8D%A2%E8%A1%8C%E5%92%8C%E9%80%97%E5%8F%B7%E5%88%86%E5%89%B2%5Cn%24data%20%3D%20preg_split(%5C%22%2F%5B%5C%5Cn%2C%5D%2B%2F%5C%22%2C%20%24fileContent)%3B%5Cn%5Cn%2F%2F%20%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E5%80%BC%5Cn%24uniqueData%20%3D%20array_unique(%24data)%3B%5Cn%5Cnprint_r(%24uniqueData)%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22y3yoH%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"Mev4i\" id=\"Mev4i\" data-lake-index-type=\"0\"><span data-lake-id=\"u62a33613\" id=\"u62a33613\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">使用 fopen()、fgets() 和 explode() 函数</span></h2><p data-lake-id=\"ud64f4aac\" id=\"ud64f4aac\"><span data-lake-id=\"u9c9de908\" id=\"u9c9de908\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u06549c47\" id=\"u06549c47\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">这种逐行读取文件的方法具有较好的内存管理特性。每次只读取文件的一小部分（一行），处理完成后释放内存，再读取下一行。这种方式对内存的占用相对较小，更适合处理大数据文件。然而，频繁的文件读取操作和字符串处理（如explode()）可能会增加CPU负担。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%24filename%20%3D%20'path%2Fto%2Fyour_file.txt'%3B%5Cn%24file%20%3D%20fopen(%24filename%2C%20'r')%3B%5Cn%5Cn%24data%20%3D%20%5B%5D%3B%5Cnwhile%20((%24line%20%3D%20fgets(%24file))%20!%3D%3D%20false)%20%7B%5Cn%20%20%20%20%24trimmedLine%20%3D%20trim(%24line)%3B%5Cn%20%20%20%20if%20(%24trimmedLine%20%3D%3D%3D%20'')%20%7B%5Cn%20%20%20%20%20%20%20%20continue%3B%20%2F%2F%20%E8%B7%B3%E8%BF%87%E7%A9%BA%E8%A1%8C%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%24items%20%3D%20explode('%2C'%2C%20%24trimmedLine)%3B%5Cn%20%20%20%20if%20(!empty(%24items))%20%7B%5Cn%20%20%20%20%20%20%20%20%24data%5B%5D%20%3D%20%24items%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cnfclose(%24file)%3B%5Cn%5Cn%2F%2F%20%E5%90%88%E5%B9%B6%E4%B8%BA%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%5Cn%24flatData%20%3D%20array_merge(...%24data)%3B%5Cn%5Cn%2F%2F%20%E7%BB%9F%E8%AE%A1%E6%AF%8F%E9%A1%B9%E6%95%B0%E6%8D%AE%E7%9A%84%E6%95%B0%E9%87%8F%5Cn%24itemCounts%20%3D%20array_count_values(%24flatData)%3B%5Cn%5Cn%2F%2F%20%E6%89%93%E5%8D%B0%E6%88%96%E5%A4%84%E7%90%86%E6%AF%8F%E4%B8%AA%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%95%B0%E9%87%8F%5Cnforeach%20(%24itemCounts%20as%20%24item%20%3D%3E%20%24count)%20%7B%5Cn%20%20%20%20echo%20%5C%22%E9%A1%B9%E7%9B%AE%20'%7B%24item%7D'%20%E5%87%BA%E7%8E%B0%E4%BA%86%20%7B%24count%7D%20%E6%AC%A1%E3%80%82%5C%5Cn%5C%22%3B%5Cn%7D%5Cn%5Cn%2F*%5Cn%2F%2F%20%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E5%80%BC%5Cn%24uniqueFlatData%20%3D%20array_unique(%24flatData)%3B%5Cn%5Cn%2F%2F%20%E8%BE%93%E5%87%BA%E5%A4%84%E7%90%86%E5%90%8E%E7%9A%84%E6%95%B0%E7%BB%84%5Cnprint_r(%24uniqueFlatData)%3B%5Cn*%2F%5Cn%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22AKGof%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"nl3yB\" id=\"nl3yB\" data-lake-index-type=\"0\"><span data-lake-id=\"u4feffa32\" id=\"u4feffa32\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">使用 SPL 的 SplFileObject 类</span></h2><p data-lake-id=\"udec37eed\" id=\"udec37eed\"><span data-lake-id=\"ue86baf82\" id=\"ue86baf82\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u9c5db52e\" id=\"u9c5db52e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">SplFileObject类提供了类似fopen()、fgets()的逐行读取机制，但它以面向对象的方式封装了这些操作，提供了更丰富的功能和更易用的接口。在处理大数据文件时，它的内存效率与方法3相似，同样具有良好的内存管理特性，避免一次性加载整个文件到内存。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%24filename%20%3D%20'path%2Fto%2Fyour_file.txt'%3B%5Cn%24file%20%3D%20new%20SplFileObject(%24filename)%3B%5Cn%5Cn%24data%20%3D%20%5B%5D%3B%5Cnwhile%20(!%24file-%3Eeof())%20%7B%5Cn%20%20%20%20%24line%20%3D%20%24file-%3Efgets()%3B%5Cn%20%20%20%20%24trimmedLine%20%3D%20trim(%24line)%3B%5Cn%20%20%20%20if%20(%24trimmedLine%20%3D%3D%3D%20'')%20%7B%5Cn%20%20%20%20%20%20%20%20continue%3B%20%2F%2F%20%E8%B7%B3%E8%BF%87%E7%A9%BA%E8%A1%8C%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%24items%20%3D%20explode('%2C'%2C%20%24trimmedLine)%3B%5Cn%20%20%20%20if%20(!empty(%24items))%20%7B%5Cn%20%20%20%20%20%20%20%20%24data%5B%5D%20%3D%20%24items%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cn%2F%2F%20%E5%90%88%E5%B9%B6%E4%B8%BA%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E5%B9%B6%E5%8E%BB%E9%87%8D%5Cn%24flatData%20%3D%20array_unique(array_merge(...%24data))%3B%5Cn%5Cnprint_r(%24flatData)%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FHErn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"h7efL\" id=\"h7efL\"><span data-lake-id=\"u910c633d\" id=\"u910c633d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">结论：</span></h2><p data-lake-id=\"ueada85ac\" id=\"ueada85ac\"><span data-lake-id=\"u4e67a90e\" id=\"u4e67a90e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u809b2917\" id=\"u809b2917\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">对于大数据文件，方法3</span><strong><span data-lake-id=\"u89afdf2c\" id=\"u89afdf2c\" class=\"lake-fontsize-11\" style=\"color: #DF2A3F\">（fopen()、fgets()、explode()）</span></strong><span data-lake-id=\"u8f4e6c3f\" id=\"u8f4e6c3f\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">和方法4（</span><strong><span data-lake-id=\"ud66f8800\" id=\"ud66f8800\" class=\"lake-fontsize-11\" style=\"color: #DF2A3F\">SplFileObject类</span></strong><span data-lake-id=\"ua674e898\" id=\"ua674e898\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">）由于采用了逐行读取的方式，能够有效降低内存消耗，避免一次性加载整个文件带来的内存压力，因此在效率上优于方法1（file()）和方法2（file_get_contents() + preg_split()）。在这两者之间，方法4提供了面向对象的接口和更丰富的功能，但底层处理逻辑与方法3相似，因此在处理大数据效率上，二者相差不大，主要取决于具体的实现细节和环境因素（如CPU性能、磁盘I/O速度等）。</span></p><p data-lake-id=\"uf884bdad\" id=\"uf884bdad\"><span data-lake-id=\"ua3da750a\" id=\"ua3da750a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"ubcf7f41a\" id=\"ubcf7f41a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">综上所述，推荐在处理大数据文件时使用方法3（fopen()、fgets()、explode()）或方法4（SplFileObject类），它们在内存效率上表现更好，更适合应对大数据场景。在实际应用中，如果对面向对象编程更熟悉或者需要利用SplFileObject提供的其他高级功能，可以选择方法4；否则，方法3的简单直接可能更适合大多数场景。</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 1145,
    "created_at": "2024-04-17T02:18:36.000Z",
    "updated_at": "2024-04-29T06:02:10.000Z",
    "content_updated_at": "2024-04-29T06:02:08.000Z",
    "published_at": "2024-04-29T06:02:10.000Z",
    "first_published_at": "2024-04-17T02:23:07.439Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2484348641,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 165702642,
    "type": "Doc",
    "slug": "mbx3ei0pz3fn1yog",
    "title": "php使用Google Authenticator (Google2fa)进行二次验证",
    "description": "tags: [Google2fa，Google Authenticator，Authenticator]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [Google2fa，Google Authenticator，Authenticator]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: 小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"GYlDl\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">什么是google2fa</span></h1><p id=\"u6f8fe170\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">Google2FA 是 Google Authenticator 的简称，是一种基于时间的一次性密码（TOTP）算法，用于实现双因素身份验证。双因素身份验证通过要求用户除了输入密码外，还需提供另一个因素（通常是生成的一次性验证码），以提高账户的安全性。</span></p><p id=\"udb32f50d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">Google Authenticator 生成的验证码是基于时间的，每隔一段时间就会生成一个新的验证码。用户在登录时需要输入当前时刻生成的验证码，以验证其身份。</span></p><p id=\"u7bee7740\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">Google2FA 库是一个用于 PHP 的库，可以帮助开发人员轻松地集成双因素身份验证功能到他们的应用程序中。通过 Google2FA，开发人员可以生成密钥、生成二维码供用户扫描、验证用户输入的验证码等操作，从而实现安全的双因素身份验证。</span></p><h1 id=\"wnb5S\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">为什么要使用google2fa</span></h1><p id=\"u053ad169\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">使用 Google2FA 或类似的库可以为应用程序增加额外的安全层，防止未经授权的访问和保护用户数据安全。这种双因素身份验证在许多网站和应用程序中被广泛采用，以提高账户的安全性。</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h1 id=\"Nqcwv\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">在php中使用</span></h1><div class=\"ne-quote\"><p id=\"u23cb9a8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">默认环境： php8.0</span></p><p id=\"ue55fdfdb\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">要求环境：php7.1+</span></p></div><h2 id=\"iYc6o\"><span class=\"ne-text\">1、安装</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">google2fa</span></h2><p id=\"u720dbfd1\" class=\"ne-p\"><span class=\"ne-text\">使用 Composer 安装它：</span></p><pre data-language=\"shell\" id=\"hL2BW\" class=\"ne-codeblock language-shell\"><code>composer require pragmarx/google2fa</code></pre><p id=\"u600f5a8f\" class=\"ne-p\"><span class=\"ne-text\">要生成内联 QRCodes，您需要安装一个 QR 码生成器，例如 </span><a href=\"https://github.com/Bacon/BaconQrCode\" data-href=\"https://github.com/Bacon/BaconQrCode\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">BaconQrCode</span></a><span class=\"ne-text\">：</span></p><pre data-language=\"shell\" id=\"bkRjw\" class=\"ne-codeblock language-shell\"><code>composer require bacon/bacon-qr-code</code></pre><h2 id=\"nHAL4\"><span class=\"ne-text\">2、安装php扩展（php_imagick）</span></h2><div class=\"ne-quote\"><p id=\"ua1cb89e3\" class=\"ne-p\"><span class=\"ne-text\">此扩展组件是baconQrCode需要创建二维码生成使用。</span></p></div><p id=\"uae91ef72\" class=\"ne-p\"><span class=\"ne-text\">可参考网址：</span></p><div id=\"klpxn\" class=\"ne-bookmark\"><a href=\"https://cloud.tencent.com/developer/article/2017351\" target=\"_blank\">https://cloud.tencent.com/developer/article/2017351</a></div><p id=\"u2f013612\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u6377343d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">根据环境下载合适的 imagick扩展 和 imagemagick程序</span></p><p id=\"uf5e4a51b\" class=\"ne-p\"><span class=\"ne-text\">1.下载拓展<br /></span><span class=\"ne-text\">下载地址一: </span><a href=\"http://windows.php.net/downloads/pecl/releases/imagick/\" data-href=\"http://windows.php.net/downloads/pecl/releases/imagick/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://windows.php.net/downloads/pecl/releases/imagick/</span></a><span class=\"ne-text\"><br /></span><span class=\"ne-text\">下载地址二: </span><a href=\"https://pecl.php.net/package/imagick\" data-href=\"https://pecl.php.net/package/imagick\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://pecl.php.net/package/imagick</span></a><span class=\"ne-text\"><br /></span><span class=\"ne-text\">要点: 注意对应php版本 ts还是nts x86还是x64<br /></span><span class=\"ne-text\">这里以phpinfo()为准</span></p><p id=\"u5618987a\" class=\"ne-p\"><br></p><ol start=\"2\" class=\"ne-ol\"><li id=\"u3969ccfe\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">安装拓展<br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">解压上述文件后，将php_imagick.dll复制到php/ext目录，或者其他你的存放拓展的目录<br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">修改php.ini 加上extension=php_imagick.dll，注意php可能有多个ini，以phpinfo为准<br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">此时复制解压上述文件目录中其他dll到php目录，重启apache，此时phpinfo显示拓展安装成功，但是 ImageMagick number of supported formats为0，到这里成功安装了一半</span></li><li id=\"u84a04cc2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">下载imagemagick程序<br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">下载地址：</span><a href=\"http://windows.php.net/downloads/pecl/deps/\" data-href=\"http://windows.php.net/downloads/pecl/deps/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">http://windows.php.net/downloads/pecl/deps/</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">imagemagick还有官网下载，此处不鼓励从imagemagick官方下载，他们的网站上我并没有找到历史版本下载，安装失败的几率很大<br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">下载与phpinfo提示一致的版本，此时需要注意  1.软件版本对应     2.vc11还是vc14 3.x86还是x64 都要以phpinfo为准</span></li></ol><h2 id=\"aQgiy\"><span class=\"ne-text\">3、在php控制器中使用</span></h2><div class=\"ne-quote\"><p id=\"u383e3110\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">默认使用的是thinkphp6.0 ，其他框架类同</span></p></div><h3 id=\"sVI6p\"><span class=\"ne-text\">引入类库：</span></h3><pre data-language=\"php\" id=\"O4YKC\" class=\"ne-codeblock language-php\"><code>use think\\facade\\Request;\nuse PragmaRX\\Google2FA\\Google2FA;\n// 创建二维码\nuse BaconQrCode\\Renderer\\ImageRenderer;\nuse BaconQrCode\\Renderer\\Image\\ImagickImageBackEnd;\nuse BaconQrCode\\Renderer\\RendererStyle\\RendererStyle;\nuse BaconQrCode\\Writer;</code></pre><p id=\"u4f8dea08\" class=\"ne-p\"><br></p><h3 id=\"edFnJ\"><span class=\"ne-text\">创建二维码：</span></h3><pre data-language=\"php\" id=\"J3i39\" class=\"ne-codeblock language-php\"><code>//实例化\n$google2fa = new Google2FA();\n\n$secretKey    = $google2fa-&gt;generateSecretKey(32);\n$companyName  = &quot;HuiCMF-webman&quot;; //这里可以是标题等\n$companyEmail = &quot;xiaohuihui&quot;;    //用户名。这里可以是邮箱、手机号、用户ID等唯一值\n\n$qrCodeUrl = $google2fa-&gt;getQRCodeUrl($companyName, $companyEmail, $secretKey);\n\n$writer       = new Writer(new ImageRenderer(new RendererStyle(400), new ImagickImageBackEnd()));\n$qrcode_image = base64_encode($writer-&gt;writeString($qrCodeUrl));\n//创建成功的秘钥记得保存到数据库，验证数据的时候需要用到\n\necho '&lt;img src=&quot;data:image/png;base64, '.$qrcode_image.' &quot;/&gt;';</code></pre><p id=\"ue58c8ab5\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">创建成功后的二维码可以使用第三方工具扫码，绑定到数据里。最后一部分会讲</span></p><p id=\"u09d90891\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h3 id=\"CZDKu\"><span class=\"ne-text\">数据验证：</span></h3><pre data-language=\"php\" id=\"M0uBR\" class=\"ne-codeblock language-php\"><code>// 获取验证码\n        $secret    = Request::param('secret');\n        $google2fa = new Google2FA();\n        //获取用户的秘钥密钥（一般从数据库获取）\n        $secretKey = 'IDTD5IIARQSORYKN3UXO4AZKHF5IRKXF';\n        $timestamp = false;\n        $timestamp = $google2fa-&gt;verifyKeyNewer($secretKey, $secret, $timestamp);\n\n        if ($timestamp !== false) {\n            dump($timestamp);\n            //这里更新用户信息 $timestamp\n            // successful\n        } else {\n            // failed\n            return &quot;验证失败&quot;;\n        }</code></pre><div class=\"ne-quote\"><p id=\"ub21e2f3e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">请注意，以上代码中使用的verifyKeyNewer：</span></p><p id=\"u92003812\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">攻击者可能能够监视用户输入其凭据和一次性密钥。如果不采取进一步的预防措施，密钥将保持有效，直到它不再在服务器时间窗口内。为了防止使用已经使用过的一次性密钥，可以使用</span><span class=\"ne-text\" style=\"color: rgb(76, 118, 201); font-size: 14px\">verifyKeyNewer</span><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">函数。</span></p></div><div class=\"ne-quote\"><p id=\"uce929582\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">请注意，</span><span class=\"ne-text\" style=\"color: rgb(76, 118, 201); font-size: 14px\">$timestamp</span><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">要么是</span><span class=\"ne-text\" style=\"color: rgb(76, 118, 201); font-size: 14px\">false</span><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">（如果密钥无效或以前曾使用过），要么是提供的密钥的unix时间戳除以30秒的密钥再生周期。</span></p></div><h1 id=\"CVIn7\"><span class=\"ne-text\" style=\"color: rgb(89, 89, 89)\">Google Authenticator Apps</span></h1><div class=\"ne-quote\"><p id=\"u72322136\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">可以使用身份验证码的app参考</span></p></div><ol class=\"ne-ol\"><li id=\"u590dcd46\" data-lake-index-type=\"0\"><span class=\"ne-text\">Google</span><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> Authenticator</span></li><li id=\"u12e879d4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">微软Authenticator</span></li><li id=\"u3a0ad20b\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">LastPass</span></li><li id=\"u60564c13\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1Password</span></li><li id=\"uc010c343\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">腾讯身份验证器</span></li><li id=\"u5003aff8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">......</span></li></ol></div>",
    "body": "tags: [Google2fa，Google Authenticator，Authenticator]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: 小灰灰<br />cover:\n\n---\n\n<a name=\"GYlDl\"></a>\n# 什么是google2fa\nGoogle2FA 是 Google Authenticator 的简称，是一种基于时间的一次性密码（TOTP）算法，用于实现双因素身份验证。双因素身份验证通过要求用户除了输入密码外，还需提供另一个因素（通常是生成的一次性验证码），以提高账户的安全性。<br />Google Authenticator 生成的验证码是基于时间的，每隔一段时间就会生成一个新的验证码。用户在登录时需要输入当前时刻生成的验证码，以验证其身份。<br />Google2FA 库是一个用于 PHP 的库，可以帮助开发人员轻松地集成双因素身份验证功能到他们的应用程序中。通过 Google2FA，开发人员可以生成密钥、生成二维码供用户扫描、验证用户输入的验证码等操作，从而实现安全的双因素身份验证。\n<a name=\"wnb5S\"></a>\n# 为什么要使用google2fa\n使用 Google2FA 或类似的库可以为应用程序增加额外的安全层，防止未经授权的访问和保护用户数据安全。这种双因素身份验证在许多网站和应用程序中被广泛采用，以提高账户的安全性。\n\n<a name=\"Nqcwv\"></a>\n# 在php中使用\n> 默认环境： php8.0\n> 要求环境：php7.1+\n\n<a name=\"iYc6o\"></a>\n## 1、安装google2fa\n使用 Composer 安装它：\n```shell\ncomposer require pragmarx/google2fa\n```\n要生成内联 QRCodes，您需要安装一个 QR 码生成器，例如 [BaconQrCode](https://github.com/Bacon/BaconQrCode)：\n```shell\ncomposer require bacon/bacon-qr-code\n```\n<a name=\"nHAL4\"></a>\n## 2、安装php扩展（php_imagick）\n> 此扩展组件是baconQrCode需要创建二维码生成使用。\n\n可参考网址：<br />[PHP安装Imagick扩展-腾讯云开发者社区-腾讯云](https://cloud.tencent.com/developer/article/2017351)\n\n根据环境下载合适的 imagick扩展 和 imagemagick程序<br />1.下载拓展<br />下载地址一: [http://windows.php.net/downloads/pecl/releases/imagick/](http://windows.php.net/downloads/pecl/releases/imagick/)<br />下载地址二: [https://pecl.php.net/package/imagick](https://pecl.php.net/package/imagick)<br />要点: 注意对应php版本 ts还是nts x86还是x64<br />这里以phpinfo()为准\n\n2. 安装拓展<br />解压上述文件后，将php_imagick.dll复制到php/ext目录，或者其他你的存放拓展的目录<br />修改php.ini 加上extension=php_imagick.dll，注意php可能有多个ini，以phpinfo为准<br />此时复制解压上述文件目录中其他dll到php目录，重启apache，此时phpinfo显示拓展安装成功，但是 ImageMagick number of supported formats为0，到这里成功安装了一半\n3. 下载imagemagick程序<br />下载地址：[http://windows.php.net/downloads/pecl/deps/](http://windows.php.net/downloads/pecl/deps/)<br />imagemagick还有官网下载，此处不鼓励从imagemagick官方下载，他们的网站上我并没有找到历史版本下载，安装失败的几率很大<br />下载与phpinfo提示一致的版本，此时需要注意  1.软件版本对应     2.vc11还是vc14 3.x86还是x64 都要以phpinfo为准\n<a name=\"aQgiy\"></a>\n## 3、在php控制器中使用\n> 默认使用的是thinkphp6.0 ，其他框架类同\n\n<a name=\"sVI6p\"></a>\n### 引入类库：\n```php\nuse think\\facade\\Request;\nuse PragmaRX\\Google2FA\\Google2FA;\n// 创建二维码\nuse BaconQrCode\\Renderer\\ImageRenderer;\nuse BaconQrCode\\Renderer\\Image\\ImagickImageBackEnd;\nuse BaconQrCode\\Renderer\\RendererStyle\\RendererStyle;\nuse BaconQrCode\\Writer;\n```\n\n<a name=\"edFnJ\"></a>\n### 创建二维码：\n```php\n//实例化\n$google2fa = new Google2FA();\n\n$secretKey    = $google2fa->generateSecretKey(32);\n$companyName  = \"HuiCMF-webman\"; //这里可以是标题等\n$companyEmail = \"xiaohuihui\";    //用户名。这里可以是邮箱、手机号、用户ID等唯一值\n\n$qrCodeUrl = $google2fa->getQRCodeUrl($companyName, $companyEmail, $secretKey);\n\n$writer       = new Writer(new ImageRenderer(new RendererStyle(400), new ImagickImageBackEnd()));\n$qrcode_image = base64_encode($writer->writeString($qrCodeUrl));\n//创建成功的秘钥记得保存到数据库，验证数据的时候需要用到\n\necho '<img src=\"data:image/png;base64, '.$qrcode_image.' \"/>';\n```\n创建成功后的二维码可以使用第三方工具扫码，绑定到数据里。最后一部分会讲\n\n<a name=\"CZDKu\"></a>\n### 数据验证：\n```php\n// 获取验证码\n        $secret    = Request::param('secret');\n        $google2fa = new Google2FA();\n        //获取用户的秘钥密钥（一般从数据库获取）\n        $secretKey = 'IDTD5IIARQSORYKN3UXO4AZKHF5IRKXF';\n        $timestamp = false;\n        $timestamp = $google2fa->verifyKeyNewer($secretKey, $secret, $timestamp);\n\n        if ($timestamp !== false) {\n            dump($timestamp);\n            //这里更新用户信息 $timestamp\n            // successful\n        } else {\n            // failed\n            return \"验证失败\";\n        }\n```\n> 请注意，以上代码中使用的verifyKeyNewer：\n> 攻击者可能能够监视用户输入其凭据和一次性密钥。如果不采取进一步的预防措施，密钥将保持有效，直到它不再在服务器时间窗口内。为了防止使用已经使用过的一次性密钥，可以使用verifyKeyNewer函数。\n\n> 请注意，$timestamp要么是false（如果密钥无效或以前曾使用过），要么是提供的密钥的unix时间戳除以30秒的密钥再生周期。\n\n<a name=\"CVIn7\"></a>\n# Google Authenticator Apps\n> 可以使用身份验证码的app参考\n\n1. Google Authenticator\n2. 微软Authenticator\n3. LastPass\n4. 1Password\n5. 腾讯身份验证器\n6. ......\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [Google2fa，Google Authenticator，Authenticator]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author: 小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"GYlDl\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">什么是google2fa</span></h1><p id=\"u6f8fe170\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">Google2FA 是 Google Authenticator 的简称，是一种基于时间的一次性密码（TOTP）算法，用于实现双因素身份验证。双因素身份验证通过要求用户除了输入密码外，还需提供另一个因素（通常是生成的一次性验证码），以提高账户的安全性。</span></p><p id=\"udb32f50d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">Google Authenticator 生成的验证码是基于时间的，每隔一段时间就会生成一个新的验证码。用户在登录时需要输入当前时刻生成的验证码，以验证其身份。</span></p><p id=\"u7bee7740\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">Google2FA 库是一个用于 PHP 的库，可以帮助开发人员轻松地集成双因素身份验证功能到他们的应用程序中。通过 Google2FA，开发人员可以生成密钥、生成二维码供用户扫描、验证用户输入的验证码等操作，从而实现安全的双因素身份验证。</span></p><h1 id=\"wnb5S\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">为什么要使用google2fa</span></h1><p id=\"u053ad169\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(36, 41, 47); font-size: 14px\">使用 Google2FA 或类似的库可以为应用程序增加额外的安全层，防止未经授权的访问和保护用户数据安全。这种双因素身份验证在许多网站和应用程序中被广泛采用，以提高账户的安全性。</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h1 id=\"Nqcwv\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">在php中使用</span></h1><div class=\"ne-quote\"><p id=\"u23cb9a8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">默认环境： php8.0</span></p><p id=\"ue55fdfdb\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">要求环境：php7.1+</span></p></div><h2 id=\"iYc6o\"><span class=\"ne-text\">1、安装</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">google2fa</span></h2><p id=\"u720dbfd1\" class=\"ne-p\"><span class=\"ne-text\">使用 Composer 安装它：</span></p><pre data-language=\"shell\" id=\"hL2BW\" class=\"ne-codeblock language-shell\"><code>composer require pragmarx/google2fa</code></pre><p id=\"u600f5a8f\" class=\"ne-p\"><span class=\"ne-text\">要生成内联 QRCodes，您需要安装一个 QR 码生成器，例如 </span><a href=\"https://github.com/Bacon/BaconQrCode\" data-href=\"https://github.com/Bacon/BaconQrCode\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">BaconQrCode</span></a><span class=\"ne-text\">：</span></p><pre data-language=\"shell\" id=\"bkRjw\" class=\"ne-codeblock language-shell\"><code>composer require bacon/bacon-qr-code</code></pre><h2 id=\"nHAL4\"><span class=\"ne-text\">2、安装php扩展（php_imagick）</span></h2><div class=\"ne-quote\"><p id=\"ua1cb89e3\" class=\"ne-p\"><span class=\"ne-text\">此扩展组件是baconQrCode需要创建二维码生成使用。</span></p></div><p id=\"uae91ef72\" class=\"ne-p\"><span class=\"ne-text\">可参考网址：</span></p><div id=\"klpxn\" class=\"ne-bookmark\"><a href=\"https://cloud.tencent.com/developer/article/2017351\" target=\"_blank\">https://cloud.tencent.com/developer/article/2017351</a></div><p id=\"u2f013612\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u6377343d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">根据环境下载合适的 imagick扩展 和 imagemagick程序</span></p><p id=\"uf5e4a51b\" class=\"ne-p\"><span class=\"ne-text\">1.下载拓展<br /></span><span class=\"ne-text\">下载地址一: </span><a href=\"http://windows.php.net/downloads/pecl/releases/imagick/\" data-href=\"http://windows.php.net/downloads/pecl/releases/imagick/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://windows.php.net/downloads/pecl/releases/imagick/</span></a><span class=\"ne-text\"><br /></span><span class=\"ne-text\">下载地址二: </span><a href=\"https://pecl.php.net/package/imagick\" data-href=\"https://pecl.php.net/package/imagick\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://pecl.php.net/package/imagick</span></a><span class=\"ne-text\"><br /></span><span class=\"ne-text\">要点: 注意对应php版本 ts还是nts x86还是x64<br /></span><span class=\"ne-text\">这里以phpinfo()为准</span></p><p id=\"u5618987a\" class=\"ne-p\"><br></p><ol start=\"2\" class=\"ne-ol\"><li id=\"u3969ccfe\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">安装拓展<br />解压上述文件后，将php_imagick.dll复制到php/ext目录，或者其他你的存放拓展的目录<br />修改php.ini 加上extension=php_imagick.dll，注意php可能有多个ini，以phpinfo为准<br />此时复制解压上述文件目录中其他dll到php目录，重启apache，此时phpinfo显示拓展安装成功，但是 ImageMagick number of supported formats为0，到这里成功安装了一半</span></li><li id=\"u84a04cc2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">下载imagemagick程序<br />下载地址：</span><a href=\"http://windows.php.net/downloads/pecl/deps/\" data-href=\"http://windows.php.net/downloads/pecl/deps/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">http://windows.php.net/downloads/pecl/deps/</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />imagemagick还有官网下载，此处不鼓励从imagemagick官方下载，他们的网站上我并没有找到历史版本下载，安装失败的几率很大<br />下载与phpinfo提示一致的版本，此时需要注意  1.软件版本对应     2.vc11还是vc14 3.x86还是x64 都要以phpinfo为准</span></li></ol><h2 id=\"aQgiy\"><span class=\"ne-text\">3、在php控制器中使用</span></h2><div class=\"ne-quote\"><p id=\"u383e3110\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">默认使用的是thinkphp6.0 ，其他框架类同</span></p></div><h3 id=\"sVI6p\"><span class=\"ne-text\">引入类库：</span></h3><pre data-language=\"php\" id=\"O4YKC\" class=\"ne-codeblock language-php\"><code>use think\\facade\\Request;\nuse PragmaRX\\Google2FA\\Google2FA;\n// 创建二维码\nuse BaconQrCode\\Renderer\\ImageRenderer;\nuse BaconQrCode\\Renderer\\Image\\ImagickImageBackEnd;\nuse BaconQrCode\\Renderer\\RendererStyle\\RendererStyle;\nuse BaconQrCode\\Writer;</code></pre><p id=\"u4f8dea08\" class=\"ne-p\"><br></p><h3 id=\"edFnJ\"><span class=\"ne-text\">创建二维码：</span></h3><pre data-language=\"php\" id=\"J3i39\" class=\"ne-codeblock language-php\"><code>//实例化\n$google2fa = new Google2FA();\n\n$secretKey    = $google2fa-&gt;generateSecretKey(32);\n$companyName  = &quot;HuiCMF-webman&quot;; //这里可以是标题等\n$companyEmail = &quot;xiaohuihui&quot;;    //用户名。这里可以是邮箱、手机号、用户ID等唯一值\n\n$qrCodeUrl = $google2fa-&gt;getQRCodeUrl($companyName, $companyEmail, $secretKey);\n\n$writer       = new Writer(new ImageRenderer(new RendererStyle(400), new ImagickImageBackEnd()));\n$qrcode_image = base64_encode($writer-&gt;writeString($qrCodeUrl));\n//创建成功的秘钥记得保存到数据库，验证数据的时候需要用到\n\necho '&lt;img src=&quot;data:image/png;base64, '.$qrcode_image.' &quot;/&gt;';</code></pre><p id=\"ue58c8ab5\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">创建成功后的二维码可以使用第三方工具扫码，绑定到数据里。最后一部分会讲</span></p><p id=\"u09d90891\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h3 id=\"CZDKu\"><span class=\"ne-text\">数据验证：</span></h3><pre data-language=\"php\" id=\"M0uBR\" class=\"ne-codeblock language-php\"><code>// 获取验证码\n        $secret    = Request::param('secret');\n        $google2fa = new Google2FA();\n        //获取用户的秘钥密钥（一般从数据库获取）\n        $secretKey = 'IDTD5IIARQSORYKN3UXO4AZKHF5IRKXF';\n        $timestamp = false;\n        $timestamp = $google2fa-&gt;verifyKeyNewer($secretKey, $secret, $timestamp);\n\n        if ($timestamp !== false) {\n            dump($timestamp);\n            //这里更新用户信息 $timestamp\n            // successful\n        } else {\n            // failed\n            return &quot;验证失败&quot;;\n        }</code></pre><div class=\"ne-quote\"><p id=\"ub21e2f3e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">请注意，以上代码中使用的verifyKeyNewer：</span></p><p id=\"u92003812\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">攻击者可能能够监视用户输入其凭据和一次性密钥。如果不采取进一步的预防措施，密钥将保持有效，直到它不再在服务器时间窗口内。为了防止使用已经使用过的一次性密钥，可以使用</span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(76, 118, 201)\">verifyKeyNewer</span><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">函数。</span></p></div><div class=\"ne-quote\"><p id=\"uce929582\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">请注意，</span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(76, 118, 201)\">$timestamp</span><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">要么是</span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(76, 118, 201)\">false</span><span class=\"ne-text\" style=\"color: rgb(89, 89, 89); font-size: 16px\">（如果密钥无效或以前曾使用过），要么是提供的密钥的unix时间戳除以30秒的密钥再生周期。</span></p></div><h1 id=\"CVIn7\"><span class=\"ne-text\" style=\"color: rgb(89, 89, 89)\">Google Authenticator Apps</span></h1><div class=\"ne-quote\"><p id=\"u72322136\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">可以使用身份验证码的app参考</span></p></div><ol class=\"ne-ol\"><li id=\"u590dcd46\" data-lake-index-type=\"0\"><span class=\"ne-text\">Google</span><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\"> Authenticator</span></li><li id=\"u12e879d4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">微软Authenticator</span></li><li id=\"u3a0ad20b\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">LastPass</span></li><li id=\"u60564c13\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">1Password</span></li><li id=\"uc010c343\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">腾讯身份验证器</span></li><li id=\"u5003aff8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(25, 27, 31)\">......</span></li></ol></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [Google2fa，Google Authenticator，Authenticator]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author: 小灰灰</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h1 data-lake-id=\"GYlDl\" id=\"GYlDl\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">什么是google2fa</span></h1><p data-lake-id=\"u6f8fe170\" id=\"u6f8fe170\"><span data-lake-id=\"u36712939\" id=\"u36712939\" class=\"lake-fontsize-11\" style=\"color: rgb(36, 41, 47)\">Google2FA 是 Google Authenticator 的简称，是一种基于时间的一次性密码（TOTP）算法，用于实现双因素身份验证。双因素身份验证通过要求用户除了输入密码外，还需提供另一个因素（通常是生成的一次性验证码），以提高账户的安全性。</span></p><p data-lake-id=\"udb32f50d\" id=\"udb32f50d\"><span data-lake-id=\"u2d16177d\" id=\"u2d16177d\" class=\"lake-fontsize-11\" style=\"color: rgb(36, 41, 47)\">Google Authenticator 生成的验证码是基于时间的，每隔一段时间就会生成一个新的验证码。用户在登录时需要输入当前时刻生成的验证码，以验证其身份。</span></p><p data-lake-id=\"u7bee7740\" id=\"u7bee7740\"><span data-lake-id=\"u89e725b0\" id=\"u89e725b0\" class=\"lake-fontsize-11\" style=\"color: rgb(36, 41, 47)\">Google2FA 库是一个用于 PHP 的库，可以帮助开发人员轻松地集成双因素身份验证功能到他们的应用程序中。通过 Google2FA，开发人员可以生成密钥、生成二维码供用户扫描、验证用户输入的验证码等操作，从而实现安全的双因素身份验证。</span></p><h1 data-lake-id=\"wnb5S\" id=\"wnb5S\"><span data-lake-id=\"u9cdfb4f8\" id=\"u9cdfb4f8\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">为什么要使用google2fa</span></h1><p data-lake-id=\"u053ad169\" id=\"u053ad169\"><span data-lake-id=\"u1a6a9125\" id=\"u1a6a9125\" class=\"lake-fontsize-11\" style=\"color: rgb(36, 41, 47)\">使用 Google2FA 或类似的库可以为应用程序增加额外的安全层，防止未经授权的访问和保护用户数据安全。这种双因素身份验证在许多网站和应用程序中被广泛采用，以提高账户的安全性。</span><span data-lake-id=\"ub0c076b5\" id=\"ub0c076b5\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p><h1 data-lake-id=\"Nqcwv\" id=\"Nqcwv\"><span data-lake-id=\"u2ec4562c\" id=\"u2ec4562c\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">在php中使用</span></h1><blockquote data-lake-id=\"u818570a4\" id=\"u818570a4\"><p data-lake-id=\"u23cb9a8e\" id=\"u23cb9a8e\"><span data-lake-id=\"ue88f7ffd\" id=\"ue88f7ffd\" class=\"lake-fontsize-11\">默认环境： php8.0</span></p><p data-lake-id=\"ue55fdfdb\" id=\"ue55fdfdb\"><span data-lake-id=\"u896f563f\" id=\"u896f563f\" class=\"lake-fontsize-11\">要求环境：php7.1+</span></p></blockquote><h2 data-lake-id=\"iYc6o\" id=\"iYc6o\"><span data-lake-id=\"u6ce109a9\" id=\"u6ce109a9\" class=\"lake-fontsize-11\">1、安装</span><span data-lake-id=\"u9575cdf1\" id=\"u9575cdf1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">google2fa</span></h2><p data-lake-id=\"u720dbfd1\" id=\"u720dbfd1\"><span data-lake-id=\"u624728ae\" id=\"u624728ae\">使用 Composer 安装它：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20pragmarx%2Fgoogle2fa%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22hL2BW%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u600f5a8f\" id=\"u600f5a8f\"><span data-lake-id=\"ufc2a68bd\" id=\"ufc2a68bd\">要生成内联 QRCodes，您需要安装一个 QR 码生成器，例如 </span><a href=\"https://github.com/Bacon/BaconQrCode\" target=\"_blank\" data-lake-id=\"ubbc805fc\" id=\"ubbc805fc\"><span data-lake-id=\"u012f91d7\" id=\"u012f91d7\">BaconQrCode</span></a><span data-lake-id=\"u842ef89a\" id=\"u842ef89a\">：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20bacon%2Fbacon-qr-code%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bkRjw%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"nHAL4\" id=\"nHAL4\"><span data-lake-id=\"u960fd019\" id=\"u960fd019\">2、安装php扩展（php_imagick）</span></h2><blockquote data-lake-id=\"u105f865f\" id=\"u105f865f\"><p data-lake-id=\"ua1cb89e3\" id=\"ua1cb89e3\"><span data-lake-id=\"u1207489b\" id=\"u1207489b\">此扩展组件是baconQrCode需要创建二维码生成使用。</span></p></blockquote><p data-lake-id=\"uae91ef72\" id=\"uae91ef72\"><span data-lake-id=\"u510fc4b0\" id=\"u510fc4b0\">可参考网址：</span></p><card type=\"block\" name=\"bookmarklink\" value=\"data:%7B%22mode%22%3A%22card%22%2C%22src%22%3A%22https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2017351%22%2C%22text%22%3A%22https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2017351%22%2C%22detail%22%3A%7B%22icon%22%3A%22https%3A%2F%2Fcloud.tencent.com%2Ffavicon.ico%22%2C%22image%22%3A%22https%3A%2F%2Fcloudcache.tencentcs.com%2Fopen_proj%2Fproj_qcloud_v2%2Fgateway%2Fshareicons%2Fcloud.png%22%2C%22title%22%3A%22PHP%E5%AE%89%E8%A3%85Imagick%E6%89%A9%E5%B1%95-%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA-%E8%85%BE%E8%AE%AF%E4%BA%91%22%2C%22belong%22%3Anull%2C%22belong_url%22%3Anull%2C%22desc%22%3A%22ImageMagick%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%9B%BE%E8%B1%A1%E5%A4%84%E7%90%86%E8%BD%AF%E4%BB%B6%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BD%9C%E4%B8%BAPHP%E7%9A%84%E4%B8%80%E4%B8%AA%E6%89%A9%E5%B1%95%E6%9D%A5%E4%BD%BF%E7%94%A8%E3%80%82%E5%AE%83%E5%8F%AF%E4%BB%A5%E7%BC%96%E8%BE%91%E3%80%81%E6%98%BE%E7%A4%BA%E5%8C%85%E6%8B%ACJPEG%E3%80%81TIFF%E3%80%81PNM%E3%80%81PNG%E3%80%81GIF%E5%92%8CPhoto%20CS%E5%9C%A8%E5%86%85%E7%9A%84%E7%BB%9D%E5%A4%A7%E5%A4%9A%E6%95%B0%E5%BD%93%E4%BB%8A%E6%9C%80%E6%B5%81%E8%A1%8C%E7%9A%84%E5%9B%BE%E8%B1%A1%E6%A0%BC%E5%BC%8F%E3%80%82%E4%BD%A0%E5%8F%AF%E4%BB%A5%E6%94%B9%E5%8F%98%E5%9B%BE%E8%B1%A1%E5%B0%BA%E5%AF%B8%E3%80%81%E6%97%8B%E8%BD%AC%E3%80%81%E9%94%90%E5%8C%96%E3%80%81%E5%87%8F%E5%B0%91%E9%A2%9C%E8%89%B2%E6%88%96%E5%8A%A0%E5%85%A5%E7%89%B9%E6%AE%8A%E6%95%88%E6%9E%9C%E5%88%B0%E5%9B%BE%E8%B1%A1%E9%87%8C%EF%BC%8C%E5%B9%B6%E4%B8%94%E8%83%BD%E5%A4%9F%E4%BB%A5%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%9B%BE%E8%B1%A1%E6%A0%BC%E5%BC%8F%E4%BF%9D%E5%AD%98%E3%80%82%22%2C%22url%22%3A%22https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2017351%22%2C%22extra%22%3A%7B%7D%2C%22_serializer%22%3A%22web.editor_link_detail%22%7D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22klpxn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u2f013612\" id=\"u2f013612\"><span data-lake-id=\"u6ae97176\" id=\"u6ae97176\">​</span><br></p><p data-lake-id=\"u6377343d\" id=\"u6377343d\"><span data-lake-id=\"u5e323c99\" id=\"u5e323c99\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">根据环境下载合适的 imagick扩展 和 imagemagick程序</span></p><p data-lake-id=\"uf5e4a51b\" id=\"uf5e4a51b\"><span data-lake-id=\"u917c3ecd\" id=\"u917c3ecd\">1.下载拓展<br /></span><span data-lake-id=\"u767ab23e\" id=\"u767ab23e\">下载地址一: </span><a href=\"http://windows.php.net/downloads/pecl/releases/imagick/\" target=\"_blank\" data-lake-id=\"u631f6982\" id=\"u631f6982\"><span data-lake-id=\"uc1e1646e\" id=\"uc1e1646e\">http://windows.php.net/downloads/pecl/releases/imagick/</span></a><span data-lake-id=\"u23dd6c1e\" id=\"u23dd6c1e\"><br /></span><span data-lake-id=\"u520c62be\" id=\"u520c62be\">下载地址二: </span><a href=\"https://pecl.php.net/package/imagick\" target=\"_blank\" data-lake-id=\"u66d65c7c\" id=\"u66d65c7c\"><span data-lake-id=\"u196cf2ba\" id=\"u196cf2ba\">https://pecl.php.net/package/imagick</span></a><span data-lake-id=\"u2f6326aa\" id=\"u2f6326aa\"><br /></span><span data-lake-id=\"u40006673\" id=\"u40006673\">要点: 注意对应php版本 ts还是nts x86还是x64<br /></span><span data-lake-id=\"u220e2666\" id=\"u220e2666\">这里以phpinfo()为准</span></p><p data-lake-id=\"u5618987a\" id=\"u5618987a\"><br></p><ol list=\"ud9a8842c\" start=\"2\"><li fid=\"u8e7bdb88\" data-lake-id=\"u3969ccfe\" id=\"u3969ccfe\"><span data-lake-id=\"u54b140f3\" id=\"u54b140f3\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">安装拓展<br />解压上述文件后，将php_imagick.dll复制到php/ext目录，或者其他你的存放拓展的目录<br />修改php.ini 加上extension=php_imagick.dll，注意php可能有多个ini，以phpinfo为准<br />此时复制解压上述文件目录中其他dll到php目录，重启apache，此时phpinfo显示拓展安装成功，但是 ImageMagick number of supported formats为0，到这里成功安装了一半</span></li><li fid=\"u8e7bdb88\" data-lake-id=\"u84a04cc2\" id=\"u84a04cc2\"><span data-lake-id=\"u4cf5ddc6\" id=\"u4cf5ddc6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">下载imagemagick程序<br />下载地址：</span><a href=\"http://windows.php.net/downloads/pecl/deps/\" target=\"_blank\" data-lake-id=\"ucfd49bf5\" id=\"ucfd49bf5\"><span data-lake-id=\"ub49957b8\" id=\"ub49957b8\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">http://windows.php.net/downloads/pecl/deps/</span></a><span data-lake-id=\"ua9a7a76c\" id=\"ua9a7a76c\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br />imagemagick还有官网下载，此处不鼓励从imagemagick官方下载，他们的网站上我并没有找到历史版本下载，安装失败的几率很大<br />下载与phpinfo提示一致的版本，此时需要注意  1.软件版本对应     2.vc11还是vc14 3.x86还是x64 都要以phpinfo为准</span></li></ol><h2 data-lake-id=\"aQgiy\" id=\"aQgiy\"><span data-lake-id=\"ua1684785\" id=\"ua1684785\" class=\"lake-fontsize-11\">3、在php控制器中使用</span></h2><blockquote data-lake-id=\"u3ae360f4\" id=\"u3ae360f4\"><p data-lake-id=\"u383e3110\" id=\"u383e3110\"><span data-lake-id=\"uf2dfd63e\" id=\"uf2dfd63e\" class=\"lake-fontsize-11\">默认使用的是thinkphp6.0 ，其他框架类同</span></p></blockquote><h3 data-lake-id=\"sVI6p\" id=\"sVI6p\"><span data-lake-id=\"ub22e026d\" id=\"ub22e026d\" class=\"lake-fontsize-11\">引入类库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20think%5C%5Cfacade%5C%5CRequest%3B%5Cnuse%20PragmaRX%5C%5CGoogle2FA%5C%5CGoogle2FA%3B%5Cn%2F%2F%20%E5%88%9B%E5%BB%BA%E4%BA%8C%E7%BB%B4%E7%A0%81%5Cnuse%20BaconQrCode%5C%5CRenderer%5C%5CImageRenderer%3B%5Cnuse%20BaconQrCode%5C%5CRenderer%5C%5CImage%5C%5CImagickImageBackEnd%3B%5Cnuse%20BaconQrCode%5C%5CRenderer%5C%5CRendererStyle%5C%5CRendererStyle%3B%5Cnuse%20BaconQrCode%5C%5CWriter%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22O4YKC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4f8dea08\" id=\"u4f8dea08\"><br></p><h3 data-lake-id=\"edFnJ\" id=\"edFnJ\"><span data-lake-id=\"u61f55f05\" id=\"u61f55f05\" class=\"lake-fontsize-11\">创建二维码：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%2F%2F%E5%AE%9E%E4%BE%8B%E5%8C%96%5Cn%24google2fa%20%3D%20new%20Google2FA()%3B%5Cn%5Cn%24secretKey%20%20%20%20%3D%20%24google2fa-%3EgenerateSecretKey(32)%3B%5Cn%24companyName%20%20%3D%20%5C%22HuiCMF-webman%5C%22%3B%20%2F%2F%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E6%98%AF%E6%A0%87%E9%A2%98%E7%AD%89%5Cn%24companyEmail%20%3D%20%5C%22xiaohuihui%5C%22%3B%20%20%20%20%2F%2F%E7%94%A8%E6%88%B7%E5%90%8D%E3%80%82%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E6%98%AF%E9%82%AE%E7%AE%B1%E3%80%81%E6%89%8B%E6%9C%BA%E5%8F%B7%E3%80%81%E7%94%A8%E6%88%B7ID%E7%AD%89%E5%94%AF%E4%B8%80%E5%80%BC%5Cn%5Cn%24qrCodeUrl%20%3D%20%24google2fa-%3EgetQRCodeUrl(%24companyName%2C%20%24companyEmail%2C%20%24secretKey)%3B%5Cn%5Cn%24writer%20%20%20%20%20%20%20%3D%20new%20Writer(new%20ImageRenderer(new%20RendererStyle(400)%2C%20new%20ImagickImageBackEnd()))%3B%5Cn%24qrcode_image%20%3D%20base64_encode(%24writer-%3EwriteString(%24qrCodeUrl))%3B%5Cn%2F%2F%E5%88%9B%E5%BB%BA%E6%88%90%E5%8A%9F%E7%9A%84%E7%A7%98%E9%92%A5%E8%AE%B0%E5%BE%97%E4%BF%9D%E5%AD%98%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E7%94%A8%E5%88%B0%5Cn%5Cnecho%20'%3Cimg%20src%3D%5C%22data%3Aimage%2Fpng%3Bbase64%2C%20'.%24qrcode_image.'%20%5C%22%2F%3E'%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22J3i39%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ue58c8ab5\" id=\"ue58c8ab5\"><span data-lake-id=\"u3a1c5479\" id=\"u3a1c5479\" class=\"lake-fontsize-11\">创建成功后的二维码可以使用第三方工具扫码，绑定到数据里。最后一部分会讲</span></p><p data-lake-id=\"u09d90891\" id=\"u09d90891\"><span data-lake-id=\"ua9144f64\" id=\"ua9144f64\" class=\"lake-fontsize-11\">​</span><br></p><h3 data-lake-id=\"CZDKu\" id=\"CZDKu\"><span data-lake-id=\"u9320b3ad\" id=\"u9320b3ad\" class=\"lake-fontsize-11\">数据验证：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%2F%2F%20%E8%8E%B7%E5%8F%96%E9%AA%8C%E8%AF%81%E7%A0%81%5Cn%20%20%20%20%20%20%20%20%24secret%20%20%20%20%3D%20Request%3A%3Aparam('secret')%3B%5Cn%20%20%20%20%20%20%20%20%24google2fa%20%3D%20new%20Google2FA()%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E7%9A%84%E7%A7%98%E9%92%A5%E5%AF%86%E9%92%A5%EF%BC%88%E4%B8%80%E8%88%AC%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8E%B7%E5%8F%96%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%24secretKey%20%3D%20'IDTD5IIARQSORYKN3UXO4AZKHF5IRKXF'%3B%5Cn%20%20%20%20%20%20%20%20%24timestamp%20%3D%20false%3B%5Cn%20%20%20%20%20%20%20%20%24timestamp%20%3D%20%24google2fa-%3EverifyKeyNewer(%24secretKey%2C%20%24secret%2C%20%24timestamp)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20(%24timestamp%20!%3D%3D%20false)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20dump(%24timestamp)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E8%BF%99%E9%87%8C%E6%9B%B4%E6%96%B0%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%20%24timestamp%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20successful%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20failed%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%5C%22%E9%AA%8C%E8%AF%81%E5%A4%B1%E8%B4%A5%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22M0uBR%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"uc0a6f49a\" id=\"uc0a6f49a\"><p data-lake-id=\"ub21e2f3e\" id=\"ub21e2f3e\"><span data-lake-id=\"ua86e33ac\" id=\"ua86e33ac\" class=\"lake-fontsize-11\">请注意，以上代码中使用的verifyKeyNewer：</span></p><p data-lake-id=\"u92003812\" id=\"u92003812\"><span data-lake-id=\"u21ca42bc\" id=\"u21ca42bc\" class=\"lake-fontsize-12\" style=\"color: rgb(89, 89, 89)\">攻击者可能能够监视用户输入其凭据和一次性密钥。如果不采取进一步的预防措施，密钥将保持有效，直到它不再在服务器时间窗口内。为了防止使用已经使用过的一次性密钥，可以使用</span><span data-lake-id=\"u114cc74a\" id=\"u114cc74a\" class=\"lake-fontsize-11\" style=\"color: rgb(76, 118, 201)\">verifyKeyNewer</span><span data-lake-id=\"udc84a407\" id=\"udc84a407\" class=\"lake-fontsize-12\" style=\"color: rgb(89, 89, 89)\">函数。</span></p></blockquote><blockquote data-lake-id=\"u701c45ef\" id=\"u701c45ef\"><p data-lake-id=\"uce929582\" id=\"uce929582\"><span data-lake-id=\"udb8578a8\" id=\"udb8578a8\" class=\"lake-fontsize-12\" style=\"color: rgb(89, 89, 89)\">请注意，</span><span data-lake-id=\"uf78cfe1b\" id=\"uf78cfe1b\" class=\"lake-fontsize-11\" style=\"color: rgb(76, 118, 201)\">$timestamp</span><span data-lake-id=\"u12faa3f8\" id=\"u12faa3f8\" class=\"lake-fontsize-12\" style=\"color: rgb(89, 89, 89)\">要么是</span><span data-lake-id=\"u8e0a02a6\" id=\"u8e0a02a6\" class=\"lake-fontsize-11\" style=\"color: rgb(76, 118, 201)\">false</span><span data-lake-id=\"u3c5f4a5a\" id=\"u3c5f4a5a\" class=\"lake-fontsize-12\" style=\"color: rgb(89, 89, 89)\">（如果密钥无效或以前曾使用过），要么是提供的密钥的unix时间戳除以30秒的密钥再生周期。</span></p></blockquote><h1 data-lake-id=\"CVIn7\" id=\"CVIn7\"><span data-lake-id=\"u3b18adc9\" id=\"u3b18adc9\" style=\"color: rgb(89, 89, 89)\">Google Authenticator Apps</span></h1><blockquote data-lake-id=\"u6b4acd39\" id=\"u6b4acd39\"><p data-lake-id=\"u72322136\" id=\"u72322136\"><span data-lake-id=\"u6fc95bf3\" id=\"u6fc95bf3\" class=\"lake-fontsize-12\">可以使用身份验证码的app参考</span></p></blockquote><ol list=\"uae01dda3\"><li fid=\"uc6a14f0f\" data-lake-id=\"u590dcd46\" id=\"u590dcd46\"><span data-lake-id=\"u72d5d291\" id=\"u72d5d291\">Google</span><span data-lake-id=\"u2f9aac49\" id=\"u2f9aac49\" style=\"color: rgb(25, 27, 31)\"> Authenticator</span></li><li fid=\"uc6a14f0f\" data-lake-id=\"u12e879d4\" id=\"u12e879d4\"><span data-lake-id=\"u5c841579\" id=\"u5c841579\" style=\"color: rgb(25, 27, 31)\">微软Authenticator</span></li><li fid=\"uc6a14f0f\" data-lake-id=\"u3a0ad20b\" id=\"u3a0ad20b\"><span data-lake-id=\"ub55186a7\" id=\"ub55186a7\" style=\"color: rgb(25, 27, 31)\">LastPass</span></li><li fid=\"uc6a14f0f\" data-lake-id=\"u60564c13\" id=\"u60564c13\"><span data-lake-id=\"uc359ec55\" id=\"uc359ec55\" style=\"color: rgb(25, 27, 31)\">1Password</span></li><li fid=\"uc6a14f0f\" data-lake-id=\"uc010c343\" id=\"uc010c343\"><span data-lake-id=\"u63375493\" id=\"u63375493\" style=\"color: rgb(25, 27, 31)\">腾讯身份验证器</span></li><li fid=\"uc6a14f0f\" data-lake-id=\"u5003aff8\" id=\"u5003aff8\"><span data-lake-id=\"u80ae156c\" id=\"u80ae156c\" style=\"color: rgb(25, 27, 31)\">......</span></li></ol>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 1175,
    "created_at": "2024-04-15T07:40:36.000Z",
    "updated_at": "2024-04-17T02:18:36.000Z",
    "content_updated_at": "2024-04-17T02:18:36.000Z",
    "published_at": "2024-04-15T08:05:47.000Z",
    "first_published_at": "2024-04-15T08:02:45.927Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2447825985,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 156143117,
    "type": "Doc",
    "slug": "lnrzuc6fgyw6wcfm",
    "title": "layui流加载 终止flow.load()，执行第二个流加载时禁止上一个流加载执行",
    "description": "tags: [layui,流加载,flow]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:layui流加载 终止flow.load()...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [layui,流加载,flow]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h3 id=\"pW3BL\"><a href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">layui</span></a><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">流加载 终止flow.load()</span></h3><p id=\"u24e07f1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">思路是当点击事件触发时，把ul移除，绑定的事件移除，重新加载ul，相当于把之前的删除重新加载了</span><a href=\"https://so.csdn.net/so/search?q=flow&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=flow&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">flow</span></a><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">.load。</span></p><p id=\"u0a70bf85\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"></span></p><pre data-language=\"nginx\" id=\"II4YF\" class=\"ne-codeblock language-nginx\"><code>主要代码是：\n$(&quot;#demo&quot;).remove();\n$(document).unbind(); //把容器的事件解除绑定</code></pre><pre data-language=\"nginx\" id=\"PNDey\" class=\"ne-codeblock language-nginx\"><code>//初始化流加载\ngetAjaxData();\nfunction getAjaxData (){\n\tlayui.use('flow', function(){\n\t  var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。\n\t  var flow = layui.flow;\n\t  flow.load({\n\t    elem: '#demo' //指定列表容器\n\t    ,done: function(page, next){ //到达临界点（默认滚动触发），触发下一页\n\t      var lis = [];\n\t      //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）\n\t      $.get('/api/list?page='+page, function(res){\n\t        //假设你的列表返回在data集合中\n\t        layui.each(res.data, function(index, item){\n\t          lis.push('&lt;li&gt;'+ item.title +'&lt;/li&gt;');\n\t        }); \n\t        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页\n\t        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多\n\t        next(lis.join(''), page &lt; res.pages);    \n\t      });\n\t    }\n\t  });\n\t});\n}\n//点击事件\n$('#btn').click(function () {\n    $(&quot;#demo&quot;).remove();\t\n    $(document).unbind();\n    $('#tab-active').append('&lt;ul id=&quot;demo&quot;&gt;&lt;/ul&gt;');\n    getAjaxData();\t//执行流加载函数\n});\n</code></pre></div>",
    "body": "tags: [layui,流加载,flow]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n\n\n<a name=\"pW3BL\"></a>\n### [layui](https://so.csdn.net/so/search?q=layui&spm=1001.2101.3001.7020)流加载 终止flow.load()\n思路是当点击事件触发时，把ul移除，绑定的事件移除，重新加载ul，相当于把之前的删除重新加载了[flow](https://so.csdn.net/so/search?q=flow&spm=1001.2101.3001.7020).load。\n\n```nginx\n主要代码是：\n$(\"#demo\").remove();\n$(document).unbind(); //把容器的事件解除绑定\n```\n```nginx\n//初始化流加载\ngetAjaxData();\nfunction getAjaxData (){\n\tlayui.use('flow', function(){\n\t  var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。\n\t  var flow = layui.flow;\n\t  flow.load({\n\t    elem: '#demo' //指定列表容器\n\t    ,done: function(page, next){ //到达临界点（默认滚动触发），触发下一页\n\t      var lis = [];\n\t      //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）\n\t      $.get('/api/list?page='+page, function(res){\n\t        //假设你的列表返回在data集合中\n\t        layui.each(res.data, function(index, item){\n\t          lis.push('<li>'+ item.title +'</li>');\n\t        }); \n\t        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页\n\t        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多\n\t        next(lis.join(''), page < res.pages);    \n\t      });\n\t    }\n\t  });\n\t});\n}\n//点击事件\n$('#btn').click(function () {\n    $(\"#demo\").remove();\t\n    $(document).unbind();\n    $('#tab-active').append('<ul id=\"demo\"></ul>');\n    getAjaxData();\t//执行流加载函数\n});\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [layui,流加载,flow]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h3 id=\"pW3BL\"><a href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">layui</span></a><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">流加载 终止flow.load()</span></h3><p id=\"u24e07f1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">思路是当点击事件触发时，把ul移除，绑定的事件移除，重新加载ul，相当于把之前的删除重新加载了</span><a href=\"https://so.csdn.net/so/search?q=flow&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=flow&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">flow</span></a><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">.load。</span></p><p id=\"u0a70bf85\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"></span></p><pre data-language=\"nginx\" id=\"II4YF\" class=\"ne-codeblock language-nginx\"><code>主要代码是：\n$(&quot;#demo&quot;).remove();\n$(document).unbind(); //把容器的事件解除绑定</code></pre><pre data-language=\"nginx\" id=\"PNDey\" class=\"ne-codeblock language-nginx\"><code>//初始化流加载\ngetAjaxData();\nfunction getAjaxData (){\n\tlayui.use('flow', function(){\n\t  var $ = layui.jquery; //不用额外加载jQuery，flow模块本身是有依赖jQuery的，直接用即可。\n\t  var flow = layui.flow;\n\t  flow.load({\n\t    elem: '#demo' //指定列表容器\n\t    ,done: function(page, next){ //到达临界点（默认滚动触发），触发下一页\n\t      var lis = [];\n\t      //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）\n\t      $.get('/api/list?page='+page, function(res){\n\t        //假设你的列表返回在data集合中\n\t        layui.each(res.data, function(index, item){\n\t          lis.push('&lt;li&gt;'+ item.title +'&lt;/li&gt;');\n\t        }); \n\t        //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页\n\t        //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多\n\t        next(lis.join(''), page &lt; res.pages);    \n\t      });\n\t    }\n\t  });\n\t});\n}\n//点击事件\n$('#btn').click(function () {\n    $(&quot;#demo&quot;).remove();\t\n    $(document).unbind();\n    $('#tab-active').append('&lt;ul id=&quot;demo&quot;&gt;&lt;/ul&gt;');\n    getAjaxData();\t//执行流加载函数\n});\n</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [layui,流加载,flow]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p><h3 data-lake-id=\"pW3BL\" id=\"pW3BL\"><a href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" target=\"_blank\" data-lake-id=\"ub6260f35\" id=\"ub6260f35\"><span data-lake-id=\"u06491195\" id=\"u06491195\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">layui</span></a><span data-lake-id=\"u93759343\" id=\"u93759343\" style=\"color: rgb(79, 79, 79)\">流加载 终止flow.load()</span></h3><p data-lake-id=\"u24e07f1a\" id=\"u24e07f1a\"><span data-lake-id=\"u071341c5\" id=\"u071341c5\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">思路是当点击事件触发时，把ul移除，绑定的事件移除，重新加载ul，相当于把之前的删除重新加载了</span><a href=\"https://so.csdn.net/so/search?q=flow&amp;spm=1001.2101.3001.7020\" target=\"_blank\" data-lake-id=\"uc0d6f972\" id=\"uc0d6f972\"><span data-lake-id=\"u5ea79769\" id=\"u5ea79769\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">flow</span></a><span data-lake-id=\"u50b27c55\" id=\"u50b27c55\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">.load。</span></p><p data-lake-id=\"u0a70bf85\" id=\"u0a70bf85\"><span data-lake-id=\"u0b426b6b\" id=\"u0b426b6b\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22nginx%22%2C%22code%22%3A%22%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E6%98%AF%EF%BC%9A%5Cn%24(%5C%22%23demo%5C%22).remove()%3B%5Cn%24(document).unbind()%3B%20%2F%2F%E6%8A%8A%E5%AE%B9%E5%99%A8%E7%9A%84%E4%BA%8B%E4%BB%B6%E8%A7%A3%E9%99%A4%E7%BB%91%E5%AE%9A%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22II4YF%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22nginx%22%2C%22code%22%3A%22%2F%2F%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E5%8A%A0%E8%BD%BD%5CngetAjaxData()%3B%5Cnfunction%20getAjaxData%20()%7B%5Cn%5Ctlayui.use('flow'%2C%20function()%7B%5Cn%5Ct%20%20var%20%24%20%3D%20layui.jquery%3B%20%2F%2F%E4%B8%8D%E7%94%A8%E9%A2%9D%E5%A4%96%E5%8A%A0%E8%BD%BDjQuery%EF%BC%8Cflow%E6%A8%A1%E5%9D%97%E6%9C%AC%E8%BA%AB%E6%98%AF%E6%9C%89%E4%BE%9D%E8%B5%96jQuery%E7%9A%84%EF%BC%8C%E7%9B%B4%E6%8E%A5%E7%94%A8%E5%8D%B3%E5%8F%AF%E3%80%82%5Cn%5Ct%20%20var%20flow%20%3D%20layui.flow%3B%5Cn%5Ct%20%20flow.load(%7B%5Cn%5Ct%20%20%20%20elem%3A%20'%23demo'%20%2F%2F%E6%8C%87%E5%AE%9A%E5%88%97%E8%A1%A8%E5%AE%B9%E5%99%A8%5Cn%5Ct%20%20%20%20%2Cdone%3A%20function(page%2C%20next)%7B%20%2F%2F%E5%88%B0%E8%BE%BE%E4%B8%B4%E7%95%8C%E7%82%B9%EF%BC%88%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A7%A6%E5%8F%91%EF%BC%89%EF%BC%8C%E8%A7%A6%E5%8F%91%E4%B8%8B%E4%B8%80%E9%A1%B5%5Cn%5Ct%20%20%20%20%20%20var%20lis%20%3D%20%5B%5D%3B%5Cn%5Ct%20%20%20%20%20%20%2F%2F%E4%BB%A5jQuery%E7%9A%84Ajax%E8%AF%B7%E6%B1%82%E4%B8%BA%E4%BE%8B%EF%BC%8C%E8%AF%B7%E6%B1%82%E4%B8%8B%E4%B8%80%E9%A1%B5%E6%95%B0%E6%8D%AE%EF%BC%88%E6%B3%A8%E6%84%8F%EF%BC%9Apage%E6%98%AF%E4%BB%8E2%E5%BC%80%E5%A7%8B%E8%BF%94%E5%9B%9E%EF%BC%89%5Cn%5Ct%20%20%20%20%20%20%24.get('%2Fapi%2Flist%3Fpage%3D'%2Bpage%2C%20function(res)%7B%5Cn%5Ct%20%20%20%20%20%20%20%20%2F%2F%E5%81%87%E8%AE%BE%E4%BD%A0%E7%9A%84%E5%88%97%E8%A1%A8%E8%BF%94%E5%9B%9E%E5%9C%A8data%E9%9B%86%E5%90%88%E4%B8%AD%5Cn%5Ct%20%20%20%20%20%20%20%20layui.each(res.data%2C%20function(index%2C%20item)%7B%5Cn%5Ct%20%20%20%20%20%20%20%20%20%20lis.push('%3Cli%3E'%2B%20item.title%20%2B'%3C%2Fli%3E')%3B%5Cn%5Ct%20%20%20%20%20%20%20%20%7D)%3B%20%5Cn%5Ct%20%20%20%20%20%20%20%20%2F%2F%E6%89%A7%E8%A1%8C%E4%B8%8B%E4%B8%80%E9%A1%B5%E6%B8%B2%E6%9F%93%EF%BC%8C%E7%AC%AC%E4%BA%8C%E5%8F%82%E6%95%B0%E4%B8%BA%EF%BC%9A%E6%BB%A1%E8%B6%B3%E2%80%9C%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%E2%80%9D%E7%9A%84%E6%9D%A1%E4%BB%B6%EF%BC%8C%E5%8D%B3%E5%90%8E%E9%9D%A2%E4%BB%8D%E6%9C%89%E5%88%86%E9%A1%B5%5Cn%5Ct%20%20%20%20%20%20%20%20%2F%2Fpages%E4%B8%BAAjax%E8%BF%94%E5%9B%9E%E7%9A%84%E6%80%BB%E9%A1%B5%E6%95%B0%EF%BC%8C%E5%8F%AA%E6%9C%89%E5%BD%93%E5%89%8D%E9%A1%B5%E5%B0%8F%E4%BA%8E%E6%80%BB%E9%A1%B5%E6%95%B0%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%89%8D%E4%BC%9A%E7%BB%A7%E7%BB%AD%E5%87%BA%E7%8E%B0%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%5Cn%5Ct%20%20%20%20%20%20%20%20next(lis.join('')%2C%20page%20%3C%20res.pages)%3B%20%20%20%20%5Cn%5Ct%20%20%20%20%20%20%7D)%3B%5Cn%5Ct%20%20%20%20%7D%5Cn%5Ct%20%20%7D)%3B%5Cn%5Ct%7D)%3B%5Cn%7D%5Cn%2F%2F%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%5Cn%24('%23btn').click(function%20()%20%7B%5Cn%20%20%20%20%24(%5C%22%23demo%5C%22).remove()%3B%5Ct%5Cn%20%20%20%20%24(document).unbind()%3B%5Cn%20%20%20%20%24('%23tab-active').append('%3Cul%20id%3D%5C%22demo%5C%22%3E%3C%2Ful%3E')%3B%5Cn%20%20%20%20getAjaxData()%3B%5Ct%2F%2F%E6%89%A7%E8%A1%8C%E6%B5%81%E5%8A%A0%E8%BD%BD%E5%87%BD%E6%95%B0%5Cn%7D)%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22PNDey%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 328,
    "created_at": "2024-01-16T03:08:13.000Z",
    "updated_at": "2024-01-16T03:09:05.000Z",
    "content_updated_at": "2024-01-16T03:09:05.000Z",
    "published_at": "2024-01-16T03:09:05.000Z",
    "first_published_at": "2024-01-16T03:09:04.780Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2254312292,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 150748759,
    "type": "Doc",
    "slug": "ox8ck1uiaystwik8",
    "title": "使用 Frp 为你的 Web 服务添加 https 支持",
    "description": "tags: [frp,https]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover: frp 是一个可用于内网穿透的高性能的反向代理应用，...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [frp,https]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(119, 119, 119); font-size: 14px\"> frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。</span></p><p id=\"u4e6412cb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p></div><p id=\"u4ad98143\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 22px; color: #DF2A3F\">本</span><strong><span class=\"ne-text\" style=\"font-size: 22px; color: #DF2A3F\">教程是根据 ftp-win客户端 3.*版本</span></strong></p><h1 id=\"y5sTO\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">下载 frp</span></h1><p id=\"u528f9a2b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">前往 GitHub 下载 frp：</span></p><ul class=\"ne-ul\"><li id=\"u2631877c\" data-lake-index-type=\"0\"><a href=\"https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Ffatedier%2Ffrp%2Freleases&amp;source=article&amp;objectId=1581948\" data-href=\"https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Ffatedier%2Ffrp%2Freleases&amp;source=article&amp;objectId=1581948\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Releases · fatedier/frp</span></a></li></ul><p id=\"ubffd269c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">有适用于各种不同操作系统的 frp，如果你对外提供的公网服务器和实际提供 Web 服务的服务器不是同一台机器的话，需要为各自机器下载对应版本的 frp。</span></p><h1 id=\"vLZwV\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">准备好 Web 服务和 SSL 证书</span></h1><p id=\"ue90bc0e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">你可以用任何方式开发你的 Web 服务，注意你的 Web 服务需要监听一个本机端口。</span></p><p id=\"u937e998b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">对于本文的后续内容，你需要将证书导出成 Nginx 格式，即一个 .pem 文件和一个 .key 文件。</span></p><h1 id=\"jQ9Bf\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">配置 frp</span></h1><h2 id=\"legbR\"><span class=\"ne-text\">配置frps.ini</span></h2><pre data-language=\"properties\" id=\"FTYIY\" class=\"ne-codeblock language-properties\"><code>[common]\nbind_port = 5443\nvhost_http_port = 80\nvhost_https_port = 443\ntoken = ******\n</code></pre><h2 id=\"fDeOO\"><span class=\"ne-text\">配置代理 http</span></h2><p id=\"u13056dba\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">编辑 frpc.ini</span></p><pre data-language=\"properties\" id=\"rlDcL\" class=\"ne-codeblock language-properties\"><code>[common]\n# 服务器地址\nserver_addr = *.*.*.*\n# 服务器端口\nserver_port = 5443\n# 服务器连接凭证\ntoken = **********\n\n[web_webman1]\ntype = http\nlocal_port = 8787\nremote_port = 9980\ncustom_domains = qianxun.local.com\n\n[web_webman2] #将http转发为https\ntype = https\nlocal_port = 8787\nremote_port = 9980\ncustom_domains = qianxun.local.com\nplugin = https2http\t#FRP的http转https服务\nplugin_local_addr = 127.0.0.1:8787\nplugin_host_header_rewrite = 127.0.0.1\n# 指定代理方式为 frp\nplugin_header_X-From-Where = frp\nuse_encryption = true\n# 强制跳转https\nforce_https = true\n# 指定成你在前面部分导出的证书的路径\nplugin_crt_path = ./ssl/fullchain.pem\nplugin_key_path = ./ssl/privkey.key\n</code></pre><h2 id=\"gZv2t\"><span class=\"ne-text\" style=\"color: rgb(74, 74, 74)\">配置Nginx代理</span></h2><p id=\"u61803d5b\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">在本地的nginx服务里，新增个站点，并配置nginx代理：</span></p><pre data-language=\"nginx\" id=\"yQON5\" class=\"ne-codeblock language-nginx\"><code># frp的接收https请求的反向代理\nserver {\n        listen       443 ssl http2;\n        listen       [::]:443 ssl http2;\n        # 访问的域名\n        server_name qianxun.local.com;\n\t\t# 配置https证书\n        ssl_certificate &quot;/etc/nginx/ssl_files/server.pem&quot;;\n        ssl_certificate_key &quot;/etc/nginx/ssl_files/server.key&quot;;\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n\n        location / {\n                # 7171对应vhost_http_port\n                proxy_pass http://127.0.0.1:7171;\n                proxy_set_header Host $http_host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection &quot;upgrade&quot;;\n                # Expect for doris\n                proxy_set_header Expect $http_expect;\n\n                proxy_connect_timeout 7d;\n                proxy_send_timeout 7d;\n                proxy_read_timeout 7d;\n        }\n}</code></pre><p id=\"u7f7bebef\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">其中qianxun.local.com为需要开通的https的域名。</span></p><p id=\"u91dd9709\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">最后将对应的域名证书放好。</span></p><p id=\"u96b4c4d2\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">然后分别启动：</span></p><pre data-language=\"nginx\" id=\"YkbPG\" class=\"ne-codeblock language-nginx\"><code>./frps.exe -c ./frps.ini\n\n\n ./frpc -c ./frpc.ini</code></pre></div>",
    "body": "tags: [frp,https]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n>  frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。\n> \n\n本**教程是根据 ftp-win客户端 3.*版本**\n<a name=\"y5sTO\"></a>\n# 下载 frp\n前往 GitHub 下载 frp：\n\n- [Releases · fatedier/frp](https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Ffatedier%2Ffrp%2Freleases&source=article&objectId=1581948)\n\n有适用于各种不同操作系统的 frp，如果你对外提供的公网服务器和实际提供 Web 服务的服务器不是同一台机器的话，需要为各自机器下载对应版本的 frp。\n<a name=\"vLZwV\"></a>\n# 准备好 Web 服务和 SSL 证书\n你可以用任何方式开发你的 Web 服务，注意你的 Web 服务需要监听一个本机端口。<br />对于本文的后续内容，你需要将证书导出成 Nginx 格式，即一个 .pem 文件和一个 .key 文件。\n<a name=\"jQ9Bf\"></a>\n# 配置 frp\n<a name=\"legbR\"></a>\n## 配置frps.ini\n```properties\n[common]\nbind_port = 5443\nvhost_http_port = 80\nvhost_https_port = 443\ntoken = ******\n\n```\n<a name=\"fDeOO\"></a>\n## 配置代理 http\n编辑 frpc.ini\n```properties\n[common]\n# 服务器地址\nserver_addr = *.*.*.*\n# 服务器端口\nserver_port = 5443\n# 服务器连接凭证\ntoken = **********\n\n[web_webman1]\ntype = http\nlocal_port = 8787\nremote_port = 9980\ncustom_domains = qianxun.local.com\n\n[web_webman2] #将http转发为https\ntype = https\nlocal_port = 8787\nremote_port = 9980\ncustom_domains = qianxun.local.com\nplugin = https2http\t#FRP的http转https服务\nplugin_local_addr = 127.0.0.1:8787\nplugin_host_header_rewrite = 127.0.0.1\n# 指定代理方式为 frp\nplugin_header_X-From-Where = frp\nuse_encryption = true\n# 强制跳转https\nforce_https = true\n# 指定成你在前面部分导出的证书的路径\nplugin_crt_path = ./ssl/fullchain.pem\nplugin_key_path = ./ssl/privkey.key\n\n```\n<a name=\"gZv2t\"></a>\n## 配置Nginx代理\n在本地的nginx服务里，新增个站点，并配置nginx代理：\n```nginx\n# frp的接收https请求的反向代理\nserver {\n        listen       443 ssl http2;\n        listen       [::]:443 ssl http2;\n        # 访问的域名\n        server_name qianxun.local.com;\n\t\t# 配置https证书\n        ssl_certificate \"/etc/nginx/ssl_files/server.pem\";\n        ssl_certificate_key \"/etc/nginx/ssl_files/server.key\";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n\n        location / {\n                # 7171对应vhost_http_port\n                proxy_pass http://127.0.0.1:7171;\n                proxy_set_header Host $http_host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection \"upgrade\";\n                # Expect for doris\n                proxy_set_header Expect $http_expect;\n\n                proxy_connect_timeout 7d;\n                proxy_send_timeout 7d;\n                proxy_read_timeout 7d;\n        }\n}\n```\n其中qianxun.local.com为需要开通的https的域名。<br />最后将对应的域名证书放好。<br />然后分别启动：\n```nginx\n./frps.exe -c ./frps.ini\n\n\n ./frpc -c ./frpc.ini\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [frp,https]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(119, 119, 119); font-size: 14px\"> frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。</span></p><p id=\"u4e6412cb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p></div><p id=\"u4ad98143\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 22px; color: #DF2A3F\">本</span><strong><span class=\"ne-text\" style=\"font-size: 22px; color: #DF2A3F\">教程是根据 ftp-win客户端 3.*版本</span></strong></p><h1 id=\"y5sTO\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">下载 frp</span></h1><p id=\"u528f9a2b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">前往 GitHub 下载 frp：</span></p><ul class=\"ne-ul\"><li id=\"u2631877c\" data-lake-index-type=\"0\"><a href=\"https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Ffatedier%2Ffrp%2Freleases&amp;source=article&amp;objectId=1581948\" data-href=\"https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Ffatedier%2Ffrp%2Freleases&amp;source=article&amp;objectId=1581948\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Releases · fatedier/frp</span></a></li></ul><p id=\"ubffd269c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">有适用于各种不同操作系统的 frp，如果你对外提供的公网服务器和实际提供 Web 服务的服务器不是同一台机器的话，需要为各自机器下载对应版本的 frp。</span></p><h1 id=\"vLZwV\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">准备好 Web 服务和 SSL 证书</span></h1><p id=\"ue90bc0e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">你可以用任何方式开发你的 Web 服务，注意你的 Web 服务需要监听一个本机端口。</span></p><p id=\"u937e998b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">对于本文的后续内容，你需要将证书导出成 Nginx 格式，即一个 .pem 文件和一个 .key 文件。</span></p><h1 id=\"jQ9Bf\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">配置 frp</span></h1><h2 id=\"legbR\"><span class=\"ne-text\">配置frps.ini</span></h2><pre data-language=\"properties\" id=\"FTYIY\" class=\"ne-codeblock language-properties\"><code>[common]\nbind_port = 5443\nvhost_http_port = 80\nvhost_https_port = 443\ntoken = ******\n</code></pre><h2 id=\"fDeOO\"><span class=\"ne-text\">配置代理 http</span></h2><p id=\"u13056dba\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">编辑 frpc.ini</span></p><pre data-language=\"properties\" id=\"rlDcL\" class=\"ne-codeblock language-properties\"><code>[common]\n# 服务器地址\nserver_addr = *.*.*.*\n# 服务器端口\nserver_port = 5443\n# 服务器连接凭证\ntoken = **********\n\n[web_webman1]\ntype = http\nlocal_port = 8787\nremote_port = 9980\ncustom_domains = qianxun.local.com\n\n[web_webman2] #将http转发为https\ntype = https\nlocal_port = 8787\nremote_port = 9980\ncustom_domains = qianxun.local.com\nplugin = https2http\t#FRP的http转https服务\nplugin_local_addr = 127.0.0.1:8787\nplugin_host_header_rewrite = 127.0.0.1\n# 指定代理方式为 frp\nplugin_header_X-From-Where = frp\nuse_encryption = true\n# 强制跳转https\nforce_https = true\n# 指定成你在前面部分导出的证书的路径\nplugin_crt_path = ./ssl/fullchain.pem\nplugin_key_path = ./ssl/privkey.key\n</code></pre><h2 id=\"gZv2t\"><span class=\"ne-text\" style=\"color: rgb(74, 74, 74)\">配置Nginx代理</span></h2><p id=\"u61803d5b\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">在本地的nginx服务里，新增个站点，并配置nginx代理：</span></p><pre data-language=\"nginx\" id=\"yQON5\" class=\"ne-codeblock language-nginx\"><code># frp的接收https请求的反向代理\nserver {\n        listen       443 ssl http2;\n        listen       [::]:443 ssl http2;\n        # 访问的域名\n        server_name qianxun.local.com;\n\t\t# 配置https证书\n        ssl_certificate &quot;/etc/nginx/ssl_files/server.pem&quot;;\n        ssl_certificate_key &quot;/etc/nginx/ssl_files/server.key&quot;;\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n\n        location / {\n                # 7171对应vhost_http_port\n                proxy_pass http://127.0.0.1:7171;\n                proxy_set_header Host $http_host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection &quot;upgrade&quot;;\n                # Expect for doris\n                proxy_set_header Expect $http_expect;\n\n                proxy_connect_timeout 7d;\n                proxy_send_timeout 7d;\n                proxy_read_timeout 7d;\n        }\n}</code></pre><p id=\"u7f7bebef\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">其中qianxun.local.com为需要开通的https的域名。</span></p><p id=\"u91dd9709\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">最后将对应的域名证书放好。</span></p><p id=\"u96b4c4d2\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">然后分别启动：</span></p><pre data-language=\"nginx\" id=\"YkbPG\" class=\"ne-codeblock language-nginx\"><code>./frps.exe -c ./frps.ini\n\n\n ./frpc -c ./frpc.ini</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [frp,https]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"ucbfea534\" id=\"ucbfea534\"><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uc5709ec1\" id=\"uc5709ec1\" class=\"lake-fontsize-11\" style=\"color: rgb(119, 119, 119)\"> frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。</span></p><p data-lake-id=\"u4e6412cb\" id=\"u4e6412cb\"><span data-lake-id=\"ud25036bf\" id=\"ud25036bf\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p></blockquote><p data-lake-id=\"u4ad98143\" id=\"u4ad98143\"><span data-lake-id=\"u4261d7ef\" id=\"u4261d7ef\" class=\"lake-fontsize-16\" style=\"color: #DF2A3F\">本</span><strong><span data-lake-id=\"uf3d23192\" id=\"uf3d23192\" class=\"lake-fontsize-16\" style=\"color: #DF2A3F\">教程是根据 ftp-win客户端 3.*版本</span></strong></p><h1 data-lake-id=\"y5sTO\" id=\"y5sTO\"><span data-lake-id=\"u7b54747f\" id=\"u7b54747f\" style=\"color: rgb(0, 0, 0)\">下载 frp</span></h1><p data-lake-id=\"u528f9a2b\" id=\"u528f9a2b\"><span data-lake-id=\"u10a42ff1\" id=\"u10a42ff1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">前往 GitHub 下载 frp：</span></p><ul list=\"u70a4bf39\"><li fid=\"u713c3b1a\" data-lake-id=\"u2631877c\" id=\"u2631877c\"><a href=\"https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Ffatedier%2Ffrp%2Freleases&amp;source=article&amp;objectId=1581948\" target=\"_blank\" data-lake-id=\"u76577430\" id=\"u76577430\"><span data-lake-id=\"ud9be3ff0\" id=\"ud9be3ff0\">Releases · fatedier/frp</span></a></li></ul><p data-lake-id=\"ubffd269c\" id=\"ubffd269c\"><span data-lake-id=\"u2194479b\" id=\"u2194479b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">有适用于各种不同操作系统的 frp，如果你对外提供的公网服务器和实际提供 Web 服务的服务器不是同一台机器的话，需要为各自机器下载对应版本的 frp。</span></p><h1 data-lake-id=\"vLZwV\" id=\"vLZwV\"><span data-lake-id=\"u768e1a70\" id=\"u768e1a70\" style=\"color: rgb(0, 0, 0)\">准备好 Web 服务和 SSL 证书</span></h1><p data-lake-id=\"ue90bc0e1\" id=\"ue90bc0e1\"><span data-lake-id=\"ua404d946\" id=\"ua404d946\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">你可以用任何方式开发你的 Web 服务，注意你的 Web 服务需要监听一个本机端口。</span></p><p data-lake-id=\"u937e998b\" id=\"u937e998b\"><span data-lake-id=\"u9b34211e\" id=\"u9b34211e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">对于本文的后续内容，你需要将证书导出成 Nginx 格式，即一个 .pem 文件和一个 .key 文件。</span></p><h1 data-lake-id=\"jQ9Bf\" id=\"jQ9Bf\"><span data-lake-id=\"u6c4e7841\" id=\"u6c4e7841\" style=\"color: rgb(0, 0, 0)\">配置 frp</span></h1><h2 data-lake-id=\"legbR\" id=\"legbR\"><span data-lake-id=\"uc17a5704\" id=\"uc17a5704\">配置frps.ini</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22properties%22%2C%22code%22%3A%22%5Bcommon%5D%5Cnbind_port%20%3D%205443%5Cnvhost_http_port%20%3D%2080%5Cnvhost_https_port%20%3D%20443%5Cntoken%20%3D%20******%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FTYIY%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"fDeOO\" id=\"fDeOO\"><span data-lake-id=\"ufae55991\" id=\"ufae55991\">配置代理 http</span></h2><p data-lake-id=\"u13056dba\" id=\"u13056dba\"><span data-lake-id=\"ue3f4faef\" id=\"ue3f4faef\" class=\"lake-fontsize-11\">编辑 frpc.ini</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22properties%22%2C%22code%22%3A%22%5Bcommon%5D%5Cn%23%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80%5Cnserver_addr%20%3D%20*.*.*.*%5Cn%23%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3%5Cnserver_port%20%3D%205443%5Cn%23%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9E%E6%8E%A5%E5%87%AD%E8%AF%81%5Cntoken%20%3D%20**********%5Cn%5Cn%5Bweb_webman1%5D%5Cntype%20%3D%20http%5Cnlocal_port%20%3D%208787%5Cnremote_port%20%3D%209980%5Cncustom_domains%20%3D%20qianxun.local.com%5Cn%5Cn%5Bweb_webman2%5D%20%23%E5%B0%86http%E8%BD%AC%E5%8F%91%E4%B8%BAhttps%5Cntype%20%3D%20https%5Cnlocal_port%20%3D%208787%5Cnremote_port%20%3D%209980%5Cncustom_domains%20%3D%20qianxun.local.com%5Cnplugin%20%3D%20https2http%5Ct%23FRP%E7%9A%84http%E8%BD%AChttps%E6%9C%8D%E5%8A%A1%5Cnplugin_local_addr%20%3D%20127.0.0.1%3A8787%5Cnplugin_host_header_rewrite%20%3D%20127.0.0.1%5Cn%23%20%E6%8C%87%E5%AE%9A%E4%BB%A3%E7%90%86%E6%96%B9%E5%BC%8F%E4%B8%BA%20frp%5Cnplugin_header_X-From-Where%20%3D%20frp%5Cnuse_encryption%20%3D%20true%5Cn%23%20%E5%BC%BA%E5%88%B6%E8%B7%B3%E8%BD%AChttps%5Cnforce_https%20%3D%20true%5Cn%23%20%E6%8C%87%E5%AE%9A%E6%88%90%E4%BD%A0%E5%9C%A8%E5%89%8D%E9%9D%A2%E9%83%A8%E5%88%86%E5%AF%BC%E5%87%BA%E7%9A%84%E8%AF%81%E4%B9%A6%E7%9A%84%E8%B7%AF%E5%BE%84%5Cnplugin_crt_path%20%3D%20.%2Fssl%2Ffullchain.pem%5Cnplugin_key_path%20%3D%20.%2Fssl%2Fprivkey.key%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22rlDcL%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"gZv2t\" id=\"gZv2t\"><span data-lake-id=\"ube889b3f\" id=\"ube889b3f\" style=\"color: rgb(74, 74, 74)\">配置Nginx代理</span></h2><p data-lake-id=\"u61803d5b\" id=\"u61803d5b\"><span data-lake-id=\"ue07461c3\" id=\"ue07461c3\" class=\"lake-fontsize-11\">在本地的nginx服务里，新增个站点，并配置nginx代理：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22nginx%22%2C%22code%22%3A%22%23%20frp%E7%9A%84%E6%8E%A5%E6%94%B6https%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%5Cnserver%20%7B%5Cn%20%20%20%20%20%20%20%20listen%20%20%20%20%20%20%20443%20ssl%20http2%3B%5Cn%20%20%20%20%20%20%20%20listen%20%20%20%20%20%20%20%5B%3A%3A%5D%3A443%20ssl%20http2%3B%5Cn%20%20%20%20%20%20%20%20%23%20%E8%AE%BF%E9%97%AE%E7%9A%84%E5%9F%9F%E5%90%8D%5Cn%20%20%20%20%20%20%20%20server_name%20qianxun.local.com%3B%5Cn%5Ct%5Ct%23%20%E9%85%8D%E7%BD%AEhttps%E8%AF%81%E4%B9%A6%5Cn%20%20%20%20%20%20%20%20ssl_certificate%20%5C%22%2Fetc%2Fnginx%2Fssl_files%2Fserver.pem%5C%22%3B%5Cn%20%20%20%20%20%20%20%20ssl_certificate_key%20%5C%22%2Fetc%2Fnginx%2Fssl_files%2Fserver.key%5C%22%3B%5Cn%20%20%20%20%20%20%20%20ssl_session_cache%20shared%3ASSL%3A1m%3B%5Cn%20%20%20%20%20%20%20%20ssl_session_timeout%20%2010m%3B%5Cn%20%20%20%20%20%20%20%20ssl_ciphers%20HIGH%3A!aNULL%3A!MD5%3B%5Cn%20%20%20%20%20%20%20%20ssl_prefer_server_ciphers%20on%3B%5Cn%5Cn%20%20%20%20%20%20%20%20location%20%2F%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%207171%E5%AF%B9%E5%BA%94vhost_http_port%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A7171%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20Host%20%24http_host%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20X-Real-IP%20%24remote_addr%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20Upgrade%20%24http_upgrade%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20Connection%20%5C%22upgrade%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Expect%20for%20doris%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_set_header%20Expect%20%24http_expect%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_connect_timeout%207d%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_send_timeout%207d%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_read_timeout%207d%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22yQON5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7f7bebef\" id=\"u7f7bebef\"><span data-lake-id=\"uaa225c70\" id=\"uaa225c70\" class=\"lake-fontsize-11\">其中qianxun.local.com为需要开通的https的域名。</span></p><p data-lake-id=\"u91dd9709\" id=\"u91dd9709\"><span data-lake-id=\"ub097999f\" id=\"ub097999f\" class=\"lake-fontsize-11\">最后将对应的域名证书放好。</span></p><p data-lake-id=\"u96b4c4d2\" id=\"u96b4c4d2\"><span data-lake-id=\"ua0e53b9e\" id=\"ua0e53b9e\" class=\"lake-fontsize-11\">然后分别启动：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22nginx%22%2C%22code%22%3A%22.%2Ffrps.exe%20-c%20.%2Ffrps.ini%5Cn%5Cn%5Cn%20.%2Ffrpc%20-c%20.%2Ffrpc.ini%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22fontSize%22%3A14%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22YkbPG%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 6,
    "hits": 6,
    "comments_count": 0,
    "word_count": 554,
    "created_at": "2023-12-20T02:46:17.000Z",
    "updated_at": "2023-12-20T02:56:34.000Z",
    "content_updated_at": "2023-12-20T02:56:34.000Z",
    "published_at": "2023-12-20T02:56:34.000Z",
    "first_published_at": "2023-12-20T02:56:33.872Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2195161298,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 147525591,
    "type": "Doc",
    "slug": "vqx17at0pd576iea",
    "title": "composer.json配置详解",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:composer.json 是用于管理 PHP 项目 依赖关系的配置文件...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">composer.json 是用于管理 PHP 项目 依赖关系的配置文件。下面是一些常见的 composer.json 配置项及其含义：</span></strong></p><p id=\"udfe4be4e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">name: 项目名称。在发布到 Packagist 上时，这个名称会变成该包的唯一标识符。</span></p><p id=\"u0c146658\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">description: 项目描述，用于简要说明项目的目的和功能。</span></p><p id=\"u30b9d9cc\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">type: 项目类型，可以是 &quot;library&quot;（库）、&quot;project&quot;（项目）、&quot;metapackage&quot;（元包）等。</span></p><p id=\"u85f9b5af\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">keywords: 一组关键词，用于描述项目的特性、功能或主题，有助于其他开发者更容易找到你的项目。</span></p><p id=\"u1bfc79b6\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">homepage: 项目的主页，可以是项目的官方网站或仓库地址。</span></p><p id=\"u7a41e2de\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">license: 项目的许可证类型，用于指定项目的开源许可证。</span></p><p id=\"u398266df\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">authors: 项目的作者信息，包括姓名、电子邮件和网址等。</span></p><p id=\"ub4b6457d\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">support: 用于提供支持选项的 URL 和/或电子邮件地址。</span></p><p id=\"u55813ae2\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">require: 项目所依赖的其他 PHP 包的版本要求，可以指定包名和版本号，以确保项目能够正常运行。</span></p><p id=\"ude8fdf7a\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">require-dev: 与开发相关的依赖关系，通常是开发环境下需要的工具或测试框架等。</span></p><p id=\"u62ce0155\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">conflict: 另一个包与该包存在冲突的版本限制。</span></p><p id=\"u1249f16d\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">replace: 包替换另一个包。</span></p><p id=\"u70b61354\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">provide: 包提供另一个包的功能。</span></p><p id=\"u8ff09de7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">suggest: 建议安装的附加功能或库。</span></p><p id=\"u18598672\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">autoload: 自动加载规则的定义，用于告知 Composer 如何加载 PHP 类和文件。</span></p><p id=\"u41d16291\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">autoload-dev: 自动加载规则的定义，专门用于开发环境。</span></p><p id=\"ufd550fd5\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">scripts: 定义项目中使用的自定义脚本（例如测试、构建等）。</span></p><p id=\"u1c2f1761\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u2cfc16a2\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">下面是一个简单的 composer.json 配置文件的示例：</span></p><pre data-language=\"plain\" id=\"okjZ7\" class=\"ne-codeblock language-plain\"><code>{\n    &quot;name&quot;: &quot;my-project&quot;,\n    &quot;description&quot;: &quot;A simple PHP project&quot;,\n    &quot;type&quot;: &quot;project&quot;,\n    &quot;authors&quot;: [\n        {\n            &quot;name&quot;: &quot;yzmcms&quot;,\n            &quot;email&quot;: &quot;yzmcms@qq.com&quot;\n        }\n    ],\n    &quot;require&quot;: {\n        &quot;php&quot;: &quot;^7.3|^8.0&quot;,\n\t\t&quot;elasticsearch/elasticsearch&quot;: &quot;~7.0&quot;\n    },\n    &quot;autoload&quot;: {\n        &quot;psr-4&quot;: {\n            &quot;App\\\\&quot;: &quot;app/&quot;\n        }\n    },\n    &quot;scripts&quot;: {\n        &quot;test&quot;: &quot;phpunit&quot;\n    }\n}</code></pre><p id=\"ub1764bfa\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u5926e02f\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">在这个示例中，我们定义了 my-project 作为项目名称，指定了一个简短的描述，并将项目类型设置为 project。我们列出了一个作者并指定了 php版本 和 elasticsearch/elasticsearch 依赖项，该依赖项用于记录日志。我们还定义了一个名为 autoload 的规则，告诉 Composer 如何自动加载我们的类文件。最后，我们定义了一个 test 脚本，它调用 PHPUnit 测试框架来执行项目的测试套件。</span></p><p id=\"u6c9ce4b7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u7ef09e1b\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">这里我们着重记录下依赖项的版本号部分，版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</span></p><p id=\"udf292931\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">主版本号：当你做了不兼容的 API 修改，</span></p><p id=\"u2eb4ba30\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">次版本号：当你做了向下兼容的功能性新增，</span></p><p id=\"u032040c3\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">修订号：当你做了向下兼容的问题修正。</span></p><p id=\"uee6222ca\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">先行版本号及版本编译信息可以加到“</span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">主版本号.次版本号.修订号</span></strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">”的后面，作为延伸。</span></p><p id=\"ucbd97ae7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u99f018bd\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">~表示版本号只能改变最末尾那段（如果是~x.y 末尾就是y, 如果是~x.y.z末尾就是z）</span></p><p id=\"u1966f033\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">~1.2.3 代表 1.2.3 &lt;= 版本号 &lt; 1.3.0</span></p><p id=\"u5eec8a51\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">~1.2   代表   1.2 &lt;= 版本号 &lt; 2.0</span></p><p id=\"ue8142218\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u5911c37b\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">^表示除了主版本号以外，次版本号和修订号都可以变</span></p><p id=\"ua017216e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">^1.2.3 代表 1.2.3 &lt;= 版本号 &lt;2.0.0</span></p><p id=\"u3bd14086\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u4df12866\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">特殊情况 0 开头的版本号:</span></strong></p><p id=\"u32cb7171\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">^0.3.0 等于 0.3.0 &lt;= 版本号 &lt;0.4.0 注意: 不是 &lt;1.0.0</span></p><p id=\"u882b4069\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">因为: semantic versioning 的规定是，主版本号以0开头表示这是一个非稳定版本（unstable),如果处于非稳定状态,次版本号是允许不向下兼容的。</span></p><p id=\"ua39a96a4\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(192, 0, 0); font-size: 14px\">所以如果你要指定 0 开头的库那一定要注意:</span></strong></p><p id=\"u9ef611cf\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">危险写法:~0.1 等于0.1.0 &lt;= 版本号 &lt;1.0.0</span></p><p id=\"u6c837b06\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">保险写法:^0.1 等于0.1.0 &lt;= 版本号 &lt;0.2.0</span></p><p id=\"u402f5fe8\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"uaf3750d5\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">当您完成 composer.json 文件的编写后，可以使用 </span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">composer install</span></strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"> 命令来安装所有依赖项。如果您需要新增或移除依赖库，只需编辑 composer.json 文件并在命令行中运行 </span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">composer update</span></strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"> 命令即可更新。</span></p></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />**composer.json 是用于管理 PHP 项目 依赖关系的配置文件。下面是一些常见的 composer.json 配置项及其含义：**<br />name: 项目名称。在发布到 Packagist 上时，这个名称会变成该包的唯一标识符。<br />description: 项目描述，用于简要说明项目的目的和功能。<br />type: 项目类型，可以是 \"library\"（库）、\"project\"（项目）、\"metapackage\"（元包）等。<br />keywords: 一组关键词，用于描述项目的特性、功能或主题，有助于其他开发者更容易找到你的项目。<br />homepage: 项目的主页，可以是项目的官方网站或仓库地址。<br />license: 项目的许可证类型，用于指定项目的开源许可证。<br />authors: 项目的作者信息，包括姓名、电子邮件和网址等。<br />support: 用于提供支持选项的 URL 和/或电子邮件地址。<br />require: 项目所依赖的其他 PHP 包的版本要求，可以指定包名和版本号，以确保项目能够正常运行。<br />require-dev: 与开发相关的依赖关系，通常是开发环境下需要的工具或测试框架等。<br />conflict: 另一个包与该包存在冲突的版本限制。<br />replace: 包替换另一个包。<br />provide: 包提供另一个包的功能。<br />suggest: 建议安装的附加功能或库。<br />autoload: 自动加载规则的定义，用于告知 Composer 如何加载 PHP 类和文件。<br />autoload-dev: 自动加载规则的定义，专门用于开发环境。<br />scripts: 定义项目中使用的自定义脚本（例如测试、构建等）。\n\n下面是一个简单的 composer.json 配置文件的示例：\n```\n{\n    \"name\": \"my-project\",\n    \"description\": \"A simple PHP project\",\n    \"type\": \"project\",\n    \"authors\": [\n        {\n            \"name\": \"yzmcms\",\n            \"email\": \"yzmcms@qq.com\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.3|^8.0\",\n\t\t\"elasticsearch/elasticsearch\": \"~7.0\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"App\\\\\": \"app/\"\n        }\n    },\n    \"scripts\": {\n        \"test\": \"phpunit\"\n    }\n}\n```\n\n\n在这个示例中，我们定义了 my-project 作为项目名称，指定了一个简短的描述，并将项目类型设置为 project。我们列出了一个作者并指定了 php版本 和 elasticsearch/elasticsearch 依赖项，该依赖项用于记录日志。我们还定义了一个名为 autoload 的规则，告诉 Composer 如何自动加载我们的类文件。最后，我们定义了一个 test 脚本，它调用 PHPUnit 测试框架来执行项目的测试套件。\n\n这里我们着重记录下依赖项的版本号部分，版本格式：主版本号.次版本号.修订号，版本号递增规则如下：<br />主版本号：当你做了不兼容的 API 修改，<br />次版本号：当你做了向下兼容的功能性新增，<br />修订号：当你做了向下兼容的问题修正。<br />先行版本号及版本编译信息可以加到“**主版本号.次版本号.修订号**”的后面，作为延伸。\n\n~表示版本号只能改变最末尾那段（如果是~x.y 末尾就是y, 如果是~x.y.z末尾就是z）<br />~1.2.3 代表 1.2.3 <= 版本号 < 1.3.0<br />~1.2   代表   1.2 <= 版本号 < 2.0\n\n^表示除了主版本号以外，次版本号和修订号都可以变<br />^1.2.3 代表 1.2.3 <= 版本号 <2.0.0\n\n**特殊情况 0 开头的版本号:**<br />^0.3.0 等于 0.3.0 <= 版本号 <0.4.0 注意: 不是 <1.0.0<br />因为: semantic versioning 的规定是，主版本号以0开头表示这是一个非稳定版本（unstable),如果处于非稳定状态,次版本号是允许不向下兼容的。<br />**所以如果你要指定 0 开头的库那一定要注意:**<br />危险写法:~0.1 等于0.1.0 <= 版本号 <1.0.0<br />保险写法:^0.1 等于0.1.0 <= 版本号 <0.2.0\n\n当您完成 composer.json 文件的编写后，可以使用 **composer install** 命令来安装所有依赖项。如果您需要新增或移除依赖库，只需编辑 composer.json 文件并在命令行中运行 **composer update** 命令即可更新。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">composer.json 是用于管理 PHP 项目 依赖关系的配置文件。下面是一些常见的 composer.json 配置项及其含义：</span></strong></p><p id=\"udfe4be4e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">name: 项目名称。在发布到 Packagist 上时，这个名称会变成该包的唯一标识符。</span></p><p id=\"u0c146658\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">description: 项目描述，用于简要说明项目的目的和功能。</span></p><p id=\"u30b9d9cc\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">type: 项目类型，可以是 &quot;library&quot;（库）、&quot;project&quot;（项目）、&quot;metapackage&quot;（元包）等。</span></p><p id=\"u85f9b5af\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">keywords: 一组关键词，用于描述项目的特性、功能或主题，有助于其他开发者更容易找到你的项目。</span></p><p id=\"u1bfc79b6\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">homepage: 项目的主页，可以是项目的官方网站或仓库地址。</span></p><p id=\"u7a41e2de\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">license: 项目的许可证类型，用于指定项目的开源许可证。</span></p><p id=\"u398266df\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">authors: 项目的作者信息，包括姓名、电子邮件和网址等。</span></p><p id=\"ub4b6457d\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">support: 用于提供支持选项的 URL 和/或电子邮件地址。</span></p><p id=\"u55813ae2\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">require: 项目所依赖的其他 PHP 包的版本要求，可以指定包名和版本号，以确保项目能够正常运行。</span></p><p id=\"ude8fdf7a\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">require-dev: 与开发相关的依赖关系，通常是开发环境下需要的工具或测试框架等。</span></p><p id=\"u62ce0155\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">conflict: 另一个包与该包存在冲突的版本限制。</span></p><p id=\"u1249f16d\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">replace: 包替换另一个包。</span></p><p id=\"u70b61354\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">provide: 包提供另一个包的功能。</span></p><p id=\"u8ff09de7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">suggest: 建议安装的附加功能或库。</span></p><p id=\"u18598672\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">autoload: 自动加载规则的定义，用于告知 Composer 如何加载 PHP 类和文件。</span></p><p id=\"u41d16291\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">autoload-dev: 自动加载规则的定义，专门用于开发环境。</span></p><p id=\"ufd550fd5\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">scripts: 定义项目中使用的自定义脚本（例如测试、构建等）。</span></p><p id=\"u1c2f1761\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u2cfc16a2\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">下面是一个简单的 composer.json 配置文件的示例：</span></p><pre data-language=\"plain\" id=\"okjZ7\" class=\"ne-codeblock language-plain\"><code>{\n    &quot;name&quot;: &quot;my-project&quot;,\n    &quot;description&quot;: &quot;A simple PHP project&quot;,\n    &quot;type&quot;: &quot;project&quot;,\n    &quot;authors&quot;: [\n        {\n            &quot;name&quot;: &quot;yzmcms&quot;,\n            &quot;email&quot;: &quot;yzmcms@qq.com&quot;\n        }\n    ],\n    &quot;require&quot;: {\n        &quot;php&quot;: &quot;^7.3|^8.0&quot;,\n\t\t&quot;elasticsearch/elasticsearch&quot;: &quot;~7.0&quot;\n    },\n    &quot;autoload&quot;: {\n        &quot;psr-4&quot;: {\n            &quot;App\\\\&quot;: &quot;app/&quot;\n        }\n    },\n    &quot;scripts&quot;: {\n        &quot;test&quot;: &quot;phpunit&quot;\n    }\n}</code></pre><p id=\"ub1764bfa\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u5926e02f\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">在这个示例中，我们定义了 my-project 作为项目名称，指定了一个简短的描述，并将项目类型设置为 project。我们列出了一个作者并指定了 php版本 和 elasticsearch/elasticsearch 依赖项，该依赖项用于记录日志。我们还定义了一个名为 autoload 的规则，告诉 Composer 如何自动加载我们的类文件。最后，我们定义了一个 test 脚本，它调用 PHPUnit 测试框架来执行项目的测试套件。</span></p><p id=\"u6c9ce4b7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u7ef09e1b\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">这里我们着重记录下依赖项的版本号部分，版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</span></p><p id=\"udf292931\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">主版本号：当你做了不兼容的 API 修改，</span></p><p id=\"u2eb4ba30\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">次版本号：当你做了向下兼容的功能性新增，</span></p><p id=\"u032040c3\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">修订号：当你做了向下兼容的问题修正。</span></p><p id=\"uee6222ca\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">先行版本号及版本编译信息可以加到“</span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">主版本号.次版本号.修订号</span></strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">”的后面，作为延伸。</span></p><p id=\"ucbd97ae7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u99f018bd\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">~表示版本号只能改变最末尾那段（如果是~x.y 末尾就是y, 如果是~x.y.z末尾就是z）</span></p><p id=\"u1966f033\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">~1.2.3 代表 1.2.3 &lt;= 版本号 &lt; 1.3.0</span></p><p id=\"u5eec8a51\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">~1.2   代表   1.2 &lt;= 版本号 &lt; 2.0</span></p><p id=\"ue8142218\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u5911c37b\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">^表示除了主版本号以外，次版本号和修订号都可以变</span></p><p id=\"ua017216e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">^1.2.3 代表 1.2.3 &lt;= 版本号 &lt;2.0.0</span></p><p id=\"u3bd14086\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"u4df12866\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">特殊情况 0 开头的版本号:</span></strong></p><p id=\"u32cb7171\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">^0.3.0 等于 0.3.0 &lt;= 版本号 &lt;0.4.0 注意: 不是 &lt;1.0.0</span></p><p id=\"u882b4069\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">因为: semantic versioning 的规定是，主版本号以0开头表示这是一个非稳定版本（unstable),如果处于非稳定状态,次版本号是允许不向下兼容的。</span></p><p id=\"ua39a96a4\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(192, 0, 0); font-size: 14px\">所以如果你要指定 0 开头的库那一定要注意:</span></strong></p><p id=\"u9ef611cf\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">危险写法:~0.1 等于0.1.0 &lt;= 版本号 &lt;1.0.0</span></p><p id=\"u6c837b06\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">保险写法:^0.1 等于0.1.0 &lt;= 版本号 &lt;0.2.0</span></p><p id=\"u402f5fe8\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"><br /></span></p><p id=\"uaf3750d5\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">当您完成 composer.json 文件的编写后，可以使用 </span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">composer install</span></strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"> 命令来安装所有依赖项。如果您需要新增或移除依赖库，只需编辑 composer.json 文件并在命令行中运行 </span><strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\">composer update</span></strong><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 14px\"> 命令即可更新。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\" style=\"text-align: left\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><strong><span data-lake-id=\"udc4e59e6\" id=\"udc4e59e6\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">composer.json 是用于管理 PHP 项目 依赖关系的配置文件。下面是一些常见的 composer.json 配置项及其含义：</span></strong></p><p data-lake-id=\"udfe4be4e\" id=\"udfe4be4e\" style=\"text-align: left\"><span data-lake-id=\"uc7a239d7\" id=\"uc7a239d7\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">name: 项目名称。在发布到 Packagist 上时，这个名称会变成该包的唯一标识符。</span></p><p data-lake-id=\"u0c146658\" id=\"u0c146658\" style=\"text-align: left\"><span data-lake-id=\"uacb4e379\" id=\"uacb4e379\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">description: 项目描述，用于简要说明项目的目的和功能。</span></p><p data-lake-id=\"u30b9d9cc\" id=\"u30b9d9cc\" style=\"text-align: left\"><span data-lake-id=\"ubd5d45ca\" id=\"ubd5d45ca\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">type: 项目类型，可以是 &quot;library&quot;（库）、&quot;project&quot;（项目）、&quot;metapackage&quot;（元包）等。</span></p><p data-lake-id=\"u85f9b5af\" id=\"u85f9b5af\" style=\"text-align: left\"><span data-lake-id=\"u8207f1af\" id=\"u8207f1af\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">keywords: 一组关键词，用于描述项目的特性、功能或主题，有助于其他开发者更容易找到你的项目。</span></p><p data-lake-id=\"u1bfc79b6\" id=\"u1bfc79b6\" style=\"text-align: left\"><span data-lake-id=\"u27530e61\" id=\"u27530e61\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">homepage: 项目的主页，可以是项目的官方网站或仓库地址。</span></p><p data-lake-id=\"u7a41e2de\" id=\"u7a41e2de\" style=\"text-align: left\"><span data-lake-id=\"ue8015770\" id=\"ue8015770\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">license: 项目的许可证类型，用于指定项目的开源许可证。</span></p><p data-lake-id=\"u398266df\" id=\"u398266df\" style=\"text-align: left\"><span data-lake-id=\"u08c0ea8a\" id=\"u08c0ea8a\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">authors: 项目的作者信息，包括姓名、电子邮件和网址等。</span></p><p data-lake-id=\"ub4b6457d\" id=\"ub4b6457d\" style=\"text-align: left\"><span data-lake-id=\"u78be5a67\" id=\"u78be5a67\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">support: 用于提供支持选项的 URL 和/或电子邮件地址。</span></p><p data-lake-id=\"u55813ae2\" id=\"u55813ae2\" style=\"text-align: left\"><span data-lake-id=\"ue32af8fb\" id=\"ue32af8fb\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">require: 项目所依赖的其他 PHP 包的版本要求，可以指定包名和版本号，以确保项目能够正常运行。</span></p><p data-lake-id=\"ude8fdf7a\" id=\"ude8fdf7a\" style=\"text-align: left\"><span data-lake-id=\"u0aca49c7\" id=\"u0aca49c7\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">require-dev: 与开发相关的依赖关系，通常是开发环境下需要的工具或测试框架等。</span></p><p data-lake-id=\"u62ce0155\" id=\"u62ce0155\" style=\"text-align: left\"><span data-lake-id=\"u2a9d9931\" id=\"u2a9d9931\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">conflict: 另一个包与该包存在冲突的版本限制。</span></p><p data-lake-id=\"u1249f16d\" id=\"u1249f16d\" style=\"text-align: left\"><span data-lake-id=\"ued8ae9ae\" id=\"ued8ae9ae\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">replace: 包替换另一个包。</span></p><p data-lake-id=\"u70b61354\" id=\"u70b61354\" style=\"text-align: left\"><span data-lake-id=\"u1ad25bba\" id=\"u1ad25bba\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">provide: 包提供另一个包的功能。</span></p><p data-lake-id=\"u8ff09de7\" id=\"u8ff09de7\" style=\"text-align: left\"><span data-lake-id=\"u77099ca2\" id=\"u77099ca2\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">suggest: 建议安装的附加功能或库。</span></p><p data-lake-id=\"u18598672\" id=\"u18598672\" style=\"text-align: left\"><span data-lake-id=\"u0fdca1cd\" id=\"u0fdca1cd\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">autoload: 自动加载规则的定义，用于告知 Composer 如何加载 PHP 类和文件。</span></p><p data-lake-id=\"u41d16291\" id=\"u41d16291\" style=\"text-align: left\"><span data-lake-id=\"u1eb9f98b\" id=\"u1eb9f98b\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">autoload-dev: 自动加载规则的定义，专门用于开发环境。</span></p><p data-lake-id=\"ufd550fd5\" id=\"ufd550fd5\" style=\"text-align: left\"><span data-lake-id=\"ue20cdfea\" id=\"ue20cdfea\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">scripts: 定义项目中使用的自定义脚本（例如测试、构建等）。</span></p><p data-lake-id=\"u1c2f1761\" id=\"u1c2f1761\" style=\"text-align: left\"><span data-lake-id=\"ubd3797fc\" id=\"ubd3797fc\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"u2cfc16a2\" id=\"u2cfc16a2\" style=\"text-align: left\"><span data-lake-id=\"u2b9da768\" id=\"u2b9da768\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">下面是一个简单的 composer.json 配置文件的示例：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%5Cn%20%20%20%20%5C%22name%5C%22%3A%20%5C%22my-project%5C%22%2C%5Cn%20%20%20%20%5C%22description%5C%22%3A%20%5C%22A%20simple%20PHP%20project%5C%22%2C%5Cn%20%20%20%20%5C%22type%5C%22%3A%20%5C%22project%5C%22%2C%5Cn%20%20%20%20%5C%22authors%5C%22%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22name%5C%22%3A%20%5C%22yzmcms%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22email%5C%22%3A%20%5C%22yzmcms%40qq.com%5C%22%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%5D%2C%5Cn%20%20%20%20%5C%22require%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22php%5C%22%3A%20%5C%22%5E7.3%7C%5E8.0%5C%22%2C%5Cn%5Ct%5Ct%5C%22elasticsearch%2Felasticsearch%5C%22%3A%20%5C%22~7.0%5C%22%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22autoload%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22psr-4%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22App%5C%5C%5C%5C%5C%22%3A%20%5C%22app%2F%5C%22%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22scripts%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22test%5C%22%3A%20%5C%22phpunit%5C%22%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22okjZ7%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ub1764bfa\" id=\"ub1764bfa\" style=\"text-align: left\"><span data-lake-id=\"u834d6333\" id=\"u834d6333\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"u5926e02f\" id=\"u5926e02f\" style=\"text-align: left\"><span data-lake-id=\"u829ca194\" id=\"u829ca194\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">在这个示例中，我们定义了 my-project 作为项目名称，指定了一个简短的描述，并将项目类型设置为 project。我们列出了一个作者并指定了 php版本 和 elasticsearch/elasticsearch 依赖项，该依赖项用于记录日志。我们还定义了一个名为 autoload 的规则，告诉 Composer 如何自动加载我们的类文件。最后，我们定义了一个 test 脚本，它调用 PHPUnit 测试框架来执行项目的测试套件。</span></p><p data-lake-id=\"u6c9ce4b7\" id=\"u6c9ce4b7\" style=\"text-align: left\"><span data-lake-id=\"u94384b8e\" id=\"u94384b8e\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"u7ef09e1b\" id=\"u7ef09e1b\" style=\"text-align: left\"><span data-lake-id=\"ueacd455c\" id=\"ueacd455c\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">这里我们着重记录下依赖项的版本号部分，版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</span></p><p data-lake-id=\"udf292931\" id=\"udf292931\" style=\"text-align: left\"><span data-lake-id=\"u4dfbc870\" id=\"u4dfbc870\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">主版本号：当你做了不兼容的 API 修改，</span></p><p data-lake-id=\"u2eb4ba30\" id=\"u2eb4ba30\" style=\"text-align: left\"><span data-lake-id=\"u2e0d6c78\" id=\"u2e0d6c78\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">次版本号：当你做了向下兼容的功能性新增，</span></p><p data-lake-id=\"u032040c3\" id=\"u032040c3\" style=\"text-align: left\"><span data-lake-id=\"u5022c8d6\" id=\"u5022c8d6\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">修订号：当你做了向下兼容的问题修正。</span></p><p data-lake-id=\"uee6222ca\" id=\"uee6222ca\" style=\"text-align: left\"><span data-lake-id=\"uee5f2024\" id=\"uee5f2024\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">先行版本号及版本编译信息可以加到“</span><strong><span data-lake-id=\"u5e280e3b\" id=\"u5e280e3b\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">主版本号.次版本号.修订号</span></strong><span data-lake-id=\"u0aef68be\" id=\"u0aef68be\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">”的后面，作为延伸。</span></p><p data-lake-id=\"ucbd97ae7\" id=\"ucbd97ae7\" style=\"text-align: left\"><span data-lake-id=\"u0bd099ad\" id=\"u0bd099ad\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"u99f018bd\" id=\"u99f018bd\" style=\"text-align: left\"><span data-lake-id=\"u7a288061\" id=\"u7a288061\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">~表示版本号只能改变最末尾那段（如果是~x.y 末尾就是y, 如果是~x.y.z末尾就是z）</span></p><p data-lake-id=\"u1966f033\" id=\"u1966f033\" style=\"text-align: left\"><span data-lake-id=\"uac80fa6c\" id=\"uac80fa6c\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">~1.2.3 代表 1.2.3 &lt;= 版本号 &lt; 1.3.0</span></p><p data-lake-id=\"u5eec8a51\" id=\"u5eec8a51\" style=\"text-align: left\"><span data-lake-id=\"u70adcdd3\" id=\"u70adcdd3\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">~1.2   代表   1.2 &lt;= 版本号 &lt; 2.0</span></p><p data-lake-id=\"ue8142218\" id=\"ue8142218\" style=\"text-align: left\"><span data-lake-id=\"u6c388600\" id=\"u6c388600\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"u5911c37b\" id=\"u5911c37b\" style=\"text-align: left\"><span data-lake-id=\"uf8d8db50\" id=\"uf8d8db50\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">^表示除了主版本号以外，次版本号和修订号都可以变</span></p><p data-lake-id=\"ua017216e\" id=\"ua017216e\" style=\"text-align: left\"><span data-lake-id=\"ufa3da611\" id=\"ufa3da611\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">^1.2.3 代表 1.2.3 &lt;= 版本号 &lt;2.0.0</span></p><p data-lake-id=\"u3bd14086\" id=\"u3bd14086\" style=\"text-align: left\"><span data-lake-id=\"u600d445a\" id=\"u600d445a\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"u4df12866\" id=\"u4df12866\" style=\"text-align: left\"><strong><span data-lake-id=\"ue77846c6\" id=\"ue77846c6\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">特殊情况 0 开头的版本号:</span></strong></p><p data-lake-id=\"u32cb7171\" id=\"u32cb7171\" style=\"text-align: left\"><span data-lake-id=\"ucba32ee2\" id=\"ucba32ee2\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">^0.3.0 等于 0.3.0 &lt;= 版本号 &lt;0.4.0 注意: 不是 &lt;1.0.0</span></p><p data-lake-id=\"u882b4069\" id=\"u882b4069\" style=\"text-align: left\"><span data-lake-id=\"u2373f4f2\" id=\"u2373f4f2\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">因为: semantic versioning 的规定是，主版本号以0开头表示这是一个非稳定版本（unstable),如果处于非稳定状态,次版本号是允许不向下兼容的。</span></p><p data-lake-id=\"ua39a96a4\" id=\"ua39a96a4\" style=\"text-align: left\"><strong><span data-lake-id=\"u95d67d13\" id=\"u95d67d13\" class=\"lake-fontsize-11\" style=\"color: rgb(192, 0, 0)\">所以如果你要指定 0 开头的库那一定要注意:</span></strong></p><p data-lake-id=\"u9ef611cf\" id=\"u9ef611cf\" style=\"text-align: left\"><span data-lake-id=\"u463b6264\" id=\"u463b6264\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">危险写法:~0.1 等于0.1.0 &lt;= 版本号 &lt;1.0.0</span></p><p data-lake-id=\"u6c837b06\" id=\"u6c837b06\" style=\"text-align: left\"><span data-lake-id=\"u19fda186\" id=\"u19fda186\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">保险写法:^0.1 等于0.1.0 &lt;= 版本号 &lt;0.2.0</span></p><p data-lake-id=\"u402f5fe8\" id=\"u402f5fe8\" style=\"text-align: left\"><span data-lake-id=\"u5a4528c7\" id=\"u5a4528c7\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"><br /><br /></span></p><p data-lake-id=\"uaf3750d5\" id=\"uaf3750d5\" style=\"text-align: left\"><span data-lake-id=\"u72378822\" id=\"u72378822\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">当您完成 composer.json 文件的编写后，可以使用 </span><strong><span data-lake-id=\"u5bbdf37b\" id=\"u5bbdf37b\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">composer install</span></strong><span data-lake-id=\"u728ba516\" id=\"u728ba516\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"> 命令来安装所有依赖项。如果您需要新增或移除依赖库，只需编辑 composer.json 文件并在命令行中运行 </span><strong><span data-lake-id=\"uc5a46a73\" id=\"uc5a46a73\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\">composer update</span></strong><span data-lake-id=\"uf1954119\" id=\"uf1954119\" class=\"lake-fontsize-11\" style=\"color: rgb(85, 85, 85)\"> 命令即可更新。</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 5,
    "hits": 5,
    "comments_count": 0,
    "word_count": 1074,
    "created_at": "2023-11-20T08:38:25.000Z",
    "updated_at": "2023-11-20T08:38:44.000Z",
    "content_updated_at": "2023-11-20T08:38:44.000Z",
    "published_at": "2023-11-20T08:38:44.000Z",
    "first_published_at": "2023-11-20T08:38:43.893Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2128197487,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 142930247,
    "type": "Doc",
    "slug": "canwz3d9ntd3yz9a",
    "title": "微信公众号对接开发api自动回复功能-php",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:微信公众号对接开发api自动回复功能，包含文字回复以及图文回复php代码...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />微信公众号对接开发api自动回复功能，包含文字回复以及图文回复</span></p><p id=\"u11bca3ae\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">php代码，直接上代码</span></p><p id=\"u4512c973\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><pre data-language=\"php\" id=\"qvY2I\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * by：小灰灰\n * 接口配置信息：\n * URL：http://******.com/api/wx/valid\n * Token：123456\n */\n\n// 接收参数\ndefine(&quot;TOKEN&quot;, '123456');\n\n$wechatObj = new wx();\nif (isset($_GET['echostr'])) {\n    $wechatObj-&gt;valid();\n} else {\n    $wechatObj-&gt;responseMsg();\n}\n\nclass wx\n{\n\n    /**\n     * 微信公众号验证\n     */\n    public function valid()\n    {\n        $echoStr = $_GET[&quot;echostr&quot;];\n        if ($this-&gt;checkSignature()) {\n            echo $echoStr;\n            exit;\n        }\n    }\n\n    /**\n     * 回复消息\n     */\n    public function responseMsg()\n    {\n        $postArr = file_get_contents(&quot;php://input&quot;);\n        $postObj = simplexml_load_string($postArr, 'SimpleXMLElement', LIBXML_NOCDATA);\n\n        $msgType  = $postObj-&gt;MsgType;\n        $toUser   = $postObj-&gt;FromUserName;\n        $fromUser = $postObj-&gt;ToUserName;\n\n        //判断该数据包是否是订阅的事件推送\n        if (strtolower($msgType) == 'event') {\n            if ($postObj-&gt;Event == 'subscribe') { //如果是订阅事件\n                $followMeText = &quot;这里可以设置默认关注回复词哦&quot;;\n                if (empty($followMeText)) {\n                    $followMeText = &quot;嘻嘻，最近小编花了好大时间做了这个自动回复功能！现在可以直接回复关键词就ok拉！&quot;;\n                }\n                $contentStrq = $content = $followMeText;\n                $this-&gt;subscribeMsg($contentStrq, $toUser, $fromUser);\n            }\n        } else {\n            $content = trim($postObj-&gt;Content);\n\n            $resData = [\n                [\n                    'title'       =&gt; '这是title',\n                    'pic_url'     =&gt; '',\n                    'description' =&gt; '这是描述',\n                    'link'        =&gt; 'https://baidu.com'\n                ],\n                [\n                    'title'       =&gt; '最新ChatGPT4免费使用教程。免登录直接就可以使用了。',\n                    'pic_url'     =&gt; 'https://i0.hdslb.com/bfs/archive/3bd476e6e008cf38e274adf63276da189dbf7aae.jpg@336w_190h_!web-video-rcmd-cover.webp',\n                    'description' =&gt; '最新ChatGPT4免费使用教程。免登录直接就可以使用了。',\n                    'link'        =&gt; 'https://www.bilibili.com/video/BV1UN411J7Ct/?spm_id_from=333.1007.tianma.1-1-1.click'\n                ]\n            ];\n            if (empty($resData)) {\n                $resText = &quot;这里设置，如果没有获取到数据，回复的词&quot;;\n                $this-&gt;responseTextMsg($resText, $toUser, $fromUser);\n            } else {\n                $this-&gt;responseImageNewsMsg($resData, $toUser, $fromUser);\n            }\n        }\n    }\n\n    //关注\n    private function subscribeMsg($content, $toUser, $fromUser)\n    {\n        $template = &lt;&lt;&lt;EOXML\n        &lt;xml&gt;\n            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;\n            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;\n            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;\n            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;\n            &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;\n        &lt;/xml&gt;\nEOXML;\n        echo sprintf($template, $toUser, $fromUser, time(), 'text', $content);\n        die();\n    }\n\n    /**\n     * responseImageMsg\n     *\n     * @param $msg\n     * @param $toUser\n     * @param $fromUser\n     *\n     * @return string\n     */\n    function responseImageNewsMsg($msg, $toUser, $fromUser)\n    {\n        $arr      = $msg;\n        $template = &quot;&lt;xml&gt;  \n            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;  \n            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;  \n            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;  \n            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;  \n            &lt;ArticleCount&gt;&quot;.count($arr).&quot;&lt;/ArticleCount&gt;  \n        &lt;Articles&gt;&quot;;\n        foreach ($arr as $k =&gt; $v) {\n            $template .= &quot;&lt;item&gt;  \n                &lt;Title&gt;&lt;![CDATA[&quot;.$v['title'].&quot;]]&gt;&lt;/Title&gt;   \n                &lt;Description&gt;&lt;![CDATA[&quot;.$v['description'].&quot;]]&gt;&lt;/Description&gt;  \n                &lt;PicUrl&gt;&lt;![CDATA[&quot;.$v['pic_url'].&quot;]]&gt;&lt;/PicUrl&gt;  \n                &lt;Url&gt;&lt;![CDATA[&quot;.$v['link'].&quot;]]&gt;&lt;/Url&gt;  \n            &lt;/item&gt;&quot;;\n        }\n        $template .= &quot;&lt;/Articles&gt;&quot;;\n        $template .= &quot;&lt;/xml&gt;&quot;;\n\n        echo sprintf($template, $toUser, $fromUser, time(), 'news');\n        die();\n    }\n\n    /**\n     * @param $content\n     * @param $toUser\n     * @param $fromUser\n     */\n    function responseTextMsg($content, $toUser, $fromUser)\n    {\n        $msgType = 'text';\n        //修改为\n        if ( ! is_utf8($content)) {\n            $content = iconv('gb2312', 'UTF-8//IGNORE', $content);\n        }\n        $template = &lt;&lt;&lt;EOXML\n        &lt;xml&gt;\n            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;\n            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;\n            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;\n            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;\n            &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;\n        &lt;/xml&gt;\nEOXML;\n        echo sprintf($template, $toUser, $fromUser, time(), $msgType, $content);\n        die();\n    }\n\n    private function checkSignature()\n    {\n        $signature = $_GET[&quot;signature&quot;];\n        $timestamp = $_GET[&quot;timestamp&quot;];\n        $nonce     = $_GET[&quot;nonce&quot;];\n\n        $token  = TOKEN;\n        $tmpArr = array($token, $timestamp, $nonce);\n        sort($tmpArr);\n        $tmpStr = implode($tmpArr);\n        $tmpStr = sha1($tmpStr);\n\n        if ($tmpStr == $signature) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n}\n</code></pre></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />微信公众号对接开发api自动回复功能，包含文字回复以及图文回复<br />php代码，直接上代码\n\n```php\n<?php\n/**\n * by：小灰灰\n * 接口配置信息：\n * URL：http://******.com/api/wx/valid\n * Token：123456\n */\n\n// 接收参数\ndefine(\"TOKEN\", '123456');\n\n$wechatObj = new wx();\nif (isset($_GET['echostr'])) {\n    $wechatObj->valid();\n} else {\n    $wechatObj->responseMsg();\n}\n\nclass wx\n{\n\n    /**\n     * 微信公众号验证\n     */\n    public function valid()\n    {\n        $echoStr = $_GET[\"echostr\"];\n        if ($this->checkSignature()) {\n            echo $echoStr;\n            exit;\n        }\n    }\n\n    /**\n     * 回复消息\n     */\n    public function responseMsg()\n    {\n        $postArr = file_get_contents(\"php://input\");\n        $postObj = simplexml_load_string($postArr, 'SimpleXMLElement', LIBXML_NOCDATA);\n\n        $msgType  = $postObj->MsgType;\n        $toUser   = $postObj->FromUserName;\n        $fromUser = $postObj->ToUserName;\n\n        //判断该数据包是否是订阅的事件推送\n        if (strtolower($msgType) == 'event') {\n            if ($postObj->Event == 'subscribe') { //如果是订阅事件\n                $followMeText = \"这里可以设置默认关注回复词哦\";\n                if (empty($followMeText)) {\n                    $followMeText = \"嘻嘻，最近小编花了好大时间做了这个自动回复功能！现在可以直接回复关键词就ok拉！\";\n                }\n                $contentStrq = $content = $followMeText;\n                $this->subscribeMsg($contentStrq, $toUser, $fromUser);\n            }\n        } else {\n            $content = trim($postObj->Content);\n\n            $resData = [\n                [\n                    'title'       => '这是title',\n                    'pic_url'     => '',\n                    'description' => '这是描述',\n                    'link'        => 'https://baidu.com'\n                ],\n                [\n                    'title'       => '最新ChatGPT4免费使用教程。免登录直接就可以使用了。',\n                    'pic_url'     => 'https://i0.hdslb.com/bfs/archive/3bd476e6e008cf38e274adf63276da189dbf7aae.jpg@336w_190h_!web-video-rcmd-cover.webp',\n                    'description' => '最新ChatGPT4免费使用教程。免登录直接就可以使用了。',\n                    'link'        => 'https://www.bilibili.com/video/BV1UN411J7Ct/?spm_id_from=333.1007.tianma.1-1-1.click'\n                ]\n            ];\n            if (empty($resData)) {\n                $resText = \"这里设置，如果没有获取到数据，回复的词\";\n                $this->responseTextMsg($resText, $toUser, $fromUser);\n            } else {\n                $this->responseImageNewsMsg($resData, $toUser, $fromUser);\n            }\n        }\n    }\n\n    //关注\n    private function subscribeMsg($content, $toUser, $fromUser)\n    {\n        $template = <<<EOXML\n        <xml>\n            <ToUserName><![CDATA[%s]]></ToUserName>\n            <FromUserName><![CDATA[%s]]></FromUserName>\n            <CreateTime>%s</CreateTime>\n            <MsgType><![CDATA[%s]]></MsgType>\n            <Content><![CDATA[%s]]></Content>\n        </xml>\nEOXML;\n        echo sprintf($template, $toUser, $fromUser, time(), 'text', $content);\n        die();\n    }\n\n    /**\n     * responseImageMsg\n     *\n     * @param $msg\n     * @param $toUser\n     * @param $fromUser\n     *\n     * @return string\n     */\n    function responseImageNewsMsg($msg, $toUser, $fromUser)\n    {\n        $arr      = $msg;\n        $template = \"<xml>  \n            <ToUserName><![CDATA[%s]]></ToUserName>  \n            <FromUserName><![CDATA[%s]]></FromUserName>  \n            <CreateTime>%s</CreateTime>  \n            <MsgType><![CDATA[%s]]></MsgType>  \n            <ArticleCount>\".count($arr).\"</ArticleCount>  \n        <Articles>\";\n        foreach ($arr as $k => $v) {\n            $template .= \"<item>  \n                <Title><![CDATA[\".$v['title'].\"]]></Title>   \n                <Description><![CDATA[\".$v['description'].\"]]></Description>  \n                <PicUrl><![CDATA[\".$v['pic_url'].\"]]></PicUrl>  \n                <Url><![CDATA[\".$v['link'].\"]]></Url>  \n            </item>\";\n        }\n        $template .= \"</Articles>\";\n        $template .= \"</xml>\";\n\n        echo sprintf($template, $toUser, $fromUser, time(), 'news');\n        die();\n    }\n\n    /**\n     * @param $content\n     * @param $toUser\n     * @param $fromUser\n     */\n    function responseTextMsg($content, $toUser, $fromUser)\n    {\n        $msgType = 'text';\n        //修改为\n        if ( ! is_utf8($content)) {\n            $content = iconv('gb2312', 'UTF-8//IGNORE', $content);\n        }\n        $template = <<<EOXML\n        <xml>\n            <ToUserName><![CDATA[%s]]></ToUserName>\n            <FromUserName><![CDATA[%s]]></FromUserName>\n            <CreateTime>%s</CreateTime>\n            <MsgType><![CDATA[%s]]></MsgType>\n            <Content><![CDATA[%s]]></Content>\n        </xml>\nEOXML;\n        echo sprintf($template, $toUser, $fromUser, time(), $msgType, $content);\n        die();\n    }\n\n    private function checkSignature()\n    {\n        $signature = $_GET[\"signature\"];\n        $timestamp = $_GET[\"timestamp\"];\n        $nonce     = $_GET[\"nonce\"];\n\n        $token  = TOKEN;\n        $tmpArr = array($token, $timestamp, $nonce);\n        sort($tmpArr);\n        $tmpStr = implode($tmpArr);\n        $tmpStr = sha1($tmpStr);\n\n        if ($tmpStr == $signature) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n}\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />微信公众号对接开发api自动回复功能，包含文字回复以及图文回复</span></p><p id=\"u11bca3ae\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">php代码，直接上代码</span></p><p id=\"u4512c973\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><pre data-language=\"php\" id=\"qvY2I\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * by：小灰灰\n * 接口配置信息：\n * URL：http://******.com/api/wx/valid\n * Token：123456\n */\n\n// 接收参数\ndefine(&quot;TOKEN&quot;, '123456');\n\n$wechatObj = new wx();\nif (isset($_GET['echostr'])) {\n    $wechatObj-&gt;valid();\n} else {\n    $wechatObj-&gt;responseMsg();\n}\n\nclass wx\n{\n\n    /**\n     * 微信公众号验证\n     */\n    public function valid()\n    {\n        $echoStr = $_GET[&quot;echostr&quot;];\n        if ($this-&gt;checkSignature()) {\n            echo $echoStr;\n            exit;\n        }\n    }\n\n    /**\n     * 回复消息\n     */\n    public function responseMsg()\n    {\n        $postArr = file_get_contents(&quot;php://input&quot;);\n        $postObj = simplexml_load_string($postArr, 'SimpleXMLElement', LIBXML_NOCDATA);\n\n        $msgType  = $postObj-&gt;MsgType;\n        $toUser   = $postObj-&gt;FromUserName;\n        $fromUser = $postObj-&gt;ToUserName;\n\n        //判断该数据包是否是订阅的事件推送\n        if (strtolower($msgType) == 'event') {\n            if ($postObj-&gt;Event == 'subscribe') { //如果是订阅事件\n                $followMeText = &quot;这里可以设置默认关注回复词哦&quot;;\n                if (empty($followMeText)) {\n                    $followMeText = &quot;嘻嘻，最近小编花了好大时间做了这个自动回复功能！现在可以直接回复关键词就ok拉！&quot;;\n                }\n                $contentStrq = $content = $followMeText;\n                $this-&gt;subscribeMsg($contentStrq, $toUser, $fromUser);\n            }\n        } else {\n            $content = trim($postObj-&gt;Content);\n\n            $resData = [\n                [\n                    'title'       =&gt; '这是title',\n                    'pic_url'     =&gt; '',\n                    'description' =&gt; '这是描述',\n                    'link'        =&gt; 'https://baidu.com'\n                ],\n                [\n                    'title'       =&gt; '最新ChatGPT4免费使用教程。免登录直接就可以使用了。',\n                    'pic_url'     =&gt; 'https://i0.hdslb.com/bfs/archive/3bd476e6e008cf38e274adf63276da189dbf7aae.jpg@336w_190h_!web-video-rcmd-cover.webp',\n                    'description' =&gt; '最新ChatGPT4免费使用教程。免登录直接就可以使用了。',\n                    'link'        =&gt; 'https://www.bilibili.com/video/BV1UN411J7Ct/?spm_id_from=333.1007.tianma.1-1-1.click'\n                ]\n            ];\n            if (empty($resData)) {\n                $resText = &quot;这里设置，如果没有获取到数据，回复的词&quot;;\n                $this-&gt;responseTextMsg($resText, $toUser, $fromUser);\n            } else {\n                $this-&gt;responseImageNewsMsg($resData, $toUser, $fromUser);\n            }\n        }\n    }\n\n    //关注\n    private function subscribeMsg($content, $toUser, $fromUser)\n    {\n        $template = &lt;&lt;&lt;EOXML\n        &lt;xml&gt;\n            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;\n            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;\n            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;\n            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;\n            &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;\n        &lt;/xml&gt;\nEOXML;\n        echo sprintf($template, $toUser, $fromUser, time(), 'text', $content);\n        die();\n    }\n\n    /**\n     * responseImageMsg\n     *\n     * @param $msg\n     * @param $toUser\n     * @param $fromUser\n     *\n     * @return string\n     */\n    function responseImageNewsMsg($msg, $toUser, $fromUser)\n    {\n        $arr      = $msg;\n        $template = &quot;&lt;xml&gt;  \n            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;  \n            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;  \n            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;  \n            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;  \n            &lt;ArticleCount&gt;&quot;.count($arr).&quot;&lt;/ArticleCount&gt;  \n        &lt;Articles&gt;&quot;;\n        foreach ($arr as $k =&gt; $v) {\n            $template .= &quot;&lt;item&gt;  \n                &lt;Title&gt;&lt;![CDATA[&quot;.$v['title'].&quot;]]&gt;&lt;/Title&gt;   \n                &lt;Description&gt;&lt;![CDATA[&quot;.$v['description'].&quot;]]&gt;&lt;/Description&gt;  \n                &lt;PicUrl&gt;&lt;![CDATA[&quot;.$v['pic_url'].&quot;]]&gt;&lt;/PicUrl&gt;  \n                &lt;Url&gt;&lt;![CDATA[&quot;.$v['link'].&quot;]]&gt;&lt;/Url&gt;  \n            &lt;/item&gt;&quot;;\n        }\n        $template .= &quot;&lt;/Articles&gt;&quot;;\n        $template .= &quot;&lt;/xml&gt;&quot;;\n\n        echo sprintf($template, $toUser, $fromUser, time(), 'news');\n        die();\n    }\n\n    /**\n     * @param $content\n     * @param $toUser\n     * @param $fromUser\n     */\n    function responseTextMsg($content, $toUser, $fromUser)\n    {\n        $msgType = 'text';\n        //修改为\n        if ( ! is_utf8($content)) {\n            $content = iconv('gb2312', 'UTF-8//IGNORE', $content);\n        }\n        $template = &lt;&lt;&lt;EOXML\n        &lt;xml&gt;\n            &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;\n            &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;\n            &lt;CreateTime&gt;%s&lt;/CreateTime&gt;\n            &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;\n            &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;\n        &lt;/xml&gt;\nEOXML;\n        echo sprintf($template, $toUser, $fromUser, time(), $msgType, $content);\n        die();\n    }\n\n    private function checkSignature()\n    {\n        $signature = $_GET[&quot;signature&quot;];\n        $timestamp = $_GET[&quot;timestamp&quot;];\n        $nonce     = $_GET[&quot;nonce&quot;];\n\n        $token  = TOKEN;\n        $tmpArr = array($token, $timestamp, $nonce);\n        sort($tmpArr);\n        $tmpStr = implode($tmpArr);\n        $tmpStr = sha1($tmpStr);\n\n        if ($tmpStr == $signature) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n}\n</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br />微信公众号对接开发api自动回复功能，包含文字回复以及图文回复</span></p><p data-lake-id=\"u11bca3ae\" id=\"u11bca3ae\"><span data-lake-id=\"ue024542a\" id=\"ue024542a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">php代码，直接上代码</span></p><p data-lake-id=\"u4512c973\" id=\"u4512c973\"><span data-lake-id=\"uec885287\" id=\"uec885287\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20by%EF%BC%9A%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20*%20%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%9A%5Cn%20*%20URL%EF%BC%9Ahttp%3A%2F%2F******.com%2Fapi%2Fwx%2Fvalid%5Cn%20*%20Token%EF%BC%9A123456%5Cn%20*%2F%5Cn%5Cn%2F%2F%20%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0%5Cndefine(%5C%22TOKEN%5C%22%2C%20'123456')%3B%5Cn%5Cn%24wechatObj%20%3D%20new%20wx()%3B%5Cnif%20(isset(%24_GET%5B'echostr'%5D))%20%7B%5Cn%20%20%20%20%24wechatObj-%3Evalid()%3B%5Cn%7D%20else%20%7B%5Cn%20%20%20%20%24wechatObj-%3EresponseMsg()%3B%5Cn%7D%5Cn%5Cnclass%20wx%5Cn%7B%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E9%AA%8C%E8%AF%81%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20valid()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24echoStr%20%3D%20%24_GET%5B%5C%22echostr%5C%22%5D%3B%5Cn%20%20%20%20%20%20%20%20if%20(%24this-%3EcheckSignature())%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20echo%20%24echoStr%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20exit%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%9B%9E%E5%A4%8D%E6%B6%88%E6%81%AF%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20responseMsg()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24postArr%20%3D%20file_get_contents(%5C%22php%3A%2F%2Finput%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20%24postObj%20%3D%20simplexml_load_string(%24postArr%2C%20'SimpleXMLElement'%2C%20LIBXML_NOCDATA)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24msgType%20%20%3D%20%24postObj-%3EMsgType%3B%5Cn%20%20%20%20%20%20%20%20%24toUser%20%20%20%3D%20%24postObj-%3EFromUserName%3B%5Cn%20%20%20%20%20%20%20%20%24fromUser%20%3D%20%24postObj-%3EToUserName%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%E5%88%A4%E6%96%AD%E8%AF%A5%E6%95%B0%E6%8D%AE%E5%8C%85%E6%98%AF%E5%90%A6%E6%98%AF%E8%AE%A2%E9%98%85%E7%9A%84%E4%BA%8B%E4%BB%B6%E6%8E%A8%E9%80%81%5Cn%20%20%20%20%20%20%20%20if%20(strtolower(%24msgType)%20%3D%3D%20'event')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24postObj-%3EEvent%20%3D%3D%20'subscribe')%20%7B%20%2F%2F%E5%A6%82%E6%9E%9C%E6%98%AF%E8%AE%A2%E9%98%85%E4%BA%8B%E4%BB%B6%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24followMeText%20%3D%20%5C%22%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%85%B3%E6%B3%A8%E5%9B%9E%E5%A4%8D%E8%AF%8D%E5%93%A6%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(empty(%24followMeText))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24followMeText%20%3D%20%5C%22%E5%98%BB%E5%98%BB%EF%BC%8C%E6%9C%80%E8%BF%91%E5%B0%8F%E7%BC%96%E8%8A%B1%E4%BA%86%E5%A5%BD%E5%A4%A7%E6%97%B6%E9%97%B4%E5%81%9A%E4%BA%86%E8%BF%99%E4%B8%AA%E8%87%AA%E5%8A%A8%E5%9B%9E%E5%A4%8D%E5%8A%9F%E8%83%BD%EF%BC%81%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%9B%9E%E5%A4%8D%E5%85%B3%E9%94%AE%E8%AF%8D%E5%B0%B1ok%E6%8B%89%EF%BC%81%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24contentStrq%20%3D%20%24content%20%3D%20%24followMeText%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3EsubscribeMsg(%24contentStrq%2C%20%24toUser%2C%20%24fromUser)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24content%20%3D%20trim(%24postObj-%3EContent)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24resData%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'title'%20%20%20%20%20%20%20%3D%3E%20'%E8%BF%99%E6%98%AFtitle'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'pic_url'%20%20%20%20%20%3D%3E%20''%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'description'%20%3D%3E%20'%E8%BF%99%E6%98%AF%E6%8F%8F%E8%BF%B0'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'link'%20%20%20%20%20%20%20%20%3D%3E%20'https%3A%2F%2Fbaidu.com'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'title'%20%20%20%20%20%20%20%3D%3E%20'%E6%9C%80%E6%96%B0ChatGPT4%E5%85%8D%E8%B4%B9%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%82%E5%85%8D%E7%99%BB%E5%BD%95%E7%9B%B4%E6%8E%A5%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BA%86%E3%80%82'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'pic_url'%20%20%20%20%20%3D%3E%20'https%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farchive%2F3bd476e6e008cf38e274adf63276da189dbf7aae.jpg%40336w_190h_!web-video-rcmd-cover.webp'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'description'%20%3D%3E%20'%E6%9C%80%E6%96%B0ChatGPT4%E5%85%8D%E8%B4%B9%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E3%80%82%E5%85%8D%E7%99%BB%E5%BD%95%E7%9B%B4%E6%8E%A5%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BA%86%E3%80%82'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'link'%20%20%20%20%20%20%20%20%3D%3E%20'https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1UN411J7Ct%2F%3Fspm_id_from%3D333.1007.tianma.1-1-1.click'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(empty(%24resData))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24resText%20%3D%20%5C%22%E8%BF%99%E9%87%8C%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E8%8E%B7%E5%8F%96%E5%88%B0%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%9B%9E%E5%A4%8D%E7%9A%84%E8%AF%8D%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3EresponseTextMsg(%24resText%2C%20%24toUser%2C%20%24fromUser)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3EresponseImageNewsMsg(%24resData%2C%20%24toUser%2C%20%24fromUser)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%E5%85%B3%E6%B3%A8%5Cn%20%20%20%20private%20function%20subscribeMsg(%24content%2C%20%24toUser%2C%20%24fromUser)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24template%20%3D%20%3C%3C%3CEOXML%5Cn%20%20%20%20%20%20%20%20%3Cxml%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CToUserName%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FToUserName%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CFromUserName%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FFromUserName%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CCreateTime%3E%25s%3C%2FCreateTime%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CMsgType%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FMsgType%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CContent%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FContent%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fxml%3E%5CnEOXML%3B%5Cn%20%20%20%20%20%20%20%20echo%20sprintf(%24template%2C%20%24toUser%2C%20%24fromUser%2C%20time()%2C%20'text'%2C%20%24content)%3B%5Cn%20%20%20%20%20%20%20%20die()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20responseImageMsg%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20%24msg%5Cn%20%20%20%20%20*%20%40param%20%24toUser%5Cn%20%20%20%20%20*%20%40param%20%24fromUser%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20string%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20function%20responseImageNewsMsg(%24msg%2C%20%24toUser%2C%20%24fromUser)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24arr%20%20%20%20%20%20%3D%20%24msg%3B%5Cn%20%20%20%20%20%20%20%20%24template%20%3D%20%5C%22%3Cxml%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CToUserName%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FToUserName%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CFromUserName%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FFromUserName%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CCreateTime%3E%25s%3C%2FCreateTime%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CMsgType%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FMsgType%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CArticleCount%3E%5C%22.count(%24arr).%5C%22%3C%2FArticleCount%3E%20%20%5Cn%20%20%20%20%20%20%20%20%3CArticles%3E%5C%22%3B%5Cn%20%20%20%20%20%20%20%20foreach%20(%24arr%20as%20%24k%20%3D%3E%20%24v)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24template%20.%3D%20%5C%22%3Citem%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CTitle%3E%3C!%5BCDATA%5B%5C%22.%24v%5B'title'%5D.%5C%22%5D%5D%3E%3C%2FTitle%3E%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CDescription%3E%3C!%5BCDATA%5B%5C%22.%24v%5B'description'%5D.%5C%22%5D%5D%3E%3C%2FDescription%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CPicUrl%3E%3C!%5BCDATA%5B%5C%22.%24v%5B'pic_url'%5D.%5C%22%5D%5D%3E%3C%2FPicUrl%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CUrl%3E%3C!%5BCDATA%5B%5C%22.%24v%5B'link'%5D.%5C%22%5D%5D%3E%3C%2FUrl%3E%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fitem%3E%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24template%20.%3D%20%5C%22%3C%2FArticles%3E%5C%22%3B%5Cn%20%20%20%20%20%20%20%20%24template%20.%3D%20%5C%22%3C%2Fxml%3E%5C%22%3B%5Cn%5Cn%20%20%20%20%20%20%20%20echo%20sprintf(%24template%2C%20%24toUser%2C%20%24fromUser%2C%20time()%2C%20'news')%3B%5Cn%20%20%20%20%20%20%20%20die()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%40param%20%24content%5Cn%20%20%20%20%20*%20%40param%20%24toUser%5Cn%20%20%20%20%20*%20%40param%20%24fromUser%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20function%20responseTextMsg(%24content%2C%20%24toUser%2C%20%24fromUser)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24msgType%20%3D%20'text'%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E4%BF%AE%E6%94%B9%E4%B8%BA%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20is_utf8(%24content))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24content%20%3D%20iconv('gb2312'%2C%20'UTF-8%2F%2FIGNORE'%2C%20%24content)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24template%20%3D%20%3C%3C%3CEOXML%5Cn%20%20%20%20%20%20%20%20%3Cxml%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CToUserName%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FToUserName%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CFromUserName%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FFromUserName%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CCreateTime%3E%25s%3C%2FCreateTime%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CMsgType%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FMsgType%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3CContent%3E%3C!%5BCDATA%5B%25s%5D%5D%3E%3C%2FContent%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fxml%3E%5CnEOXML%3B%5Cn%20%20%20%20%20%20%20%20echo%20sprintf(%24template%2C%20%24toUser%2C%20%24fromUser%2C%20time()%2C%20%24msgType%2C%20%24content)%3B%5Cn%20%20%20%20%20%20%20%20die()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20private%20function%20checkSignature()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24signature%20%3D%20%24_GET%5B%5C%22signature%5C%22%5D%3B%5Cn%20%20%20%20%20%20%20%20%24timestamp%20%3D%20%24_GET%5B%5C%22timestamp%5C%22%5D%3B%5Cn%20%20%20%20%20%20%20%20%24nonce%20%20%20%20%20%3D%20%24_GET%5B%5C%22nonce%5C%22%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24token%20%20%3D%20TOKEN%3B%5Cn%20%20%20%20%20%20%20%20%24tmpArr%20%3D%20array(%24token%2C%20%24timestamp%2C%20%24nonce)%3B%5Cn%20%20%20%20%20%20%20%20sort(%24tmpArr)%3B%5Cn%20%20%20%20%20%20%20%20%24tmpStr%20%3D%20implode(%24tmpArr)%3B%5Cn%20%20%20%20%20%20%20%20%24tmpStr%20%3D%20sha1(%24tmpStr)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20(%24tmpStr%20%3D%3D%20%24signature)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22qvY2I%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 9,
    "hits": 9,
    "comments_count": 0,
    "word_count": 581,
    "created_at": "2023-10-20T06:26:48.000Z",
    "updated_at": "2023-10-20T06:34:03.000Z",
    "content_updated_at": "2023-10-20T06:34:02.000Z",
    "published_at": "2023-10-20T06:34:02.000Z",
    "first_published_at": "2023-10-20T06:34:02.483Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2059948197,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 141751091,
    "type": "Doc",
    "slug": "ycvqnno95xpx212p",
    "title": "php-阿里云发送短信简单的类库",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:简单的阿里云短信发送类库类库代码<?php /**  * Created...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />简单的阿里云短信发送类库</span></p><p id=\"u489dfdf2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h2 id=\"G109g\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">类库代码</span></h2><pre data-language=\"php\" id=\"OSJBu\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-10-08\n * Time: 10:58:58\n * Info: 阿里云短信发送插件\n */\n\nnamespace support\\lib;\n\nclass AliSms\n{\n\n    protected $error;\n\n    protected $accessKeyId;\n\n    protected $accessKeySecret;\n\n    public function __construct($accessKeyId, $accessKeySecret)\n    {\n        $this-&gt;accessKeyId     = ! empty($accessKeyId) ? $accessKeyId : '';\n        $this-&gt;accessKeySecret = ! empty($accessKeySecret) ? $accessKeySecret : '';\n    }\n\n    public function getError()\n    {\n        return $this-&gt;error;\n    }\n\n    /**\n     * 发送短信\n     */\n    public function sendSms($params = array())\n    {\n        if (empty($params['PhoneNumbers'])) {\n            throw new \\InvalidArgumentException('缺失手机号$params[&quot;PhoneNumbers&quot;]');\n        }\n        if (empty($params['SignName'])) {\n            throw new \\InvalidArgumentException('缺失短信签名$params[&quot;SignName&quot;]');\n        }\n        if (empty($params['TemplateCode'])) {\n            throw new \\InvalidArgumentException('缺失模版CODE$params[&quot;TemplateCode&quot;]');\n        }\n\n        // fixme 必填: 请参阅 https://ak-console.aliyun.com/ 取得您的AK信息\n        $accessKeyId     = $this-&gt;accessKeyId;\n        $accessKeySecret = $this-&gt;accessKeySecret;\n\n        // *** 需用户填写部分结束, 以下代码若无必要无需更改 ***\n        if ( ! empty($params[&quot;TemplateParam&quot;]) &amp;&amp; is_array($params[&quot;TemplateParam&quot;])) {\n            $params[&quot;TemplateParam&quot;] = json_encode($params[&quot;TemplateParam&quot;]);\n        }\n\n        try {\n            $content = $this-&gt;request($accessKeyId, $accessKeySecret, &quot;dysmsapi.aliyuncs.com&quot;,\n                array_merge($params, array(\n                    &quot;RegionId&quot; =&gt; &quot;cn-hangzhou&quot;,\n                    &quot;Action&quot;   =&gt; &quot;SendSms&quot;,\n                    &quot;Version&quot;  =&gt; &quot;2017-05-25&quot;,\n                )));\n            if ($content-&gt;Code == 'OK') {\n                return true;\n            } else {\n                throw new \\InvalidArgumentException($content-&gt;Message);\n            };\n        } catch (\\Exception $e) {\n            throw new \\InvalidArgumentException($e-&gt;getMessage());\n        }\n    }\n\n    /**\n     * 生成签名并发起请求\n     *\n     * @param $accessKeyId     string AccessKeyId (https://ak-console.aliyun.com/)\n     * @param $accessKeySecret string AccessKeySecret\n     * @param $domain          string API接口所在域名\n     * @param $params          array API具体参数\n     *\n     * @return bool|\\stdClass 返回API接口调用结果，当发生错误时返回false\n     */\n    public function request($accessKeyId, $accessKeySecret, $domain, $params)\n    {\n        $apiParams = array_merge(array(\n            &quot;SignatureMethod&quot;  =&gt; &quot;HMAC-SHA1&quot;,\n            &quot;SignatureNonce&quot;   =&gt; uniqid(mt_rand(0, 0xffff), true),\n            &quot;SignatureVersion&quot; =&gt; &quot;1.0&quot;,\n            &quot;AccessKeyId&quot;      =&gt; $accessKeyId,\n            &quot;Timestamp&quot;        =&gt; gmdate(&quot;Y-m-d\\TH:i:s\\Z&quot;),\n            &quot;Format&quot;           =&gt; &quot;JSON&quot;,\n        ), $params);\n        ksort($apiParams);\n\n        $sortedQueryStringTmp = &quot;&quot;;\n        foreach ($apiParams as $key =&gt; $value) {\n            $sortedQueryStringTmp .= &quot;&amp;&quot;.$this-&gt;encode($key).&quot;=&quot;.$this-&gt;encode($value);\n        }\n\n        $stringToSign = &quot;GET&amp;%2F&amp;&quot;.$this-&gt;encode(substr($sortedQueryStringTmp, 1));\n\n        $sign = base64_encode(hash_hmac(&quot;sha1&quot;, $stringToSign, $accessKeySecret.&quot;&amp;&quot;, true));\n\n        $signature = $this-&gt;encode($sign);\n\n        $url = &quot;http://{$domain}/?Signature={$signature}{$sortedQueryStringTmp}&quot;;\n\n        try {\n            $content = $this-&gt;fetchContent($url);\n\n            return json_decode($content);\n        } catch (\\Exception $e) {\n            throw new \\Exception($e-&gt;getMessage());\n        }\n    }\n\n    private function encode($str)\n    {\n        $res = urlencode($str);\n        $res = preg_replace(&quot;/\\+/&quot;, &quot;%20&quot;, $res);\n        $res = preg_replace(&quot;/\\*/&quot;, &quot;%2A&quot;, $res);\n        $res = preg_replace(&quot;/%7E/&quot;, &quot;~&quot;, $res);\n\n        return $res;\n    }\n\n    private function fetchContent($url)\n    {\n        if (function_exists(&quot;curl_init&quot;)) {\n            $ch = curl_init();\n            curl_setopt($ch, CURLOPT_URL, $url);\n            curl_setopt($ch, CURLOPT_TIMEOUT, 5);\n            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n            curl_setopt($ch, CURLOPT_HTTPHEADER, array(\n                &quot;x-sdk-client&quot; =&gt; &quot;php/2.0.0&quot;\n            ));\n            $rtn = curl_exec($ch);\n\n            if ($rtn === false) {\n                trigger_error(&quot;[CURL_&quot;.curl_errno($ch).&quot;]: &quot;.curl_error($ch), E_USER_ERROR);\n            }\n            curl_close($ch);\n\n            return $rtn;\n        }\n\n        $context = stream_context_create(array(\n            &quot;http&quot; =&gt; array(\n                &quot;method&quot; =&gt; &quot;GET&quot;,\n                &quot;header&quot; =&gt; array(&quot;x-sdk-client: php/2.0.0&quot;),\n            )\n        ));\n\n        return file_get_contents($url, false, $context);\n    }\n\n}\n</code></pre><p id=\"u8983e704\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h2 id=\"eBBol\"><span class=\"ne-text\">发送服务代码</span></h2><pre data-language=\"php\" id=\"u5lGj\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-10-08\n * Time: 11:01:34\n * Info:\n */\n\nnamespace app\\common\\service;\n\nuse support\\lib\\AliSms;\n\nclass SmsCodeService extends AliSms\n{\n\n    private $access_key = '';\n\n    private $access_secret = '';\n\n    //签名\n    const SIGN_NAME = '';\n\n    //短信模板代码\n    const TEMPLATE_SMS_CODE = '';\n\n    public function __construct()\n    {\n        parent::__construct($this-&gt;access_key, $this-&gt;access_secret);\n    }\n\n    public function sendSmsCode(array $param)\n    {\n        $query = [\n            'SignName'     =&gt; self::SIGN_NAME,\n            'TemplateCode' =&gt; self::TEMPLATE_SMS_CODE\n        ];\n\n        $query = array_merge($query, $param);\n\n        return $this-&gt;sendSms($query);\n    }\n\n}\n</code></pre><h2 id=\"q8ueT\"><span class=\"ne-text\">调用方式</span></h2><pre data-language=\"php\" id=\"IBM9V\" class=\"ne-codeblock language-php\"><code>use app\\common\\service\\SmsCodeService;\n\n\npublic function send_sms()\n    {\n\n        $phone = request()-&gt;get('phone');\n        if (empty($phone)) {\n            return $this-&gt;error('手机号不能为空');\n        }\n        if (cmf_check_mobile($phone)) {\n            $sms_code  = rand(100000, 999999);\n            $param     = [\n                'PhoneNumbers'  =&gt; $phone,\n                'TemplateParam' =&gt; json_encode(['code' =&gt; $sms_code])\n            ];\n            $smsServie = new SmsCodeService();\n            try {\n                $result = $smsServie-&gt;sendSmsCode($param);\n                if ( ! $result) {\n                    return $this-&gt;error('发送失败');\n                }\n\n                return $this-&gt;success('发送成功');\n\n            } catch (\\Exception $e) {\n                return $this-&gt;error($e-&gt;getMessage());\n            }\n        } else {\n            return $this-&gt;error(&quot;请输入正确手机号&quot;);\n        }\n\n    }\n\n</code></pre></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />简单的阿里云短信发送类库\n\n<a name=\"G109g\"></a>\n## 类库代码\n```php\n<?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-10-08\n * Time: 10:58:58\n * Info: 阿里云短信发送插件\n */\n\nnamespace support\\lib;\n\nclass AliSms\n{\n\n    protected $error;\n\n    protected $accessKeyId;\n\n    protected $accessKeySecret;\n\n    public function __construct($accessKeyId, $accessKeySecret)\n    {\n        $this->accessKeyId     = ! empty($accessKeyId) ? $accessKeyId : '';\n        $this->accessKeySecret = ! empty($accessKeySecret) ? $accessKeySecret : '';\n    }\n\n    public function getError()\n    {\n        return $this->error;\n    }\n\n    /**\n     * 发送短信\n     */\n    public function sendSms($params = array())\n    {\n        if (empty($params['PhoneNumbers'])) {\n            throw new \\InvalidArgumentException('缺失手机号$params[\"PhoneNumbers\"]');\n        }\n        if (empty($params['SignName'])) {\n            throw new \\InvalidArgumentException('缺失短信签名$params[\"SignName\"]');\n        }\n        if (empty($params['TemplateCode'])) {\n            throw new \\InvalidArgumentException('缺失模版CODE$params[\"TemplateCode\"]');\n        }\n\n        // fixme 必填: 请参阅 https://ak-console.aliyun.com/ 取得您的AK信息\n        $accessKeyId     = $this->accessKeyId;\n        $accessKeySecret = $this->accessKeySecret;\n\n        // *** 需用户填写部分结束, 以下代码若无必要无需更改 ***\n        if ( ! empty($params[\"TemplateParam\"]) && is_array($params[\"TemplateParam\"])) {\n            $params[\"TemplateParam\"] = json_encode($params[\"TemplateParam\"]);\n        }\n\n        try {\n            $content = $this->request($accessKeyId, $accessKeySecret, \"dysmsapi.aliyuncs.com\",\n                array_merge($params, array(\n                    \"RegionId\" => \"cn-hangzhou\",\n                    \"Action\"   => \"SendSms\",\n                    \"Version\"  => \"2017-05-25\",\n                )));\n            if ($content->Code == 'OK') {\n                return true;\n            } else {\n                throw new \\InvalidArgumentException($content->Message);\n            };\n        } catch (\\Exception $e) {\n            throw new \\InvalidArgumentException($e->getMessage());\n        }\n    }\n\n    /**\n     * 生成签名并发起请求\n     *\n     * @param $accessKeyId     string AccessKeyId (https://ak-console.aliyun.com/)\n     * @param $accessKeySecret string AccessKeySecret\n     * @param $domain          string API接口所在域名\n     * @param $params          array API具体参数\n     *\n     * @return bool|\\stdClass 返回API接口调用结果，当发生错误时返回false\n     */\n    public function request($accessKeyId, $accessKeySecret, $domain, $params)\n    {\n        $apiParams = array_merge(array(\n            \"SignatureMethod\"  => \"HMAC-SHA1\",\n            \"SignatureNonce\"   => uniqid(mt_rand(0, 0xffff), true),\n            \"SignatureVersion\" => \"1.0\",\n            \"AccessKeyId\"      => $accessKeyId,\n            \"Timestamp\"        => gmdate(\"Y-m-d\\TH:i:s\\Z\"),\n            \"Format\"           => \"JSON\",\n        ), $params);\n        ksort($apiParams);\n\n        $sortedQueryStringTmp = \"\";\n        foreach ($apiParams as $key => $value) {\n            $sortedQueryStringTmp .= \"&\".$this->encode($key).\"=\".$this->encode($value);\n        }\n\n        $stringToSign = \"GET&%2F&\".$this->encode(substr($sortedQueryStringTmp, 1));\n\n        $sign = base64_encode(hash_hmac(\"sha1\", $stringToSign, $accessKeySecret.\"&\", true));\n\n        $signature = $this->encode($sign);\n\n        $url = \"http://{$domain}/?Signature={$signature}{$sortedQueryStringTmp}\";\n\n        try {\n            $content = $this->fetchContent($url);\n\n            return json_decode($content);\n        } catch (\\Exception $e) {\n            throw new \\Exception($e->getMessage());\n        }\n    }\n\n    private function encode($str)\n    {\n        $res = urlencode($str);\n        $res = preg_replace(\"/\\+/\", \"%20\", $res);\n        $res = preg_replace(\"/\\*/\", \"%2A\", $res);\n        $res = preg_replace(\"/%7E/\", \"~\", $res);\n\n        return $res;\n    }\n\n    private function fetchContent($url)\n    {\n        if (function_exists(\"curl_init\")) {\n            $ch = curl_init();\n            curl_setopt($ch, CURLOPT_URL, $url);\n            curl_setopt($ch, CURLOPT_TIMEOUT, 5);\n            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n            curl_setopt($ch, CURLOPT_HTTPHEADER, array(\n                \"x-sdk-client\" => \"php/2.0.0\"\n            ));\n            $rtn = curl_exec($ch);\n\n            if ($rtn === false) {\n                trigger_error(\"[CURL_\".curl_errno($ch).\"]: \".curl_error($ch), E_USER_ERROR);\n            }\n            curl_close($ch);\n\n            return $rtn;\n        }\n\n        $context = stream_context_create(array(\n            \"http\" => array(\n                \"method\" => \"GET\",\n                \"header\" => array(\"x-sdk-client: php/2.0.0\"),\n            )\n        ));\n\n        return file_get_contents($url, false, $context);\n    }\n\n}\n\n```\n\n<a name=\"eBBol\"></a>\n## 发送服务代码\n```php\n<?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-10-08\n * Time: 11:01:34\n * Info:\n */\n\nnamespace app\\common\\service;\n\nuse support\\lib\\AliSms;\n\nclass SmsCodeService extends AliSms\n{\n\n    private $access_key = '';\n\n    private $access_secret = '';\n\n    //签名\n    const SIGN_NAME = '';\n\n    //短信模板代码\n    const TEMPLATE_SMS_CODE = '';\n\n    public function __construct()\n    {\n        parent::__construct($this->access_key, $this->access_secret);\n    }\n\n    public function sendSmsCode(array $param)\n    {\n        $query = [\n            'SignName'     => self::SIGN_NAME,\n            'TemplateCode' => self::TEMPLATE_SMS_CODE\n        ];\n\n        $query = array_merge($query, $param);\n\n        return $this->sendSms($query);\n    }\n\n}\n\n```\n<a name=\"q8ueT\"></a>\n## 调用方式\n```php\nuse app\\common\\service\\SmsCodeService;\n\n\npublic function send_sms()\n    {\n\n        $phone = request()->get('phone');\n        if (empty($phone)) {\n            return $this->error('手机号不能为空');\n        }\n        if (cmf_check_mobile($phone)) {\n            $sms_code  = rand(100000, 999999);\n            $param     = [\n                'PhoneNumbers'  => $phone,\n                'TemplateParam' => json_encode(['code' => $sms_code])\n            ];\n            $smsServie = new SmsCodeService();\n            try {\n                $result = $smsServie->sendSmsCode($param);\n                if ( ! $result) {\n                    return $this->error('发送失败');\n                }\n\n                return $this->success('发送成功');\n\n            } catch (\\Exception $e) {\n                return $this->error($e->getMessage());\n            }\n        } else {\n            return $this->error(\"请输入正确手机号\");\n        }\n\n    }\n\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />简单的阿里云短信发送类库</span></p><p id=\"u489dfdf2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h2 id=\"G109g\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">类库代码</span></h2><pre data-language=\"php\" id=\"OSJBu\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-10-08\n * Time: 10:58:58\n * Info: 阿里云短信发送插件\n */\n\nnamespace support\\lib;\n\nclass AliSms\n{\n\n    protected $error;\n\n    protected $accessKeyId;\n\n    protected $accessKeySecret;\n\n    public function __construct($accessKeyId, $accessKeySecret)\n    {\n        $this-&gt;accessKeyId     = ! empty($accessKeyId) ? $accessKeyId : '';\n        $this-&gt;accessKeySecret = ! empty($accessKeySecret) ? $accessKeySecret : '';\n    }\n\n    public function getError()\n    {\n        return $this-&gt;error;\n    }\n\n    /**\n     * 发送短信\n     */\n    public function sendSms($params = array())\n    {\n        if (empty($params['PhoneNumbers'])) {\n            throw new \\InvalidArgumentException('缺失手机号$params[&quot;PhoneNumbers&quot;]');\n        }\n        if (empty($params['SignName'])) {\n            throw new \\InvalidArgumentException('缺失短信签名$params[&quot;SignName&quot;]');\n        }\n        if (empty($params['TemplateCode'])) {\n            throw new \\InvalidArgumentException('缺失模版CODE$params[&quot;TemplateCode&quot;]');\n        }\n\n        // fixme 必填: 请参阅 https://ak-console.aliyun.com/ 取得您的AK信息\n        $accessKeyId     = $this-&gt;accessKeyId;\n        $accessKeySecret = $this-&gt;accessKeySecret;\n\n        // *** 需用户填写部分结束, 以下代码若无必要无需更改 ***\n        if ( ! empty($params[&quot;TemplateParam&quot;]) &amp;&amp; is_array($params[&quot;TemplateParam&quot;])) {\n            $params[&quot;TemplateParam&quot;] = json_encode($params[&quot;TemplateParam&quot;]);\n        }\n\n        try {\n            $content = $this-&gt;request($accessKeyId, $accessKeySecret, &quot;dysmsapi.aliyuncs.com&quot;,\n                array_merge($params, array(\n                    &quot;RegionId&quot; =&gt; &quot;cn-hangzhou&quot;,\n                    &quot;Action&quot;   =&gt; &quot;SendSms&quot;,\n                    &quot;Version&quot;  =&gt; &quot;2017-05-25&quot;,\n                )));\n            if ($content-&gt;Code == 'OK') {\n                return true;\n            } else {\n                throw new \\InvalidArgumentException($content-&gt;Message);\n            };\n        } catch (\\Exception $e) {\n            throw new \\InvalidArgumentException($e-&gt;getMessage());\n        }\n    }\n\n    /**\n     * 生成签名并发起请求\n     *\n     * @param $accessKeyId     string AccessKeyId (https://ak-console.aliyun.com/)\n     * @param $accessKeySecret string AccessKeySecret\n     * @param $domain          string API接口所在域名\n     * @param $params          array API具体参数\n     *\n     * @return bool|\\stdClass 返回API接口调用结果，当发生错误时返回false\n     */\n    public function request($accessKeyId, $accessKeySecret, $domain, $params)\n    {\n        $apiParams = array_merge(array(\n            &quot;SignatureMethod&quot;  =&gt; &quot;HMAC-SHA1&quot;,\n            &quot;SignatureNonce&quot;   =&gt; uniqid(mt_rand(0, 0xffff), true),\n            &quot;SignatureVersion&quot; =&gt; &quot;1.0&quot;,\n            &quot;AccessKeyId&quot;      =&gt; $accessKeyId,\n            &quot;Timestamp&quot;        =&gt; gmdate(&quot;Y-m-d\\TH:i:s\\Z&quot;),\n            &quot;Format&quot;           =&gt; &quot;JSON&quot;,\n        ), $params);\n        ksort($apiParams);\n\n        $sortedQueryStringTmp = &quot;&quot;;\n        foreach ($apiParams as $key =&gt; $value) {\n            $sortedQueryStringTmp .= &quot;&amp;&quot;.$this-&gt;encode($key).&quot;=&quot;.$this-&gt;encode($value);\n        }\n\n        $stringToSign = &quot;GET&amp;%2F&amp;&quot;.$this-&gt;encode(substr($sortedQueryStringTmp, 1));\n\n        $sign = base64_encode(hash_hmac(&quot;sha1&quot;, $stringToSign, $accessKeySecret.&quot;&amp;&quot;, true));\n\n        $signature = $this-&gt;encode($sign);\n\n        $url = &quot;http://{$domain}/?Signature={$signature}{$sortedQueryStringTmp}&quot;;\n\n        try {\n            $content = $this-&gt;fetchContent($url);\n\n            return json_decode($content);\n        } catch (\\Exception $e) {\n            throw new \\Exception($e-&gt;getMessage());\n        }\n    }\n\n    private function encode($str)\n    {\n        $res = urlencode($str);\n        $res = preg_replace(&quot;/\\+/&quot;, &quot;%20&quot;, $res);\n        $res = preg_replace(&quot;/\\*/&quot;, &quot;%2A&quot;, $res);\n        $res = preg_replace(&quot;/%7E/&quot;, &quot;~&quot;, $res);\n\n        return $res;\n    }\n\n    private function fetchContent($url)\n    {\n        if (function_exists(&quot;curl_init&quot;)) {\n            $ch = curl_init();\n            curl_setopt($ch, CURLOPT_URL, $url);\n            curl_setopt($ch, CURLOPT_TIMEOUT, 5);\n            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n            curl_setopt($ch, CURLOPT_HTTPHEADER, array(\n                &quot;x-sdk-client&quot; =&gt; &quot;php/2.0.0&quot;\n            ));\n            $rtn = curl_exec($ch);\n\n            if ($rtn === false) {\n                trigger_error(&quot;[CURL_&quot;.curl_errno($ch).&quot;]: &quot;.curl_error($ch), E_USER_ERROR);\n            }\n            curl_close($ch);\n\n            return $rtn;\n        }\n\n        $context = stream_context_create(array(\n            &quot;http&quot; =&gt; array(\n                &quot;method&quot; =&gt; &quot;GET&quot;,\n                &quot;header&quot; =&gt; array(&quot;x-sdk-client: php/2.0.0&quot;),\n            )\n        ));\n\n        return file_get_contents($url, false, $context);\n    }\n\n}\n</code></pre><p id=\"u8983e704\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h2 id=\"eBBol\"><span class=\"ne-text\">发送服务代码</span></h2><pre data-language=\"php\" id=\"u5lGj\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-10-08\n * Time: 11:01:34\n * Info:\n */\n\nnamespace app\\common\\service;\n\nuse support\\lib\\AliSms;\n\nclass SmsCodeService extends AliSms\n{\n\n    private $access_key = '';\n\n    private $access_secret = '';\n\n    //签名\n    const SIGN_NAME = '';\n\n    //短信模板代码\n    const TEMPLATE_SMS_CODE = '';\n\n    public function __construct()\n    {\n        parent::__construct($this-&gt;access_key, $this-&gt;access_secret);\n    }\n\n    public function sendSmsCode(array $param)\n    {\n        $query = [\n            'SignName'     =&gt; self::SIGN_NAME,\n            'TemplateCode' =&gt; self::TEMPLATE_SMS_CODE\n        ];\n\n        $query = array_merge($query, $param);\n\n        return $this-&gt;sendSms($query);\n    }\n\n}\n</code></pre><h2 id=\"q8ueT\"><span class=\"ne-text\">调用方式</span></h2><pre data-language=\"php\" id=\"IBM9V\" class=\"ne-codeblock language-php\"><code>use app\\common\\service\\SmsCodeService;\n\n\npublic function send_sms()\n    {\n\n        $phone = request()-&gt;get('phone');\n        if (empty($phone)) {\n            return $this-&gt;error('手机号不能为空');\n        }\n        if (cmf_check_mobile($phone)) {\n            $sms_code  = rand(100000, 999999);\n            $param     = [\n                'PhoneNumbers'  =&gt; $phone,\n                'TemplateParam' =&gt; json_encode(['code' =&gt; $sms_code])\n            ];\n            $smsServie = new SmsCodeService();\n            try {\n                $result = $smsServie-&gt;sendSmsCode($param);\n                if ( ! $result) {\n                    return $this-&gt;error('发送失败');\n                }\n\n                return $this-&gt;success('发送成功');\n\n            } catch (\\Exception $e) {\n                return $this-&gt;error($e-&gt;getMessage());\n            }\n        } else {\n            return $this-&gt;error(&quot;请输入正确手机号&quot;);\n        }\n\n    }\n\n</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br />简单的阿里云短信发送类库</span></p><p data-lake-id=\"u489dfdf2\" id=\"u489dfdf2\"><span data-lake-id=\"u589decf2\" id=\"u589decf2\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><h2 data-lake-id=\"G109g\" id=\"G109g\"><span data-lake-id=\"ue03eb301\" id=\"ue03eb301\" style=\"color: rgb(51, 51, 51)\">类库代码</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20User%3A%20%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20*%20Date%3A%202023-10-08%5Cn%20*%20Time%3A%2010%3A58%3A58%5Cn%20*%20Info%3A%20%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1%E5%8F%91%E9%80%81%E6%8F%92%E4%BB%B6%5Cn%20*%2F%5Cn%5Cnnamespace%20support%5C%5Clib%3B%5Cn%5Cnclass%20AliSms%5Cn%7B%5Cn%5Cn%20%20%20%20protected%20%24error%3B%5Cn%5Cn%20%20%20%20protected%20%24accessKeyId%3B%5Cn%5Cn%20%20%20%20protected%20%24accessKeySecret%3B%5Cn%5Cn%20%20%20%20public%20function%20__construct(%24accessKeyId%2C%20%24accessKeySecret)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24this-%3EaccessKeyId%20%20%20%20%20%3D%20!%20empty(%24accessKeyId)%20%3F%20%24accessKeyId%20%3A%20''%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3EaccessKeySecret%20%3D%20!%20empty(%24accessKeySecret)%20%3F%20%24accessKeySecret%20%3A%20''%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20function%20getError()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%24this-%3Eerror%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20sendSms(%24params%20%3D%20array())%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(empty(%24params%5B'PhoneNumbers'%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20%5C%5CInvalidArgumentException('%E7%BC%BA%E5%A4%B1%E6%89%8B%E6%9C%BA%E5%8F%B7%24params%5B%5C%22PhoneNumbers%5C%22%5D')%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20(empty(%24params%5B'SignName'%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20%5C%5CInvalidArgumentException('%E7%BC%BA%E5%A4%B1%E7%9F%AD%E4%BF%A1%E7%AD%BE%E5%90%8D%24params%5B%5C%22SignName%5C%22%5D')%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20(empty(%24params%5B'TemplateCode'%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20%5C%5CInvalidArgumentException('%E7%BC%BA%E5%A4%B1%E6%A8%A1%E7%89%88CODE%24params%5B%5C%22TemplateCode%5C%22%5D')%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20fixme%20%E5%BF%85%E5%A1%AB%3A%20%E8%AF%B7%E5%8F%82%E9%98%85%20https%3A%2F%2Fak-console.aliyun.com%2F%20%E5%8F%96%E5%BE%97%E6%82%A8%E7%9A%84AK%E4%BF%A1%E6%81%AF%5Cn%20%20%20%20%20%20%20%20%24accessKeyId%20%20%20%20%20%3D%20%24this-%3EaccessKeyId%3B%5Cn%20%20%20%20%20%20%20%20%24accessKeySecret%20%3D%20%24this-%3EaccessKeySecret%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20***%20%E9%9C%80%E7%94%A8%E6%88%B7%E5%A1%AB%E5%86%99%E9%83%A8%E5%88%86%E7%BB%93%E6%9D%9F%2C%20%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%8B%A5%E6%97%A0%E5%BF%85%E8%A6%81%E6%97%A0%E9%9C%80%E6%9B%B4%E6%94%B9%20***%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20empty(%24params%5B%5C%22TemplateParam%5C%22%5D)%20%26%26%20is_array(%24params%5B%5C%22TemplateParam%5C%22%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24params%5B%5C%22TemplateParam%5C%22%5D%20%3D%20json_encode(%24params%5B%5C%22TemplateParam%5C%22%5D)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24content%20%3D%20%24this-%3Erequest(%24accessKeyId%2C%20%24accessKeySecret%2C%20%5C%22dysmsapi.aliyuncs.com%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20array_merge(%24params%2C%20array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22RegionId%5C%22%20%3D%3E%20%5C%22cn-hangzhou%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Action%5C%22%20%20%20%3D%3E%20%5C%22SendSms%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Version%5C%22%20%20%3D%3E%20%5C%222017-05-25%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24content-%3ECode%20%3D%3D%20'OK')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20%5C%5CInvalidArgumentException(%24content-%3EMessage)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%5Cn%20%20%20%20%20%20%20%20%7D%20catch%20(%5C%5CException%20%24e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20%5C%5CInvalidArgumentException(%24e-%3EgetMessage())%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E7%94%9F%E6%88%90%E7%AD%BE%E5%90%8D%E5%B9%B6%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20%24accessKeyId%20%20%20%20%20string%20AccessKeyId%20(https%3A%2F%2Fak-console.aliyun.com%2F)%5Cn%20%20%20%20%20*%20%40param%20%24accessKeySecret%20string%20AccessKeySecret%5Cn%20%20%20%20%20*%20%40param%20%24domain%20%20%20%20%20%20%20%20%20%20string%20API%E6%8E%A5%E5%8F%A3%E6%89%80%E5%9C%A8%E5%9F%9F%E5%90%8D%5Cn%20%20%20%20%20*%20%40param%20%24params%20%20%20%20%20%20%20%20%20%20array%20API%E5%85%B7%E4%BD%93%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20bool%7C%5C%5CstdClass%20%E8%BF%94%E5%9B%9EAPI%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%BD%93%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF%E6%97%B6%E8%BF%94%E5%9B%9Efalse%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20request(%24accessKeyId%2C%20%24accessKeySecret%2C%20%24domain%2C%20%24params)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24apiParams%20%3D%20array_merge(array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22SignatureMethod%5C%22%20%20%3D%3E%20%5C%22HMAC-SHA1%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22SignatureNonce%5C%22%20%20%20%3D%3E%20uniqid(mt_rand(0%2C%200xffff)%2C%20true)%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22SignatureVersion%5C%22%20%3D%3E%20%5C%221.0%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22AccessKeyId%5C%22%20%20%20%20%20%20%3D%3E%20%24accessKeyId%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Timestamp%5C%22%20%20%20%20%20%20%20%20%3D%3E%20gmdate(%5C%22Y-m-d%5C%5CTH%3Ai%3As%5C%5CZ%5C%22)%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Format%5C%22%20%20%20%20%20%20%20%20%20%20%20%3D%3E%20%5C%22JSON%5C%22%2C%5Cn%20%20%20%20%20%20%20%20)%2C%20%24params)%3B%5Cn%20%20%20%20%20%20%20%20ksort(%24apiParams)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24sortedQueryStringTmp%20%3D%20%5C%22%5C%22%3B%5Cn%20%20%20%20%20%20%20%20foreach%20(%24apiParams%20as%20%24key%20%3D%3E%20%24value)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24sortedQueryStringTmp%20.%3D%20%5C%22%26%5C%22.%24this-%3Eencode(%24key).%5C%22%3D%5C%22.%24this-%3Eencode(%24value)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%24stringToSign%20%3D%20%5C%22GET%26%252F%26%5C%22.%24this-%3Eencode(substr(%24sortedQueryStringTmp%2C%201))%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24sign%20%3D%20base64_encode(hash_hmac(%5C%22sha1%5C%22%2C%20%24stringToSign%2C%20%24accessKeySecret.%5C%22%26%5C%22%2C%20true))%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24signature%20%3D%20%24this-%3Eencode(%24sign)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24url%20%3D%20%5C%22http%3A%2F%2F%7B%24domain%7D%2F%3FSignature%3D%7B%24signature%7D%7B%24sortedQueryStringTmp%7D%5C%22%3B%5Cn%5Cn%20%20%20%20%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24content%20%3D%20%24this-%3EfetchContent(%24url)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20json_decode(%24content)%3B%5Cn%20%20%20%20%20%20%20%20%7D%20catch%20(%5C%5CException%20%24e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20%5C%5CException(%24e-%3EgetMessage())%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20private%20function%20encode(%24str)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24res%20%3D%20urlencode(%24str)%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%3D%20preg_replace(%5C%22%2F%5C%5C%2B%2F%5C%22%2C%20%5C%22%2520%5C%22%2C%20%24res)%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%3D%20preg_replace(%5C%22%2F%5C%5C*%2F%5C%22%2C%20%5C%22%252A%5C%22%2C%20%24res)%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%3D%20preg_replace(%5C%22%2F%257E%2F%5C%22%2C%20%5C%22~%5C%22%2C%20%24res)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24res%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20private%20function%20fetchContent(%24url)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(function_exists(%5C%22curl_init%5C%22))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24ch%20%3D%20curl_init()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20curl_setopt(%24ch%2C%20CURLOPT_URL%2C%20%24url)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20curl_setopt(%24ch%2C%20CURLOPT_TIMEOUT%2C%205)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20curl_setopt(%24ch%2C%20CURLOPT_RETURNTRANSFER%2C%201)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20curl_setopt(%24ch%2C%20CURLOPT_HTTPHEADER%2C%20array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22x-sdk-client%5C%22%20%3D%3E%20%5C%22php%2F2.0.0%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24rtn%20%3D%20curl_exec(%24ch)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(%24rtn%20%3D%3D%3D%20false)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20trigger_error(%5C%22%5BCURL_%5C%22.curl_errno(%24ch).%5C%22%5D%3A%20%5C%22.curl_error(%24ch)%2C%20E_USER_ERROR)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20curl_close(%24ch)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24rtn%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%24context%20%3D%20stream_context_create(array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22http%5C%22%20%3D%3E%20array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22method%5C%22%20%3D%3E%20%5C%22GET%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22header%5C%22%20%3D%3E%20array(%5C%22x-sdk-client%3A%20php%2F2.0.0%5C%22)%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20)%5Cn%20%20%20%20%20%20%20%20))%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20file_get_contents(%24url%2C%20false%2C%20%24context)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OSJBu%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8983e704\" id=\"u8983e704\"><span data-lake-id=\"ucf3f8ccc\" id=\"ucf3f8ccc\" class=\"lake-fontsize-11\">​</span><br></p><h2 data-lake-id=\"eBBol\" id=\"eBBol\"><span data-lake-id=\"uae0f9221\" id=\"uae0f9221\">发送服务代码</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20User%3A%20%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20*%20Date%3A%202023-10-08%5Cn%20*%20Time%3A%2011%3A01%3A34%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20app%5C%5Ccommon%5C%5Cservice%3B%5Cn%5Cnuse%20support%5C%5Clib%5C%5CAliSms%3B%5Cn%5Cnclass%20SmsCodeService%20extends%20AliSms%5Cn%7B%5Cn%5Cn%20%20%20%20private%20%24access_key%20%3D%20''%3B%5Cn%5Cn%20%20%20%20private%20%24access_secret%20%3D%20''%3B%5Cn%5Cn%20%20%20%20%2F%2F%E7%AD%BE%E5%90%8D%5Cn%20%20%20%20const%20SIGN_NAME%20%3D%20''%3B%5Cn%5Cn%20%20%20%20%2F%2F%E7%9F%AD%E4%BF%A1%E6%A8%A1%E6%9D%BF%E4%BB%A3%E7%A0%81%5Cn%20%20%20%20const%20TEMPLATE_SMS_CODE%20%3D%20''%3B%5Cn%5Cn%20%20%20%20public%20function%20__construct()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20parent%3A%3A__construct(%24this-%3Eaccess_key%2C%20%24this-%3Eaccess_secret)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20function%20sendSmsCode(array%20%24param)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24query%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'SignName'%20%20%20%20%20%3D%3E%20self%3A%3ASIGN_NAME%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'TemplateCode'%20%3D%3E%20self%3A%3ATEMPLATE_SMS_CODE%5Cn%20%20%20%20%20%20%20%20%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24query%20%3D%20array_merge(%24query%2C%20%24param)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24this-%3EsendSms(%24query)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22u5lGj%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"q8ueT\" id=\"q8ueT\"><span data-lake-id=\"ud14187ab\" id=\"ud14187ab\">调用方式</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20app%5C%5Ccommon%5C%5Cservice%5C%5CSmsCodeService%3B%5Cn%5Cn%5Cnpublic%20function%20send_sms()%5Cn%20%20%20%20%7B%5Cn%5Cn%20%20%20%20%20%20%20%20%24phone%20%3D%20request()-%3Eget('phone')%3B%5Cn%20%20%20%20%20%20%20%20if%20(empty(%24phone))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eerror('%E6%89%8B%E6%9C%BA%E5%8F%B7%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA')%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20if%20(cmf_check_mobile(%24phone))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24sms_code%20%20%3D%20rand(100000%2C%20999999)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24param%20%20%20%20%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'PhoneNumbers'%20%20%3D%3E%20%24phone%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'TemplateParam'%20%3D%3E%20json_encode(%5B'code'%20%3D%3E%20%24sms_code%5D)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24smsServie%20%3D%20new%20SmsCodeService()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24result%20%3D%20%24smsServie-%3EsendSmsCode(%24param)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%20!%20%24result)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eerror('%E5%8F%91%E9%80%81%E5%A4%B1%E8%B4%A5')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Esuccess('%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F')%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(%5C%5CException%20%24e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eerror(%24e-%3EgetMessage())%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eerror(%5C%22%E8%AF%B7%E8%BE%93%E5%85%A5%E6%AD%A3%E7%A1%AE%E6%89%8B%E6%9C%BA%E5%8F%B7%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%7D%5Cn%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IBM9V%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 3,
    "hits": 3,
    "comments_count": 0,
    "word_count": 675,
    "created_at": "2023-10-09T01:16:23.000Z",
    "updated_at": "2023-10-09T01:19:50.000Z",
    "content_updated_at": "2023-10-09T01:19:50.000Z",
    "published_at": "2023-10-09T01:19:50.000Z",
    "first_published_at": "2023-10-09T01:19:49.591Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2033810564,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 140834376,
    "type": "Doc",
    "slug": "kvbkvgbt61nwkuzf",
    "title": "php redis数据分页的简单操作代码",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:目前使用的是thinkphp，所以基本引入类库的方法使用的是tp的引入方...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u92134be2\" class=\"ne-p\"><span class=\"ne-text\">目前使用的是thinkphp，所以基本引入类库的方法使用的是tp的引入方法，其他引入方式一样</span></p></div><h2 id=\"sxHw9\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"><br />php类库：</span></h2><pre data-language=\"php\" id=\"VU4Te\" class=\"ne-codeblock language-php\"><code>&lt;?php\n\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-09-23\n * Time: 14:08:19\n * Info:\n */\n\nnamespace lib;\n\nuse Redis;\n\nclass RedisPage\n{\n\n    protected $_redis;\n\n    protected $_redis_ip;\n\n    protected $_redis_port;\n\n    protected $_redis_db;\n\n    protected $_hash_prefix;\n\n    protected $_pre_dir;\n\n    /**\n     * RedisPage constructor.\n     * 初始化redis配置\n     */\n    public function __construct($ip = '', $port = 6379, $db = 2, $hash_prefix = 'toushi', $pre_dir = 'test')\n    {\n        $this-&gt;_redis_ip    = $ip ? $ip : '127.0.0.1';\n        $this-&gt;_redis_port  = $port ? $port : 6379;\n        $this-&gt;_redis_db    = $db ? $db : 0;\n        $this-&gt;_hash_prefix = $hash_prefix ? $hash_prefix : '';\n        //实例化redis数据库连接\n        $this-&gt;_redis = new Redis();\n        $this-&gt;_redis-&gt;connect($this-&gt;_redis_ip, $this-&gt;_redis_port);\n        $this-&gt;_redis-&gt;select($this-&gt;_redis_db);\n\n        $this-&gt;_pre_dir = $pre_dir ? $pre_dir.':' : 'test:';\n    }\n\n    /**\n     * @notes   : 设置分页数据至redis数据库\n     * 采用hash table 与 集合 Score字段\n     */\n    public function set_page_info($id, $data)\n    {\n        if ( ! is_numeric($id) || ! is_array($data)) {\n            return false;\n        }\n        $hashName = $this-&gt;_hash_prefix.'_'.$id;\n\n        //设置键值对的过期时间，【秒】\n        //$this-&gt;_redis-&gt;expire($this-&gt;_pre_dir.$hashName, 100);\n        $this-&gt;_redis-&gt;hMSet($this-&gt;_pre_dir.$hashName, $data);\n\n        $this-&gt;_redis-&gt;zAdd($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort', $id, $id);\n\n        return true;\n    }\n\n    /**\n     * 创建单key对应的数据\n     * @return void\n     */\n    public function setKeyData($key, $data)\n    {\n        $preFix = 'toushi';\n        $data   = serialize($data);\n        $res    = $this-&gt;_redis-&gt;set($preFix.$key, $data);\n\n        return $res;\n    }\n\n    /**\n     * 根据key获取对应数据\n     *\n     * @param $key\n     *\n     * @return mixed\n     */\n    public function getKeyData($key)\n    {\n        $preFix = 'toushi';\n        $res    = $this-&gt;_redis-&gt;get($preFix.$key);\n        $res    = unserialize($res);\n\n        return $res;\n    }\n\n    /**\n     * 判断key是否存在\n     *\n     * @param $key\n     *\n     */\n    public function keyIsExist($key)\n    {\n        $preFix = 'toushi';\n        $res    = $this-&gt;_redis-&gt;exists($preFix.$key);\n\n        return $res ? true : false;\n    }\n\n    /**\n     * @notes   :获取分页数据\n     */\n    public function get_page_info($page, $pageSize, $key = [])\n    {\n        if ( ! is_numeric($page) || ! is_numeric($pageSize)) {\n            return false;\n        }\n        $limit_s = ($page - 1) * $pageSize;\n        $limit_e = ($limit_s + $pageSize) - 1;\n        //获取在该区间内所有带 score 的有序集合成员列表\n        //ZREVRANGE 排序【倒叙】\n        $range     = $this-&gt;_redis-&gt;ZREVRANGE($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort', $limit_s, $limit_e);\n        $count     = $this-&gt;_redis-&gt;zCard($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort'); //统计总数\n        $pageCount = ceil($count / $pageSize); //总页数\n\n        $page_data = [];\n        foreach ($range as $item) {\n            if (count($key) &gt; 0) {\n                $page_data[] = $this-&gt;_redis-&gt;hMGet($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_'.$item,\n                    $key); //获取hash table 中所有的集合数据\n            } else {\n                $page_data[] = $this-&gt;_redis-&gt;hGetAll($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_'.$item);\n            }\n        }\n\n        $return_data = [\n            'data'      =&gt; $page_data, // 返回的数据\n            'page'      =&gt; $page, //当前页\n            'pageSize'  =&gt; $pageSize,  //每页的记录数\n            'total'     =&gt; $count, //总条目数\n            'pageCount' =&gt; $pageCount, //总页数\n        ];\n\n        return $return_data;\n\n    }\n\n    /**\n     * @notes   :删除记录\n     */\n    public function del_page_info($id)\n    {\n        if ( ! is_array($id)) {\n            return false;\n        }\n        foreach ($id as $val) {\n            $hashName = $this-&gt;_hash_prefix.'_'.$val;\n            $this-&gt;_redis-&gt;del($this-&gt;_pre_dir.$hashName);\n            $this-&gt;_redis-&gt;zRem($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort'.$val);\n        }\n\n        return true;\n    }\n\n    /**\n     * @notes   : 0:清空当前数据库 -1:清空所有数据库\n     */\n    public function clear_db($db = 0)\n    {\n        if ($db &gt;= 0) {\n            $this-&gt;_redis-&gt;flushDB();\n        } elseif ($db == -1) {\n            $this-&gt;_redis-&gt;flushAll();\n        } else {\n            // 非法数据库参数\n            return false;\n        }\n\n        return true;\n    }\n}\n\n</code></pre><h2 id=\"flolF\"><span class=\"ne-text\">类库使用方法：</span></h2><pre data-language=\"php\" id=\"pqxz3\" class=\"ne-codeblock language-php\"><code>//引入类库：\nuse lib\\RedisPage;\n\n//实例化：\n$TASK_NAME = 'rcjk';\n$REDIS_DB  = 1;\n//获取系统配置文件中redis的配置\n$redis_config      = config('cache.stores.redis');\n$redis_config_host = $redis_config['host'] ?? '';\n$redis_config_port = $redis_config['port'] ?? '';\n//这里获取的系统全局配置，也可以走默认配置\n$redis = new RedisPage($redis_config_host, $redis_config_port, $REDIS_DB, $TASK_NAME, 'toushi_'.$TASK_NAME);\n\n\n$key_name = &quot;test_name&quot;;\n$key = &quot;这是测试存储数据&quot;;\t//这里可以是任意字符【字符串、数组、等】，都会被转为序列化存储\n\n//创建生成单key：\n$redis-&gt;setKeyData($key_name, $key);\n\n\n//获取单个key对应的数据：\n$redis-&gt;getKeyData($key_name);\n\n//插入数组数据到redis:\n$key_id = 1000; \t//这里的key_id设定的是int类型的数据id，如需要其他，请到类库中修改此方法\n$arr =[] ;\n$redis-&gt;set_page_info($key_id, $arr); //插入数据到redis\n\n//获取数据，并进行分页\n$redis-&gt;get_page_info(1, 100); //获取分页数据\n\n//清空当前库中所有缓存数据\n$redis-&gt;clear_db($REDIS_DB);\n</code></pre><p id=\"u308c7d7a\" class=\"ne-p\"><span class=\"ne-text\">目前只是其简单的使用，其他使用方法函数还在研究中...</span></p></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n> 目前使用的是thinkphp，所以基本引入类库的方法使用的是tp的引入方法，其他引入方式一样\n\n<a name=\"sxHw9\"></a>\n## <br />php类库：\n```php\n<?php\n\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-09-23\n * Time: 14:08:19\n * Info:\n */\n\nnamespace lib;\n\nuse Redis;\n\nclass RedisPage\n{\n\n    protected $_redis;\n\n    protected $_redis_ip;\n\n    protected $_redis_port;\n\n    protected $_redis_db;\n\n    protected $_hash_prefix;\n\n    protected $_pre_dir;\n\n    /**\n     * RedisPage constructor.\n     * 初始化redis配置\n     */\n    public function __construct($ip = '', $port = 6379, $db = 2, $hash_prefix = 'toushi', $pre_dir = 'test')\n    {\n        $this->_redis_ip    = $ip ? $ip : '127.0.0.1';\n        $this->_redis_port  = $port ? $port : 6379;\n        $this->_redis_db    = $db ? $db : 0;\n        $this->_hash_prefix = $hash_prefix ? $hash_prefix : '';\n        //实例化redis数据库连接\n        $this->_redis = new Redis();\n        $this->_redis->connect($this->_redis_ip, $this->_redis_port);\n        $this->_redis->select($this->_redis_db);\n\n        $this->_pre_dir = $pre_dir ? $pre_dir.':' : 'test:';\n    }\n\n    /**\n     * @notes   : 设置分页数据至redis数据库\n     * 采用hash table 与 集合 Score字段\n     */\n    public function set_page_info($id, $data)\n    {\n        if ( ! is_numeric($id) || ! is_array($data)) {\n            return false;\n        }\n        $hashName = $this->_hash_prefix.'_'.$id;\n\n        //设置键值对的过期时间，【秒】\n        //$this->_redis->expire($this->_pre_dir.$hashName, 100);\n        $this->_redis->hMSet($this->_pre_dir.$hashName, $data);\n\n        $this->_redis->zAdd($this->_pre_dir.$this->_hash_prefix.'_sort', $id, $id);\n\n        return true;\n    }\n\n    /**\n     * 创建单key对应的数据\n     * @return void\n     */\n    public function setKeyData($key, $data)\n    {\n        $preFix = 'toushi';\n        $data   = serialize($data);\n        $res    = $this->_redis->set($preFix.$key, $data);\n\n        return $res;\n    }\n\n    /**\n     * 根据key获取对应数据\n     *\n     * @param $key\n     *\n     * @return mixed\n     */\n    public function getKeyData($key)\n    {\n        $preFix = 'toushi';\n        $res    = $this->_redis->get($preFix.$key);\n        $res    = unserialize($res);\n\n        return $res;\n    }\n\n    /**\n     * 判断key是否存在\n     *\n     * @param $key\n     *\n     */\n    public function keyIsExist($key)\n    {\n        $preFix = 'toushi';\n        $res    = $this->_redis->exists($preFix.$key);\n\n        return $res ? true : false;\n    }\n\n    /**\n     * @notes   :获取分页数据\n     */\n    public function get_page_info($page, $pageSize, $key = [])\n    {\n        if ( ! is_numeric($page) || ! is_numeric($pageSize)) {\n            return false;\n        }\n        $limit_s = ($page - 1) * $pageSize;\n        $limit_e = ($limit_s + $pageSize) - 1;\n        //获取在该区间内所有带 score 的有序集合成员列表\n        //ZREVRANGE 排序【倒叙】\n        $range     = $this->_redis->ZREVRANGE($this->_pre_dir.$this->_hash_prefix.'_sort', $limit_s, $limit_e);\n        $count     = $this->_redis->zCard($this->_pre_dir.$this->_hash_prefix.'_sort'); //统计总数\n        $pageCount = ceil($count / $pageSize); //总页数\n\n        $page_data = [];\n        foreach ($range as $item) {\n            if (count($key) > 0) {\n                $page_data[] = $this->_redis->hMGet($this->_pre_dir.$this->_hash_prefix.'_'.$item,\n                    $key); //获取hash table 中所有的集合数据\n            } else {\n                $page_data[] = $this->_redis->hGetAll($this->_pre_dir.$this->_hash_prefix.'_'.$item);\n            }\n        }\n\n        $return_data = [\n            'data'      => $page_data, // 返回的数据\n            'page'      => $page, //当前页\n            'pageSize'  => $pageSize,  //每页的记录数\n            'total'     => $count, //总条目数\n            'pageCount' => $pageCount, //总页数\n        ];\n\n        return $return_data;\n\n    }\n\n    /**\n     * @notes   :删除记录\n     */\n    public function del_page_info($id)\n    {\n        if ( ! is_array($id)) {\n            return false;\n        }\n        foreach ($id as $val) {\n            $hashName = $this->_hash_prefix.'_'.$val;\n            $this->_redis->del($this->_pre_dir.$hashName);\n            $this->_redis->zRem($this->_pre_dir.$this->_hash_prefix.'_sort'.$val);\n        }\n\n        return true;\n    }\n\n    /**\n     * @notes   : 0:清空当前数据库 -1:清空所有数据库\n     */\n    public function clear_db($db = 0)\n    {\n        if ($db >= 0) {\n            $this->_redis->flushDB();\n        } elseif ($db == -1) {\n            $this->_redis->flushAll();\n        } else {\n            // 非法数据库参数\n            return false;\n        }\n\n        return true;\n    }\n}\n\n\n```\n<a name=\"flolF\"></a>\n## 类库使用方法：\n```php\n//引入类库：\nuse lib\\RedisPage;\n\n//实例化：\n$TASK_NAME = 'rcjk';\n$REDIS_DB  = 1;\n//获取系统配置文件中redis的配置\n$redis_config      = config('cache.stores.redis');\n$redis_config_host = $redis_config['host'] ?? '';\n$redis_config_port = $redis_config['port'] ?? '';\n//这里获取的系统全局配置，也可以走默认配置\n$redis = new RedisPage($redis_config_host, $redis_config_port, $REDIS_DB, $TASK_NAME, 'toushi_'.$TASK_NAME);\n\n\n$key_name = \"test_name\";\n$key = \"这是测试存储数据\";\t//这里可以是任意字符【字符串、数组、等】，都会被转为序列化存储\n\n//创建生成单key：\n$redis->setKeyData($key_name, $key);\n\n\n//获取单个key对应的数据：\n$redis->getKeyData($key_name);\n\n//插入数组数据到redis:\n$key_id = 1000; \t//这里的key_id设定的是int类型的数据id，如需要其他，请到类库中修改此方法\n$arr =[] ;\n$redis->set_page_info($key_id, $arr); //插入数据到redis\n\n//获取数据，并进行分页\n$redis->get_page_info(1, 100); //获取分页数据\n\n//清空当前库中所有缓存数据\n$redis->clear_db($REDIS_DB);\n\n```\n目前只是其简单的使用，其他使用方法函数还在研究中...\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u92134be2\" class=\"ne-p\"><span class=\"ne-text\">目前使用的是thinkphp，所以基本引入类库的方法使用的是tp的引入方法，其他引入方式一样</span></p></div><h2 id=\"sxHw9\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"><br />php类库：</span></h2><pre data-language=\"php\" id=\"VU4Te\" class=\"ne-codeblock language-php\"><code>&lt;?php\n\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2023-09-23\n * Time: 14:08:19\n * Info:\n */\n\nnamespace lib;\n\nuse Redis;\n\nclass RedisPage\n{\n\n    protected $_redis;\n\n    protected $_redis_ip;\n\n    protected $_redis_port;\n\n    protected $_redis_db;\n\n    protected $_hash_prefix;\n\n    protected $_pre_dir;\n\n    /**\n     * RedisPage constructor.\n     * 初始化redis配置\n     */\n    public function __construct($ip = '', $port = 6379, $db = 2, $hash_prefix = 'toushi', $pre_dir = 'test')\n    {\n        $this-&gt;_redis_ip    = $ip ? $ip : '127.0.0.1';\n        $this-&gt;_redis_port  = $port ? $port : 6379;\n        $this-&gt;_redis_db    = $db ? $db : 0;\n        $this-&gt;_hash_prefix = $hash_prefix ? $hash_prefix : '';\n        //实例化redis数据库连接\n        $this-&gt;_redis = new Redis();\n        $this-&gt;_redis-&gt;connect($this-&gt;_redis_ip, $this-&gt;_redis_port);\n        $this-&gt;_redis-&gt;select($this-&gt;_redis_db);\n\n        $this-&gt;_pre_dir = $pre_dir ? $pre_dir.':' : 'test:';\n    }\n\n    /**\n     * @notes   : 设置分页数据至redis数据库\n     * 采用hash table 与 集合 Score字段\n     */\n    public function set_page_info($id, $data)\n    {\n        if ( ! is_numeric($id) || ! is_array($data)) {\n            return false;\n        }\n        $hashName = $this-&gt;_hash_prefix.'_'.$id;\n\n        //设置键值对的过期时间，【秒】\n        //$this-&gt;_redis-&gt;expire($this-&gt;_pre_dir.$hashName, 100);\n        $this-&gt;_redis-&gt;hMSet($this-&gt;_pre_dir.$hashName, $data);\n\n        $this-&gt;_redis-&gt;zAdd($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort', $id, $id);\n\n        return true;\n    }\n\n    /**\n     * 创建单key对应的数据\n     * @return void\n     */\n    public function setKeyData($key, $data)\n    {\n        $preFix = 'toushi';\n        $data   = serialize($data);\n        $res    = $this-&gt;_redis-&gt;set($preFix.$key, $data);\n\n        return $res;\n    }\n\n    /**\n     * 根据key获取对应数据\n     *\n     * @param $key\n     *\n     * @return mixed\n     */\n    public function getKeyData($key)\n    {\n        $preFix = 'toushi';\n        $res    = $this-&gt;_redis-&gt;get($preFix.$key);\n        $res    = unserialize($res);\n\n        return $res;\n    }\n\n    /**\n     * 判断key是否存在\n     *\n     * @param $key\n     *\n     */\n    public function keyIsExist($key)\n    {\n        $preFix = 'toushi';\n        $res    = $this-&gt;_redis-&gt;exists($preFix.$key);\n\n        return $res ? true : false;\n    }\n\n    /**\n     * @notes   :获取分页数据\n     */\n    public function get_page_info($page, $pageSize, $key = [])\n    {\n        if ( ! is_numeric($page) || ! is_numeric($pageSize)) {\n            return false;\n        }\n        $limit_s = ($page - 1) * $pageSize;\n        $limit_e = ($limit_s + $pageSize) - 1;\n        //获取在该区间内所有带 score 的有序集合成员列表\n        //ZREVRANGE 排序【倒叙】\n        $range     = $this-&gt;_redis-&gt;ZREVRANGE($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort', $limit_s, $limit_e);\n        $count     = $this-&gt;_redis-&gt;zCard($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort'); //统计总数\n        $pageCount = ceil($count / $pageSize); //总页数\n\n        $page_data = [];\n        foreach ($range as $item) {\n            if (count($key) &gt; 0) {\n                $page_data[] = $this-&gt;_redis-&gt;hMGet($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_'.$item,\n                    $key); //获取hash table 中所有的集合数据\n            } else {\n                $page_data[] = $this-&gt;_redis-&gt;hGetAll($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_'.$item);\n            }\n        }\n\n        $return_data = [\n            'data'      =&gt; $page_data, // 返回的数据\n            'page'      =&gt; $page, //当前页\n            'pageSize'  =&gt; $pageSize,  //每页的记录数\n            'total'     =&gt; $count, //总条目数\n            'pageCount' =&gt; $pageCount, //总页数\n        ];\n\n        return $return_data;\n\n    }\n\n    /**\n     * @notes   :删除记录\n     */\n    public function del_page_info($id)\n    {\n        if ( ! is_array($id)) {\n            return false;\n        }\n        foreach ($id as $val) {\n            $hashName = $this-&gt;_hash_prefix.'_'.$val;\n            $this-&gt;_redis-&gt;del($this-&gt;_pre_dir.$hashName);\n            $this-&gt;_redis-&gt;zRem($this-&gt;_pre_dir.$this-&gt;_hash_prefix.'_sort'.$val);\n        }\n\n        return true;\n    }\n\n    /**\n     * @notes   : 0:清空当前数据库 -1:清空所有数据库\n     */\n    public function clear_db($db = 0)\n    {\n        if ($db &gt;= 0) {\n            $this-&gt;_redis-&gt;flushDB();\n        } elseif ($db == -1) {\n            $this-&gt;_redis-&gt;flushAll();\n        } else {\n            // 非法数据库参数\n            return false;\n        }\n\n        return true;\n    }\n}\n\n</code></pre><h2 id=\"flolF\"><span class=\"ne-text\">类库使用方法：</span></h2><pre data-language=\"php\" id=\"pqxz3\" class=\"ne-codeblock language-php\"><code>//引入类库：\nuse lib\\RedisPage;\n\n//实例化：\n$TASK_NAME = 'rcjk';\n$REDIS_DB  = 1;\n//获取系统配置文件中redis的配置\n$redis_config      = config('cache.stores.redis');\n$redis_config_host = $redis_config['host'] ?? '';\n$redis_config_port = $redis_config['port'] ?? '';\n//这里获取的系统全局配置，也可以走默认配置\n$redis = new RedisPage($redis_config_host, $redis_config_port, $REDIS_DB, $TASK_NAME, 'toushi_'.$TASK_NAME);\n\n\n$key_name = &quot;test_name&quot;;\n$key = &quot;这是测试存储数据&quot;;\t//这里可以是任意字符【字符串、数组、等】，都会被转为序列化存储\n\n//创建生成单key：\n$redis-&gt;setKeyData($key_name, $key);\n\n\n//获取单个key对应的数据：\n$redis-&gt;getKeyData($key_name);\n\n//插入数组数据到redis:\n$key_id = 1000; \t//这里的key_id设定的是int类型的数据id，如需要其他，请到类库中修改此方法\n$arr =[] ;\n$redis-&gt;set_page_info($key_id, $arr); //插入数据到redis\n\n//获取数据，并进行分页\n$redis-&gt;get_page_info(1, 100); //获取分页数据\n\n//清空当前库中所有缓存数据\n$redis-&gt;clear_db($REDIS_DB);\n</code></pre><p id=\"u308c7d7a\" class=\"ne-p\"><span class=\"ne-text\">目前只是其简单的使用，其他使用方法函数还在研究中...</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"u5397adf0\" id=\"u5397adf0\"><p data-lake-id=\"u92134be2\" id=\"u92134be2\"><span data-lake-id=\"uac9bc0b2\" id=\"uac9bc0b2\">目前使用的是thinkphp，所以基本引入类库的方法使用的是tp的引入方法，其他引入方式一样</span></p></blockquote><h2 data-lake-id=\"sxHw9\" id=\"sxHw9\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" style=\"color: rgb(51, 51, 51)\"><br />php类库：</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20User%3A%20%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20*%20Date%3A%202023-09-23%5Cn%20*%20Time%3A%2014%3A08%3A19%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20lib%3B%5Cn%5Cnuse%20Redis%3B%5Cn%5Cnclass%20RedisPage%5Cn%7B%5Cn%5Cn%20%20%20%20protected%20%24_redis%3B%5Cn%5Cn%20%20%20%20protected%20%24_redis_ip%3B%5Cn%5Cn%20%20%20%20protected%20%24_redis_port%3B%5Cn%5Cn%20%20%20%20protected%20%24_redis_db%3B%5Cn%5Cn%20%20%20%20protected%20%24_hash_prefix%3B%5Cn%5Cn%20%20%20%20protected%20%24_pre_dir%3B%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20RedisPage%20constructor.%5Cn%20%20%20%20%20*%20%E5%88%9D%E5%A7%8B%E5%8C%96redis%E9%85%8D%E7%BD%AE%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20__construct(%24ip%20%3D%20''%2C%20%24port%20%3D%206379%2C%20%24db%20%3D%202%2C%20%24hash_prefix%20%3D%20'toushi'%2C%20%24pre_dir%20%3D%20'test')%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis_ip%20%20%20%20%3D%20%24ip%20%3F%20%24ip%20%3A%20'127.0.0.1'%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis_port%20%20%3D%20%24port%20%3F%20%24port%20%3A%206379%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis_db%20%20%20%20%3D%20%24db%20%3F%20%24db%20%3A%200%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_hash_prefix%20%3D%20%24hash_prefix%20%3F%20%24hash_prefix%20%3A%20''%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E5%AE%9E%E4%BE%8B%E5%8C%96redis%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis%20%3D%20new%20Redis()%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis-%3Econnect(%24this-%3E_redis_ip%2C%20%24this-%3E_redis_port)%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis-%3Eselect(%24this-%3E_redis_db)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24this-%3E_pre_dir%20%3D%20%24pre_dir%20%3F%20%24pre_dir.'%3A'%20%3A%20'test%3A'%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%40notes%20%20%20%3A%20%E8%AE%BE%E7%BD%AE%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%E8%87%B3redis%E6%95%B0%E6%8D%AE%E5%BA%93%5Cn%20%20%20%20%20*%20%E9%87%87%E7%94%A8hash%20table%20%E4%B8%8E%20%E9%9B%86%E5%90%88%20Score%E5%AD%97%E6%AE%B5%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20set_page_info(%24id%2C%20%24data)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20is_numeric(%24id)%20%7C%7C%20!%20is_array(%24data))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24hashName%20%3D%20%24this-%3E_hash_prefix.'_'.%24id%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E9%94%AE%E5%80%BC%E5%AF%B9%E7%9A%84%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%EF%BC%8C%E3%80%90%E7%A7%92%E3%80%91%5Cn%20%20%20%20%20%20%20%20%2F%2F%24this-%3E_redis-%3Eexpire(%24this-%3E_pre_dir.%24hashName%2C%20100)%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis-%3EhMSet(%24this-%3E_pre_dir.%24hashName%2C%20%24data)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24this-%3E_redis-%3EzAdd(%24this-%3E_pre_dir.%24this-%3E_hash_prefix.'_sort'%2C%20%24id%2C%20%24id)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%88%9B%E5%BB%BA%E5%8D%95key%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20setKeyData(%24key%2C%20%24data)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24preFix%20%3D%20'toushi'%3B%5Cn%20%20%20%20%20%20%20%20%24data%20%20%20%3D%20serialize(%24data)%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%20%20%20%3D%20%24this-%3E_redis-%3Eset(%24preFix.%24key%2C%20%24data)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24res%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E6%A0%B9%E6%8D%AEkey%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20%24key%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20mixed%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20getKeyData(%24key)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24preFix%20%3D%20'toushi'%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%20%20%20%3D%20%24this-%3E_redis-%3Eget(%24preFix.%24key)%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%20%20%20%3D%20unserialize(%24res)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24res%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%88%A4%E6%96%ADkey%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20%24key%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20keyIsExist(%24key)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24preFix%20%3D%20'toushi'%3B%5Cn%20%20%20%20%20%20%20%20%24res%20%20%20%20%3D%20%24this-%3E_redis-%3Eexists(%24preFix.%24key)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24res%20%3F%20true%20%3A%20false%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%40notes%20%20%20%3A%E8%8E%B7%E5%8F%96%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20get_page_info(%24page%2C%20%24pageSize%2C%20%24key%20%3D%20%5B%5D)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20is_numeric(%24page)%20%7C%7C%20!%20is_numeric(%24pageSize))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24limit_s%20%3D%20(%24page%20-%201)%20*%20%24pageSize%3B%5Cn%20%20%20%20%20%20%20%20%24limit_e%20%3D%20(%24limit_s%20%2B%20%24pageSize)%20-%201%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E8%8E%B7%E5%8F%96%E5%9C%A8%E8%AF%A5%E5%8C%BA%E9%97%B4%E5%86%85%E6%89%80%E6%9C%89%E5%B8%A6%20score%20%E7%9A%84%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E6%88%90%E5%91%98%E5%88%97%E8%A1%A8%5Cn%20%20%20%20%20%20%20%20%2F%2FZREVRANGE%20%E6%8E%92%E5%BA%8F%E3%80%90%E5%80%92%E5%8F%99%E3%80%91%5Cn%20%20%20%20%20%20%20%20%24range%20%20%20%20%20%3D%20%24this-%3E_redis-%3EZREVRANGE(%24this-%3E_pre_dir.%24this-%3E_hash_prefix.'_sort'%2C%20%24limit_s%2C%20%24limit_e)%3B%5Cn%20%20%20%20%20%20%20%20%24count%20%20%20%20%20%3D%20%24this-%3E_redis-%3EzCard(%24this-%3E_pre_dir.%24this-%3E_hash_prefix.'_sort')%3B%20%2F%2F%E7%BB%9F%E8%AE%A1%E6%80%BB%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%24pageCount%20%3D%20ceil(%24count%20%2F%20%24pageSize)%3B%20%2F%2F%E6%80%BB%E9%A1%B5%E6%95%B0%5Cn%5Cn%20%20%20%20%20%20%20%20%24page_data%20%3D%20%5B%5D%3B%5Cn%20%20%20%20%20%20%20%20foreach%20(%24range%20as%20%24item)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(count(%24key)%20%3E%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24page_data%5B%5D%20%3D%20%24this-%3E_redis-%3EhMGet(%24this-%3E_pre_dir.%24this-%3E_hash_prefix.'_'.%24item%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24key)%3B%20%2F%2F%E8%8E%B7%E5%8F%96hash%20table%20%E4%B8%AD%E6%89%80%E6%9C%89%E7%9A%84%E9%9B%86%E5%90%88%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24page_data%5B%5D%20%3D%20%24this-%3E_redis-%3EhGetAll(%24this-%3E_pre_dir.%24this-%3E_hash_prefix.'_'.%24item)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%24return_data%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'data'%20%20%20%20%20%20%3D%3E%20%24page_data%2C%20%2F%2F%20%E8%BF%94%E5%9B%9E%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'page'%20%20%20%20%20%20%3D%3E%20%24page%2C%20%2F%2F%E5%BD%93%E5%89%8D%E9%A1%B5%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'pageSize'%20%20%3D%3E%20%24pageSize%2C%20%20%2F%2F%E6%AF%8F%E9%A1%B5%E7%9A%84%E8%AE%B0%E5%BD%95%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'total'%20%20%20%20%20%3D%3E%20%24count%2C%20%2F%2F%E6%80%BB%E6%9D%A1%E7%9B%AE%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'pageCount'%20%3D%3E%20%24pageCount%2C%20%2F%2F%E6%80%BB%E9%A1%B5%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24return_data%3B%5Cn%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%40notes%20%20%20%3A%E5%88%A0%E9%99%A4%E8%AE%B0%E5%BD%95%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20del_page_info(%24id)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20is_array(%24id))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20foreach%20(%24id%20as%20%24val)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24hashName%20%3D%20%24this-%3E_hash_prefix.'_'.%24val%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3E_redis-%3Edel(%24this-%3E_pre_dir.%24hashName)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3E_redis-%3EzRem(%24this-%3E_pre_dir.%24this-%3E_hash_prefix.'_sort'.%24val)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%40notes%20%20%20%3A%200%3A%E6%B8%85%E7%A9%BA%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%20-1%3A%E6%B8%85%E7%A9%BA%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20clear_db(%24db%20%3D%200)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(%24db%20%3E%3D%200)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3E_redis-%3EflushDB()%3B%5Cn%20%20%20%20%20%20%20%20%7D%20elseif%20(%24db%20%3D%3D%20-1)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3E_redis-%3EflushAll()%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E9%9D%9E%E6%B3%95%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VU4Te%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"flolF\" id=\"flolF\"><span data-lake-id=\"uad029712\" id=\"uad029712\">类库使用方法：</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%2F%2F%E5%BC%95%E5%85%A5%E7%B1%BB%E5%BA%93%EF%BC%9A%5Cnuse%20lib%5C%5CRedisPage%3B%5Cn%5Cn%2F%2F%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%9A%5Cn%24TASK_NAME%20%3D%20'rcjk'%3B%5Cn%24REDIS_DB%20%20%3D%201%3B%5Cn%2F%2F%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%ADredis%E7%9A%84%E9%85%8D%E7%BD%AE%5Cn%24redis_config%20%20%20%20%20%20%3D%20config('cache.stores.redis')%3B%5Cn%24redis_config_host%20%3D%20%24redis_config%5B'host'%5D%20%3F%3F%20''%3B%5Cn%24redis_config_port%20%3D%20%24redis_config%5B'port'%5D%20%3F%3F%20''%3B%5Cn%2F%2F%E8%BF%99%E9%87%8C%E8%8E%B7%E5%8F%96%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%B5%B0%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%5Cn%24redis%20%3D%20new%20RedisPage(%24redis_config_host%2C%20%24redis_config_port%2C%20%24REDIS_DB%2C%20%24TASK_NAME%2C%20'toushi_'.%24TASK_NAME)%3B%5Cn%5Cn%5Cn%24key_name%20%3D%20%5C%22test_name%5C%22%3B%5Cn%24key%20%3D%20%5C%22%E8%BF%99%E6%98%AF%E6%B5%8B%E8%AF%95%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%5C%22%3B%5Ct%2F%2F%E8%BF%99%E9%87%8C%E5%8F%AF%E4%BB%A5%E6%98%AF%E4%BB%BB%E6%84%8F%E5%AD%97%E7%AC%A6%E3%80%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E6%95%B0%E7%BB%84%E3%80%81%E7%AD%89%E3%80%91%EF%BC%8C%E9%83%BD%E4%BC%9A%E8%A2%AB%E8%BD%AC%E4%B8%BA%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%98%E5%82%A8%5Cn%5Cn%2F%2F%E5%88%9B%E5%BB%BA%E7%94%9F%E6%88%90%E5%8D%95key%EF%BC%9A%5Cn%24redis-%3EsetKeyData(%24key_name%2C%20%24key)%3B%5Cn%5Cn%5Cn%2F%2F%E8%8E%B7%E5%8F%96%E5%8D%95%E4%B8%AAkey%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%9A%5Cn%24redis-%3EgetKeyData(%24key_name)%3B%5Cn%5Cn%2F%2F%E6%8F%92%E5%85%A5%E6%95%B0%E7%BB%84%E6%95%B0%E6%8D%AE%E5%88%B0redis%3A%5Cn%24key_id%20%3D%201000%3B%20%5Ct%2F%2F%E8%BF%99%E9%87%8C%E7%9A%84key_id%E8%AE%BE%E5%AE%9A%E7%9A%84%E6%98%AFint%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AEid%EF%BC%8C%E5%A6%82%E9%9C%80%E8%A6%81%E5%85%B6%E4%BB%96%EF%BC%8C%E8%AF%B7%E5%88%B0%E7%B1%BB%E5%BA%93%E4%B8%AD%E4%BF%AE%E6%94%B9%E6%AD%A4%E6%96%B9%E6%B3%95%5Cn%24arr%20%3D%5B%5D%20%3B%5Cn%24redis-%3Eset_page_info(%24key_id%2C%20%24arr)%3B%20%2F%2F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0redis%5Cn%5Cn%2F%2F%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%B9%B6%E8%BF%9B%E8%A1%8C%E5%88%86%E9%A1%B5%5Cn%24redis-%3Eget_page_info(1%2C%20100)%3B%20%2F%2F%E8%8E%B7%E5%8F%96%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%5Cn%5Cn%2F%2F%E6%B8%85%E7%A9%BA%E5%BD%93%E5%89%8D%E5%BA%93%E4%B8%AD%E6%89%80%E6%9C%89%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%5Cn%24redis-%3Eclear_db(%24REDIS_DB)%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22pqxz3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u308c7d7a\" id=\"u308c7d7a\"><span data-lake-id=\"u52bdfef3\" id=\"u52bdfef3\">目前只是其简单的使用，其他使用方法函数还在研究中...</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 6,
    "hits": 6,
    "comments_count": 0,
    "word_count": 888,
    "created_at": "2023-09-25T01:55:06.000Z",
    "updated_at": "2023-09-25T02:06:35.000Z",
    "content_updated_at": "2023-09-25T02:06:35.000Z",
    "published_at": "2023-09-25T02:06:35.000Z",
    "first_published_at": "2023-09-25T02:06:34.825Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2014190187,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 136230242,
    "type": "Doc",
    "slug": "bcyw110znw9zp2cn",
    "title": "InnoDB: Cannot allocate memory for the buffer pool",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:综述：这是一次MySQL启动失败故障排查的过程。核心报错内容是[ERRO...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">综述：这是一次MySQL启动失败故障排查的过程。核心报错内容是[ERROR] InnoDB: Cannot allocate memory for the buffer pool ，解决方案是修改mysql配置文件里下述参数的值：innodb_buffer_pool_size 、join_buffer_size ，然后重启mysqld服务。对应服务器系统是CentOS 7。</span></p><p id=\"ud2a62fa1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></span></p><h2 id=\"wjeMx\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">1、查看mysql配置文件</span></h2><pre data-language=\"sql\" id=\"n9App\" class=\"ne-codeblock language-sql\"><code>vi /etc/my.cnf</code></pre><p id=\"u44ecb59a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">得到类似如下的内容：</span></p><pre data-language=\"sql\" id=\"tkiUa\" class=\"ne-codeblock language-sql\"><code># For advice on how to change settings please see\n# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html\n\n[mysqld]\n#\n# Remove leading # and set to the amount of RAM for the most important data\n# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.\ninnodb_buffer_pool_size = 512M\n#\n# Remove leading # to turn on a very important data integrity option: logging\n# changes to the binary log between backups.\n# log_bin\n#\n# Remove leading # to set options mainly useful for reporting servers.\n# The server defaults are faster for transactions and fast SELECTs.\n# Adjust sizes as needed, experiment to find the optimal values.\njoin_buffer_size = 512M\nsort_buffer_size = 16M\nread_rnd_buffer_size = 16M\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid</code></pre><p id=\"u8e2ccb36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在文件底部可看到log-error=/var/log/mysqld.log ，说明可通过/var/log/mysqld.log 文件查看mysql错误日志。</span></p><h2 id=\"V2svc\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">2、查看mysql错误日志</span></h2><pre data-language=\"sql\" id=\"MJPbt\" class=\"ne-codeblock language-sql\"><code>vi /var/log/mysqld.log</code></pre><p id=\"u212afc73\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将日志文件拉到底部查看最新日志，得到如下内容：</span></p><pre data-language=\"sql\" id=\"d9KNw\" class=\"ne-codeblock language-sql\"><code>2023-08-14 16:02:25 232892 [Note] Plugin ＇FEDERATED＇ is disabled.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-08-14 16:02:25 232892 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-08-14 16:02:25 232892 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-08-14 16:02:25 232892 [Note] InnoDB: Memory barrier is not used\n2023-08-14 16:02:25 232892 [Note] InnoDB: Compressed tables use zlib 1.2.11\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using Linux native AIO\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using CPU crc32 instructions\n2023-08-14 16:02:25 232892 [Note] InnoDB: Initializing buffer pool, size = 40.0M\n2023-08-14 16:02:25 232892 [Note] InnoDB: Completed initialization of buffer pool\n2023-08-14 16:02:25 232892 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-08-14 16:02:25 232892 [Note] InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1600614 in the ib_logfiles!\n2023-08-14 16:02:25 232892 [Note] InnoDB: Database was not shutdown normally!\n2023-08-14 16:02:25 232892 [Note] InnoDB: Starting crash recovery.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Reading tablespace information from the .ibd files...\n2023-08-14 16:02:25 232892 [Note] InnoDB: Restoring possible half-written data pages \n2023-08-14 16:02:25 232892 [Note] InnoDB: from the doublewrite buffer...\n2023-08-14 16:02:25 232892 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Waiting for purge to start\n2023-08-14 16:02:25 232892 [Note] InnoDB: 5.6.50 started; log sequence number 1600614\n2023-08-14 16:02:25 232892 [Note] Recovering after a crash using mysql-bin\n2023-08-14 16:02:25 232892 [Note] Starting crash recovery...\n2023-08-14 16:02:25 232892 [Note] Crash recovery finished.\n2023-08-14 16:02:25 232892 [Note] RSA private key file not found: /www/server/data//private_key.pem. Some authentication plugins will not work.\n2023-08-14 16:02:25 232892 [Note] RSA public key file not found: /www/server/data//public_key.pem. Some authentication plugins will not work.\n2023-08-14 16:02:25 232892 [Note] Server hostname (bind-address): ＇*＇; port: 3306\n2023-08-14 16:02:25 232892 [Note] IPv6 is available.\n2023-08-14 16:02:25 232892 [Note]   - ＇::＇ resolves to ＇::＇;\n2023-08-14 16:02:25 232892 [Note] Server socket created on IP: ＇::＇.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_master_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] Info table is not ready to be used. Table ＇mysql.slave_master_info＇ cannot be opened.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_worker_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_relay_log_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] Info table is not ready to be used. Table ＇mysql.slave_relay_log_info＇ cannot be opened.\n2023-08-14 16:02:25 232892 [Note] Event Scheduler: Loaded 0 events\n2023-08-14 16:02:25 232892 [Note] /www/server/mysql/bin/mysqld: ready for connections.\nVersion: ＇5.6.50-log＇  socket: ＇/tmp/mysql.sock＇  port: 3306  Source distribution\n2023-08-14 16:07:31 233060 [Warning] Buffered warning: Performance schema disabled (reason: init failed).\n\n2023-08-14 16:07:31 233060 [Note] Plugin ＇FEDERATED＇ is disabled.\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-08-14 16:07:31 233060 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-08-14 16:07:31 233060 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-08-14 16:07:31 233060 [Note] InnoDB: Memory barrier is not used\n2023-08-14 16:07:31 233060 [Note] InnoDB: Compressed tables use zlib 1.2.11\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using Linux native AIO\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using CPU crc32 instructions\n2023-08-14 16:07:31 233060 [Note] InnoDB: Initializing buffer pool, size = 40.0M\n2023-08-14 16:07:31 233060 [Note] InnoDB: Completed initialization of buffer pool\n2023-08-14 16:07:31 233060 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-08-14 16:07:31 233060 [Note] InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1600624 in the ib_logfiles!\n2023-08-14 16:07:31 233060 [Note] InnoDB: Database was not shutdown normally!\n2023-08-14 16:07:31 233060 [Note] InnoDB: Starting crash recovery.\n2023-08-14 16:07:31 233060 [Note] InnoDB: Reading tablespace information from the .ibd files...\n2023-08-14 16:07:32 233060 [Note] InnoDB: Restoring possible half-written data pages \n2023-08-14 16:07:32 233060 [Note] InnoDB: from the doublewrite buffer...\n2023-08-14 16:07:32 233060 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-08-14 16:07:32 233060 [Note] InnoDB: Waiting for purge to start\n2023-08-14 16:07:32 233060 [Note] InnoDB: 5.6.50 started; log sequence number 1600624\n2023-08-14 16:07:32 233060 [Note] Recovering after a crash using mysql-bin\n2023-08-14 16:07:32 233060 [Note] Starting crash recovery...\n2023-08-14 16:07:32 233060 [Note] Crash recovery finished.\n2023-08-14 16:07:32 233060 [Note] RSA private key file not found: /www/server/data//private_key.pem. Some authentication plugins will not work.\n2023-08-14 16:07:32 233060 [Note] RSA public key file not found: /www/server/data//public_key.pem. Some authentication plugins will not work.\n2023-08-14 16:07:32 233060 [Note] Server hostname (bind-address): ＇*＇; port: 3306\n2023-08-14 16:07:32 233060 [Note] IPv6 is available.\n2023-08-14 16:07:32 233060 [Note]   - ＇::＇ resolves to ＇::＇;\n2023-08-14 16:07:32 233060 [Note] Server socket created on IP: ＇::＇.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_master_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] Info table is not ready to be used. Table ＇mysql.slave_master_info＇ cannot be opened.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_worker_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_relay_log_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] Info table is not ready to be used. Table ＇mysql.slave_relay_log_info＇ cannot be opened.\n2023-08-14 16:07:32 233060 [Note] Event Scheduler: Loaded 0 events\n2023-08-14 16:07:32 233060 [Note] /www/server/mysql/bin/mysqld: ready for connections.</code></pre><p id=\"uafaf116b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">发现：</span></p><pre data-language=\"sql\" id=\"nvhKU\" class=\"ne-codeblock language-sql\"><code>2023-08-14 16:07:32 233060 0 [Note] InnoDB: Initializing buffer pool, total size = 512M, instances = 1, chunk size = 128M\n2023-08-14 16:07:32 233060 0 [ERROR] InnoDB: mmap(137428992 bytes) failed; errno 12\n2023-08-14 16:07:32 233060 0 [ERROR] InnoDB: Cannot allocate memory for the buffer pool</code></pre><p id=\"uf0f921da\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">应该是内存不够启动mysql服务了。</span></p><p id=\"uf5f662c3\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">注意：报错信息里所需内存大小为：137428992 bytes = 137428992 / 1024 / 1024 M = 131.0625 M</span></p><h2 id=\"HEYwS\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">3、查询内存情况</span></h2><pre data-language=\"sql\" id=\"iX1Zd\" class=\"ne-codeblock language-sql\"><code># 以M为单位显示内存情况\nfree -m</code></pre><p id=\"uee8bc6b3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">得到：</span></p><pre data-language=\"sql\" id=\"h9xFn\" class=\"ne-codeblock language-sql\"><code># free -m\ntotal used free shared buff/cache available\nMem: 1946 1829 16 4 100 70\nSwap: 1023 1001 22</code></pre><p id=\"ufc0efa07\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">发现此时服务器相关内存情况为：</span></p><ul class=\"ne-ul\"><li id=\"u28b9b6f8\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">free: 16 M</span></li><li id=\"u2b911424\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">buff/cache: 100 M</span></li><li id=\"u108ea1de\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">available: 70 M</span></li></ul><p id=\"u76952d20\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这几个数据量都很可怜了。所以我们可以增大可用内存，停掉一些不用的服务，或者减少mysql所需内存。</span></p><h2 id=\"tekbk\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">4、修改mysql配置文件</span></h2><pre data-language=\"sql\" id=\"MExBK\" class=\"ne-codeblock language-sql\"><code>vi /etc/my.cnf</code></pre><p id=\"ud7d49e19\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">然后：</span></p><ul class=\"ne-ul\"><li id=\"ub2483614\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">innodb_buffer_pool_size = 512M</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> 修改为</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">innodb_buffer_pool_size = 64M</span></li><li id=\"u730ae967\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">join_buffer_size = 512M</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> 改为</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">join_buffer_size = 64M</span></li></ul><p id=\"u00bec686\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">然后，重启mysql服务：</span></p><pre data-language=\"sql\" id=\"TdnmB\" class=\"ne-codeblock language-sql\"><code>service mysqld restart</code></pre><h2 id=\"QD0Ol\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">5、验证mysql服务是否正常</span></h2><p id=\"ub1ec741d\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">打开网站，发现数据展示正常</span></p><p id=\"u37a650be\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">完毕</span></p></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />综述：这是一次MySQL启动失败故障排查的过程。核心报错内容是[ERROR] InnoDB: Cannot allocate memory for the buffer pool ，解决方案是修改mysql配置文件里下述参数的值：innodb_buffer_pool_size 、join_buffer_size ，然后重启mysqld服务。对应服务器系统是CentOS 7。\n\n<a name=\"wjeMx\"></a>\n## 1、查看mysql配置文件\n```sql\nvi /etc/my.cnf\n```\n得到类似如下的内容：\n```sql\n# For advice on how to change settings please see\n# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html\n\n[mysqld]\n#\n# Remove leading # and set to the amount of RAM for the most important data\n# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.\ninnodb_buffer_pool_size = 512M\n#\n# Remove leading # to turn on a very important data integrity option: logging\n# changes to the binary log between backups.\n# log_bin\n#\n# Remove leading # to set options mainly useful for reporting servers.\n# The server defaults are faster for transactions and fast SELECTs.\n# Adjust sizes as needed, experiment to find the optimal values.\njoin_buffer_size = 512M\nsort_buffer_size = 16M\nread_rnd_buffer_size = 16M\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```\n在文件底部可看到log-error=/var/log/mysqld.log ，说明可通过/var/log/mysqld.log 文件查看mysql错误日志。\n<a name=\"V2svc\"></a>\n## 2、查看mysql错误日志\n```sql\nvi /var/log/mysqld.log\n```\n将日志文件拉到底部查看最新日志，得到如下内容：\n```sql\n2023-08-14 16:02:25 232892 [Note] Plugin ＇FEDERATED＇ is disabled.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-08-14 16:02:25 232892 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-08-14 16:02:25 232892 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-08-14 16:02:25 232892 [Note] InnoDB: Memory barrier is not used\n2023-08-14 16:02:25 232892 [Note] InnoDB: Compressed tables use zlib 1.2.11\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using Linux native AIO\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using CPU crc32 instructions\n2023-08-14 16:02:25 232892 [Note] InnoDB: Initializing buffer pool, size = 40.0M\n2023-08-14 16:02:25 232892 [Note] InnoDB: Completed initialization of buffer pool\n2023-08-14 16:02:25 232892 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-08-14 16:02:25 232892 [Note] InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1600614 in the ib_logfiles!\n2023-08-14 16:02:25 232892 [Note] InnoDB: Database was not shutdown normally!\n2023-08-14 16:02:25 232892 [Note] InnoDB: Starting crash recovery.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Reading tablespace information from the .ibd files...\n2023-08-14 16:02:25 232892 [Note] InnoDB: Restoring possible half-written data pages \n2023-08-14 16:02:25 232892 [Note] InnoDB: from the doublewrite buffer...\n2023-08-14 16:02:25 232892 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Waiting for purge to start\n2023-08-14 16:02:25 232892 [Note] InnoDB: 5.6.50 started; log sequence number 1600614\n2023-08-14 16:02:25 232892 [Note] Recovering after a crash using mysql-bin\n2023-08-14 16:02:25 232892 [Note] Starting crash recovery...\n2023-08-14 16:02:25 232892 [Note] Crash recovery finished.\n2023-08-14 16:02:25 232892 [Note] RSA private key file not found: /www/server/data//private_key.pem. Some authentication plugins will not work.\n2023-08-14 16:02:25 232892 [Note] RSA public key file not found: /www/server/data//public_key.pem. Some authentication plugins will not work.\n2023-08-14 16:02:25 232892 [Note] Server hostname (bind-address): ＇*＇; port: 3306\n2023-08-14 16:02:25 232892 [Note] IPv6 is available.\n2023-08-14 16:02:25 232892 [Note]   - ＇::＇ resolves to ＇::＇;\n2023-08-14 16:02:25 232892 [Note] Server socket created on IP: ＇::＇.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_master_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] Info table is not ready to be used. Table ＇mysql.slave_master_info＇ cannot be opened.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_worker_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_relay_log_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] Info table is not ready to be used. Table ＇mysql.slave_relay_log_info＇ cannot be opened.\n2023-08-14 16:02:25 232892 [Note] Event Scheduler: Loaded 0 events\n2023-08-14 16:02:25 232892 [Note] /www/server/mysql/bin/mysqld: ready for connections.\nVersion: ＇5.6.50-log＇  socket: ＇/tmp/mysql.sock＇  port: 3306  Source distribution\n2023-08-14 16:07:31 233060 [Warning] Buffered warning: Performance schema disabled (reason: init failed).\n\n2023-08-14 16:07:31 233060 [Note] Plugin ＇FEDERATED＇ is disabled.\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-08-14 16:07:31 233060 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-08-14 16:07:31 233060 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-08-14 16:07:31 233060 [Note] InnoDB: Memory barrier is not used\n2023-08-14 16:07:31 233060 [Note] InnoDB: Compressed tables use zlib 1.2.11\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using Linux native AIO\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using CPU crc32 instructions\n2023-08-14 16:07:31 233060 [Note] InnoDB: Initializing buffer pool, size = 40.0M\n2023-08-14 16:07:31 233060 [Note] InnoDB: Completed initialization of buffer pool\n2023-08-14 16:07:31 233060 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-08-14 16:07:31 233060 [Note] InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1600624 in the ib_logfiles!\n2023-08-14 16:07:31 233060 [Note] InnoDB: Database was not shutdown normally!\n2023-08-14 16:07:31 233060 [Note] InnoDB: Starting crash recovery.\n2023-08-14 16:07:31 233060 [Note] InnoDB: Reading tablespace information from the .ibd files...\n2023-08-14 16:07:32 233060 [Note] InnoDB: Restoring possible half-written data pages \n2023-08-14 16:07:32 233060 [Note] InnoDB: from the doublewrite buffer...\n2023-08-14 16:07:32 233060 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-08-14 16:07:32 233060 [Note] InnoDB: Waiting for purge to start\n2023-08-14 16:07:32 233060 [Note] InnoDB: 5.6.50 started; log sequence number 1600624\n2023-08-14 16:07:32 233060 [Note] Recovering after a crash using mysql-bin\n2023-08-14 16:07:32 233060 [Note] Starting crash recovery...\n2023-08-14 16:07:32 233060 [Note] Crash recovery finished.\n2023-08-14 16:07:32 233060 [Note] RSA private key file not found: /www/server/data//private_key.pem. Some authentication plugins will not work.\n2023-08-14 16:07:32 233060 [Note] RSA public key file not found: /www/server/data//public_key.pem. Some authentication plugins will not work.\n2023-08-14 16:07:32 233060 [Note] Server hostname (bind-address): ＇*＇; port: 3306\n2023-08-14 16:07:32 233060 [Note] IPv6 is available.\n2023-08-14 16:07:32 233060 [Note]   - ＇::＇ resolves to ＇::＇;\n2023-08-14 16:07:32 233060 [Note] Server socket created on IP: ＇::＇.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_master_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] Info table is not ready to be used. Table ＇mysql.slave_master_info＇ cannot be opened.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_worker_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_relay_log_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] Info table is not ready to be used. Table ＇mysql.slave_relay_log_info＇ cannot be opened.\n2023-08-14 16:07:32 233060 [Note] Event Scheduler: Loaded 0 events\n2023-08-14 16:07:32 233060 [Note] /www/server/mysql/bin/mysqld: ready for connections.\n```\n发现：\n```sql\n2023-08-14 16:07:32 233060 0 [Note] InnoDB: Initializing buffer pool, total size = 512M, instances = 1, chunk size = 128M\n2023-08-14 16:07:32 233060 0 [ERROR] InnoDB: mmap(137428992 bytes) failed; errno 12\n2023-08-14 16:07:32 233060 0 [ERROR] InnoDB: Cannot allocate memory for the buffer pool\n```\n应该是内存不够启动mysql服务了。<br />注意：报错信息里所需内存大小为：137428992 bytes = 137428992 / 1024 / 1024 M = 131.0625 M\n<a name=\"HEYwS\"></a>\n## 3、查询内存情况\n```sql\n# 以M为单位显示内存情况\nfree -m\n```\n得到：\n```sql\n# free -m\ntotal used free shared buff/cache available\nMem: 1946 1829 16 4 100 70\nSwap: 1023 1001 22\n```\n发现此时服务器相关内存情况为：\n\n- free: 16 M\n- buff/cache: 100 M\n- available: 70 M\n\n这几个数据量都很可怜了。所以我们可以增大可用内存，停掉一些不用的服务，或者减少mysql所需内存。\n<a name=\"tekbk\"></a>\n## 4、修改mysql配置文件\n```sql\nvi /etc/my.cnf\n```\n然后：\n\n- 将innodb_buffer_pool_size = 512M 修改为innodb_buffer_pool_size = 64M\n- 将join_buffer_size = 512M 改为join_buffer_size = 64M\n\n然后，重启mysql服务：\n```sql\nservice mysqld restart\n```\n<a name=\"QD0Ol\"></a>\n## 5、验证mysql服务是否正常\n打开网站，发现数据展示正常<br />完毕\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">综述：这是一次MySQL启动失败故障排查的过程。核心报错内容是[ERROR] InnoDB: Cannot allocate memory for the buffer pool ，解决方案是修改mysql配置文件里下述参数的值：innodb_buffer_pool_size 、join_buffer_size ，然后重启mysqld服务。对应服务器系统是CentOS 7。</span></p><p id=\"ud2a62fa1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></span></p><h2 id=\"wjeMx\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">1、查看mysql配置文件</span></h2><pre data-language=\"sql\" id=\"n9App\" class=\"ne-codeblock language-sql\"><code>vi /etc/my.cnf</code></pre><p id=\"u44ecb59a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">得到类似如下的内容：</span></p><pre data-language=\"sql\" id=\"tkiUa\" class=\"ne-codeblock language-sql\"><code># For advice on how to change settings please see\n# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html\n\n[mysqld]\n#\n# Remove leading # and set to the amount of RAM for the most important data\n# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.\ninnodb_buffer_pool_size = 512M\n#\n# Remove leading # to turn on a very important data integrity option: logging\n# changes to the binary log between backups.\n# log_bin\n#\n# Remove leading # to set options mainly useful for reporting servers.\n# The server defaults are faster for transactions and fast SELECTs.\n# Adjust sizes as needed, experiment to find the optimal values.\njoin_buffer_size = 512M\nsort_buffer_size = 16M\nread_rnd_buffer_size = 16M\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid</code></pre><p id=\"u8e2ccb36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在文件底部可看到log-error=/var/log/mysqld.log ，说明可通过/var/log/mysqld.log 文件查看mysql错误日志。</span></p><h2 id=\"V2svc\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">2、查看mysql错误日志</span></h2><pre data-language=\"sql\" id=\"MJPbt\" class=\"ne-codeblock language-sql\"><code>vi /var/log/mysqld.log</code></pre><p id=\"u212afc73\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将日志文件拉到底部查看最新日志，得到如下内容：</span></p><pre data-language=\"sql\" id=\"d9KNw\" class=\"ne-codeblock language-sql\"><code>2023-08-14 16:02:25 232892 [Note] Plugin ＇FEDERATED＇ is disabled.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-08-14 16:02:25 232892 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-08-14 16:02:25 232892 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-08-14 16:02:25 232892 [Note] InnoDB: Memory barrier is not used\n2023-08-14 16:02:25 232892 [Note] InnoDB: Compressed tables use zlib 1.2.11\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using Linux native AIO\n2023-08-14 16:02:25 232892 [Note] InnoDB: Using CPU crc32 instructions\n2023-08-14 16:02:25 232892 [Note] InnoDB: Initializing buffer pool, size = 40.0M\n2023-08-14 16:02:25 232892 [Note] InnoDB: Completed initialization of buffer pool\n2023-08-14 16:02:25 232892 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-08-14 16:02:25 232892 [Note] InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1600614 in the ib_logfiles!\n2023-08-14 16:02:25 232892 [Note] InnoDB: Database was not shutdown normally!\n2023-08-14 16:02:25 232892 [Note] InnoDB: Starting crash recovery.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Reading tablespace information from the .ibd files...\n2023-08-14 16:02:25 232892 [Note] InnoDB: Restoring possible half-written data pages \n2023-08-14 16:02:25 232892 [Note] InnoDB: from the doublewrite buffer...\n2023-08-14 16:02:25 232892 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-08-14 16:02:25 232892 [Note] InnoDB: Waiting for purge to start\n2023-08-14 16:02:25 232892 [Note] InnoDB: 5.6.50 started; log sequence number 1600614\n2023-08-14 16:02:25 232892 [Note] Recovering after a crash using mysql-bin\n2023-08-14 16:02:25 232892 [Note] Starting crash recovery...\n2023-08-14 16:02:25 232892 [Note] Crash recovery finished.\n2023-08-14 16:02:25 232892 [Note] RSA private key file not found: /www/server/data//private_key.pem. Some authentication plugins will not work.\n2023-08-14 16:02:25 232892 [Note] RSA public key file not found: /www/server/data//public_key.pem. Some authentication plugins will not work.\n2023-08-14 16:02:25 232892 [Note] Server hostname (bind-address): ＇*＇; port: 3306\n2023-08-14 16:02:25 232892 [Note] IPv6 is available.\n2023-08-14 16:02:25 232892 [Note]   - ＇::＇ resolves to ＇::＇;\n2023-08-14 16:02:25 232892 [Note] Server socket created on IP: ＇::＇.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_master_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] Info table is not ready to be used. Table ＇mysql.slave_master_info＇ cannot be opened.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_worker_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] InnoDB: Cannot open table mysql/slave_relay_log_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:02:25 232892 [Warning] Info table is not ready to be used. Table ＇mysql.slave_relay_log_info＇ cannot be opened.\n2023-08-14 16:02:25 232892 [Note] Event Scheduler: Loaded 0 events\n2023-08-14 16:02:25 232892 [Note] /www/server/mysql/bin/mysqld: ready for connections.\nVersion: ＇5.6.50-log＇  socket: ＇/tmp/mysql.sock＇  port: 3306  Source distribution\n2023-08-14 16:07:31 233060 [Warning] Buffered warning: Performance schema disabled (reason: init failed).\n\n2023-08-14 16:07:31 233060 [Note] Plugin ＇FEDERATED＇ is disabled.\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using atomics to ref count buffer pool pages\n2023-08-14 16:07:31 233060 [Note] InnoDB: The InnoDB memory heap is disabled\n2023-08-14 16:07:31 233060 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins\n2023-08-14 16:07:31 233060 [Note] InnoDB: Memory barrier is not used\n2023-08-14 16:07:31 233060 [Note] InnoDB: Compressed tables use zlib 1.2.11\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using Linux native AIO\n2023-08-14 16:07:31 233060 [Note] InnoDB: Using CPU crc32 instructions\n2023-08-14 16:07:31 233060 [Note] InnoDB: Initializing buffer pool, size = 40.0M\n2023-08-14 16:07:31 233060 [Note] InnoDB: Completed initialization of buffer pool\n2023-08-14 16:07:31 233060 [Note] InnoDB: Highest supported file format is Barracuda.\n2023-08-14 16:07:31 233060 [Note] InnoDB: The log sequence numbers 0 and 0 in ibdata files do not match the log sequence number 1600624 in the ib_logfiles!\n2023-08-14 16:07:31 233060 [Note] InnoDB: Database was not shutdown normally!\n2023-08-14 16:07:31 233060 [Note] InnoDB: Starting crash recovery.\n2023-08-14 16:07:31 233060 [Note] InnoDB: Reading tablespace information from the .ibd files...\n2023-08-14 16:07:32 233060 [Note] InnoDB: Restoring possible half-written data pages \n2023-08-14 16:07:32 233060 [Note] InnoDB: from the doublewrite buffer...\n2023-08-14 16:07:32 233060 [Note] InnoDB: 128 rollback segment(s) are active.\n2023-08-14 16:07:32 233060 [Note] InnoDB: Waiting for purge to start\n2023-08-14 16:07:32 233060 [Note] InnoDB: 5.6.50 started; log sequence number 1600624\n2023-08-14 16:07:32 233060 [Note] Recovering after a crash using mysql-bin\n2023-08-14 16:07:32 233060 [Note] Starting crash recovery...\n2023-08-14 16:07:32 233060 [Note] Crash recovery finished.\n2023-08-14 16:07:32 233060 [Note] RSA private key file not found: /www/server/data//private_key.pem. Some authentication plugins will not work.\n2023-08-14 16:07:32 233060 [Note] RSA public key file not found: /www/server/data//public_key.pem. Some authentication plugins will not work.\n2023-08-14 16:07:32 233060 [Note] Server hostname (bind-address): ＇*＇; port: 3306\n2023-08-14 16:07:32 233060 [Note] IPv6 is available.\n2023-08-14 16:07:32 233060 [Note]   - ＇::＇ resolves to ＇::＇;\n2023-08-14 16:07:32 233060 [Note] Server socket created on IP: ＇::＇.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_master_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] Info table is not ready to be used. Table ＇mysql.slave_master_info＇ cannot be opened.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_worker_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] InnoDB: Cannot open table mysql/slave_relay_log_info from the internal data dictionary of InnoDB though the .frm file for the table exists. See http://dev.mysql.com/doc/refman/5.6/en/innodb-troubleshooting.html for how you can resolve the problem.\n2023-08-14 16:07:32 233060 [Warning] Info table is not ready to be used. Table ＇mysql.slave_relay_log_info＇ cannot be opened.\n2023-08-14 16:07:32 233060 [Note] Event Scheduler: Loaded 0 events\n2023-08-14 16:07:32 233060 [Note] /www/server/mysql/bin/mysqld: ready for connections.</code></pre><p id=\"uafaf116b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">发现：</span></p><pre data-language=\"sql\" id=\"nvhKU\" class=\"ne-codeblock language-sql\"><code>2023-08-14 16:07:32 233060 0 [Note] InnoDB: Initializing buffer pool, total size = 512M, instances = 1, chunk size = 128M\n2023-08-14 16:07:32 233060 0 [ERROR] InnoDB: mmap(137428992 bytes) failed; errno 12\n2023-08-14 16:07:32 233060 0 [ERROR] InnoDB: Cannot allocate memory for the buffer pool</code></pre><p id=\"uf0f921da\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">应该是内存不够启动mysql服务了。</span></p><p id=\"uf5f662c3\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">注意：报错信息里所需内存大小为：137428992 bytes = 137428992 / 1024 / 1024 M = 131.0625 M</span></p><h2 id=\"HEYwS\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">3、查询内存情况</span></h2><pre data-language=\"sql\" id=\"iX1Zd\" class=\"ne-codeblock language-sql\"><code># 以M为单位显示内存情况\nfree -m</code></pre><p id=\"uee8bc6b3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">得到：</span></p><pre data-language=\"sql\" id=\"h9xFn\" class=\"ne-codeblock language-sql\"><code># free -m\ntotal used free shared buff/cache available\nMem: 1946 1829 16 4 100 70\nSwap: 1023 1001 22</code></pre><p id=\"ufc0efa07\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">发现此时服务器相关内存情况为：</span></p><ul class=\"ne-ul\"><li id=\"u28b9b6f8\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">free: 16 M</span></li><li id=\"u2b911424\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">buff/cache: 100 M</span></li><li id=\"u108ea1de\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">available: 70 M</span></li></ul><p id=\"u76952d20\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这几个数据量都很可怜了。所以我们可以增大可用内存，停掉一些不用的服务，或者减少mysql所需内存。</span></p><h2 id=\"tekbk\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">4、修改mysql配置文件</span></h2><pre data-language=\"sql\" id=\"MExBK\" class=\"ne-codeblock language-sql\"><code>vi /etc/my.cnf</code></pre><p id=\"ud7d49e19\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">然后：</span></p><ul class=\"ne-ul\"><li id=\"ub2483614\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">innodb_buffer_pool_size = 512M</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> 修改为</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">innodb_buffer_pool_size = 64M</span></li><li id=\"u730ae967\" data-lake-index-type=\"0\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">join_buffer_size = 512M</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> 改为</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">join_buffer_size = 64M</span></li></ul><p id=\"u00bec686\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">然后，重启mysql服务：</span></p><pre data-language=\"sql\" id=\"TdnmB\" class=\"ne-codeblock language-sql\"><code>service mysqld restart</code></pre><h2 id=\"QD0Ol\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">5、验证mysql服务是否正常</span></h2><p id=\"ub1ec741d\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">打开网站，发现数据展示正常</span></p><p id=\"u37a650be\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">完毕</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf113bd8a\" id=\"uf113bd8a\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u659eb2fa\" id=\"u659eb2fa\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">综述：这是一次MySQL启动失败故障排查的过程。核心报错内容是[ERROR] InnoDB: Cannot allocate memory for the buffer pool ，解决方案是修改mysql配置文件里下述参数的值：innodb_buffer_pool_size 、join_buffer_size ，然后重启mysqld服务。对应服务器系统是CentOS 7。</span></p><p data-lake-id=\"ud2a62fa1\" id=\"ud2a62fa1\"><span data-lake-id=\"u16621ac0\" id=\"u16621ac0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><h2 data-lake-id=\"wjeMx\" id=\"wjeMx\" style=\"text-align: justify\"><span data-lake-id=\"u9d5c96d2\" id=\"u9d5c96d2\" style=\"color: rgb(51, 51, 51)\">1、查看mysql配置文件</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22vi%20%2Fetc%2Fmy.cnf%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22n9App%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u44ecb59a\" id=\"u44ecb59a\"><span data-lake-id=\"ua59a40d0\" id=\"ua59a40d0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">得到类似如下的内容：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22%23%20For%20advice%20on%20how%20to%20change%20settings%20please%20see%5Cn%23%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.7%2Fen%2Fserver-configuration-defaults.html%5Cn%5Cn%5Bmysqld%5D%5Cn%23%5Cn%23%20Remove%20leading%20%23%20and%20set%20to%20the%20amount%20of%20RAM%20for%20the%20most%20important%20data%5Cn%23%20cache%20in%20MySQL.%20Start%20at%2070%25%20of%20total%20RAM%20for%20dedicated%20server%2C%20else%2010%25.%5Cninnodb_buffer_pool_size%20%3D%20512M%5Cn%23%5Cn%23%20Remove%20leading%20%23%20to%20turn%20on%20a%20very%20important%20data%20integrity%20option%3A%20logging%5Cn%23%20changes%20to%20the%20binary%20log%20between%20backups.%5Cn%23%20log_bin%5Cn%23%5Cn%23%20Remove%20leading%20%23%20to%20set%20options%20mainly%20useful%20for%20reporting%20servers.%5Cn%23%20The%20server%20defaults%20are%20faster%20for%20transactions%20and%20fast%20SELECTs.%5Cn%23%20Adjust%20sizes%20as%20needed%2C%20experiment%20to%20find%20the%20optimal%20values.%5Cnjoin_buffer_size%20%3D%20512M%5Cnsort_buffer_size%20%3D%2016M%5Cnread_rnd_buffer_size%20%3D%2016M%5Cndatadir%3D%2Fvar%2Flib%2Fmysql%5Cnsocket%3D%2Fvar%2Flib%2Fmysql%2Fmysql.sock%5Cn%5Cn%23%20Disabling%20symbolic-links%20is%20recommended%20to%20prevent%20assorted%20security%20risks%5Cnsymbolic-links%3D0%5Cn%5Cnlog-error%3D%2Fvar%2Flog%2Fmysqld.log%5Cnpid-file%3D%2Fvar%2Frun%2Fmysqld%2Fmysqld.pid%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22tkiUa%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8e2ccb36\" id=\"u8e2ccb36\"><span data-lake-id=\"u3932e8cc\" id=\"u3932e8cc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">在文件底部可看到log-error=/var/log/mysqld.log ，说明可通过/var/log/mysqld.log 文件查看mysql错误日志。</span></p><h2 data-lake-id=\"V2svc\" id=\"V2svc\" style=\"text-align: justify\"><span data-lake-id=\"ua0289d7c\" id=\"ua0289d7c\" style=\"color: rgb(51, 51, 51)\">2、查看mysql错误日志</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22vi%20%2Fvar%2Flog%2Fmysqld.log%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22MJPbt%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u212afc73\" id=\"u212afc73\"><span data-lake-id=\"u76c57618\" id=\"u76c57618\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">将日志文件拉到底部查看最新日志，得到如下内容：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%222023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Plugin%20%EF%BC%87FEDERATED%EF%BC%87%20is%20disabled.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Using%20atomics%20to%20ref%20count%20buffer%20pool%20pages%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20The%20InnoDB%20memory%20heap%20is%20disabled%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Mutexes%20and%20rw_locks%20use%20GCC%20atomic%20builtins%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Memory%20barrier%20is%20not%20used%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Compressed%20tables%20use%20zlib%201.2.11%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Using%20Linux%20native%20AIO%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Using%20CPU%20crc32%20instructions%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Initializing%20buffer%20pool%2C%20size%20%3D%2040.0M%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Completed%20initialization%20of%20buffer%20pool%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Highest%20supported%20file%20format%20is%20Barracuda.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20The%20log%20sequence%20numbers%200%20and%200%20in%20ibdata%20files%20do%20not%20match%20the%20log%20sequence%20number%201600614%20in%20the%20ib_logfiles!%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Database%20was%20not%20shutdown%20normally!%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Starting%20crash%20recovery.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Reading%20tablespace%20information%20from%20the%20.ibd%20files...%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Restoring%20possible%20half-written%20data%20pages%20%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20from%20the%20doublewrite%20buffer...%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20128%20rollback%20segment(s)%20are%20active.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%20Waiting%20for%20purge%20to%20start%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20InnoDB%3A%205.6.50%20started%3B%20log%20sequence%20number%201600614%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Recovering%20after%20a%20crash%20using%20mysql-bin%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Starting%20crash%20recovery...%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Crash%20recovery%20finished.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20RSA%20private%20key%20file%20not%20found%3A%20%2Fwww%2Fserver%2Fdata%2F%2Fprivate_key.pem.%20Some%20authentication%20plugins%20will%20not%20work.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20RSA%20public%20key%20file%20not%20found%3A%20%2Fwww%2Fserver%2Fdata%2F%2Fpublic_key.pem.%20Some%20authentication%20plugins%20will%20not%20work.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Server%20hostname%20(bind-address)%3A%20%EF%BC%87*%EF%BC%87%3B%20port%3A%203306%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20IPv6%20is%20available.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20%20%20-%20%EF%BC%87%3A%3A%EF%BC%87%20resolves%20to%20%EF%BC%87%3A%3A%EF%BC%87%3B%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Server%20socket%20created%20on%20IP%3A%20%EF%BC%87%3A%3A%EF%BC%87.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BWarning%5D%20InnoDB%3A%20Cannot%20open%20table%20mysql%2Fslave_master_info%20from%20the%20internal%20data%20dictionary%20of%20InnoDB%20though%20the%20.frm%20file%20for%20the%20table%20exists.%20See%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.6%2Fen%2Finnodb-troubleshooting.html%20for%20how%20you%20can%20resolve%20the%20problem.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BWarning%5D%20Info%20table%20is%20not%20ready%20to%20be%20used.%20Table%20%EF%BC%87mysql.slave_master_info%EF%BC%87%20cannot%20be%20opened.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BWarning%5D%20InnoDB%3A%20Cannot%20open%20table%20mysql%2Fslave_worker_info%20from%20the%20internal%20data%20dictionary%20of%20InnoDB%20though%20the%20.frm%20file%20for%20the%20table%20exists.%20See%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.6%2Fen%2Finnodb-troubleshooting.html%20for%20how%20you%20can%20resolve%20the%20problem.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BWarning%5D%20InnoDB%3A%20Cannot%20open%20table%20mysql%2Fslave_relay_log_info%20from%20the%20internal%20data%20dictionary%20of%20InnoDB%20though%20the%20.frm%20file%20for%20the%20table%20exists.%20See%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.6%2Fen%2Finnodb-troubleshooting.html%20for%20how%20you%20can%20resolve%20the%20problem.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BWarning%5D%20Info%20table%20is%20not%20ready%20to%20be%20used.%20Table%20%EF%BC%87mysql.slave_relay_log_info%EF%BC%87%20cannot%20be%20opened.%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20Event%20Scheduler%3A%20Loaded%200%20events%5Cn2023-08-14%2016%3A02%3A25%20232892%20%5BNote%5D%20%2Fwww%2Fserver%2Fmysql%2Fbin%2Fmysqld%3A%20ready%20for%20connections.%5CnVersion%3A%20%EF%BC%875.6.50-log%EF%BC%87%20%20socket%3A%20%EF%BC%87%2Ftmp%2Fmysql.sock%EF%BC%87%20%20port%3A%203306%20%20Source%20distribution%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BWarning%5D%20Buffered%20warning%3A%20Performance%20schema%20disabled%20(reason%3A%20init%20failed).%5Cn%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20Plugin%20%EF%BC%87FEDERATED%EF%BC%87%20is%20disabled.%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Using%20atomics%20to%20ref%20count%20buffer%20pool%20pages%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20The%20InnoDB%20memory%20heap%20is%20disabled%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Mutexes%20and%20rw_locks%20use%20GCC%20atomic%20builtins%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Memory%20barrier%20is%20not%20used%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Compressed%20tables%20use%20zlib%201.2.11%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Using%20Linux%20native%20AIO%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Using%20CPU%20crc32%20instructions%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Initializing%20buffer%20pool%2C%20size%20%3D%2040.0M%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Completed%20initialization%20of%20buffer%20pool%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Highest%20supported%20file%20format%20is%20Barracuda.%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20The%20log%20sequence%20numbers%200%20and%200%20in%20ibdata%20files%20do%20not%20match%20the%20log%20sequence%20number%201600624%20in%20the%20ib_logfiles!%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Database%20was%20not%20shutdown%20normally!%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Starting%20crash%20recovery.%5Cn2023-08-14%2016%3A07%3A31%20233060%20%5BNote%5D%20InnoDB%3A%20Reading%20tablespace%20information%20from%20the%20.ibd%20files...%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20InnoDB%3A%20Restoring%20possible%20half-written%20data%20pages%20%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20InnoDB%3A%20from%20the%20doublewrite%20buffer...%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20InnoDB%3A%20128%20rollback%20segment(s)%20are%20active.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20InnoDB%3A%20Waiting%20for%20purge%20to%20start%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20InnoDB%3A%205.6.50%20started%3B%20log%20sequence%20number%201600624%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20Recovering%20after%20a%20crash%20using%20mysql-bin%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20Starting%20crash%20recovery...%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20Crash%20recovery%20finished.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20RSA%20private%20key%20file%20not%20found%3A%20%2Fwww%2Fserver%2Fdata%2F%2Fprivate_key.pem.%20Some%20authentication%20plugins%20will%20not%20work.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20RSA%20public%20key%20file%20not%20found%3A%20%2Fwww%2Fserver%2Fdata%2F%2Fpublic_key.pem.%20Some%20authentication%20plugins%20will%20not%20work.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20Server%20hostname%20(bind-address)%3A%20%EF%BC%87*%EF%BC%87%3B%20port%3A%203306%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20IPv6%20is%20available.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20%20%20-%20%EF%BC%87%3A%3A%EF%BC%87%20resolves%20to%20%EF%BC%87%3A%3A%EF%BC%87%3B%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20Server%20socket%20created%20on%20IP%3A%20%EF%BC%87%3A%3A%EF%BC%87.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BWarning%5D%20InnoDB%3A%20Cannot%20open%20table%20mysql%2Fslave_master_info%20from%20the%20internal%20data%20dictionary%20of%20InnoDB%20though%20the%20.frm%20file%20for%20the%20table%20exists.%20See%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.6%2Fen%2Finnodb-troubleshooting.html%20for%20how%20you%20can%20resolve%20the%20problem.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BWarning%5D%20Info%20table%20is%20not%20ready%20to%20be%20used.%20Table%20%EF%BC%87mysql.slave_master_info%EF%BC%87%20cannot%20be%20opened.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BWarning%5D%20InnoDB%3A%20Cannot%20open%20table%20mysql%2Fslave_worker_info%20from%20the%20internal%20data%20dictionary%20of%20InnoDB%20though%20the%20.frm%20file%20for%20the%20table%20exists.%20See%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.6%2Fen%2Finnodb-troubleshooting.html%20for%20how%20you%20can%20resolve%20the%20problem.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BWarning%5D%20InnoDB%3A%20Cannot%20open%20table%20mysql%2Fslave_relay_log_info%20from%20the%20internal%20data%20dictionary%20of%20InnoDB%20though%20the%20.frm%20file%20for%20the%20table%20exists.%20See%20http%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.6%2Fen%2Finnodb-troubleshooting.html%20for%20how%20you%20can%20resolve%20the%20problem.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BWarning%5D%20Info%20table%20is%20not%20ready%20to%20be%20used.%20Table%20%EF%BC%87mysql.slave_relay_log_info%EF%BC%87%20cannot%20be%20opened.%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20Event%20Scheduler%3A%20Loaded%200%20events%5Cn2023-08-14%2016%3A07%3A32%20233060%20%5BNote%5D%20%2Fwww%2Fserver%2Fmysql%2Fbin%2Fmysqld%3A%20ready%20for%20connections.%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22d9KNw%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uafaf116b\" id=\"uafaf116b\"><span data-lake-id=\"u986226fe\" id=\"u986226fe\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">发现：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%222023-08-14%2016%3A07%3A32%20233060%200%20%5BNote%5D%20InnoDB%3A%20Initializing%20buffer%20pool%2C%20total%20size%20%3D%20512M%2C%20instances%20%3D%201%2C%20chunk%20size%20%3D%20128M%5Cn2023-08-14%2016%3A07%3A32%20233060%200%20%5BERROR%5D%20InnoDB%3A%20mmap(137428992%20bytes)%20failed%3B%20errno%2012%5Cn2023-08-14%2016%3A07%3A32%20233060%200%20%5BERROR%5D%20InnoDB%3A%20Cannot%20allocate%20memory%20for%20the%20buffer%20pool%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22nvhKU%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf0f921da\" id=\"uf0f921da\" style=\"text-align: justify\"><span data-lake-id=\"uc62b6e32\" id=\"uc62b6e32\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">应该是内存不够启动mysql服务了。</span></p><p data-lake-id=\"uf5f662c3\" id=\"uf5f662c3\" style=\"text-align: justify\"><span data-lake-id=\"u9db0b038\" id=\"u9db0b038\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">注意：报错信息里所需内存大小为：137428992 bytes = 137428992 / 1024 / 1024 M = 131.0625 M</span></p><h2 data-lake-id=\"HEYwS\" id=\"HEYwS\" style=\"text-align: justify\"><span data-lake-id=\"u250710cf\" id=\"u250710cf\" style=\"color: rgb(51, 51, 51)\">3、查询内存情况</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22%23%20%E4%BB%A5M%E4%B8%BA%E5%8D%95%E4%BD%8D%E6%98%BE%E7%A4%BA%E5%86%85%E5%AD%98%E6%83%85%E5%86%B5%5Cnfree%20-m%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iX1Zd%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uee8bc6b3\" id=\"uee8bc6b3\"><span data-lake-id=\"ua8733801\" id=\"ua8733801\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">得到：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22%23%20free%20-m%5Cntotal%20used%20free%20shared%20buff%2Fcache%20available%5CnMem%3A%201946%201829%2016%204%20100%2070%5CnSwap%3A%201023%201001%2022%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22h9xFn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufc0efa07\" id=\"ufc0efa07\" style=\"text-align: justify\"><span data-lake-id=\"u3ba1c273\" id=\"u3ba1c273\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">发现此时服务器相关内存情况为：</span></p><ul list=\"u76e7d50d\"><li fid=\"u6067d944\" data-lake-id=\"u28b9b6f8\" id=\"u28b9b6f8\" style=\"text-align: justify\"><span data-lake-id=\"u6f1594a1\" id=\"u6f1594a1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">free: 16 M</span></li><li fid=\"u6067d944\" data-lake-id=\"u2b911424\" id=\"u2b911424\" style=\"text-align: justify\"><span data-lake-id=\"u34c5e8a5\" id=\"u34c5e8a5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">buff/cache: 100 M</span></li><li fid=\"u6067d944\" data-lake-id=\"u108ea1de\" id=\"u108ea1de\" style=\"text-align: justify\"><span data-lake-id=\"ubb55a00c\" id=\"ubb55a00c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">available: 70 M</span></li></ul><p data-lake-id=\"u76952d20\" id=\"u76952d20\" style=\"text-align: justify\"><span data-lake-id=\"u3e8a2174\" id=\"u3e8a2174\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这几个数据量都很可怜了。所以我们可以增大可用内存，停掉一些不用的服务，或者减少mysql所需内存。</span></p><h2 data-lake-id=\"tekbk\" id=\"tekbk\" style=\"text-align: justify\"><span data-lake-id=\"u767b2096\" id=\"u767b2096\" style=\"color: rgb(51, 51, 51)\">4、修改mysql配置文件</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22vi%20%2Fetc%2Fmy.cnf%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22MExBK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud7d49e19\" id=\"ud7d49e19\" style=\"text-align: justify\"><span data-lake-id=\"u8349c4ac\" id=\"u8349c4ac\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">然后：</span></p><ul list=\"ue2cc11e7\"><li fid=\"u1d29a7cb\" data-lake-id=\"ub2483614\" id=\"ub2483614\" style=\"text-align: justify\"><span data-lake-id=\"u5625f4f4\" id=\"u5625f4f4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">将</span><span data-lake-id=\"u535dfe74\" id=\"u535dfe74\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">innodb_buffer_pool_size = 512M</span><span data-lake-id=\"udf432bcf\" id=\"udf432bcf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> 修改为</span><span data-lake-id=\"u0e0ba066\" id=\"u0e0ba066\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">innodb_buffer_pool_size = 64M</span></li><li fid=\"u1d29a7cb\" data-lake-id=\"u730ae967\" id=\"u730ae967\" style=\"text-align: justify\"><span data-lake-id=\"u541e22eb\" id=\"u541e22eb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">将</span><span data-lake-id=\"ue83bdf58\" id=\"ue83bdf58\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">join_buffer_size = 512M</span><span data-lake-id=\"ueb4b1e46\" id=\"ueb4b1e46\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> 改为</span><span data-lake-id=\"u235c68fa\" id=\"u235c68fa\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">join_buffer_size = 64M</span></li></ul><p data-lake-id=\"u00bec686\" id=\"u00bec686\" style=\"text-align: justify\"><span data-lake-id=\"u75bd25a0\" id=\"u75bd25a0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">然后，重启mysql服务：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22sql%22%2C%22code%22%3A%22service%20mysqld%20restart%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22TdnmB%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"QD0Ol\" id=\"QD0Ol\" style=\"text-align: justify\"><span data-lake-id=\"u7b9d915e\" id=\"u7b9d915e\" style=\"color: rgb(51, 51, 51)\">5、验证mysql服务是否正常</span></h2><p data-lake-id=\"ub1ec741d\" id=\"ub1ec741d\" style=\"text-align: justify\"><span data-lake-id=\"uc812ffdd\" id=\"uc812ffdd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">打开网站，发现数据展示正常</span></p><p data-lake-id=\"u37a650be\" id=\"u37a650be\" style=\"text-align: justify\"><span data-lake-id=\"ub517a28a\" id=\"ub517a28a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">完毕</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 1565,
    "created_at": "2023-08-14T08:05:55.000Z",
    "updated_at": "2023-08-14T08:11:16.000Z",
    "content_updated_at": "2023-08-14T08:11:16.000Z",
    "published_at": "2023-08-14T08:11:16.000Z",
    "first_published_at": "2023-08-14T08:11:15.543Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1924707861,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 135488464,
    "type": "Doc",
    "slug": "ibf8huh9p9n5golw",
    "title": "4种方法替换JavaScript里所有出现的字符串",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author:  小灰灰cover:在JavaScript代码中出现这个字符串： \"Test abc...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author:  小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">在JavaScript代码中出现这个字符串： <br /></span></p><pre data-language=\"plain\" id=\"Fpjx3\" class=\"ne-codeblock language-plain\"><code>&quot;Test abc test test abc test test test abc test test abc&quot;</code></pre><p id=\"u67e71e00\" class=\"ne-p\"><span class=\"ne-text\">比如直接使用replace替换的方法，如下：</span></p><pre data-language=\"plain\" id=\"dKdsK\" class=\"ne-codeblock language-plain\"><code>str = str.replace('abc', '');</code></pre><p id=\"u68933344\" class=\"ne-p\"><span class=\"ne-text\">似乎只删除了abc上面字符串中第一次出现的。我怎样才能替换它的所有出现？下面介绍4种替换所有出现字符串的方法。</span></p><p id=\"ueaef470c\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"wV08d\"><span class=\"ne-text\">方式一、使用replace加正则</span></h1><p id=\"uf41b8ed4\" class=\"ne-p\"><span class=\"ne-text\">必须启用正则表达式上的全局标志，才能使replace()方法替换模式出现的所有内容，我们可以这样做：</span></p><ol class=\"ne-ol\"><li id=\"u308d896a\" data-lake-index-type=\"0\"><span class=\"ne-text\">在正则表达式文字中，将g附加到标志部分：/abc/g。<br /></span></li><li id=\"uf9df9162\" data-lake-index-type=\"0\"><span class=\"ne-text\">对于正则表达式构造函数，使用 flags 参数:new RegExp(' abc  '， 'g')<br /></span></li></ol><p id=\"u0ef8bbcc\" class=\"ne-p\"><span class=\"ne-text\">代码如下：</span></p><pre data-language=\"plain\" id=\"ljcUu\" class=\"ne-codeblock language-plain\"><code>str = str.replace(/abc/g, '');</code></pre><p id=\"u60a4b947\" class=\"ne-p\"><span class=\"ne-text\">或者：</span></p><pre data-language=\"plain\" id=\"kAf6N\" class=\"ne-codeblock language-plain\"><code>var find = 'abc';var re = new RegExp(find, 'g');str = str.replace(re, '');</code></pre><p id=\"u6ef31d84\" class=\"ne-p\"><span class=\"ne-text\">可以通过封装方法，进一步简化它。</span></p><pre data-language=\"plain\" id=\"Ot55Q\" class=\"ne-codeblock language-plain\"><code>function replaceAll(str, find, replace) {  return str.replace(new RegExp(find, 'g'), replace);}</code></pre><p id=\"u5277468e\" class=\"ne-p\"><span class=\"ne-text\">注意：正则表达式包含特殊（元）字符，因此在find上面的函数中盲目传递参数而不对其进行预处理以转义这些字符是危险的。</span></p><p id=\"u84b04b86\" class=\"ne-p\"><span class=\"ne-text\">因此，为了使上述replaceAll()功能更安全，如果您还包含以下内容，则可以将其修改为以下内容escapeRegExp：</span></p><pre data-language=\"plain\" id=\"bnwhG\" class=\"ne-codeblock language-plain\"><code>function escapeRegExp(string) {  return string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&amp;'); // $&amp; means the whole matched string}</code></pre><pre data-language=\"plain\" id=\"MD4Yy\" class=\"ne-codeblock language-plain\"><code>function replaceAll(str, find, replace) {  return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);}</code></pre><h1 id=\"Ujgli\"><span class=\"ne-text\">方式二、replaceAll() 方法</span></h1><p id=\"u94c83b60\" class=\"ne-p\"><span class=\"ne-text\">新的提案String.prototype.replaceAll()(在第3阶段)将replaceAll()方法引入到 JavaScript 的字符串中。</span></p><p id=\"u1e3cc0f9\" class=\"ne-p\"><span class=\"ne-text\">replaceAll(search, replaceWith)字符串方法用replaceWith替换所有的search字符串，没有任何变通方法。</span></p><pre data-language=\"plain\" id=\"Dv3WA\" class=\"ne-codeblock language-plain\"><code>let result = &quot;1 abc 2 abc 3&quot;.replaceAll(&quot;abc&quot;, &quot;xyz&quot;);// `result` is &quot;1 xyz 2 xyz 3&quot;</code></pre><p id=\"u9db2f2f6\" class=\"ne-p\"><span class=\"ne-text\">但是首先检查我可以使用或其他兼容性表，以确保您的目标浏览器首先添加了对它的支持。</span></p><p id=\"uaeae5429\" class=\"ne-p\"><span class=\"ne-text\">replaceAll的兼容实现：</span></p><pre data-language=\"plain\" id=\"z9AwQ\" class=\"ne-codeblock language-plain\"><code>String.prototype.replaceAll = String.prototype.replaceAll || function(string, replaced) {  return this.replace(new RegExp(string, 'g'), replaced);};</code></pre><h1 id=\"QX8wD\"><span class=\"ne-text\">方式三、使用 split 和 join 的方法</span></h1><p id=\"ud5993e89\" class=\"ne-p\"><span class=\"ne-text\">不使用任何正则表达式的最简单方法是 split 和 join，这种方法主要包含二个阶段：</span></p><ol class=\"ne-ol\"><li id=\"u67691dbb\" data-lake-index-type=\"0\"><span class=\"ne-text\">使用 split 方法，根据指定的字符将字符串分成多个部分。</span></li><li id=\"u0fa8d20e\" data-lake-index-type=\"0\"><span class=\"ne-text\">然后使用 join 方法将分割的多个部分连接在一直，并在它们之间插入指定的字符。</span></li></ol><p id=\"ub6ee9850\" class=\"ne-p\"><span class=\"ne-text\">作为简单文字字符串的正则表达式的替代方案，您可以使用：</span></p><pre data-language=\"plain\" id=\"GV3a4\" class=\"ne-codeblock language-plain\"><code>str = &quot;Test abc test test abc test...&quot;.split(&quot;abc&quot;).join(&quot;&quot;);</code></pre><p id=\"u22640cff\" class=\"ne-p\"><span class=\"ne-text\">一般模式是</span></p><pre data-language=\"plain\" id=\"CxG99\" class=\"ne-codeblock language-plain\"><code>str.split(search).join(replacement)</code></pre><h1 id=\"HSUty\"><span class=\"ne-text\">方法四、利用循环</span></h1><p id=\"u465bfde0\" class=\"ne-p\"><span class=\"ne-text\">基于while循环的解决方案很慢，通常对小字符串慢约4倍，对长字符串慢约 3000 倍。如下：</span></p><pre data-language=\"plain\" id=\"ZUt8e\" class=\"ne-codeblock language-plain\"><code>while(str.includes(&quot;abc&quot;)){    str = str.replace(&quot;abc&quot;, &quot;replaced text&quot;);}</code></pre><p id=\"u4e39de30\" class=\"ne-p\"><span class=\"ne-text\"><br /></span></p><h1 id=\"IaORW\"><span class=\"ne-text\"><br /></span></h1></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author:  小灰灰<br />cover:\n\n---\n\n<br />在JavaScript代码中出现这个字符串： \n\n```\n\"Test abc test test abc test test test abc test test abc\"\n```\n比如直接使用replace替换的方法，如下：\n```\nstr = str.replace('abc', '');\n```\n似乎只删除了abc上面字符串中第一次出现的。我怎样才能替换它的所有出现？下面介绍4种替换所有出现字符串的方法。\n\n<a name=\"wV08d\"></a>\n# 方式一、使用replace加正则\n必须启用正则表达式上的全局标志，才能使replace()方法替换模式出现的所有内容，我们可以这样做：\n\n1. 在正则表达式文字中，将g附加到标志部分：/abc/g。\n\n2. 对于正则表达式构造函数，使用 flags 参数:new RegExp(' abc  '， 'g')\n\n代码如下：\n```\nstr = str.replace(/abc/g, '');\n```\n或者：\n```\nvar find = 'abc';var re = new RegExp(find, 'g');str = str.replace(re, '');\n```\n可以通过封装方法，进一步简化它。\n```\nfunction replaceAll(str, find, replace) {  return str.replace(new RegExp(find, 'g'), replace);}\n```\n注意：正则表达式包含特殊（元）字符，因此在find上面的函数中盲目传递参数而不对其进行预处理以转义这些字符是危险的。<br />因此，为了使上述replaceAll()功能更安全，如果您还包含以下内容，则可以将其修改为以下内容escapeRegExp：\n```\nfunction escapeRegExp(string) {  return string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string}\n```\n```\nfunction replaceAll(str, find, replace) {  return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);}\n```\n<a name=\"Ujgli\"></a>\n# 方式二、replaceAll() 方法\n新的提案String.prototype.replaceAll()(在第3阶段)将replaceAll()方法引入到 JavaScript 的字符串中。<br />replaceAll(search, replaceWith)字符串方法用replaceWith替换所有的search字符串，没有任何变通方法。\n```\nlet result = \"1 abc 2 abc 3\".replaceAll(\"abc\", \"xyz\");// `result` is \"1 xyz 2 xyz 3\"\n```\n但是首先检查我可以使用或其他兼容性表，以确保您的目标浏览器首先添加了对它的支持。<br />replaceAll的兼容实现：\n```\nString.prototype.replaceAll = String.prototype.replaceAll || function(string, replaced) {  return this.replace(new RegExp(string, 'g'), replaced);};\n```\n<a name=\"QX8wD\"></a>\n# 方式三、使用 split 和 join 的方法\n不使用任何正则表达式的最简单方法是 split 和 join，这种方法主要包含二个阶段：\n\n1. 使用 split 方法，根据指定的字符将字符串分成多个部分。\n2. 然后使用 join 方法将分割的多个部分连接在一直，并在它们之间插入指定的字符。\n\n作为简单文字字符串的正则表达式的替代方案，您可以使用：\n```\nstr = \"Test abc test test abc test...\".split(\"abc\").join(\"\");\n```\n一般模式是\n```\nstr.split(search).join(replacement)\n```\n<a name=\"HSUty\"></a>\n# 方法四、利用循环\n基于while循环的解决方案很慢，通常对小字符串慢约4倍，对长字符串慢约 3000 倍。如下：\n```\nwhile(str.includes(\"abc\")){    str = str.replace(\"abc\", \"replaced text\");}\n```\n\n\n<a name=\"IaORW\"></a>\n# <br /><br />\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author:  小灰灰</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">在JavaScript代码中出现这个字符串： <br /></span></p><pre data-language=\"plain\" id=\"Fpjx3\" class=\"ne-codeblock language-plain\"><code>&quot;Test abc test test abc test test test abc test test abc&quot;</code></pre><p id=\"u67e71e00\" class=\"ne-p\"><span class=\"ne-text\">比如直接使用replace替换的方法，如下：</span></p><pre data-language=\"plain\" id=\"dKdsK\" class=\"ne-codeblock language-plain\"><code>str = str.replace('abc', '');</code></pre><p id=\"u68933344\" class=\"ne-p\"><span class=\"ne-text\">似乎只删除了abc上面字符串中第一次出现的。我怎样才能替换它的所有出现？下面介绍4种替换所有出现字符串的方法。</span></p><p id=\"ueaef470c\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"wV08d\"><span class=\"ne-text\">方式一、使用replace加正则</span></h1><p id=\"uf41b8ed4\" class=\"ne-p\"><span class=\"ne-text\">必须启用正则表达式上的全局标志，才能使replace()方法替换模式出现的所有内容，我们可以这样做：</span></p><ol class=\"ne-ol\"><li id=\"u308d896a\" data-lake-index-type=\"0\"><span class=\"ne-text\">在正则表达式文字中，将g附加到标志部分：/abc/g。<br /></span></li><li id=\"uf9df9162\" data-lake-index-type=\"0\"><span class=\"ne-text\">对于正则表达式构造函数，使用 flags 参数:new RegExp(' abc  '， 'g')<br /></span></li></ol><p id=\"u0ef8bbcc\" class=\"ne-p\"><span class=\"ne-text\">代码如下：</span></p><pre data-language=\"plain\" id=\"ljcUu\" class=\"ne-codeblock language-plain\"><code>str = str.replace(/abc/g, '');</code></pre><p id=\"u60a4b947\" class=\"ne-p\"><span class=\"ne-text\">或者：</span></p><pre data-language=\"plain\" id=\"kAf6N\" class=\"ne-codeblock language-plain\"><code>var find = 'abc';var re = new RegExp(find, 'g');str = str.replace(re, '');</code></pre><p id=\"u6ef31d84\" class=\"ne-p\"><span class=\"ne-text\">可以通过封装方法，进一步简化它。</span></p><pre data-language=\"plain\" id=\"Ot55Q\" class=\"ne-codeblock language-plain\"><code>function replaceAll(str, find, replace) {  return str.replace(new RegExp(find, 'g'), replace);}</code></pre><p id=\"u5277468e\" class=\"ne-p\"><span class=\"ne-text\">注意：正则表达式包含特殊（元）字符，因此在find上面的函数中盲目传递参数而不对其进行预处理以转义这些字符是危险的。</span></p><p id=\"u84b04b86\" class=\"ne-p\"><span class=\"ne-text\">因此，为了使上述replaceAll()功能更安全，如果您还包含以下内容，则可以将其修改为以下内容escapeRegExp：</span></p><pre data-language=\"plain\" id=\"bnwhG\" class=\"ne-codeblock language-plain\"><code>function escapeRegExp(string) {  return string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&amp;'); // $&amp; means the whole matched string}</code></pre><pre data-language=\"plain\" id=\"MD4Yy\" class=\"ne-codeblock language-plain\"><code>function replaceAll(str, find, replace) {  return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);}</code></pre><h1 id=\"Ujgli\"><span class=\"ne-text\">方式二、replaceAll() 方法</span></h1><p id=\"u94c83b60\" class=\"ne-p\"><span class=\"ne-text\">新的提案String.prototype.replaceAll()(在第3阶段)将replaceAll()方法引入到 JavaScript 的字符串中。</span></p><p id=\"u1e3cc0f9\" class=\"ne-p\"><span class=\"ne-text\">replaceAll(search, replaceWith)字符串方法用replaceWith替换所有的search字符串，没有任何变通方法。</span></p><pre data-language=\"plain\" id=\"Dv3WA\" class=\"ne-codeblock language-plain\"><code>let result = &quot;1 abc 2 abc 3&quot;.replaceAll(&quot;abc&quot;, &quot;xyz&quot;);// `result` is &quot;1 xyz 2 xyz 3&quot;</code></pre><p id=\"u9db2f2f6\" class=\"ne-p\"><span class=\"ne-text\">但是首先检查我可以使用或其他兼容性表，以确保您的目标浏览器首先添加了对它的支持。</span></p><p id=\"uaeae5429\" class=\"ne-p\"><span class=\"ne-text\">replaceAll的兼容实现：</span></p><pre data-language=\"plain\" id=\"z9AwQ\" class=\"ne-codeblock language-plain\"><code>String.prototype.replaceAll = String.prototype.replaceAll || function(string, replaced) {  return this.replace(new RegExp(string, 'g'), replaced);};</code></pre><h1 id=\"QX8wD\"><span class=\"ne-text\">方式三、使用 split 和 join 的方法</span></h1><p id=\"ud5993e89\" class=\"ne-p\"><span class=\"ne-text\">不使用任何正则表达式的最简单方法是 split 和 join，这种方法主要包含二个阶段：</span></p><ol class=\"ne-ol\"><li id=\"u67691dbb\" data-lake-index-type=\"0\"><span class=\"ne-text\">使用 split 方法，根据指定的字符将字符串分成多个部分。</span></li><li id=\"u0fa8d20e\" data-lake-index-type=\"0\"><span class=\"ne-text\">然后使用 join 方法将分割的多个部分连接在一直，并在它们之间插入指定的字符。</span></li></ol><p id=\"ub6ee9850\" class=\"ne-p\"><span class=\"ne-text\">作为简单文字字符串的正则表达式的替代方案，您可以使用：</span></p><pre data-language=\"plain\" id=\"GV3a4\" class=\"ne-codeblock language-plain\"><code>str = &quot;Test abc test test abc test...&quot;.split(&quot;abc&quot;).join(&quot;&quot;);</code></pre><p id=\"u22640cff\" class=\"ne-p\"><span class=\"ne-text\">一般模式是</span></p><pre data-language=\"plain\" id=\"CxG99\" class=\"ne-codeblock language-plain\"><code>str.split(search).join(replacement)</code></pre><h1 id=\"HSUty\"><span class=\"ne-text\">方法四、利用循环</span></h1><p id=\"u465bfde0\" class=\"ne-p\"><span class=\"ne-text\">基于while循环的解决方案很慢，通常对小字符串慢约4倍，对长字符串慢约 3000 倍。如下：</span></p><pre data-language=\"plain\" id=\"ZUt8e\" class=\"ne-codeblock language-plain\"><code>while(str.includes(&quot;abc&quot;)){    str = str.replace(&quot;abc&quot;, &quot;replaced text&quot;);}</code></pre><p id=\"u4e39de30\" class=\"ne-p\"><span class=\"ne-text\"><br /></span></p><h1 id=\"IaORW\"><span class=\"ne-text\"><br /></span></h1></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author:  小灰灰</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"ue4ab87b6\" id=\"ue4ab87b6\"><br /></span><span data-lake-id=\"uad5cd8aa\" id=\"uad5cd8aa\">在JavaScript代码中出现这个字符串： <br /><br /></span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5C%22Test%20abc%20test%20test%20abc%20test%20test%20test%20abc%20test%20test%20abc%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Fpjx3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u67e71e00\" id=\"u67e71e00\"><span data-lake-id=\"u9f50c64e\" id=\"u9f50c64e\">比如直接使用replace替换的方法，如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22str%20%3D%20str.replace('abc'%2C%20'')%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22dKdsK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u68933344\" id=\"u68933344\"><span data-lake-id=\"u6bfc09ac\" id=\"u6bfc09ac\">似乎只删除了abc上面字符串中第一次出现的。我怎样才能替换它的所有出现？下面介绍4种替换所有出现字符串的方法。</span></p><p data-lake-id=\"ueaef470c\" id=\"ueaef470c\"><span data-lake-id=\"u28b6f4f6\" id=\"u28b6f4f6\">​</span><br></p><h1 data-lake-id=\"wV08d\" id=\"wV08d\"><span data-lake-id=\"u53390101\" id=\"u53390101\">方式一、使用replace加正则</span></h1><p data-lake-id=\"uf41b8ed4\" id=\"uf41b8ed4\"><span data-lake-id=\"uf329d026\" id=\"uf329d026\">必须启用正则表达式上的全局标志，才能使replace()方法替换模式出现的所有内容，我们可以这样做：</span></p><ol list=\"ub00cb06f\"><li fid=\"ue9d6e772\" data-lake-id=\"u308d896a\" id=\"u308d896a\"><span data-lake-id=\"uf76dabd7\" id=\"uf76dabd7\">在正则表达式文字中，将g附加到标志部分：/abc/g。<br /><br /></span></li><li fid=\"ue9d6e772\" data-lake-id=\"uf9df9162\" id=\"uf9df9162\"><span data-lake-id=\"u7dbb4876\" id=\"u7dbb4876\">对于正则表达式构造函数，使用 flags 参数:new RegExp(' abc  '， 'g')<br /><br /></span></li></ol><p data-lake-id=\"u0ef8bbcc\" id=\"u0ef8bbcc\"><span data-lake-id=\"u6f1b7e19\" id=\"u6f1b7e19\">代码如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22str%20%3D%20str.replace(%2Fabc%2Fg%2C%20'')%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ljcUu%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u60a4b947\" id=\"u60a4b947\"><span data-lake-id=\"ue71269d5\" id=\"ue71269d5\">或者：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22var%20find%20%3D%20'abc'%3Bvar%20re%20%3D%20new%20RegExp(find%2C%20'g')%3Bstr%20%3D%20str.replace(re%2C%20'')%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kAf6N%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u6ef31d84\" id=\"u6ef31d84\"><span data-lake-id=\"ub13566c5\" id=\"ub13566c5\">可以通过封装方法，进一步简化它。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22function%20replaceAll(str%2C%20find%2C%20replace)%20%7B%20%20return%20str.replace(new%20RegExp(find%2C%20'g')%2C%20replace)%3B%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Ot55Q%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u5277468e\" id=\"u5277468e\"><span data-lake-id=\"uef31491f\" id=\"uef31491f\">注意：正则表达式包含特殊（元）字符，因此在find上面的函数中盲目传递参数而不对其进行预处理以转义这些字符是危险的。</span></p><p data-lake-id=\"u84b04b86\" id=\"u84b04b86\"><span data-lake-id=\"u7bb8fb39\" id=\"u7bb8fb39\">因此，为了使上述replaceAll()功能更安全，如果您还包含以下内容，则可以将其修改为以下内容escapeRegExp：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22function%20escapeRegExp(string)%20%7B%20%20return%20string.replace(%2F%5B.*%2B%5C%5C-%3F%5E%24%7B%7D()%7C%5B%5C%5C%5D%5C%5C%5C%5C%5D%2Fg%2C%20'%5C%5C%5C%5C%24%26')%3B%20%2F%2F%20%24%26%20means%20the%20whole%20matched%20string%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bnwhG%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22function%20replaceAll(str%2C%20find%2C%20replace)%20%7B%20%20return%20str.replace(new%20RegExp(escapeRegExp(find)%2C%20'g')%2C%20replace)%3B%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22MD4Yy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"Ujgli\" id=\"Ujgli\"><span data-lake-id=\"u93276def\" id=\"u93276def\">方式二、replaceAll() 方法</span></h1><p data-lake-id=\"u94c83b60\" id=\"u94c83b60\"><span data-lake-id=\"u6a99acdc\" id=\"u6a99acdc\">新的提案String.prototype.replaceAll()(在第3阶段)将replaceAll()方法引入到 JavaScript 的字符串中。</span></p><p data-lake-id=\"u1e3cc0f9\" id=\"u1e3cc0f9\"><span data-lake-id=\"uee092150\" id=\"uee092150\">replaceAll(search, replaceWith)字符串方法用replaceWith替换所有的search字符串，没有任何变通方法。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22let%20result%20%3D%20%5C%221%20abc%202%20abc%203%5C%22.replaceAll(%5C%22abc%5C%22%2C%20%5C%22xyz%5C%22)%3B%2F%2F%20%60result%60%20is%20%5C%221%20xyz%202%20xyz%203%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Dv3WA%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u9db2f2f6\" id=\"u9db2f2f6\"><span data-lake-id=\"u0be53960\" id=\"u0be53960\">但是首先检查我可以使用或其他兼容性表，以确保您的目标浏览器首先添加了对它的支持。</span></p><p data-lake-id=\"uaeae5429\" id=\"uaeae5429\"><span data-lake-id=\"u9d8cc416\" id=\"u9d8cc416\">replaceAll的兼容实现：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22String.prototype.replaceAll%20%3D%20String.prototype.replaceAll%20%7C%7C%20function(string%2C%20replaced)%20%7B%20%20return%20this.replace(new%20RegExp(string%2C%20'g')%2C%20replaced)%3B%7D%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22z9AwQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"QX8wD\" id=\"QX8wD\"><span data-lake-id=\"u10bd5ec9\" id=\"u10bd5ec9\">方式三、使用 split 和 join 的方法</span></h1><p data-lake-id=\"ud5993e89\" id=\"ud5993e89\"><span data-lake-id=\"u42b683e2\" id=\"u42b683e2\">不使用任何正则表达式的最简单方法是 split 和 join，这种方法主要包含二个阶段：</span></p><ol list=\"u1c9a0063\"><li fid=\"ue04ae6ed\" data-lake-id=\"u67691dbb\" id=\"u67691dbb\"><span data-lake-id=\"uc9d2856b\" id=\"uc9d2856b\">使用 split 方法，根据指定的字符将字符串分成多个部分。</span></li><li fid=\"ue04ae6ed\" data-lake-id=\"u0fa8d20e\" id=\"u0fa8d20e\"><span data-lake-id=\"u3f0ee2f5\" id=\"u3f0ee2f5\">然后使用 join 方法将分割的多个部分连接在一直，并在它们之间插入指定的字符。</span></li></ol><p data-lake-id=\"ub6ee9850\" id=\"ub6ee9850\"><span data-lake-id=\"uaf479287\" id=\"uaf479287\">作为简单文字字符串的正则表达式的替代方案，您可以使用：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22str%20%3D%20%5C%22Test%20abc%20test%20test%20abc%20test...%5C%22.split(%5C%22abc%5C%22).join(%5C%22%5C%22)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22GV3a4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u22640cff\" id=\"u22640cff\"><span data-lake-id=\"u6772739a\" id=\"u6772739a\">一般模式是</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22str.split(search).join(replacement)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22CxG99%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"HSUty\" id=\"HSUty\"><span data-lake-id=\"uc4ca0a53\" id=\"uc4ca0a53\">方法四、利用循环</span></h1><p data-lake-id=\"u465bfde0\" id=\"u465bfde0\"><span data-lake-id=\"u90d4f9d3\" id=\"u90d4f9d3\">基于while循环的解决方案很慢，通常对小字符串慢约4倍，对长字符串慢约 3000 倍。如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22while(str.includes(%5C%22abc%5C%22))%7B%20%20%20%20str%20%3D%20str.replace(%5C%22abc%5C%22%2C%20%5C%22replaced%20text%5C%22)%3B%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZUt8e%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4e39de30\" id=\"u4e39de30\"><span data-lake-id=\"ua41ed4bb\" id=\"ua41ed4bb\"><br /><br /></span></p><h1 data-lake-id=\"IaORW\" id=\"IaORW\"><span data-lake-id=\"ud5d01266\" id=\"ud5d01266\"><br /><br /></span></h1>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 711,
    "created_at": "2023-08-07T01:43:46.000Z",
    "updated_at": "2023-08-09T02:44:41.000Z",
    "content_updated_at": "2023-08-09T02:44:41.000Z",
    "published_at": "2023-08-09T02:44:41.000Z",
    "first_published_at": "2023-08-07T01:45:06.582Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913918359,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 134550208,
    "type": "Doc",
    "slug": "iae66lf20in42fhq",
    "title": "Nginx配置导致的503 Service Temporarily Unavailable问题",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: 小灰灰 cover: 问题场景：这两天由于公司人自己请求网站之后，导致网站服务器超负...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author: 小灰灰 </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover: </span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"Hs3fo\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18)\">问题场景：</span></h1><p id=\"ua294175b\" class=\"ne-p\"><span class=\"ne-text\">这两天由于公司人自己请求网站之后，导致网站服务器超负载，为了避免这种攻击我将Nginx配置了单个IP的并发限制，当天还没有问题，但是第二天早上网站访问量多的时候，浏览器出现页面503 Service Temporarily Unavailable，然后我多次刷新，有时候刷新页面正常显示，有时候刷新页面出现样式未加载出来（样式错乱，因为加载css文件返回503状态）的情况，有时候刷新再次出现503 Service Temporarily Unavailable。</span></p><h1 id=\"o2zp4\"><span class=\"ne-text\">问题分析：</span></h1><p id=\"u0fd07a13\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">503 Service Temporarily Unavailable 的意思是服务暂时不可用，结合我上次的配置，我猜测应该是小站并发高了之后导致单个IP超过了我所配置的单个IP所允许并发数量。</span></p><p id=\"ufcb20bee\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">至于为什么全站的并发高了之后才出现503 Service Temporarily Unavailable呢，刚刚配置单个IP并发限制我访问页面是正常的。这个原因应该是</span><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">全站的访问并发高了之后服务器负载高，服务器处理不过来，所以对于单个IP请求一个页面的时候还未处理完成，再次刷新或者跳转别的页面的时候又加入的新的多次请求（包括各种静态文件的请求），所以服务器存在的请求超出了单个IP并发配置的限制</span></strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">，而全站并发不高的时候意味着访问量少，服务器负载低，单个IP请求的并发也相对较少，则不容易出现返回503 Service Temporarily Unavailable的情况。</span></p><h1 id=\"v7hHc\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18)\">解决方案：</span></h1><p id=\"uad7eeff1\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">修改</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">单个IP并发限制的配置，将单个IP并发数限制提升到20，</span><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">这个数字取决于你访问一个页面最多需要走多少次</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">，一般看一次页面有多少次通过</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">的请求，包括css文件、图片文件、字体文件和js文件等等</span></strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">。</span></p><p id=\"ufdee9103\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">配置后重新reload配置，就再也没有出现过页面显示 503 Service Temporarily Unavailable 的情况，当然可能是负载突然下降了的原因，还需要进一步测试，暂时先这样处理。</span></p><p id=\"u63c5143e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">本次将</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx.conf</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">配置文件的</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">server</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">部分配置修改：</span></p><pre data-language=\"plain\" id=\"VNIAm\" class=\"ne-codeblock language-plain\"><code>// 单个IP并发数限制\nserver{\n    limit_conn perip 20;\n    limit_conn perserver 20;\n}</code></pre><p id=\"u46f4ae04\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\"></span></strong></p><h1 id=\"lszsa\"><span class=\"ne-text\">Nginx限制并发连接数与下载速度配置</span></h1><p id=\"u8adc5c32\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">ngx_http_limit_conn_module模块用于限制每个定义密钥的连接数，特别是来自单个IP地址的连接数。而ngx_http_core_module则可以限制下载速度，这两个均是</span><a href=\"https://www.xgss.net/tag/nginx\" data-href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Nginx</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">内置模块，不需要额外安装。</span></p><h3 id=\"pj0TK\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">ngx_http_limit_conn_module限制连接数</span></h3><p id=\"u372d2ddc\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"IKw4L\" class=\"ne-codeblock language-plain\"><code>#需要写在http段内\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\nlocation /download/ {\n        limit_conn addr 10;\n}</code></pre><ul class=\"ne-ul\"><li id=\"u5c02846e\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">$binary_remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: nginx变量，指的是客户端IP</span></li><li id=\"u13816b72\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">zone</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 域的名字，随便填写，这里设置的是addr，后面会再次用到</span></li><li id=\"ub6b23589\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">10m</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 设置共享内存我的理解是客户端的IP会被放入这个内存中，总共享内存不能超过10M，不知道对不对。</span></li><li id=\"ucb133527\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">limit_conn addr 10</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 限制addr这个域的最大连接数为10</span></li></ul><p id=\"uabc2e074\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">但是在</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">HTTP/2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">中每个并发请求被视为单独的连接，如果网站启用了</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">HTTP/2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">上面的设置就没有作用了，可以继续改进一下。以下配置将限制每个客户端IP与服务器的连接数，同时限制与虚拟服务器的连接总数。</span></p><p id=\"u7f929afc\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"GNccX\" class=\"ne-codeblock language-plain\"><code>#写在http段内\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\nserver {\n    ...\n    #限制perip域（客户端IP）的连接数为10\n    limit_conn perip 10;\n    #限制perserver域（当前虚拟服务器）的连接数为100\n    limit_conn perserver 100;\n}</code></pre><p id=\"u925ec998\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">更多详细说明可参考</span><a href=\"https://www.xgss.net/tag/nginx\" data-href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Nginx</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">官方文档：</span><a href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfbGltaXRfY29ubl9tb2R1bGUuaHRtbA==\" data-href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfbGltaXRfY29ubl9tb2R1bGUuaHRtbA==\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html</span></a></p><h3 id=\"bEFFo\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">ngx_http_core_module限制下载速度</span></h3><p id=\"u643a29ed\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"PIuPe\" class=\"ne-codeblock language-plain\"><code>#数据达到100M后再限制速度（注意：这里指的是单个连接达到100M）\nlimit_rate_after 100M;\n#限制单个连接速度为10k/s\nlimit_rate 10k;</code></pre><ul class=\"ne-ul\"><li id=\"u338dee2a\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">limit_rate_after</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 指的是请求的数据达到指定大小后才开始限速（这里设置的是100M）</span></li><li id=\"uf5d986d4\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">limit_rate</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">： 设置单个连接限速值，这里设置的是10k/s，如果限制同一IP最大连接数为10的话，那么总的下载速度不能超过100k/s</span></li></ul><p id=\"u92b5b47e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">更多说明参考</span><a href=\"https://www.xgss.net/tag/nginx\" data-href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Nginx</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">官方文档：</span><a href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNsaW1pdF9yYXRl\" data-href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNsaW1pdF9yYXRl\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate</span></a></p><h3 id=\"PkHWP\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">同时限制连接数和下载速度</span></h3><p id=\"ud42fedbe\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将上面的配置整合一下，我们既要限制单IP的最大连接数，也需要限制下载速度。</span></p><p id=\"u1b1c7439\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"xMOMr\" class=\"ne-codeblock language-plain\"><code>#写在http段内\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\n#写在server段内\nlimit_conn perip 10;\nlimit_conn perserver 100;\nlimit_rate_after 100M;\nlimit_rate 10k;</code></pre><p id=\"u7f66c891\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">上面配置的含义是限制单个IP最大连接数为10个，同时限制单个虚拟服务器的连接总数为100个。当请求的数据达到100M后（指单个连接达到100M）限制连接速度为为10k/s，如果产生了10个连接，最大速度不能超过100k/s</span></p><h3 id=\"pwSpv\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">写在最后</span></h3><p id=\"u28a14a6f\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">配置修改后建议用nginx -t先检查语法，确保没有问题，别忘记重载Nginx使其生效。</span></p></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: 小灰灰 <br />cover: \n\n---\n\n<a name=\"Hs3fo\"></a>\n# <br />问题场景：\n这两天由于公司人自己请求网站之后，导致网站服务器超负载，为了避免这种攻击我将Nginx配置了单个IP的并发限制，当天还没有问题，但是第二天早上网站访问量多的时候，浏览器出现页面503 Service Temporarily Unavailable，然后我多次刷新，有时候刷新页面正常显示，有时候刷新页面出现样式未加载出来（样式错乱，因为加载css文件返回503状态）的情况，有时候刷新再次出现503 Service Temporarily Unavailable。\n<a name=\"o2zp4\"></a>\n# 问题分析：\n503 Service Temporarily Unavailable 的意思是服务暂时不可用，结合我上次的配置，我猜测应该是小站并发高了之后导致单个IP超过了我所配置的单个IP所允许并发数量。<br />至于为什么全站的并发高了之后才出现503 Service Temporarily Unavailable呢，刚刚配置单个IP并发限制我访问页面是正常的。这个原因应该是**全站的访问并发高了之后服务器负载高，服务器处理不过来，所以对于单个IP请求一个页面的时候还未处理完成，再次刷新或者跳转别的页面的时候又加入的新的多次请求（包括各种静态文件的请求），所以服务器存在的请求超出了单个IP并发配置的限制**，而全站并发不高的时候意味着访问量少，服务器负载低，单个IP请求的并发也相对较少，则不容易出现返回503 Service Temporarily Unavailable的情况。\n<a name=\"v7hHc\"></a>\n# 解决方案：\n修改nginx单个IP并发限制的配置，将单个IP并发数限制提升到20，**这个数字取决于你访问一个页面最多需要走多少次nginx，一般看一次页面有多少次通过nginx的请求，包括css文件、图片文件、字体文件和js文件等等**。<br />配置后重新reload配置，就再也没有出现过页面显示 503 Service Temporarily Unavailable 的情况，当然可能是负载突然下降了的原因，还需要进一步测试，暂时先这样处理。<br />本次将nginx.conf配置文件的server部分配置修改：\n```\n// 单个IP并发数限制\nserver{\n    limit_conn perip 20;\n    limit_conn perserver 20;\n}\n```\n<br />\n<a name=\"lszsa\"></a>\n# Nginx限制并发连接数与下载速度配置\nngx_http_limit_conn_module模块用于限制每个定义密钥的连接数，特别是来自单个IP地址的连接数。而ngx_http_core_module则可以限制下载速度，这两个均是[Nginx](https://www.xgss.net/tag/nginx)内置模块，不需要额外安装。\n<a name=\"pj0TK\"></a>\n### ngx_http_limit_conn_module限制连接数\n\n```\n#需要写在http段内\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\nlocation /download/ {\n        limit_conn addr 10;\n}\n```\n\n- $binary_remote_addr : nginx变量，指的是客户端IP\n- zone : 域的名字，随便填写，这里设置的是addr，后面会再次用到\n- 10m : 设置共享内存我的理解是客户端的IP会被放入这个内存中，总共享内存不能超过10M，不知道对不对。\n- limit_conn addr 10 : 限制addr这个域的最大连接数为10\n\n但是在HTTP/2中每个并发请求被视为单独的连接，如果网站启用了HTTP/2上面的设置就没有作用了，可以继续改进一下。以下配置将限制每个客户端IP与服务器的连接数，同时限制与虚拟服务器的连接总数。\n\n```\n#写在http段内\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\nserver {\n    ...\n    #限制perip域（客户端IP）的连接数为10\n    limit_conn perip 10;\n    #限制perserver域（当前虚拟服务器）的连接数为100\n    limit_conn perserver 100;\n}\n```\n更多详细说明可参考[Nginx](https://www.xgss.net/tag/nginx)官方文档：[http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html](https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfbGltaXRfY29ubl9tb2R1bGUuaHRtbA==)\n<a name=\"bEFFo\"></a>\n### ngx_http_core_module限制下载速度\n\n```\n#数据达到100M后再限制速度（注意：这里指的是单个连接达到100M）\nlimit_rate_after 100M;\n#限制单个连接速度为10k/s\nlimit_rate 10k;\n```\n\n- limit_rate_after : 指的是请求的数据达到指定大小后才开始限速（这里设置的是100M）\n- limit_rate ： 设置单个连接限速值，这里设置的是10k/s，如果限制同一IP最大连接数为10的话，那么总的下载速度不能超过100k/s\n\n更多说明参考[Nginx](https://www.xgss.net/tag/nginx)官方文档：[http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate](https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNsaW1pdF9yYXRl)\n<a name=\"PkHWP\"></a>\n### 同时限制连接数和下载速度\n将上面的配置整合一下，我们既要限制单IP的最大连接数，也需要限制下载速度。\n\n```\n#写在http段内\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\n#写在server段内\nlimit_conn perip 10;\nlimit_conn perserver 100;\nlimit_rate_after 100M;\nlimit_rate 10k;\n```\n上面配置的含义是限制单个IP最大连接数为10个，同时限制单个虚拟服务器的连接总数为100个。当请求的数据达到100M后（指单个连接达到100M）限制连接速度为为10k/s，如果产生了10个连接，最大速度不能超过100k/s\n<a name=\"pwSpv\"></a>\n### 写在最后\n配置修改后建议用nginx -t先检查语法，确保没有问题，别忘记重载Nginx使其生效。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author: 小灰灰 </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover: </span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"Hs3fo\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18)\">问题场景：</span></h1><p id=\"ua294175b\" class=\"ne-p\"><span class=\"ne-text\">这两天由于公司人自己请求网站之后，导致网站服务器超负载，为了避免这种攻击我将Nginx配置了单个IP的并发限制，当天还没有问题，但是第二天早上网站访问量多的时候，浏览器出现页面503 Service Temporarily Unavailable，然后我多次刷新，有时候刷新页面正常显示，有时候刷新页面出现样式未加载出来（样式错乱，因为加载css文件返回503状态）的情况，有时候刷新再次出现503 Service Temporarily Unavailable。</span></p><h1 id=\"o2zp4\"><span class=\"ne-text\">问题分析：</span></h1><p id=\"u0fd07a13\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">503 Service Temporarily Unavailable 的意思是服务暂时不可用，结合我上次的配置，我猜测应该是小站并发高了之后导致单个IP超过了我所配置的单个IP所允许并发数量。</span></p><p id=\"ufcb20bee\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">至于为什么全站的并发高了之后才出现503 Service Temporarily Unavailable呢，刚刚配置单个IP并发限制我访问页面是正常的。这个原因应该是</span><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">全站的访问并发高了之后服务器负载高，服务器处理不过来，所以对于单个IP请求一个页面的时候还未处理完成，再次刷新或者跳转别的页面的时候又加入的新的多次请求（包括各种静态文件的请求），所以服务器存在的请求超出了单个IP并发配置的限制</span></strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">，而全站并发不高的时候意味着访问量少，服务器负载低，单个IP请求的并发也相对较少，则不容易出现返回503 Service Temporarily Unavailable的情况。</span></p><h1 id=\"v7hHc\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18)\">解决方案：</span></h1><p id=\"uad7eeff1\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">修改</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">单个IP并发限制的配置，将单个IP并发数限制提升到20，</span><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">这个数字取决于你访问一个页面最多需要走多少次</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">，一般看一次页面有多少次通过</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">的请求，包括css文件、图片文件、字体文件和js文件等等</span></strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">。</span></p><p id=\"ufdee9103\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">配置后重新reload配置，就再也没有出现过页面显示 503 Service Temporarily Unavailable 的情况，当然可能是负载突然下降了的原因，还需要进一步测试，暂时先这样处理。</span></p><p id=\"u63c5143e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">本次将</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">nginx.conf</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">配置文件的</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 14px; background-color: rgb(246, 246, 246)\">server</span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\">部分配置修改：</span></p><pre data-language=\"plain\" id=\"VNIAm\" class=\"ne-codeblock language-plain\"><code>// 单个IP并发数限制\nserver{\n    limit_conn perip 20;\n    limit_conn perserver 20;\n}</code></pre><p id=\"u46f4ae04\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 16px\"></span></strong></p><h1 id=\"lszsa\"><span class=\"ne-text\">Nginx限制并发连接数与下载速度配置</span></h1><p id=\"u8adc5c32\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">ngx_http_limit_conn_module模块用于限制每个定义密钥的连接数，特别是来自单个IP地址的连接数。而ngx_http_core_module则可以限制下载速度，这两个均是</span><a href=\"https://www.xgss.net/tag/nginx\" data-href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Nginx</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">内置模块，不需要额外安装。</span></p><h3 id=\"pj0TK\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">ngx_http_limit_conn_module限制连接数</span></h3><p id=\"u372d2ddc\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"IKw4L\" class=\"ne-codeblock language-plain\"><code>#需要写在http段内\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\nlocation /download/ {\n        limit_conn addr 10;\n}</code></pre><ul class=\"ne-ul\"><li id=\"u5c02846e\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">$binary_remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: nginx变量，指的是客户端IP</span></li><li id=\"u13816b72\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">zone</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 域的名字，随便填写，这里设置的是addr，后面会再次用到</span></li><li id=\"ub6b23589\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">10m</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 设置共享内存我的理解是客户端的IP会被放入这个内存中，总共享内存不能超过10M，不知道对不对。</span></li><li id=\"ucb133527\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">limit_conn addr 10</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 限制addr这个域的最大连接数为10</span></li></ul><p id=\"uabc2e074\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">但是在</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">HTTP/2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">中每个并发请求被视为单独的连接，如果网站启用了</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">HTTP/2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">上面的设置就没有作用了，可以继续改进一下。以下配置将限制每个客户端IP与服务器的连接数，同时限制与虚拟服务器的连接总数。</span></p><p id=\"u7f929afc\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"GNccX\" class=\"ne-codeblock language-plain\"><code>#写在http段内\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\nserver {\n    ...\n    #限制perip域（客户端IP）的连接数为10\n    limit_conn perip 10;\n    #限制perserver域（当前虚拟服务器）的连接数为100\n    limit_conn perserver 100;\n}</code></pre><p id=\"u925ec998\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">更多详细说明可参考</span><a href=\"https://www.xgss.net/tag/nginx\" data-href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Nginx</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">官方文档：</span><a href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfbGltaXRfY29ubl9tb2R1bGUuaHRtbA==\" data-href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfbGltaXRfY29ubl9tb2R1bGUuaHRtbA==\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html</span></a></p><h3 id=\"bEFFo\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">ngx_http_core_module限制下载速度</span></h3><p id=\"u643a29ed\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"PIuPe\" class=\"ne-codeblock language-plain\"><code>#数据达到100M后再限制速度（注意：这里指的是单个连接达到100M）\nlimit_rate_after 100M;\n#限制单个连接速度为10k/s\nlimit_rate 10k;</code></pre><ul class=\"ne-ul\"><li id=\"u338dee2a\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">limit_rate_after</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: 指的是请求的数据达到指定大小后才开始限速（这里设置的是100M）</span></li><li id=\"uf5d986d4\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">limit_rate</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">： 设置单个连接限速值，这里设置的是10k/s，如果限制同一IP最大连接数为10的话，那么总的下载速度不能超过100k/s</span></li></ul><p id=\"u92b5b47e\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">更多说明参考</span><a href=\"https://www.xgss.net/tag/nginx\" data-href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Nginx</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">官方文档：</span><a href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNsaW1pdF9yYXRl\" data-href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNsaW1pdF9yYXRl\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate</span></a></p><h3 id=\"PkHWP\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">同时限制连接数和下载速度</span></h3><p id=\"ud42fedbe\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">将上面的配置整合一下，我们既要限制单IP的最大连接数，也需要限制下载速度。</span></p><p id=\"u1b1c7439\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"xMOMr\" class=\"ne-codeblock language-plain\"><code>#写在http段内\nlimit_conn_zone $binary_remote_addr zone=perip:10m;\nlimit_conn_zone $server_name zone=perserver:10m;\n\n#写在server段内\nlimit_conn perip 10;\nlimit_conn perserver 100;\nlimit_rate_after 100M;\nlimit_rate 10k;</code></pre><p id=\"u7f66c891\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">上面配置的含义是限制单个IP最大连接数为10个，同时限制单个虚拟服务器的连接总数为100个。当请求的数据达到100M后（指单个连接达到100M）限制连接速度为为10k/s，如果产生了10个连接，最大速度不能超过100k/s</span></p><h3 id=\"pwSpv\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(30, 139, 195)\">写在最后</span></h3><p id=\"u28a14a6f\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">配置修改后建议用nginx -t先检查语法，确保没有问题，别忘记重载Nginx使其生效。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uc5772e9a\" id=\"uc5772e9a\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br />copyright_author: 小灰灰 </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover: </span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h1 data-lake-id=\"Hs3fo\" id=\"Hs3fo\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"ubb2050a8\" id=\"ubb2050a8\" style=\"color: rgb(18, 18, 18)\">问题场景：</span></h1><p data-lake-id=\"ua294175b\" id=\"ua294175b\"><span data-lake-id=\"u792017c1\" id=\"u792017c1\">这两天由于公司人自己请求网站之后，导致网站服务器超负载，为了避免这种攻击我将Nginx配置了单个IP的并发限制，当天还没有问题，但是第二天早上网站访问量多的时候，浏览器出现页面503 Service Temporarily Unavailable，然后我多次刷新，有时候刷新页面正常显示，有时候刷新页面出现样式未加载出来（样式错乱，因为加载css文件返回503状态）的情况，有时候刷新再次出现503 Service Temporarily Unavailable。</span></p><h1 data-lake-id=\"o2zp4\" id=\"o2zp4\"><span data-lake-id=\"ub3f1542a\" id=\"ub3f1542a\">问题分析：</span></h1><p data-lake-id=\"u0fd07a13\" id=\"u0fd07a13\" style=\"text-align: left\"><span data-lake-id=\"u01e9c301\" id=\"u01e9c301\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">503 Service Temporarily Unavailable 的意思是服务暂时不可用，结合我上次的配置，我猜测应该是小站并发高了之后导致单个IP超过了我所配置的单个IP所允许并发数量。</span></p><p data-lake-id=\"ufcb20bee\" id=\"ufcb20bee\" style=\"text-align: left\"><span data-lake-id=\"u7786791b\" id=\"u7786791b\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">至于为什么全站的并发高了之后才出现503 Service Temporarily Unavailable呢，刚刚配置单个IP并发限制我访问页面是正常的。这个原因应该是</span><strong><span data-lake-id=\"ufc139aa8\" id=\"ufc139aa8\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">全站的访问并发高了之后服务器负载高，服务器处理不过来，所以对于单个IP请求一个页面的时候还未处理完成，再次刷新或者跳转别的页面的时候又加入的新的多次请求（包括各种静态文件的请求），所以服务器存在的请求超出了单个IP并发配置的限制</span></strong><span data-lake-id=\"u175b8620\" id=\"u175b8620\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">，而全站并发不高的时候意味着访问量少，服务器负载低，单个IP请求的并发也相对较少，则不容易出现返回503 Service Temporarily Unavailable的情况。</span></p><h1 data-lake-id=\"v7hHc\" id=\"v7hHc\"><span data-lake-id=\"uff45be08\" id=\"uff45be08\" style=\"color: rgb(18, 18, 18)\">解决方案：</span></h1><p data-lake-id=\"uad7eeff1\" id=\"uad7eeff1\" style=\"text-align: left\"><span data-lake-id=\"uadb9aba5\" id=\"uadb9aba5\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">修改</span><span data-lake-id=\"u613f55ec\" id=\"u613f55ec\" class=\"lake-fontsize-11\" style=\"color: rgb(18, 18, 18); background-color: rgb(246, 246, 246)\">nginx</span><span data-lake-id=\"u26d7f1df\" id=\"u26d7f1df\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">单个IP并发限制的配置，将单个IP并发数限制提升到20，</span><strong><span data-lake-id=\"u9f5f9fb9\" id=\"u9f5f9fb9\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">这个数字取决于你访问一个页面最多需要走多少次</span></strong><strong><span data-lake-id=\"uf23abe2b\" id=\"uf23abe2b\" class=\"lake-fontsize-11\" style=\"color: rgb(18, 18, 18); background-color: rgb(246, 246, 246)\">nginx</span></strong><strong><span data-lake-id=\"uc1fb4edf\" id=\"uc1fb4edf\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">，一般看一次页面有多少次通过</span></strong><strong><span data-lake-id=\"u14e9faa8\" id=\"u14e9faa8\" class=\"lake-fontsize-11\" style=\"color: rgb(18, 18, 18); background-color: rgb(246, 246, 246)\">nginx</span></strong><strong><span data-lake-id=\"u31df19f7\" id=\"u31df19f7\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">的请求，包括css文件、图片文件、字体文件和js文件等等</span></strong><span data-lake-id=\"u0d7231f8\" id=\"u0d7231f8\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">。</span></p><p data-lake-id=\"ufdee9103\" id=\"ufdee9103\" style=\"text-align: left\"><span data-lake-id=\"u8b7cc6ae\" id=\"u8b7cc6ae\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">配置后重新reload配置，就再也没有出现过页面显示 503 Service Temporarily Unavailable 的情况，当然可能是负载突然下降了的原因，还需要进一步测试，暂时先这样处理。</span></p><p data-lake-id=\"u63c5143e\" id=\"u63c5143e\" style=\"text-align: left\"><span data-lake-id=\"ue699baab\" id=\"ue699baab\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">本次将</span><span data-lake-id=\"ue80dfeae\" id=\"ue80dfeae\" class=\"lake-fontsize-11\" style=\"color: rgb(18, 18, 18); background-color: rgb(246, 246, 246)\">nginx.conf</span><span data-lake-id=\"u9cdf53eb\" id=\"u9cdf53eb\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">配置文件的</span><span data-lake-id=\"u42fa0334\" id=\"u42fa0334\" class=\"lake-fontsize-11\" style=\"color: rgb(18, 18, 18); background-color: rgb(246, 246, 246)\">server</span><span data-lake-id=\"u80978819\" id=\"u80978819\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">部分配置修改：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%2F%2F%20%E5%8D%95%E4%B8%AAIP%E5%B9%B6%E5%8F%91%E6%95%B0%E9%99%90%E5%88%B6%5Cnserver%7B%5Cn%20%20%20%20limit_conn%20perip%2020%3B%5Cn%20%20%20%20limit_conn%20perserver%2020%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VNIAm%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u46f4ae04\" id=\"u46f4ae04\" style=\"text-align: left\"><strong><span data-lake-id=\"uadd3af40\" id=\"uadd3af40\" class=\"lake-fontsize-12\" style=\"color: rgb(18, 18, 18)\">​</span></strong><br></p><h1 data-lake-id=\"lszsa\" id=\"lszsa\"><span data-lake-id=\"u22e0e10a\" id=\"u22e0e10a\">Nginx限制并发连接数与下载速度配置</span></h1><p data-lake-id=\"u8adc5c32\" id=\"u8adc5c32\" style=\"text-align: left\"><span data-lake-id=\"u68dce2ec\" id=\"u68dce2ec\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">ngx_http_limit_conn_module模块用于限制每个定义密钥的连接数，特别是来自单个IP地址的连接数。而ngx_http_core_module则可以限制下载速度，这两个均是</span><a href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" data-lake-id=\"u7cdeeea1\" id=\"u7cdeeea1\"><span data-lake-id=\"u32a56313\" id=\"u32a56313\">Nginx</span></a><span data-lake-id=\"uaf5b3a3a\" id=\"uaf5b3a3a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">内置模块，不需要额外安装。</span></p><h3 data-lake-id=\"pj0TK\" id=\"pj0TK\" style=\"text-align: left\"><span data-lake-id=\"u4bf5328e\" id=\"u4bf5328e\" style=\"color: rgb(30, 139, 195)\">ngx_http_limit_conn_module限制连接数</span></h3><p data-lake-id=\"u372d2ddc\" id=\"u372d2ddc\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%E9%9C%80%E8%A6%81%E5%86%99%E5%9C%A8http%E6%AE%B5%E5%86%85%5Cnlimit_conn_zone%20%24binary_remote_addr%20zone%3Daddr%3A10m%3B%5Cn%5Cnserver%20%7B%5Cnlocation%20%2Fdownload%2F%20%7B%5Cn%20%20%20%20%20%20%20%20limit_conn%20addr%2010%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IKw4L%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u74062b00\"><li fid=\"ufbaa6fcf\" data-lake-id=\"u5c02846e\" id=\"u5c02846e\" style=\"text-align: left\"><span data-lake-id=\"u41a2104a\" id=\"u41a2104a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">$binary_remote_addr</span><span data-lake-id=\"u1bd632e3\" id=\"u1bd632e3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uc0eb4b6a\" id=\"uc0eb4b6a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: nginx变量，指的是客户端IP</span></li><li fid=\"ufbaa6fcf\" data-lake-id=\"u13816b72\" id=\"u13816b72\" style=\"text-align: left\"><span data-lake-id=\"ud7b2abd9\" id=\"ud7b2abd9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">zone</span><span data-lake-id=\"u05639b0e\" id=\"u05639b0e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ue67a54c2\" id=\"ue67a54c2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: 域的名字，随便填写，这里设置的是addr，后面会再次用到</span></li><li fid=\"ufbaa6fcf\" data-lake-id=\"ub6b23589\" id=\"ub6b23589\" style=\"text-align: left\"><span data-lake-id=\"ucfbebf66\" id=\"ucfbebf66\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">10m</span><span data-lake-id=\"ub6831d05\" id=\"ub6831d05\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u316b17b9\" id=\"u316b17b9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: 设置共享内存我的理解是客户端的IP会被放入这个内存中，总共享内存不能超过10M，不知道对不对。</span></li><li fid=\"ufbaa6fcf\" data-lake-id=\"ucb133527\" id=\"ucb133527\" style=\"text-align: left\"><span data-lake-id=\"uc663f0a3\" id=\"uc663f0a3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">limit_conn addr 10</span><span data-lake-id=\"u80220a1e\" id=\"u80220a1e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u7f1764a9\" id=\"u7f1764a9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: 限制addr这个域的最大连接数为10</span></li></ul><p data-lake-id=\"uabc2e074\" id=\"uabc2e074\" style=\"text-align: left\"><span data-lake-id=\"u8b7bb807\" id=\"u8b7bb807\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">但是在</span><span data-lake-id=\"uf71a2633\" id=\"uf71a2633\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">HTTP/2</span><span data-lake-id=\"u9d821c29\" id=\"u9d821c29\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">中每个并发请求被视为单独的连接，如果网站启用了</span><span data-lake-id=\"u380ae0bd\" id=\"u380ae0bd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">HTTP/2</span><span data-lake-id=\"u15d8324e\" id=\"u15d8324e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">上面的设置就没有作用了，可以继续改进一下。以下配置将限制每个客户端IP与服务器的连接数，同时限制与虚拟服务器的连接总数。</span></p><p data-lake-id=\"u7f929afc\" id=\"u7f929afc\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%E5%86%99%E5%9C%A8http%E6%AE%B5%E5%86%85%5Cnlimit_conn_zone%20%24binary_remote_addr%20zone%3Dperip%3A10m%3B%5Cnlimit_conn_zone%20%24server_name%20zone%3Dperserver%3A10m%3B%5Cn%5Cnserver%20%7B%5Cn%20%20%20%20...%5Cn%20%20%20%20%23%E9%99%90%E5%88%B6perip%E5%9F%9F%EF%BC%88%E5%AE%A2%E6%88%B7%E7%AB%AFIP%EF%BC%89%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%95%B0%E4%B8%BA10%5Cn%20%20%20%20limit_conn%20perip%2010%3B%5Cn%20%20%20%20%23%E9%99%90%E5%88%B6perserver%E5%9F%9F%EF%BC%88%E5%BD%93%E5%89%8D%E8%99%9A%E6%8B%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%95%B0%E4%B8%BA100%5Cn%20%20%20%20limit_conn%20perserver%20100%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22GNccX%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u925ec998\" id=\"u925ec998\" style=\"text-align: left\"><span data-lake-id=\"uf275b068\" id=\"uf275b068\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">更多详细说明可参考</span><a href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" data-lake-id=\"u33dd9919\" id=\"u33dd9919\"><span data-lake-id=\"u2ca39971\" id=\"u2ca39971\">Nginx</span></a><span data-lake-id=\"ub2c24238\" id=\"ub2c24238\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">官方文档：</span><a href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfbGltaXRfY29ubl9tb2R1bGUuaHRtbA==\" target=\"_blank\" data-lake-id=\"u0b4dd40f\" id=\"u0b4dd40f\"><span data-lake-id=\"u16d870be\" id=\"u16d870be\">http://nginx.org/en/docs/http/ngx_http_limit_conn_module.html</span></a></p><h3 data-lake-id=\"bEFFo\" id=\"bEFFo\" style=\"text-align: left\"><span data-lake-id=\"u05e7c4a1\" id=\"u05e7c4a1\" style=\"color: rgb(30, 139, 195)\">ngx_http_core_module限制下载速度</span></h3><p data-lake-id=\"u643a29ed\" id=\"u643a29ed\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%E6%95%B0%E6%8D%AE%E8%BE%BE%E5%88%B0100M%E5%90%8E%E5%86%8D%E9%99%90%E5%88%B6%E9%80%9F%E5%BA%A6%EF%BC%88%E6%B3%A8%E6%84%8F%EF%BC%9A%E8%BF%99%E9%87%8C%E6%8C%87%E7%9A%84%E6%98%AF%E5%8D%95%E4%B8%AA%E8%BF%9E%E6%8E%A5%E8%BE%BE%E5%88%B0100M%EF%BC%89%5Cnlimit_rate_after%20100M%3B%5Cn%23%E9%99%90%E5%88%B6%E5%8D%95%E4%B8%AA%E8%BF%9E%E6%8E%A5%E9%80%9F%E5%BA%A6%E4%B8%BA10k%2Fs%5Cnlimit_rate%2010k%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22PIuPe%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u48a48869\"><li fid=\"u66a73a96\" data-lake-id=\"u338dee2a\" id=\"u338dee2a\" style=\"text-align: left\"><span data-lake-id=\"u9a737bf7\" id=\"u9a737bf7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">limit_rate_after</span><span data-lake-id=\"u315eda82\" id=\"u315eda82\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u44169a78\" id=\"u44169a78\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: 指的是请求的数据达到指定大小后才开始限速（这里设置的是100M）</span></li><li fid=\"u66a73a96\" data-lake-id=\"uf5d986d4\" id=\"uf5d986d4\" style=\"text-align: left\"><span data-lake-id=\"u1c7f7d82\" id=\"u1c7f7d82\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">limit_rate</span><span data-lake-id=\"ud6e9b61b\" id=\"ud6e9b61b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ua0044082\" id=\"ua0044082\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">： 设置单个连接限速值，这里设置的是10k/s，如果限制同一IP最大连接数为10的话，那么总的下载速度不能超过100k/s</span></li></ul><p data-lake-id=\"u92b5b47e\" id=\"u92b5b47e\" style=\"text-align: left\"><span data-lake-id=\"u8b2ef023\" id=\"u8b2ef023\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">更多说明参考</span><a href=\"https://www.xgss.net/tag/nginx\" target=\"_blank\" data-lake-id=\"ua2ca1328\" id=\"ua2ca1328\"><span data-lake-id=\"ued8fad72\" id=\"ued8fad72\">Nginx</span></a><span data-lake-id=\"uc2ba78e3\" id=\"uc2ba78e3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">官方文档：</span><a href=\"https://www.xgss.net/wp-content/themes/xgssv1/go.php?url=aHR0cDovL25naW54Lm9yZy9lbi9kb2NzL2h0dHAvbmd4X2h0dHBfY29yZV9tb2R1bGUuaHRtbCNsaW1pdF9yYXRl\" target=\"_blank\" data-lake-id=\"u1b320e74\" id=\"u1b320e74\"><span data-lake-id=\"ub1f0492f\" id=\"ub1f0492f\">http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate</span></a></p><h3 data-lake-id=\"PkHWP\" id=\"PkHWP\" style=\"text-align: left\"><span data-lake-id=\"u8212c0da\" id=\"u8212c0da\" style=\"color: rgb(30, 139, 195)\">同时限制连接数和下载速度</span></h3><p data-lake-id=\"ud42fedbe\" id=\"ud42fedbe\" style=\"text-align: left\"><span data-lake-id=\"u847da834\" id=\"u847da834\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">将上面的配置整合一下，我们既要限制单IP的最大连接数，也需要限制下载速度。</span></p><p data-lake-id=\"u1b1c7439\" id=\"u1b1c7439\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%E5%86%99%E5%9C%A8http%E6%AE%B5%E5%86%85%5Cnlimit_conn_zone%20%24binary_remote_addr%20zone%3Dperip%3A10m%3B%5Cnlimit_conn_zone%20%24server_name%20zone%3Dperserver%3A10m%3B%5Cn%5Cn%23%E5%86%99%E5%9C%A8server%E6%AE%B5%E5%86%85%5Cnlimit_conn%20perip%2010%3B%5Cnlimit_conn%20perserver%20100%3B%5Cnlimit_rate_after%20100M%3B%5Cnlimit_rate%2010k%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22xMOMr%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7f66c891\" id=\"u7f66c891\" style=\"text-align: left\"><span data-lake-id=\"udec04c8b\" id=\"udec04c8b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">上面配置的含义是限制单个IP最大连接数为10个，同时限制单个虚拟服务器的连接总数为100个。当请求的数据达到100M后（指单个连接达到100M）限制连接速度为为10k/s，如果产生了10个连接，最大速度不能超过100k/s</span></p><h3 data-lake-id=\"pwSpv\" id=\"pwSpv\" style=\"text-align: left\"><span data-lake-id=\"uf6e1e948\" id=\"uf6e1e948\" style=\"color: rgb(30, 139, 195)\">写在最后</span></h3><p data-lake-id=\"u28a14a6f\" id=\"u28a14a6f\" style=\"text-align: left\"><span data-lake-id=\"ua97e52b5\" id=\"ua97e52b5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">配置修改后建议用nginx -t先检查语法，确保没有问题，别忘记重载Nginx使其生效。</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 8,
    "hits": 8,
    "comments_count": 0,
    "word_count": 1382,
    "created_at": "2023-07-27T09:03:03.000Z",
    "updated_at": "2023-08-09T02:35:57.000Z",
    "content_updated_at": "2023-07-27T09:12:02.000Z",
    "published_at": "2023-07-27T09:12:02.000Z",
    "first_published_at": "2023-07-27T09:12:02.275Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1887538081,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 134490427,
    "type": "Doc",
    "slug": "xokyts7y4ek65nvs",
    "title": "服务器常用命令",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:查询ip:ipconfig查看端口占用情况 netstat -anp |...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h3 id=\"ae6247fa\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查询ip:</span></h3><p id=\"u590dc932\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"shellipconfig\" class=\"ne-codeblock language-shell\"><code>ipconfig</code></pre><p id=\"u696242f5\" class=\"ne-p\"><br></p><h3 id=\"bd7fe24a\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查看端口占用情况</span></h3><p id=\"u79fae652\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"32b0623c\" class=\"ne-codeblock language-shell\"><code> netstat -anp | grep 8080\n#或者\nlsof -i:8080</code></pre><p id=\"u2354dfa5\" class=\"ne-p\"><br></p><h3 id=\"ad23e7bb\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查看服务</span></h3><p id=\"ucd131620\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"6863130e\" class=\"ne-codeblock language-plain\"><code>ps -ef | grep 服务名 或 ps aux |grep 服务名</code></pre><p id=\"u01bdb486\" class=\"ne-p\"><br></p><h3 id=\"a1bd9760\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">定时任务</span></h3><p id=\"u649aaecb\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"b0f30e87\" class=\"ne-codeblock language-shell\"><code>#任务列表\ncrontab -l\n\n#添加定时任务\ncrontab -e #编辑cron任务模式\n\n#常用：https://www.runoob.com/w3cnote/linux-crontab-tasks.html\n#每分钟执行一次\n* * * * * docker exec 2751dfasd8e php /www/hello-world/crontab/gogogo schedule:run &gt;&gt;/docker/nginx/www/hello-world/storage/logs/notice.txt 2&gt;&amp;1\n\n#每小时的第3和第15分钟执行\n3,15 * * * * myCommand\n\n#每晚的21:30重启smb\n30 21 * * * /etc/init.d/smb restart\n\n#每一小时重启smb\n0 */1 * * * /etc/init.d/smb restart</code></pre><p id=\"u5c79ec43\" class=\"ne-p\"><br></p><h3 id=\"06a4f443\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查询端口是否通：</span></h3><p id=\"ue382d203\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"7988c1f7\" class=\"ne-codeblock language-shell\"><code>ping 域名或ip 如：ping 127.0.0.1\ntelnet 如：telnet 127.0.0.1 80</code></pre><p id=\"u3bd67e3f\" class=\"ne-p\"><br></p><h3 id=\"1e2b9255\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">防火墙开放端口（mysql）</span></h3><p id=\"u94b6ebc9\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"76d6f1ad\" class=\"ne-codeblock language-shell\"><code>#查看对外开放的端口状态\n\nfirewall-cmd --zone=public --list-ports\n\n#开放端口\t--permanent 永久生效,没有此参数重启后失效\n\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n\n#重载入添加的端口\n\nfirewall-cmd --reload\n\n#查询已开放的端口\n\nnetstat -ntulp | grep #端口号：可以具体查看某一个端口号\n\n#查询指定端口是否已开\n\nfirewall-cmd --query-port=3306/tcp \n\n#提示 yes，表示开启；no表示未开启。\n\n#查看想开的端口是否已开：\n\nfirewall-cmd --query-port=6379/tcp\n\n#添加指定需要开放的端口\n\nfirewall-cmd --add-port=5466/tcp --permanent\n\n\n\n#查询指定端口是否开启成功\n\nfirewall-cmd --query-port=123/tcp\n\n#移除指定端口\n\nfirewall-cmd --permanent --remove-port=123/tcp</code></pre><p id=\"ub3b70153\" class=\"ne-p\"><br></p><h3 id=\"0a5465b6\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">keepalived的VIP问题</span></h3><p id=\"ud077a343\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"67158e43\" class=\"ne-codeblock language-shell\"><code>firewall-cmd --direct --permanent --add-rule ipv4 filter INPUT 0 --in-interface ens33 --destination 127.0.0.18 --protocol vrrp -j ACCEPT</code></pre><p id=\"u9f1ae1bc\" class=\"ne-p\"><br></p><h3 id=\"766b37f7\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">加入开机自启动</span></h3><p id=\"ub861ef83\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"7363d8d0\" class=\"ne-codeblock language-shell\"><code>chkconfig keepalived on</code></pre><p id=\"u8d874531\" class=\"ne-p\"><br></p><h3 id=\"e64bd271\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查看文件大小：</span></h3><p id=\"u7b667a43\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"9ccb66cf\" class=\"ne-codeblock language-shell\"><code>#查看文件大小\ndu -h --max-depth=1\n#查询该目录下所有资源的大小，包括压缩包的大小\ndu -ah --max-depth=1\n#查看目录的总体大小\ndu -sh\n#查看所有的文件大小\nll -h</code></pre><p id=\"u514931fa\" class=\"ne-p\"><br></p><h3 id=\"324acdd1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">压缩和解压缩</span></h3><p id=\"u730d6716\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"6f4f3370\" class=\"ne-codeblock language-shell\"><code>#zip命令\nzip -r myfile.zip ./* #压缩目录\nzip -d myfile.zip smart.txt #压缩文件\nunzip -o -d /home/sunny myfile.zip  #解压缩</code></pre><p id=\"u7c0032db\" class=\"ne-p\"><br></p><h3 id=\"9e538366\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">开关机命令</span></h3><p id=\"ud7d92355\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"fe67a3b2\" class=\"ne-codeblock language-shell\"><code>#立刻进行关机\nshutdown -h now  \n\n#现在重新启动计算机\nreboot</code></pre><p id=\"ud37c3d9b\" class=\"ne-p\"><br></p><h3 id=\"0d347eea\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">docker相关：</span></h3><p id=\"u59eff046\" class=\"ne-p\"><br></p><h4 id=\"55d4453a\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">a、从docker inspect查看docker run的运行命令参数</span></h4><p id=\"uaf54143b\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"e04c99f0\" class=\"ne-codeblock language-shell\"><code>--name在Name表示容器名称；\n\n-p在端口映射情况如在 NetworkSettings.Ports属性下可以明显地看到, 在已建立端口映射的属性下会有 HostIp和HostPort 两个子属性; 在没有建立映射情况下, 子属性为null\n\n-v目录映射在HostConfig.Binds和HostConfig.Mounts中可以找到\n\n--net diynet 自定义网络在HostConfig.NetworkMode和NetworkSettings.Networks中可以找到\n\n--add-host=mirrors.test.com:128.0.0.2 docker中的host配置在HostConfig.ExtraHosts\n\nnginx:latest在Config.Image表示镜像名称\n\n--link php74fpm 和php74fpm的容器互联  在NetworkSettings.Networks.Links可以找到</code></pre><p id=\"u514f87e5\" class=\"ne-p\"><br></p><h4 id=\"5a47cc82\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">b、查看docker容器ip:</span></h4><p id=\"u9682a25d\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"54b42f8c\" class=\"ne-codeblock language-shell\"><code>docker inspect --format '{{ .NetworkSettings.IPAddress }}' &lt;container-ID&gt;\n#或者\ndocker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id</code></pre><p id=\"uaf95926b\" class=\"ne-p\"><br></p><h4 id=\"2c0d16c9\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">c、查看容器ip:</span></h4><p id=\"uaade3ca0\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"360ee490\" class=\"ne-codeblock language-shell\"><code>docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id</code></pre><p id=\"u41c40f6e\" class=\"ne-p\"><br></p><p id=\"u1c056c3b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">查看python版本</span></p><p id=\"ud95ddcea\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"db0a4e0a\" class=\"ne-codeblock language-shell\"><code>#liunx系统默认安装了python2\npython -V\n#如果安装完python3没配置环境变量\npython3 -V</code></pre><p id=\"u988a9937\" class=\"ne-p\"><br></p><h2 id=\"75fc923e\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">数据库命令：</span></h2><p id=\"uf15bc0fe\" class=\"ne-p\"><br></p><h3 id=\"8173f0ab\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">修改当前登录用户的密码</span></h3><p id=\"ue60c3e5a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"39accd77\" class=\"ne-codeblock language-plain\"><code>ALTER USER USER() IDENTIFIED BY &quot;password&quot;</code></pre><p id=\"u6330eae7\" class=\"ne-p\"><br></p><h3 id=\"580af12b\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">新增用户并赋权</span></h3><p id=\"u85b9ecc0\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a9369f0a\" class=\"ne-codeblock language-plain\"><code>#创建用户\nCREATE USER 'username'@'%' IDENTIFIED BY 'password';\n#用户授权\nGRANT ALL ON *.* TO 'username'@'%';\n#刷新授权\nflush privileges;</code></pre><p id=\"ue3305dd1\" class=\"ne-p\"><br></p><h3 id=\"c3a176e3\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">导出/导入数据库</span></h3><p id=\"u66435cc2\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"730ed197\" class=\"ne-codeblock language-plain\"><code>#备份mysql命令:（导出）\nmysqldump -uroot -proot 库名 &gt; 路径\\ceshi_copy.sql\n\n#还原mysql命令：（导入）\nmysql&gt; use 数据库;\nmysql&gt;source d:\\bak\\bak.sql</code></pre><p id=\"u0f7de479\" class=\"ne-p\"><br></p><h2 id=\"83766838\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">win系统常用命令</span></h2><p id=\"u1e5b088d\" class=\"ne-p\"><br></p><h3 id=\"c65278f3\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">win系统 dos监听端口：</span></h3><p id=\"u888be533\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"68b1e2a3\" class=\"ne-codeblock language-plain\"><code>netstat -ano|findstr 80</code></pre><p id=\"u68156c89\" class=\"ne-p\"><br></p><h3 id=\"64ebde4d\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">win系统杀死进程：</span></h3><p id=\"u187c58c3\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a95c18bf\" class=\"ne-codeblock language-plain\"><code>tskill 进程号</code></pre><p id=\"uc081a38f\" class=\"ne-p\"><br></p><p id=\"ub80aba17\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">查找文件</span></p><p id=\"u7ba97dc5\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"d387ddfb\" class=\"ne-codeblock language-shell\"><code>dir &quot;new sc.&quot;* /s</code></pre><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<a name=\"ae6247fa\"></a>\n### 查询ip:\n\n```shell\nipconfig\n```\n\n<a name=\"bd7fe24a\"></a>\n### 查看端口占用情况\n\n```shell\n netstat -anp | grep 8080\n#或者\nlsof -i:8080\n```\n\n<a name=\"ad23e7bb\"></a>\n### 查看服务\n\n```\nps -ef | grep 服务名 或 ps aux |grep 服务名\n```\n\n<a name=\"a1bd9760\"></a>\n### 定时任务\n\n```shell\n#任务列表\ncrontab -l\n\n#添加定时任务\ncrontab -e #编辑cron任务模式\n\n#常用：https://www.runoob.com/w3cnote/linux-crontab-tasks.html\n#每分钟执行一次\n* * * * * docker exec 2751dfasd8e php /www/hello-world/crontab/gogogo schedule:run >>/docker/nginx/www/hello-world/storage/logs/notice.txt 2>&1\n\n#每小时的第3和第15分钟执行\n3,15 * * * * myCommand\n\n#每晚的21:30重启smb\n30 21 * * * /etc/init.d/smb restart\n\n#每一小时重启smb\n0 */1 * * * /etc/init.d/smb restart\n```\n\n<a name=\"06a4f443\"></a>\n### 查询端口是否通：\n\n```shell\nping 域名或ip 如：ping 127.0.0.1\ntelnet 如：telnet 127.0.0.1 80\n```\n\n<a name=\"1e2b9255\"></a>\n### 防火墙开放端口（mysql）\n\n```shell\n#查看对外开放的端口状态\n\nfirewall-cmd --zone=public --list-ports\n\n#开放端口\t--permanent 永久生效,没有此参数重启后失效\n\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n\n#重载入添加的端口\n\nfirewall-cmd --reload\n\n#查询已开放的端口\n\nnetstat -ntulp | grep #端口号：可以具体查看某一个端口号\n\n#查询指定端口是否已开\n\nfirewall-cmd --query-port=3306/tcp \n\n#提示 yes，表示开启；no表示未开启。\n\n#查看想开的端口是否已开：\n\nfirewall-cmd --query-port=6379/tcp\n\n#添加指定需要开放的端口\n\nfirewall-cmd --add-port=5466/tcp --permanent\n\n\n\n#查询指定端口是否开启成功\n\nfirewall-cmd --query-port=123/tcp\n\n#移除指定端口\n\nfirewall-cmd --permanent --remove-port=123/tcp\n```\n\n<a name=\"0a5465b6\"></a>\n### keepalived的VIP问题\n\n```shell\nfirewall-cmd --direct --permanent --add-rule ipv4 filter INPUT 0 --in-interface ens33 --destination 127.0.0.18 --protocol vrrp -j ACCEPT\n```\n\n<a name=\"766b37f7\"></a>\n### 加入开机自启动\n\n```shell\nchkconfig keepalived on\n```\n\n<a name=\"e64bd271\"></a>\n### 查看文件大小：\n\n```shell\n#查看文件大小\ndu -h --max-depth=1\n#查询该目录下所有资源的大小，包括压缩包的大小\ndu -ah --max-depth=1\n#查看目录的总体大小\ndu -sh\n#查看所有的文件大小\nll -h\n```\n\n<a name=\"324acdd1\"></a>\n### 压缩和解压缩\n\n```shell\n#zip命令\nzip -r myfile.zip ./* #压缩目录\nzip -d myfile.zip smart.txt #压缩文件\nunzip -o -d /home/sunny myfile.zip  #解压缩\n```\n\n<a name=\"9e538366\"></a>\n### 开关机命令\n\n```shell\n#立刻进行关机\nshutdown -h now  \n\n#现在重新启动计算机\nreboot\n```\n\n<a name=\"0d347eea\"></a>\n### docker相关：\n\n<a name=\"55d4453a\"></a>\n#### a、从docker inspect查看docker run的运行命令参数\n\n```shell\n--name在Name表示容器名称；\n\n-p在端口映射情况如在 NetworkSettings.Ports属性下可以明显地看到, 在已建立端口映射的属性下会有 HostIp和HostPort 两个子属性; 在没有建立映射情况下, 子属性为null\n\n-v目录映射在HostConfig.Binds和HostConfig.Mounts中可以找到\n\n--net diynet 自定义网络在HostConfig.NetworkMode和NetworkSettings.Networks中可以找到\n\n--add-host=mirrors.test.com:128.0.0.2 docker中的host配置在HostConfig.ExtraHosts\n\nnginx:latest在Config.Image表示镜像名称\n\n--link php74fpm 和php74fpm的容器互联  在NetworkSettings.Networks.Links可以找到\n```\n\n<a name=\"5a47cc82\"></a>\n#### b、查看docker容器ip:\n\n```shell\ndocker inspect --format '{{ .NetworkSettings.IPAddress }}' <container-ID>\n#或者\ndocker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id\n```\n\n<a name=\"2c0d16c9\"></a>\n#### c、查看容器ip:\n\n```shell\ndocker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id\n```\n\n查看python版本\n\n```shell\n#liunx系统默认安装了python2\npython -V\n#如果安装完python3没配置环境变量\npython3 -V\n```\n\n<a name=\"75fc923e\"></a>\n## 数据库命令：\n\n<a name=\"8173f0ab\"></a>\n### 修改当前登录用户的密码\n\n```\nALTER USER USER() IDENTIFIED BY \"password\"\n```\n\n<a name=\"580af12b\"></a>\n### 新增用户并赋权\n\n```\n#创建用户\nCREATE USER 'username'@'%' IDENTIFIED BY 'password';\n#用户授权\nGRANT ALL ON *.* TO 'username'@'%';\n#刷新授权\nflush privileges;\n```\n\n<a name=\"c3a176e3\"></a>\n### 导出/导入数据库\n\n```\n#备份mysql命令:（导出）\nmysqldump -uroot -proot 库名 > 路径\\ceshi_copy.sql\n\n#还原mysql命令：（导入）\nmysql> use 数据库;\nmysql>source d:\\bak\\bak.sql\n```\n\n<a name=\"83766838\"></a>\n## win系统常用命令\n\n<a name=\"c65278f3\"></a>\n### win系统 dos监听端口：\n\n```\nnetstat -ano|findstr 80\n```\n\n<a name=\"64ebde4d\"></a>\n### win系统杀死进程：\n\n```\ntskill 进程号\n```\n\n查找文件\n\n```shell\ndir \"new sc.\"* /s\n```\n\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h3 id=\"ae6247fa\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查询ip:</span></h3><p id=\"u590dc932\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"shellipconfig\" class=\"ne-codeblock language-shell\"><code>ipconfig</code></pre><p id=\"u696242f5\" class=\"ne-p\"><br></p><h3 id=\"bd7fe24a\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查看端口占用情况</span></h3><p id=\"u79fae652\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"32b0623c\" class=\"ne-codeblock language-shell\"><code> netstat -anp | grep 8080\n#或者\nlsof -i:8080</code></pre><p id=\"u2354dfa5\" class=\"ne-p\"><br></p><h3 id=\"ad23e7bb\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查看服务</span></h3><p id=\"ucd131620\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"6863130e\" class=\"ne-codeblock language-plain\"><code>ps -ef | grep 服务名 或 ps aux |grep 服务名</code></pre><p id=\"u01bdb486\" class=\"ne-p\"><br></p><h3 id=\"a1bd9760\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">定时任务</span></h3><p id=\"u649aaecb\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"b0f30e87\" class=\"ne-codeblock language-shell\"><code>#任务列表\ncrontab -l\n\n#添加定时任务\ncrontab -e #编辑cron任务模式\n\n#常用：https://www.runoob.com/w3cnote/linux-crontab-tasks.html\n#每分钟执行一次\n* * * * * docker exec 2751dfasd8e php /www/hello-world/crontab/gogogo schedule:run &gt;&gt;/docker/nginx/www/hello-world/storage/logs/notice.txt 2&gt;&amp;1\n\n#每小时的第3和第15分钟执行\n3,15 * * * * myCommand\n\n#每晚的21:30重启smb\n30 21 * * * /etc/init.d/smb restart\n\n#每一小时重启smb\n0 */1 * * * /etc/init.d/smb restart</code></pre><p id=\"u5c79ec43\" class=\"ne-p\"><br></p><h3 id=\"06a4f443\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查询端口是否通：</span></h3><p id=\"ue382d203\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"7988c1f7\" class=\"ne-codeblock language-shell\"><code>ping 域名或ip 如：ping 127.0.0.1\ntelnet 如：telnet 127.0.0.1 80</code></pre><p id=\"u3bd67e3f\" class=\"ne-p\"><br></p><h3 id=\"1e2b9255\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">防火墙开放端口（mysql）</span></h3><p id=\"u94b6ebc9\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"76d6f1ad\" class=\"ne-codeblock language-shell\"><code>#查看对外开放的端口状态\n\nfirewall-cmd --zone=public --list-ports\n\n#开放端口\t--permanent 永久生效,没有此参数重启后失效\n\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n\n#重载入添加的端口\n\nfirewall-cmd --reload\n\n#查询已开放的端口\n\nnetstat -ntulp | grep #端口号：可以具体查看某一个端口号\n\n#查询指定端口是否已开\n\nfirewall-cmd --query-port=3306/tcp \n\n#提示 yes，表示开启；no表示未开启。\n\n#查看想开的端口是否已开：\n\nfirewall-cmd --query-port=6379/tcp\n\n#添加指定需要开放的端口\n\nfirewall-cmd --add-port=5466/tcp --permanent\n\n\n\n#查询指定端口是否开启成功\n\nfirewall-cmd --query-port=123/tcp\n\n#移除指定端口\n\nfirewall-cmd --permanent --remove-port=123/tcp</code></pre><p id=\"ub3b70153\" class=\"ne-p\"><br></p><h3 id=\"0a5465b6\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">keepalived的VIP问题</span></h3><p id=\"ud077a343\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"67158e43\" class=\"ne-codeblock language-shell\"><code>firewall-cmd --direct --permanent --add-rule ipv4 filter INPUT 0 --in-interface ens33 --destination 127.0.0.18 --protocol vrrp -j ACCEPT</code></pre><p id=\"u9f1ae1bc\" class=\"ne-p\"><br></p><h3 id=\"766b37f7\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">加入开机自启动</span></h3><p id=\"ub861ef83\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"7363d8d0\" class=\"ne-codeblock language-shell\"><code>chkconfig keepalived on</code></pre><p id=\"u8d874531\" class=\"ne-p\"><br></p><h3 id=\"e64bd271\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">查看文件大小：</span></h3><p id=\"u7b667a43\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"9ccb66cf\" class=\"ne-codeblock language-shell\"><code>#查看文件大小\ndu -h --max-depth=1\n#查询该目录下所有资源的大小，包括压缩包的大小\ndu -ah --max-depth=1\n#查看目录的总体大小\ndu -sh\n#查看所有的文件大小\nll -h</code></pre><p id=\"u514931fa\" class=\"ne-p\"><br></p><h3 id=\"324acdd1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">压缩和解压缩</span></h3><p id=\"u730d6716\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"6f4f3370\" class=\"ne-codeblock language-shell\"><code>#zip命令\nzip -r myfile.zip ./* #压缩目录\nzip -d myfile.zip smart.txt #压缩文件\nunzip -o -d /home/sunny myfile.zip  #解压缩</code></pre><p id=\"u7c0032db\" class=\"ne-p\"><br></p><h3 id=\"9e538366\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">开关机命令</span></h3><p id=\"ud7d92355\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"fe67a3b2\" class=\"ne-codeblock language-shell\"><code>#立刻进行关机\nshutdown -h now  \n\n#现在重新启动计算机\nreboot</code></pre><p id=\"ud37c3d9b\" class=\"ne-p\"><br></p><h3 id=\"0d347eea\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">docker相关：</span></h3><p id=\"u59eff046\" class=\"ne-p\"><br></p><h4 id=\"55d4453a\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">a、从docker inspect查看docker run的运行命令参数</span></h4><p id=\"uaf54143b\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"e04c99f0\" class=\"ne-codeblock language-shell\"><code>--name在Name表示容器名称；\n\n-p在端口映射情况如在 NetworkSettings.Ports属性下可以明显地看到, 在已建立端口映射的属性下会有 HostIp和HostPort 两个子属性; 在没有建立映射情况下, 子属性为null\n\n-v目录映射在HostConfig.Binds和HostConfig.Mounts中可以找到\n\n--net diynet 自定义网络在HostConfig.NetworkMode和NetworkSettings.Networks中可以找到\n\n--add-host=mirrors.test.com:128.0.0.2 docker中的host配置在HostConfig.ExtraHosts\n\nnginx:latest在Config.Image表示镜像名称\n\n--link php74fpm 和php74fpm的容器互联  在NetworkSettings.Networks.Links可以找到</code></pre><p id=\"u514f87e5\" class=\"ne-p\"><br></p><h4 id=\"5a47cc82\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">b、查看docker容器ip:</span></h4><p id=\"u9682a25d\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"54b42f8c\" class=\"ne-codeblock language-shell\"><code>docker inspect --format '{{ .NetworkSettings.IPAddress }}' &lt;container-ID&gt;\n#或者\ndocker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id</code></pre><p id=\"uaf95926b\" class=\"ne-p\"><br></p><h4 id=\"2c0d16c9\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">c、查看容器ip:</span></h4><p id=\"uaade3ca0\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"360ee490\" class=\"ne-codeblock language-shell\"><code>docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name_or_id</code></pre><p id=\"u41c40f6e\" class=\"ne-p\"><br></p><p id=\"u1c056c3b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">查看python版本</span></p><p id=\"ud95ddcea\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"db0a4e0a\" class=\"ne-codeblock language-shell\"><code>#liunx系统默认安装了python2\npython -V\n#如果安装完python3没配置环境变量\npython3 -V</code></pre><p id=\"u988a9937\" class=\"ne-p\"><br></p><h2 id=\"75fc923e\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">数据库命令：</span></h2><p id=\"uf15bc0fe\" class=\"ne-p\"><br></p><h3 id=\"8173f0ab\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">修改当前登录用户的密码</span></h3><p id=\"ue60c3e5a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"39accd77\" class=\"ne-codeblock language-plain\"><code>ALTER USER USER() IDENTIFIED BY &quot;password&quot;</code></pre><p id=\"u6330eae7\" class=\"ne-p\"><br></p><h3 id=\"580af12b\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">新增用户并赋权</span></h3><p id=\"u85b9ecc0\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a9369f0a\" class=\"ne-codeblock language-plain\"><code>#创建用户\nCREATE USER 'username'@'%' IDENTIFIED BY 'password';\n#用户授权\nGRANT ALL ON *.* TO 'username'@'%';\n#刷新授权\nflush privileges;</code></pre><p id=\"ue3305dd1\" class=\"ne-p\"><br></p><h3 id=\"c3a176e3\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">导出/导入数据库</span></h3><p id=\"u66435cc2\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"730ed197\" class=\"ne-codeblock language-plain\"><code>#备份mysql命令:（导出）\nmysqldump -uroot -proot 库名 &gt; 路径\\ceshi_copy.sql\n\n#还原mysql命令：（导入）\nmysql&gt; use 数据库;\nmysql&gt;source d:\\bak\\bak.sql</code></pre><p id=\"u0f7de479\" class=\"ne-p\"><br></p><h2 id=\"83766838\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">win系统常用命令</span></h2><p id=\"u1e5b088d\" class=\"ne-p\"><br></p><h3 id=\"c65278f3\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">win系统 dos监听端口：</span></h3><p id=\"u888be533\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"68b1e2a3\" class=\"ne-codeblock language-plain\"><code>netstat -ano|findstr 80</code></pre><p id=\"u68156c89\" class=\"ne-p\"><br></p><h3 id=\"64ebde4d\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">win系统杀死进程：</span></h3><p id=\"u187c58c3\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a95c18bf\" class=\"ne-codeblock language-plain\"><code>tskill 进程号</code></pre><p id=\"uc081a38f\" class=\"ne-p\"><br></p><p id=\"ub80aba17\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">查找文件</span></p><p id=\"u7ba97dc5\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"d387ddfb\" class=\"ne-codeblock language-shell\"><code>dir &quot;new sc.&quot;* /s</code></pre><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u5b06f42f\" id=\"u5b06f42f\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"u4007ae03\" id=\"u4007ae03\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h3 data-lake-id=\"ae6247fa\" id=\"ae6247fa\"><span data-lake-id=\"uda858c5f\" id=\"uda858c5f\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查询ip:</span></h3><p data-lake-id=\"u590dc932\" id=\"u590dc932\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22ipconfig%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22shellipconfig%22%7D\"></card><p data-lake-id=\"u696242f5\" id=\"u696242f5\"><br></p><h3 data-lake-id=\"bd7fe24a\" id=\"bd7fe24a\"><span data-lake-id=\"ud9a5c447\" id=\"ud9a5c447\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查看端口占用情况</span></h3><p data-lake-id=\"u79fae652\" id=\"u79fae652\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20netstat%20-anp%20%7C%20grep%208080%5Cn%23%E6%88%96%E8%80%85%5Cnlsof%20-i%3A8080%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2232b0623c%22%7D\"></card><p data-lake-id=\"u2354dfa5\" id=\"u2354dfa5\"><br></p><h3 data-lake-id=\"ad23e7bb\" id=\"ad23e7bb\"><span data-lake-id=\"u3b75c51d\" id=\"u3b75c51d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查看服务</span></h3><p data-lake-id=\"ucd131620\" id=\"ucd131620\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22ps%20-ef%20%7C%20grep%20%E6%9C%8D%E5%8A%A1%E5%90%8D%20%E6%88%96%20ps%20aux%20%7Cgrep%20%E6%9C%8D%E5%8A%A1%E5%90%8D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%226863130e%22%7D\"></card><p data-lake-id=\"u01bdb486\" id=\"u01bdb486\"><br></p><h3 data-lake-id=\"a1bd9760\" id=\"a1bd9760\"><span data-lake-id=\"u1fddb450\" id=\"u1fddb450\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">定时任务</span></h3><p data-lake-id=\"u649aaecb\" id=\"u649aaecb\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%E4%BB%BB%E5%8A%A1%E5%88%97%E8%A1%A8%5Cncrontab%20-l%5Cn%5Cn%23%E6%B7%BB%E5%8A%A0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%5Cncrontab%20-e%20%23%E7%BC%96%E8%BE%91cron%E4%BB%BB%E5%8A%A1%E6%A8%A1%E5%BC%8F%5Cn%5Cn%23%E5%B8%B8%E7%94%A8%EF%BC%9Ahttps%3A%2F%2Fwww.runoob.com%2Fw3cnote%2Flinux-crontab-tasks.html%5Cn%23%E6%AF%8F%E5%88%86%E9%92%9F%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%5Cn*%20*%20*%20*%20*%20docker%20exec%202751dfasd8e%20php%20%2Fwww%2Fhello-world%2Fcrontab%2Fgogogo%20schedule%3Arun%20%3E%3E%2Fdocker%2Fnginx%2Fwww%2Fhello-world%2Fstorage%2Flogs%2Fnotice.txt%202%3E%261%5Cn%5Cn%23%E6%AF%8F%E5%B0%8F%E6%97%B6%E7%9A%84%E7%AC%AC3%E5%92%8C%E7%AC%AC15%E5%88%86%E9%92%9F%E6%89%A7%E8%A1%8C%5Cn3%2C15%20*%20*%20*%20*%20myCommand%5Cn%5Cn%23%E6%AF%8F%E6%99%9A%E7%9A%8421%3A30%E9%87%8D%E5%90%AFsmb%5Cn30%2021%20*%20*%20*%20%2Fetc%2Finit.d%2Fsmb%20restart%5Cn%5Cn%23%E6%AF%8F%E4%B8%80%E5%B0%8F%E6%97%B6%E9%87%8D%E5%90%AFsmb%5Cn0%20*%2F1%20*%20*%20*%20%2Fetc%2Finit.d%2Fsmb%20restart%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22id%22%3A%22b0f30e87%22%7D\"></card><p data-lake-id=\"u5c79ec43\" id=\"u5c79ec43\"><br></p><h3 data-lake-id=\"06a4f443\" id=\"06a4f443\"><span data-lake-id=\"u5fcf4bc2\" id=\"u5fcf4bc2\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查询端口是否通：</span></h3><p data-lake-id=\"ue382d203\" id=\"ue382d203\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22ping%20%E5%9F%9F%E5%90%8D%E6%88%96ip%20%E5%A6%82%EF%BC%9Aping%20127.0.0.1%5Cntelnet%20%E5%A6%82%EF%BC%9Atelnet%20127.0.0.1%2080%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22id%22%3A%227988c1f7%22%7D\"></card><p data-lake-id=\"u3bd67e3f\" id=\"u3bd67e3f\"><br></p><h3 data-lake-id=\"1e2b9255\" id=\"1e2b9255\"><span data-lake-id=\"u118eccf1\" id=\"u118eccf1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">防火墙开放端口（mysql）</span></h3><p data-lake-id=\"u94b6ebc9\" id=\"u94b6ebc9\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%E6%9F%A5%E7%9C%8B%E5%AF%B9%E5%A4%96%E5%BC%80%E6%94%BE%E7%9A%84%E7%AB%AF%E5%8F%A3%E7%8A%B6%E6%80%81%5Cn%5Cnfirewall-cmd%20--zone%3Dpublic%20--list-ports%5Cn%5Cn%23%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3%5Ct--permanent%20%E6%B0%B8%E4%B9%85%E7%94%9F%E6%95%88%2C%E6%B2%A1%E6%9C%89%E6%AD%A4%E5%8F%82%E6%95%B0%E9%87%8D%E5%90%AF%E5%90%8E%E5%A4%B1%E6%95%88%5Cn%5Cnfirewall-cmd%20--zone%3Dpublic%20--add-port%3D80%2Ftcp%20--permanent%5Cn%5Cn%23%E9%87%8D%E8%BD%BD%E5%85%A5%E6%B7%BB%E5%8A%A0%E7%9A%84%E7%AB%AF%E5%8F%A3%5Cn%5Cnfirewall-cmd%20--reload%5Cn%5Cn%23%E6%9F%A5%E8%AF%A2%E5%B7%B2%E5%BC%80%E6%94%BE%E7%9A%84%E7%AB%AF%E5%8F%A3%5Cn%5Cnnetstat%20-ntulp%20%7C%20grep%20%23%E7%AB%AF%E5%8F%A3%E5%8F%B7%EF%BC%9A%E5%8F%AF%E4%BB%A5%E5%85%B7%E4%BD%93%E6%9F%A5%E7%9C%8B%E6%9F%90%E4%B8%80%E4%B8%AA%E7%AB%AF%E5%8F%A3%E5%8F%B7%5Cn%5Cn%23%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E5%B7%B2%E5%BC%80%5Cn%5Cnfirewall-cmd%20--query-port%3D3306%2Ftcp%20%5Cn%5Cn%23%E6%8F%90%E7%A4%BA%20yes%EF%BC%8C%E8%A1%A8%E7%A4%BA%E5%BC%80%E5%90%AF%EF%BC%9Bno%E8%A1%A8%E7%A4%BA%E6%9C%AA%E5%BC%80%E5%90%AF%E3%80%82%5Cn%5Cn%23%E6%9F%A5%E7%9C%8B%E6%83%B3%E5%BC%80%E7%9A%84%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E5%B7%B2%E5%BC%80%EF%BC%9A%5Cn%5Cnfirewall-cmd%20--query-port%3D6379%2Ftcp%5Cn%5Cn%23%E6%B7%BB%E5%8A%A0%E6%8C%87%E5%AE%9A%E9%9C%80%E8%A6%81%E5%BC%80%E6%94%BE%E7%9A%84%E7%AB%AF%E5%8F%A3%5Cn%5Cnfirewall-cmd%20--add-port%3D5466%2Ftcp%20--permanent%5Cn%5Cn%5Cn%5Cn%23%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E5%BC%80%E5%90%AF%E6%88%90%E5%8A%9F%5Cn%5Cnfirewall-cmd%20--query-port%3D123%2Ftcp%5Cn%5Cn%23%E7%A7%BB%E9%99%A4%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%5Cn%5Cnfirewall-cmd%20--permanent%20--remove-port%3D123%2Ftcp%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2276d6f1ad%22%7D\"></card><p data-lake-id=\"ub3b70153\" id=\"ub3b70153\"><br></p><h3 data-lake-id=\"0a5465b6\" id=\"0a5465b6\"><span data-lake-id=\"u371ca1ab\" id=\"u371ca1ab\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">keepalived的VIP问题</span></h3><p data-lake-id=\"ud077a343\" id=\"ud077a343\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22firewall-cmd%20--direct%20--permanent%20--add-rule%20ipv4%20filter%20INPUT%200%20--in-interface%20ens33%20--destination%20127.0.0.18%20--protocol%20vrrp%20-j%20ACCEPT%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22id%22%3A%2267158e43%22%7D\"></card><p data-lake-id=\"u9f1ae1bc\" id=\"u9f1ae1bc\"><br></p><h3 data-lake-id=\"766b37f7\" id=\"766b37f7\"><span data-lake-id=\"uee795391\" id=\"uee795391\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">加入开机自启动</span></h3><p data-lake-id=\"ub861ef83\" id=\"ub861ef83\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22chkconfig%20keepalived%20on%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%227363d8d0%22%7D\"></card><p data-lake-id=\"u8d874531\" id=\"u8d874531\"><br></p><h3 data-lake-id=\"e64bd271\" id=\"e64bd271\"><span data-lake-id=\"ud00e8361\" id=\"ud00e8361\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查看文件大小：</span></h3><p data-lake-id=\"u7b667a43\" id=\"u7b667a43\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%5Cndu%20-h%20--max-depth%3D1%5Cn%23%E6%9F%A5%E8%AF%A2%E8%AF%A5%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%8E%8B%E7%BC%A9%E5%8C%85%E7%9A%84%E5%A4%A7%E5%B0%8F%5Cndu%20-ah%20--max-depth%3D1%5Cn%23%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E7%9A%84%E6%80%BB%E4%BD%93%E5%A4%A7%E5%B0%8F%5Cndu%20-sh%5Cn%23%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%5Cnll%20-h%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%229ccb66cf%22%7D\"></card><p data-lake-id=\"u514931fa\" id=\"u514931fa\"><br></p><h3 data-lake-id=\"324acdd1\" id=\"324acdd1\"><span data-lake-id=\"u5338e2e7\" id=\"u5338e2e7\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">压缩和解压缩</span></h3><p data-lake-id=\"u730d6716\" id=\"u730d6716\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23zip%E5%91%BD%E4%BB%A4%5Cnzip%20-r%20myfile.zip%20.%2F*%20%23%E5%8E%8B%E7%BC%A9%E7%9B%AE%E5%BD%95%5Cnzip%20-d%20myfile.zip%20smart.txt%20%23%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%5Cnunzip%20-o%20-d%20%2Fhome%2Fsunny%20myfile.zip%20%20%23%E8%A7%A3%E5%8E%8B%E7%BC%A9%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%226f4f3370%22%7D\"></card><p data-lake-id=\"u7c0032db\" id=\"u7c0032db\"><br></p><h3 data-lake-id=\"9e538366\" id=\"9e538366\"><span data-lake-id=\"u86dc992a\" id=\"u86dc992a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">开关机命令</span></h3><p data-lake-id=\"ud7d92355\" id=\"ud7d92355\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%E7%AB%8B%E5%88%BB%E8%BF%9B%E8%A1%8C%E5%85%B3%E6%9C%BA%5Cnshutdown%20-h%20now%20%20%5Cn%5Cn%23%E7%8E%B0%E5%9C%A8%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%5Cnreboot%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22fe67a3b2%22%7D\"></card><p data-lake-id=\"ud37c3d9b\" id=\"ud37c3d9b\"><br></p><h3 data-lake-id=\"0d347eea\" id=\"0d347eea\"><span data-lake-id=\"u1df137ea\" id=\"u1df137ea\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">docker相关：</span></h3><p data-lake-id=\"u59eff046\" id=\"u59eff046\"><br></p><h4 data-lake-id=\"55d4453a\" id=\"55d4453a\"><span data-lake-id=\"u3e611e70\" id=\"u3e611e70\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">a、从docker inspect查看docker run的运行命令参数</span></h4><p data-lake-id=\"uaf54143b\" id=\"uaf54143b\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22--name%E5%9C%A8Name%E8%A1%A8%E7%A4%BA%E5%AE%B9%E5%99%A8%E5%90%8D%E7%A7%B0%EF%BC%9B%5Cn%5Cn-p%E5%9C%A8%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E6%83%85%E5%86%B5%E5%A6%82%E5%9C%A8%20NetworkSettings.Ports%E5%B1%9E%E6%80%A7%E4%B8%8B%E5%8F%AF%E4%BB%A5%E6%98%8E%E6%98%BE%E5%9C%B0%E7%9C%8B%E5%88%B0%2C%20%E5%9C%A8%E5%B7%B2%E5%BB%BA%E7%AB%8B%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E7%9A%84%E5%B1%9E%E6%80%A7%E4%B8%8B%E4%BC%9A%E6%9C%89%20HostIp%E5%92%8CHostPort%20%E4%B8%A4%E4%B8%AA%E5%AD%90%E5%B1%9E%E6%80%A7%3B%20%E5%9C%A8%E6%B2%A1%E6%9C%89%E5%BB%BA%E7%AB%8B%E6%98%A0%E5%B0%84%E6%83%85%E5%86%B5%E4%B8%8B%2C%20%E5%AD%90%E5%B1%9E%E6%80%A7%E4%B8%BAnull%5Cn%5Cn-v%E7%9B%AE%E5%BD%95%E6%98%A0%E5%B0%84%E5%9C%A8HostConfig.Binds%E5%92%8CHostConfig.Mounts%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%5Cn%5Cn--net%20diynet%20%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C%E5%9C%A8HostConfig.NetworkMode%E5%92%8CNetworkSettings.Networks%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%5Cn%5Cn--add-host%3Dmirrors.test.com%3A128.0.0.2%20docker%E4%B8%AD%E7%9A%84host%E9%85%8D%E7%BD%AE%E5%9C%A8HostConfig.ExtraHosts%5Cn%5Cnnginx%3Alatest%E5%9C%A8Config.Image%E8%A1%A8%E7%A4%BA%E9%95%9C%E5%83%8F%E5%90%8D%E7%A7%B0%5Cn%5Cn--link%20php74fpm%20%E5%92%8Cphp74fpm%E7%9A%84%E5%AE%B9%E5%99%A8%E4%BA%92%E8%81%94%20%20%E5%9C%A8NetworkSettings.Networks.Links%E5%8F%AF%E4%BB%A5%E6%89%BE%E5%88%B0%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22customStyle%22%3A%5B%5D%2C%22id%22%3A%22e04c99f0%22%7D\"></card><p data-lake-id=\"u514f87e5\" id=\"u514f87e5\"><br></p><h4 data-lake-id=\"5a47cc82\" id=\"5a47cc82\"><span data-lake-id=\"ucafd63e6\" id=\"ucafd63e6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">b、查看docker容器ip:</span></h4><p data-lake-id=\"u9682a25d\" id=\"u9682a25d\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22docker%20inspect%20--format%20'%7B%7B%20.NetworkSettings.IPAddress%20%7D%7D'%20%3Ccontainer-ID%3E%5Cn%23%E6%88%96%E8%80%85%5Cndocker%20inspect%20-f%20'%7B%7Brange%20.NetworkSettings.Networks%7D%7D%7B%7B.IPAddress%7D%7D%7B%7Bend%7D%7D'%20container_name_or_id%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2254b42f8c%22%7D\"></card><p data-lake-id=\"uaf95926b\" id=\"uaf95926b\"><br></p><h4 data-lake-id=\"2c0d16c9\" id=\"2c0d16c9\"><span data-lake-id=\"uae59387f\" id=\"uae59387f\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">c、查看容器ip:</span></h4><p data-lake-id=\"uaade3ca0\" id=\"uaade3ca0\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22docker%20inspect%20-f%20'%7B%7Brange%20.NetworkSettings.Networks%7D%7D%7B%7B.IPAddress%7D%7D%7B%7Bend%7D%7D'%20container_name_or_id%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22360ee490%22%7D\"></card><p data-lake-id=\"u41c40f6e\" id=\"u41c40f6e\"><br></p><p data-lake-id=\"u1c056c3b\" id=\"u1c056c3b\"><span data-lake-id=\"u4806e316\" id=\"u4806e316\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查看python版本</span></p><p data-lake-id=\"ud95ddcea\" id=\"ud95ddcea\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23liunx%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E5%AE%89%E8%A3%85%E4%BA%86python2%5Cnpython%20-V%5Cn%23%E5%A6%82%E6%9E%9C%E5%AE%89%E8%A3%85%E5%AE%8Cpython3%E6%B2%A1%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%5Cnpython3%20-V%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22db0a4e0a%22%7D\"></card><p data-lake-id=\"u988a9937\" id=\"u988a9937\"><br></p><h2 data-lake-id=\"75fc923e\" id=\"75fc923e\"><span data-lake-id=\"u7b0cdba5\" id=\"u7b0cdba5\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">数据库命令：</span></h2><p data-lake-id=\"uf15bc0fe\" id=\"uf15bc0fe\"><br></p><h3 data-lake-id=\"8173f0ab\" id=\"8173f0ab\"><span data-lake-id=\"u01288cdd\" id=\"u01288cdd\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">修改当前登录用户的密码</span></h3><p data-lake-id=\"ue60c3e5a\" id=\"ue60c3e5a\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22ALTER%20USER%20USER()%20IDENTIFIED%20BY%20%5C%22password%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2239accd77%22%7D\"></card><p data-lake-id=\"u6330eae7\" id=\"u6330eae7\"><br></p><h3 data-lake-id=\"580af12b\" id=\"580af12b\"><span data-lake-id=\"uf21a493d\" id=\"uf21a493d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">新增用户并赋权</span></h3><p data-lake-id=\"u85b9ecc0\" id=\"u85b9ecc0\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%5CnCREATE%20USER%20'username'%40'%25'%20IDENTIFIED%20BY%20'password'%3B%5Cn%23%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%5CnGRANT%20ALL%20ON%20*.*%20TO%20'username'%40'%25'%3B%5Cn%23%E5%88%B7%E6%96%B0%E6%8E%88%E6%9D%83%5Cnflush%20privileges%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22a9369f0a%22%7D\"></card><p data-lake-id=\"ue3305dd1\" id=\"ue3305dd1\"><br></p><h3 data-lake-id=\"c3a176e3\" id=\"c3a176e3\"><span data-lake-id=\"u6b82656b\" id=\"u6b82656b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">导出/导入数据库</span></h3><p data-lake-id=\"u66435cc2\" id=\"u66435cc2\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%E5%A4%87%E4%BB%BDmysql%E5%91%BD%E4%BB%A4%3A%EF%BC%88%E5%AF%BC%E5%87%BA%EF%BC%89%5Cnmysqldump%20-uroot%20-proot%20%E5%BA%93%E5%90%8D%20%3E%20%E8%B7%AF%E5%BE%84%5C%5Cceshi_copy.sql%5Cn%5Cn%23%E8%BF%98%E5%8E%9Fmysql%E5%91%BD%E4%BB%A4%EF%BC%9A%EF%BC%88%E5%AF%BC%E5%85%A5%EF%BC%89%5Cnmysql%3E%20use%20%E6%95%B0%E6%8D%AE%E5%BA%93%3B%5Cnmysql%3Esource%20d%3A%5C%5Cbak%5C%5Cbak.sql%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22730ed197%22%7D\"></card><p data-lake-id=\"u0f7de479\" id=\"u0f7de479\"><br></p><h2 data-lake-id=\"83766838\" id=\"83766838\"><span data-lake-id=\"u7de15809\" id=\"u7de15809\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">win系统常用命令</span></h2><p data-lake-id=\"u1e5b088d\" id=\"u1e5b088d\"><br></p><h3 data-lake-id=\"c65278f3\" id=\"c65278f3\"><span data-lake-id=\"uf6226f7a\" id=\"uf6226f7a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">win系统 dos监听端口：</span></h3><p data-lake-id=\"u888be533\" id=\"u888be533\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22netstat%20-ano%7Cfindstr%2080%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2268b1e2a3%22%7D\"></card><p data-lake-id=\"u68156c89\" id=\"u68156c89\"><br></p><h3 data-lake-id=\"64ebde4d\" id=\"64ebde4d\"><span data-lake-id=\"uec8aa665\" id=\"uec8aa665\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">win系统杀死进程：</span></h3><p data-lake-id=\"u187c58c3\" id=\"u187c58c3\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22tskill%20%E8%BF%9B%E7%A8%8B%E5%8F%B7%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22a95c18bf%22%7D\"></card><p data-lake-id=\"uc081a38f\" id=\"uc081a38f\"><br></p><p data-lake-id=\"ub80aba17\" id=\"ub80aba17\"><span data-lake-id=\"u3049a3d0\" id=\"u3049a3d0\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">查找文件</span></p><p data-lake-id=\"u7ba97dc5\" id=\"u7ba97dc5\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22dir%20%5C%22new%20sc.%5C%22*%20%2Fs%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22d387ddfb%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 38,
    "hits": 38,
    "comments_count": 0,
    "word_count": 910,
    "created_at": "2023-07-27T01:59:55.000Z",
    "updated_at": "2024-05-09T01:44:28.000Z",
    "content_updated_at": "2024-05-09T01:44:27.000Z",
    "published_at": "2024-05-09T01:44:28.000Z",
    "first_published_at": "2023-07-27T02:00:33.775Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2502854661,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 114089329,
    "type": "Doc",
    "slug": "whsgyxcs8f65bp08",
    "title": "结合ajax完成layui的分页",
    "description": "tags: []categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:本文为大家介绍layui的分页使用教程，步骤详细，欢迎学习。 ~官网地址...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">本文为大家介绍</span><a href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">layui</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的分页使用教程，步骤详细，欢迎学习。 ~</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">官网地址：</span><a href=\"https://layui.gitee.io/v2/docs/modules/laypage.html\" data-href=\"https://layui.gitee.io/v2/docs/modules/laypage.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://layui.gitee.io/v2/docs/modules/laypage.html</span></a><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">laypage 的使用非常简单，指向一个用于存放分页的容器，通过服务端得到一些初始值，即可完成分页渲染：</span></p><p id=\"ua8cee324\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><p id=\"uf84f4071\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">一、导入相关JS</span></p><pre data-language=\"plain\" id=\"RTWUY\" class=\"ne-codeblock language-plain\"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;js/layui.js&quot;&gt;&lt;/script&gt;</code></pre><p id=\"ua77bbcda\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">二、选择容器</span></p><pre data-language=\"plain\" id=\"prt9m\" class=\"ne-codeblock language-plain\"><code>&lt;div id=&quot;test1&quot;&gt;&lt;/div&gt;   </code></pre><p id=\"uc6886ae1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">三、初始化分页</span></p><pre data-language=\"plain\" id=\"meqwi\" class=\"ne-codeblock language-plain\"><code>layui.use('laypage', function(){\n        $.ajax({\n            type:&quot;POST&quot;,\n            url:&quot;&quot;,\n            dataType:&quot;json&quot;,\n            data:{},\n            success:function (data) {\n                //执行一个laypage实例\n                laypage.render({\n                    elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号\n                    ,count: data.totalRow //数据总数，从服务端得到\n                    ,limit:4 //每页条数\n                    ,prev:&quot;🔼&quot;\n                    ,next:&quot;🔽&quot;\n                    ,theme: '#FF5722'\n                    ,layout: ['count', 'prev', 'page', 'next']\n                    ,jump: function(obj, first){\n                        //obj包含了当前分页的所有参数，比如：\n                        //  console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。\n                        //  console.log(obj.limit); //得到每页显示的条数\n                        $.ajax({\n                            type:&quot;POST&quot;,\n                            url:&quot;&quot;,\n                            dataType:&quot;json&quot;,\n                            data:{&quot;courseId&quot;:courseId,page:obj.curr,pageSize: 4},\n                            success:function (data) {\n                                var dataList = data.list;\n                                for (var i = 0; i &lt; dataList.length; i++) {\n                                    classRoomName = dataList[i].name;\n                                    playSource = dataList[i].device_preview_rtmp; \n                                }\n                            }\n                        })\n                    }\n                });\n            }\n        });\n});</code></pre><p id=\"ucbd164f9\" class=\"ne-p\"><br></p><p id=\"u8954b75f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">注：以上就是结合</span><a href=\"https://so.csdn.net/so/search?q=ajax&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=ajax&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ajax</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">完成layui的分页教程，非常简单，其他分页样式及参数介绍在官网中有很详细的介绍可以去学习。</span></p></div>",
    "body": "tags: []<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />本文为大家介绍[layui](https://so.csdn.net/so/search?q=layui&spm=1001.2101.3001.7020)的分页使用教程，步骤详细，欢迎学习。 ~<br />官网地址：[https://layui.gitee.io/v2/docs/modules/laypage.html](https://layui.gitee.io/v2/docs/modules/laypage.html)<br />laypage 的使用非常简单，指向一个用于存放分页的容器，通过服务端得到一些初始值，即可完成分页渲染：\n\n一、导入相关JS\n```\n<script type=\"text/javascript\" src=\"js/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"js/layui.js\"></script>\n```\n二、选择容器\n```\n<div id=\"test1\"></div>   \n```\n三、初始化分页\n```\nlayui.use('laypage', function(){\n        $.ajax({\n            type:\"POST\",\n            url:\"\",\n            dataType:\"json\",\n            data:{},\n            success:function (data) {\n                //执行一个laypage实例\n                laypage.render({\n                    elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号\n                    ,count: data.totalRow //数据总数，从服务端得到\n                    ,limit:4 //每页条数\n                    ,prev:\"🔼\"\n                    ,next:\"🔽\"\n                    ,theme: '#FF5722'\n                    ,layout: ['count', 'prev', 'page', 'next']\n                    ,jump: function(obj, first){\n                        //obj包含了当前分页的所有参数，比如：\n                        //  console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。\n                        //  console.log(obj.limit); //得到每页显示的条数\n                        $.ajax({\n                            type:\"POST\",\n                            url:\"\",\n                            dataType:\"json\",\n                            data:{\"courseId\":courseId,page:obj.curr,pageSize: 4},\n                            success:function (data) {\n                                var dataList = data.list;\n                                for (var i = 0; i < dataList.length; i++) {\n                                    classRoomName = dataList[i].name;\n                                    playSource = dataList[i].device_preview_rtmp; \n                                }\n                            }\n                        })\n                    }\n                });\n            }\n        });\n});\n```\n\n注：以上就是结合[ajax](https://so.csdn.net/so/search?q=ajax&spm=1001.2101.3001.7020)完成layui的分页教程，非常简单，其他分页样式及参数介绍在官网中有很详细的介绍可以去学习。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: []</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">本文为大家介绍</span><a href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">layui</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的分页使用教程，步骤详细，欢迎学习。 ~</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">官网地址：</span><a href=\"https://layui.gitee.io/v2/docs/modules/laypage.html\" data-href=\"https://layui.gitee.io/v2/docs/modules/laypage.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://layui.gitee.io/v2/docs/modules/laypage.html</span></a><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">laypage 的使用非常简单，指向一个用于存放分页的容器，通过服务端得到一些初始值，即可完成分页渲染：</span></p><p id=\"ua8cee324\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><p id=\"uf84f4071\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">一、导入相关JS</span></p><pre data-language=\"plain\" id=\"RTWUY\" class=\"ne-codeblock language-plain\"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;js/layui.js&quot;&gt;&lt;/script&gt;</code></pre><p id=\"ua77bbcda\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">二、选择容器</span></p><pre data-language=\"plain\" id=\"prt9m\" class=\"ne-codeblock language-plain\"><code>&lt;div id=&quot;test1&quot;&gt;&lt;/div&gt;   </code></pre><p id=\"uc6886ae1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">三、初始化分页</span></p><pre data-language=\"plain\" id=\"meqwi\" class=\"ne-codeblock language-plain\"><code>layui.use('laypage', function(){\n        $.ajax({\n            type:&quot;POST&quot;,\n            url:&quot;&quot;,\n            dataType:&quot;json&quot;,\n            data:{},\n            success:function (data) {\n                //执行一个laypage实例\n                laypage.render({\n                    elem: 'test1' //注意，这里的 test1 是 ID，不用加 # 号\n                    ,count: data.totalRow //数据总数，从服务端得到\n                    ,limit:4 //每页条数\n                    ,prev:&quot;🔼&quot;\n                    ,next:&quot;🔽&quot;\n                    ,theme: '#FF5722'\n                    ,layout: ['count', 'prev', 'page', 'next']\n                    ,jump: function(obj, first){\n                        //obj包含了当前分页的所有参数，比如：\n                        //  console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。\n                        //  console.log(obj.limit); //得到每页显示的条数\n                        $.ajax({\n                            type:&quot;POST&quot;,\n                            url:&quot;&quot;,\n                            dataType:&quot;json&quot;,\n                            data:{&quot;courseId&quot;:courseId,page:obj.curr,pageSize: 4},\n                            success:function (data) {\n                                var dataList = data.list;\n                                for (var i = 0; i &lt; dataList.length; i++) {\n                                    classRoomName = dataList[i].name;\n                                    playSource = dataList[i].device_preview_rtmp; \n                                }\n                            }\n                        })\n                    }\n                });\n            }\n        });\n});</code></pre><p id=\"ucbd164f9\" class=\"ne-p\"><br></p><p id=\"u8954b75f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">注：以上就是结合</span><a href=\"https://so.csdn.net/so/search?q=ajax&amp;spm=1001.2101.3001.7020\" data-href=\"https://so.csdn.net/so/search?q=ajax&amp;spm=1001.2101.3001.7020\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ajax</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">完成layui的分页教程，非常简单，其他分页样式及参数介绍在官网中有很详细的介绍可以去学习。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: []</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"u3e1d0d47\" id=\"u3e1d0d47\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u42f25f2d\" id=\"u42f25f2d\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"u8fca3d37\" id=\"u8fca3d37\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u7ba69a02\" id=\"u7ba69a02\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">本文为大家介绍</span><a href=\"https://so.csdn.net/so/search?q=layui&amp;spm=1001.2101.3001.7020\" target=\"_blank\" data-lake-id=\"u723c1fbb\" id=\"u723c1fbb\"><span data-lake-id=\"u16fe4c63\" id=\"u16fe4c63\">layui</span></a><span data-lake-id=\"uf96cd241\" id=\"uf96cd241\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">的分页使用教程，步骤详细，欢迎学习。 ~</span><span data-lake-id=\"u017ac272\" id=\"u017ac272\"><br /></span><span data-lake-id=\"u130a1351\" id=\"u130a1351\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">官网地址：</span><a href=\"https://layui.gitee.io/v2/docs/modules/laypage.html\" target=\"_blank\" data-lake-id=\"u301a4fb3\" id=\"u301a4fb3\"><span data-lake-id=\"u19d22563\" id=\"u19d22563\">https://layui.gitee.io/v2/docs/modules/laypage.html</span></a><span data-lake-id=\"u7d041ec9\" id=\"u7d041ec9\"><br /></span><span data-lake-id=\"u91b50c27\" id=\"u91b50c27\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">laypage 的使用非常简单，指向一个用于存放分页的容器，通过服务端得到一些初始值，即可完成分页渲染：</span></p><p data-lake-id=\"ua8cee324\" id=\"ua8cee324\"><span data-lake-id=\"u21d0a33a\" id=\"u21d0a33a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><p data-lake-id=\"uf84f4071\" id=\"uf84f4071\"><span data-lake-id=\"udf7f1281\" id=\"udf7f1281\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">一、导入相关JS</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3Cscript%20type%3D%5C%22text%2Fjavascript%5C%22%20src%3D%5C%22js%2Fjquery.min.js%5C%22%3E%3C%2Fscript%3E%5Cn%3Cscript%20type%3D%5C%22text%2Fjavascript%5C%22%20src%3D%5C%22js%2Flayui.js%5C%22%3E%3C%2Fscript%3E%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22RTWUY%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua77bbcda\" id=\"ua77bbcda\"><span data-lake-id=\"u3fa547e7\" id=\"u3fa547e7\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">二、选择容器</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3Cdiv%20id%3D%5C%22test1%5C%22%3E%3C%2Fdiv%3E%20%20%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22prt9m%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uc6886ae1\" id=\"uc6886ae1\"><span data-lake-id=\"u922763ef\" id=\"u922763ef\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">三、初始化分页</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22layui.use('laypage'%2C%20function()%7B%5Cn%20%20%20%20%20%20%20%20%24.ajax(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20type%3A%5C%22POST%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20url%3A%5C%22%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20dataType%3A%5C%22json%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20data%3A%7B%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20success%3Afunction%20(data)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E6%89%A7%E8%A1%8C%E4%B8%80%E4%B8%AAlaypage%E5%AE%9E%E4%BE%8B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20laypage.render(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elem%3A%20'test1'%20%2F%2F%E6%B3%A8%E6%84%8F%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9A%84%20test1%20%E6%98%AF%20ID%EF%BC%8C%E4%B8%8D%E7%94%A8%E5%8A%A0%20%23%20%E5%8F%B7%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Ccount%3A%20data.totalRow%20%2F%2F%E6%95%B0%E6%8D%AE%E6%80%BB%E6%95%B0%EF%BC%8C%E4%BB%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BE%97%E5%88%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Climit%3A4%20%2F%2F%E6%AF%8F%E9%A1%B5%E6%9D%A1%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Cprev%3A%5C%22%F0%9F%94%BC%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Cnext%3A%5C%22%F0%9F%94%BD%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Ctheme%3A%20'%23FF5722'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Clayout%3A%20%5B'count'%2C%20'prev'%2C%20'page'%2C%20'next'%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Cjump%3A%20function(obj%2C%20first)%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fobj%E5%8C%85%E5%90%AB%E4%BA%86%E5%BD%93%E5%89%8D%E5%88%86%E9%A1%B5%E7%9A%84%E6%89%80%E6%9C%89%E5%8F%82%E6%95%B0%EF%BC%8C%E6%AF%94%E5%A6%82%EF%BC%9A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20console.log(obj.curr)%3B%20%2F%2F%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E9%A1%B5%EF%BC%8C%E4%BB%A5%E4%BE%BF%E5%90%91%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%B7%E6%B1%82%E5%AF%B9%E5%BA%94%E9%A1%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20console.log(obj.limit)%3B%20%2F%2F%E5%BE%97%E5%88%B0%E6%AF%8F%E9%A1%B5%E6%98%BE%E7%A4%BA%E7%9A%84%E6%9D%A1%E6%95%B0%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.ajax(%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%5C%22POST%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%3A%5C%22%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataType%3A%5C%22json%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A%7B%5C%22courseId%5C%22%3AcourseId%2Cpage%3Aobj.curr%2CpageSize%3A%204%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20success%3Afunction%20(data)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20dataList%20%3D%20data.list%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20dataList.length%3B%20i%2B%2B)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20classRoomName%20%3D%20dataList%5Bi%5D.name%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20playSource%20%3D%20dataList%5Bi%5D.device_preview_rtmp%3B%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%7D)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22meqwi%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ucbd164f9\" id=\"ucbd164f9\"><br></p><p data-lake-id=\"u8954b75f\" id=\"u8954b75f\"><span data-lake-id=\"ueb005f3f\" id=\"ueb005f3f\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">注：以上就是结合</span><a href=\"https://so.csdn.net/so/search?q=ajax&amp;spm=1001.2101.3001.7020\" target=\"_blank\" data-lake-id=\"u77bb15c8\" id=\"u77bb15c8\"><span data-lake-id=\"u86d9b54c\" id=\"u86d9b54c\">ajax</span></a><span data-lake-id=\"uc624b1ad\" id=\"uc624b1ad\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">完成layui的分页教程，非常简单，其他分页样式及参数介绍在官网中有很详细的介绍可以去学习。</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 3,
    "hits": 3,
    "comments_count": 0,
    "word_count": 333,
    "created_at": "2023-02-10T09:04:24.000Z",
    "updated_at": "2023-08-09T02:38:00.000Z",
    "content_updated_at": "2023-08-09T02:38:00.000Z",
    "published_at": "2023-08-09T02:38:00.000Z",
    "first_published_at": "2023-02-10T09:06:34.303Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913889597,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 93309116,
    "type": "Doc",
    "slug": "cnlc11",
    "title": "elasticsearch8.x使用笔记",
    "description": "tags: [elasticsearch]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:ElasticSearch是一个基于Lucen...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309015056-cf880cb3-6a8b-4da8-aeb4-1920932fcec4.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [elasticsearch]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><a href=\"https://www.elastic.co/cn/enterprise-search/\" data-href=\"https://www.elastic.co/cn/enterprise-search/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ElasticSearch</span></a><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 16px\">是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</span></p></div><p id=\"ufdb5bb8f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 16px\">在做搜索的时候想到了 </span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); background-color: rgb(238, 238, 238); font-size: 13px\">ElasticSearch</span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 16px\"> ，而且其也支持 </span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); background-color: rgb(238, 238, 238); font-size: 13px\">PHP</span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 16px\">，所以就做了一个简单的例子做测试，感觉还不错，做下记录~</span></p><h1 id=\"AWkuM\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85)\">1、环境</span></h1><ol class=\"ne-ol\"><li id=\"u1eb70b53\" data-lake-index-type=\"0\"><span class=\"ne-text\">php 8.0</span></li><li id=\"ua221752a\" data-lake-index-type=\"0\"><span class=\"ne-text\">elasticsearch 8.4.1  </span><a href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.4.1-windows-x86_64.zip\" data-href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.4.1-windows-x86_64.zip\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">下载</span></a></li><li id=\"ud0b5529b\" data-lake-index-type=\"0\"><span class=\"ne-text\">thinkphp6.0</span></li><li id=\"u3b1f65ce\" data-lake-index-type=\"0\"><span class=\"ne-text\">php elasticsearch 8.4</span></li></ol><h1 id=\"ITYO3\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85)\">2、安装【windows】</span></h1><p id=\"u302aa8b0\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">1、下载 </span><span class=\"ne-text\">elasticsearch-8.4.1-windows-x86_64 包，并解压 </span></p><p id=\"ud7eb1430\" class=\"ne-p\"><span class=\"ne-text\">2、ES自带jdk的，所以可以不用安装java组件</span></p><p id=\"ua94b70c5\" class=\"ne-p\"><span class=\"ne-text\">3、打开bin文件夹，直接双击 elasticsearch.bat 运行</span></p><p id=\"u99f0efd1\" class=\"ne-p\"><span class=\"ne-text\">4、访问：http://127.0.0.1:9200/，如果出现如下数据，那启动正常</span></p><p id=\"u3a17dc0c\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309015056-cf880cb3-6a8b-4da8-aeb4-1920932fcec4.png\" width=\"685.5849303330091\" id=\"u405df5a0\" class=\"ne-image\"></p><h1 id=\"D1WR2\"><span class=\"ne-text\">3、安装【Linux】</span></h1><p id=\"u3a73f219\" class=\"ne-p\"><span class=\"ne-text\">暂无测试</span></p><p id=\"u3624d1ff\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"eGhZG\"><span class=\"ne-text\">4、SSL安全</span></h1><p id=\"ufab56786\" class=\"ne-p\"><span class=\"ne-text\">暂无</span></p><h1 id=\"GddJt\"><span class=\"ne-text\">5、数据界面工具</span></h1><h2 id=\"mT0Fe\"><span class=\"ne-text\">1、kibana【官方】</span></h2><p id=\"u8369c4ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(73, 73, 73); font-size: 14px\">Kibana 是为 Elasticsearch设计的开源分析和可视化平台。你可以使用 Kibana 来搜索，查看存储在 Elasticsearch 索引中的数据并与之交互。你可以很容易实现高级的数据分析和可视化，以图表的形式展现出来。</span></p><p id=\"u5c422943\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663310319574-4f3c7fed-0696-4c7a-914c-8fcc6c69bbc4.png\" width=\"2864\" id=\"u732fbabb\" class=\"ne-image\"></p><p id=\"udb2620c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(73, 73, 73); font-size: 14px\">安装参考：</span><a href=\"https://www.cnblogs.com/chenqionghe/p/12503181.html\" data-href=\"https://www.cnblogs.com/chenqionghe/p/12503181.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://www.cnblogs.com/chenqionghe/p/12503181.html</span></a></p><h2 id=\"jEKPh\"><span class=\"ne-text\">2、elasticsearch-head插件</span></h2><div class=\"ne-quote\"><p id=\"u396fa88f\" class=\"ne-p\"><span class=\"ne-text\">elasticsearch-head是Web前端，用于浏览和与Elastic Search集群进行交互，可用于集群管理、数据可视化、增删改查工具Elasticsearch语句可视化等。</span></p></div><p id=\"u7f4025d0\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309790115-5a0c385b-f905-42e9-8942-68c84db9555c.png\" width=\"902.9434287212814\" id=\"u0679ac24\" class=\"ne-image\"></p><p id=\"u4c997375\" class=\"ne-p\"><br></p><p id=\"u47d46040\" class=\"ne-p\"><span class=\"ne-text\">elasticsearch-head  github源码地址：</span></p><p id=\"ud15a40db\" class=\"ne-p\"><a href=\"https://github.com/mobz/elasticsearch-head\" data-href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/mobz/elasticsearch-head</span></a></p><h3 id=\"iSzYI\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">插件的安装【Linux】</span></h3><p id=\"u04ecc44e\" class=\"ne-p\"><span class=\"ne-text\">下载elasticsearch-head插件</span></p><p id=\"u83fc2b76\" class=\"ne-p\"><span class=\"ne-text\">进入elasticsearch-head源码目录中，执行 npm install</span></p><p id=\"ue3665761\" class=\"ne-p\"><span class=\"ne-text\">在运行npm install时，可能会存在Head插件phantomjs权限问题</span></p><pre data-language=\"shell\" id=\"OJQRp\" class=\"ne-codeblock language-shell\"><code>npm WARN deprecated phantomjs-prebuilt@2.1.16: this package is now deprecated\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN deprecated har-validator@5.1.5: this\nnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\n&gt; phantomjs-prebuilt@2.1.16 install E:\\JavaDevelopment\\elasticsearch\\elasticsearch-head-master\\node_modules\\phantomjs-prebuilt\n&gt; node install.js\n\nPhantomJS not found on PATH\nDownloading https://github.com/Medium/phantomjs/releases/download/v2.1.1/phantomjs-2.1.1-windows.zip\nSaving to C:\\Users\\ysxx\\AppData\\Local\\Temp\\phantomjs\\phantomjs-2.1.1-windows.zip\nReceiving...\n\nError making request.\nError: connect ETIMEDOUT 140.82.114.4:443\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1107:14)\n\nPlease report this full log at https://github.com/Medium/phantomjs\nnpm WARN elasticsearch-head@0.0.0 license should be a valid SPDX license expression\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules\\fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;} (current: {&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;})\n\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! phantomjs-prebuilt@2.1.16 install: `node install.js`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the phantomjs-prebuilt@2.1.16 install script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\ysxx\\AppData\\Roaming\\npm-cache\\_logs\\2020-12-28T01_28_03_195Z-debug.log</code></pre><p id=\"uc98dfc71\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">解决方案：在npm install命令后加 -g 参数</span></strong></p><pre data-language=\"shell\" id=\"eyMCD\" class=\"ne-codeblock language-shell\"><code>npm install -g</code></pre><p id=\"ud6e7654d\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">在install成功之后，执行 </span></strong><strong><span class=\"ne-text\" style=\"color: rgb(30, 107, 184); font-size: 14px\">npm run start</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\"> 启动head插件</span></strong></p><p id=\"u75ed87c2\" class=\"ne-p\"><span class=\"ne-text\">在cmd命令行可以看到 web server 地址，在浏览器访问该地址 http://localhost:9100，如果出现elasticsearch-head插件连不上elasticsearch服务，需要在elasticsearch安装目录下的config文件夹，找到elasticsearch.yml文件，添加两行配置：</span></p><pre data-language=\"shell\" id=\"FcdLO\" class=\"ne-codeblock language-shell\"><code>#表示是否支持跨域，默认为false\nhttp.cors.enabled: true\n#当设置允许跨域，默认为*,表示支持所有域名\nhttp.cors.allow-origin: &quot;*&quot;</code></pre><p id=\"u66b8c837\" class=\"ne-p\"><br></p><h3 id=\"UNWgC\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">插件的安装【window浏览器】</span></h3><p id=\"u00097577\" class=\"ne-p\"><span class=\"ne-text\">打开谷歌浏览器应用插件网址：</span></p><p id=\"u676a4743\" class=\"ne-p\"><a href=\"https://chrome.google.com/webstore/category/extensions?hl=zh-CN\" data-href=\"https://chrome.google.com/webstore/category/extensions?hl=zh-CN\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://chrome.google.com/webstore/category/extensions?hl=zh-CN</span></a></p><p id=\"u32b61aca\" class=\"ne-p\"><span class=\"ne-text\">搜索：elasticsearch-head</span></p><p id=\"u7dce0663\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309964980-79cba546-1a82-4d28-8be4-b3602b1f70b9.png\" width=\"1238.0377804032012\" id=\"u5fb66667\" class=\"ne-image\"></p><p id=\"ua91bcaa6\" class=\"ne-p\"><span class=\"ne-text\">直接进入后点击下载【安装】，即可在浏览器上安装成功此插件。</span></p><p id=\"u3779ad5b\" class=\"ne-p\"><span class=\"ne-text\">直接打开插件即可。</span></p><p id=\"u9e3b66de\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"sMlq7\"><span class=\"ne-text\">6、php系统安装ES</span></h1><div class=\"ne-quote\"><p id=\"uf14dac87\" class=\"ne-p\"><span class=\"ne-text\">默认程序使用thinkphp6.0，安装方式使用 composer</span></p></div><p id=\"uc8d29e24\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u5490c37c\" class=\"ne-p\"><span class=\"ne-text\">在命令行执行：</span></p><pre data-language=\"shell\" id=\"Oomv8\" class=\"ne-codeblock language-shell\"><code>composer require elasticsearch/elasticsearch</code></pre><p id=\"u2f05b0c7\" class=\"ne-p\"><span class=\"ne-text\">正确等待响应后会安装成功。</span></p><p id=\"u9d675726\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"h6njl\"><span class=\"ne-text\">7、php-ES的使用</span></h1><p id=\"uadf50d93\" class=\"ne-p\"><span class=\"ne-text\">引入类库：</span></p><div class=\"ne-quote\"><p id=\"u203603e5\" class=\"ne-p\"><span class=\"ne-text\">注意，这里和7.x及之前的版本不同。</span></p></div><pre data-language=\"php\" id=\"DLLym\" class=\"ne-codeblock language-php\"><code>use Elastic\\Elasticsearch\\ClientBuilder;\n\n$client = ClientBuilder::create()-&gt;setHosts(['127.0.0.1:9200'])-&gt;build();</code></pre><p id=\"ua33e4c32\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u73b14f09\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\">完整类库：</span></strong></p><pre data-language=\"php\" id=\"SsBnQ\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2022-09-16\n * Time: 11:05:20\n * Info:\n */\n\nnamespace app\\portal\\service;\n\nuse Elastic\\Elasticsearch\\ClientBuilder;\n\nclass ElasticsearchService\n{\n\n    protected $client;\n\n    protected $index_name;\n\n    protected $type;\n\n    // 构造函数\n    public function __construct($indexName = 'article_index')\n    {\n        $this-&gt;index_name = $indexName;\n        $params           = ['127.0.0.1:9200'];\n        $this-&gt;client     = ClientBuilder::create()-&gt;setHosts($params)-&gt;build();\n    }\n\n    /**\n     * 判断索引是否存在\n     * @return bool\n     */\n    public function exist_index()\n    {\n        $params = ['index' =&gt; $this-&gt;index_name];\n\n        return $this-&gt;client-&gt;indices()-&gt;exists($params)-&gt;asBool();\n    }\n\n    /**\n     * 创建索引\n     * 同一索引只能创建一次\n     * @return bool\n     */\n    public function create_index()\n    {\n        $res = $this-&gt;exist_index();\n        if ( ! $res) {\n            $param = [\n                'index' =&gt; $this-&gt;index_name,\n                'body'  =&gt; []\n            ];\n\n            return $this-&gt;client-&gt;indices()-&gt;create($param)-&gt;asBool();\n        }\n    }\n\n    /**\n     * 获取索引结构\n     * @return array\n     */\n    public function get_index()\n    {\n        $params = ['index' =&gt; $this-&gt;index_name];\n\n        try {\n            return $this-&gt;client-&gt;indices()-&gt;get($params)-&gt;asArray();\n        } catch (\\Exception $e) {\n            return [];\n        }\n    }\n\n    /**\n     * 删除索引\n     * @return array\n     */\n    public function delete_index()\n    {\n        $params = ['index' =&gt; $this-&gt;index_name];\n\n        try {\n            return $this-&gt;client-&gt;indices()-&gt;delete($params)-&gt;asBool();\n        } catch (\\Exception $e) {\n            return false;\n        }\n    }\n\n    /*\n     * 将内容加入文档\n     */\n    public function add_article($data)\n    {\n        $params = [\n            'body'  =&gt; $data,\n            'id'    =&gt; 'article_'.$data['id'],\n            'index' =&gt; $this-&gt;index_name,\n        ];\n        $this-&gt;client-&gt;index($params)-&gt;asArray();\n    }\n\n    /**\n     * 删除一个文档\n     */\n    public function delete_article($id)\n    {\n        $params = [\n            'index' =&gt; $this-&gt;index_name,\n            'id'    =&gt; $id\n        ];\n\n        try {\n            return $this-&gt;client-&gt;delete($params)-&gt;asBool();\n        } catch (\\Exception $e) {\n            return false;\n        }\n    }\n\n    /**\n     * 查询文档\n     */\n    public function find_article()\n    {\n        $params = [\n            'index' =&gt; 'articles_index',\n            'body'  =&gt; [\n                'query'     =&gt; [\n                    'match' =&gt; ['post_content' =&gt; '内容']\n                ],\n                'size'      =&gt; 10,  //每页数量\n                'from'      =&gt; 0,    //从第几条数据开始\n                'highlight' =&gt; [  //高亮\n                    'fields'                  =&gt; [\n                        'post_content' =&gt; [\n                            &quot;pre_tags&quot;  =&gt; &quot;&lt;b style='color:red'&gt;&quot;,\n                            &quot;post_tags&quot; =&gt; &quot;&lt;/b&gt;&quot;\n                        ]\n                    ],\n                    &quot;boundary_scanner_locale&quot; =&gt; &quot;zh_CN&quot;,\n                    'encoder'                 =&gt; 'HTML',\n                    'number_of_fragments'     =&gt; 0\n                ]\n            ]\n        ];\n\n        return $this-&gt;client-&gt;search($params)-&gt;asArray();\n    }\n\n}\n</code></pre><p id=\"u3f045ed4\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\"></span></strong></p><h1 id=\"kEXya\"><span class=\"ne-text\" style=\"color: rgb(64, 64, 64)\">补充：</span></h1><h2 id=\"LB9gQ\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">高亮</span></h2><p id=\"u170dbbb5\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663314887045-ef45f493-be27-4510-a3f0-f66cf20e896a.png\" width=\"1402.8679750143078\" id=\"u5ec28e31\" class=\"ne-image\"></p><h3 id=\"bvXPC\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">高亮参数</span></h3><table id=\"aRA9k\" class=\"ne-table\" style=\"width: 739px\"><tbody><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u2f8c68b6\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">参数</span></strong></p></td><td width=\"457\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"udb4e8f29\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">说明</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ue8ec0a88\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_chars</span></p></td><td width=\"457\"><p id=\"u69fe8547\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含每个边界字符的字符串。默认为,! ?\\ \\ n。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ueee304fe\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_max_scan</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uafb8c1be\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">扫描边界字符的距离。默认为20。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ud6b9af2a\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_scanner</span></p></td><td width=\"457\"><p id=\"uf9240cfa\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uea529ceb\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_scanner_locale</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u142b8246\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">用来设置搜索和确定单词边界的本地化设置，此参数使用语言标记的形式（“en-US”, “fr-FR”, “ja-JP”）</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u03a757b3\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">encoder</span></p></td><td width=\"457\"><p id=\"u6cc82edc\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">表示代码段应该是HTML编码的:默认(无编码)还是HTML (HTML-转义代码段文本，然后插入高亮标记)</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u1563dd72\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fields</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ue1893b0f\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">指定检索高亮显示的字段。可以使用通配符来指定字段。例如，可以指定comment_*来获取以comment_开头的所有文本和关键字字段的高亮显示。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u07e40bb3\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">force_source</span></p></td><td width=\"457\"><p id=\"uea24abc0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">根据源高亮显示。默认值为false。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u6755639c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fragmenter</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u79cef3d9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">指定文本应如何在突出显示片段中拆分:支持参数simple或者span。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u8a013845\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fragment_offset</span></p></td><td width=\"457\"><p id=\"u3f47df66\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">控制要开始突出显示的空白。仅在使用fvh highlighter时有效。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u0f827605\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fragment_size</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ue53509f9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">字符中突出显示的片段的大小。默认为100。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ubc500c55\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">highlight_query</span></p></td><td width=\"457\"><p id=\"u7159902a\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">突出显示搜索查询之外的其他查询的匹配项。这在使用重打分查询时特别有用，因为默认情况下高亮显示不会考虑这些问题。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u940a5a5b\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">matched_fields</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u5e6af03c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">组合多个匹配结果以突出显示单个字段，对于使用不同方式分析同一字符串的多字段。所有的matched_fields必须将term_vector设置为with_positions_offsets，但是只有将匹配项组合到的字段才会被加载，因此只有将store设置为yes才能使该字段受益。只适用于fvh highlighter。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ub2131071\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">no_match_size</span></p></td><td width=\"457\"><p id=\"u6d37f4d2\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">如果没有要突出显示的匹配片段，则希望从字段开头返回的文本量。默认为0(不返回任何内容)。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u70654e65\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">number_of_fragments</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u2563fe6e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">返回的片段的最大数量。如果片段的数量设置为0，则不会返回任何片段。相反，突出显示并返回整个字段内容。当需要突出显示短文本(如标题或地址)，但不需要分段时，使用此配置非常方便。如果number_of_fragments为0，则忽略fragment_size。默认为5。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u0bd28839\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">order</span></p></td><td width=\"457\"><p id=\"u3e9a0eab\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">设置为score时，按分数对突出显示的片段进行排序。默认情况下，片段将按照它们在字段中出现的顺序输出(order:none)。将此选项设置为score将首先输出最相关的片段。每个高亮应用自己的逻辑来计算相关性得分。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc8b6391e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">phrase_limit</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ud2b659b0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">控制文档中所考虑的匹配短语的数量。防止</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">fvh highlighter</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">分析太多的短语和消耗太多的内存。提高限制会增加查询时间并消耗更多内存。默认为256。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u0a298656\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">pre_tags</span></p></td><td width=\"457\"><p id=\"uf749ef97\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">与post_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u174a463a\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">post_tags</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u1f4f2a87\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">与pre_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ue0e7c6b2\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">require_field_match</span></p></td><td width=\"457\"><p id=\"u88372c32\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">默认情况下，只突出显示包含查询匹配的字段。将require_field_match设置为false以突出显示所有字段。默认值为true。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uffb4f42c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">tags_schema</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u4a8a470d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">设置为使用内置标记模式的样式。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u134d6442\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">type</span></p></td><td width=\"457\"><p id=\"u1d2016bc\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">使用的高亮模式:unified, plain, or fvh. 默认为 unified。</span></p></td></tr></tbody></table><h3 id=\"S3LNr\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">boundary_scanner</span></h3><p id=\"ueab4487f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。默认unified highlighter使用<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">sentence，fvh highlighter使用chars。</span></p><ul class=\"ne-ul\"><li id=\"u380f1b14\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">chars</span></li></ul><p id=\"ua0d9f41e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">使用boundary_chars指定的字符突出显示边界。boundary_max_scan设置控制扫描边界字符的距离。只适用于fvh highlighter。</span></p><ul class=\"ne-ul\"><li id=\"ucc33f213\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">sentence</span></li></ul><p id=\"u553860f7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">根据Java的BreakIterator确定，在下一个句子边界处中断突出显示的片段。配置了此参数后上面例子返回内容,可以看到其每个分段都是一个句子</span></p><pre data-language=\"shell\" id=\"OHcjo\" class=\"ne-codeblock language-shell\"><code>&quot;highlight&quot; : {\n  &quot;content&quot; : [\n\t&quot;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;字符串——URI Search 实际业务中我们通常都是使用一个完整&lt;em&gt;的&lt;/em&gt;请求体从elasticsearch获得数据。&quot;,\n\t&quot;然而在有些时候我们为了调试系统或者数据&lt;em&gt;的&lt;/em&gt;时候需要临时进行一些&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;时候，编写完整&lt;em&gt;的&lt;/em&gt;请求体JSON可能会稍微麻烦。而elasticsearch提供了一种基于URI&lt;em&gt;的&lt;/em&gt;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;方&quot;\n  ]\n}\n</code></pre><ul class=\"ne-ul\"><li id=\"u67c92cf4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">word</span></li></ul><p id=\"u2880ab2f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">根据Java的BreakIterator确定，在下一个单词边界处中断突出显示的片段。使用此参数上面的例子返回内容，此时每个分段并不是一个完整的句子。</span></p><pre data-language=\"shell\" id=\"zbHBw\" class=\"ne-codeblock language-shell\"><code>&quot;highlight&quot; : {\n  &quot;content&quot; : [\n\t&quot;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;字符串&quot;,\n\t&quot;实际业务中我们通常都是使用一个完整&lt;em&gt;的&lt;/em&gt;请求体从&quot;,\n\t&quot;然而在有些时候我们为了调试系统或者数据&lt;em&gt;的&lt;/em&gt;时候需要临时进行一些&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;时候&quot;,\n\t&quot;编写完整&lt;em&gt;的&lt;/em&gt;请求体&quot;,\n\t&quot;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;方&quot;\n  ]\n}\n</code></pre><h3 id=\"pQ7dZ\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">boundary_scanner_locale</span></h3><p id=\"ucbc0d425\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">用来设置搜索和确定单词边界的本地化设置</span></p><ol class=\"ne-ol\"><li id=\"uf7682c08\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">可以通过https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#forLanguageTag-java.lang.String-获得更多语言标签</span></li><li id=\"ufb30dc14\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">默认参数为[Locale.ROOT]{https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#ROOT}</span></li></ol><h3 id=\"mwSHu\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">fragmenter</span></h3><p id=\"u5dcbe506\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">指定文本应如何在突出显示片段中拆分。只适用于plain highlighter。默认为span。</span></p><ol class=\"ne-ol\"><li id=\"ud080e512\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">simple:将文本分割成相同大小的片段</span></li><li id=\"u6a4c5c87\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">span:将文本分割为大小相同的片段，但尽量避免在突出显示的术语之间分割文本。这在查询短语时很有用</span></li></ol><h3 id=\"DY2Qb\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">type</span></h3><p id=\"u9b6487ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">type字段允许强制使用特定的高亮策略。可以配置的参数:unified, plain and fvh。下面是一个使用plain策略的例子:</span></p><pre data-language=\"shell\" id=\"qNPu0\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot; : {\n        &quot;match&quot;: { &quot;content&quot;: &quot;简单的查询&quot; }\n    },\n    &quot;highlight&quot; : {\n        &quot;fields&quot; : {\n            &quot;content&quot; : {&quot;type&quot; : &quot;plain&quot;}\n        }\n    }\n}\n</code></pre><p id=\"u50697d10\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">三种不同的高亮策略的区别</span></p><ol class=\"ne-ol\"><li id=\"u04bb3709\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">unified（通用高亮策略）</span></li></ol><p id=\"u644da444\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其使用的是</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">Lucene</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的Unified Highlighter。此高亮策略将文本分解成句子，并使用BM25算法对单个句子进行评分，支持精确的短语和多术语(模糊、前缀、正则表达式)突出显示。这个是默认的高亮策略。</span></p><ol class=\"ne-ol\"><li id=\"u4b9fac2e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">plain （普通高亮策略）</span></li></ol><p id=\"u534e833c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其使用的是</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">Lucene</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的standard Lucene highlighter。它试图在理解词的重要性和短语查询中的任何词定位标准方面反映查询匹配逻辑。此高亮策略是和在单个字段中突出显示简单的查询匹配。如果想用复杂的查询在很多文档中突出显示很多字段，还是使用</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">unified</span></p><ol class=\"ne-ol\"><li id=\"u0007ee93\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Fast vector highlighter（快速向量策略）</span></li></ol><p id=\"u238a9919\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其使用的是</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">Lucene</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的Fast Vector highlighter。使用此策略需要在映射中将对应字段中属性</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">设置为</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">with_positions_offsets</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">。这个策略以后会单独介绍。</span></p><h3 id=\"IVNUx\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">pre_tags和post_tags</span></h3><p id=\"uc998c0a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">默认情况下，高亮显示将以和包装突出显示的文本。这可以通过设置pre_tags和post_tags来控制，例如:</span></p><pre data-language=\"shell\" id=\"H7LMf\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;size&quot;:5,\n    &quot;query&quot;: {\n        &quot;match&quot;: {\n            &quot;content&quot;: &quot;简单的查询&quot;\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;boundary_scanner_locale&quot;:&quot;zh_CN&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n               &quot;pre_tags&quot;: [\n                    &quot;&lt;h1&gt;&quot;\n                ],\n                &quot;post_tags&quot;: [\n                    &quot;&lt;/h2&gt;&quot;\n                ] \n            }\n        }\n    }\n}\n</code></pre><p id=\"u7147b6ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">当然也可以使用系统预设的标签模式:</span></p><pre data-language=\"shell\" id=\"LLkr1\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;size&quot;:5,\n    &quot;query&quot;: {\n        &quot;match&quot;: {\n            &quot;content&quot;: &quot;简单的查询&quot;\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;boundary_scanner_locale&quot;:&quot;zh_CN&quot;,\n        &quot;tags_schema&quot; : &quot;styled&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n                \n            }\n        }\n    }\n}\n</code></pre><h3 id=\"roboF\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">fragment_size 和 number_of_fragments</span></h3><p id=\"u3639bfb8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">fragment_size</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">主要控制了每个高亮片段的大小，而</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">number_of_fragments</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">控制了返回多少个高亮片段。下面例子中就是控制返回两个长度10的片段</span></p><pre data-language=\"shell\" id=\"yVhmV\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot;: {\n        &quot;bool&quot;: {\n            &quot;must&quot;: [\n                {\n                    &quot;match&quot;: {\n                        &quot;content&quot;: &quot;简单的查询&quot;\n                    }\n                }\n            ]\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;boundary_scanner_locale&quot;: &quot;zh_CN&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n              &quot;fragment_size&quot; : 10,\n              &quot;number_of_fragments&quot; : 2\n            }\n        }\n    }\n}\n</code></pre><h3 id=\"TH9YV\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">order</span></h3><p id=\"u3bc898b5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">order</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">控制了返回对象中</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">highlight</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">片段的排序。下面例子中返回的高亮片段将会根据分数顺序输出。假如设置了none则是按照顺序输出。</span></p><pre data-language=\"shell\" id=\"gTyGs\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot;: {\n        &quot;bool&quot;: {\n            &quot;must&quot;: [\n                {\n                    &quot;match&quot;: {\n                        &quot;content&quot;: &quot;简单的查询&quot;\n                    }\n                }\n            ]\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;order&quot; : &quot;score&quot;,\n        &quot;boundary_scanner_locale&quot;: &quot;zh_CN&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {}\n        }\n    }\n}\n</code></pre><p id=\"u8e3ba530\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">对一个字段进行查询的时候希望高亮其他字段</span></p><p id=\"u7803fcf6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在请求参数</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">highlight</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">中可以设置多个字段，同时需要为每个字段配置</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">highlight_query</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">。通过配置这个字段可以实现对</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">content</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">进行匹配查询同时高亮</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">article_title</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">和</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">content</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">字段的内容。同时使用此方法可以实现使用使用查询条件</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">查询</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">,而最终高亮</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">字符串</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">内容。</span></p><pre data-language=\"shell\" id=\"Dqr2P\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot;: {\n        &quot;match&quot;: {\n            &quot;content&quot;: &quot;查询&quot;\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n                &quot;type&quot;: &quot;unified&quot;,\n                &quot;highlight_query&quot;: {\n                    &quot;bool&quot;: {\n                        &quot;must&quot;: {\n                            &quot;match&quot;: {\n                                &quot;content&quot;: {\n                                    &quot;query&quot;: &quot;字符串&quot;\n                                }\n                            }\n                        },\n                        &quot;minimum_should_match&quot;: 0\n                    }\n                }\n            },\n            &quot;article_title&quot;: {\n                &quot;type&quot;: &quot;unified&quot;,\n                &quot;highlight_query&quot;: {\n                    &quot;bool&quot;: {\n                        &quot;must&quot;: {\n                            &quot;match&quot;: {\n                                &quot;article_title&quot;: {\n                                    &quot;query&quot;: &quot;字符串&quot;\n                                }\n                            }\n                        },\n                        &quot;minimum_should_match&quot;: 0\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre><h2 id=\"XtAFM\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">highlighter如何确定高亮内容</span></h2><p id=\"u2f37374a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">为了从查询的词汇中获得搜索片段位置，高亮策略显示需要知道原始文本中每个单词的起始和结束字符偏移量。目前根据模式不同获取这些数据途径不同</span></p><ol class=\"ne-ol\"><li id=\"u98ce1b3c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">检索列表，如果在映射中</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">index_options</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">设置了</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">offsets</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">，unified会将其中数据应用在文档中，而不会重新分析文本。它直接对文档进行原始查询，并从索引中提取匹配的偏移数据。在字段内容很大的时候，使用此配置很重要，因为它不需要重新分析文本内容。和term_vectors相比，它还需要更少的磁盘空间。</span></li><li id=\"u000b195e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">术语向量，如果在映射中</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">设置为</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">with_positions_offsets</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">则unified highlighter使用</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">来突出显示字段。对于大字段（大于1MB）和多术语查询它的速度会比较快。而fvh highlighter总是使用</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">。</span></li><li id=\"u80773924\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">普通的高亮策略（<br /></span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Plain highlighting），当没有其他选择的时候，unified highlighter使用此模式，他在内存中创建一个小的索引（index），通过运行Lucene的查询执行计划来访问文档的匹配信息，对需要高亮显示的每个字段和每个文档进行处理。plain highlighter总是使用此策略。注意此方式在大型文本上可能需要大量的时间和内存。在使用此策略时候可以设置分析的文本字符的最大数量限制为1000000。这个数值可以通过修改索引的</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">index.highlight.max_analyzed_offset</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">参数来改变。</span></li></ol></div>",
    "body": "tags: [elasticsearch]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n> <br />[ElasticSearch](https://www.elastic.co/cn/enterprise-search/)是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。\n\n在做搜索的时候想到了 ElasticSearch ，而且其也支持 PHP，所以就做了一个简单的例子做测试，感觉还不错，做下记录~\n<a name=\"AWkuM\"></a>\n# 1、环境\n\n1. php 8.0\n2. elasticsearch 8.4.1  [下载](https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.4.1-windows-x86_64.zip)\n3. thinkphp6.0\n4. php elasticsearch 8.4\n<a name=\"ITYO3\"></a>\n# 2、安装【windows】\n1、下载 elasticsearch-8.4.1-windows-x86_64 包，并解压 <br />2、ES自带jdk的，所以可以不用安装java组件<br />3、打开bin文件夹，直接双击 elasticsearch.bat 运行<br />4、访问：http://127.0.0.1:9200/，如果出现如下数据，那启动正常<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309015056-cf880cb3-6a8b-4da8-aeb4-1920932fcec4.png#averageHue=%23fefefe&clientId=ueeadb8ff-7c2c-4&from=paste&height=406&id=u405df5a0&originHeight=448&originWidth=757&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14886&status=done&style=none&taskId=u7cbbb0cd-7e96-4319-89b8-1b83b631a46&title=&width=685.5849303330091)\n<a name=\"D1WR2\"></a>\n# 3、安装【Linux】\n暂无测试\n\n<a name=\"eGhZG\"></a>\n# 4、SSL安全\n暂无\n<a name=\"GddJt\"></a>\n# 5、数据界面工具\n<a name=\"mT0Fe\"></a>\n## 1、kibana【官方】\nKibana 是为 Elasticsearch设计的开源分析和可视化平台。你可以使用 Kibana 来搜索，查看存储在 Elasticsearch 索引中的数据并与之交互。你可以很容易实现高级的数据分析和可视化，以图表的形式展现出来。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1663310319574-4f3c7fed-0696-4c7a-914c-8fcc6c69bbc4.png#averageHue=%23ebf1f3&clientId=ueeadb8ff-7c2c-4&from=paste&id=u732fbabb&originHeight=1536&originWidth=2864&originalType=url&ratio=1&rotation=0&showTitle=false&size=576152&status=done&style=none&taskId=u5766e684-ce19-4424-8889-d9863a09ac8&title=)<br />安装参考：[https://www.cnblogs.com/chenqionghe/p/12503181.html](https://www.cnblogs.com/chenqionghe/p/12503181.html)\n<a name=\"jEKPh\"></a>\n## 2、elasticsearch-head插件\n> elasticsearch-head是Web前端，用于浏览和与Elastic Search集群进行交互，可用于集群管理、数据可视化、增删改查工具Elasticsearch语句可视化等。\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309790115-5a0c385b-f905-42e9-8942-68c84db9555c.png#averageHue=%23f7f6f2&clientId=ueeadb8ff-7c2c-4&from=paste&height=497&id=u0679ac24&originHeight=549&originWidth=997&originalType=binary&ratio=1&rotation=0&showTitle=false&size=53958&status=done&style=none&taskId=u3eea04e0-5ed1-4c03-a145-e41113998dc&title=&width=902.9434287212814)\n\nelasticsearch-head  github源码地址：<br />[https://github.com/mobz/elasticsearch-head](https://github.com/mobz/elasticsearch-head)\n<a name=\"iSzYI\"></a>\n### 插件的安装【Linux】\n下载elasticsearch-head插件<br />进入elasticsearch-head源码目录中，执行 npm install<br />在运行npm install时，可能会存在Head插件phantomjs权限问题\n```shell\nnpm WARN deprecated phantomjs-prebuilt@2.1.16: this package is now deprecated\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN deprecated har-validator@5.1.5: this\nnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\n> phantomjs-prebuilt@2.1.16 install E:\\JavaDevelopment\\elasticsearch\\elasticsearch-head-master\\node_modules\\phantomjs-prebuilt\n> node install.js\n\nPhantomJS not found on PATH\nDownloading https://github.com/Medium/phantomjs/releases/download/v2.1.1/phantomjs-2.1.1-windows.zip\nSaving to C:\\Users\\ysxx\\AppData\\Local\\Temp\\phantomjs\\phantomjs-2.1.1-windows.zip\nReceiving...\n\nError making request.\nError: connect ETIMEDOUT 140.82.114.4:443\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1107:14)\n\nPlease report this full log at https://github.com/Medium/phantomjs\nnpm WARN elasticsearch-head@0.0.0 license should be a valid SPDX license expression\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules\\fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"win32\",\"arch\":\"x64\"})\n\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! phantomjs-prebuilt@2.1.16 install: `node install.js`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the phantomjs-prebuilt@2.1.16 install script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\ysxx\\AppData\\Roaming\\npm-cache\\_logs\\2020-12-28T01_28_03_195Z-debug.log\n```\n**解决方案：在npm install命令后加 -g 参数**\n```shell\nnpm install -g\n```\n**在install成功之后，执行 npm run start 启动head插件**<br />在cmd命令行可以看到 web server 地址，在浏览器访问该地址 http://localhost:9100，如果出现elasticsearch-head插件连不上elasticsearch服务，需要在elasticsearch安装目录下的config文件夹，找到elasticsearch.yml文件，添加两行配置：\n```shell\n#表示是否支持跨域，默认为false\nhttp.cors.enabled: true\n#当设置允许跨域，默认为*,表示支持所有域名\nhttp.cors.allow-origin: \"*\"\n```\n\n<a name=\"UNWgC\"></a>\n### 插件的安装【window浏览器】\n打开谷歌浏览器应用插件网址：<br />[https://chrome.google.com/webstore/category/extensions?hl=zh-CN](https://chrome.google.com/webstore/category/extensions?hl=zh-CN)<br />搜索：elasticsearch-head<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309964980-79cba546-1a82-4d28-8be4-b3602b1f70b9.png#averageHue=%23faf9f8&clientId=ueeadb8ff-7c2c-4&from=paste&height=638&id=u5fb66667&originHeight=704&originWidth=1367&originalType=binary&ratio=1&rotation=0&showTitle=false&size=57811&status=done&style=none&taskId=u1d042b99-7935-40d3-80e6-75b949bf195&title=&width=1238.0377804032012)<br />直接进入后点击下载【安装】，即可在浏览器上安装成功此插件。<br />直接打开插件即可。\n\n<a name=\"sMlq7\"></a>\n# 6、php系统安装ES\n> 默认程序使用thinkphp6.0，安装方式使用 composer\n\n\n在命令行执行：\n```shell\ncomposer require elasticsearch/elasticsearch\n```\n正确等待响应后会安装成功。\n\n<a name=\"h6njl\"></a>\n# 7、php-ES的使用\n引入类库：\n> 注意，这里和7.x及之前的版本不同。\n\n```php\nuse Elastic\\Elasticsearch\\ClientBuilder;\n\n$client = ClientBuilder::create()->setHosts(['127.0.0.1:9200'])->build();\n```\n\n**完整类库：**\n```php\n<?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2022-09-16\n * Time: 11:05:20\n * Info:\n */\n\nnamespace app\\portal\\service;\n\nuse Elastic\\Elasticsearch\\ClientBuilder;\n\nclass ElasticsearchService\n{\n\n    protected $client;\n\n    protected $index_name;\n\n    protected $type;\n\n    // 构造函数\n    public function __construct($indexName = 'article_index')\n    {\n        $this->index_name = $indexName;\n        $params           = ['127.0.0.1:9200'];\n        $this->client     = ClientBuilder::create()->setHosts($params)->build();\n    }\n\n    /**\n     * 判断索引是否存在\n     * @return bool\n     */\n    public function exist_index()\n    {\n        $params = ['index' => $this->index_name];\n\n        return $this->client->indices()->exists($params)->asBool();\n    }\n\n    /**\n     * 创建索引\n     * 同一索引只能创建一次\n     * @return bool\n     */\n    public function create_index()\n    {\n        $res = $this->exist_index();\n        if ( ! $res) {\n            $param = [\n                'index' => $this->index_name,\n                'body'  => []\n            ];\n\n            return $this->client->indices()->create($param)->asBool();\n        }\n    }\n\n    /**\n     * 获取索引结构\n     * @return array\n     */\n    public function get_index()\n    {\n        $params = ['index' => $this->index_name];\n\n        try {\n            return $this->client->indices()->get($params)->asArray();\n        } catch (\\Exception $e) {\n            return [];\n        }\n    }\n\n    /**\n     * 删除索引\n     * @return array\n     */\n    public function delete_index()\n    {\n        $params = ['index' => $this->index_name];\n\n        try {\n            return $this->client->indices()->delete($params)->asBool();\n        } catch (\\Exception $e) {\n            return false;\n        }\n    }\n\n    /*\n     * 将内容加入文档\n     */\n    public function add_article($data)\n    {\n        $params = [\n            'body'  => $data,\n            'id'    => 'article_'.$data['id'],\n            'index' => $this->index_name,\n        ];\n        $this->client->index($params)->asArray();\n    }\n\n    /**\n     * 删除一个文档\n     */\n    public function delete_article($id)\n    {\n        $params = [\n            'index' => $this->index_name,\n            'id'    => $id\n        ];\n\n        try {\n            return $this->client->delete($params)->asBool();\n        } catch (\\Exception $e) {\n            return false;\n        }\n    }\n\n    /**\n     * 查询文档\n     */\n    public function find_article()\n    {\n        $params = [\n            'index' => 'articles_index',\n            'body'  => [\n                'query'     => [\n                    'match' => ['post_content' => '内容']\n                ],\n                'size'      => 10,  //每页数量\n                'from'      => 0,    //从第几条数据开始\n                'highlight' => [  //高亮\n                    'fields'                  => [\n                        'post_content' => [\n                            \"pre_tags\"  => \"<b style='color:red'>\",\n                            \"post_tags\" => \"</b>\"\n                        ]\n                    ],\n                    \"boundary_scanner_locale\" => \"zh_CN\",\n                    'encoder'                 => 'HTML',\n                    'number_of_fragments'     => 0\n                ]\n            ]\n        ];\n\n        return $this->client->search($params)->asArray();\n    }\n\n}\n\n```\n<br />\n<a name=\"kEXya\"></a>\n# 补充：\n<a name=\"LB9gQ\"></a>\n## 高亮\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1663314887045-ef45f493-be27-4510-a3f0-f66cf20e896a.png#averageHue=%23f9f8f8&clientId=ueeadb8ff-7c2c-4&from=paste&height=791&id=u5ec28e31&originHeight=873&originWidth=1549&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34491&status=done&style=none&taskId=ub5fad4ff-be34-457f-9c19-e3bbf826f41&title=&width=1402.8679750143078)\n<a name=\"bvXPC\"></a>\n### 高亮参数\n| **参数** | **说明** |\n| --- | --- |\n| boundary_chars | 包含每个边界字符的字符串。默认为,! ?\\\\ \\\\ n。 |\n| boundary_max_scan | 扫描边界字符的距离。默认为20。 |\n| boundary_scanner | 指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。 |\n| boundary_scanner_locale | 用来设置搜索和确定单词边界的本地化设置，此参数使用语言标记的形式（“en-US”, “fr-FR”, “ja-JP”） |\n| encoder | 表示代码段应该是HTML编码的:默认(无编码)还是HTML (HTML-转义代码段文本，然后插入高亮标记) |\n| fields | 指定检索高亮显示的字段。可以使用通配符来指定字段。例如，可以指定comment_*来获取以comment_开头的所有文本和关键字字段的高亮显示。 |\n| force_source | 根据源高亮显示。默认值为false。 |\n| fragmenter | 指定文本应如何在突出显示片段中拆分:支持参数simple或者span。 |\n| fragment_offset | 控制要开始突出显示的空白。仅在使用fvh highlighter时有效。 |\n| fragment_size | 字符中突出显示的片段的大小。默认为100。 |\n| highlight_query | 突出显示搜索查询之外的其他查询的匹配项。这在使用重打分查询时特别有用，因为默认情况下高亮显示不会考虑这些问题。 |\n| matched_fields | 组合多个匹配结果以突出显示单个字段，对于使用不同方式分析同一字符串的多字段。所有的matched_fields必须将term_vector设置为with_positions_offsets，但是只有将匹配项组合到的字段才会被加载，因此只有将store设置为yes才能使该字段受益。只适用于fvh highlighter。 |\n| no_match_size | 如果没有要突出显示的匹配片段，则希望从字段开头返回的文本量。默认为0(不返回任何内容)。 |\n| number_of_fragments | 返回的片段的最大数量。如果片段的数量设置为0，则不会返回任何片段。相反，突出显示并返回整个字段内容。当需要突出显示短文本(如标题或地址)，但不需要分段时，使用此配置非常方便。如果number_of_fragments为0，则忽略fragment_size。默认为5。 |\n| order | 设置为score时，按分数对突出显示的片段进行排序。默认情况下，片段将按照它们在字段中出现的顺序输出(order:none)。将此选项设置为score将首先输出最相关的片段。每个高亮应用自己的逻辑来计算相关性得分。 |\n| phrase_limit | 控制文档中所考虑的匹配短语的数量。防止fvh highlighter分析太多的短语和消耗太多的内存。提高限制会增加查询时间并消耗更多内存。默认为256。 |\n| pre_tags | 与post_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。 |\n| post_tags | 与pre_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。 |\n| require_field_match | 默认情况下，只突出显示包含查询匹配的字段。将require_field_match设置为false以突出显示所有字段。默认值为true。 |\n| tags_schema | 设置为使用内置标记模式的样式。 |\n| type | 使用的高亮模式:unified, plain, or fvh. 默认为 unified。 |\n\n<a name=\"S3LNr\"></a>\n### boundary_scanner\n指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。默认unified highlighter使用<br />sentence，fvh highlighter使用chars。\n\n- chars\n\n使用boundary_chars指定的字符突出显示边界。boundary_max_scan设置控制扫描边界字符的距离。只适用于fvh highlighter。\n\n- sentence\n\n根据Java的BreakIterator确定，在下一个句子边界处中断突出显示的片段。配置了此参数后上面例子返回内容,可以看到其每个分段都是一个句子\n```shell\n\"highlight\" : {\n  \"content\" : [\n\t\"<em>简</em><em>单</em><em>查</em><em>询</em>字符串——URI Search 实际业务中我们通常都是使用一个完整<em>的</em>请求体从elasticsearch获得数据。\",\n\t\"然而在有些时候我们为了调试系统或者数据<em>的</em>时候需要临时进行一些<em>简</em><em>单</em><em>的</em><em>查</em><em>询</em>时候，编写完整<em>的</em>请求体JSON可能会稍微麻烦。而elasticsearch提供了一种基于URI<em>的</em><em>简</em><em>单</em><em>的</em><em>查</em><em>询</em>方\"\n  ]\n}\n\n```\n\n- word\n\n根据Java的BreakIterator确定，在下一个单词边界处中断突出显示的片段。使用此参数上面的例子返回内容，此时每个分段并不是一个完整的句子。\n```shell\n\"highlight\" : {\n  \"content\" : [\n\t\"<em>简</em><em>单</em><em>查</em><em>询</em>字符串\",\n\t\"实际业务中我们通常都是使用一个完整<em>的</em>请求体从\",\n\t\"然而在有些时候我们为了调试系统或者数据<em>的</em>时候需要临时进行一些<em>简</em><em>单</em><em>的</em><em>查</em><em>询</em>时候\",\n\t\"编写完整<em>的</em>请求体\",\n\t\"<em>的</em><em>简</em><em>单</em><em>的</em><em>查</em><em>询</em>方\"\n  ]\n}\n\n```\n<a name=\"pQ7dZ\"></a>\n### boundary_scanner_locale\n用来设置搜索和确定单词边界的本地化设置\n\n1. 可以通过https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#forLanguageTag-java.lang.String-获得更多语言标签\n2. 默认参数为[Locale.ROOT]{https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#ROOT}\n<a name=\"mwSHu\"></a>\n### fragmenter\n指定文本应如何在突出显示片段中拆分。只适用于plain highlighter。默认为span。\n\n1. simple:将文本分割成相同大小的片段\n2. span:将文本分割为大小相同的片段，但尽量避免在突出显示的术语之间分割文本。这在查询短语时很有用\n<a name=\"DY2Qb\"></a>\n### type\ntype字段允许强制使用特定的高亮策略。可以配置的参数:unified, plain and fvh。下面是一个使用plain策略的例子:\n```shell\nGET article/_search\n{\n    \"query\" : {\n        \"match\": { \"content\": \"简单的查询\" }\n    },\n    \"highlight\" : {\n        \"fields\" : {\n            \"content\" : {\"type\" : \"plain\"}\n        }\n    }\n}\n\n```\n三种不同的高亮策略的区别\n\n1. unified（通用高亮策略）\n\n其使用的是Lucene的Unified Highlighter。此高亮策略将文本分解成句子，并使用BM25算法对单个句子进行评分，支持精确的短语和多术语(模糊、前缀、正则表达式)突出显示。这个是默认的高亮策略。\n\n1. plain （普通高亮策略）\n\n其使用的是Lucene的standard Lucene highlighter。它试图在理解词的重要性和短语查询中的任何词定位标准方面反映查询匹配逻辑。此高亮策略是和在单个字段中突出显示简单的查询匹配。如果想用复杂的查询在很多文档中突出显示很多字段，还是使用unified\n\n1. Fast vector highlighter（快速向量策略）\n\n其使用的是Lucene的Fast Vector highlighter。使用此策略需要在映射中将对应字段中属性term_vector设置为with_positions_offsets。这个策略以后会单独介绍。\n<a name=\"IVNUx\"></a>\n### pre_tags和post_tags\n默认情况下，高亮显示将以和包装突出显示的文本。这可以通过设置pre_tags和post_tags来控制，例如:\n```shell\nGET article/_search\n{\n    \"size\":5,\n    \"query\": {\n        \"match\": {\n            \"content\": \"简单的查询\"\n        }\n    },\n    \"highlight\": {\n        \"boundary_scanner_locale\":\"zh_CN\",\n        \"fields\": {\n            \"content\": {\n               \"pre_tags\": [\n                    \"<h1>\"\n                ],\n                \"post_tags\": [\n                    \"</h2>\"\n                ] \n            }\n        }\n    }\n}\n\n```\n当然也可以使用系统预设的标签模式:\n```shell\nGET article/_search\n{\n    \"size\":5,\n    \"query\": {\n        \"match\": {\n            \"content\": \"简单的查询\"\n        }\n    },\n    \"highlight\": {\n        \"boundary_scanner_locale\":\"zh_CN\",\n        \"tags_schema\" : \"styled\",\n        \"fields\": {\n            \"content\": {\n                \n            }\n        }\n    }\n}\n\n```\n<a name=\"roboF\"></a>\n### fragment_size 和 number_of_fragments\nfragment_size主要控制了每个高亮片段的大小，而number_of_fragments控制了返回多少个高亮片段。下面例子中就是控制返回两个长度10的片段\n```shell\nGET article/_search\n{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"match\": {\n                        \"content\": \"简单的查询\"\n                    }\n                }\n            ]\n        }\n    },\n    \"highlight\": {\n        \"boundary_scanner_locale\": \"zh_CN\",\n        \"fields\": {\n            \"content\": {\n              \"fragment_size\" : 10,\n              \"number_of_fragments\" : 2\n            }\n        }\n    }\n}\n\n```\n<a name=\"TH9YV\"></a>\n### order\norder控制了返回对象中highlight片段的排序。下面例子中返回的高亮片段将会根据分数顺序输出。假如设置了none则是按照顺序输出。\n```shell\nGET article/_search\n{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"match\": {\n                        \"content\": \"简单的查询\"\n                    }\n                }\n            ]\n        }\n    },\n    \"highlight\": {\n        \"order\" : \"score\",\n        \"boundary_scanner_locale\": \"zh_CN\",\n        \"fields\": {\n            \"content\": {}\n        }\n    }\n}\n\n```\n对一个字段进行查询的时候希望高亮其他字段<br />在请求参数highlight中可以设置多个字段，同时需要为每个字段配置highlight_query。通过配置这个字段可以实现对content进行匹配查询同时高亮article_title和content字段的内容。同时使用此方法可以实现使用使用查询条件查询,而最终高亮字符串内容。\n```shell\nGET article/_search\n{\n    \"query\": {\n        \"match\": {\n            \"content\": \"查询\"\n        }\n    },\n    \"highlight\": {\n        \"fields\": {\n            \"content\": {\n                \"type\": \"unified\",\n                \"highlight_query\": {\n                    \"bool\": {\n                        \"must\": {\n                            \"match\": {\n                                \"content\": {\n                                    \"query\": \"字符串\"\n                                }\n                            }\n                        },\n                        \"minimum_should_match\": 0\n                    }\n                }\n            },\n            \"article_title\": {\n                \"type\": \"unified\",\n                \"highlight_query\": {\n                    \"bool\": {\n                        \"must\": {\n                            \"match\": {\n                                \"article_title\": {\n                                    \"query\": \"字符串\"\n                                }\n                            }\n                        },\n                        \"minimum_should_match\": 0\n                    }\n                }\n            }\n        }\n    }\n}\n\n```\n<a name=\"XtAFM\"></a>\n## highlighter如何确定高亮内容\n为了从查询的词汇中获得搜索片段位置，高亮策略显示需要知道原始文本中每个单词的起始和结束字符偏移量。目前根据模式不同获取这些数据途径不同\n\n1. 检索列表，如果在映射中index_options设置了offsets，unified会将其中数据应用在文档中，而不会重新分析文本。它直接对文档进行原始查询，并从索引中提取匹配的偏移数据。在字段内容很大的时候，使用此配置很重要，因为它不需要重新分析文本内容。和term_vectors相比，它还需要更少的磁盘空间。\n2. 术语向量，如果在映射中term_vector设置为with_positions_offsets则unified highlighter使用term_vector来突出显示字段。对于大字段（大于1MB）和多术语查询它的速度会比较快。而fvh highlighter总是使用term_vector。\n3. 普通的高亮策略（<br />Plain highlighting），当没有其他选择的时候，unified highlighter使用此模式，他在内存中创建一个小的索引（index），通过运行Lucene的查询执行计划来访问文档的匹配信息，对需要高亮显示的每个字段和每个文档进行处理。plain highlighter总是使用此策略。注意此方式在大型文本上可能需要大量的时间和内存。在使用此策略时候可以设置分析的文本字符的最大数量限制为1000000。这个数值可以通过修改索引的index.highlight.max_analyzed_offset参数来改变。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [elasticsearch]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><a href=\"https://www.elastic.co/cn/enterprise-search/\" data-href=\"https://www.elastic.co/cn/enterprise-search/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ElasticSearch</span></a><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 16px\">是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</span></p></div><p id=\"ufdb5bb8f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 16px\">在做搜索的时候想到了 </span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); background-color: rgb(238, 238, 238); font-size: 13px\">ElasticSearch</span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 16px\"> ，而且其也支持 </span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); background-color: rgb(238, 238, 238); font-size: 13px\">PHP</span><span class=\"ne-text\" style=\"color: rgb(85, 85, 85); font-size: 16px\">，所以就做了一个简单的例子做测试，感觉还不错，做下记录~</span></p><h1 id=\"AWkuM\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85)\">1、环境</span></h1><ol class=\"ne-ol\"><li id=\"u1eb70b53\" data-lake-index-type=\"0\"><span class=\"ne-text\">php 8.0</span></li><li id=\"ua221752a\" data-lake-index-type=\"0\"><span class=\"ne-text\">elasticsearch 8.4.1  </span><a href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.4.1-windows-x86_64.zip\" data-href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.4.1-windows-x86_64.zip\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">下载</span></a></li><li id=\"ud0b5529b\" data-lake-index-type=\"0\"><span class=\"ne-text\">thinkphp6.0</span></li><li id=\"u3b1f65ce\" data-lake-index-type=\"0\"><span class=\"ne-text\">php elasticsearch 8.4</span></li></ol><h1 id=\"ITYO3\"><span class=\"ne-text\" style=\"color: rgb(85, 85, 85)\">2、安装【windows】</span></h1><p id=\"u302aa8b0\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">1、下载 </span><span class=\"ne-text\">elasticsearch-8.4.1-windows-x86_64 包，并解压 </span></p><p id=\"ud7eb1430\" class=\"ne-p\"><span class=\"ne-text\">2、ES自带jdk的，所以可以不用安装java组件</span></p><p id=\"ua94b70c5\" class=\"ne-p\"><span class=\"ne-text\">3、打开bin文件夹，直接双击 elasticsearch.bat 运行</span></p><p id=\"u99f0efd1\" class=\"ne-p\"><span class=\"ne-text\">4、访问：http://127.0.0.1:9200/，如果出现如下数据，那启动正常</span></p><p id=\"u3a17dc0c\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309015056-cf880cb3-6a8b-4da8-aeb4-1920932fcec4.png\" width=\"685.5849303330091\" id=\"u405df5a0\" class=\"ne-image\"></p><h1 id=\"D1WR2\"><span class=\"ne-text\">3、安装【Linux】</span></h1><p id=\"u3a73f219\" class=\"ne-p\"><span class=\"ne-text\">暂无测试</span></p><p id=\"u3624d1ff\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"eGhZG\"><span class=\"ne-text\">4、SSL安全</span></h1><p id=\"ufab56786\" class=\"ne-p\"><span class=\"ne-text\">暂无</span></p><h1 id=\"GddJt\"><span class=\"ne-text\">5、数据界面工具</span></h1><h2 id=\"mT0Fe\"><span class=\"ne-text\">1、kibana【官方】</span></h2><p id=\"u8369c4ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(73, 73, 73); font-size: 14px\">Kibana 是为 Elasticsearch设计的开源分析和可视化平台。你可以使用 Kibana 来搜索，查看存储在 Elasticsearch 索引中的数据并与之交互。你可以很容易实现高级的数据分析和可视化，以图表的形式展现出来。</span></p><p id=\"u5c422943\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663310319574-4f3c7fed-0696-4c7a-914c-8fcc6c69bbc4.png\" width=\"2864\" id=\"u732fbabb\" class=\"ne-image\"></p><p id=\"udb2620c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(73, 73, 73); font-size: 14px\">安装参考：</span><a href=\"https://www.cnblogs.com/chenqionghe/p/12503181.html\" data-href=\"https://www.cnblogs.com/chenqionghe/p/12503181.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://www.cnblogs.com/chenqionghe/p/12503181.html</span></a></p><h2 id=\"jEKPh\"><span class=\"ne-text\">2、elasticsearch-head插件</span></h2><div class=\"ne-quote\"><p id=\"u396fa88f\" class=\"ne-p\"><span class=\"ne-text\">elasticsearch-head是Web前端，用于浏览和与Elastic Search集群进行交互，可用于集群管理、数据可视化、增删改查工具Elasticsearch语句可视化等。</span></p></div><p id=\"u7f4025d0\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309790115-5a0c385b-f905-42e9-8942-68c84db9555c.png\" width=\"902.9434287212814\" id=\"u0679ac24\" class=\"ne-image\"></p><p id=\"u4c997375\" class=\"ne-p\"><br></p><p id=\"u47d46040\" class=\"ne-p\"><span class=\"ne-text\">elasticsearch-head  github源码地址：</span></p><p id=\"ud15a40db\" class=\"ne-p\"><a href=\"https://github.com/mobz/elasticsearch-head\" data-href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/mobz/elasticsearch-head</span></a></p><h3 id=\"iSzYI\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">插件的安装【Linux】</span></h3><p id=\"u04ecc44e\" class=\"ne-p\"><span class=\"ne-text\">下载elasticsearch-head插件</span></p><p id=\"u83fc2b76\" class=\"ne-p\"><span class=\"ne-text\">进入elasticsearch-head源码目录中，执行 npm install</span></p><p id=\"ue3665761\" class=\"ne-p\"><span class=\"ne-text\">在运行npm install时，可能会存在Head插件phantomjs权限问题</span></p><pre data-language=\"shell\" id=\"OJQRp\" class=\"ne-codeblock language-shell\"><code>npm WARN deprecated phantomjs-prebuilt@2.1.16: this package is now deprecated\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN deprecated har-validator@5.1.5: this\nnpm WARN deprecated fsevents@1.2.13: fsevents 1 will break on node v14+ and could be using insecure binaries. Upgrade to fsevents 2.\n\n&gt; phantomjs-prebuilt@2.1.16 install E:\\JavaDevelopment\\elasticsearch\\elasticsearch-head-master\\node_modules\\phantomjs-prebuilt\n&gt; node install.js\n\nPhantomJS not found on PATH\nDownloading https://github.com/Medium/phantomjs/releases/download/v2.1.1/phantomjs-2.1.1-windows.zip\nSaving to C:\\Users\\ysxx\\AppData\\Local\\Temp\\phantomjs\\phantomjs-2.1.1-windows.zip\nReceiving...\n\nError making request.\nError: connect ETIMEDOUT 140.82.114.4:443\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1107:14)\n\nPlease report this full log at https://github.com/Medium/phantomjs\nnpm WARN elasticsearch-head@0.0.0 license should be a valid SPDX license expression\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.13 (node_modules\\fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.13: wanted {&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;} (current: {&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;})\n\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! phantomjs-prebuilt@2.1.16 install: `node install.js`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the phantomjs-prebuilt@2.1.16 install script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\ysxx\\AppData\\Roaming\\npm-cache\\_logs\\2020-12-28T01_28_03_195Z-debug.log</code></pre><p id=\"uc98dfc71\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">解决方案：在npm install命令后加 -g 参数</span></strong></p><pre data-language=\"shell\" id=\"eyMCD\" class=\"ne-codeblock language-shell\"><code>npm install -g</code></pre><p id=\"ud6e7654d\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">在install成功之后，执行 </span></strong><strong><span class=\"ne-text\" style=\"color: rgb(30, 107, 184); font-size: 14px\">npm run start</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\"> 启动head插件</span></strong></p><p id=\"u75ed87c2\" class=\"ne-p\"><span class=\"ne-text\">在cmd命令行可以看到 web server 地址，在浏览器访问该地址 http://localhost:9100，如果出现elasticsearch-head插件连不上elasticsearch服务，需要在elasticsearch安装目录下的config文件夹，找到elasticsearch.yml文件，添加两行配置：</span></p><pre data-language=\"shell\" id=\"FcdLO\" class=\"ne-codeblock language-shell\"><code>#表示是否支持跨域，默认为false\nhttp.cors.enabled: true\n#当设置允许跨域，默认为*,表示支持所有域名\nhttp.cors.allow-origin: &quot;*&quot;</code></pre><p id=\"u66b8c837\" class=\"ne-p\"><br></p><h3 id=\"UNWgC\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">插件的安装【window浏览器】</span></h3><p id=\"u00097577\" class=\"ne-p\"><span class=\"ne-text\">打开谷歌浏览器应用插件网址：</span></p><p id=\"u676a4743\" class=\"ne-p\"><a href=\"https://chrome.google.com/webstore/category/extensions?hl=zh-CN\" data-href=\"https://chrome.google.com/webstore/category/extensions?hl=zh-CN\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://chrome.google.com/webstore/category/extensions?hl=zh-CN</span></a></p><p id=\"u32b61aca\" class=\"ne-p\"><span class=\"ne-text\">搜索：elasticsearch-head</span></p><p id=\"u7dce0663\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663309964980-79cba546-1a82-4d28-8be4-b3602b1f70b9.png\" width=\"1238.0377804032012\" id=\"u5fb66667\" class=\"ne-image\"></p><p id=\"ua91bcaa6\" class=\"ne-p\"><span class=\"ne-text\">直接进入后点击下载【安装】，即可在浏览器上安装成功此插件。</span></p><p id=\"u3779ad5b\" class=\"ne-p\"><span class=\"ne-text\">直接打开插件即可。</span></p><p id=\"u9e3b66de\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"sMlq7\"><span class=\"ne-text\">6、php系统安装ES</span></h1><div class=\"ne-quote\"><p id=\"uf14dac87\" class=\"ne-p\"><span class=\"ne-text\">默认程序使用thinkphp6.0，安装方式使用 composer</span></p></div><p id=\"uc8d29e24\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u5490c37c\" class=\"ne-p\"><span class=\"ne-text\">在命令行执行：</span></p><pre data-language=\"shell\" id=\"Oomv8\" class=\"ne-codeblock language-shell\"><code>composer require elasticsearch/elasticsearch</code></pre><p id=\"u2f05b0c7\" class=\"ne-p\"><span class=\"ne-text\">正确等待响应后会安装成功。</span></p><p id=\"u9d675726\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"h6njl\"><span class=\"ne-text\">7、php-ES的使用</span></h1><p id=\"uadf50d93\" class=\"ne-p\"><span class=\"ne-text\">引入类库：</span></p><div class=\"ne-quote\"><p id=\"u203603e5\" class=\"ne-p\"><span class=\"ne-text\">注意，这里和7.x及之前的版本不同。</span></p></div><pre data-language=\"php\" id=\"DLLym\" class=\"ne-codeblock language-php\"><code>use Elastic\\Elasticsearch\\ClientBuilder;\n\n$client = ClientBuilder::create()-&gt;setHosts(['127.0.0.1:9200'])-&gt;build();</code></pre><p id=\"ua33e4c32\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u73b14f09\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\">完整类库：</span></strong></p><pre data-language=\"php\" id=\"SsBnQ\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2022-09-16\n * Time: 11:05:20\n * Info:\n */\n\nnamespace app\\portal\\service;\n\nuse Elastic\\Elasticsearch\\ClientBuilder;\n\nclass ElasticsearchService\n{\n\n    protected $client;\n\n    protected $index_name;\n\n    protected $type;\n\n    // 构造函数\n    public function __construct($indexName = 'article_index')\n    {\n        $this-&gt;index_name = $indexName;\n        $params           = ['127.0.0.1:9200'];\n        $this-&gt;client     = ClientBuilder::create()-&gt;setHosts($params)-&gt;build();\n    }\n\n    /**\n     * 判断索引是否存在\n     * @return bool\n     */\n    public function exist_index()\n    {\n        $params = ['index' =&gt; $this-&gt;index_name];\n\n        return $this-&gt;client-&gt;indices()-&gt;exists($params)-&gt;asBool();\n    }\n\n    /**\n     * 创建索引\n     * 同一索引只能创建一次\n     * @return bool\n     */\n    public function create_index()\n    {\n        $res = $this-&gt;exist_index();\n        if ( ! $res) {\n            $param = [\n                'index' =&gt; $this-&gt;index_name,\n                'body'  =&gt; []\n            ];\n\n            return $this-&gt;client-&gt;indices()-&gt;create($param)-&gt;asBool();\n        }\n    }\n\n    /**\n     * 获取索引结构\n     * @return array\n     */\n    public function get_index()\n    {\n        $params = ['index' =&gt; $this-&gt;index_name];\n\n        try {\n            return $this-&gt;client-&gt;indices()-&gt;get($params)-&gt;asArray();\n        } catch (\\Exception $e) {\n            return [];\n        }\n    }\n\n    /**\n     * 删除索引\n     * @return array\n     */\n    public function delete_index()\n    {\n        $params = ['index' =&gt; $this-&gt;index_name];\n\n        try {\n            return $this-&gt;client-&gt;indices()-&gt;delete($params)-&gt;asBool();\n        } catch (\\Exception $e) {\n            return false;\n        }\n    }\n\n    /*\n     * 将内容加入文档\n     */\n    public function add_article($data)\n    {\n        $params = [\n            'body'  =&gt; $data,\n            'id'    =&gt; 'article_'.$data['id'],\n            'index' =&gt; $this-&gt;index_name,\n        ];\n        $this-&gt;client-&gt;index($params)-&gt;asArray();\n    }\n\n    /**\n     * 删除一个文档\n     */\n    public function delete_article($id)\n    {\n        $params = [\n            'index' =&gt; $this-&gt;index_name,\n            'id'    =&gt; $id\n        ];\n\n        try {\n            return $this-&gt;client-&gt;delete($params)-&gt;asBool();\n        } catch (\\Exception $e) {\n            return false;\n        }\n    }\n\n    /**\n     * 查询文档\n     */\n    public function find_article()\n    {\n        $params = [\n            'index' =&gt; 'articles_index',\n            'body'  =&gt; [\n                'query'     =&gt; [\n                    'match' =&gt; ['post_content' =&gt; '内容']\n                ],\n                'size'      =&gt; 10,  //每页数量\n                'from'      =&gt; 0,    //从第几条数据开始\n                'highlight' =&gt; [  //高亮\n                    'fields'                  =&gt; [\n                        'post_content' =&gt; [\n                            &quot;pre_tags&quot;  =&gt; &quot;&lt;b style='color:red'&gt;&quot;,\n                            &quot;post_tags&quot; =&gt; &quot;&lt;/b&gt;&quot;\n                        ]\n                    ],\n                    &quot;boundary_scanner_locale&quot; =&gt; &quot;zh_CN&quot;,\n                    'encoder'                 =&gt; 'HTML',\n                    'number_of_fragments'     =&gt; 0\n                ]\n            ]\n        ];\n\n        return $this-&gt;client-&gt;search($params)-&gt;asArray();\n    }\n\n}\n</code></pre><p id=\"u3f045ed4\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\"></span></strong></p><h1 id=\"kEXya\"><span class=\"ne-text\" style=\"color: rgb(64, 64, 64)\">补充：</span></h1><h2 id=\"LB9gQ\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">高亮</span></h2><p id=\"u170dbbb5\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1663314887045-ef45f493-be27-4510-a3f0-f66cf20e896a.png\" width=\"1402.8679750143078\" id=\"u5ec28e31\" class=\"ne-image\"></p><h3 id=\"bvXPC\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">高亮参数</span></h3><table id=\"aRA9k\" class=\"ne-table\" style=\"width: 739px\"><tbody><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u2f8c68b6\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">参数</span></strong></p></td><td width=\"457\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"udb4e8f29\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">说明</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ue8ec0a88\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_chars</span></p></td><td width=\"457\"><p id=\"u69fe8547\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含每个边界字符的字符串。默认为,! ?\\ \\ n。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ueee304fe\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_max_scan</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uafb8c1be\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">扫描边界字符的距离。默认为20。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ud6b9af2a\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_scanner</span></p></td><td width=\"457\"><p id=\"uf9240cfa\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uea529ceb\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">boundary_scanner_locale</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u142b8246\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">用来设置搜索和确定单词边界的本地化设置，此参数使用语言标记的形式（“en-US”, “fr-FR”, “ja-JP”）</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u03a757b3\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">encoder</span></p></td><td width=\"457\"><p id=\"u6cc82edc\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">表示代码段应该是HTML编码的:默认(无编码)还是HTML (HTML-转义代码段文本，然后插入高亮标记)</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u1563dd72\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fields</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ue1893b0f\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">指定检索高亮显示的字段。可以使用通配符来指定字段。例如，可以指定comment_*来获取以comment_开头的所有文本和关键字字段的高亮显示。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u07e40bb3\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">force_source</span></p></td><td width=\"457\"><p id=\"uea24abc0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">根据源高亮显示。默认值为false。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u6755639c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fragmenter</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u79cef3d9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">指定文本应如何在突出显示片段中拆分:支持参数simple或者span。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u8a013845\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fragment_offset</span></p></td><td width=\"457\"><p id=\"u3f47df66\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">控制要开始突出显示的空白。仅在使用fvh highlighter时有效。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u0f827605\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">fragment_size</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ue53509f9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">字符中突出显示的片段的大小。默认为100。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ubc500c55\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">highlight_query</span></p></td><td width=\"457\"><p id=\"u7159902a\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">突出显示搜索查询之外的其他查询的匹配项。这在使用重打分查询时特别有用，因为默认情况下高亮显示不会考虑这些问题。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u940a5a5b\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">matched_fields</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u5e6af03c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">组合多个匹配结果以突出显示单个字段，对于使用不同方式分析同一字符串的多字段。所有的matched_fields必须将term_vector设置为with_positions_offsets，但是只有将匹配项组合到的字段才会被加载，因此只有将store设置为yes才能使该字段受益。只适用于fvh highlighter。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ub2131071\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">no_match_size</span></p></td><td width=\"457\"><p id=\"u6d37f4d2\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">如果没有要突出显示的匹配片段，则希望从字段开头返回的文本量。默认为0(不返回任何内容)。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u70654e65\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">number_of_fragments</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u2563fe6e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">返回的片段的最大数量。如果片段的数量设置为0，则不会返回任何片段。相反，突出显示并返回整个字段内容。当需要突出显示短文本(如标题或地址)，但不需要分段时，使用此配置非常方便。如果number_of_fragments为0，则忽略fragment_size。默认为5。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u0bd28839\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">order</span></p></td><td width=\"457\"><p id=\"u3e9a0eab\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">设置为score时，按分数对突出显示的片段进行排序。默认情况下，片段将按照它们在字段中出现的顺序输出(order:none)。将此选项设置为score将首先输出最相关的片段。每个高亮应用自己的逻辑来计算相关性得分。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc8b6391e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">phrase_limit</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ud2b659b0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">控制文档中所考虑的匹配短语的数量。防止</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">fvh highlighter</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">分析太多的短语和消耗太多的内存。提高限制会增加查询时间并消耗更多内存。默认为256。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u0a298656\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">pre_tags</span></p></td><td width=\"457\"><p id=\"uf749ef97\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">与post_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u174a463a\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">post_tags</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u1f4f2a87\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">与pre_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"ue0e7c6b2\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">require_field_match</span></p></td><td width=\"457\"><p id=\"u88372c32\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">默认情况下，只突出显示包含查询匹配的字段。将require_field_match设置为false以突出显示所有字段。默认值为true。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uffb4f42c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">tags_schema</span></p></td><td width=\"457\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u4a8a470d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">设置为使用内置标记模式的样式。</span></p></td></tr><tr style=\"height: 33px\"><td width=\"282\"><p id=\"u134d6442\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">type</span></p></td><td width=\"457\"><p id=\"u1d2016bc\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">使用的高亮模式:unified, plain, or fvh. 默认为 unified。</span></p></td></tr></tbody></table><h3 id=\"S3LNr\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">boundary_scanner</span></h3><p id=\"ueab4487f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。默认unified highlighter使用<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">sentence，fvh highlighter使用chars。</span></p><ul class=\"ne-ul\"><li id=\"u380f1b14\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">chars</span></li></ul><p id=\"ua0d9f41e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">使用boundary_chars指定的字符突出显示边界。boundary_max_scan设置控制扫描边界字符的距离。只适用于fvh highlighter。</span></p><ul class=\"ne-ul\"><li id=\"ucc33f213\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">sentence</span></li></ul><p id=\"u553860f7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">根据Java的BreakIterator确定，在下一个句子边界处中断突出显示的片段。配置了此参数后上面例子返回内容,可以看到其每个分段都是一个句子</span></p><pre data-language=\"shell\" id=\"OHcjo\" class=\"ne-codeblock language-shell\"><code>&quot;highlight&quot; : {\n  &quot;content&quot; : [\n\t&quot;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;字符串——URI Search 实际业务中我们通常都是使用一个完整&lt;em&gt;的&lt;/em&gt;请求体从elasticsearch获得数据。&quot;,\n\t&quot;然而在有些时候我们为了调试系统或者数据&lt;em&gt;的&lt;/em&gt;时候需要临时进行一些&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;时候，编写完整&lt;em&gt;的&lt;/em&gt;请求体JSON可能会稍微麻烦。而elasticsearch提供了一种基于URI&lt;em&gt;的&lt;/em&gt;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;方&quot;\n  ]\n}\n</code></pre><ul class=\"ne-ul\"><li id=\"u67c92cf4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">word</span></li></ul><p id=\"u2880ab2f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">根据Java的BreakIterator确定，在下一个单词边界处中断突出显示的片段。使用此参数上面的例子返回内容，此时每个分段并不是一个完整的句子。</span></p><pre data-language=\"shell\" id=\"zbHBw\" class=\"ne-codeblock language-shell\"><code>&quot;highlight&quot; : {\n  &quot;content&quot; : [\n\t&quot;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;字符串&quot;,\n\t&quot;实际业务中我们通常都是使用一个完整&lt;em&gt;的&lt;/em&gt;请求体从&quot;,\n\t&quot;然而在有些时候我们为了调试系统或者数据&lt;em&gt;的&lt;/em&gt;时候需要临时进行一些&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;时候&quot;,\n\t&quot;编写完整&lt;em&gt;的&lt;/em&gt;请求体&quot;,\n\t&quot;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;简&lt;/em&gt;&lt;em&gt;单&lt;/em&gt;&lt;em&gt;的&lt;/em&gt;&lt;em&gt;查&lt;/em&gt;&lt;em&gt;询&lt;/em&gt;方&quot;\n  ]\n}\n</code></pre><h3 id=\"pQ7dZ\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">boundary_scanner_locale</span></h3><p id=\"ucbc0d425\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">用来设置搜索和确定单词边界的本地化设置</span></p><ol class=\"ne-ol\"><li id=\"uf7682c08\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">可以通过https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#forLanguageTag-java.lang.String-获得更多语言标签</span></li><li id=\"ufb30dc14\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">默认参数为[Locale.ROOT]{https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#ROOT}</span></li></ol><h3 id=\"mwSHu\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">fragmenter</span></h3><p id=\"u5dcbe506\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">指定文本应如何在突出显示片段中拆分。只适用于plain highlighter。默认为span。</span></p><ol class=\"ne-ol\"><li id=\"ud080e512\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">simple:将文本分割成相同大小的片段</span></li><li id=\"u6a4c5c87\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">span:将文本分割为大小相同的片段，但尽量避免在突出显示的术语之间分割文本。这在查询短语时很有用</span></li></ol><h3 id=\"DY2Qb\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">type</span></h3><p id=\"u9b6487ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">type字段允许强制使用特定的高亮策略。可以配置的参数:unified, plain and fvh。下面是一个使用plain策略的例子:</span></p><pre data-language=\"shell\" id=\"qNPu0\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot; : {\n        &quot;match&quot;: { &quot;content&quot;: &quot;简单的查询&quot; }\n    },\n    &quot;highlight&quot; : {\n        &quot;fields&quot; : {\n            &quot;content&quot; : {&quot;type&quot; : &quot;plain&quot;}\n        }\n    }\n}\n</code></pre><p id=\"u50697d10\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">三种不同的高亮策略的区别</span></p><ol class=\"ne-ol\"><li id=\"u04bb3709\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">unified（通用高亮策略）</span></li></ol><p id=\"u644da444\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其使用的是</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">Lucene</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的Unified Highlighter。此高亮策略将文本分解成句子，并使用BM25算法对单个句子进行评分，支持精确的短语和多术语(模糊、前缀、正则表达式)突出显示。这个是默认的高亮策略。</span></p><ol class=\"ne-ol\"><li id=\"u4b9fac2e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">plain （普通高亮策略）</span></li></ol><p id=\"u534e833c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其使用的是</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">Lucene</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的standard Lucene highlighter。它试图在理解词的重要性和短语查询中的任何词定位标准方面反映查询匹配逻辑。此高亮策略是和在单个字段中突出显示简单的查询匹配。如果想用复杂的查询在很多文档中突出显示很多字段，还是使用</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">unified</span></p><ol class=\"ne-ol\"><li id=\"u0007ee93\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Fast vector highlighter（快速向量策略）</span></li></ol><p id=\"u238a9919\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其使用的是</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">Lucene</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">的Fast Vector highlighter。使用此策略需要在映射中将对应字段中属性</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">设置为</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">with_positions_offsets</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">。这个策略以后会单独介绍。</span></p><h3 id=\"IVNUx\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">pre_tags和post_tags</span></h3><p id=\"uc998c0a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">默认情况下，高亮显示将以和包装突出显示的文本。这可以通过设置pre_tags和post_tags来控制，例如:</span></p><pre data-language=\"shell\" id=\"H7LMf\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;size&quot;:5,\n    &quot;query&quot;: {\n        &quot;match&quot;: {\n            &quot;content&quot;: &quot;简单的查询&quot;\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;boundary_scanner_locale&quot;:&quot;zh_CN&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n               &quot;pre_tags&quot;: [\n                    &quot;&lt;h1&gt;&quot;\n                ],\n                &quot;post_tags&quot;: [\n                    &quot;&lt;/h2&gt;&quot;\n                ] \n            }\n        }\n    }\n}\n</code></pre><p id=\"u7147b6ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">当然也可以使用系统预设的标签模式:</span></p><pre data-language=\"shell\" id=\"LLkr1\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;size&quot;:5,\n    &quot;query&quot;: {\n        &quot;match&quot;: {\n            &quot;content&quot;: &quot;简单的查询&quot;\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;boundary_scanner_locale&quot;:&quot;zh_CN&quot;,\n        &quot;tags_schema&quot; : &quot;styled&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n                \n            }\n        }\n    }\n}\n</code></pre><h3 id=\"roboF\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">fragment_size 和 number_of_fragments</span></h3><p id=\"u3639bfb8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">fragment_size</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">主要控制了每个高亮片段的大小，而</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">number_of_fragments</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">控制了返回多少个高亮片段。下面例子中就是控制返回两个长度10的片段</span></p><pre data-language=\"shell\" id=\"yVhmV\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot;: {\n        &quot;bool&quot;: {\n            &quot;must&quot;: [\n                {\n                    &quot;match&quot;: {\n                        &quot;content&quot;: &quot;简单的查询&quot;\n                    }\n                }\n            ]\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;boundary_scanner_locale&quot;: &quot;zh_CN&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n              &quot;fragment_size&quot; : 10,\n              &quot;number_of_fragments&quot; : 2\n            }\n        }\n    }\n}\n</code></pre><h3 id=\"TH9YV\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">order</span></h3><p id=\"u3bc898b5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">order</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">控制了返回对象中</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">highlight</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">片段的排序。下面例子中返回的高亮片段将会根据分数顺序输出。假如设置了none则是按照顺序输出。</span></p><pre data-language=\"shell\" id=\"gTyGs\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot;: {\n        &quot;bool&quot;: {\n            &quot;must&quot;: [\n                {\n                    &quot;match&quot;: {\n                        &quot;content&quot;: &quot;简单的查询&quot;\n                    }\n                }\n            ]\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;order&quot; : &quot;score&quot;,\n        &quot;boundary_scanner_locale&quot;: &quot;zh_CN&quot;,\n        &quot;fields&quot;: {\n            &quot;content&quot;: {}\n        }\n    }\n}\n</code></pre><p id=\"u8e3ba530\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">对一个字段进行查询的时候希望高亮其他字段</span></p><p id=\"u7803fcf6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在请求参数</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">highlight</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">中可以设置多个字段，同时需要为每个字段配置</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">highlight_query</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">。通过配置这个字段可以实现对</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">content</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">进行匹配查询同时高亮</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">article_title</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">和</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">content</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">字段的内容。同时使用此方法可以实现使用使用查询条件</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">查询</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">,而最终高亮</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">字符串</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">内容。</span></p><pre data-language=\"shell\" id=\"Dqr2P\" class=\"ne-codeblock language-shell\"><code>GET article/_search\n{\n    &quot;query&quot;: {\n        &quot;match&quot;: {\n            &quot;content&quot;: &quot;查询&quot;\n        }\n    },\n    &quot;highlight&quot;: {\n        &quot;fields&quot;: {\n            &quot;content&quot;: {\n                &quot;type&quot;: &quot;unified&quot;,\n                &quot;highlight_query&quot;: {\n                    &quot;bool&quot;: {\n                        &quot;must&quot;: {\n                            &quot;match&quot;: {\n                                &quot;content&quot;: {\n                                    &quot;query&quot;: &quot;字符串&quot;\n                                }\n                            }\n                        },\n                        &quot;minimum_should_match&quot;: 0\n                    }\n                }\n            },\n            &quot;article_title&quot;: {\n                &quot;type&quot;: &quot;unified&quot;,\n                &quot;highlight_query&quot;: {\n                    &quot;bool&quot;: {\n                        &quot;must&quot;: {\n                            &quot;match&quot;: {\n                                &quot;article_title&quot;: {\n                                    &quot;query&quot;: &quot;字符串&quot;\n                                }\n                            }\n                        },\n                        &quot;minimum_should_match&quot;: 0\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre><h2 id=\"XtAFM\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">highlighter如何确定高亮内容</span></h2><p id=\"u2f37374a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">为了从查询的词汇中获得搜索片段位置，高亮策略显示需要知道原始文本中每个单词的起始和结束字符偏移量。目前根据模式不同获取这些数据途径不同</span></p><ol class=\"ne-ol\"><li id=\"u98ce1b3c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">检索列表，如果在映射中</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">index_options</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">设置了</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">offsets</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">，unified会将其中数据应用在文档中，而不会重新分析文本。它直接对文档进行原始查询，并从索引中提取匹配的偏移数据。在字段内容很大的时候，使用此配置很重要，因为它不需要重新分析文本内容。和term_vectors相比，它还需要更少的磁盘空间。</span></li><li id=\"u000b195e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">术语向量，如果在映射中</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">设置为</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">with_positions_offsets</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">则unified highlighter使用</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">来突出显示字段。对于大字段（大于1MB）和多术语查询它的速度会比较快。而fvh highlighter总是使用</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">term_vector</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">。</span></li><li id=\"u80773924\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">普通的高亮策略（<br /></span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Plain highlighting），当没有其他选择的时候，unified highlighter使用此模式，他在内存中创建一个小的索引（index），通过运行Lucene的查询执行计划来访问文档的匹配信息，对需要高亮显示的每个字段和每个文档进行处理。plain highlighter总是使用此策略。注意此方式在大型文本上可能需要大量的时间和内存。在使用此策略时候可以设置分析的文本字符的最大数量限制为1000000。这个数值可以通过修改索引的</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">index.highlight.max_analyzed_offset</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">参数来改变。</span></li></ol></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [elasticsearch]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"u71cb9fd7\" id=\"u71cb9fd7\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u29f44aa8\" id=\"u29f44aa8\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uc97c9970\" id=\"uc97c9970\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"u4f439afc\" id=\"u4f439afc\"><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><a href=\"https://www.elastic.co/cn/enterprise-search/\" target=\"_blank\" data-lake-id=\"u507a1a15\" id=\"u507a1a15\"><span data-lake-id=\"u7a36d56d\" id=\"u7a36d56d\">ElasticSearch</span></a><span data-lake-id=\"ub4ea3cfd\" id=\"ub4ea3cfd\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79)\">是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</span></p></blockquote><p data-lake-id=\"ufdb5bb8f\" id=\"ufdb5bb8f\"><span data-lake-id=\"u4f1aae42\" id=\"u4f1aae42\" class=\"lake-fontsize-12\" style=\"color: rgb(85, 85, 85)\">在做搜索的时候想到了 </span><span data-lake-id=\"ub86e844a\" id=\"ub86e844a\" class=\"lake-fontsize-10\" style=\"color: rgb(85, 85, 85); background-color: rgb(238, 238, 238)\">ElasticSearch</span><span data-lake-id=\"u96f24e9a\" id=\"u96f24e9a\" class=\"lake-fontsize-12\" style=\"color: rgb(85, 85, 85)\"> ，而且其也支持 </span><span data-lake-id=\"u445c82f6\" id=\"u445c82f6\" class=\"lake-fontsize-10\" style=\"color: rgb(85, 85, 85); background-color: rgb(238, 238, 238)\">PHP</span><span data-lake-id=\"u468c523a\" id=\"u468c523a\" class=\"lake-fontsize-12\" style=\"color: rgb(85, 85, 85)\">，所以就做了一个简单的例子做测试，感觉还不错，做下记录~</span></p><h1 data-lake-id=\"AWkuM\" id=\"AWkuM\"><span data-lake-id=\"u6d99fa4b\" id=\"u6d99fa4b\" style=\"color: rgb(85, 85, 85)\">1、环境</span></h1><ol list=\"ud5c2adfc\"><li fid=\"u054d2a54\" data-lake-id=\"u1eb70b53\" id=\"u1eb70b53\"><span data-lake-id=\"u5431a1e0\" id=\"u5431a1e0\">php 8.0</span></li><li fid=\"u054d2a54\" data-lake-id=\"ua221752a\" id=\"ua221752a\"><span data-lake-id=\"ud10cb99b\" id=\"ud10cb99b\">elasticsearch 8.4.1  </span><a href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.4.1-windows-x86_64.zip\" target=\"_blank\" data-lake-id=\"u1b531306\" id=\"u1b531306\"><span data-lake-id=\"u1bffb0fa\" id=\"u1bffb0fa\">下载</span></a></li><li fid=\"u054d2a54\" data-lake-id=\"ud0b5529b\" id=\"ud0b5529b\"><span data-lake-id=\"u8e93a76d\" id=\"u8e93a76d\">thinkphp6.0</span></li><li fid=\"u054d2a54\" data-lake-id=\"u3b1f65ce\" id=\"u3b1f65ce\"><span data-lake-id=\"u8a8b8706\" id=\"u8a8b8706\">php elasticsearch 8.4</span></li></ol><h1 data-lake-id=\"ITYO3\" id=\"ITYO3\"><span data-lake-id=\"udd611d9b\" id=\"udd611d9b\" style=\"color: rgb(85, 85, 85)\">2、安装【windows】</span></h1><p data-lake-id=\"u302aa8b0\" id=\"u302aa8b0\"><span data-lake-id=\"u3b4b3370\" id=\"u3b4b3370\" class=\"lake-fontsize-12\">1、下载 </span><span data-lake-id=\"u7c813080\" id=\"u7c813080\">elasticsearch-8.4.1-windows-x86_64 包，并解压 </span></p><p data-lake-id=\"ud7eb1430\" id=\"ud7eb1430\"><span data-lake-id=\"u8a5fb14e\" id=\"u8a5fb14e\">2、ES自带jdk的，所以可以不用安装java组件</span></p><p data-lake-id=\"ua94b70c5\" id=\"ua94b70c5\"><span data-lake-id=\"u08c25d42\" id=\"u08c25d42\">3、打开bin文件夹，直接双击 elasticsearch.bat 运行</span></p><p data-lake-id=\"u99f0efd1\" id=\"u99f0efd1\"><span data-lake-id=\"uf345861b\" id=\"uf345861b\">4、访问：http://127.0.0.1:9200/，如果出现如下数据，那启动正常</span></p><p data-lake-id=\"u3a17dc0c\" id=\"u3a17dc0c\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1663309015056-cf880cb3-6a8b-4da8-aeb4-1920932fcec4.png%22%2C%22taskId%22%3A%22u7cbbb0cd-7e96-4319-89b8-1b83b631a46%22%2C%22clientId%22%3A%22ueeadb8ff-7c2c-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A685.5849303330091%2C%22height%22%3A406%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A14886%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A757%2C%22originHeight%22%3A448%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%5C%22NAME%5C%22%3A%5C%22TOUSHI-HUI%5C%22%2C%20%5C%22CLUSTER_NAME%5C%22%20%5C%22ELASTICSEARCH%5C%22%2C%20WID%5C%22%3A%5C%22P7CQ2OAZTJ-SCGUVLMHUWG%5C%22%2C%20CLUSTER%20UUID%20%3A%E6%97%A5%20VERSION%20%5C%22NUMBER%5C%22%3A%5C%228.4.1%5C%22%2C%20%5C%22BUILD_FLAVOR%5C%22%3A%5C%22DEFAULT%5C%22%2C%20%5C%22BUILD_TYPE%5C%22%3A%5C%22ZIP%5C%22%2C%201%5C%222BD229C8E56650B42E40992322A76E7914258F0C%5C%22%2C%20%5C%22BUILD_HASH%5C%22%3A%5C%22%20%5C%22BUILD%20DATE%5C%22%3A%5C%222022-08-26T12%3A11%3A43.232597118Z%5C%22%2C%20%5C%22BUILD_SNAPSHOT%5C%22%3AFALSE%2C%20%5C%22LUCENE_VERSION%5C%22%3A%5C%229.3.0%5C%22%2C%20%5C%22MINIMUM_WIRE_COMPATIBILITY_VERSION%5C%22%3A'7.17.0%5C%22%2C%20%5C%22MINIMUM_INDEX_COMPATIBILITY_VERSION%5C%22%3A%207.0.0%5C%22%20TAGLINE%5C%22%3A%5C%22YOU%20FOR%20SEARCH%20KNOW%2C%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A78.810135%2C%22y%22%3A27.256248%2C%22width%22%3A168.116975%2C%22height%22%3A14.182358%2C%22text%22%3A%22%5C%22NAME%5C%22%3A%5C%22TOUSHI-HUI%5C%22%2C%22%7D%2C%7B%22x%22%3A77.434044%2C%22y%22%3A51.58067%2C%22width%22%3A116.32449600000001%2C%22height%22%3A15.195149999999998%2C%22text%22%3A%22%5C%22CLUSTER_NAME%5C%22%22%7D%2C%7B%22x%22%3A212.40063%2C%22y%22%3A52.095318%2C%22width%22%3A131.97997%2C%22height%22%3A14.642788000000003%2C%22text%22%3A%22%5C%22ELASTICSEARCH%5C%22%2C%22%7D%2C%7B%22x%22%3A165.15868%2C%22y%22%3A75.82328%2C%22width%22%3A260.5966%2C%22height%22%3A16.213684%2C%22text%22%3A%22WID%5C%22%3A%5C%22P7CQ2OAZTJ-SCGUVLMHUWG%5C%22%2C%22%7D%2C%7B%22x%22%3A81.68025%2C%22y%22%3A77.361244%2C%22width%22%3A115.672%2C%22height%22%3A13.187790000000007%2C%22text%22%3A%22CLUSTER%20UUID%22%7D%2C%7B%22x%22%3A155.9384%2C%22y%22%3A101.60807%2C%22width%22%3A25.95716999999999%2C%22height%22%3A13.498154%2C%22text%22%3A%22%3A%E6%97%A5%22%7D%2C%7B%22x%22%3A83.143166%2C%22y%22%3A104.121704%2C%22width%22%3A62.46268400000001%2C%22height%22%3A11.036045999999999%2C%22text%22%3A%22VERSION%22%7D%2C%7B%22x%22%3A136.11102%2C%22y%22%3A127.624054%2C%22width%22%3A141.79228%2C%22height%22%3A13.257066000000009%2C%22text%22%3A%22%5C%22NUMBER%5C%22%3A%5C%228.4.1%5C%22%2C%22%7D%2C%7B%22x%22%3A134.4199%2C%22y%22%3A150.45949%2C%22width%22%3A218.87535999999997%2C%22height%22%3A16.630960000000016%2C%22text%22%3A%22%5C%22BUILD_FLAVOR%5C%22%3A%5C%22DEFAULT%5C%22%2C%22%7D%2C%7B%22x%22%3A133.04552%2C%22y%22%3A174.57245%2C%22width%22%3A161.84184%2C%22height%22%3A17.43347%2C%22text%22%3A%22%5C%22BUILD_TYPE%5C%22%3A%5C%22ZIP%5C%22%2C%22%7D%2C%7B%22x%22%3A237.52728%2C%22y%22%3A198.32549%2C%22width%22%3A393.31332%2C%22height%22%3A17.090209999999985%2C%22text%22%3A%221%5C%222BD229C8E56650B42E40992322A76E7914258F0C%5C%22%2C%22%7D%2C%7B%22x%22%3A135.58435%2C%22y%22%3A198.81792%2C%22width%22%3A116.20012%2C%22height%22%3A15.88321000000002%2C%22text%22%3A%22%5C%22BUILD_HASH%5C%22%3A%5C%22%22%7D%2C%7B%22x%22%3A136.94559%2C%22y%22%3A224.49562%2C%22width%22%3A404.5152099999999%2C%22height%22%3A15.482349999999997%2C%22text%22%3A%22%5C%22BUILD%20DATE%5C%22%3A%5C%222022-08-26T12%3A11%3A43.232597118Z%5C%22%2C%22%7D%2C%7B%22x%22%3A133.6095%2C%22y%22%3A248.81642%2C%22width%22%3A202.75951999999998%2C%22height%22%3A17.987959999999987%2C%22text%22%3A%22%5C%22BUILD_SNAPSHOT%5C%22%3AFALSE%2C%22%7D%2C%7B%22x%22%3A137.7306%2C%22y%22%3A274.23438%2C%22width%22%3A215.3246%2C%22height%22%3A16.827049999999986%2C%22text%22%3A%22%5C%22LUCENE_VERSION%5C%22%3A%5C%229.3.0%5C%22%2C%22%7D%2C%7B%22x%22%3A136.27773%2C%22y%22%3A298.25107%2C%22width%22%3A405.15733%2C%22height%22%3A17.719229999999982%2C%22text%22%3A%22%5C%22MINIMUM_WIRE_COMPATIBILITY_VERSION%5C%22%3A'7.17.0%5C%22%2C%22%7D%2C%7B%22x%22%3A138.6591%2C%22y%22%3A322.57935%2C%22width%22%3A398.2388000000001%2C%22height%22%3A16.048000000000002%2C%22text%22%3A%22%5C%22MINIMUM_INDEX_COMPATIBILITY_VERSION%5C%22%3A%207.0.0%5C%22%22%7D%2C%7B%22x%22%3A79.888435%2C%22y%22%3A374.75122%2C%22width%22%3A121.360115%2C%22height%22%3A14.90494000000001%2C%22text%22%3A%22TAGLINE%5C%22%3A%5C%22YOU%22%7D%2C%7B%22x%22%3A275.185%2C%22y%22%3A375.4072%2C%22width%22%3A27.222379999999987%2C%22height%22%3A13.022760000000005%2C%22text%22%3A%22FOR%22%7D%2C%7B%22x%22%3A316.88663%2C%22y%22%3A375.46762%2C%22width%22%3A59.76219999999995%2C%22height%22%3A12.854479999999967%2C%22text%22%3A%22SEARCH%22%7D%2C%7B%22x%22%3A211.49352%2C%22y%22%3A376.75302%2C%22width%22%3A42.58948000000001%2C%22height%22%3A12.90118000000001%2C%22text%22%3A%22KNOW%2C%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23fefefe%22%2C%22id%22%3A%22u405df5a0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"D1WR2\" id=\"D1WR2\"><span data-lake-id=\"u7a28eb56\" id=\"u7a28eb56\">3、安装【Linux】</span></h1><p data-lake-id=\"u3a73f219\" id=\"u3a73f219\"><span data-lake-id=\"u22bbd7cd\" id=\"u22bbd7cd\">暂无测试</span></p><p data-lake-id=\"u3624d1ff\" id=\"u3624d1ff\"><span data-lake-id=\"ud5e8f491\" id=\"ud5e8f491\">​</span><br></p><h1 data-lake-id=\"eGhZG\" id=\"eGhZG\"><span data-lake-id=\"ub18fd514\" id=\"ub18fd514\">4、SSL安全</span></h1><p data-lake-id=\"ufab56786\" id=\"ufab56786\"><span data-lake-id=\"u6ffa18ff\" id=\"u6ffa18ff\">暂无</span></p><h1 data-lake-id=\"GddJt\" id=\"GddJt\"><span data-lake-id=\"u70273988\" id=\"u70273988\">5、数据界面工具</span></h1><h2 data-lake-id=\"mT0Fe\" id=\"mT0Fe\"><span data-lake-id=\"u0168b88a\" id=\"u0168b88a\">1、kibana【官方】</span></h2><p data-lake-id=\"u8369c4ef\" id=\"u8369c4ef\"><span data-lake-id=\"u086f5048\" id=\"u086f5048\" class=\"lake-fontsize-11\" style=\"color: rgb(73, 73, 73)\">Kibana 是为 Elasticsearch设计的开源分析和可视化平台。你可以使用 Kibana 来搜索，查看存储在 Elasticsearch 索引中的数据并与之交互。你可以很容易实现高级的数据分析和可视化，以图表的形式展现出来。</span></p><p data-lake-id=\"u5c422943\" id=\"u5c422943\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1663310319574-4f3c7fed-0696-4c7a-914c-8fcc6c69bbc4.png%22%2C%22taskId%22%3A%22u5766e684-ce19-4424-8889-d9863a09ac8%22%2C%22clientId%22%3A%22ueeadb8ff-7c2c-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A576152%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A2864%2C%22originHeight%22%3A1536%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22WELCOME%20TO%20KIBANA%20YOUR%20WINDOW%20INTO%20THE%20ELASTIC%20STACK%20LET'S%20GET%20STARTED%20WE%20NOTICED%20THAT%20YOU%20DON'T%20HAVE%20ANY%20DATA%20IN%20YOUR%20CLUSTER.YOU%20CAN%20TRY%20OUR%20SAMPLE%20DATA%20AND%20DASHBOARDS%20OR%20JUMP%20IN%20WITH%20YOUR%20OWN%20DATA.%20TRY%20OUR%20SAMPLE%20DATA%20EXPLORE%20ON%20MY%20OWN%20TO%20LEARN%20ABOUT%20HOW%20USAGE%20DATA%20HELPS%20US%20MANAGE%20AND%20IMPROVE%20OUR%20PRODUCTS%20AND%20SERVICES%2CSEE%20OUR%20PRIVACY%20STATEMENT.TO%20STOP%20COLLECTION%2CDISABLE%20USAGE%20DATA%20HERE.%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A1157.065%2C%22y%22%3A335.59738%2C%22width%22%3A554.384%2C%22height%22%3A58.22613999999999%2C%22text%22%3A%22WELCOME%20TO%20KIBANA%22%7D%2C%7B%22x%22%3A1232.3683%2C%22y%22%3A413.71545%2C%22width%22%3A404.6603%2C%22height%22%3A23.680650000000014%2C%22text%22%3A%22YOUR%20WINDOW%20INTO%20THE%20ELASTIC%20STACK%22%7D%2C%7B%22x%22%3A1051.4445%2C%22y%22%3A891.0646%2C%22width%22%3A280.07169999999996%2C%22height%22%3A41.07579999999996%2C%22text%22%3A%22LET'S%20GET%20STARTED%22%7D%2C%7B%22x%22%3A1053.6807%2C%22y%22%3A957.6828%2C%22width%22%3A714.6995000000002%2C%22height%22%3A28.67394999999999%2C%22text%22%3A%22WE%20NOTICED%20THAT%20YOU%20DON'T%20HAVE%20ANY%20DATA%20IN%20YOUR%20CLUSTER.YOU%22%7D%2C%7B%22x%22%3A1056.3345%2C%22y%22%3A997.1832%2C%22width%22%3A722.3423%2C%22height%22%3A25.61099999999999%2C%22text%22%3A%22CAN%20TRY%20OUR%20SAMPLE%20DATA%20AND%20DASHBOARDS%20OR%20JUMP%20IN%20WITH%20YOUR%22%7D%2C%7B%22x%22%3A1056.556%2C%22y%22%3A1034.1713%2C%22width%22%3A115.15750000000003%2C%22height%22%3A24.296499999999924%2C%22text%22%3A%22OWN%20DATA.%22%7D%2C%7B%22x%22%3A1080.6676%2C%22y%22%3A1113.7697%2C%22width%22%3A271.90280000000007%2C%22height%22%3A29.75059999999985%2C%22text%22%3A%22TRY%20OUR%20SAMPLE%20DATA%22%7D%2C%7B%22x%22%3A1401.953%2C%22y%22%3A1115.7754%2C%22width%22%3A261.9622999999999%2C%22height%22%3A30.981899999999996%2C%22text%22%3A%22EXPLORE%20ON%20MY%20OWN%22%7D%2C%7B%22x%22%3A1027.4086%2C%22y%22%3A1210.2388%2C%22width%22%3A770.7772%2C%22height%22%3A33.55469999999991%2C%22text%22%3A%22TO%20LEARN%20ABOUT%20HOW%20USAGE%20DATA%20HELPS%20US%20MANAGE%20AND%20IMPROVE%20OUR%22%7D%2C%7B%22x%22%3A1025.882%2C%22y%22%3A1249.1493%2C%22width%22%3A689.308%2C%22height%22%3A33.00059999999985%2C%22text%22%3A%22PRODUCTS%20AND%20SERVICES%2CSEE%20OUR%20PRIVACY%20STATEMENT.TO%20STOP%22%7D%2C%7B%22x%22%3A1026.0824%2C%22y%22%3A1283.9698%2C%22width%22%3A419.24710000000005%2C%22height%22%3A31.97719999999981%2C%22text%22%3A%22COLLECTION%2CDISABLE%20USAGE%20DATA%20HERE.%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23ebf1f3%22%2C%22id%22%3A%22u732fbabb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"udb2620c9\" id=\"udb2620c9\"><span data-lake-id=\"ubafd293f\" id=\"ubafd293f\" class=\"lake-fontsize-11\" style=\"color: rgb(73, 73, 73)\">安装参考：</span><a href=\"https://www.cnblogs.com/chenqionghe/p/12503181.html\" target=\"_blank\" data-lake-id=\"u7d9cdb60\" id=\"u7d9cdb60\"><span data-lake-id=\"ue00de21a\" id=\"ue00de21a\">https://www.cnblogs.com/chenqionghe/p/12503181.html</span></a></p><h2 data-lake-id=\"jEKPh\" id=\"jEKPh\"><span data-lake-id=\"uc6471f34\" id=\"uc6471f34\">2、elasticsearch-head插件</span></h2><blockquote data-lake-id=\"ub92195c2\" id=\"ub92195c2\"><p data-lake-id=\"u396fa88f\" id=\"u396fa88f\"><span data-lake-id=\"uefb1096b\" id=\"uefb1096b\">elasticsearch-head是Web前端，用于浏览和与Elastic Search集群进行交互，可用于集群管理、数据可视化、增删改查工具Elasticsearch语句可视化等。</span></p></blockquote><p data-lake-id=\"u7f4025d0\" id=\"u7f4025d0\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1663309790115-5a0c385b-f905-42e9-8942-68c84db9555c.png%22%2C%22taskId%22%3A%22u3eea04e0-5ed1-4c03-a145-e41113998dc%22%2C%22clientId%22%3A%22ueeadb8ff-7c2c-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A902.9434287212814%2C%22height%22%3A497%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A53958%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A997%2C%22originHeight%22%3A549%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22ELASTICSEARCH%20ELASTICSEARCH(HTTP%3A%2F%2FLOCALHOST%3A9200%2F)(8.4.1)%20%E9%9B%86%E7%BE%A4%E5%81%A5%E5%BA%B7%E5%80%BC%3AYELLOW(1%20OF%202)%20NEW%20%E4%BF%A1%E6%81%AF%20%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2%5B%2B%5D%20%E6%95%B0%E6%8D%AE%E6%B5%8F%E8%A7%88%20%E6%A6%82%E8%A7%88%20%E7%B4%A0%E5%BC%95%20%E5%A4%8D%E5%90%88%E6%9F%A5%E8%AF%A2%20%E9%9B%86%E7%BE%A4%E6%A6%82%E8%A7%88%20%E9%9B%86%E7%BE%A4%E6%8E%92%E5%BA%8F%20INDEX%20FILTER%20%E5%88%B7%E6%96%B0%20VIEW%20ALIASES%20SORT%20INDICES%20KIBANA%20TASK%20MANAGER%208.4.1%20001%20.KIBANA%208.4.1%20001%20ARTICLES_INDEX%20.KIBANA%20.GEOIP_DATAB%20SECURITY-7%20SIZE%3A9.31KI%20EVENT-LOG-%20SIZE%3AUNKNOWN%20SIZE%3AUNKNOWN%20SIZE%3AUNKNOWN%20SIZE%3AUNKNOWN%20(9.31KI)%20DOCS%3AUNKNOWN%20DOCS%3AUNKNOWN%20DOCS%3A%208.4.1.%20DOCS%3AUNKNOWN%20DOCS%3A1(1)%20UNKNOWN%20000001%20%E4%BF%A1%E6%81%AF%20%E4%BF%A1%E6%81%AF%20%E5%8A%A8%E4%BD%9C%20%E5%8A%A8%E4%BD%9C%20%E4%BF%A1%E6%81%AF%20%E5%8A%A8%E5%8C%96%20SIZE%3AUNKNOWN%20%E4%BF%A1%E6%81%AF%20%E4%BF%A1%E6%81%AF%20DOCS%3A%20%E5%8A%A8%E4%BD%9C%20%E5%8A%A8%E4%BD%9C%20UNKNOWN%20%E4%BF%A1%E6%81%AF%20%E5%8A%A8%E4%BD%9C%20X%20.KIBANA%20TASK_MANAGER_8.4.1%20X%20%2CKIBANA_TASK_MANAGER%20KIBANA-EVENT%20LOG-8.4.1%20X%20SECURITY%20%20X%20.KIBANA%20.KIBANA_8.4.1%20UNASSIGNED%20TOUSHI%20HUI%20%E4%BF%A1%E6%81%AF%20%E5%8A%A8%E4%BD%9C%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A9.757258%2C%22y%22%3A2.27528%2C%22width%22%3A131.453742%2C%22height%22%3A17.656494000000002%2C%22text%22%3A%22ELASTICSEARCH%22%7D%2C%7B%22x%22%3A226.17044%2C%22y%22%3A4.7890935%2C%22width%22%3A257.84680000000003%2C%22height%22%3A16.9097245%2C%22text%22%3A%22ELASTICSEARCH(HTTP%3A%2F%2FLOCALHOST%3A9200%2F)(8.4.1)%22%7D%2C%7B%22x%22%3A552.5596%2C%22y%22%3A5.1496453%2C%22width%22%3A187.51429999999993%2C%22height%22%3A16.6787657%2C%22text%22%3A%22%E9%9B%86%E7%BE%A4%E5%81%A5%E5%BA%B7%E5%80%BC%3AYELLOW(1%20OF%202)%22%7D%2C%7B%22x%22%3A176.19023%2C%22y%22%3A8.509913%2C%22width%22%3A28.07311999999999%2C%22height%22%3A11.350706%2C%22text%22%3A%22NEW%22%7D%2C%7B%22x%22%3A937.0799%2C%22y%22%3A12.50338%2C%22width%22%3A29.388300000000072%2C%22height%22%3A14.360992%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A186.60356%2C%22y%22%3A38.80931%2C%22width%22%3A82.43938%2C%22height%22%3A16.878518%2C%22text%22%3A%22%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2%5B%2B%5D%22%7D%2C%7B%22x%22%3A111.14458%2C%22y%22%3A39.33929%2C%22width%22%3A53.63637999999999%2C%22height%22%3A15.292210000000004%2C%22text%22%3A%22%E6%95%B0%E6%8D%AE%E6%B5%8F%E8%A7%88%22%7D%2C%7B%22x%22%3A14.054255%2C%22y%22%3A39.692295%2C%22width%22%3A28.146303000000003%2C%22height%22%3A15.641304999999996%2C%22text%22%3A%22%E6%A6%82%E8%A7%88%22%7D%2C%7B%22x%22%3A62.56239%2C%22y%22%3A39.753345%2C%22width%22%3A23.936110000000006%2C%22height%22%3A15.186985%2C%22text%22%3A%22%E7%B4%A0%E5%BC%95%22%7D%2C%7B%22x%22%3A288.1852%2C%22y%22%3A39.89036%2C%22width%22%3A56.179730000000006%2C%22height%22%3A14.08276%2C%22text%22%3A%22%E5%A4%8D%E5%90%88%E6%9F%A5%E8%AF%A2%22%7D%2C%7B%22x%22%3A9.517853%2C%22y%22%3A67.634186%2C%22width%22%3A52.60482%2C%22height%22%3A14.944419999999994%2C%22text%22%3A%22%E9%9B%86%E7%BE%A4%E6%A6%82%E8%A7%88%22%7D%2C%7B%22x%22%3A94.85071%2C%22y%22%3A67.863594%2C%22width%22%3A55.55880999999998%2C%22height%22%3A15.34471099999999%2C%22text%22%3A%22%E9%9B%86%E7%BE%A4%E6%8E%92%E5%BA%8F%22%7D%2C%7B%22x%22%3A398.34055%2C%22y%22%3A68.58518%2C%22width%22%3A69.08697000000001%2C%22height%22%3A14.506600000000006%2C%22text%22%3A%22INDEX%20FILTER%22%7D%2C%7B%22x%22%3A927.0434%2C%22y%22%3A68.61031%2C%22width%22%3A28.17560000000003%2C%22height%22%3A14.005099999999999%2C%22text%22%3A%22%E5%88%B7%E6%96%B0%22%7D%2C%7B%22x%22%3A290.80972%2C%22y%22%3A69.71715%2C%22width%22%3A82.35763999999995%2C%22height%22%3A13.127409999999998%2C%22text%22%3A%22VIEW%20ALIASES%22%7D%2C%7B%22x%22%3A184.31032%2C%22y%22%3A70.14044%2C%22width%22%3A77.26460000000003%2C%22height%22%3A13.128680000000003%2C%22text%22%3A%22SORT%20INDICES%22%7D%2C%7B%22x%22%3A369.35486%2C%22y%22%3A97.15662%2C%22width%22%3A406.1770000000001%2C%22height%22%3A13.741339999999994%2C%22text%22%3A%22KIBANA%20TASK%20MANAGER%208.4.1%20001%20.KIBANA%208.4.1%20001%22%7D%2C%7B%22x%22%3A138.35365%2C%22y%22%3A97.29639%2C%22width%22%3A110.46389000000002%2C%22height%22%3A15.996669999999995%2C%22text%22%3A%22ARTICLES_INDEX%22%7D%2C%7B%22x%22%3A783.458%2C%22y%22%3A97.985054%2C%22width%22%3A60.139350000000036%2C%22height%22%3A12.030096%2C%22text%22%3A%22.KIBANA%22%7D%2C%7B%22x%22%3A898.05676%2C%22y%22%3A96.748535%2C%22width%22%3A96.26739999999995%2C%22height%22%3A14.954394999999991%2C%22text%22%3A%22.GEOIP_DATAB%22%7D%2C%7B%22x%22%3A258.46872%2C%22y%22%3A97.804405%2C%22width%22%3A79.80637999999999%2C%22height%22%3A13.184955000000002%2C%22text%22%3A%22SECURITY-7%22%7D%2C%7B%22x%22%3A140.49782%2C%22y%22%3A114.25439%2C%22width%22%3A78.81804%2C%22height%22%3A12.991439999999997%2C%22text%22%3A%22SIZE%3A9.31KI%22%7D%2C%7B%22x%22%3A784.59204%2C%22y%22%3A114.9107%2C%22width%22%3A75.01286000000005%2C%22height%22%3A12.233784999999997%2C%22text%22%3A%22EVENT-LOG-%22%7D%2C%7B%22x%22%3A633.2787%2C%22y%22%3A115.00181%2C%22width%22%3A97.62255000000005%2C%22height%22%3A11.077709999999996%2C%22text%22%3A%22SIZE%3AUNKNOWN%22%7D%2C%7B%22x%22%3A366.87262%2C%22y%22%3A115.21425%2C%22width%22%3A97.99558000000002%2C%22height%22%3A11.532619999999994%2C%22text%22%3A%22SIZE%3AUNKNOWN%22%7D%2C%7B%22x%22%3A894.8624%2C%22y%22%3A114.87771%2C%22width%22%3A97.34640000000002%2C%22height%22%3A11.209370000000007%2C%22text%22%3A%22SIZE%3AUNKNOWN%22%7D%2C%7B%22x%22%3A256.4816%2C%22y%22%3A115.422295%2C%22width%22%3A97.15514999999999%2C%22height%22%3A10.35652499999999%2C%22text%22%3A%22SIZE%3AUNKNOWN%22%7D%2C%7B%22x%22%3A142.25217%2C%22y%22%3A129.27104%2C%22width%22%3A52.43876%2C%22height%22%3A13.721069999999997%2C%22text%22%3A%22(9.31KI)%22%7D%2C%7B%22x%22%3A634.9936%2C%22y%22%3A130.44864%2C%22width%22%3A101.31060000000002%2C%22height%22%3A12.78855999999999%2C%22text%22%3A%22DOCS%3AUNKNOWN%22%7D%2C%7B%22x%22%3A367.34644%2C%22y%22%3A130.62007%2C%22width%22%3A102.50056000000001%2C%22height%22%3A12.572890000000001%2C%22text%22%3A%22DOCS%3AUNKNOWN%22%7D%2C%7B%22x%22%3A256.38602%2C%22y%22%3A130.85632%2C%22width%22%3A36.61163000000005%2C%22height%22%3A10.955779999999976%2C%22text%22%3A%22DOCS%3A%22%7D%2C%7B%22x%22%3A785.15045%2C%22y%22%3A131.3241%2C%22width%22%3A39.92235000000005%2C%22height%22%3A9.28988000000001%2C%22text%22%3A%228.4.1.%22%7D%2C%7B%22x%22%3A895.04645%2C%22y%22%3A131.88675%2C%22width%22%3A100.2753899999999%2C%22height%22%3A10.611529999999988%2C%22text%22%3A%22DOCS%3AUNKNOWN%22%7D%2C%7B%22x%22%3A140.80354%2C%22y%22%3A145.98254%2C%22width%22%3A75.47133%2C%22height%22%3A13.815760000000012%2C%22text%22%3A%22DOCS%3A1(1)%22%7D%2C%7B%22x%22%3A257.31763%2C%22y%22%3A146.30469%2C%22width%22%3A61.54302999999999%2C%22height%22%3A11.81265000000002%2C%22text%22%3A%22UNKNOWN%22%7D%2C%7B%22x%22%3A785.3338%2C%22y%22%3A147.40398%2C%22width%22%3A59.523199999999974%2C%22height%22%3A9.9606%2C%22text%22%3A%22000001%22%7D%2C%7B%22x%22%3A646.9364%2C%22y%22%3A151.85147%2C%22width%22%3A26.53309999999999%2C%22height%22%3A13.635969999999986%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A907.8804%2C%22y%22%3A152.57346%2C%22width%22%3A31.06515999999999%2C%22height%22%3A13.487290000000002%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A704.35925%2C%22y%22%3A152.58127%2C%22width%22%3A34.21729000000005%2C%22height%22%3A13.349730000000022%2C%22text%22%3A%22%E5%8A%A8%E4%BD%9C%22%7D%2C%7B%22x%22%3A443.94757%2C%22y%22%3A152.6855%2C%22width%22%3A26.858130000000017%2C%22height%22%3A13.211720000000014%2C%22text%22%3A%22%E5%8A%A8%E4%BD%9C%22%7D%2C%7B%22x%22%3A381.7781%2C%22y%22%3A152.90913%2C%22width%22%3A24.398720000000026%2C%22height%22%3A13.34151%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A967.58997%2C%22y%22%3A154.21204%2C%22width%22%3A24.877430000000004%2C%22height%22%3A11.868279999999999%2C%22text%22%3A%22%E5%8A%A8%E5%8C%96%22%7D%2C%7B%22x%22%3A786.11975%2C%22y%22%3A163.57483%2C%22width%22%3A95.75922000000003%2C%22height%22%3A11.268709999999999%2C%22text%22%3A%22SIZE%3AUNKNOWN%22%7D%2C%7B%22x%22%3A267.53357%2C%22y%22%3A167.26175%2C%22width%22%3A32.72892999999999%2C%22height%22%3A14.70716999999999%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A152.52281%2C%22y%22%3A168.42001%2C%22width%22%3A28.662170000000003%2C%22height%22%3A13.438940000000002%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A784.99365%2C%22y%22%3A179.23332%2C%22width%22%3A33.088449999999966%2C%22height%22%3A10.582459999999998%2C%22text%22%3A%22DOCS%3A%22%7D%2C%7B%22x%22%3A267.4041%2C%22y%22%3A192.19778%2C%22width%22%3A29.828929999999957%2C%22height%22%3A14.768329999999992%2C%22text%22%3A%22%E5%8A%A8%E4%BD%9C%22%7D%2C%7B%22x%22%3A153.82121%2C%22y%22%3A192.38985%2C%22width%22%3A27.404939999999982%2C%22height%22%3A14.020370000000014%2C%22text%22%3A%22%E5%8A%A8%E4%BD%9C%22%7D%2C%7B%22x%22%3A784.8078%2C%22y%22%3A196.28362%2C%22width%22%3A61.72789999999998%2C%22height%22%3A10.105199999999996%2C%22text%22%3A%22UNKNOWN%22%7D%2C%7B%22x%22%3A797.90393%2C%22y%22%3A216.6621%2C%22width%22%3A26.868670000000066%2C%22height%22%3A13.060599999999994%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A798.1382%2C%22y%22%3A240.68204%2C%22width%22%3A27.43780000000004%2C%22height%22%3A13.218490000000003%2C%22text%22%3A%22%E5%8A%A8%E4%BD%9C%22%7D%2C%7B%22x%22%3A611.7599%2C%22y%22%3A261.71875%2C%22width%22%3A13.954600000000028%2C%22height%22%3A17.106550000000027%2C%22text%22%3A%22X%22%7D%2C%7B%22x%22%3A394.43985%2C%22y%22%3A262.33212%2C%22width%22%3A193.76184999999998%2C%22height%22%3A13.40378000000004%2C%22text%22%3A%22.KIBANA%20TASK_MANAGER_8.4.1%22%7D%2C%7B%22x%22%3A612.97833%2C%22y%22%3A278.98764%2C%22width%22%3A11.81416999999999%2C%22height%22%3A17.70726000000002%2C%22text%22%3A%22X%22%7D%2C%7B%22x%22%3A418.1028%2C%22y%22%3A282.2632%2C%22width%22%3A148.21495000000004%2C%22height%22%3A14.916060000000016%2C%22text%22%3A%22%2CKIBANA_TASK_MANAGER%22%7D%2C%7B%22x%22%3A789.5611%2C%22y%22%3A304.17215%2C%22width%22%3A95.29187000000002%2C%22height%22%3A13.35005000000001%2C%22text%22%3A%22KIBANA-EVENT%22%7D%2C%7B%22x%22%3A797.6157%2C%22y%22%3A320.06564%2C%22width%22%3A84.12170000000003%2C%22height%22%3A13.514859999999999%2C%22text%22%3A%22LOG-8.4.1%20X%22%7D%2C%7B%22x%22%3A274.42856%2C%22y%22%3A338.25616%2C%22width%22%3A85.84784000000002%2C%22height%22%3A16.811620000000005%2C%22text%22%3A%22SECURITY%20%20X%22%7D%2C%7B%22x%22%3A677.9942%2C%22y%22%3A360.33002%2C%22width%22%3A45.974500000000035%2C%22height%22%3A12.833880000000022%2C%22text%22%3A%22.KIBANA%22%7D%2C%7B%22x%22%3A655.02216%2C%22y%22%3A381.31348%2C%22width%22%3A89.62878%2C%22height%22%3A12.705069999999978%2C%22text%22%3A%22.KIBANA_8.4.1%22%7D%2C%7B%22x%22%3A43.614983%2C%22y%22%3A401.55573%2C%22width%22%3A87.05310700000001%2C%22height%22%3A12.54797000000002%2C%22text%22%3A%22UNASSIGNED%22%7D%2C%7B%22x%22%3A44.913612%2C%22y%22%3A441.43668%2C%22width%22%3A61.200248%2C%22height%22%3A10.82738999999998%2C%22text%22%3A%22TOUSHI%22%7D%2C%7B%22x%22%3A43.933758%2C%22y%22%3A457.9135%2C%22width%22%3A28.237812000000005%2C%22height%22%3A10.869340000000022%2C%22text%22%3A%22HUI%22%7D%2C%7B%22x%22%3A56.22381%2C%22y%22%3A479.46017%2C%22width%22%3A27.939375%2C%22height%22%3A13.96298999999999%2C%22text%22%3A%22%E4%BF%A1%E6%81%AF%22%7D%2C%7B%22x%22%3A57.098663%2C%22y%22%3A503.6751%2C%22width%22%3A26.972906999999992%2C%22height%22%3A13.560700000000054%2C%22text%22%3A%22%E5%8A%A8%E4%BD%9C%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f7f6f2%22%2C%22id%22%3A%22u0679ac24%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u4c997375\" id=\"u4c997375\"><br></p><p data-lake-id=\"u47d46040\" id=\"u47d46040\"><span data-lake-id=\"u2887565a\" id=\"u2887565a\">elasticsearch-head  github源码地址：</span></p><p data-lake-id=\"ud15a40db\" id=\"ud15a40db\"><a href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" data-lake-id=\"u4130ce2a\" id=\"u4130ce2a\"><span data-lake-id=\"udd8960da\" id=\"udd8960da\">https://github.com/mobz/elasticsearch-head</span></a></p><h3 data-lake-id=\"iSzYI\" id=\"iSzYI\" style=\"text-align: left\"><span data-lake-id=\"ufcb9668c\" id=\"ufcb9668c\" style=\"color: rgb(0, 0, 0)\">插件的安装【Linux】</span></h3><p data-lake-id=\"u04ecc44e\" id=\"u04ecc44e\"><span data-lake-id=\"ud21af370\" id=\"ud21af370\">下载elasticsearch-head插件</span></p><p data-lake-id=\"u83fc2b76\" id=\"u83fc2b76\"><span data-lake-id=\"ub89adf4b\" id=\"ub89adf4b\">进入elasticsearch-head源码目录中，执行 npm install</span></p><p data-lake-id=\"ue3665761\" id=\"ue3665761\"><span data-lake-id=\"u5ec5ce05\" id=\"u5ec5ce05\">在运行npm install时，可能会存在Head插件phantomjs权限问题</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22npm%20WARN%20deprecated%20phantomjs-prebuilt%402.1.16%3A%20this%20package%20is%20now%20deprecated%5Cnnpm%20WARN%20deprecated%20request%402.88.2%3A%20request%20has%20been%20deprecated%2C%20see%20https%3A%2F%2Fgithub.com%2Frequest%2Frequest%2Fissues%2F3142%5Cnnpm%20WARN%20deprecated%20har-validator%405.1.5%3A%20this%5Cnnpm%20WARN%20deprecated%20fsevents%401.2.13%3A%20fsevents%201%20will%20break%20on%20node%20v14%2B%20and%20could%20be%20using%20insecure%20binaries.%20Upgrade%20to%20fsevents%202.%5Cn%5Cn%3E%20phantomjs-prebuilt%402.1.16%20install%20E%3A%5C%5CJavaDevelopment%5C%5Celasticsearch%5C%5Celasticsearch-head-master%5C%5Cnode_modules%5C%5Cphantomjs-prebuilt%5Cn%3E%20node%20install.js%5Cn%5CnPhantomJS%20not%20found%20on%20PATH%5CnDownloading%20https%3A%2F%2Fgithub.com%2FMedium%2Fphantomjs%2Freleases%2Fdownload%2Fv2.1.1%2Fphantomjs-2.1.1-windows.zip%5CnSaving%20to%20C%3A%5C%5CUsers%5C%5Cysxx%5C%5CAppData%5C%5CLocal%5C%5CTemp%5C%5Cphantomjs%5C%5Cphantomjs-2.1.1-windows.zip%5CnReceiving...%5Cn%5CnError%20making%20request.%5CnError%3A%20connect%20ETIMEDOUT%20140.82.114.4%3A443%5Cn%20%20%20%20at%20TCPConnectWrap.afterConnect%20%5Bas%20oncomplete%5D%20(net.js%3A1107%3A14)%5Cn%5CnPlease%20report%20this%20full%20log%20at%20https%3A%2F%2Fgithub.com%2FMedium%2Fphantomjs%5Cnnpm%20WARN%20elasticsearch-head%400.0.0%20license%20should%20be%20a%20valid%20SPDX%20license%20expression%5Cnnpm%20WARN%20optional%20SKIPPING%20OPTIONAL%20DEPENDENCY%3A%20fsevents%401.2.13%20(node_modules%5C%5Cfsevents)%3A%5Cnnpm%20WARN%20notsup%20SKIPPING%20OPTIONAL%20DEPENDENCY%3A%20Unsupported%20platform%20for%20fsevents%401.2.13%3A%20wanted%20%7B%5C%22os%5C%22%3A%5C%22darwin%5C%22%2C%5C%22arch%5C%22%3A%5C%22any%5C%22%7D%20(current%3A%20%7B%5C%22os%5C%22%3A%5C%22win32%5C%22%2C%5C%22arch%5C%22%3A%5C%22x64%5C%22%7D)%5Cn%5Cnnpm%20ERR!%20code%20ELIFECYCLE%5Cnnpm%20ERR!%20errno%201%5Cnnpm%20ERR!%20phantomjs-prebuilt%402.1.16%20install%3A%20%60node%20install.js%60%5Cnnpm%20ERR!%20Exit%20status%201%5Cnnpm%20ERR!%5Cnnpm%20ERR!%20Failed%20at%20the%20phantomjs-prebuilt%402.1.16%20install%20script.%5Cnnpm%20ERR!%20This%20is%20probably%20not%20a%20problem%20with%20npm.%20There%20is%20likely%20additional%20logging%20output%20above.%5Cn%5Cnnpm%20ERR!%20A%20complete%20log%20of%20this%20run%20can%20be%20found%20in%3A%5Cnnpm%20ERR!%20%20%20%20%20C%3A%5C%5CUsers%5C%5Cysxx%5C%5CAppData%5C%5CRoaming%5C%5Cnpm-cache%5C%5C_logs%5C%5C2020-12-28T01_28_03_195Z-debug.log%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OJQRp%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uc98dfc71\" id=\"uc98dfc71\"><strong><span data-lake-id=\"u2f4871dd\" id=\"u2f4871dd\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">解决方案：在npm install命令后加 -g 参数</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22npm%20install%20-g%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eyMCD%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud6e7654d\" id=\"ud6e7654d\"><strong><span data-lake-id=\"u78983d1d\" id=\"u78983d1d\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">在install成功之后，执行 </span></strong><strong><span data-lake-id=\"ub27b1824\" id=\"ub27b1824\" class=\"lake-fontsize-11\" style=\"color: rgb(30, 107, 184)\">npm run start</span></strong><strong><span data-lake-id=\"u18fd476d\" id=\"u18fd476d\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\"> 启动head插件</span></strong></p><p data-lake-id=\"u75ed87c2\" id=\"u75ed87c2\"><span data-lake-id=\"u2b55628a\" id=\"u2b55628a\">在cmd命令行可以看到 web server 地址，在浏览器访问该地址 http://localhost:9100，如果出现elasticsearch-head插件连不上elasticsearch服务，需要在elasticsearch安装目录下的config文件夹，找到elasticsearch.yml文件，添加两行配置：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%E8%A1%A8%E7%A4%BA%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%E8%B7%A8%E5%9F%9F%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BAfalse%5Cnhttp.cors.enabled%3A%20true%5Cn%23%E5%BD%93%E8%AE%BE%E7%BD%AE%E5%85%81%E8%AE%B8%E8%B7%A8%E5%9F%9F%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA*%2C%E8%A1%A8%E7%A4%BA%E6%94%AF%E6%8C%81%E6%89%80%E6%9C%89%E5%9F%9F%E5%90%8D%5Cnhttp.cors.allow-origin%3A%20%5C%22*%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FcdLO%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u66b8c837\" id=\"u66b8c837\"><br></p><h3 data-lake-id=\"UNWgC\" id=\"UNWgC\" style=\"text-align: left\"><span data-lake-id=\"ubf2300c4\" id=\"ubf2300c4\" style=\"color: rgb(0, 0, 0)\">插件的安装【window浏览器】</span></h3><p data-lake-id=\"u00097577\" id=\"u00097577\"><span data-lake-id=\"uf9913695\" id=\"uf9913695\">打开谷歌浏览器应用插件网址：</span></p><p data-lake-id=\"u676a4743\" id=\"u676a4743\"><a href=\"https://chrome.google.com/webstore/category/extensions?hl=zh-CN\" target=\"_blank\" data-lake-id=\"u5ea3bd22\" id=\"u5ea3bd22\"><span data-lake-id=\"uc1f86a49\" id=\"uc1f86a49\">https://chrome.google.com/webstore/category/extensions?hl=zh-CN</span></a></p><p data-lake-id=\"u32b61aca\" id=\"u32b61aca\"><span data-lake-id=\"u5d5973b4\" id=\"u5d5973b4\">搜索：elasticsearch-head</span></p><p data-lake-id=\"u7dce0663\" id=\"u7dce0663\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1663309964980-79cba546-1a82-4d28-8be4-b3602b1f70b9.png%22%2C%22taskId%22%3A%22u1d042b99-7935-40d3-80e6-75b949bf195%22%2C%22clientId%22%3A%22ueeadb8ff-7c2c-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1238.0377804032012%2C%22height%22%3A638%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A57811%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1367%2C%22originHeight%22%3A704%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22CHROME%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97%20XIANRENGH%40GMAIL.COM%20%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F%20ELASTICSEARCH-HEAD%201%E4%B8%AA%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F(%E5%85%B11%E4%B8%AA)%20%E9%A6%96%E9%A1%B5%20%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F%20MULTI%20ELASTICSEARCH%20HEAD%20%E4%B8%BB%E9%A2%98%E8%83%8C%E6%99%AF%20%E7%B2%BE%E9%80%89%20MULTI%20ELASTICSEARCH%20HEAD%20%E8%AF%84%E5%88%86%20%E5%B7%A5%E5%85%B710%E5%BC%80%E5%8F%91%E7%9C%81%E5%B7%A5%E5%85%B7%20%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96%20%E6%9C%8D%E5%8A%A1%E6%9D%A1%E6%AC%BE%20UPDATED%20%E5%85%B3%E4%BA%8ECHROME%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A100.65553%2C%22y%22%3A15.902792%2C%22width%22%3A188.90026999999998%2C%22height%22%3A24.960838000000003%2C%22text%22%3A%22CHROME%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97%22%7D%2C%7B%22x%22%3A1156.3268%2C%22y%22%3A21.249342%2C%22width%22%3A172.5936999999999%2C%22height%22%3A15.540154999999999%2C%22text%22%3A%22XIANRENGH%40GMAIL.COM%22%7D%2C%7B%22x%22%3A314.05365%2C%22y%22%3A100.5183%2C%22width%22%3A110.23764999999997%2C%22height%22%3A29.50784%2C%22text%22%3A%22%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F%22%7D%2C%7B%22x%22%3A65.83705%2C%22y%22%3A101.803955%2C%22width%22%3A135.48352%2C%22height%22%3A12.435895000000002%2C%22text%22%3A%22ELASTICSEARCH-HEAD%22%7D%2C%7B%22x%22%3A1138.7512%2C%22y%22%3A109.02006%2C%22width%22%3A159.0906%2C%22height%22%3A18.170450000000002%2C%22text%22%3A%221%E4%B8%AA%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F(%E5%85%B11%E4%B8%AA)%22%7D%2C%7B%22x%22%3A56.253483%2C%22y%22%3A154.30304%2C%22width%22%3A36.04078299999999%2C%22height%22%3A14.38431%2C%22text%22%3A%22%E9%A6%96%E9%A1%B5%22%7D%2C%7B%22x%22%3A88.22052%2C%22y%22%3A215.98338%2C%22width%22%3A66.67058%2C%22height%22%3A16.596679999999992%2C%22text%22%3A%22%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F%22%7D%2C%7B%22x%22%3A578.43463%2C%22y%22%3A222.47704%2C%22width%22%3A270.59427000000005%2C%22height%22%3A22.200980000000015%2C%22text%22%3A%22MULTI%20ELASTICSEARCH%20HEAD%22%7D%2C%7B%22x%22%3A88.58699%2C%22y%22%3A256.01047%2C%22width%22%3A66.32167%2C%22height%22%3A16.37648999999999%2C%22text%22%3A%22%E4%B8%BB%E9%A2%98%E8%83%8C%E6%99%AF%22%7D%2C%7B%22x%22%3A605.83%2C%22y%22%3A262.1885%2C%22width%22%3A33.75574999999992%2C%22height%22%3A15.99690000000004%2C%22text%22%3A%22%E7%B2%BE%E9%80%89%22%7D%2C%7B%22x%22%3A578.2051%2C%22y%22%3A295.3848%2C%22width%22%3A200.01315999999997%2C%22height%22%3A16.908000000000015%2C%22text%22%3A%22MULTI%20ELASTICSEARCH%20HEAD%22%7D%2C%7B%22x%22%3A44.86228%2C%22y%22%3A300.6306%2C%22width%22%3A33.85504%2C%22height%22%3A15.613299999999981%2C%22text%22%3A%22%E8%AF%84%E5%88%86%22%7D%2C%7B%22x%22%3A592.02136%2C%22y%22%3A330.26105%2C%22width%22%3A205.66844000000003%2C%22height%22%3A17.749349999999993%2C%22text%22%3A%22%E5%B7%A5%E5%85%B710%E5%BC%80%E5%8F%91%E7%9C%81%E5%B7%A5%E5%85%B7%22%7D%2C%7B%22x%22%3A46.132996%2C%22y%22%3A525.4039%2C%22width%22%3A79.91525999999999%2C%22height%22%3A16.880800000000022%2C%22text%22%3A%22%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96%22%7D%2C%7B%22x%22%3A46.036415%2C%22y%22%3A566.17737%2C%22width%22%3A63.199655%2C%22height%22%3A17.242629999999963%2C%22text%22%3A%22%E6%9C%8D%E5%8A%A1%E6%9D%A1%E6%AC%BE%22%7D%2C%7B%22x%22%3A122.54766%2C%22y%22%3A568.38684%2C%22width%22%3A52.06788000000002%2C%22height%22%3A14.450559999999996%2C%22text%22%3A%22UPDATED%22%7D%2C%7B%22x%22%3A46.550095%2C%22y%22%3A605.25244%2C%22width%22%3A161.340575%2C%22height%22%3A17.983259999999973%2C%22text%22%3A%22%E5%85%B3%E4%BA%8ECHROME%E5%BA%94%E7%94%A8%E5%95%86%E5%BA%97%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23faf9f8%22%2C%22id%22%3A%22u5fb66667%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ua91bcaa6\" id=\"ua91bcaa6\"><span data-lake-id=\"u75e6b0cb\" id=\"u75e6b0cb\">直接进入后点击下载【安装】，即可在浏览器上安装成功此插件。</span></p><p data-lake-id=\"u3779ad5b\" id=\"u3779ad5b\"><span data-lake-id=\"u159c1848\" id=\"u159c1848\">直接打开插件即可。</span></p><p data-lake-id=\"u9e3b66de\" id=\"u9e3b66de\"><span data-lake-id=\"u3f9221ee\" id=\"u3f9221ee\">​</span><br></p><h1 data-lake-id=\"sMlq7\" id=\"sMlq7\"><span data-lake-id=\"u275b1b03\" id=\"u275b1b03\">6、php系统安装ES</span></h1><blockquote data-lake-id=\"u86ff74bd\" id=\"u86ff74bd\"><p data-lake-id=\"uf14dac87\" id=\"uf14dac87\"><span data-lake-id=\"u88697771\" id=\"u88697771\">默认程序使用thinkphp6.0，安装方式使用 composer</span></p></blockquote><p data-lake-id=\"uc8d29e24\" id=\"uc8d29e24\"><span data-lake-id=\"u75693655\" id=\"u75693655\">​</span><br></p><p data-lake-id=\"u5490c37c\" id=\"u5490c37c\"><span data-lake-id=\"u420d0f01\" id=\"u420d0f01\">在命令行执行：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20elasticsearch%2Felasticsearch%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Oomv8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u2f05b0c7\" id=\"u2f05b0c7\"><span data-lake-id=\"u6916abd4\" id=\"u6916abd4\">正确等待响应后会安装成功。</span></p><p data-lake-id=\"u9d675726\" id=\"u9d675726\"><span data-lake-id=\"uf3af597c\" id=\"uf3af597c\">​</span><br></p><h1 data-lake-id=\"h6njl\" id=\"h6njl\"><span data-lake-id=\"uc85307f3\" id=\"uc85307f3\">7、php-ES的使用</span></h1><p data-lake-id=\"uadf50d93\" id=\"uadf50d93\"><span data-lake-id=\"uf4c5bad3\" id=\"uf4c5bad3\">引入类库：</span></p><blockquote data-lake-id=\"u1b574fa3\" id=\"u1b574fa3\"><p data-lake-id=\"u203603e5\" id=\"u203603e5\"><span data-lake-id=\"u23c604cf\" id=\"u23c604cf\">注意，这里和7.x及之前的版本不同。</span></p></blockquote><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20Elastic%5C%5CElasticsearch%5C%5CClientBuilder%3B%5Cn%5Cn%24client%20%3D%20ClientBuilder%3A%3Acreate()-%3EsetHosts(%5B'127.0.0.1%3A9200'%5D)-%3Ebuild()%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22DLLym%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua33e4c32\" id=\"ua33e4c32\"><span data-lake-id=\"u6e3a231d\" id=\"u6e3a231d\">​</span><br></p><p data-lake-id=\"u73b14f09\" id=\"u73b14f09\"><strong><span data-lake-id=\"uf2d89c7d\" id=\"uf2d89c7d\" class=\"lake-fontsize-12\" style=\"color: rgb(64, 64, 64)\">完整类库：</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20User%3A%20%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20*%20Date%3A%202022-09-16%5Cn%20*%20Time%3A%2011%3A05%3A20%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20app%5C%5Cportal%5C%5Cservice%3B%5Cn%5Cnuse%20Elastic%5C%5CElasticsearch%5C%5CClientBuilder%3B%5Cn%5Cnclass%20ElasticsearchService%5Cn%7B%5Cn%5Cn%20%20%20%20protected%20%24client%3B%5Cn%5Cn%20%20%20%20protected%20%24index_name%3B%5Cn%5Cn%20%20%20%20protected%20%24type%3B%5Cn%5Cn%20%20%20%20%2F%2F%20%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%5Cn%20%20%20%20public%20function%20__construct(%24indexName%20%3D%20'article_index')%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24this-%3Eindex_name%20%3D%20%24indexName%3B%5Cn%20%20%20%20%20%20%20%20%24params%20%20%20%20%20%20%20%20%20%20%20%3D%20%5B'127.0.0.1%3A9200'%5D%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3Eclient%20%20%20%20%20%3D%20ClientBuilder%3A%3Acreate()-%3EsetHosts(%24params)-%3Ebuild()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%88%A4%E6%96%AD%E7%B4%A2%E5%BC%95%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cn%20%20%20%20%20*%20%40return%20bool%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20exist_index()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24params%20%3D%20%5B'index'%20%3D%3E%20%24this-%3Eindex_name%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24this-%3Eclient-%3Eindices()-%3Eexists(%24params)-%3EasBool()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%5Cn%20%20%20%20%20*%20%E5%90%8C%E4%B8%80%E7%B4%A2%E5%BC%95%E5%8F%AA%E8%83%BD%E5%88%9B%E5%BB%BA%E4%B8%80%E6%AC%A1%5Cn%20%20%20%20%20*%20%40return%20bool%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20create_index()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24res%20%3D%20%24this-%3Eexist_index()%3B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20%24res)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24param%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'index'%20%3D%3E%20%24this-%3Eindex_name%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'body'%20%20%3D%3E%20%5B%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eclient-%3Eindices()-%3Ecreate(%24param)-%3EasBool()%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E8%8E%B7%E5%8F%96%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84%5Cn%20%20%20%20%20*%20%40return%20array%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20get_index()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24params%20%3D%20%5B'index'%20%3D%3E%20%24this-%3Eindex_name%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eclient-%3Eindices()-%3Eget(%24params)-%3EasArray()%3B%5Cn%20%20%20%20%20%20%20%20%7D%20catch%20(%5C%5CException%20%24e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%5B%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%5Cn%20%20%20%20%20*%20%40return%20array%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20delete_index()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24params%20%3D%20%5B'index'%20%3D%3E%20%24this-%3Eindex_name%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eclient-%3Eindices()-%3Edelete(%24params)-%3EasBool()%3B%5Cn%20%20%20%20%20%20%20%20%7D%20catch%20(%5C%5CException%20%24e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F*%5Cn%20%20%20%20%20*%20%E5%B0%86%E5%86%85%E5%AE%B9%E5%8A%A0%E5%85%A5%E6%96%87%E6%A1%A3%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20add_article(%24data)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24params%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'body'%20%20%3D%3E%20%24data%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'id'%20%20%20%20%3D%3E%20'article_'.%24data%5B'id'%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'index'%20%3D%3E%20%24this-%3Eindex_name%2C%5Cn%20%20%20%20%20%20%20%20%5D%3B%5Cn%20%20%20%20%20%20%20%20%24this-%3Eclient-%3Eindex(%24params)-%3EasArray()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20delete_article(%24id)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24params%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'index'%20%3D%3E%20%24this-%3Eindex_name%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'id'%20%20%20%20%3D%3E%20%24id%5Cn%20%20%20%20%20%20%20%20%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20%24this-%3Eclient-%3Edelete(%24params)-%3EasBool()%3B%5Cn%20%20%20%20%20%20%20%20%7D%20catch%20(%5C%5CException%20%24e)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20find_article()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24params%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'index'%20%3D%3E%20'articles_index'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'body'%20%20%3D%3E%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'query'%20%20%20%20%20%3D%3E%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'match'%20%3D%3E%20%5B'post_content'%20%3D%3E%20'%E5%86%85%E5%AE%B9'%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'size'%20%20%20%20%20%20%3D%3E%2010%2C%20%20%2F%2F%E6%AF%8F%E9%A1%B5%E6%95%B0%E9%87%8F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'from'%20%20%20%20%20%20%3D%3E%200%2C%20%20%20%20%2F%2F%E4%BB%8E%E7%AC%AC%E5%87%A0%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%BC%80%E5%A7%8B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'highlight'%20%3D%3E%20%5B%20%20%2F%2F%E9%AB%98%E4%BA%AE%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'fields'%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%3E%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'post_content'%20%3D%3E%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22pre_tags%5C%22%20%20%3D%3E%20%5C%22%3Cb%20style%3D'color%3Ared'%3E%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22post_tags%5C%22%20%3D%3E%20%5C%22%3C%2Fb%3E%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22boundary_scanner_locale%5C%22%20%3D%3E%20%5C%22zh_CN%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'encoder'%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%3E%20'HTML'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'number_of_fragments'%20%20%20%20%20%3D%3E%200%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%5D%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24this-%3Eclient-%3Esearch(%24params)-%3EasArray()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22SsBnQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u3f045ed4\" id=\"u3f045ed4\"><strong><span data-lake-id=\"u86983a07\" id=\"u86983a07\" class=\"lake-fontsize-12\" style=\"color: rgb(64, 64, 64)\">​</span></strong><br></p><h1 data-lake-id=\"kEXya\" id=\"kEXya\"><span data-lake-id=\"ubd6b0dae\" id=\"ubd6b0dae\" style=\"color: rgb(64, 64, 64)\">补充：</span></h1><h2 data-lake-id=\"LB9gQ\" id=\"LB9gQ\"><span data-lake-id=\"u62a6bf85\" id=\"u62a6bf85\" style=\"color: rgb(79, 79, 79)\">高亮</span></h2><p data-lake-id=\"u170dbbb5\" id=\"u170dbbb5\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1663314887045-ef45f493-be27-4510-a3f0-f66cf20e896a.png%22%2C%22taskId%22%3A%22ub5fad4ff-be34-457f-9c19-e3bbf826f41%22%2C%22clientId%22%3A%22ueeadb8ff-7c2c-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1402.8679750143078%2C%22height%22%3A791%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A34491%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1549%2C%22originHeight%22%3A873%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%5B%5C%22HITS%5D%5D%20ARRAY(3)%20%5B%5C%22TOTAL%5C%22%5D%3EARRAY(2)%20%5BVALUE%20%5D%3E%20INT(2)%20%5B'RELATION%5D%5D%3E%20STRING(2)%20EQ%20%5B'NAX_SCORE%5C%22%5D%20FLOAT%20(0.6929326)%20%5B%5C%22HITS%5DARRARRAY(2)(%20%5B0%5D%3EARRAY(5)%20%5B'%20INDEX%5C%22%5D%20STRING(14)%20%5C%22ARTICLES%20INDEX%5C%22%20%5BID%5D%5D%3ESTRING(9)%2CARTICLE_1%20%2CSCOXE%20%5D%20FLOAT(0.6929326)%20-SOURCE%20%5D%20ARXAY(8)%5B8)%5B%20%5B'ID%5C%22%5D%3ESTRING(1)%20%5C%221%5C%22%20%5B'CATEGOXIES%5C%22%5D%3ESTRING(1)%5C%221)%5C%221%5C%22%20%5B%5C%22POST_TITLE%5C%22%5DSTRING(18)%5C%22%E8%BF%99%E6%98%AF%E6%B5%8B%E8%AF%95%E6%A0%87%E9%A2%98%5C%22%20%5B'POST_KEYVORDS%5C%22%5D%20STRING(16)%E6%A0%87%E9%A2%98%2C%E5%85%B3%E9%94%AE%E8%AF%8D%5C%22%20POST_SOURCE%5D%20STRING(21)%5C%22%E8%BF%99%E6%98%AF%E6%B5%8B%E8%AF%95%E7%9A%84%E6%8F%8F%E8%BF%B0%5C%22%20%5B%5C%22THUNBNAIL'%5D%3ESTRING(0)%208)%5C%22%261T%3APAGT%3A%E8%BF%99%E9%87%8C%E6%98%AF%E6%AD%A3%E6%96%87%E5%86%85%E5%AE%B9%3B%E4%BD%A0%E7%9F%A5%E9%81%93%E6%AD%A3%E6%96%87%E5%86%85%E5%AE%B9%E6%98%AF%E5%95%A5%E5%90%97%3F%E4%BD%A0%E4%B8%BA%E5%95%A5%E4%B8%8D%E7%9F%A5%E9%81%93%E5%91%A2!!!!!!%20(POST_CONTENT%5C%22%5D-%3ESTRING(108)%20PUB1ISHED_TINE%5C%22%5DSTXING(16)'2022-09-15%2015%2015%3A48*%20HIGHLIGHT%20J%20ARRAY(1)%20%5B'POST_CONTENT%5C%22%5D%3EAXRAY(1)%5B%20%5BO%5D%3E%20STRING(208)%20%5B1%5D%3EARRAY(6)%5B%20%5BINDEX%20%20%5D%20STXING(14)%20AXTICLES_INDEX%20_ID%5C%22%5D%3ESTXING(9)%20%5C%22ARTICLE_2%20_SCORE%5D%3E%20FLEAT(0.26537913)%20_IGNORED%5C%22%5D%3EARRAY(1)%5B%20%5BO%5D%3E%20STRING(20)%20%2CPOST_CONTENT%20.KEYWORD%5C%22%20_SOURCE%20%5D%20ARRAY(8)%20%5BRID%5C%22%5DSTRING(1)%5C%222*%20%5BCATEGORIES%5C%22%5D%3ESTRING(1)%5C%221)%5C%221*%20'POST_TITLE%5C%22%5D%20STRING(45)'%E5%B9%B2%E8%B4%A7%20ELASTICSEARCH%208.X%20%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97%5C%22%20%5BPOST%20KEYVORDS%20)%3ESTRING(0)%20%5BPOST_SOURCE%20%5D%20STRING(0)%202)%20%5C%22PORTAL%2F20220916%2F1675243C6C604EF3D73BE67F154FEFED.%20JPG%5C%22%20THUNBNAIL%20%5D%3E%20STRING(52)%20PO%20%5BPOST_CONTENT%20%5D%20ST%202022-09-16%2014%3A02%20%5BPUBLISHED_TINE%20%5D%20STRING(16)%20%5B'HIGHLIGHT%5C%22%5D%3E%20ARRAY(1)%20LPOST_CONTENT%5D%3EAZRAY(1)%5B%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A22.3864%2C%22y%22%3A15.027421%2C%22width%22%3A149.78157%2C%22height%22%3A17.130141%2C%22text%22%3A%22%5B%5C%22HITS%5D%5D%20ARRAY(3)%22%7D%2C%7B%22x%22%3A33.905865%2C%22y%22%3A31.292212%2C%22width%22%3A150.226325%2C%22height%22%3A14.249361%2C%22text%22%3A%22%5B%5C%22TOTAL%5C%22%5D%3EARRAY(2)%22%7D%2C%7B%22x%22%3A54.37131%2C%22y%22%3A48.643898%2C%22width%22%3A132.44129%2C%22height%22%3A13.662621999999999%2C%22text%22%3A%22%5BVALUE%20%5D%3E%20INT(2)%22%7D%2C%7B%22x%22%3A59.044548%2C%22y%22%3A64.73365%2C%22width%22%3A200.052622%2C%22height%22%3A14.219475000000003%2C%22text%22%3A%22%5B'RELATION%5D%5D%3E%20STRING(2)%20EQ%22%7D%2C%7B%22x%22%3A37.25602%2C%22y%22%3A93.63899%2C%22width%22%3A230.34331%2C%22height%22%3A18.778955999999994%2C%22text%22%3A%22%5B'NAX_SCORE%5C%22%5D%20FLOAT%20(0.6929326)%22%7D%2C%7B%22x%22%3A41.239502%2C%22y%22%3A111.191605%2C%22width%22%3A151.923478%2C%22height%22%3A14.877645000000001%2C%22text%22%3A%22%5B%5C%22HITS%5DARRARRAY(2)(%22%7D%2C%7B%22x%22%3A52.95565%2C%22y%22%3A127.3517%2C%22width%22%3A117.47611%2C%22height%22%3A14.30725000000001%2C%22text%22%3A%22%5B0%5D%3EARRAY(5)%22%7D%2C%7B%22x%22%3A67.48265%2C%22y%22%3A143.44907%2C%22width%22%3A282.82417%2C%22height%22%3A13.38597999999999%2C%22text%22%3A%22%5B'%20INDEX%5C%22%5D%20STRING(14)%20%5C%22ARTICLES%20INDEX%5C%22%22%7D%2C%7B%22x%22%3A76.23864%2C%22y%22%3A159.534%2C%22width%22%3A228.58439%2C%22height%22%3A19.925430000000006%2C%22text%22%3A%22%5BID%5D%5D%3ESTRING(9)%2CARTICLE_1%22%7D%2C%7B%22x%22%3A80.482124%2C%22y%22%3A176.35637%2C%22width%22%3A197.41429599999998%2C%22height%22%3A14.18764999999999%2C%22text%22%3A%22%2CSCOXE%20%5D%20FLOAT(0.6929326)%22%7D%2C%7B%22x%22%3A78.05003%2C%22y%22%3A192.73044%2C%22width%22%3A165.73043%2C%22height%22%3A15.28316000000001%2C%22text%22%3A%22-SOURCE%20%5D%20ARXAY(8)%5B8)%5B%22%7D%2C%7B%22x%22%3A81.706635%2C%22y%22%3A206.65788%2C%22width%22%3A162.249495%2C%22height%22%3A16.253209999999996%2C%22text%22%3A%22%5B'ID%5C%22%5D%3ESTRING(1)%20%5C%221%5C%22%22%7D%2C%7B%22x%22%3A87.7546%2C%22y%22%3A221.72076%2C%22width%22%3A224.46854000000002%2C%22height%22%3A17.628959999999978%2C%22text%22%3A%22%5B'CATEGOXIES%5C%22%5D%3ESTRING(1)%5C%221)%5C%221%5C%22%22%7D%2C%7B%22x%22%3A88.80125%2C%22y%22%3A237.49901%2C%22width%22%3A291.66701%2C%22height%22%3A17.62629000000001%2C%22text%22%3A%22%5B%5C%22POST_TITLE%5C%22%5DSTRING(18)%5C%22%E8%BF%99%E6%98%AF%E6%B5%8B%E8%AF%95%E6%A0%87%E9%A2%98%5C%22%22%7D%2C%7B%22x%22%3A86.66096%2C%22y%22%3A253.46738%2C%22width%22%3A309.22231%2C%22height%22%3A18.16901999999999%2C%22text%22%3A%22%5B'POST_KEYVORDS%5C%22%5D%20STRING(16)%E6%A0%87%E9%A2%98%2C%E5%85%B3%E9%94%AE%E8%AF%8D%5C%22%22%7D%2C%7B%22x%22%3A95.22518%2C%22y%22%3A270.4129%2C%22width%22%3A306.43479%2C%22height%22%3A20.165650000000028%2C%22text%22%3A%22POST_SOURCE%5D%20STRING(21)%5C%22%E8%BF%99%E6%98%AF%E6%B5%8B%E8%AF%95%E7%9A%84%E6%8F%8F%E8%BF%B0%5C%22%22%7D%2C%7B%22x%22%3A89.64563%2C%22y%22%3A287.97272%2C%22width%22%3A173.98837000000003%2C%22height%22%3A13.905239999999992%2C%22text%22%3A%22%5B%5C%22THUNBNAIL'%5D%3ESTRING(0)%22%7D%2C%7B%22x%22%3A290.4801%2C%22y%22%3A300.31403%2C%22width%22%3A579.38886%2C%22height%22%3A21.74608999999998%2C%22text%22%3A%228)%5C%22%261T%3APAGT%3A%E8%BF%99%E9%87%8C%E6%98%AF%E6%AD%A3%E6%96%87%E5%86%85%E5%AE%B9%3B%E4%BD%A0%E7%9F%A5%E9%81%93%E6%AD%A3%E6%96%87%E5%86%85%E5%AE%B9%E6%98%AF%E5%95%A5%E5%90%97%3F%E4%BD%A0%E4%B8%BA%E5%95%A5%E4%B8%8D%E7%9F%A5%E9%81%93%E5%91%A2!!!!!!%22%7D%2C%7B%22x%22%3A88.42864%2C%22y%22%3A305.62537%2C%22width%22%3A202.02399999999997%2C%22height%22%3A14.04937000000001%2C%22text%22%3A%22(POST_CONTENT%5C%22%5D-%3ESTRING(108)%22%7D%2C%7B%22x%22%3A89.26621%2C%22y%22%3A319.87918%2C%22width%22%3A349.54135%2C%22height%22%3A18.40361999999999%2C%22text%22%3A%22PUB1ISHED_TINE%5C%22%5DSTXING(16)'2022-09-15%2015%2015%3A48*%22%7D%2C%7B%22x%22%3A72.60732%2C%22y%22%3A354.27234%2C%22width%22%3A78.14049999999999%2C%22height%22%3A11.964690000000019%2C%22text%22%3A%22HIGHLIGHT%20J%22%7D%2C%7B%22x%22%3A181.38066%2C%22y%22%3A353.42215%2C%22width%22%3A70.44377%2C%22height%22%3A14.578669999999988%2C%22text%22%3A%22ARRAY(1)%22%7D%2C%7B%22x%22%3A87.0914%2C%22y%22%3A365.22952%2C%22width%22%3A198.33599999999998%2C%22height%22%3A19.804050000000018%2C%22text%22%3A%22%5B'POST_CONTENT%5C%22%5D%3EAXRAY(1)%5B%22%7D%2C%7B%22x%22%3A94.75638%2C%22y%22%3A383.5256%2C%22width%22%3A123.27016000000002%2C%22height%22%3A15.574040000000025%2C%22text%22%3A%22%5BO%5D%3E%20STRING(208)%22%7D%2C%7B%22x%22%3A52.40926%2C%22y%22%3A445.3356%2C%22width%22%3A122.19411999999998%2C%22height%22%3A16.139380000000017%2C%22text%22%3A%22%5B1%5D%3EARRAY(6)%5B%22%7D%2C%7B%22x%22%3A69.64551%2C%22y%22%3A463.6493%2C%22width%22%3A278.76269%2C%22height%22%3A15.153099999999995%2C%22text%22%3A%22%5BINDEX%20%20%5D%20STXING(14)%20AXTICLES_INDEX%22%7D%2C%7B%22x%22%3A81.04738%2C%22y%22%3A477.35156%2C%22width%22%3A215.81366999999997%2C%22height%22%3A18.836979999999983%2C%22text%22%3A%22_ID%5C%22%5D%3ESTXING(9)%20%5C%22ARTICLE_2%22%7D%2C%7B%22x%22%3A82.88098%2C%22y%22%3A495.9343%2C%22width%22%3A196.91254%2C%22height%22%3A15.01925%2C%22text%22%3A%22_SCORE%5D%3E%20FLEAT(0.26537913)%22%7D%2C%7B%22x%22%3A78.48826%2C%22y%22%3A510.67355%2C%22width%22%3A223.17547%2C%22height%22%3A19.113320000000044%2C%22text%22%3A%22_IGNORED%5C%22%5D%3EARRAY(1)%5B%22%7D%2C%7B%22x%22%3A81.33313%2C%22y%22%3A527.3523%2C%22width%22%3A276.91071%2C%22height%22%3A14.879099999999994%2C%22text%22%3A%22%5BO%5D%3E%20STRING(20)%20%2CPOST_CONTENT%20.KEYWORD%5C%22%22%7D%2C%7B%22x%22%3A81.656746%2C%22y%22%3A559.93085%2C%22width%22%3A155.760154%2C%22height%22%3A17.453610000000026%2C%22text%22%3A%22_SOURCE%20%5D%20ARRAY(8)%22%7D%2C%7B%22x%22%3A85.2834%2C%22y%22%3A573.6317%2C%22width%22%3A154.18125%2C%22height%22%3A16.067339999999945%2C%22text%22%3A%22%5BRID%5C%22%5DSTRING(1)%5C%222*%22%7D%2C%7B%22x%22%3A91.4462%2C%22y%22%3A587.61993%2C%22width%22%3A206.27880000000002%2C%22height%22%3A18.509570000000053%2C%22text%22%3A%22%5BCATEGORIES%5C%22%5D%3ESTRING(1)%5C%221)%5C%221*%22%7D%2C%7B%22x%22%3A93.01923%2C%22y%22%3A604.99036%2C%22width%22%3A461.35864000000004%2C%22height%22%3A19.655740000000037%2C%22text%22%3A%22'POST_TITLE%5C%22%5D%20STRING(45)'%E5%B9%B2%E8%B4%A7%20ELASTICSEARCH%208.X%20%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97%5C%22%22%7D%2C%7B%22x%22%3A87.84697%2C%22y%22%3A623.82996%2C%22width%22%3A201.40312999999998%2C%22height%22%3A20.18993999999998%2C%22text%22%3A%22%5BPOST%20KEYVORDS%20)%3ESTRING(0)%22%7D%2C%7B%22x%22%3A88.803474%2C%22y%22%3A640.5689%2C%22width%22%3A189.049466%2C%22height%22%3A16.11505999999997%2C%22text%22%3A%22%5BPOST_SOURCE%20%5D%20STRING(0)%22%7D%2C%7B%22x%22%3A262.82404%2C%22y%22%3A652.5668%2C%22width%22%3A415.1936%2C%22height%22%3A17.874100000000112%2C%22text%22%3A%222)%20%5C%22PORTAL%2F20220916%2F1675243C6C604EF3D73BE67F154FEFED.%20JPG%5C%22%22%7D%2C%7B%22x%22%3A90.423416%2C%22y%22%3A657.13043%2C%22width%22%3A199.031484%2C%22height%22%3A14.024569999999926%2C%22text%22%3A%22THUNBNAIL%20%5D%3E%20STRING(52)%20PO%22%7D%2C%7B%22x%22%3A87.77311%2C%22y%22%3A672.34973%2C%22width%22%3A141.00536%2C%22height%22%3A15.90346999999997%2C%22text%22%3A%22%5BPOST_CONTENT%20%5D%20ST%22%7D%2C%7B%22x%22%3A317.8906%2C%22y%22%3A688.8735%2C%22width%22%3A116.21773999999999%2C%22height%22%3A13.18814999999995%2C%22text%22%3A%222022-09-16%2014%3A02%22%7D%2C%7B%22x%22%3A83.89507%2C%22y%22%3A689.14996%2C%22width%22%3A119.8435%2C%22height%22%3A13.614869999999996%2C%22text%22%3A%22%5BPUBLISHED_TINE%20%5D%22%7D%2C%7B%22x%22%3A234.18044%2C%22y%22%3A689.16943%2C%22width%22%3A67.02658999999997%2C%22height%22%3A13.983830000000012%2C%22text%22%3A%22STRING(16)%22%7D%2C%7B%22x%22%3A67.71511%2C%22y%22%3A719.99603%2C%22width%22%3A174.47894000000002%2C%22height%22%3A16.630069999999932%2C%22text%22%3A%22%5B'HIGHLIGHT%5C%22%5D%3E%20ARRAY(1)%22%7D%2C%7B%22x%22%3A78.16818%2C%22y%22%3A736.20605%2C%22width%22%3A213.42905000000002%2C%22height%22%3A18.41605000000004%2C%22text%22%3A%22LPOST_CONTENT%5D%3EAZRAY(1)%5B%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f9f8f8%22%2C%22id%22%3A%22u5ec28e31%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h3 data-lake-id=\"bvXPC\" id=\"bvXPC\"><span data-lake-id=\"u1ad86a6f\" id=\"u1ad86a6f\" style=\"color: rgb(79, 79, 79)\">高亮参数</span></h3><table data-lake-id=\"aRA9k\" id=\"aRA9k\" margin=\"true\" class=\"lake-table\" style=\"width: 739px\"><colgroup><col width=\"282\"><col width=\"457\"></colgroup><tbody><tr data-lake-id=\"uaa810be0\" id=\"uaa810be0\"><td data-lake-id=\"u778de4e5\" id=\"u778de4e5\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"u2f8c68b6\" id=\"u2f8c68b6\" style=\"text-align: center\"><strong><span data-lake-id=\"uffec5009\" id=\"uffec5009\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">参数</span></strong></p></td><td data-lake-id=\"u72b2edfe\" id=\"u72b2edfe\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"udb4e8f29\" id=\"udb4e8f29\" style=\"text-align: center\"><strong><span data-lake-id=\"u708a1fd4\" id=\"u708a1fd4\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">说明</span></strong></p></td></tr><tr data-lake-id=\"ub092611f\" id=\"ub092611f\"><td data-lake-id=\"u6c9124ca\" id=\"u6c9124ca\"><p data-lake-id=\"ue8ec0a88\" id=\"ue8ec0a88\" style=\"text-align: center\"><span data-lake-id=\"u84bc24b2\" id=\"u84bc24b2\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">boundary_chars</span></p></td><td data-lake-id=\"u5d746821\" id=\"u5d746821\"><p data-lake-id=\"u69fe8547\" id=\"u69fe8547\" style=\"text-align: center\"><span data-lake-id=\"u4e6d4914\" id=\"u4e6d4914\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包含每个边界字符的字符串。默认为,! ?\\ \\ n。</span></p></td></tr><tr data-lake-id=\"u9ef46680\" id=\"u9ef46680\"><td data-lake-id=\"u3f648ae5\" id=\"u3f648ae5\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ueee304fe\" id=\"ueee304fe\" style=\"text-align: center\"><span data-lake-id=\"ucd70945e\" id=\"ucd70945e\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">boundary_max_scan</span></p></td><td data-lake-id=\"uf7a3a413\" id=\"uf7a3a413\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uafb8c1be\" id=\"uafb8c1be\" style=\"text-align: center\"><span data-lake-id=\"ua2473cf8\" id=\"ua2473cf8\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">扫描边界字符的距离。默认为20。</span></p></td></tr><tr data-lake-id=\"u6c5ac8d1\" id=\"u6c5ac8d1\"><td data-lake-id=\"ufc98323b\" id=\"ufc98323b\"><p data-lake-id=\"ud6b9af2a\" id=\"ud6b9af2a\" style=\"text-align: center\"><span data-lake-id=\"u34c3a870\" id=\"u34c3a870\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">boundary_scanner</span></p></td><td data-lake-id=\"ufadbff0e\" id=\"ufadbff0e\"><p data-lake-id=\"uf9240cfa\" id=\"uf9240cfa\" style=\"text-align: center\"><span data-lake-id=\"u12fe5322\" id=\"u12fe5322\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。</span></p></td></tr><tr data-lake-id=\"uc69aceac\" id=\"uc69aceac\"><td data-lake-id=\"u77880cb8\" id=\"u77880cb8\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uea529ceb\" id=\"uea529ceb\" style=\"text-align: center\"><span data-lake-id=\"uada2ae09\" id=\"uada2ae09\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">boundary_scanner_locale</span></p></td><td data-lake-id=\"u6c1740a4\" id=\"u6c1740a4\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u142b8246\" id=\"u142b8246\" style=\"text-align: center\"><span data-lake-id=\"ued180cc5\" id=\"ued180cc5\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">用来设置搜索和确定单词边界的本地化设置，此参数使用语言标记的形式（“en-US”, “fr-FR”, “ja-JP”）</span></p></td></tr><tr data-lake-id=\"u3507c58f\" id=\"u3507c58f\"><td data-lake-id=\"u9d5ec8fc\" id=\"u9d5ec8fc\"><p data-lake-id=\"u03a757b3\" id=\"u03a757b3\" style=\"text-align: center\"><span data-lake-id=\"u34fffe18\" id=\"u34fffe18\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">encoder</span></p></td><td data-lake-id=\"u415f9178\" id=\"u415f9178\"><p data-lake-id=\"u6cc82edc\" id=\"u6cc82edc\" style=\"text-align: center\"><span data-lake-id=\"u3b0f4cbf\" id=\"u3b0f4cbf\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">表示代码段应该是HTML编码的:默认(无编码)还是HTML (HTML-转义代码段文本，然后插入高亮标记)</span></p></td></tr><tr data-lake-id=\"u0db34d14\" id=\"u0db34d14\"><td data-lake-id=\"uc990d0ab\" id=\"uc990d0ab\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u1563dd72\" id=\"u1563dd72\" style=\"text-align: center\"><span data-lake-id=\"ue88e2dc6\" id=\"ue88e2dc6\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">fields</span></p></td><td data-lake-id=\"ud12349bf\" id=\"ud12349bf\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ue1893b0f\" id=\"ue1893b0f\" style=\"text-align: center\"><span data-lake-id=\"u800b77c6\" id=\"u800b77c6\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">指定检索高亮显示的字段。可以使用通配符来指定字段。例如，可以指定comment_*来获取以comment_开头的所有文本和关键字字段的高亮显示。</span></p></td></tr><tr data-lake-id=\"u6134cc44\" id=\"u6134cc44\"><td data-lake-id=\"u821c673c\" id=\"u821c673c\"><p data-lake-id=\"u07e40bb3\" id=\"u07e40bb3\" style=\"text-align: center\"><span data-lake-id=\"u2c4785fa\" id=\"u2c4785fa\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">force_source</span></p></td><td data-lake-id=\"u779788ec\" id=\"u779788ec\"><p data-lake-id=\"uea24abc0\" id=\"uea24abc0\" style=\"text-align: center\"><span data-lake-id=\"u07bdab82\" id=\"u07bdab82\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">根据源高亮显示。默认值为false。</span></p></td></tr><tr data-lake-id=\"u71cb699c\" id=\"u71cb699c\"><td data-lake-id=\"u01e7e24e\" id=\"u01e7e24e\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u6755639c\" id=\"u6755639c\" style=\"text-align: center\"><span data-lake-id=\"ua9ed0d8a\" id=\"ua9ed0d8a\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">fragmenter</span></p></td><td data-lake-id=\"u59e9c7f5\" id=\"u59e9c7f5\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u79cef3d9\" id=\"u79cef3d9\" style=\"text-align: center\"><span data-lake-id=\"uf1557ac5\" id=\"uf1557ac5\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">指定文本应如何在突出显示片段中拆分:支持参数simple或者span。</span></p></td></tr><tr data-lake-id=\"ub88266fa\" id=\"ub88266fa\"><td data-lake-id=\"u75e57c60\" id=\"u75e57c60\"><p data-lake-id=\"u8a013845\" id=\"u8a013845\" style=\"text-align: center\"><span data-lake-id=\"u6537f73b\" id=\"u6537f73b\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">fragment_offset</span></p></td><td data-lake-id=\"u1788d5a9\" id=\"u1788d5a9\"><p data-lake-id=\"u3f47df66\" id=\"u3f47df66\" style=\"text-align: center\"><span data-lake-id=\"uca873981\" id=\"uca873981\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">控制要开始突出显示的空白。仅在使用fvh highlighter时有效。</span></p></td></tr><tr data-lake-id=\"u305c8ef0\" id=\"u305c8ef0\"><td data-lake-id=\"u27c6ba8a\" id=\"u27c6ba8a\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u0f827605\" id=\"u0f827605\" style=\"text-align: center\"><span data-lake-id=\"uedc3be1c\" id=\"uedc3be1c\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">fragment_size</span></p></td><td data-lake-id=\"ua338265d\" id=\"ua338265d\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ue53509f9\" id=\"ue53509f9\" style=\"text-align: center\"><span data-lake-id=\"u696e949a\" id=\"u696e949a\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">字符中突出显示的片段的大小。默认为100。</span></p></td></tr><tr data-lake-id=\"u1ed98377\" id=\"u1ed98377\"><td data-lake-id=\"u45c888a9\" id=\"u45c888a9\"><p data-lake-id=\"ubc500c55\" id=\"ubc500c55\" style=\"text-align: center\"><span data-lake-id=\"uacf5c4b6\" id=\"uacf5c4b6\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">highlight_query</span></p></td><td data-lake-id=\"uad4530c1\" id=\"uad4530c1\"><p data-lake-id=\"u7159902a\" id=\"u7159902a\" style=\"text-align: center\"><span data-lake-id=\"u8cde1cbf\" id=\"u8cde1cbf\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">突出显示搜索查询之外的其他查询的匹配项。这在使用重打分查询时特别有用，因为默认情况下高亮显示不会考虑这些问题。</span></p></td></tr><tr data-lake-id=\"ua10d4d3f\" id=\"ua10d4d3f\"><td data-lake-id=\"u60db4dfa\" id=\"u60db4dfa\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u940a5a5b\" id=\"u940a5a5b\" style=\"text-align: center\"><span data-lake-id=\"u7db2868a\" id=\"u7db2868a\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">matched_fields</span></p></td><td data-lake-id=\"u6fc82905\" id=\"u6fc82905\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u5e6af03c\" id=\"u5e6af03c\" style=\"text-align: center\"><span data-lake-id=\"ub8fbb8b4\" id=\"ub8fbb8b4\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">组合多个匹配结果以突出显示单个字段，对于使用不同方式分析同一字符串的多字段。所有的matched_fields必须将term_vector设置为with_positions_offsets，但是只有将匹配项组合到的字段才会被加载，因此只有将store设置为yes才能使该字段受益。只适用于fvh highlighter。</span></p></td></tr><tr data-lake-id=\"u58d159ce\" id=\"u58d159ce\"><td data-lake-id=\"ue19d60bc\" id=\"ue19d60bc\"><p data-lake-id=\"ub2131071\" id=\"ub2131071\" style=\"text-align: center\"><span data-lake-id=\"u2fe61f0e\" id=\"u2fe61f0e\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">no_match_size</span></p></td><td data-lake-id=\"u90e0f042\" id=\"u90e0f042\"><p data-lake-id=\"u6d37f4d2\" id=\"u6d37f4d2\" style=\"text-align: center\"><span data-lake-id=\"ufae218ed\" id=\"ufae218ed\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">如果没有要突出显示的匹配片段，则希望从字段开头返回的文本量。默认为0(不返回任何内容)。</span></p></td></tr><tr data-lake-id=\"u983cd161\" id=\"u983cd161\"><td data-lake-id=\"u0a5fdf13\" id=\"u0a5fdf13\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u70654e65\" id=\"u70654e65\" style=\"text-align: center\"><span data-lake-id=\"u0440494e\" id=\"u0440494e\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">number_of_fragments</span></p></td><td data-lake-id=\"uc4990003\" id=\"uc4990003\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u2563fe6e\" id=\"u2563fe6e\" style=\"text-align: center\"><span data-lake-id=\"ufc53f085\" id=\"ufc53f085\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">返回的片段的最大数量。如果片段的数量设置为0，则不会返回任何片段。相反，突出显示并返回整个字段内容。当需要突出显示短文本(如标题或地址)，但不需要分段时，使用此配置非常方便。如果number_of_fragments为0，则忽略fragment_size。默认为5。</span></p></td></tr><tr data-lake-id=\"u3e03d796\" id=\"u3e03d796\"><td data-lake-id=\"u1feaecf6\" id=\"u1feaecf6\"><p data-lake-id=\"u0bd28839\" id=\"u0bd28839\" style=\"text-align: center\"><span data-lake-id=\"u99b6409b\" id=\"u99b6409b\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">order</span></p></td><td data-lake-id=\"u83421b45\" id=\"u83421b45\"><p data-lake-id=\"u3e9a0eab\" id=\"u3e9a0eab\" style=\"text-align: center\"><span data-lake-id=\"u568102ca\" id=\"u568102ca\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">设置为score时，按分数对突出显示的片段进行排序。默认情况下，片段将按照它们在字段中出现的顺序输出(order:none)。将此选项设置为score将首先输出最相关的片段。每个高亮应用自己的逻辑来计算相关性得分。</span></p></td></tr><tr data-lake-id=\"u226a6a1e\" id=\"u226a6a1e\"><td data-lake-id=\"u16d4cea4\" id=\"u16d4cea4\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uc8b6391e\" id=\"uc8b6391e\" style=\"text-align: center\"><span data-lake-id=\"u99e739d3\" id=\"u99e739d3\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">phrase_limit</span></p></td><td data-lake-id=\"u99eebc22\" id=\"u99eebc22\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ud2b659b0\" id=\"ud2b659b0\" style=\"text-align: center\"><span data-lake-id=\"u61e341a3\" id=\"u61e341a3\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">控制文档中所考虑的匹配短语的数量。防止</span><span data-lake-id=\"u1984bbf6\" id=\"u1984bbf6\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">fvh highlighter</span><span data-lake-id=\"u97f34147\" id=\"u97f34147\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">分析太多的短语和消耗太多的内存。提高限制会增加查询时间并消耗更多内存。默认为256。</span></p></td></tr><tr data-lake-id=\"u10aa1558\" id=\"u10aa1558\"><td data-lake-id=\"u18c8a1d9\" id=\"u18c8a1d9\"><p data-lake-id=\"u0a298656\" id=\"u0a298656\" style=\"text-align: center\"><span data-lake-id=\"u9acbc1c9\" id=\"u9acbc1c9\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">pre_tags</span></p></td><td data-lake-id=\"u70506ebd\" id=\"u70506ebd\"><p data-lake-id=\"uf749ef97\" id=\"uf749ef97\" style=\"text-align: center\"><span data-lake-id=\"u2907fb2b\" id=\"u2907fb2b\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">与post_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。</span></p></td></tr><tr data-lake-id=\"udb01b28a\" id=\"udb01b28a\"><td data-lake-id=\"u55fb9f85\" id=\"u55fb9f85\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u174a463a\" id=\"u174a463a\" style=\"text-align: center\"><span data-lake-id=\"uf694830f\" id=\"uf694830f\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">post_tags</span></p></td><td data-lake-id=\"ucb5d5ec9\" id=\"ucb5d5ec9\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u1f4f2a87\" id=\"u1f4f2a87\" style=\"text-align: center\"><span data-lake-id=\"u22b2cbf4\" id=\"u22b2cbf4\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">与pre_tags一起使用，定义用于突出显示文本的HTML标记。默认情况下，突出显示的文本被包装在和标记中。指定为字符串数组。</span></p></td></tr><tr data-lake-id=\"ubfea8fe9\" id=\"ubfea8fe9\"><td data-lake-id=\"u84273854\" id=\"u84273854\"><p data-lake-id=\"ue0e7c6b2\" id=\"ue0e7c6b2\" style=\"text-align: center\"><span data-lake-id=\"u2c920afb\" id=\"u2c920afb\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">require_field_match</span></p></td><td data-lake-id=\"u90f77092\" id=\"u90f77092\"><p data-lake-id=\"u88372c32\" id=\"u88372c32\" style=\"text-align: center\"><span data-lake-id=\"u8168ba62\" id=\"u8168ba62\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">默认情况下，只突出显示包含查询匹配的字段。将require_field_match设置为false以突出显示所有字段。默认值为true。</span></p></td></tr><tr data-lake-id=\"uc854362a\" id=\"uc854362a\"><td data-lake-id=\"u43925cbb\" id=\"u43925cbb\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uffb4f42c\" id=\"uffb4f42c\" style=\"text-align: center\"><span data-lake-id=\"u306bdd14\" id=\"u306bdd14\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">tags_schema</span></p></td><td data-lake-id=\"u478cc9cd\" id=\"u478cc9cd\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u4a8a470d\" id=\"u4a8a470d\" style=\"text-align: center\"><span data-lake-id=\"ud9e9a0ba\" id=\"ud9e9a0ba\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">设置为使用内置标记模式的样式。</span></p></td></tr><tr data-lake-id=\"uafdceb70\" id=\"uafdceb70\"><td data-lake-id=\"uf961b681\" id=\"uf961b681\"><p data-lake-id=\"u134d6442\" id=\"u134d6442\" style=\"text-align: center\"><span data-lake-id=\"uc291baa2\" id=\"uc291baa2\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">type</span></p></td><td data-lake-id=\"uc2d03ff7\" id=\"uc2d03ff7\"><p data-lake-id=\"u1d2016bc\" id=\"u1d2016bc\" style=\"text-align: center\"><span data-lake-id=\"u2a557828\" id=\"u2a557828\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">使用的高亮模式:unified, plain, or fvh. 默认为 unified。</span></p></td></tr></tbody></table><h3 data-lake-id=\"S3LNr\" id=\"S3LNr\"><span data-lake-id=\"u93b20c53\" id=\"u93b20c53\" style=\"color: rgb(79, 79, 79)\">boundary_scanner</span></h3><p data-lake-id=\"ueab4487f\" id=\"ueab4487f\"><span data-lake-id=\"ucc95cfa0\" id=\"ucc95cfa0\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">指定如何分割突出显示的片段，支持chars, sentence, or word三种方式。默认unified highlighter使用<br /></span><span data-lake-id=\"u2d0ecbd6\" id=\"u2d0ecbd6\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">sentence，fvh highlighter使用chars。</span></p><ul list=\"ub25f3743\"><li fid=\"u3c61ff00\" data-lake-id=\"u380f1b14\" id=\"u380f1b14\"><span data-lake-id=\"u94d91196\" id=\"u94d91196\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">chars</span></li></ul><p data-lake-id=\"ua0d9f41e\" id=\"ua0d9f41e\"><span data-lake-id=\"uda25b60f\" id=\"uda25b60f\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">使用boundary_chars指定的字符突出显示边界。boundary_max_scan设置控制扫描边界字符的距离。只适用于fvh highlighter。</span></p><ul list=\"ue98a996b\"><li fid=\"u312913ab\" data-lake-id=\"ucc33f213\" id=\"ucc33f213\"><span data-lake-id=\"u9ae8909c\" id=\"u9ae8909c\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">sentence</span></li></ul><p data-lake-id=\"u553860f7\" id=\"u553860f7\"><span data-lake-id=\"u064e6014\" id=\"u064e6014\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">根据Java的BreakIterator确定，在下一个句子边界处中断突出显示的片段。配置了此参数后上面例子返回内容,可以看到其每个分段都是一个句子</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%5C%22highlight%5C%22%20%3A%20%7B%5Cn%20%20%5C%22content%5C%22%20%3A%20%5B%5Cn%5Ct%5C%22%3Cem%3E%E7%AE%80%3C%2Fem%3E%3Cem%3E%E5%8D%95%3C%2Fem%3E%3Cem%3E%E6%9F%A5%3C%2Fem%3E%3Cem%3E%E8%AF%A2%3C%2Fem%3E%E5%AD%97%E7%AC%A6%E4%B8%B2%E2%80%94%E2%80%94URI%20Search%20%E5%AE%9E%E9%99%85%E4%B8%9A%E5%8A%A1%E4%B8%AD%E6%88%91%E4%BB%AC%E9%80%9A%E5%B8%B8%E9%83%BD%E6%98%AF%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%3Cem%3E%E7%9A%84%3C%2Fem%3E%E8%AF%B7%E6%B1%82%E4%BD%93%E4%BB%8Eelasticsearch%E8%8E%B7%E5%BE%97%E6%95%B0%E6%8D%AE%E3%80%82%5C%22%2C%5Cn%5Ct%5C%22%E7%84%B6%E8%80%8C%E5%9C%A8%E6%9C%89%E4%BA%9B%E6%97%B6%E5%80%99%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BA%86%E8%B0%83%E8%AF%95%E7%B3%BB%E7%BB%9F%E6%88%96%E8%80%85%E6%95%B0%E6%8D%AE%3Cem%3E%E7%9A%84%3C%2Fem%3E%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E4%B8%B4%E6%97%B6%E8%BF%9B%E8%A1%8C%E4%B8%80%E4%BA%9B%3Cem%3E%E7%AE%80%3C%2Fem%3E%3Cem%3E%E5%8D%95%3C%2Fem%3E%3Cem%3E%E7%9A%84%3C%2Fem%3E%3Cem%3E%E6%9F%A5%3C%2Fem%3E%3Cem%3E%E8%AF%A2%3C%2Fem%3E%E6%97%B6%E5%80%99%EF%BC%8C%E7%BC%96%E5%86%99%E5%AE%8C%E6%95%B4%3Cem%3E%E7%9A%84%3C%2Fem%3E%E8%AF%B7%E6%B1%82%E4%BD%93JSON%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%A8%8D%E5%BE%AE%E9%BA%BB%E7%83%A6%E3%80%82%E8%80%8Celasticsearch%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8EURI%3Cem%3E%E7%9A%84%3C%2Fem%3E%3Cem%3E%E7%AE%80%3C%2Fem%3E%3Cem%3E%E5%8D%95%3C%2Fem%3E%3Cem%3E%E7%9A%84%3C%2Fem%3E%3Cem%3E%E6%9F%A5%3C%2Fem%3E%3Cem%3E%E8%AF%A2%3C%2Fem%3E%E6%96%B9%5C%22%5Cn%20%20%5D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OHcjo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"uf7c57448\"><li fid=\"ud75d02b5\" data-lake-id=\"u67c92cf4\" id=\"u67c92cf4\"><span data-lake-id=\"ucc94285b\" id=\"ucc94285b\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">word</span></li></ul><p data-lake-id=\"u2880ab2f\" id=\"u2880ab2f\"><span data-lake-id=\"u436c159d\" id=\"u436c159d\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">根据Java的BreakIterator确定，在下一个单词边界处中断突出显示的片段。使用此参数上面的例子返回内容，此时每个分段并不是一个完整的句子。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%5C%22highlight%5C%22%20%3A%20%7B%5Cn%20%20%5C%22content%5C%22%20%3A%20%5B%5Cn%5Ct%5C%22%3Cem%3E%E7%AE%80%3C%2Fem%3E%3Cem%3E%E5%8D%95%3C%2Fem%3E%3Cem%3E%E6%9F%A5%3C%2Fem%3E%3Cem%3E%E8%AF%A2%3C%2Fem%3E%E5%AD%97%E7%AC%A6%E4%B8%B2%5C%22%2C%5Cn%5Ct%5C%22%E5%AE%9E%E9%99%85%E4%B8%9A%E5%8A%A1%E4%B8%AD%E6%88%91%E4%BB%AC%E9%80%9A%E5%B8%B8%E9%83%BD%E6%98%AF%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%3Cem%3E%E7%9A%84%3C%2Fem%3E%E8%AF%B7%E6%B1%82%E4%BD%93%E4%BB%8E%5C%22%2C%5Cn%5Ct%5C%22%E7%84%B6%E8%80%8C%E5%9C%A8%E6%9C%89%E4%BA%9B%E6%97%B6%E5%80%99%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BA%86%E8%B0%83%E8%AF%95%E7%B3%BB%E7%BB%9F%E6%88%96%E8%80%85%E6%95%B0%E6%8D%AE%3Cem%3E%E7%9A%84%3C%2Fem%3E%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81%E4%B8%B4%E6%97%B6%E8%BF%9B%E8%A1%8C%E4%B8%80%E4%BA%9B%3Cem%3E%E7%AE%80%3C%2Fem%3E%3Cem%3E%E5%8D%95%3C%2Fem%3E%3Cem%3E%E7%9A%84%3C%2Fem%3E%3Cem%3E%E6%9F%A5%3C%2Fem%3E%3Cem%3E%E8%AF%A2%3C%2Fem%3E%E6%97%B6%E5%80%99%5C%22%2C%5Cn%5Ct%5C%22%E7%BC%96%E5%86%99%E5%AE%8C%E6%95%B4%3Cem%3E%E7%9A%84%3C%2Fem%3E%E8%AF%B7%E6%B1%82%E4%BD%93%5C%22%2C%5Cn%5Ct%5C%22%3Cem%3E%E7%9A%84%3C%2Fem%3E%3Cem%3E%E7%AE%80%3C%2Fem%3E%3Cem%3E%E5%8D%95%3C%2Fem%3E%3Cem%3E%E7%9A%84%3C%2Fem%3E%3Cem%3E%E6%9F%A5%3C%2Fem%3E%3Cem%3E%E8%AF%A2%3C%2Fem%3E%E6%96%B9%5C%22%5Cn%20%20%5D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zbHBw%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"pQ7dZ\" id=\"pQ7dZ\"><span data-lake-id=\"u69f27d95\" id=\"u69f27d95\" style=\"color: rgb(79, 79, 79)\">boundary_scanner_locale</span></h3><p data-lake-id=\"ucbc0d425\" id=\"ucbc0d425\"><span data-lake-id=\"uabf9d48a\" id=\"uabf9d48a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">用来设置搜索和确定单词边界的本地化设置</span></p><ol list=\"uc3df7ffc\"><li fid=\"u39bb5af3\" data-lake-id=\"uf7682c08\" id=\"uf7682c08\"><span data-lake-id=\"uea997d78\" id=\"uea997d78\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">可以通过https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#forLanguageTag-java.lang.String-获得更多语言标签</span></li><li fid=\"u39bb5af3\" data-lake-id=\"ufb30dc14\" id=\"ufb30dc14\"><span data-lake-id=\"u2f7645b4\" id=\"u2f7645b4\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">默认参数为[Locale.ROOT]{https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#ROOT}</span></li></ol><h3 data-lake-id=\"mwSHu\" id=\"mwSHu\"><span data-lake-id=\"u0a2bac0e\" id=\"u0a2bac0e\" style=\"color: rgb(79, 79, 79)\">fragmenter</span></h3><p data-lake-id=\"u5dcbe506\" id=\"u5dcbe506\"><span data-lake-id=\"u1d59eda2\" id=\"u1d59eda2\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">指定文本应如何在突出显示片段中拆分。只适用于plain highlighter。默认为span。</span></p><ol list=\"ufffd83ce\"><li fid=\"u59d8136c\" data-lake-id=\"ud080e512\" id=\"ud080e512\"><span data-lake-id=\"u9ec17b31\" id=\"u9ec17b31\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">simple:将文本分割成相同大小的片段</span></li><li fid=\"u59d8136c\" data-lake-id=\"u6a4c5c87\" id=\"u6a4c5c87\"><span data-lake-id=\"udda76bc6\" id=\"udda76bc6\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">span:将文本分割为大小相同的片段，但尽量避免在突出显示的术语之间分割文本。这在查询短语时很有用</span></li></ol><h3 data-lake-id=\"DY2Qb\" id=\"DY2Qb\"><span data-lake-id=\"uad5d3638\" id=\"uad5d3638\" style=\"color: rgb(79, 79, 79)\">type</span></h3><p data-lake-id=\"u9b6487ef\" id=\"u9b6487ef\"><span data-lake-id=\"u1d8d66f9\" id=\"u1d8d66f9\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">type字段允许强制使用特定的高亮策略。可以配置的参数:unified, plain and fvh。下面是一个使用plain策略的例子:</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22GET%20article%2F_search%5Cn%7B%5Cn%20%20%20%20%5C%22query%5C%22%20%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%20%5C%22content%5C%22%3A%20%5C%22%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%5C%22%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22highlight%5C%22%20%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22fields%5C%22%20%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%20%3A%20%7B%5C%22type%5C%22%20%3A%20%5C%22plain%5C%22%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22qNPu0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u50697d10\" id=\"u50697d10\"><span data-lake-id=\"u792bb20f\" id=\"u792bb20f\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">三种不同的高亮策略的区别</span></p><ol list=\"ua994be09\"><li fid=\"u757ad7cb\" data-lake-id=\"u04bb3709\" id=\"u04bb3709\"><span data-lake-id=\"u81d297c7\" id=\"u81d297c7\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">unified（通用高亮策略）</span></li></ol><p data-lake-id=\"u644da444\" id=\"u644da444\"><span data-lake-id=\"u1792d89c\" id=\"u1792d89c\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">其使用的是</span><span data-lake-id=\"u21bfdd35\" id=\"u21bfdd35\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">Lucene</span><span data-lake-id=\"u5a1509cd\" id=\"u5a1509cd\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">的Unified Highlighter。此高亮策略将文本分解成句子，并使用BM25算法对单个句子进行评分，支持精确的短语和多术语(模糊、前缀、正则表达式)突出显示。这个是默认的高亮策略。</span></p><ol list=\"u562f4095\"><li fid=\"u402ed5dc\" data-lake-id=\"u4b9fac2e\" id=\"u4b9fac2e\"><span data-lake-id=\"u56f5fbb1\" id=\"u56f5fbb1\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">plain （普通高亮策略）</span></li></ol><p data-lake-id=\"u534e833c\" id=\"u534e833c\"><span data-lake-id=\"ub2a86511\" id=\"ub2a86511\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">其使用的是</span><span data-lake-id=\"u6527271f\" id=\"u6527271f\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">Lucene</span><span data-lake-id=\"u117de7cc\" id=\"u117de7cc\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">的standard Lucene highlighter。它试图在理解词的重要性和短语查询中的任何词定位标准方面反映查询匹配逻辑。此高亮策略是和在单个字段中突出显示简单的查询匹配。如果想用复杂的查询在很多文档中突出显示很多字段，还是使用</span><span data-lake-id=\"ub632d54c\" id=\"ub632d54c\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">unified</span></p><ol list=\"u44346b2d\"><li fid=\"u0e47fda6\" data-lake-id=\"u0007ee93\" id=\"u0007ee93\"><span data-lake-id=\"u21b0e645\" id=\"u21b0e645\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">Fast vector highlighter（快速向量策略）</span></li></ol><p data-lake-id=\"u238a9919\" id=\"u238a9919\"><span data-lake-id=\"u56c0ab03\" id=\"u56c0ab03\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">其使用的是</span><span data-lake-id=\"uca440d18\" id=\"uca440d18\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">Lucene</span><span data-lake-id=\"u35dab907\" id=\"u35dab907\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">的Fast Vector highlighter。使用此策略需要在映射中将对应字段中属性</span><span data-lake-id=\"u99fd18aa\" id=\"u99fd18aa\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">term_vector</span><span data-lake-id=\"u1c07ee6a\" id=\"u1c07ee6a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">设置为</span><span data-lake-id=\"ubbd4fea9\" id=\"ubbd4fea9\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">with_positions_offsets</span><span data-lake-id=\"u097e0808\" id=\"u097e0808\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">。这个策略以后会单独介绍。</span></p><h3 data-lake-id=\"IVNUx\" id=\"IVNUx\"><span data-lake-id=\"uc2729dba\" id=\"uc2729dba\" style=\"color: rgb(79, 79, 79)\">pre_tags和post_tags</span></h3><p data-lake-id=\"uc998c0a6\" id=\"uc998c0a6\"><span data-lake-id=\"u4734fdcd\" id=\"u4734fdcd\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">默认情况下，高亮显示将以和包装突出显示的文本。这可以通过设置pre_tags和post_tags来控制，例如:</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22GET%20article%2F_search%5Cn%7B%5Cn%20%20%20%20%5C%22size%5C%22%3A5%2C%5Cn%20%20%20%20%5C%22query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%5C%22%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%5C%22%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22highlight%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22boundary_scanner_locale%5C%22%3A%5C%22zh_CN%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22fields%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22pre_tags%5C%22%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22%3Ch1%3E%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22post_tags%5C%22%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22%3C%2Fh2%3E%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22H7LMf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7147b6ea\" id=\"u7147b6ea\"><span data-lake-id=\"u77dc1144\" id=\"u77dc1144\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">当然也可以使用系统预设的标签模式:</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22GET%20article%2F_search%5Cn%7B%5Cn%20%20%20%20%5C%22size%5C%22%3A5%2C%5Cn%20%20%20%20%5C%22query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%5C%22%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%5C%22%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22highlight%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22boundary_scanner_locale%5C%22%3A%5C%22zh_CN%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22tags_schema%5C%22%20%3A%20%5C%22styled%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22fields%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22LLkr1%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"roboF\" id=\"roboF\"><span data-lake-id=\"u33706a9c\" id=\"u33706a9c\" style=\"color: rgb(79, 79, 79)\">fragment_size 和 number_of_fragments</span></h3><p data-lake-id=\"u3639bfb8\" id=\"u3639bfb8\"><span data-lake-id=\"u19481a9e\" id=\"u19481a9e\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">fragment_size</span><span data-lake-id=\"ude06afa0\" id=\"ude06afa0\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">主要控制了每个高亮片段的大小，而</span><span data-lake-id=\"u5c596f93\" id=\"u5c596f93\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">number_of_fragments</span><span data-lake-id=\"u16df8f7a\" id=\"u16df8f7a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">控制了返回多少个高亮片段。下面例子中就是控制返回两个长度10的片段</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22GET%20article%2F_search%5Cn%7B%5Cn%20%20%20%20%5C%22query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22bool%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22must%5C%22%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%5C%22%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22highlight%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22boundary_scanner_locale%5C%22%3A%20%5C%22zh_CN%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22fields%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22fragment_size%5C%22%20%3A%2010%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22number_of_fragments%5C%22%20%3A%202%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22yVhmV%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"TH9YV\" id=\"TH9YV\"><span data-lake-id=\"uae4b93ba\" id=\"uae4b93ba\" style=\"color: rgb(79, 79, 79)\">order</span></h3><p data-lake-id=\"u3bc898b5\" id=\"u3bc898b5\"><span data-lake-id=\"u4802191e\" id=\"u4802191e\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">order</span><span data-lake-id=\"u411f6b34\" id=\"u411f6b34\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">控制了返回对象中</span><span data-lake-id=\"u97814edd\" id=\"u97814edd\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">highlight</span><span data-lake-id=\"u8109054c\" id=\"u8109054c\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">片段的排序。下面例子中返回的高亮片段将会根据分数顺序输出。假如设置了none则是按照顺序输出。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22GET%20article%2F_search%5Cn%7B%5Cn%20%20%20%20%5C%22query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22bool%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22must%5C%22%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%5C%22%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22highlight%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22order%5C%22%20%3A%20%5C%22score%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22boundary_scanner_locale%5C%22%3A%20%5C%22zh_CN%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%5C%22fields%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%7B%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22gTyGs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8e3ba530\" id=\"u8e3ba530\"><span data-lake-id=\"u3a22b122\" id=\"u3a22b122\" style=\"color: rgb(79, 79, 79)\">对一个字段进行查询的时候希望高亮其他字段</span></p><p data-lake-id=\"u7803fcf6\" id=\"u7803fcf6\"><span data-lake-id=\"u2ec35ebf\" id=\"u2ec35ebf\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">在请求参数</span><span data-lake-id=\"u1609c659\" id=\"u1609c659\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">highlight</span><span data-lake-id=\"ue9a5d83a\" id=\"ue9a5d83a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">中可以设置多个字段，同时需要为每个字段配置</span><span data-lake-id=\"u6698a26f\" id=\"u6698a26f\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">highlight_query</span><span data-lake-id=\"ue7082f06\" id=\"ue7082f06\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">。通过配置这个字段可以实现对</span><span data-lake-id=\"u6964799c\" id=\"u6964799c\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">content</span><span data-lake-id=\"uab75b8e8\" id=\"uab75b8e8\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">进行匹配查询同时高亮</span><span data-lake-id=\"u448c48b7\" id=\"u448c48b7\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">article_title</span><span data-lake-id=\"uee758256\" id=\"uee758256\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">和</span><span data-lake-id=\"u6379c71d\" id=\"u6379c71d\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">content</span><span data-lake-id=\"u63a96e4a\" id=\"u63a96e4a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">字段的内容。同时使用此方法可以实现使用使用查询条件</span><span data-lake-id=\"ucb6c5fc8\" id=\"ucb6c5fc8\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">查询</span><span data-lake-id=\"u76f65c68\" id=\"u76f65c68\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">,而最终高亮</span><span data-lake-id=\"ue8b949c3\" id=\"ue8b949c3\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">字符串</span><span data-lake-id=\"ua31ae88b\" id=\"ua31ae88b\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">内容。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22GET%20article%2F_search%5Cn%7B%5Cn%20%20%20%20%5C%22query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%5C%22%E6%9F%A5%E8%AF%A2%5C%22%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%2C%5Cn%20%20%20%20%5C%22highlight%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%5C%22fields%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22type%5C%22%3A%20%5C%22unified%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22highlight_query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22bool%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22must%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22content%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22query%5C%22%3A%20%5C%22%E5%AD%97%E7%AC%A6%E4%B8%B2%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22minimum_should_match%5C%22%3A%200%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5C%22article_title%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22type%5C%22%3A%20%5C%22unified%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22highlight_query%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22bool%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22must%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22match%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22article_title%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22query%5C%22%3A%20%5C%22%E5%AD%97%E7%AC%A6%E4%B8%B2%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22minimum_should_match%5C%22%3A%200%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Dqr2P%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"XtAFM\" id=\"XtAFM\"><span data-lake-id=\"u2a16702e\" id=\"u2a16702e\" style=\"color: rgb(79, 79, 79)\">highlighter如何确定高亮内容</span></h2><p data-lake-id=\"u2f37374a\" id=\"u2f37374a\"><span data-lake-id=\"u99355d4e\" id=\"u99355d4e\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">为了从查询的词汇中获得搜索片段位置，高亮策略显示需要知道原始文本中每个单词的起始和结束字符偏移量。目前根据模式不同获取这些数据途径不同</span></p><ol list=\"ub2fc9ff5\"><li fid=\"u50151982\" data-lake-id=\"u98ce1b3c\" id=\"u98ce1b3c\"><span data-lake-id=\"ufe835e42\" id=\"ufe835e42\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">检索列表，如果在映射中</span><span data-lake-id=\"ufde315c8\" id=\"ufde315c8\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">index_options</span><span data-lake-id=\"u44843d8e\" id=\"u44843d8e\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">设置了</span><span data-lake-id=\"u9a39dae5\" id=\"u9a39dae5\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">offsets</span><span data-lake-id=\"ufe325cdb\" id=\"ufe325cdb\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">，unified会将其中数据应用在文档中，而不会重新分析文本。它直接对文档进行原始查询，并从索引中提取匹配的偏移数据。在字段内容很大的时候，使用此配置很重要，因为它不需要重新分析文本内容。和term_vectors相比，它还需要更少的磁盘空间。</span></li><li fid=\"u50151982\" data-lake-id=\"u000b195e\" id=\"u000b195e\"><span data-lake-id=\"u01369616\" id=\"u01369616\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">术语向量，如果在映射中</span><span data-lake-id=\"u945a5495\" id=\"u945a5495\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">term_vector</span><span data-lake-id=\"u47238bc5\" id=\"u47238bc5\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">设置为</span><span data-lake-id=\"ua801a543\" id=\"ua801a543\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">with_positions_offsets</span><span data-lake-id=\"u3cd394d5\" id=\"u3cd394d5\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">则unified highlighter使用</span><span data-lake-id=\"ubb3cf1cc\" id=\"ubb3cf1cc\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">term_vector</span><span data-lake-id=\"u387a0998\" id=\"u387a0998\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">来突出显示字段。对于大字段（大于1MB）和多术语查询它的速度会比较快。而fvh highlighter总是使用</span><span data-lake-id=\"ub35674ce\" id=\"ub35674ce\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">term_vector</span><span data-lake-id=\"u4defa1d3\" id=\"u4defa1d3\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">。</span></li><li fid=\"u50151982\" data-lake-id=\"u80773924\" id=\"u80773924\"><span data-lake-id=\"u811ae861\" id=\"u811ae861\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">普通的高亮策略（<br /></span><span data-lake-id=\"u8837d022\" id=\"u8837d022\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">Plain highlighting），当没有其他选择的时候，unified highlighter使用此模式，他在内存中创建一个小的索引（index），通过运行Lucene的查询执行计划来访问文档的匹配信息，对需要高亮显示的每个字段和每个文档进行处理。plain highlighter总是使用此策略。注意此方式在大型文本上可能需要大量的时间和内存。在使用此策略时候可以设置分析的文本字符的最大数量限制为1000000。这个数值可以通过修改索引的</span><span data-lake-id=\"u7f2cc087\" id=\"u7f2cc087\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">index.highlight.max_analyzed_offset</span><span data-lake-id=\"u9f04474c\" id=\"u9f04474c\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">参数来改变。</span></li></ol>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 70,
    "hits": 70,
    "comments_count": 0,
    "word_count": 4136,
    "created_at": "2022-09-16T06:09:20.000Z",
    "updated_at": "2023-07-27T02:04:48.000Z",
    "content_updated_at": "2023-07-27T02:04:48.000Z",
    "published_at": "2023-07-27T02:04:48.000Z",
    "first_published_at": "2022-09-16T10:16:48.422Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1886091093,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 90539502,
    "type": "Doc",
    "slug": "bguk5v",
    "title": "nginx 常用配置详解",
    "description": "tags: [nginx,配置]categories: 学无止境copyright_author_href: https://juejin.cn/user/1953149470376301copyright_url: https://juejin.cn/post/713454018706486...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [nginx,配置]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: </span><span class=\"ne-text\">https://juejin.cn/user/1953149470376301</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span class=\"ne-text\">https://juejin.cn/post/7134540187064860679#heading-34</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span class=\"ne-text\">IAM17</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover: </span><span class=\"ne-text\">https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png#clientId=u81110d56-3058-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=ui&amp;id=uc10ad34f&amp;margin=%5Bobject%20Object%5D&amp;name=%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220824161836.png&amp;originHeight=393&amp;originWidth=666&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=84791&amp;status=done&amp;style=none&amp;taskId=ud1e4e7a9-8543-465f-b83c-ba4d1551b6f&amp;title=</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><ul class=\"ne-tl\"><li id=\"u4307c33f\" data-lake-index-type=\"0\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png\" width=\"666\" id=\"uc10ad34f\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></li></ul><div data-type=\"color3\" class=\"ne-alert\"><p id=\"ue68ba9d7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">环境为 CentOS 7。 nginx 版本 1.21</span></p></div><p id=\"ub6c4ab08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></span></p><h2 id=\"sttfd\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">配置文件入口</span></h2><pre data-language=\"shell\" id=\"GCL2j\" class=\"ne-codeblock language-shell\"><code>/etc/nginx/nginx.conf</code></pre><p id=\"ubf02d639\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这是入口文件，这个文件里有这样一句：</span></p><pre data-language=\"shell\" id=\"eGrnT\" class=\"ne-codeblock language-shell\"><code>include /etc/nginx/conf.d/*.conf;</code></pre><p id=\"uba3fdef3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">各个网站的配置文件是放在 conf.d 目录下的。这里面的所有 .conf 文件都会被读取。我们增加一个 test.conf。 yourname 就是你的用户名。在 /home/yourname/web/test/ 下面增加一个 index.html文件 ，文件。文件内容为 hello。</span></p><pre data-language=\"shell\" id=\"IjNVZ\" class=\"ne-codeblock language-shell\"><code>server{\n  listen 3000;\n  server_name _;\n  location / {\n    root /home/yourname/web/test/;\n  }\n}\n</code></pre><p id=\"u0a4e8596\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">启动 nginx，如果已经启动，reload 配置文件</span></p><pre data-language=\"shell\" id=\"JNT6s\" class=\"ne-codeblock language-shell\"><code># 启动\nsudo nginx \n# 如果已经启动，重新加载配置\nsudo nginx -s reload</code></pre><p id=\"u57f3dd24\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用 ip 或 localhost:3000 用浏览器访问网站，显示 hello。测试方法也可以用</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">curl localhost:3000</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">，这样可能会更方便些。</span></p><h2 id=\"nCTV0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">文件类型</span></h2><p id=\"u6d947f03\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于我们请求的内容，浏览器的处理方式是不一样的。浏览器如何判断内容，是根据 响应头</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-Type</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在入口配置文件 nginx.conf 中有这样两句：</span></p><pre data-language=\"shell\" id=\"PcSjV\" class=\"ne-codeblock language-shell\"><code>include             /etc/nginx/mime.types;\n\ndefault_type        application/octet-stream;</code></pre><p id=\"u53f98152\" class=\"ne-p\"><br></p><p id=\"ue1f53daf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">mine.types 是</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-type</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">和文件后缀名的映射表。比如 xx.css 文件的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-type</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">是</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">text/css</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。 default_type 是默认的 type。比如当访问 /a 的时候，如果 a 文件存在，nginx会返回 a 文件，响应头</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-type：application/octet-stream</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。 浏览器对</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">application/octet-stream</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的处理方式是下载，而不是展示。</span></p><p id=\"u5e9a8d47\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果我们的请求地址是这样的 /a.html,/b.css, nginx 都可以自动处理。但有的时候，可能请求的地址是这样的 /a,这时就需要我们手动指定 type 类型。指定 type 类型很简单，有两种方法。</span></p><p id=\"u0c8cf509\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"NDPBG\" class=\"ne-codeblock language-shell\"><code>location /css {\n  add_header Content-type text/css;\n}\nlocation /css {\n  default_type  text/css;\n}</code></pre><h2 id=\"WnI9G\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">自定义log</span></h2><p id=\"ua4e42203\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">打开 /etc/nginx/nginx.conf 找到 log_format</span></p><pre data-language=\"shell\" id=\"Mdeq4\" class=\"ne-codeblock language-shell\"><code> log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '\n                    '$status $body_bytes_sent &quot;$http_referer&quot; '\n                    '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';</code></pre><p id=\"u31a4bffb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于开发来说可以去掉 ua，ua 很长，去掉可以方便查看。尤其对于初学者，建议加上 $request_filename ，这个变量代表的是访问的实际文件路径，对于理解各种指令的效果，查找错误非常有帮助。</span></p><p id=\"u4532cb8a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在入口的配置文件中用 Log_foramt定义了一个 main。我们可以定义一个 dev，按你所需求选用需要的内容即可。 使用的时候，直接用 dev这个名字就行。</span></p><pre data-language=\"shell\" id=\"V9a99\" class=\"ne-codeblock language-shell\"><code> log_format  dev  '[$time_local] &quot;$request&quot; $request_filename'\n                   '$status $body_bytes_sent &quot;$http_referer&quot; '\n access_log /home/duhongwei/log/access.log dev;</code></pre><h2 id=\"HERic\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">location 匹配规则</span></h2><p id=\"u2d42ea63\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">@ 匹配规则在后面的 try_files 中有举例</span></p><p id=\"u196af0c3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">location 按如下优先级匹配</span></p><ol class=\"ne-ol\"><li id=\"u1b2d6e45\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">= 绝对匹配，一个字符也不能差</span></li><li id=\"ufb5b75f2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">^~ 前缀匹配</span></li><li id=\"u7abf663e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">~（区分大小写）， ~*(不区分大小写) 正则匹配</span></li><li id=\"ub2bfac06\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">普通前缀匹配</span></li></ol><p id=\"u65a5c308\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">2，4的匹配是匹配最长优先。 3 的匹配是按顺序，写在前面的优先。</span></p><h3 id=\"hfxlS\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">完全匹配</span></h3><pre data-language=\"shell\" id=\"OIX6j\" class=\"ne-codeblock language-shell\"><code>location = /abc {\n   return 900;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901</code></pre><p id=\"uf1bd7b12\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">location = abc 虽然只少了 / ，但这样是匹配不到的，一个字符也不能差。完全匹配优先级最高，无论写在前面还是后面。</span></p><h3 id=\"tdUAk\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">^~ 前端缀匹配</span></h3><pre data-language=\"shell\" id=\"cCuPe\" class=\"ne-codeblock language-shell\"><code># 正则匹配\nlocation ~ abc {\n   return 900;\n}\n# 前缀匹配\nlocation ^~  /a {\n   return 901;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901</code></pre><p id=\"u4ee04bfa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">^~ 匹配的优先级高于正则匹配。</span></p><p id=\"u9151764e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">初看到 ^~ 的人会误以为是正则匹配。这个要注意下，这个是前缀匹配，就是从前向后一个字符一个字符匹配。</span></p><pre data-language=\"shell\" id=\"yF99n\" class=\"ne-codeblock language-shell\"><code># 普通前缀匹配\n/abc/ {\n}\n\n# 前缀匹配\n^~ /abc/ {\n}</code></pre><p id=\"uf79a22fd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这两种写法的匹配方式是一样，^~ 的优先级更高。</span></p><h3 id=\"W5mQ9\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">正则匹配</span></h3><pre data-language=\"shell\" id=\"jaSU3\" class=\"ne-codeblock language-shell\"><code># 普通前缀匹配\nlocation  /abcd {\n   return 901;\n}\n# 正则匹配\nlocation ~ /ab {\n   return 902;\n}\n\ncurl -I localhost:3000/abcd\nHTTP/1.1 902</code></pre><p id=\"u80d5fdee\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">正则匹配的优先级高于普通前缀匹配。</span></p><pre data-language=\"shell\" id=\"oe6Ap\" class=\"ne-codeblock language-shell\"><code># 正则匹配\nlocation ~ /ab {\n   return 901;\n}\n\n# 正则匹配\nlocation ~ /abc {\n   return 902;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901</code></pre><p id=\"u65c93308\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">正则匹配是按顺序来的，前面的匹配成功后面的就不再匹配了。</span></p><p id=\"uf6849221\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">从性能上来说，尽量不要用正则，正则匹配性能最低。</span></p><h3 id=\"qJ719\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">前缀匹配最长优先</span></h3><pre data-language=\"shell\" id=\"ZjVNE\" class=\"ne-codeblock language-shell\"><code>location  /abc {\n   return 901;\n}\nlocation  /abcd {\n   return 902;\n}\n\nlocation ^~ /def {\n   return 903;\n}\nlocation ^~ /defg {\n   return 904;\n}\n\n\ncurl -I localhost:3000/abc\nHTTP/1.1 902\n\ncurl -I localhost:3000/defg\nHTTP/1.1 904</code></pre><h2 id=\"hnSqW\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">pass_proxy 代理</span></h2><p id=\"u05937697\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在前端代理主要是为了跨域。虽然前端跨域有多种方法，各有利弊，但用代理来跨域对开发是最友好的。用代理可以不用修改产品代码切换线上线下，非常安全。pass_proxy 默认会把 cookie 也一同转发。 常用的配置非常简单。</span></p><h3 id=\"r6G58\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">不带斜杠</span></h3><p id=\"u398b8b29\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前端 /api/user</span></p><p id=\"u18ab069a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">后端 /api/user</span></p><pre data-language=\"shell\" id=\"FLYeM\" class=\"ne-codeblock language-shell\"><code> location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001;\n }</code></pre><p id=\"u5329f6d4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不带斜杠把 path 直接拼接在 url后面；</span></p><h3 id=\"wtLKW\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">带斜杠</span></h3><p id=\"u48cebdd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前端 /api/user</span></p><p id=\"ue09110fc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">后端 /user</span></p><pre data-language=\"shell\" id=\"BJVg8\" class=\"ne-codeblock language-shell\"><code> location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001/;\n }</code></pre><p id=\"u228ce161\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">带斜杠会先去掉匹配到的 path, 再拼接。</span></p><h3 id=\"Selua\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">正则匹配的时候不能带斜杠</span></h3><p id=\"u20ed640d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">~ 区分大小写正则匹配 ，~* 不区分大小写正则匹配 。location 用正则匹配的时候，proxy_pass 后面不能以 / 结尾，因为 nginx 不能处理这种情况。</span></p><pre data-language=\"shell\" id=\"Q9WKP\" class=\"ne-codeblock language-shell\"><code> location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001/web$request_uri;\n }</code></pre><p id=\"u6d567235\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">本例中，请求 localhost:3000/ 会导致 nginx 报错。</span></p><h3 id=\"ki2Rm\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">斜杠后面加路径</span></h3><p id=\"ue416b363\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前端 /api/user</span></p><p id=\"u2d34a356\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">后端 /web/api/user</span></p><p id=\"u4553d9b8\" class=\"ne-p\"><span class=\"ne-text\"> location ^~ /api/ {      proxy_pass http://127.0.0.1:3001/web</span><span class=\"ne-text\" style=\"color: teal\">$request_uri</span><span class=\"ne-text\">;  } </span><span class=\"ne-text\" style=\"color: rgba(140, 140, 140, 0.8); font-size: 12px\">复制代码</span></p><h3 id=\"QEW4S\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">代理之前rewrite</span></h3><pre data-language=\"shell\" id=\"eWPgz\" class=\"ne-codeblock language-shell\"><code>location /search/ {\n    rewrite    /search/([^/]+) /s?wd=$1 break;\n    proxy_pass https://127.0.0.1:3001;\n}</code></pre><h3 id=\"YBJVk\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">服务端获取真实ip</span></h3><p id=\"u1dc158bc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">反向代理: 简单来说 proxy_pass 把请求转发到其它服务地址的时候，就是反向代理。</span></p><p id=\"u5aee0471\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果是客户端与服务器直接连接，nginx 变量</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">就可以拿到 真实ip。</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">是不能伪造的。但是如果 客户端是经过反向代理连接的服务器，服务器能拿到的只有代理服务器的 IP。为了能拿到客户端真实 IP,代理服务器在转发的时候需要加上一个http 扩展头部 X-Forwarded-For。</span></p><p id=\"u8012e9ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">所有代理的 ip 依次列出来，从远及近。</span></p><pre data-language=\"makefile\" id=\"mdKE2\" class=\"ne-codeblock language-makefile\"><code>X-Forwarded-For: IP0, IP1, IP2</code></pre><p id=\"u5709834c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">X-Forwarded-For 是一个 HTTP 扩展头部。HTTP/1.1（RFC 2616）协议并没有对它的定义，它最开始是由 Squid 这个缓存代理软件引入，用来表示 HTTP 请求端真实 IP。如今它已经成为事实上的标准，被各大 HTTP 代 理、负载均衡等转发服务广泛使用，并被写入 RFC 7239（Forwarded HTTP Extension）标准之中。</span></p><pre data-language=\"makefile\" id=\"Y5X9f\" class=\"ne-codeblock language-makefile\"><code>location /api/ {\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_pass http://127.0.0.1:3000/;\n\n}</code></pre><p id=\"u76ebe167\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$proxy_add_x_forwarded_for</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">变量包含客户端请求头中的&quot;X-Forwarded-For&quot;，与</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用逗号分开，如果没有&quot;X-Forwarded-For&quot; 请求头，则</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$proxy_add_x_forwarded_for</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">等于</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">变量的值是客户端的IP。</span></p><p id=\"ua02e6b19\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">可能你会担心，ip会不会被伪造。即使客户端伪造了 ip，nginx也会用真实的 ip 进行重置。所以</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">是可信的。</span></p><h3 id=\"re52p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">try_files</span></h3><pre data-language=\"properties\" id=\"RL3Ca\" class=\"ne-codeblock language-properties\"><code>try_files file ... uri;\ntry_files file ... =code;</code></pre><p id=\"u9362bd36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">举两个例子，对应这两种语法。</span></p><pre data-language=\"makefile\" id=\"jU9Yy\" class=\"ne-codeblock language-makefile\"><code>location /images/ {\n    try_files $uri /images/default.gif;\n}\n\nlocation = /images/default.gif {\n    expires 30d;\n}</code></pre><pre data-language=\"makefile\" id=\"U9ut4\" class=\"ne-codeblock language-makefile\"><code>location / {\n    try_files $uri $uri/index.html $uri.html =404;\n}</code></pre><p id=\"u42e89ba5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">=404 的 等号 是必须的</span></p><p id=\"u925dbd60\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">try_file 后面必须有一个file, 一个 url 或 code,file 可以有多个。</span></p><p id=\"u0ffb86c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">简单来说，try_file 按顺序检查 file,如果是文件夹，请在 file后加 / ，如果 file 都不存在，根据最后一个参数做跳转。</span></p><p id=\"u2adbb975\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">借这个机会说一个 @ 在location中的用法。 @相当于命名了一个变量。</span></p><pre data-language=\"makefile\" id=\"OZ0md\" class=\"ne-codeblock language-makefile\"><code>location / {\n    try_files /system/maintenance.html\n              $uri $uri/index.html $uri.html\n              @mongrel;\n}\nlocation @mongrel {\n    proxy_pass http://mongrel;\n}</code></pre><p id=\"ufae798e8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">try_files 的一个应用场景就是单面应用.</span></p><pre data-language=\"makefile\" id=\"bdA5U\" class=\"ne-codeblock language-makefile\"><code>location / {\n try_files $uri $uri/ /index.html\n \n}</code></pre><p id=\"u4f418ca3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果请求的是 /a, 首先会查找 a 文件 是否存在，然后找 a 目录是否存在,如果都不存在，转到 /index.html。 再次命中 location / ，再次执行 try_files，这回找到index.html 返回。</span></p><p id=\"u0a07bb99\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意：如果 index.html 不存在，会报 500，所以用 try_files的时候，要避免多次命中，最后的跳转最好转到别处。</span></p><pre data-language=\"makefile\" id=\"sH68S\" class=\"ne-codeblock language-makefile\"><code>location / {\n try_files $uri $uri/ /index.html \n}\nlocation /index.html{\n}</code></pre><p id=\"u7fffc73f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这样修改后，只经历一次尝试，如果找不到，会报 404，不是 500。</span></p><h2 id=\"ngmIt\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">error_page</span></h2><pre data-language=\"makefile\" id=\"KXMHJ\" class=\"ne-codeblock language-makefile\"><code>error_page code ... [=[response]] uri;</code></pre><p id=\"u1c618c47\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">error_page 会产生内部跳转</span></p><p id=\"u7c941c14\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">举例</span></p><pre data-language=\"makefile\" id=\"y4JGS\" class=\"ne-codeblock language-makefile\"><code>error_page 404             /404.html;\nerror_page 500 502 503 504 /50x.html;\nerror_page 404 =200 /empty.gif;\n\nerror_page 404 =301 http://example.com/notfound.html;\n\nlocation / {\n    error_page 404 = @fallback;\n}\n\nlocation @fallback {\n    proxy_pass http://backend;\n}\n</code></pre><p id=\"u30983b8f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果找不到直接跳 404 页面没什么问题，但是如果是跳到首页，或是显示一张图片，</span></p><p id=\"ue11b4acf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果这样写</span></p><pre data-language=\"makefile\" id=\"UOAjK\" class=\"ne-codeblock language-makefile\"><code>error_page 404 /index.html</code></pre><p id=\"u73a4b645\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当访问不存在的页面的时候，会跳到首页，但是状态码会显示 404。如果要显示 200,可以指定</span></p><pre data-language=\"makefile\" id=\"w8TEv\" class=\"ne-codeblock language-makefile\"><code>error_page 404 =200 /index.html</code></pre><h2 id=\"ri2td\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">页面缓存</span></h2><p id=\"u12619709\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">http header 相关的缓存有两种</span></p><ol class=\"ne-ol\"><li id=\"u628a518f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">强制缓存</span></li><li id=\"u806a1cfe\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">协商缓存</span></li></ol><p id=\"u0ba2c4c7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">响应头部有两个值代表是否要强制缓存。Cache-Control 和 expires。至于为什么有两个头，expires 是历史遗留。</span></p><p id=\"uc4039fdf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不需要强制缓存</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx可以这样配置</span></p><pre data-language=\"makefile\" id=\"vt1CA\" class=\"ne-codeblock language-makefile\"><code>expires -1</code></pre><p id=\"u44ae7e32\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 发回的头部</span></p><pre data-language=\"makefile\" id=\"TkzBD\" class=\"ne-codeblock language-makefile\"><code>Cache-Control:no-cache\nExpires:Thu, 18 Aug 2022 06:55:23 GMT </code></pre><p id=\"uf7c6c205\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Expires 的时间比当前早一秒。</span></p><p id=\"u8e681fc0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">也可以不配置 nginx。 默认是关闭强制缓存的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires off</span></p><p id=\"u73572ead\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires off</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">和</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires -1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">都可以关闭强制缓存，但响应头不一样，</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires off</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不会发送 Cache-Control 和 expires。</span></p><p id=\"u7842bacc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果需要强制缓存 这样配置</span></p><pre data-language=\"makefile\" id=\"bNEUc\" class=\"ne-codeblock language-makefile\"><code>expires 1d;</code></pre><p id=\"ue117645b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">1d 表示强制缓存一天。但是浏览器是否采用强制缓存还取决于浏览器的具体实现。</span></p><p id=\"uf6e6c153\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">比如你在浏览器中直接请求一个图片地址（网络上随便找张图片就成），查看响应头，一般都会带有 expires 和 Cache-control ，下次请求应该会命中强制缓存，但是，下次请求的时候走的是协商缓存，状态码是 304。为什么会这样呢？因为chrome 在直接请求图片的时候 在请求头中加上了</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">cache-control:max-age=0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">,表明本次请求不会采用强制缓存</span></p><p id=\"ued7d36d6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当强制刷新的时候，值变为 no-cache，响应码 200。浏览器忽略强制缓存，服务端忽略协商缓存，重新返回内容。</span></p><pre data-language=\"makefile\" id=\"DV41u\" class=\"ne-codeblock language-makefile\"><code>cache-control:no-cache\npragma:no-cache</code></pre><p id=\"ub22cbdb7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不光是图片，chrome 直接访问 html 也不会命中强制缓存。对于浏览器的这个策略也是合理的。当访问一个网站的时候，我们第一个请求的是网站首页 index.html。如果首页被强制缓存了 10天，那么可能 10 天内用户看到的都是旧内容。</span></p><p id=\"u89537d9e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cache-control：</span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">no-store</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这个字段就是告诉浏览器不进行缓存。这个最彻底，无论是强制缓存还是协商缓存都会关闭。nginx 中这样配置</span></p><pre data-language=\"makefile\" id=\"zDXO3\" class=\"ne-codeblock language-makefile\"><code>add_header Cache-Control no-sotre;</code></pre><p id=\"ueb2cb955\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cache-control：</span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">no-cache</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">关闭强制缓存，但还是会走协商缓存。</span></p><p id=\"u2f48a749\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">关闭了强制缓存就会走协商缓存，Last-Modified、etag， nginx 都会默认加上。</span></p><h3 id=\"uLu9Z\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">给图片等静态资源加强缓存</span></h3><pre data-language=\"makefile\" id=\"cFcQH\" class=\"ne-codeblock language-makefile\"><code>location ~* \\.(?:css(\\.map)?|js(\\.map)?|gif|svg|jfif|ico|cur|heic|webp|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv)$ {\n    # 静态资源设置一年强缓存 \n    expires 365d; \n    access_log off; \n}</code></pre><p id=\"uf391ced3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">一般会给静态资源设置一个较长的缓存。如果资源发生变化，会修改文件名。一般用 md5值做为文件名。</span></p><h2 id=\"BHWZj\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">root 与 alias</span></h2><p id=\"u8d8b17a1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">root 与 alias 决定到哪里在去访问实际的文件，区别在于 root 会拼接匹配到路径，alias 会替换匹配到的路径。我们看个实际的例子。</span></p><pre data-language=\"makefile\" id=\"XOKFY\" class=\"ne-codeblock language-makefile\"><code>location / {\n root /home/user/web; \n}\n\n请求 /a.jpg，实际请求的是 /home/user/web/a.jpg，找到图片\n\n把 root 换成 alias\nlocation / {\n alias /home/user/web; \n}\n\n请求 /a.jpg，实际请求的是 /home/user/weba.jpg，找到不图片了。因为 / 被替换掉了。解决的方法是把 / 补上\n\nlocation / {\n alias /home/user/web/; \n}\n\n也不是说 alias 必须以 / 结尾，如果location中 不是以 /结尾，alias 后面就不加 /\n\n在这个例子中 ，请求 /a/b.jpg ，实际查找 /home/user/web/b.jpg。 只是把 /a 去掉而已。\n\nlocation /a {\n alias /home/user/web; \n}\n</code></pre><p id=\"u68988bb2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们在用的时候，优先用 root。root 可以用在</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">http</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">server</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">location</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">if in location</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">，alias 只能用在</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">location</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。root 对末尾的斜杠并不在意，兼容性更好。 alias 可以作为 root 的补充来使用。</span></p><h2 id=\"U9afI\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">url 美化</span></h2><p id=\"u7e5b1c6b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们在开发的时候用的 url 是这样的</span></p><pre data-language=\"shell\" id=\"juiQ4\" class=\"ne-codeblock language-shell\"><code>/users?id=1</code></pre><p id=\"u3f1b3a9a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">让别人访问的时候可能是这样的</span></p><pre data-language=\"shell\" id=\"jJgOG\" class=\"ne-codeblock language-shell\"><code>/users/1</code></pre><p id=\"uca5f259e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">所以我们需要把</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">/users/1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">转为</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">/users?id=1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">,这时就需要 rewrite 出场了。</span></p><pre data-language=\"shell\" id=\"KQAty\" class=\"ne-codeblock language-shell\"><code>location /users/{\n    rewrite ^/users/(.*)$ /nodejs/id=$1? last;\n}\nlocation /nodejs/{\n   proxy_pass http://127.0.0.1:3000;\n}</code></pre><p id=\"ub36e6052\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当请求</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">/users/1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的时候，命中 location /users/ ，执行rewrite 指令， last flag 指示停止后面的rewrite 指令并做内部跳转，匹配到 location /nodejs/ ，经过 proxy_pass 指令，转到 nodejs 服务。</span></p><p id=\"u96ab3675\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">你可能对 last 表示疑惑，都已经是最后了，怎么又跳到 /nodejs 了呢？ 接下来，我详细讲解一下 nginx 的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">rewrite</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">模块。为什么说一个模块呢？因为与rewrite相关的是一组指令。</span></p><h2 id=\"vXteh\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">nginx http rewrite module 详解</span></h2><p id=\"ua15842eb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">简单来说，</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">ngx_http_rewrite_module</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> module 用正则匹配请求，改写请求，然后做跳转，可以是内部跳转，也可以是外部跳转。</span></p><p id=\"uc18d2ccc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">学习这个模块的时候 ，把 rewrite_log 打开，可以在 error log 里查看跳转信息</span></p><pre data-language=\"shell\" id=\"LV01Y\" class=\"ne-codeblock language-shell\"><code> rewrite_log on; \n error_log /home/log/test-error.log notice;</code></pre><p id=\"uae75b44e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意 notice 是必须的</span></p><h3 id=\"diG1M\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">顺序执行和循环跳转</span></h3><ol class=\"ne-ol\"><li id=\"u9bc7cdf4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">直接写在 server level 的 指令，顺序执行。</span></li><li id=\"u0e39e5bb\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">写在 location 中的指定顺序执行。可以跳到其它 location ,最多不超过 10次。</span></li></ol><p id=\"u66f0b6a3\" class=\"ne-p\"><span class=\"ne-text\">server{     rewrite ^/users/(.*)$ /show?</span><span class=\"ne-text\">user</span><span class=\"ne-text\">=</span><span class=\"ne-text\" style=\"color: teal\">$1</span><span class=\"ne-text\"> </span><em><span class=\"ne-text\" style=\"color: rgb(153, 153, 136)\">;</span></em><span class=\"ne-text\">     rewrite ^/teachers/(.*)$ /show?</span><span class=\"ne-text\">teacher</span><span class=\"ne-text\">=</span><span class=\"ne-text\" style=\"color: teal\">$1</span><span class=\"ne-text\"> </span><em><span class=\"ne-text\" style=\"color: rgb(153, 153, 136)\">;</span></em><span class=\"ne-text\"> } </span><span class=\"ne-text\" style=\"color: rgba(140, 140, 140, 0.8); font-size: 12px\">复制代码</span></p><p id=\"u77fafe3c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">请求 /users/1 ，先执行第一条</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">rewrite ^/users/(.*)$ /show?user=$1</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">再执行第二条</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">rewrite ^/teachers/(.*)$ /show?teacher=$1 ;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">虽然第一条匹配到了，还是会执行第二条。这就是顺序执行的意思。</span></p><pre data-language=\"shell\" id=\"niyXz\" class=\"ne-codeblock language-shell\"><code>location /{\n    rewrite ^/teachers/(.*)$ /show/$1;\n    rewrite ^/users/(.*) /show/$1;\n}\nlocation /show/{\n    rewrite ^/show/(.*)$ /users/$1 ;\n}</code></pre><p id=\"u9fb22f79\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">请求 /users/1 命中第一个location ,顺序执行第一个 rewrite,没命中，即使命中也会继续执行第二 rewrite ，命中。跳转到 第二个location /show/，执行 rewirte 又回跳回 / ，这样循环10次，报 500 错误，查看 error 日志可以看到说明。</span></p><pre data-language=\"shell\" id=\"dRsMC\" class=\"ne-codeblock language-shell\"><code>rewrite or internal redirection cycle while processing &quot;/show/1&quot;</code></pre><p id=\"u7157fe05\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这个过程演示了 location 中 rewrite 的执行逻辑。顺序执行，循环跳转。</span></p><p id=\"u33f50ea3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">rewrite module 中还有 5 个指令</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23break\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23break\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">break</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23if\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23if\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">if</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23return\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23return\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">return</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">rewrite</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, and </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23set\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23set\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">set</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。 return 可以直接返回，打断后面的 rewrite module 指令的执行。</span></p><pre data-language=\"shell\" id=\"ZjL9o\" class=\"ne-codeblock language-shell\"><code>location / {\n return 409;\n rewrite ^/teachers/(.*)$ /show/$1;\n}</code></pre><p id=\"uba80c885\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">执行 return 后，后面的指令就没有机会执行了。 set,break 比较简单，和其它语言差不多。下面着重讲下 rewirte 指令的 flag。</span></p><p id=\"u0074197f\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">rewrite</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">regex</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">replacement</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> [</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">flag</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">]</span></p><p id=\"u0174dfcc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">flag有四种</span></p><ul class=\"ne-ul\"><li id=\"u41f3799e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">last .停止执行后面的 ngx_http_rewrite_module 指令，并发起新的 location 匹配。</span></li><li id=\"uc7f4738e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">break. 停止执行后面的 ngx_http_rewrite_module 指令。然后没有后续了，不再发起 location 匹配。</span></li><li id=\"u90dc5b9d\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">redirect 执行 302跳转，后面的指令不再执行。</span></li><li id=\"uaa8d2929\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">permanent 执行 301跳转，后面的指令不再执行。</span></li></ul><p id=\"u9b1064f4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">last、break 停止执行的是 ngx_http_rewrite_module 指令，其它指令不受影响，还是会执行的。</span></p><p id=\"ub8cf5fdc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">regex 匹配的是路径部分</span></p><pre data-language=\"shell\" id=\"gULr2\" class=\"ne-codeblock language-shell\"><code>location / {\n   rewrite ^/teacher/(.*)$ /show1/$1 last;\n   rewrite ^/teacher/(.*) /show2/$1;\n}\nlocation /show1{\n return 900;\n}\nlocation /show2{\n return 901;\n}\n\ncurl http://localhost:3000/teacher/1\nHTTP/1.1 900\n\n因为 last 会终止后面的  ngx_http_rewrite_module 指令，所以 第二句 rewrite ^/teacher/(.*) /show2/$1 不会执行。第一句执行完后，跳到 /show1，返回 900\n\n如果把 last 换成  break\nHTTP/1.1 404\n\n因为 break 不再执行跳转，直接查找 show1/1 找不到，报 404.\n\n把 last 换成 redirect.\nHTTP/1.1 302 \n\n浏览器会请求两次。\n\n把 last 换成 permanent.\nHTTP/1.1 301 \n\n浏览器会请求两次。\n</code></pre><p id=\"u9c22dfd5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果 replacement 是 http开头，是可以直接跳转的</span></p><pre data-language=\"shell\" id=\"HzZj9\" class=\"ne-codeblock language-shell\"><code>location / {\n  rewrite ^/teacher/ http://juejin.cn\n}\n\ncurl http://localhost:3000/teacher/1\nHTTP/1.1 302 \nLocation: http://juejin.cn\n\n相当于 redirect 指令的效果。\n</code></pre><p id=\"u4ff6cd68\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">最后再讲下 if ，if 语句不复杂，但是非常有用，可以这样说，用 if 可以实现很多指令,但是用内置指令更简洁，还是要优先用指令。</span></p><p id=\"u7201f25b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">if ($param)</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果 $param 为空字符串或 0 为假，其它情况为真。</span></p><p id=\"ud9a92bc7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意 if 后面必须要有空格，否则报错。</span></p><pre data-language=\"shell\" id=\"f9i0l\" class=\"ne-codeblock language-shell\"><code>set $param '0';\nset $param 0;\nset $param '';\n\n这三种写法 $param 都为假，其它情况都为真</code></pre><p id=\"u498ad686\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用 = ,!=判断相等。</span></p><pre data-language=\"shell\" id=\"eeYha\" class=\"ne-codeblock language-shell\"><code> if ($request_method = POST){\n      return 403;\n }</code></pre><p id=\"ud0729f0c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意 是一个 = 不是两个=, 等号左右必须要有空格，否则报错</span></p><p id=\"u708dd84f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用正则表达式判断</span></p><pre data-language=\"shell\" id=\"rNqYt\" class=\"ne-codeblock language-shell\"><code>~ 区分大小写\nif ($http_user_agent ~ mobile)\n\n~* 不区分大小写\nif ($http_referer ~* juejin\\.cn)\n\n!~ 和 !~* 是对应的两个否定写法,不再举例了。</code></pre><p id=\"ue2ef03ba\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用 flag</span></p><pre data-language=\"shell\" id=\"YSVEx\" class=\"ne-codeblock language-shell\"><code>-f !-f  文件是否存在\nif (-f $request_filename)\nif (!-f $request_filename)\n\n-d !-d 目录是否存在\n-e !-e 文件或目录是否存在\n-x !-e 是否可执行\n</code></pre><h3 id=\"lR85n\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">return</span></h3><pre data-language=\"shell\" id=\"vCGHw\" class=\"ne-codeblock language-shell\"><code>return code [text];\nreturn code URL;\nreturn URL;</code></pre><pre data-language=\"shell\" id=\"AmSng\" class=\"ne-codeblock language-shell\"><code>location /admin/{\n    return 403 '没有访问权限';\n}\nlocation / {\n    return 302 $scheme://www.baidu.com$request_uri;\n}\n\nlocation /abc/{\n    return 404;\n}</code></pre><h2 id=\"wigWM\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">移动pc适配</span></h2><p id=\"uade972f1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们希望在访问 一个网址的时候，如果是在 pc端打开的时候，显示pc的页面，如果是在移动端打开的，显示移动端的页面。网址只有一个</span></p><pre data-language=\"shell\" id=\"A4Zzo\" class=\"ne-codeblock language-shell\"><code>server{\n {  \n    set $isMobile true;\n    \n    if ($http_user_agent ~* '(Android|webOS|IEMobile|iPhone|iPod|BlackBerry)') { \n        set $isMobile true;\n    }\n    \n    set $root  /home/duhongwei/web/pc;\n    if ($isMobile = true) {\n      set $root  /home/duhongwei/web/h5;\n    }\n    root $root;\n}</code></pre><p id=\"ud647d8b8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这个设置需要放在 server 下面，对于所有 location 有效。在 location 里如果有需要还可以修改 root,所以 set 一个 $isMobile 的变量，方便后面使用。</span></p><p id=\"uffaa7776\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">ipad 虽然是移动设置，但从尺寸上来看更接近 pc，所以页面在 ipad 打开，一般会显示 pc 的页面</span></p><h2 id=\"AwwzD\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">配置https服务</span></h2><p id=\"u60e83e32\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">虽然在开发的时候用 http 就行，但有的时候，必须要 https 才行。所以配置开发环境可能也得配置 https 服务。我们的目的是为了让服务跑起来，还是很简单的。</span></p><ol class=\"ne-ol\"><li id=\"u46813b6e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">申请证书</span></li><li id=\"uc3692e37\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">证书包含一个crt文件一个key文件，crt为证书，key为密钥</span></li><li id=\"uadfae00f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">配置nginx</span></li></ol><p id=\"u418f9059\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果你正在做一个项目，这个项目的域名证书应该是提前就申请好的。用这个证书就行。本地配 host ，配项目的线上域名，就可以测试了。</span></p><pre data-language=\"shell\" id=\"OIiDV\" class=\"ne-codeblock language-shell\"><code>server {\n    # 1 \n    listen       443 ssl;    \n    server_name  www.xxx.com; \n    \n    # 2\n    ssl_certificate      证书的绝对路径     \n    # 3\n    ssl_certificate_key  密钥的绝对路径\n               \n}   </code></pre><p id=\"ud02736ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">配置 https服务，只需要三步</span></p><ol class=\"ne-ol\"><li id=\"u05cbbfee\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">监听 443 端口</span></li><li id=\"u6b717952\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">设置证书的绝对路径</span></li><li id=\"uab56bf59\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">设置密钥的绝对路径</span></li></ol><p id=\"u7f206b18\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">只这三步就完成，很简单吧。</span></p><p id=\"uc01a60d1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">要启用 http2 也很简单， 只需要在 listen 后面加 http2 即可。</span></p><pre data-language=\"shell\" id=\"fMRMh\" class=\"ne-codeblock language-shell\"><code>listen 443 ssl http2;</code></pre><h2 id=\"nXnyw\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">请求地址末尾加斜杠与不加斜杠</span></h2><p id=\"u497be355\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">请求 juejin.cn/b 与 juejin.cn/b/ 有什么区别吗？ nginx解析起来区别就大了。</span></p><p id=\"u0c98d141\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不加斜杠,如果存在 b 文件,返回 文件 b 如果不存在文件b，但有文件夹 b， 301 到 b/,在浏览器中看到的现象是发了两个请求.如果 b下面没有index.html,返回 403,如果有，返回内容。</span></p><p id=\"u7dd5a823\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357339-bd37763d-61ff-4a2c-90bb-ea75d04549e8.webp\" width=\"1084\" id=\"u40f1913b\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></p><p id=\"ud5be5253\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果没有index.html，为什么是返回 403而不是 404呢？</span></p><p id=\"u8528c90e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这是因为 nginx如果找不到 index.html，会尝试浏览目录，默认是不允许的。</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">autoindex off;</span></p><p id=\"u35d0f21f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果既没有文件夹 b 也没有文件 b 返回 404</span></p><p id=\"u8e75b19f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">为什么访问 b/ 会去查找 b/index.html，这是因为 index指令默认是这样的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">index index.html</span></p><p id=\"u560f278a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 默默做了这么多，就是为了让我们用起来方便。如果从性能方面来考虑，写完整地址最好，别让nginx去猜了。用户怎么输入网址我们管不了，但是我们在写跳转地址的时候，最好是写完整地址。</span></p><h2 id=\"CWPPz\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">请求头信息对应的 nginx 变量</span></h2><p id=\"u3dcda632\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 中的有些变量有是规律，按规律可以方便记忆。</span></p><p id=\"ubc4d1c3d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357557-6afd3ab9-9044-40f9-83e3-1cb19d8bc7d4.webp\" width=\"612\" id=\"u62627197\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></p><p id=\"u254df157\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对每一个请求标头,都对应一个变量</span></strong></p><p id=\"ud673ad32\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">大小写不敏感，以 http_ 开头， - 改为 _ 。</span></p><ul class=\"ne-ul\"><li id=\"u43de74bd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">$http_accept</span></li><li id=\"u1912d1c2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">$http_cache_control</span></li></ul><p id=\"ub37a1da6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cookie 的中的变量</span></strong></p><p id=\"u9cc05a82\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">比如 cookie 中 包含 name=jack,用 $cookie_name 可以拿到 jack 这个值。</span></p><ul class=\"ne-ul\"><li id=\"ua73004c2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cookie_name</span></li></ul><p id=\"u87c0a48b\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">arg 中的变量</span></strong></p><p id=\"ufeef389c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">比如有这样的 get 请求 index.html?name=jack ,用 $arg_name 可以拿到 jack 这个值。</span></p><ul class=\"ne-ul\"><li id=\"u13e443b3\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">arg_name</span></li></ul><h2 id=\"tqRjc\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">nginx 接收客户端提交</span></h2><p id=\"u2da94e50\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当我们提交一个表单的时候，会生成一个请求的 header,body。在header中 Content-Length:123 标明 content 字节大小。nginx 接收到 header，先检查 header 大小，如果 header 大小超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_header_buffer_size</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的默认值 1K,并超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23large_client_header_buffers\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23large_client_header_buffers\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">large_client_header_buffers</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的默认值 8K nginx 会报错。</span></p><p id=\"ub8b49c99\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">检查 Content-Length ，如果超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_body_buffer_size</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">默认值 8K(除了 x86 的 64位系统是 16K），内存缓冲区无法接收，会存到</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_body_temp_path</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">指定的目录。但是接收的body总大小不是无限的，不能超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_max_body_size</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的默认值 1M。</span></p><p id=\"ue2d79638\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于大多数请求来讲，都是 get 请求，我们可以直接躺平，默认值即可。 get 请求没有 body，超限的情况可能是 cookie 过多,url 过长。一般来说，超出的可能性不大。</span></p><p id=\"u45cb714f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于 post 请求，当上传文件的时候，可能会超限。nginx 默认只能接收 1M 的内容,可以增加这个默认值。</span></p><pre data-language=\"shell\" id=\"KWqvc\" class=\"ne-codeblock language-shell\"><code>locatoin /upfile/ {\n    client_max_body_size:200M;\n}</code></pre><p id=\"ucce2f4bd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果网络状态不好，可能刚发一个字节，就断了，如果在默认 60 秒内没有再次发送，nginx 会中断链接。这样做是为了节省服务器资源。可以通过 修改</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_body_timeout</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">和</span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_header_timeout</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">改变默认值。</span></p><pre data-language=\"shell\" id=\"Rk2dQ\" class=\"ne-codeblock language-shell\"><code>server{\n  client_body_timeout 10s;\n  client_header_timeout 10s;\n}</code></pre><p id=\"u30f54797\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">60秒有点太保守了，可以减小这个值。</span></p><h2 id=\"MYplT\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">nginx gzip 压缩</span></h2><p id=\"u180fa6fb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip压缩的知识还是非常多的，不过只是启用gzip ,打开功能，还是很简单的。</span></p><pre data-language=\"shell\" id=\"Ce7GG\" class=\"ne-codeblock language-shell\"><code>server{\ngzip on;\ngzip_min_length 0;\n}</code></pre><p id=\"u85a18d40\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip 指令默认是 off,设置为 on 打开 gzip。如果只设置</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">gzip on</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip 可有不会生效，gzip 默认只对大于20字节的内容做处理。我们在测试的时候页面内容都很少，很容易少于 20字节</span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">gzip_min_length</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">,设为0 代表所有大小都压缩。</span></p><p id=\"ua4c4148f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">启用压缩后，在请求 /index.html 响应 200 的时候，查看 header，发现有两个增加，并且 Content-Length 不见了。</span></p><p id=\"uaf580ed7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Content-Encoding:gzip 内容的格式为 gzip,告诉浏览器，需要 gzip 解压再展示。</span></p><p id=\"u0c3d3d46\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Transfer-Encoding:chunked 数据是通过一系列块来传输的，省略 Content-Length ，为了得到内容大小，需要把每个 chunk 的大小 加起来。</span></p><p id=\"ub02267a4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">为什么打开 gzip 后 content-length 信息没有了呢？ 这是因为 nginx 的压缩是异步的，发送头的时候，nginx 可能正在压缩，不知道压缩完成的文件大小。</span></p><p id=\"u7d6f1ab3\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357432-91891d18-8f05-4c09-be78-b5e9cd1abc17.webp\" width=\"666\" id=\"u16f6e592\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></p><h3 id=\"sWtIX\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">指定需要 gzip 的文件</span></h3><p id=\"udc0592b1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们访问 /index.css ,发现并没有压缩，这是因为 gzip ，默认只压缩 text/html 类型的文件。</span></p><p id=\"u83c2bbdc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">增加 text/css 类型后，css 文件 也可以压缩了。</span></p><pre data-language=\"shell\" id=\"nQKWq\" class=\"ne-codeblock language-shell\"><code>gzip_types text/html,text/css;</code></pre><h3 id=\"MTpCP\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">压缩级别。</span></h3><p id=\"u1e2aa04c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip 有9个压缩级别，越高，压缩效果越好，但是对 cpu的消耗越多。默认压缩级别为 1 。我们可以设置一个合适的级别，比如 2；</span></p><pre data-language=\"shell\" id=\"BFAY5\" class=\"ne-codeblock language-shell\"><code>gzip_comp_level 2;</code></pre><h3 id=\"BMML1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">gzip_static</span></h3><p id=\"u433afe4b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前面讲的nginx 处理 gzip的方式是 服务器负责压缩，这样会消耗掉很多 cpu 资源。我们可以先把文件压缩成 gzip，nginx 直接拿 gzip过的文件就行了。预处理的好处不光是节省了 cpu 压缩时间，还可以 让 nginx 可以用 使用</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">sendfile</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">系统调用来传输文件,性能得到提高。</span></p><p id=\"uf4fa6a4c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">新版本的 nginx 已经 默认安装了这个模块，如果是老版的 nginx 这个模块需要安装一下。</span></p><pre data-language=\"shell\" id=\"EdAuu\" class=\"ne-codeblock language-shell\"><code>gzip_static always; </code></pre><p id=\"u0b84e93f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果加上这句,nginx 不报错，说明 gzip_static 模块已经安装了。</span></p><p id=\"u5bd24e94\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip_static 可以有三个值。</span></p><ul class=\"ne-ul\"><li id=\"uac9fc402\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">off</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">默认值。 不启用 gzip_static。gzip功能还是可以用的。</span></li><li id=\"u7f7a599f\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">on</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">启用。 当客户端支持 gzip的时候，发送压缩文件，不支持的时候发送原文件。</span></li><li id=\"uf504fc83\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">always</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">总是。 不管客户端是否支持，都优先发送压缩文件。如果没有压缩文件，再发送原文件。</span></li></ul><p id=\"u76e12996\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">实操的时候，用 always 比较好。现在不支持 gzip 的浏览器太少了，这样可以免掉 nginx 判断的步骤，对性能有所提高。为了方便 nginx 查找（文件越多，查找越慢），只保留 gzip 文件，原文件全部删除。</span></p><h2 id=\"suA6m\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">负载均衡</span></h2><pre data-language=\"shell\" id=\"ZfBTe\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    server 192.168.1.1;\n    server 192.168.1.2;\n}\n\nserver {\n    listen       80;\n    server_name  _;\n    location / {\n        proxy_pass   http://servers;\n        proxy_set_header        Host    $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}</code></pre><p id=\"ua7c4b1ed\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 常用的负载均衡 是</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">upstream</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">来完成的。默认采用轮询的方式依次访问各个服务器。可以给每个服务器加权重，调整访问的频率，权重越高，被访问的越频繁。</span></p><pre data-language=\"shell\" id=\"VqLV2\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    server 192.168.1.1 weight=1;\n    server 192.168.1.2 weight=2;\n}</code></pre><p id=\"u5da0550f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">根据 ip 也可以分配请求。这样能保证同一个用户可以由同一个服务器来服务，可以解决登录 session 的问题。但是根据 ip 分配 可能导致某些服务器请求过多，又不能再做调整。所以解决 登录 session 的问题，可以用统一的 redis 服务来解决。</span></p><pre data-language=\"shell\" id=\"C5VZ9\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    ip_hash;\n    server 192.168.1.1 ;\n    server 192.168.1.2 ;\n}</code></pre><p id=\"u35a7e0b8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">根据 url 分配 请求。比如这样的场景， 资源（图片等静态文件）服务器从源服务器拉取资源后，下次请求会再次落到这个资源服务器，就可以直接返回结果 ，不用再从源服务器请求资源了。</span></p><pre data-language=\"shell\" id=\"I0lEv\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    hash $request_uri;\n    server 192.168.1.1 ;\n    server 192.168.1.2 ;\n}</code></pre><p id=\"u061ca8e5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">最后再介绍一下最小连接数方案。在这种场景下，least_conn算法很简单，首选遍历后端集群，比较每个后端的conns/weight（连接数除权重），选取该值最小的后端。 如果有多个后端的conns/weight值同为最小的，那么对它们采用加权轮询算法。</span></p><pre data-language=\"shell\" id=\"c2Eyy\" class=\"ne-codeblock language-shell\"><code>\nupstream servers {\n    least_conn;\n    server 192.168.1.1 weight=2;\n    server 192.168.1.2 weight=1 ;\n}</code></pre></div>",
    "body": "tags: [nginx,配置]<br />categories: 学无止境<br />copyright_author_href: https://juejin.cn/user/1953149470376301<br />copyright_url: https://juejin.cn/post/7134540187064860679#heading-34<br />copyright_author: IAM17<br />cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png#clientId=u81110d56-3058-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=uc10ad34f&margin=%5Bobject%20Object%5D&name=%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220824161836.png&originHeight=393&originWidth=666&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=84791&status=done&style=none&taskId=ud1e4e7a9-8543-465f-b83c-ba4d1551b6f&title=\n\n---\n\n- [ ] ![微信截图_20220824161836.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png#averageHue=%23dbe3db&clientId=u81110d56-3058-4&from=ui&id=uc10ad34f&originHeight=393&originWidth=666&originalType=binary&ratio=1&rotation=0&showTitle=false&size=84791&status=done&style=none&taskId=ud1e4e7a9-8543-465f-b83c-ba4d1551b6f&title=)\n\n> 环境为 CentOS 7。 nginx 版本 1.21\n\n\n<a name=\"sttfd\"></a>\n## 配置文件入口\n```shell\n/etc/nginx/nginx.conf\n```\n这是入口文件，这个文件里有这样一句：\n```shell\ninclude /etc/nginx/conf.d/*.conf;\n```\n各个网站的配置文件是放在 conf.d 目录下的。这里面的所有 .conf 文件都会被读取。我们增加一个 test.conf。 yourname 就是你的用户名。在 /home/yourname/web/test/ 下面增加一个 index.html文件 ，文件。文件内容为 hello。\n```shell\nserver{\n  listen 3000;\n  server_name _;\n  location / {\n    root /home/yourname/web/test/;\n  }\n}\n\n```\n启动 nginx，如果已经启动，reload 配置文件\n```shell\n# 启动\nsudo nginx \n# 如果已经启动，重新加载配置\nsudo nginx -s reload\n```\n用 ip 或 localhost:3000 用浏览器访问网站，显示 hello。测试方法也可以用 curl localhost:3000，这样可能会更方便些。\n<a name=\"nCTV0\"></a>\n## 文件类型\n对于我们请求的内容，浏览器的处理方式是不一样的。浏览器如何判断内容，是根据 响应头 Content-Type 在入口配置文件 nginx.conf 中有这样两句：\n```shell\ninclude             /etc/nginx/mime.types;\n\ndefault_type        application/octet-stream;\n```\n\nmine.types 是 Content-type 和文件后缀名的映射表。比如 xx.css 文件的 Content-type 是 text/css 。 default_type 是默认的 type。比如当访问 /a 的时候，如果 a 文件存在，nginx会返回 a 文件，响应头 Content-type：application/octet-stream。 浏览器对application/octet-stream的处理方式是下载，而不是展示。<br />如果我们的请求地址是这样的 /a.html,/b.css, nginx 都可以自动处理。但有的时候，可能请求的地址是这样的 /a,这时就需要我们手动指定 type 类型。指定 type 类型很简单，有两种方法。\n\n```shell\nlocation /css {\n  add_header Content-type text/css;\n}\nlocation /css {\n  default_type  text/css;\n}\n```\n<a name=\"WnI9G\"></a>\n## 自定义log\n打开 /etc/nginx/nginx.conf 找到 log_format\n```shell\n log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                    '$status $body_bytes_sent \"$http_referer\" '\n                    '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n```\n对于开发来说可以去掉 ua，ua 很长，去掉可以方便查看。尤其对于初学者，建议加上 $request_filename ，这个变量代表的是访问的实际文件路径，对于理解各种指令的效果，查找错误非常有帮助。<br />在入口的配置文件中用 Log_foramt定义了一个 main。我们可以定义一个 dev，按你所需求选用需要的内容即可。 使用的时候，直接用 dev这个名字就行。\n```shell\n log_format  dev  '[$time_local] \"$request\" $request_filename'\n                   '$status $body_bytes_sent \"$http_referer\" '\n access_log /home/duhongwei/log/access.log dev;\n```\n<a name=\"HERic\"></a>\n## location 匹配规则\n@ 匹配规则在后面的 try_files 中有举例<br />location 按如下优先级匹配\n\n1. = 绝对匹配，一个字符也不能差\n2. ^~ 前缀匹配\n3. ~（区分大小写）， ~*(不区分大小写) 正则匹配\n4. 普通前缀匹配\n\n2，4的匹配是匹配最长优先。 3 的匹配是按顺序，写在前面的优先。\n<a name=\"hfxlS\"></a>\n### 完全匹配\n```shell\nlocation = /abc {\n   return 900;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901\n```\nlocation = abc 虽然只少了 / ，但这样是匹配不到的，一个字符也不能差。完全匹配优先级最高，无论写在前面还是后面。\n<a name=\"tdUAk\"></a>\n### ^~ 前端缀匹配\n```shell\n# 正则匹配\nlocation ~ abc {\n   return 900;\n}\n# 前缀匹配\nlocation ^~  /a {\n   return 901;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901\n```\n^~ 匹配的优先级高于正则匹配。<br />初看到 ^~ 的人会误以为是正则匹配。这个要注意下，这个是前缀匹配，就是从前向后一个字符一个字符匹配。\n```shell\n# 普通前缀匹配\n/abc/ {\n}\n\n# 前缀匹配\n^~ /abc/ {\n}\n```\n这两种写法的匹配方式是一样，^~ 的优先级更高。\n<a name=\"W5mQ9\"></a>\n### 正则匹配\n```shell\n# 普通前缀匹配\nlocation  /abcd {\n   return 901;\n}\n# 正则匹配\nlocation ~ /ab {\n   return 902;\n}\n\ncurl -I localhost:3000/abcd\nHTTP/1.1 902\n```\n正则匹配的优先级高于普通前缀匹配。\n```shell\n# 正则匹配\nlocation ~ /ab {\n   return 901;\n}\n\n# 正则匹配\nlocation ~ /abc {\n   return 902;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901\n```\n正则匹配是按顺序来的，前面的匹配成功后面的就不再匹配了。<br />从性能上来说，尽量不要用正则，正则匹配性能最低。\n<a name=\"qJ719\"></a>\n### 前缀匹配最长优先\n```shell\nlocation  /abc {\n   return 901;\n}\nlocation  /abcd {\n   return 902;\n}\n\nlocation ^~ /def {\n   return 903;\n}\nlocation ^~ /defg {\n   return 904;\n}\n\n\ncurl -I localhost:3000/abc\nHTTP/1.1 902\n\ncurl -I localhost:3000/defg\nHTTP/1.1 904\n```\n<a name=\"hnSqW\"></a>\n## pass_proxy 代理\n在前端代理主要是为了跨域。虽然前端跨域有多种方法，各有利弊，但用代理来跨域对开发是最友好的。用代理可以不用修改产品代码切换线上线下，非常安全。pass_proxy 默认会把 cookie 也一同转发。 常用的配置非常简单。\n<a name=\"r6G58\"></a>\n### 不带斜杠\n前端 /api/user<br />后端 /api/user\n```shell\n location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001;\n }\n```\n不带斜杠把 path 直接拼接在 url后面；\n<a name=\"wtLKW\"></a>\n### 带斜杠\n前端 /api/user<br />后端 /user\n```shell\n location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001/;\n }\n```\n带斜杠会先去掉匹配到的 path, 再拼接。\n<a name=\"Selua\"></a>\n### 正则匹配的时候不能带斜杠\n~ 区分大小写正则匹配 ，~* 不区分大小写正则匹配 。location 用正则匹配的时候，proxy_pass 后面不能以 / 结尾，因为 nginx 不能处理这种情况。\n```shell\n location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001/web$request_uri;\n }\n```\n本例中，请求 localhost:3000/ 会导致 nginx 报错。\n<a name=\"ki2Rm\"></a>\n### 斜杠后面加路径\n前端 /api/user<br />后端 /web/api/user<br /> location ^~ /api/ {      proxy_pass http://127.0.0.1:3001/web$request_uri;  } 复制代码\n<a name=\"QEW4S\"></a>\n### 代理之前rewrite\n```shell\nlocation /search/ {\n    rewrite    /search/([^/]+) /s?wd=$1 break;\n    proxy_pass https://127.0.0.1:3001;\n}\n```\n<a name=\"YBJVk\"></a>\n### 服务端获取真实ip\n反向代理: 简单来说 proxy_pass 把请求转发到其它服务地址的时候，就是反向代理。<br />如果是客户端与服务器直接连接，nginx 变量 $remote_addr 就可以拿到 真实ip。$remote_addr 是不能伪造的。但是如果 客户端是经过反向代理连接的服务器，服务器能拿到的只有代理服务器的 IP。为了能拿到客户端真实 IP,代理服务器在转发的时候需要加上一个http 扩展头部 X-Forwarded-For。<br />所有代理的 ip 依次列出来，从远及近。\n```makefile\nX-Forwarded-For: IP0, IP1, IP2\n```\nX-Forwarded-For 是一个 HTTP 扩展头部。HTTP/1.1（RFC 2616）协议并没有对它的定义，它最开始是由 Squid 这个缓存代理软件引入，用来表示 HTTP 请求端真实 IP。如今它已经成为事实上的标准，被各大 HTTP 代 理、负载均衡等转发服务广泛使用，并被写入 RFC 7239（Forwarded HTTP Extension）标准之中。\n```makefile\nlocation /api/ {\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_pass http://127.0.0.1:3000/;\n\n}\n```\n$proxy_add_x_forwarded_for变量包含客户端请求头中的\"X-Forwarded-For\"，与$remote_addr用逗号分开，如果没有\"X-Forwarded-For\" 请求头，则$proxy_add_x_forwarded_for等于$remote_addr。$remote_addr变量的值是客户端的IP。<br />可能你会担心，ip会不会被伪造。即使客户端伪造了 ip，nginx也会用真实的 ip 进行重置。所以 $remote_addr 是可信的。\n<a name=\"re52p\"></a>\n### try_files\n```properties\ntry_files file ... uri;\ntry_files file ... =code;\n```\n举两个例子，对应这两种语法。\n```makefile\nlocation /images/ {\n    try_files $uri /images/default.gif;\n}\n\nlocation = /images/default.gif {\n    expires 30d;\n}\n```\n```makefile\nlocation / {\n    try_files $uri $uri/index.html $uri.html =404;\n}\n```\n=404 的 等号 是必须的<br />try_file 后面必须有一个file, 一个 url 或 code,file 可以有多个。<br />简单来说，try_file 按顺序检查 file,如果是文件夹，请在 file后加 / ，如果 file 都不存在，根据最后一个参数做跳转。<br />借这个机会说一个 @ 在location中的用法。 @相当于命名了一个变量。\n```makefile\nlocation / {\n    try_files /system/maintenance.html\n              $uri $uri/index.html $uri.html\n              @mongrel;\n}\nlocation @mongrel {\n    proxy_pass http://mongrel;\n}\n```\ntry_files 的一个应用场景就是单面应用.\n```makefile\nlocation / {\n try_files $uri $uri/ /index.html\n \n}\n```\n如果请求的是 /a, 首先会查找 a 文件 是否存在，然后找 a 目录是否存在,如果都不存在，转到 /index.html。 再次命中 location / ，再次执行 try_files，这回找到index.html 返回。<br />注意：如果 index.html 不存在，会报 500，所以用 try_files的时候，要避免多次命中，最后的跳转最好转到别处。\n```makefile\nlocation / {\n try_files $uri $uri/ /index.html \n}\nlocation /index.html{\n}\n```\n这样修改后，只经历一次尝试，如果找不到，会报 404，不是 500。\n<a name=\"ngmIt\"></a>\n## error_page\n```makefile\nerror_page code ... [=[response]] uri;\n```\nerror_page 会产生内部跳转<br />举例\n```makefile\nerror_page 404             /404.html;\nerror_page 500 502 503 504 /50x.html;\nerror_page 404 =200 /empty.gif;\n\nerror_page 404 =301 http://example.com/notfound.html;\n\nlocation / {\n    error_page 404 = @fallback;\n}\n\nlocation @fallback {\n    proxy_pass http://backend;\n}\n\n```\n如果找不到直接跳 404 页面没什么问题，但是如果是跳到首页，或是显示一张图片，<br />如果这样写\n```makefile\nerror_page 404 /index.html\n```\n当访问不存在的页面的时候，会跳到首页，但是状态码会显示 404。如果要显示 200,可以指定\n```makefile\nerror_page 404 =200 /index.html\n```\n<a name=\"ri2td\"></a>\n## 页面缓存\nhttp header 相关的缓存有两种\n\n1. 强制缓存\n2. 协商缓存\n\n响应头部有两个值代表是否要强制缓存。Cache-Control 和 expires。至于为什么有两个头，expires 是历史遗留。<br />如果 **不需要强制缓存** nginx可以这样配置\n```makefile\nexpires -1\n```\nnginx 发回的头部\n```makefile\nCache-Control:no-cache\nExpires:Thu, 18 Aug 2022 06:55:23 GMT \n```\nExpires 的时间比当前早一秒。<br />也可以不配置 nginx。 默认是关闭强制缓存的 expires off<br />expires off 和 expires -1 都可以关闭强制缓存，但响应头不一样，expires off 不会发送 Cache-Control 和 expires。<br />如果需要强制缓存 这样配置\n```makefile\nexpires 1d;\n```\n1d 表示强制缓存一天。但是浏览器是否采用强制缓存还取决于浏览器的具体实现。<br />比如你在浏览器中直接请求一个图片地址（网络上随便找张图片就成），查看响应头，一般都会带有 expires 和 Cache-control ，下次请求应该会命中强制缓存，但是，下次请求的时候走的是协商缓存，状态码是 304。为什么会这样呢？因为chrome 在直接请求图片的时候 在请求头中加上了 cache-control:max-age=0,表明本次请求不会采用强制缓存<br />当强制刷新的时候，值变为 no-cache，响应码 200。浏览器忽略强制缓存，服务端忽略协商缓存，重新返回内容。\n```makefile\ncache-control:no-cache\npragma:no-cache\n```\n不光是图片，chrome 直接访问 html 也不会命中强制缓存。对于浏览器的这个策略也是合理的。当访问一个网站的时候，我们第一个请求的是网站首页 index.html。如果首页被强制缓存了 10天，那么可能 10 天内用户看到的都是旧内容。<br />cache-control：**no-store** 这个字段就是告诉浏览器不进行缓存。这个最彻底，无论是强制缓存还是协商缓存都会关闭。nginx 中这样配置\n```makefile\nadd_header Cache-Control no-sotre;\n```\ncache-control：**no-cache** 关闭强制缓存，但还是会走协商缓存。<br />关闭了强制缓存就会走协商缓存，Last-Modified、etag， nginx 都会默认加上。\n<a name=\"uLu9Z\"></a>\n### 给图片等静态资源加强缓存\n```makefile\nlocation ~* \\.(?:css(\\.map)?|js(\\.map)?|gif|svg|jfif|ico|cur|heic|webp|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv)$ {\n    # 静态资源设置一年强缓存 \n    expires 365d; \n    access_log off; \n}\n```\n一般会给静态资源设置一个较长的缓存。如果资源发生变化，会修改文件名。一般用 md5值做为文件名。\n<a name=\"BHWZj\"></a>\n## root 与 alias\nroot 与 alias 决定到哪里在去访问实际的文件，区别在于 root 会拼接匹配到路径，alias 会替换匹配到的路径。我们看个实际的例子。\n```makefile\nlocation / {\n root /home/user/web; \n}\n\n请求 /a.jpg，实际请求的是 /home/user/web/a.jpg，找到图片\n\n把 root 换成 alias\nlocation / {\n alias /home/user/web; \n}\n\n请求 /a.jpg，实际请求的是 /home/user/weba.jpg，找到不图片了。因为 / 被替换掉了。解决的方法是把 / 补上\n\nlocation / {\n alias /home/user/web/; \n}\n\n也不是说 alias 必须以 / 结尾，如果location中 不是以 /结尾，alias 后面就不加 /\n\n在这个例子中 ，请求 /a/b.jpg ，实际查找 /home/user/web/b.jpg。 只是把 /a 去掉而已。\n\nlocation /a {\n alias /home/user/web; \n}\n\n```\n我们在用的时候，优先用 root。root 可以用在 http, server, location, if in location，alias 只能用在 location。root 对末尾的斜杠并不在意，兼容性更好。 alias 可以作为 root 的补充来使用。\n<a name=\"U9afI\"></a>\n## url 美化\n我们在开发的时候用的 url 是这样的\n```shell\n/users?id=1\n```\n让别人访问的时候可能是这样的\n```shell\n/users/1\n```\n所以我们需要把 /users/1 转为 /users?id=1 ,这时就需要 rewrite 出场了。\n```shell\nlocation /users/{\n    rewrite ^/users/(.*)$ /nodejs/id=$1? last;\n}\nlocation /nodejs/{\n   proxy_pass http://127.0.0.1:3000;\n}\n```\n当请求/users/1 的时候，命中 location /users/ ，执行rewrite 指令， last flag 指示停止后面的rewrite 指令并做内部跳转，匹配到 location /nodejs/ ，经过 proxy_pass 指令，转到 nodejs 服务。<br />你可能对 last 表示疑惑，都已经是最后了，怎么又跳到 /nodejs 了呢？ 接下来，我详细讲解一下 nginx 的 [rewrite](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html) 模块。为什么说一个模块呢？因为与rewrite相关的是一组指令。\n<a name=\"vXteh\"></a>\n## nginx http rewrite module 详解\n简单来说， ngx_http_rewrite_module module 用正则匹配请求，改写请求，然后做跳转，可以是内部跳转，也可以是外部跳转。<br />学习这个模块的时候 ，把 rewrite_log 打开，可以在 error log 里查看跳转信息\n```shell\n rewrite_log on; \n error_log /home/log/test-error.log notice;\n```\n注意 notice 是必须的\n<a name=\"diG1M\"></a>\n### 顺序执行和循环跳转\n\n1. 直接写在 server level 的 指令，顺序执行。\n2. 写在 location 中的指定顺序执行。可以跳到其它 location ,最多不超过 10次。\n\nserver{     rewrite ^/users/(.*)$ /show?user=$1 _;_     rewrite ^/teachers/(.*)$ /show?teacher=$1 _;_ } 复制代码<br />请求 /users/1 ，先执行第一条 rewrite ^/users/(.*)$ /show?user=$1 再执行第二条 rewrite ^/teachers/(.*)$ /show?teacher=$1 ; 虽然第一条匹配到了，还是会执行第二条。这就是顺序执行的意思。\n```shell\nlocation /{\n    rewrite ^/teachers/(.*)$ /show/$1;\n    rewrite ^/users/(.*) /show/$1;\n}\nlocation /show/{\n    rewrite ^/show/(.*)$ /users/$1 ;\n}\n```\n请求 /users/1 命中第一个location ,顺序执行第一个 rewrite,没命中，即使命中也会继续执行第二 rewrite ，命中。跳转到 第二个location /show/，执行 rewirte 又回跳回 / ，这样循环10次，报 500 错误，查看 error 日志可以看到说明。\n```shell\nrewrite or internal redirection cycle while processing \"/show/1\"\n```\n这个过程演示了 location 中 rewrite 的执行逻辑。顺序执行，循环跳转。<br />rewrite module 中还有 5 个指令 [break](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23break), [if](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23if), [return](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23return), [rewrite](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite), and [set](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23set)。 return 可以直接返回，打断后面的 rewrite module 指令的执行。\n```shell\nlocation / {\n return 409;\n rewrite ^/teachers/(.*)$ /show/$1;\n}\n```\n执行 return 后，后面的指令就没有机会执行了。 set,break 比较简单，和其它语言差不多。下面着重讲下 rewirte 指令的 flag。<br />**rewrite** regex replacement [flag]<br />flag有四种\n\n- last .停止执行后面的 ngx_http_rewrite_module 指令，并发起新的 location 匹配。\n- break. 停止执行后面的 ngx_http_rewrite_module 指令。然后没有后续了，不再发起 location 匹配。\n- redirect 执行 302跳转，后面的指令不再执行。\n- permanent 执行 301跳转，后面的指令不再执行。\n\nlast、break 停止执行的是 ngx_http_rewrite_module 指令，其它指令不受影响，还是会执行的。<br />regex 匹配的是路径部分\n```shell\nlocation / {\n   rewrite ^/teacher/(.*)$ /show1/$1 last;\n   rewrite ^/teacher/(.*) /show2/$1;\n}\nlocation /show1{\n return 900;\n}\nlocation /show2{\n return 901;\n}\n\ncurl http://localhost:3000/teacher/1\nHTTP/1.1 900\n\n因为 last 会终止后面的  ngx_http_rewrite_module 指令，所以 第二句 rewrite ^/teacher/(.*) /show2/$1 不会执行。第一句执行完后，跳到 /show1，返回 900\n\n如果把 last 换成  break\nHTTP/1.1 404\n\n因为 break 不再执行跳转，直接查找 show1/1 找不到，报 404.\n\n把 last 换成 redirect.\nHTTP/1.1 302 \n\n浏览器会请求两次。\n\n把 last 换成 permanent.\nHTTP/1.1 301 \n\n浏览器会请求两次。\n\n```\n如果 replacement 是 http开头，是可以直接跳转的\n```shell\nlocation / {\n  rewrite ^/teacher/ http://juejin.cn\n}\n\ncurl http://localhost:3000/teacher/1\nHTTP/1.1 302 \nLocation: http://juejin.cn\n\n相当于 redirect 指令的效果。\n\n```\n最后再讲下 if ，if 语句不复杂，但是非常有用，可以这样说，用 if 可以实现很多指令,但是用内置指令更简洁，还是要优先用指令。<br />if ($param) 如果 $param 为空字符串或 0 为假，其它情况为真。<br />注意 if 后面必须要有空格，否则报错。\n```shell\nset $param '0';\nset $param 0;\nset $param '';\n\n这三种写法 $param 都为假，其它情况都为真\n```\n用 = ,!=判断相等。\n```shell\n if ($request_method = POST){\n      return 403;\n }\n```\n注意 是一个 = 不是两个=, 等号左右必须要有空格，否则报错<br />用正则表达式判断\n```shell\n~ 区分大小写\nif ($http_user_agent ~ mobile)\n\n~* 不区分大小写\nif ($http_referer ~* juejin\\.cn)\n\n!~ 和 !~* 是对应的两个否定写法,不再举例了。\n```\n用 flag\n```shell\n-f !-f  文件是否存在\nif (-f $request_filename)\nif (!-f $request_filename)\n\n-d !-d 目录是否存在\n-e !-e 文件或目录是否存在\n-x !-e 是否可执行\n\n```\n<a name=\"lR85n\"></a>\n### return\n```shell\nreturn code [text];\nreturn code URL;\nreturn URL;\n```\n```shell\nlocation /admin/{\n    return 403 '没有访问权限';\n}\nlocation / {\n    return 302 $scheme://www.baidu.com$request_uri;\n}\n\nlocation /abc/{\n    return 404;\n}\n```\n<a name=\"wigWM\"></a>\n## 移动pc适配\n我们希望在访问 一个网址的时候，如果是在 pc端打开的时候，显示pc的页面，如果是在移动端打开的，显示移动端的页面。网址只有一个\n```shell\nserver{\n {  \n    set $isMobile true;\n    \n    if ($http_user_agent ~* '(Android|webOS|IEMobile|iPhone|iPod|BlackBerry)') { \n        set $isMobile true;\n    }\n    \n    set $root  /home/duhongwei/web/pc;\n    if ($isMobile = true) {\n      set $root  /home/duhongwei/web/h5;\n    }\n    root $root;\n}\n```\n这个设置需要放在 server 下面，对于所有 location 有效。在 location 里如果有需要还可以修改 root,所以 set 一个 $isMobile 的变量，方便后面使用。<br />ipad 虽然是移动设置，但从尺寸上来看更接近 pc，所以页面在 ipad 打开，一般会显示 pc 的页面\n<a name=\"AwwzD\"></a>\n## 配置https服务\n虽然在开发的时候用 http 就行，但有的时候，必须要 https 才行。所以配置开发环境可能也得配置 https 服务。我们的目的是为了让服务跑起来，还是很简单的。\n\n1. 申请证书\n2. 证书包含一个crt文件一个key文件，crt为证书，key为密钥\n3. 配置nginx\n\n如果你正在做一个项目，这个项目的域名证书应该是提前就申请好的。用这个证书就行。本地配 host ，配项目的线上域名，就可以测试了。\n```shell\nserver {\n    # 1 \n    listen       443 ssl;    \n    server_name  www.xxx.com; \n    \n    # 2\n    ssl_certificate      证书的绝对路径     \n    # 3\n    ssl_certificate_key  密钥的绝对路径\n               \n}   \n```\n配置 https服务，只需要三步\n\n1. 监听 443 端口\n2. 设置证书的绝对路径\n3. 设置密钥的绝对路径\n\n只这三步就完成，很简单吧。<br />要启用 http2 也很简单， 只需要在 listen 后面加 http2 即可。\n```shell\nlisten 443 ssl http2;\n```\n<a name=\"nXnyw\"></a>\n## 请求地址末尾加斜杠与不加斜杠\n请求 juejin.cn/b 与 juejin.cn/b/ 有什么区别吗？ nginx解析起来区别就大了。<br />不加斜杠,如果存在 b 文件,返回 文件 b 如果不存在文件b，但有文件夹 b， 301 到 b/,在浏览器中看到的现象是发了两个请求.如果 b下面没有index.html,返回 403,如果有，返回内容。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357339-bd37763d-61ff-4a2c-90bb-ea75d04549e8.webp#averageHue=%23f9faf6&clientId=u81110d56-3058-4&from=paste&id=u40f1913b&originHeight=160&originWidth=1084&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue5f6264f-e021-4309-8236-61b09768564&title=)<br />如果没有index.html，为什么是返回 403而不是 404呢？<br />这是因为 nginx如果找不到 index.html，会尝试浏览目录，默认是不允许的。autoindex off;<br />如果既没有文件夹 b 也没有文件 b 返回 404<br />为什么访问 b/ 会去查找 b/index.html，这是因为 index指令默认是这样的 index index.html<br />nginx 默默做了这么多，就是为了让我们用起来方便。如果从性能方面来考虑，写完整地址最好，别让nginx去猜了。用户怎么输入网址我们管不了，但是我们在写跳转地址的时候，最好是写完整地址。\n<a name=\"CWPPz\"></a>\n## 请求头信息对应的 nginx 变量\nnginx 中的有些变量有是规律，按规律可以方便记忆。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357557-6afd3ab9-9044-40f9-83e3-1cb19d8bc7d4.webp#averageHue=%23fafafa&clientId=u81110d56-3058-4&from=paste&id=u62627197&originHeight=266&originWidth=612&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u45c731cd-b9f3-404e-bfde-5a9a76ba630&title=)<br />**对每一个请求标头,都对应一个变量**<br />大小写不敏感，以 http_ 开头， - 改为 _ 。\n\n- $http_accept\n- $http_cache_control\n\n**cookie 的中的变量**<br />比如 cookie 中 包含 name=jack,用 $cookie_name 可以拿到 jack 这个值。\n\n- cookie_name\n\n**arg 中的变量**<br />比如有这样的 get 请求 index.html?name=jack ,用 $arg_name 可以拿到 jack 这个值。\n\n- arg_name\n<a name=\"tqRjc\"></a>\n## nginx 接收客户端提交\n当我们提交一个表单的时候，会生成一个请求的 header,body。在header中 Content-Length:123 标明 content 字节大小。nginx 接收到 header，先检查 header 大小，如果 header 大小超过 [client_header_buffer_size](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size) 的默认值 1K,并超过 [large_client_header_buffers](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23large_client_header_buffers) 的默认值 8K nginx 会报错。<br />检查 Content-Length ，如果超过 [client_body_buffer_size](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size) 默认值 8K(除了 x86 的 64位系统是 16K），内存缓冲区无法接收，会存到 [client_body_temp_path](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path) 指定的目录。但是接收的body总大小不是无限的，不能超过 [client_max_body_size](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size) 的默认值 1M。<br />对于大多数请求来讲，都是 get 请求，我们可以直接躺平，默认值即可。 get 请求没有 body，超限的情况可能是 cookie 过多,url 过长。一般来说，超出的可能性不大。<br />对于 post 请求，当上传文件的时候，可能会超限。nginx 默认只能接收 1M 的内容,可以增加这个默认值。\n```shell\nlocatoin /upfile/ {\n    client_max_body_size:200M;\n}\n```\n如果网络状态不好，可能刚发一个字节，就断了，如果在默认 60 秒内没有再次发送，nginx 会中断链接。这样做是为了节省服务器资源。可以通过 修改 [client_body_timeout](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout) 和[client_header_timeout](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout) 改变默认值。\n```shell\nserver{\n  client_body_timeout 10s;\n  client_header_timeout 10s;\n}\n```\n60秒有点太保守了，可以减小这个值。\n<a name=\"MYplT\"></a>\n## nginx gzip 压缩\ngzip压缩的知识还是非常多的，不过只是启用gzip ,打开功能，还是很简单的。\n```shell\nserver{\ngzip on;\ngzip_min_length 0;\n}\n```\ngzip 指令默认是 off,设置为 on 打开 gzip。如果只设置 gzip on gzip 可有不会生效，gzip 默认只对大于20字节的内容做处理。我们在测试的时候页面内容都很少，很容易少于 20字节[gzip_min_length](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length),设为0 代表所有大小都压缩。<br />启用压缩后，在请求 /index.html 响应 200 的时候，查看 header，发现有两个增加，并且 Content-Length 不见了。<br />Content-Encoding:gzip 内容的格式为 gzip,告诉浏览器，需要 gzip 解压再展示。<br />Transfer-Encoding:chunked 数据是通过一系列块来传输的，省略 Content-Length ，为了得到内容大小，需要把每个 chunk 的大小 加起来。<br />为什么打开 gzip 后 content-length 信息没有了呢？ 这是因为 nginx 的压缩是异步的，发送头的时候，nginx 可能正在压缩，不知道压缩完成的文件大小。<br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357432-91891d18-8f05-4c09-be78-b5e9cd1abc17.webp#averageHue=%23f9f2f1&clientId=u81110d56-3058-4&from=paste&id=u16f6e592&originHeight=398&originWidth=666&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf9f5fd84-868f-492b-a829-fbb52fd1bc1&title=)\n<a name=\"sWtIX\"></a>\n### 指定需要 gzip 的文件\n我们访问 /index.css ,发现并没有压缩，这是因为 gzip ，默认只压缩 text/html 类型的文件。<br />增加 text/css 类型后，css 文件 也可以压缩了。\n```shell\ngzip_types text/html,text/css;\n```\n<a name=\"MTpCP\"></a>\n### 压缩级别。\ngzip 有9个压缩级别，越高，压缩效果越好，但是对 cpu的消耗越多。默认压缩级别为 1 。我们可以设置一个合适的级别，比如 2；\n```shell\ngzip_comp_level 2;\n```\n<a name=\"BMML1\"></a>\n### gzip_static\n前面讲的nginx 处理 gzip的方式是 服务器负责压缩，这样会消耗掉很多 cpu 资源。我们可以先把文件压缩成 gzip，nginx 直接拿 gzip过的文件就行了。预处理的好处不光是节省了 cpu 压缩时间，还可以 让 nginx 可以用 使用 [sendfile](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile) 系统调用来传输文件,性能得到提高。<br />新版本的 nginx 已经 默认安装了这个模块，如果是老版的 nginx 这个模块需要安装一下。\n```shell\ngzip_static always; \n```\n如果加上这句,nginx 不报错，说明 gzip_static 模块已经安装了。<br />gzip_static 可以有三个值。\n\n- **off** 默认值。 不启用 gzip_static。gzip功能还是可以用的。\n- **on** 启用。 当客户端支持 gzip的时候，发送压缩文件，不支持的时候发送原文件。\n- **always** 总是。 不管客户端是否支持，都优先发送压缩文件。如果没有压缩文件，再发送原文件。\n\n实操的时候，用 always 比较好。现在不支持 gzip 的浏览器太少了，这样可以免掉 nginx 判断的步骤，对性能有所提高。为了方便 nginx 查找（文件越多，查找越慢），只保留 gzip 文件，原文件全部删除。\n<a name=\"suA6m\"></a>\n## 负载均衡\n```shell\nupstream servers {\n    server 192.168.1.1;\n    server 192.168.1.2;\n}\n\nserver {\n    listen       80;\n    server_name  _;\n    location / {\n        proxy_pass   http://servers;\n        proxy_set_header        Host    $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n```\nnginx 常用的负载均衡 是 [upstream](https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream) 来完成的。默认采用轮询的方式依次访问各个服务器。可以给每个服务器加权重，调整访问的频率，权重越高，被访问的越频繁。\n```shell\nupstream servers {\n    server 192.168.1.1 weight=1;\n    server 192.168.1.2 weight=2;\n}\n```\n根据 ip 也可以分配请求。这样能保证同一个用户可以由同一个服务器来服务，可以解决登录 session 的问题。但是根据 ip 分配 可能导致某些服务器请求过多，又不能再做调整。所以解决 登录 session 的问题，可以用统一的 redis 服务来解决。\n```shell\nupstream servers {\n    ip_hash;\n    server 192.168.1.1 ;\n    server 192.168.1.2 ;\n}\n```\n根据 url 分配 请求。比如这样的场景， 资源（图片等静态文件）服务器从源服务器拉取资源后，下次请求会再次落到这个资源服务器，就可以直接返回结果 ，不用再从源服务器请求资源了。\n```shell\nupstream servers {\n    hash $request_uri;\n    server 192.168.1.1 ;\n    server 192.168.1.2 ;\n}\n```\n最后再介绍一下最小连接数方案。在这种场景下，least_conn算法很简单，首选遍历后端集群，比较每个后端的conns/weight（连接数除权重），选取该值最小的后端。 如果有多个后端的conns/weight值同为最小的，那么对它们采用加权轮询算法。\n```shell\n\nupstream servers {\n    least_conn;\n    server 192.168.1.1 weight=2;\n    server 192.168.1.2 weight=1 ;\n}\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [nginx,配置]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: </span><span class=\"ne-text\">https://juejin.cn/user/1953149470376301</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span class=\"ne-text\">https://juejin.cn/post/7134540187064860679#heading-34</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span class=\"ne-text\">IAM17</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover: </span><span class=\"ne-text\">https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png#clientId=u81110d56-3058-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=ui&amp;id=uc10ad34f&amp;margin=%5Bobject%20Object%5D&amp;name=%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220824161836.png&amp;originHeight=393&amp;originWidth=666&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=84791&amp;status=done&amp;style=none&amp;taskId=ud1e4e7a9-8543-465f-b83c-ba4d1551b6f&amp;title=</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><ul class=\"ne-tl\"><li id=\"u4307c33f\" data-lake-index-type=\"0\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png\" width=\"666\" id=\"uc10ad34f\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></li></ul><div data-type=\"color3\" class=\"ne-alert\"><p id=\"ue68ba9d7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">环境为 CentOS 7。 nginx 版本 1.21</span></p></div><p id=\"ub6c4ab08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></span></p><h2 id=\"sttfd\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">配置文件入口</span></h2><pre data-language=\"shell\" id=\"GCL2j\" class=\"ne-codeblock language-shell\"><code>/etc/nginx/nginx.conf</code></pre><p id=\"ubf02d639\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这是入口文件，这个文件里有这样一句：</span></p><pre data-language=\"shell\" id=\"eGrnT\" class=\"ne-codeblock language-shell\"><code>include /etc/nginx/conf.d/*.conf;</code></pre><p id=\"uba3fdef3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">各个网站的配置文件是放在 conf.d 目录下的。这里面的所有 .conf 文件都会被读取。我们增加一个 test.conf。 yourname 就是你的用户名。在 /home/yourname/web/test/ 下面增加一个 index.html文件 ，文件。文件内容为 hello。</span></p><pre data-language=\"shell\" id=\"IjNVZ\" class=\"ne-codeblock language-shell\"><code>server{\n  listen 3000;\n  server_name _;\n  location / {\n    root /home/yourname/web/test/;\n  }\n}\n</code></pre><p id=\"u0a4e8596\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">启动 nginx，如果已经启动，reload 配置文件</span></p><pre data-language=\"shell\" id=\"JNT6s\" class=\"ne-codeblock language-shell\"><code># 启动\nsudo nginx \n# 如果已经启动，重新加载配置\nsudo nginx -s reload</code></pre><p id=\"u57f3dd24\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用 ip 或 localhost:3000 用浏览器访问网站，显示 hello。测试方法也可以用</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">curl localhost:3000</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">，这样可能会更方便些。</span></p><h2 id=\"nCTV0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">文件类型</span></h2><p id=\"u6d947f03\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于我们请求的内容，浏览器的处理方式是不一样的。浏览器如何判断内容，是根据 响应头</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-Type</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在入口配置文件 nginx.conf 中有这样两句：</span></p><pre data-language=\"shell\" id=\"PcSjV\" class=\"ne-codeblock language-shell\"><code>include             /etc/nginx/mime.types;\n\ndefault_type        application/octet-stream;</code></pre><p id=\"u53f98152\" class=\"ne-p\"><br></p><p id=\"ue1f53daf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">mine.types 是</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-type</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">和文件后缀名的映射表。比如 xx.css 文件的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-type</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">是</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">text/css</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。 default_type 是默认的 type。比如当访问 /a 的时候，如果 a 文件存在，nginx会返回 a 文件，响应头</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">Content-type：application/octet-stream</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。 浏览器对</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">application/octet-stream</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的处理方式是下载，而不是展示。</span></p><p id=\"u5e9a8d47\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果我们的请求地址是这样的 /a.html,/b.css, nginx 都可以自动处理。但有的时候，可能请求的地址是这样的 /a,这时就需要我们手动指定 type 类型。指定 type 类型很简单，有两种方法。</span></p><p id=\"u0c8cf509\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"NDPBG\" class=\"ne-codeblock language-shell\"><code>location /css {\n  add_header Content-type text/css;\n}\nlocation /css {\n  default_type  text/css;\n}</code></pre><h2 id=\"WnI9G\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">自定义log</span></h2><p id=\"ua4e42203\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">打开 /etc/nginx/nginx.conf 找到 log_format</span></p><pre data-language=\"shell\" id=\"Mdeq4\" class=\"ne-codeblock language-shell\"><code> log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '\n                    '$status $body_bytes_sent &quot;$http_referer&quot; '\n                    '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';</code></pre><p id=\"u31a4bffb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于开发来说可以去掉 ua，ua 很长，去掉可以方便查看。尤其对于初学者，建议加上 $request_filename ，这个变量代表的是访问的实际文件路径，对于理解各种指令的效果，查找错误非常有帮助。</span></p><p id=\"u4532cb8a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在入口的配置文件中用 Log_foramt定义了一个 main。我们可以定义一个 dev，按你所需求选用需要的内容即可。 使用的时候，直接用 dev这个名字就行。</span></p><pre data-language=\"shell\" id=\"V9a99\" class=\"ne-codeblock language-shell\"><code> log_format  dev  '[$time_local] &quot;$request&quot; $request_filename'\n                   '$status $body_bytes_sent &quot;$http_referer&quot; '\n access_log /home/duhongwei/log/access.log dev;</code></pre><h2 id=\"HERic\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">location 匹配规则</span></h2><p id=\"u2d42ea63\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">@ 匹配规则在后面的 try_files 中有举例</span></p><p id=\"u196af0c3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">location 按如下优先级匹配</span></p><ol class=\"ne-ol\"><li id=\"u1b2d6e45\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">= 绝对匹配，一个字符也不能差</span></li><li id=\"ufb5b75f2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">^~ 前缀匹配</span></li><li id=\"u7abf663e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">~（区分大小写）， ~*(不区分大小写) 正则匹配</span></li><li id=\"ub2bfac06\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">普通前缀匹配</span></li></ol><p id=\"u65a5c308\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">2，4的匹配是匹配最长优先。 3 的匹配是按顺序，写在前面的优先。</span></p><h3 id=\"hfxlS\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">完全匹配</span></h3><pre data-language=\"shell\" id=\"OIX6j\" class=\"ne-codeblock language-shell\"><code>location = /abc {\n   return 900;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901</code></pre><p id=\"uf1bd7b12\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">location = abc 虽然只少了 / ，但这样是匹配不到的，一个字符也不能差。完全匹配优先级最高，无论写在前面还是后面。</span></p><h3 id=\"tdUAk\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">^~ 前端缀匹配</span></h3><pre data-language=\"shell\" id=\"cCuPe\" class=\"ne-codeblock language-shell\"><code># 正则匹配\nlocation ~ abc {\n   return 900;\n}\n# 前缀匹配\nlocation ^~  /a {\n   return 901;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901</code></pre><p id=\"u4ee04bfa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">^~ 匹配的优先级高于正则匹配。</span></p><p id=\"u9151764e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">初看到 ^~ 的人会误以为是正则匹配。这个要注意下，这个是前缀匹配，就是从前向后一个字符一个字符匹配。</span></p><pre data-language=\"shell\" id=\"yF99n\" class=\"ne-codeblock language-shell\"><code># 普通前缀匹配\n/abc/ {\n}\n\n# 前缀匹配\n^~ /abc/ {\n}</code></pre><p id=\"uf79a22fd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这两种写法的匹配方式是一样，^~ 的优先级更高。</span></p><h3 id=\"W5mQ9\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">正则匹配</span></h3><pre data-language=\"shell\" id=\"jaSU3\" class=\"ne-codeblock language-shell\"><code># 普通前缀匹配\nlocation  /abcd {\n   return 901;\n}\n# 正则匹配\nlocation ~ /ab {\n   return 902;\n}\n\ncurl -I localhost:3000/abcd\nHTTP/1.1 902</code></pre><p id=\"u80d5fdee\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">正则匹配的优先级高于普通前缀匹配。</span></p><pre data-language=\"shell\" id=\"oe6Ap\" class=\"ne-codeblock language-shell\"><code># 正则匹配\nlocation ~ /ab {\n   return 901;\n}\n\n# 正则匹配\nlocation ~ /abc {\n   return 902;\n}\n\ncurl -I localhost:3000/abc\nHTTP/1.1 901</code></pre><p id=\"u65c93308\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">正则匹配是按顺序来的，前面的匹配成功后面的就不再匹配了。</span></p><p id=\"uf6849221\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">从性能上来说，尽量不要用正则，正则匹配性能最低。</span></p><h3 id=\"qJ719\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">前缀匹配最长优先</span></h3><pre data-language=\"shell\" id=\"ZjVNE\" class=\"ne-codeblock language-shell\"><code>location  /abc {\n   return 901;\n}\nlocation  /abcd {\n   return 902;\n}\n\nlocation ^~ /def {\n   return 903;\n}\nlocation ^~ /defg {\n   return 904;\n}\n\n\ncurl -I localhost:3000/abc\nHTTP/1.1 902\n\ncurl -I localhost:3000/defg\nHTTP/1.1 904</code></pre><h2 id=\"hnSqW\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">pass_proxy 代理</span></h2><p id=\"u05937697\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">在前端代理主要是为了跨域。虽然前端跨域有多种方法，各有利弊，但用代理来跨域对开发是最友好的。用代理可以不用修改产品代码切换线上线下，非常安全。pass_proxy 默认会把 cookie 也一同转发。 常用的配置非常简单。</span></p><h3 id=\"r6G58\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">不带斜杠</span></h3><p id=\"u398b8b29\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前端 /api/user</span></p><p id=\"u18ab069a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">后端 /api/user</span></p><pre data-language=\"shell\" id=\"FLYeM\" class=\"ne-codeblock language-shell\"><code> location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001;\n }</code></pre><p id=\"u5329f6d4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不带斜杠把 path 直接拼接在 url后面；</span></p><h3 id=\"wtLKW\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">带斜杠</span></h3><p id=\"u48cebdd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前端 /api/user</span></p><p id=\"ue09110fc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">后端 /user</span></p><pre data-language=\"shell\" id=\"BJVg8\" class=\"ne-codeblock language-shell\"><code> location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001/;\n }</code></pre><p id=\"u228ce161\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">带斜杠会先去掉匹配到的 path, 再拼接。</span></p><h3 id=\"Selua\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">正则匹配的时候不能带斜杠</span></h3><p id=\"u20ed640d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">~ 区分大小写正则匹配 ，~* 不区分大小写正则匹配 。location 用正则匹配的时候，proxy_pass 后面不能以 / 结尾，因为 nginx 不能处理这种情况。</span></p><pre data-language=\"shell\" id=\"Q9WKP\" class=\"ne-codeblock language-shell\"><code> location ^~ /api/ {\n     proxy_pass http://127.0.0.1:3001/web$request_uri;\n }</code></pre><p id=\"u6d567235\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">本例中，请求 localhost:3000/ 会导致 nginx 报错。</span></p><h3 id=\"ki2Rm\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">斜杠后面加路径</span></h3><p id=\"ue416b363\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前端 /api/user</span></p><p id=\"u2d34a356\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">后端 /web/api/user</span></p><p id=\"u4553d9b8\" class=\"ne-p\"><span class=\"ne-text\"> location ^~ /api/ {      proxy_pass http://127.0.0.1:3001/web</span><span class=\"ne-text\" style=\"color: teal\">$request_uri</span><span class=\"ne-text\">;  } </span><span class=\"ne-text\" style=\"color: rgba(140, 140, 140, 0.8); font-size: 12px\">复制代码</span></p><h3 id=\"QEW4S\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">代理之前rewrite</span></h3><pre data-language=\"shell\" id=\"eWPgz\" class=\"ne-codeblock language-shell\"><code>location /search/ {\n    rewrite    /search/([^/]+) /s?wd=$1 break;\n    proxy_pass https://127.0.0.1:3001;\n}</code></pre><h3 id=\"YBJVk\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">服务端获取真实ip</span></h3><p id=\"u1dc158bc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">反向代理: 简单来说 proxy_pass 把请求转发到其它服务地址的时候，就是反向代理。</span></p><p id=\"u5aee0471\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果是客户端与服务器直接连接，nginx 变量</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">就可以拿到 真实ip。</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">是不能伪造的。但是如果 客户端是经过反向代理连接的服务器，服务器能拿到的只有代理服务器的 IP。为了能拿到客户端真实 IP,代理服务器在转发的时候需要加上一个http 扩展头部 X-Forwarded-For。</span></p><p id=\"u8012e9ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">所有代理的 ip 依次列出来，从远及近。</span></p><pre data-language=\"makefile\" id=\"mdKE2\" class=\"ne-codeblock language-makefile\"><code>X-Forwarded-For: IP0, IP1, IP2</code></pre><p id=\"u5709834c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">X-Forwarded-For 是一个 HTTP 扩展头部。HTTP/1.1（RFC 2616）协议并没有对它的定义，它最开始是由 Squid 这个缓存代理软件引入，用来表示 HTTP 请求端真实 IP。如今它已经成为事实上的标准，被各大 HTTP 代 理、负载均衡等转发服务广泛使用，并被写入 RFC 7239（Forwarded HTTP Extension）标准之中。</span></p><pre data-language=\"makefile\" id=\"Y5X9f\" class=\"ne-codeblock language-makefile\"><code>location /api/ {\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_pass http://127.0.0.1:3000/;\n\n}</code></pre><p id=\"u76ebe167\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$proxy_add_x_forwarded_for</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">变量包含客户端请求头中的&quot;X-Forwarded-For&quot;，与</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用逗号分开，如果没有&quot;X-Forwarded-For&quot; 请求头，则</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$proxy_add_x_forwarded_for</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">等于</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">变量的值是客户端的IP。</span></p><p id=\"ua02e6b19\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">可能你会担心，ip会不会被伪造。即使客户端伪造了 ip，nginx也会用真实的 ip 进行重置。所以</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">$remote_addr</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">是可信的。</span></p><h3 id=\"re52p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">try_files</span></h3><pre data-language=\"properties\" id=\"RL3Ca\" class=\"ne-codeblock language-properties\"><code>try_files file ... uri;\ntry_files file ... =code;</code></pre><p id=\"u9362bd36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">举两个例子，对应这两种语法。</span></p><pre data-language=\"makefile\" id=\"jU9Yy\" class=\"ne-codeblock language-makefile\"><code>location /images/ {\n    try_files $uri /images/default.gif;\n}\n\nlocation = /images/default.gif {\n    expires 30d;\n}</code></pre><pre data-language=\"makefile\" id=\"U9ut4\" class=\"ne-codeblock language-makefile\"><code>location / {\n    try_files $uri $uri/index.html $uri.html =404;\n}</code></pre><p id=\"u42e89ba5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">=404 的 等号 是必须的</span></p><p id=\"u925dbd60\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">try_file 后面必须有一个file, 一个 url 或 code,file 可以有多个。</span></p><p id=\"u0ffb86c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">简单来说，try_file 按顺序检查 file,如果是文件夹，请在 file后加 / ，如果 file 都不存在，根据最后一个参数做跳转。</span></p><p id=\"u2adbb975\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">借这个机会说一个 @ 在location中的用法。 @相当于命名了一个变量。</span></p><pre data-language=\"makefile\" id=\"OZ0md\" class=\"ne-codeblock language-makefile\"><code>location / {\n    try_files /system/maintenance.html\n              $uri $uri/index.html $uri.html\n              @mongrel;\n}\nlocation @mongrel {\n    proxy_pass http://mongrel;\n}</code></pre><p id=\"ufae798e8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">try_files 的一个应用场景就是单面应用.</span></p><pre data-language=\"makefile\" id=\"bdA5U\" class=\"ne-codeblock language-makefile\"><code>location / {\n try_files $uri $uri/ /index.html\n \n}</code></pre><p id=\"u4f418ca3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果请求的是 /a, 首先会查找 a 文件 是否存在，然后找 a 目录是否存在,如果都不存在，转到 /index.html。 再次命中 location / ，再次执行 try_files，这回找到index.html 返回。</span></p><p id=\"u0a07bb99\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意：如果 index.html 不存在，会报 500，所以用 try_files的时候，要避免多次命中，最后的跳转最好转到别处。</span></p><pre data-language=\"makefile\" id=\"sH68S\" class=\"ne-codeblock language-makefile\"><code>location / {\n try_files $uri $uri/ /index.html \n}\nlocation /index.html{\n}</code></pre><p id=\"u7fffc73f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这样修改后，只经历一次尝试，如果找不到，会报 404，不是 500。</span></p><h2 id=\"ngmIt\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">error_page</span></h2><pre data-language=\"makefile\" id=\"KXMHJ\" class=\"ne-codeblock language-makefile\"><code>error_page code ... [=[response]] uri;</code></pre><p id=\"u1c618c47\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">error_page 会产生内部跳转</span></p><p id=\"u7c941c14\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">举例</span></p><pre data-language=\"makefile\" id=\"y4JGS\" class=\"ne-codeblock language-makefile\"><code>error_page 404             /404.html;\nerror_page 500 502 503 504 /50x.html;\nerror_page 404 =200 /empty.gif;\n\nerror_page 404 =301 http://example.com/notfound.html;\n\nlocation / {\n    error_page 404 = @fallback;\n}\n\nlocation @fallback {\n    proxy_pass http://backend;\n}\n</code></pre><p id=\"u30983b8f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果找不到直接跳 404 页面没什么问题，但是如果是跳到首页，或是显示一张图片，</span></p><p id=\"ue11b4acf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果这样写</span></p><pre data-language=\"makefile\" id=\"UOAjK\" class=\"ne-codeblock language-makefile\"><code>error_page 404 /index.html</code></pre><p id=\"u73a4b645\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当访问不存在的页面的时候，会跳到首页，但是状态码会显示 404。如果要显示 200,可以指定</span></p><pre data-language=\"makefile\" id=\"w8TEv\" class=\"ne-codeblock language-makefile\"><code>error_page 404 =200 /index.html</code></pre><h2 id=\"ri2td\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">页面缓存</span></h2><p id=\"u12619709\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">http header 相关的缓存有两种</span></p><ol class=\"ne-ol\"><li id=\"u628a518f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">强制缓存</span></li><li id=\"u806a1cfe\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">协商缓存</span></li></ol><p id=\"u0ba2c4c7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">响应头部有两个值代表是否要强制缓存。Cache-Control 和 expires。至于为什么有两个头，expires 是历史遗留。</span></p><p id=\"uc4039fdf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不需要强制缓存</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx可以这样配置</span></p><pre data-language=\"makefile\" id=\"vt1CA\" class=\"ne-codeblock language-makefile\"><code>expires -1</code></pre><p id=\"u44ae7e32\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 发回的头部</span></p><pre data-language=\"makefile\" id=\"TkzBD\" class=\"ne-codeblock language-makefile\"><code>Cache-Control:no-cache\nExpires:Thu, 18 Aug 2022 06:55:23 GMT </code></pre><p id=\"uf7c6c205\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Expires 的时间比当前早一秒。</span></p><p id=\"u8e681fc0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">也可以不配置 nginx。 默认是关闭强制缓存的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires off</span></p><p id=\"u73572ead\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires off</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">和</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires -1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">都可以关闭强制缓存，但响应头不一样，</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">expires off</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不会发送 Cache-Control 和 expires。</span></p><p id=\"u7842bacc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果需要强制缓存 这样配置</span></p><pre data-language=\"makefile\" id=\"bNEUc\" class=\"ne-codeblock language-makefile\"><code>expires 1d;</code></pre><p id=\"ue117645b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">1d 表示强制缓存一天。但是浏览器是否采用强制缓存还取决于浏览器的具体实现。</span></p><p id=\"uf6e6c153\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">比如你在浏览器中直接请求一个图片地址（网络上随便找张图片就成），查看响应头，一般都会带有 expires 和 Cache-control ，下次请求应该会命中强制缓存，但是，下次请求的时候走的是协商缓存，状态码是 304。为什么会这样呢？因为chrome 在直接请求图片的时候 在请求头中加上了</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">cache-control:max-age=0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">,表明本次请求不会采用强制缓存</span></p><p id=\"ued7d36d6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当强制刷新的时候，值变为 no-cache，响应码 200。浏览器忽略强制缓存，服务端忽略协商缓存，重新返回内容。</span></p><pre data-language=\"makefile\" id=\"DV41u\" class=\"ne-codeblock language-makefile\"><code>cache-control:no-cache\npragma:no-cache</code></pre><p id=\"ub22cbdb7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不光是图片，chrome 直接访问 html 也不会命中强制缓存。对于浏览器的这个策略也是合理的。当访问一个网站的时候，我们第一个请求的是网站首页 index.html。如果首页被强制缓存了 10天，那么可能 10 天内用户看到的都是旧内容。</span></p><p id=\"u89537d9e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cache-control：</span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">no-store</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这个字段就是告诉浏览器不进行缓存。这个最彻底，无论是强制缓存还是协商缓存都会关闭。nginx 中这样配置</span></p><pre data-language=\"makefile\" id=\"zDXO3\" class=\"ne-codeblock language-makefile\"><code>add_header Cache-Control no-sotre;</code></pre><p id=\"ueb2cb955\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cache-control：</span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">no-cache</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">关闭强制缓存，但还是会走协商缓存。</span></p><p id=\"u2f48a749\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">关闭了强制缓存就会走协商缓存，Last-Modified、etag， nginx 都会默认加上。</span></p><h3 id=\"uLu9Z\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">给图片等静态资源加强缓存</span></h3><pre data-language=\"makefile\" id=\"cFcQH\" class=\"ne-codeblock language-makefile\"><code>location ~* \\.(?:css(\\.map)?|js(\\.map)?|gif|svg|jfif|ico|cur|heic|webp|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv)$ {\n    # 静态资源设置一年强缓存 \n    expires 365d; \n    access_log off; \n}</code></pre><p id=\"uf391ced3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">一般会给静态资源设置一个较长的缓存。如果资源发生变化，会修改文件名。一般用 md5值做为文件名。</span></p><h2 id=\"BHWZj\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">root 与 alias</span></h2><p id=\"u8d8b17a1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">root 与 alias 决定到哪里在去访问实际的文件，区别在于 root 会拼接匹配到路径，alias 会替换匹配到的路径。我们看个实际的例子。</span></p><pre data-language=\"makefile\" id=\"XOKFY\" class=\"ne-codeblock language-makefile\"><code>location / {\n root /home/user/web; \n}\n\n请求 /a.jpg，实际请求的是 /home/user/web/a.jpg，找到图片\n\n把 root 换成 alias\nlocation / {\n alias /home/user/web; \n}\n\n请求 /a.jpg，实际请求的是 /home/user/weba.jpg，找到不图片了。因为 / 被替换掉了。解决的方法是把 / 补上\n\nlocation / {\n alias /home/user/web/; \n}\n\n也不是说 alias 必须以 / 结尾，如果location中 不是以 /结尾，alias 后面就不加 /\n\n在这个例子中 ，请求 /a/b.jpg ，实际查找 /home/user/web/b.jpg。 只是把 /a 去掉而已。\n\nlocation /a {\n alias /home/user/web; \n}\n</code></pre><p id=\"u68988bb2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们在用的时候，优先用 root。root 可以用在</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">http</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">server</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">location</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">if in location</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">，alias 只能用在</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">location</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。root 对末尾的斜杠并不在意，兼容性更好。 alias 可以作为 root 的补充来使用。</span></p><h2 id=\"U9afI\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">url 美化</span></h2><p id=\"u7e5b1c6b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们在开发的时候用的 url 是这样的</span></p><pre data-language=\"shell\" id=\"juiQ4\" class=\"ne-codeblock language-shell\"><code>/users?id=1</code></pre><p id=\"u3f1b3a9a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">让别人访问的时候可能是这样的</span></p><pre data-language=\"shell\" id=\"jJgOG\" class=\"ne-codeblock language-shell\"><code>/users/1</code></pre><p id=\"uca5f259e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">所以我们需要把</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">/users/1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">转为</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">/users?id=1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">,这时就需要 rewrite 出场了。</span></p><pre data-language=\"shell\" id=\"KQAty\" class=\"ne-codeblock language-shell\"><code>location /users/{\n    rewrite ^/users/(.*)$ /nodejs/id=$1? last;\n}\nlocation /nodejs/{\n   proxy_pass http://127.0.0.1:3000;\n}</code></pre><p id=\"ub36e6052\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当请求</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">/users/1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的时候，命中 location /users/ ，执行rewrite 指令， last flag 指示停止后面的rewrite 指令并做内部跳转，匹配到 location /nodejs/ ，经过 proxy_pass 指令，转到 nodejs 服务。</span></p><p id=\"u96ab3675\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">你可能对 last 表示疑惑，都已经是最后了，怎么又跳到 /nodejs 了呢？ 接下来，我详细讲解一下 nginx 的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">rewrite</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">模块。为什么说一个模块呢？因为与rewrite相关的是一组指令。</span></p><h2 id=\"vXteh\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">nginx http rewrite module 详解</span></h2><p id=\"ua15842eb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">简单来说，</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">ngx_http_rewrite_module</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> module 用正则匹配请求，改写请求，然后做跳转，可以是内部跳转，也可以是外部跳转。</span></p><p id=\"uc18d2ccc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">学习这个模块的时候 ，把 rewrite_log 打开，可以在 error log 里查看跳转信息</span></p><pre data-language=\"shell\" id=\"LV01Y\" class=\"ne-codeblock language-shell\"><code> rewrite_log on; \n error_log /home/log/test-error.log notice;</code></pre><p id=\"uae75b44e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意 notice 是必须的</span></p><h3 id=\"diG1M\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">顺序执行和循环跳转</span></h3><ol class=\"ne-ol\"><li id=\"u9bc7cdf4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">直接写在 server level 的 指令，顺序执行。</span></li><li id=\"u0e39e5bb\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">写在 location 中的指定顺序执行。可以跳到其它 location ,最多不超过 10次。</span></li></ol><p id=\"u66f0b6a3\" class=\"ne-p\"><span class=\"ne-text\">server{     rewrite ^/users/(.*)$ /show?</span><span class=\"ne-text\">user</span><span class=\"ne-text\">=</span><span class=\"ne-text\" style=\"color: teal\">$1</span><span class=\"ne-text\"> </span><em><span class=\"ne-text\" style=\"color: rgb(153, 153, 136)\">;</span></em><span class=\"ne-text\">     rewrite ^/teachers/(.*)$ /show?</span><span class=\"ne-text\">teacher</span><span class=\"ne-text\">=</span><span class=\"ne-text\" style=\"color: teal\">$1</span><span class=\"ne-text\"> </span><em><span class=\"ne-text\" style=\"color: rgb(153, 153, 136)\">;</span></em><span class=\"ne-text\"> } </span><span class=\"ne-text\" style=\"color: rgba(140, 140, 140, 0.8); font-size: 12px\">复制代码</span></p><p id=\"u77fafe3c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">请求 /users/1 ，先执行第一条</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">rewrite ^/users/(.*)$ /show?user=$1</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">再执行第二条</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">rewrite ^/teachers/(.*)$ /show?teacher=$1 ;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">虽然第一条匹配到了，还是会执行第二条。这就是顺序执行的意思。</span></p><pre data-language=\"shell\" id=\"niyXz\" class=\"ne-codeblock language-shell\"><code>location /{\n    rewrite ^/teachers/(.*)$ /show/$1;\n    rewrite ^/users/(.*) /show/$1;\n}\nlocation /show/{\n    rewrite ^/show/(.*)$ /users/$1 ;\n}</code></pre><p id=\"u9fb22f79\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">请求 /users/1 命中第一个location ,顺序执行第一个 rewrite,没命中，即使命中也会继续执行第二 rewrite ，命中。跳转到 第二个location /show/，执行 rewirte 又回跳回 / ，这样循环10次，报 500 错误，查看 error 日志可以看到说明。</span></p><pre data-language=\"shell\" id=\"dRsMC\" class=\"ne-codeblock language-shell\"><code>rewrite or internal redirection cycle while processing &quot;/show/1&quot;</code></pre><p id=\"u7157fe05\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这个过程演示了 location 中 rewrite 的执行逻辑。顺序执行，循环跳转。</span></p><p id=\"u33f50ea3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">rewrite module 中还有 5 个指令</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23break\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23break\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">break</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23if\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23if\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">if</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23return\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23return\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">return</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">rewrite</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, and </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23set\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23set\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">set</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">。 return 可以直接返回，打断后面的 rewrite module 指令的执行。</span></p><pre data-language=\"shell\" id=\"ZjL9o\" class=\"ne-codeblock language-shell\"><code>location / {\n return 409;\n rewrite ^/teachers/(.*)$ /show/$1;\n}</code></pre><p id=\"uba80c885\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">执行 return 后，后面的指令就没有机会执行了。 set,break 比较简单，和其它语言差不多。下面着重讲下 rewirte 指令的 flag。</span></p><p id=\"u0074197f\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">rewrite</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">regex</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">replacement</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> [</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">flag</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">]</span></p><p id=\"u0174dfcc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">flag有四种</span></p><ul class=\"ne-ul\"><li id=\"u41f3799e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">last .停止执行后面的 ngx_http_rewrite_module 指令，并发起新的 location 匹配。</span></li><li id=\"uc7f4738e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">break. 停止执行后面的 ngx_http_rewrite_module 指令。然后没有后续了，不再发起 location 匹配。</span></li><li id=\"u90dc5b9d\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">redirect 执行 302跳转，后面的指令不再执行。</span></li><li id=\"uaa8d2929\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">permanent 执行 301跳转，后面的指令不再执行。</span></li></ul><p id=\"u9b1064f4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">last、break 停止执行的是 ngx_http_rewrite_module 指令，其它指令不受影响，还是会执行的。</span></p><p id=\"ub8cf5fdc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">regex 匹配的是路径部分</span></p><pre data-language=\"shell\" id=\"gULr2\" class=\"ne-codeblock language-shell\"><code>location / {\n   rewrite ^/teacher/(.*)$ /show1/$1 last;\n   rewrite ^/teacher/(.*) /show2/$1;\n}\nlocation /show1{\n return 900;\n}\nlocation /show2{\n return 901;\n}\n\ncurl http://localhost:3000/teacher/1\nHTTP/1.1 900\n\n因为 last 会终止后面的  ngx_http_rewrite_module 指令，所以 第二句 rewrite ^/teacher/(.*) /show2/$1 不会执行。第一句执行完后，跳到 /show1，返回 900\n\n如果把 last 换成  break\nHTTP/1.1 404\n\n因为 break 不再执行跳转，直接查找 show1/1 找不到，报 404.\n\n把 last 换成 redirect.\nHTTP/1.1 302 \n\n浏览器会请求两次。\n\n把 last 换成 permanent.\nHTTP/1.1 301 \n\n浏览器会请求两次。\n</code></pre><p id=\"u9c22dfd5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果 replacement 是 http开头，是可以直接跳转的</span></p><pre data-language=\"shell\" id=\"HzZj9\" class=\"ne-codeblock language-shell\"><code>location / {\n  rewrite ^/teacher/ http://juejin.cn\n}\n\ncurl http://localhost:3000/teacher/1\nHTTP/1.1 302 \nLocation: http://juejin.cn\n\n相当于 redirect 指令的效果。\n</code></pre><p id=\"u4ff6cd68\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">最后再讲下 if ，if 语句不复杂，但是非常有用，可以这样说，用 if 可以实现很多指令,但是用内置指令更简洁，还是要优先用指令。</span></p><p id=\"u7201f25b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">if ($param)</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果 $param 为空字符串或 0 为假，其它情况为真。</span></p><p id=\"ud9a92bc7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意 if 后面必须要有空格，否则报错。</span></p><pre data-language=\"shell\" id=\"f9i0l\" class=\"ne-codeblock language-shell\"><code>set $param '0';\nset $param 0;\nset $param '';\n\n这三种写法 $param 都为假，其它情况都为真</code></pre><p id=\"u498ad686\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用 = ,!=判断相等。</span></p><pre data-language=\"shell\" id=\"eeYha\" class=\"ne-codeblock language-shell\"><code> if ($request_method = POST){\n      return 403;\n }</code></pre><p id=\"ud0729f0c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">注意 是一个 = 不是两个=, 等号左右必须要有空格，否则报错</span></p><p id=\"u708dd84f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用正则表达式判断</span></p><pre data-language=\"shell\" id=\"rNqYt\" class=\"ne-codeblock language-shell\"><code>~ 区分大小写\nif ($http_user_agent ~ mobile)\n\n~* 不区分大小写\nif ($http_referer ~* juejin\\.cn)\n\n!~ 和 !~* 是对应的两个否定写法,不再举例了。</code></pre><p id=\"ue2ef03ba\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">用 flag</span></p><pre data-language=\"shell\" id=\"YSVEx\" class=\"ne-codeblock language-shell\"><code>-f !-f  文件是否存在\nif (-f $request_filename)\nif (!-f $request_filename)\n\n-d !-d 目录是否存在\n-e !-e 文件或目录是否存在\n-x !-e 是否可执行\n</code></pre><h3 id=\"lR85n\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">return</span></h3><pre data-language=\"shell\" id=\"vCGHw\" class=\"ne-codeblock language-shell\"><code>return code [text];\nreturn code URL;\nreturn URL;</code></pre><pre data-language=\"shell\" id=\"AmSng\" class=\"ne-codeblock language-shell\"><code>location /admin/{\n    return 403 '没有访问权限';\n}\nlocation / {\n    return 302 $scheme://www.baidu.com$request_uri;\n}\n\nlocation /abc/{\n    return 404;\n}</code></pre><h2 id=\"wigWM\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">移动pc适配</span></h2><p id=\"uade972f1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们希望在访问 一个网址的时候，如果是在 pc端打开的时候，显示pc的页面，如果是在移动端打开的，显示移动端的页面。网址只有一个</span></p><pre data-language=\"shell\" id=\"A4Zzo\" class=\"ne-codeblock language-shell\"><code>server{\n {  \n    set $isMobile true;\n    \n    if ($http_user_agent ~* '(Android|webOS|IEMobile|iPhone|iPod|BlackBerry)') { \n        set $isMobile true;\n    }\n    \n    set $root  /home/duhongwei/web/pc;\n    if ($isMobile = true) {\n      set $root  /home/duhongwei/web/h5;\n    }\n    root $root;\n}</code></pre><p id=\"ud647d8b8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这个设置需要放在 server 下面，对于所有 location 有效。在 location 里如果有需要还可以修改 root,所以 set 一个 $isMobile 的变量，方便后面使用。</span></p><p id=\"uffaa7776\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248); font-size: 16px\">ipad 虽然是移动设置，但从尺寸上来看更接近 pc，所以页面在 ipad 打开，一般会显示 pc 的页面</span></p><h2 id=\"AwwzD\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">配置https服务</span></h2><p id=\"u60e83e32\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">虽然在开发的时候用 http 就行，但有的时候，必须要 https 才行。所以配置开发环境可能也得配置 https 服务。我们的目的是为了让服务跑起来，还是很简单的。</span></p><ol class=\"ne-ol\"><li id=\"u46813b6e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">申请证书</span></li><li id=\"uc3692e37\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">证书包含一个crt文件一个key文件，crt为证书，key为密钥</span></li><li id=\"uadfae00f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">配置nginx</span></li></ol><p id=\"u418f9059\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果你正在做一个项目，这个项目的域名证书应该是提前就申请好的。用这个证书就行。本地配 host ，配项目的线上域名，就可以测试了。</span></p><pre data-language=\"shell\" id=\"OIiDV\" class=\"ne-codeblock language-shell\"><code>server {\n    # 1 \n    listen       443 ssl;    \n    server_name  www.xxx.com; \n    \n    # 2\n    ssl_certificate      证书的绝对路径     \n    # 3\n    ssl_certificate_key  密钥的绝对路径\n               \n}   </code></pre><p id=\"ud02736ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">配置 https服务，只需要三步</span></p><ol class=\"ne-ol\"><li id=\"u05cbbfee\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">监听 443 端口</span></li><li id=\"u6b717952\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">设置证书的绝对路径</span></li><li id=\"uab56bf59\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">设置密钥的绝对路径</span></li></ol><p id=\"u7f206b18\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">只这三步就完成，很简单吧。</span></p><p id=\"uc01a60d1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">要启用 http2 也很简单， 只需要在 listen 后面加 http2 即可。</span></p><pre data-language=\"shell\" id=\"fMRMh\" class=\"ne-codeblock language-shell\"><code>listen 443 ssl http2;</code></pre><h2 id=\"nXnyw\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">请求地址末尾加斜杠与不加斜杠</span></h2><p id=\"u497be355\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">请求 juejin.cn/b 与 juejin.cn/b/ 有什么区别吗？ nginx解析起来区别就大了。</span></p><p id=\"u0c98d141\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">不加斜杠,如果存在 b 文件,返回 文件 b 如果不存在文件b，但有文件夹 b， 301 到 b/,在浏览器中看到的现象是发了两个请求.如果 b下面没有index.html,返回 403,如果有，返回内容。</span></p><p id=\"u7dd5a823\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357339-bd37763d-61ff-4a2c-90bb-ea75d04549e8.webp\" width=\"1084\" id=\"u40f1913b\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></p><p id=\"ud5be5253\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果没有index.html，为什么是返回 403而不是 404呢？</span></p><p id=\"u8528c90e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">这是因为 nginx如果找不到 index.html，会尝试浏览目录，默认是不允许的。</span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">autoindex off;</span></p><p id=\"u35d0f21f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果既没有文件夹 b 也没有文件 b 返回 404</span></p><p id=\"u8e75b19f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">为什么访问 b/ 会去查找 b/index.html，这是因为 index指令默认是这样的</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">index index.html</span></p><p id=\"u560f278a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 默默做了这么多，就是为了让我们用起来方便。如果从性能方面来考虑，写完整地址最好，别让nginx去猜了。用户怎么输入网址我们管不了，但是我们在写跳转地址的时候，最好是写完整地址。</span></p><h2 id=\"CWPPz\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">请求头信息对应的 nginx 变量</span></h2><p id=\"u3dcda632\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 中的有些变量有是规律，按规律可以方便记忆。</span></p><p id=\"ubc4d1c3d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357557-6afd3ab9-9044-40f9-83e3-1cb19d8bc7d4.webp\" width=\"612\" id=\"u62627197\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></p><p id=\"u254df157\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对每一个请求标头,都对应一个变量</span></strong></p><p id=\"ud673ad32\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">大小写不敏感，以 http_ 开头， - 改为 _ 。</span></p><ul class=\"ne-ul\"><li id=\"u43de74bd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">$http_accept</span></li><li id=\"u1912d1c2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">$http_cache_control</span></li></ul><p id=\"ub37a1da6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cookie 的中的变量</span></strong></p><p id=\"u9cc05a82\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">比如 cookie 中 包含 name=jack,用 $cookie_name 可以拿到 jack 这个值。</span></p><ul class=\"ne-ul\"><li id=\"ua73004c2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">cookie_name</span></li></ul><p id=\"u87c0a48b\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">arg 中的变量</span></strong></p><p id=\"ufeef389c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">比如有这样的 get 请求 index.html?name=jack ,用 $arg_name 可以拿到 jack 这个值。</span></p><ul class=\"ne-ul\"><li id=\"u13e443b3\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">arg_name</span></li></ul><h2 id=\"tqRjc\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">nginx 接收客户端提交</span></h2><p id=\"u2da94e50\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">当我们提交一个表单的时候，会生成一个请求的 header,body。在header中 Content-Length:123 标明 content 字节大小。nginx 接收到 header，先检查 header 大小，如果 header 大小超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_header_buffer_size</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的默认值 1K,并超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23large_client_header_buffers\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23large_client_header_buffers\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">large_client_header_buffers</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的默认值 8K nginx 会报错。</span></p><p id=\"ub8b49c99\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">检查 Content-Length ，如果超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_body_buffer_size</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">默认值 8K(除了 x86 的 64位系统是 16K），内存缓冲区无法接收，会存到</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_body_temp_path</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">指定的目录。但是接收的body总大小不是无限的，不能超过</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_max_body_size</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">的默认值 1M。</span></p><p id=\"ue2d79638\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于大多数请求来讲，都是 get 请求，我们可以直接躺平，默认值即可。 get 请求没有 body，超限的情况可能是 cookie 过多,url 过长。一般来说，超出的可能性不大。</span></p><p id=\"u45cb714f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">对于 post 请求，当上传文件的时候，可能会超限。nginx 默认只能接收 1M 的内容,可以增加这个默认值。</span></p><pre data-language=\"shell\" id=\"KWqvc\" class=\"ne-codeblock language-shell\"><code>locatoin /upfile/ {\n    client_max_body_size:200M;\n}</code></pre><p id=\"ucce2f4bd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果网络状态不好，可能刚发一个字节，就断了，如果在默认 60 秒内没有再次发送，nginx 会中断链接。这样做是为了节省服务器资源。可以通过 修改</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_body_timeout</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">和</span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">client_header_timeout</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">改变默认值。</span></p><pre data-language=\"shell\" id=\"Rk2dQ\" class=\"ne-codeblock language-shell\"><code>server{\n  client_body_timeout 10s;\n  client_header_timeout 10s;\n}</code></pre><p id=\"u30f54797\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">60秒有点太保守了，可以减小这个值。</span></p><h2 id=\"MYplT\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">nginx gzip 压缩</span></h2><p id=\"u180fa6fb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip压缩的知识还是非常多的，不过只是启用gzip ,打开功能，还是很简单的。</span></p><pre data-language=\"shell\" id=\"Ce7GG\" class=\"ne-codeblock language-shell\"><code>server{\ngzip on;\ngzip_min_length 0;\n}</code></pre><p id=\"u85a18d40\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip 指令默认是 off,设置为 on 打开 gzip。如果只设置</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245); font-size: 16px\">gzip on</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip 可有不会生效，gzip 默认只对大于20字节的内容做处理。我们在测试的时候页面内容都很少，很容易少于 20字节</span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">gzip_min_length</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">,设为0 代表所有大小都压缩。</span></p><p id=\"ua4c4148f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">启用压缩后，在请求 /index.html 响应 200 的时候，查看 header，发现有两个增加，并且 Content-Length 不见了。</span></p><p id=\"uaf580ed7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Content-Encoding:gzip 内容的格式为 gzip,告诉浏览器，需要 gzip 解压再展示。</span></p><p id=\"u0c3d3d46\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Transfer-Encoding:chunked 数据是通过一系列块来传输的，省略 Content-Length ，为了得到内容大小，需要把每个 chunk 的大小 加起来。</span></p><p id=\"ub02267a4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">为什么打开 gzip 后 content-length 信息没有了呢？ 这是因为 nginx 的压缩是异步的，发送头的时候，nginx 可能正在压缩，不知道压缩完成的文件大小。</span></p><p id=\"u7d6f1ab3\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1661328357432-91891d18-8f05-4c09-be78-b5e9cd1abc17.webp\" width=\"666\" id=\"u16f6e592\" class=\"ne-image\" style=\"color: rgb(51, 51, 51); font-size: 16px\"></p><h3 id=\"sWtIX\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">指定需要 gzip 的文件</span></h3><p id=\"udc0592b1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">我们访问 /index.css ,发现并没有压缩，这是因为 gzip ，默认只压缩 text/html 类型的文件。</span></p><p id=\"u83c2bbdc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">增加 text/css 类型后，css 文件 也可以压缩了。</span></p><pre data-language=\"shell\" id=\"nQKWq\" class=\"ne-codeblock language-shell\"><code>gzip_types text/html,text/css;</code></pre><h3 id=\"MTpCP\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">压缩级别。</span></h3><p id=\"u1e2aa04c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip 有9个压缩级别，越高，压缩效果越好，但是对 cpu的消耗越多。默认压缩级别为 1 。我们可以设置一个合适的级别，比如 2；</span></p><pre data-language=\"shell\" id=\"BFAY5\" class=\"ne-codeblock language-shell\"><code>gzip_comp_level 2;</code></pre><h3 id=\"BMML1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">gzip_static</span></h3><p id=\"u433afe4b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">前面讲的nginx 处理 gzip的方式是 服务器负责压缩，这样会消耗掉很多 cpu 资源。我们可以先把文件压缩成 gzip，nginx 直接拿 gzip过的文件就行了。预处理的好处不光是节省了 cpu 压缩时间，还可以 让 nginx 可以用 使用</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">sendfile</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">系统调用来传输文件,性能得到提高。</span></p><p id=\"uf4fa6a4c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">新版本的 nginx 已经 默认安装了这个模块，如果是老版的 nginx 这个模块需要安装一下。</span></p><pre data-language=\"shell\" id=\"EdAuu\" class=\"ne-codeblock language-shell\"><code>gzip_static always; </code></pre><p id=\"u0b84e93f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">如果加上这句,nginx 不报错，说明 gzip_static 模块已经安装了。</span></p><p id=\"u5bd24e94\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gzip_static 可以有三个值。</span></p><ul class=\"ne-ul\"><li id=\"uac9fc402\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">off</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">默认值。 不启用 gzip_static。gzip功能还是可以用的。</span></li><li id=\"u7f7a599f\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">on</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">启用。 当客户端支持 gzip的时候，发送压缩文件，不支持的时候发送原文件。</span></li><li id=\"uf504fc83\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">always</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">总是。 不管客户端是否支持，都优先发送压缩文件。如果没有压缩文件，再发送原文件。</span></li></ul><p id=\"u76e12996\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">实操的时候，用 always 比较好。现在不支持 gzip 的浏览器太少了，这样可以免掉 nginx 判断的步骤，对性能有所提高。为了方便 nginx 查找（文件越多，查找越慢），只保留 gzip 文件，原文件全部删除。</span></p><h2 id=\"suA6m\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">负载均衡</span></h2><pre data-language=\"shell\" id=\"ZfBTe\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    server 192.168.1.1;\n    server 192.168.1.2;\n}\n\nserver {\n    listen       80;\n    server_name  _;\n    location / {\n        proxy_pass   http://servers;\n        proxy_set_header        Host    $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}</code></pre><p id=\"ua7c4b1ed\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">nginx 常用的负载均衡 是</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream\" data-href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">upstream</span></a><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">来完成的。默认采用轮询的方式依次访问各个服务器。可以给每个服务器加权重，调整访问的频率，权重越高，被访问的越频繁。</span></p><pre data-language=\"shell\" id=\"VqLV2\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    server 192.168.1.1 weight=1;\n    server 192.168.1.2 weight=2;\n}</code></pre><p id=\"u5da0550f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">根据 ip 也可以分配请求。这样能保证同一个用户可以由同一个服务器来服务，可以解决登录 session 的问题。但是根据 ip 分配 可能导致某些服务器请求过多，又不能再做调整。所以解决 登录 session 的问题，可以用统一的 redis 服务来解决。</span></p><pre data-language=\"shell\" id=\"C5VZ9\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    ip_hash;\n    server 192.168.1.1 ;\n    server 192.168.1.2 ;\n}</code></pre><p id=\"u35a7e0b8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">根据 url 分配 请求。比如这样的场景， 资源（图片等静态文件）服务器从源服务器拉取资源后，下次请求会再次落到这个资源服务器，就可以直接返回结果 ，不用再从源服务器请求资源了。</span></p><pre data-language=\"shell\" id=\"I0lEv\" class=\"ne-codeblock language-shell\"><code>upstream servers {\n    hash $request_uri;\n    server 192.168.1.1 ;\n    server 192.168.1.2 ;\n}</code></pre><p id=\"u061ca8e5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">最后再介绍一下最小连接数方案。在这种场景下，least_conn算法很简单，首选遍历后端集群，比较每个后端的conns/weight（连接数除权重），选取该值最小的后端。 如果有多个后端的conns/weight值同为最小的，那么对它们采用加权轮询算法。</span></p><pre data-language=\"shell\" id=\"c2Eyy\" class=\"ne-codeblock language-shell\"><code>\nupstream servers {\n    least_conn;\n    server 192.168.1.1 weight=2;\n    server 192.168.1.2 weight=1 ;\n}</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [nginx,配置]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: </span><span data-lake-id=\"u67c0203d\" id=\"u67c0203d\">https://juejin.cn/user/1953149470376301</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u678c9e17\" id=\"u678c9e17\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span data-lake-id=\"u840ccc34\" id=\"u840ccc34\">https://juejin.cn/post/7134540187064860679#heading-34</span><span data-lake-id=\"u2103e9b5\" id=\"u2103e9b5\" style=\"color: rgb(38, 38, 38)\"><br /></span><span data-lake-id=\"u2b87e4fb\" id=\"u2b87e4fb\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span data-lake-id=\"u39e2cead\" id=\"u39e2cead\">IAM17</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover: </span><span data-lake-id=\"ua6239fd1\" id=\"ua6239fd1\">https://cdn.nlark.com/yuque/0/2022/png/27022430/1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png#clientId=u81110d56-3058-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=ui&amp;id=uc10ad34f&amp;margin=%5Bobject%20Object%5D&amp;name=%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220824161836.png&amp;originHeight=393&amp;originWidth=666&amp;originalType=binary%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=84791&amp;status=done&amp;style=none&amp;taskId=ud1e4e7a9-8543-465f-b83c-ba4d1551b6f&amp;title=</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><ul list=\"u54436b88\" class=\"lake-list\"><li fid=\"u24c7ca3a\" version=\"1661329156080\" data-lake-id=\"u4307c33f\" id=\"u4307c33f\" class=\"lake-list-node lake-list-task\" style=\"text-align: center\"><card type=\"inline\" name=\"checkbox\" value=\"data:false\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1661329137182-5c82dc4b-de6c-4ddd-9605-adbee98b5d0c.png%22%2C%22taskId%22%3A%22ud1e4e7a9-8543-465f-b83c-ba4d1551b6f%22%2C%22clientId%22%3A%22u81110d56-3058-4%22%2C%22originalType%22%3A%22binary%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220824161836.png%22%2C%22size%22%3A84791%2C%22from%22%3A%22ui%22%2C%22originWidth%22%3A666%2C%22originHeight%22%3A393%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NGIN%20HTTP%20SERVER%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A9.9679365%2C%22y%22%3A111.777%2C%22width%22%3A346.1604835%2C%22height%22%3A126.21580999999999%2C%22text%22%3A%22NGIN%22%7D%2C%7B%22x%22%3A5.7754784%2C%22y%22%3A255.35028%2C%22width%22%3A114.55795160000001%2C%22height%22%3A53.91626000000002%2C%22text%22%3A%22HTTP%22%7D%2C%7B%22x%22%3A139.40002%2C%22y%22%3A265.9791%2C%22width%22%3A184.40406%2C%22height%22%3A34.224699999999984%2C%22text%22%3A%22SERVER%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23dbe3db%22%2C%22id%22%3A%22uc10ad34f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"></card><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></li></ul><blockquote data-lake-id=\"u5c19dde5\" id=\"u5c19dde5\" class=\"lake-alert lake-alert-color3\"><p data-lake-id=\"ue68ba9d7\" id=\"ue68ba9d7\"><span data-lake-id=\"ub7d66386\" id=\"ub7d66386\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">环境为 CentOS 7。 nginx 版本 1.21</span></p></blockquote><p data-lake-id=\"ub6c4ab08\" id=\"ub6c4ab08\"><span data-lake-id=\"u420e9928\" id=\"u420e9928\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><h2 data-lake-id=\"sttfd\" id=\"sttfd\"><span data-lake-id=\"u34a0ffd5\" id=\"u34a0ffd5\" style=\"color: rgb(51, 51, 51)\">配置文件入口</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%2Fetc%2Fnginx%2Fnginx.conf%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Bracket%20Lights%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22GCL2j%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ubf02d639\" id=\"ubf02d639\"><span data-lake-id=\"u56b5498b\" id=\"u56b5498b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这是入口文件，这个文件里有这样一句：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22include%20%2Fetc%2Fnginx%2Fconf.d%2F*.conf%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22One%20Dark%20Pro%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eGrnT%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uba3fdef3\" id=\"uba3fdef3\"><span data-lake-id=\"udd580e7a\" id=\"udd580e7a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">各个网站的配置文件是放在 conf.d 目录下的。这里面的所有 .conf 文件都会被读取。我们增加一个 test.conf。 yourname 就是你的用户名。在 /home/yourname/web/test/ 下面增加一个 index.html文件 ，文件。文件内容为 hello。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22server%7B%5Cn%20%20listen%203000%3B%5Cn%20%20server_name%20_%3B%5Cn%20%20location%20%2F%20%7B%5Cn%20%20%20%20root%20%2Fhome%2Fyourname%2Fweb%2Ftest%2F%3B%5Cn%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Night%20Owl%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IjNVZ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u0a4e8596\" id=\"u0a4e8596\"><span data-lake-id=\"u54935545\" id=\"u54935545\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">启动 nginx，如果已经启动，reload 配置文件</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E5%90%AF%E5%8A%A8%5Cnsudo%20nginx%20%5Cn%23%20%E5%A6%82%E6%9E%9C%E5%B7%B2%E7%BB%8F%E5%90%AF%E5%8A%A8%EF%BC%8C%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%5Cnsudo%20nginx%20-s%20reload%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Darcula%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22JNT6s%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u57f3dd24\" id=\"u57f3dd24\"><span data-lake-id=\"u7612e5ce\" id=\"u7612e5ce\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">用 ip 或 localhost:3000 用浏览器访问网站，显示 hello。测试方法也可以用</span><span data-lake-id=\"ude88649f\" id=\"ude88649f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ubbd23818\" id=\"ubbd23818\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">curl localhost:3000</span><span data-lake-id=\"ufdcf6f7d\" id=\"ufdcf6f7d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">，这样可能会更方便些。</span></p><h2 data-lake-id=\"nCTV0\" id=\"nCTV0\"><span data-lake-id=\"u6972a334\" id=\"u6972a334\" style=\"color: rgb(51, 51, 51)\">文件类型</span></h2><p data-lake-id=\"u6d947f03\" id=\"u6d947f03\"><span data-lake-id=\"ue306f128\" id=\"ue306f128\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">对于我们请求的内容，浏览器的处理方式是不一样的。浏览器如何判断内容，是根据 响应头</span><span data-lake-id=\"u64cf03c5\" id=\"u64cf03c5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u81f1daca\" id=\"u81f1daca\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">Content-Type</span><span data-lake-id=\"uaa752881\" id=\"uaa752881\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1919dea7\" id=\"u1919dea7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">在入口配置文件 nginx.conf 中有这样两句：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22include%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20%2Fetc%2Fnginx%2Fmime.types%3B%5Cn%5Cndefault_type%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%20application%2Foctet-stream%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22PcSjV%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u53f98152\" id=\"u53f98152\"><br></p><p data-lake-id=\"ue1f53daf\" id=\"ue1f53daf\"><span data-lake-id=\"u9adbd421\" id=\"u9adbd421\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">mine.types 是</span><span data-lake-id=\"u5e9fe275\" id=\"u5e9fe275\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ubc10f3f8\" id=\"ubc10f3f8\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">Content-type</span><span data-lake-id=\"uc5dd6cf2\" id=\"uc5dd6cf2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1bf5fe7b\" id=\"u1bf5fe7b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">和文件后缀名的映射表。比如 xx.css 文件的</span><span data-lake-id=\"uc98ca641\" id=\"uc98ca641\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u95f7cdac\" id=\"u95f7cdac\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">Content-type</span><span data-lake-id=\"u9248dc2b\" id=\"u9248dc2b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u0fd6a4c3\" id=\"u0fd6a4c3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">是</span><span data-lake-id=\"u8e5cf015\" id=\"u8e5cf015\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ufafd1844\" id=\"ufafd1844\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">text/css</span><span data-lake-id=\"u40a287f2\" id=\"u40a287f2\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\"> </span><span data-lake-id=\"u8eaf48ce\" id=\"u8eaf48ce\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">。 default_type 是默认的 type。比如当访问 /a 的时候，如果 a 文件存在，nginx会返回 a 文件，响应头</span><span data-lake-id=\"ubbfdf612\" id=\"ubbfdf612\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ufead9727\" id=\"ufead9727\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">Content-type：application/octet-stream</span><span data-lake-id=\"uc584b522\" id=\"uc584b522\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">。 浏览器对</span><span data-lake-id=\"u19c249e8\" id=\"u19c249e8\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">application/octet-stream</span><span data-lake-id=\"u979717d3\" id=\"u979717d3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">的处理方式是下载，而不是展示。</span></p><p data-lake-id=\"u5e9a8d47\" id=\"u5e9a8d47\"><span data-lake-id=\"u34360285\" id=\"u34360285\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果我们的请求地址是这样的 /a.html,/b.css, nginx 都可以自动处理。但有的时候，可能请求的地址是这样的 /a,这时就需要我们手动指定 type 类型。指定 type 类型很简单，有两种方法。</span></p><p data-lake-id=\"u0c8cf509\" id=\"u0c8cf509\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2Fcss%20%7B%5Cn%20%20add_header%20Content-type%20text%2Fcss%3B%5Cn%7D%5Cnlocation%20%2Fcss%20%7B%5Cn%20%20default_type%C2%A0%20text%2Fcss%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22NDPBG%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"WnI9G\" id=\"WnI9G\"><span data-lake-id=\"ud42b8c72\" id=\"ud42b8c72\" style=\"color: rgb(51, 51, 51)\">自定义log</span></h2><p data-lake-id=\"ua4e42203\" id=\"ua4e42203\"><span data-lake-id=\"uebaf20e3\" id=\"uebaf20e3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">打开 /etc/nginx/nginx.conf 找到 log_format</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20log_format%20%20main%20%20'%24remote_addr%20-%20%24remote_user%20%5B%24time_local%5D%20%5C%22%24request%5C%22%20'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%24status%20%24body_bytes_sent%20%5C%22%24http_referer%5C%22%20'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%5C%22%24http_user_agent%5C%22%20%5C%22%24http_x_forwarded_for%5C%22'%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Mdeq4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u31a4bffb\" id=\"u31a4bffb\"><span data-lake-id=\"ua2dc1388\" id=\"ua2dc1388\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">对于开发来说可以去掉 ua，ua 很长，去掉可以方便查看。尤其对于初学者，建议加上 $request_filename ，这个变量代表的是访问的实际文件路径，对于理解各种指令的效果，查找错误非常有帮助。</span></p><p data-lake-id=\"u4532cb8a\" id=\"u4532cb8a\"><span data-lake-id=\"u9f7f6ecb\" id=\"u9f7f6ecb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">在入口的配置文件中用 Log_foramt定义了一个 main。我们可以定义一个 dev，按你所需求选用需要的内容即可。 使用的时候，直接用 dev这个名字就行。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20log_format%20%20dev%20%20'%5B%24time_local%5D%20%5C%22%24request%5C%22%20%24request_filename'%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%24status%20%24body_bytes_sent%20%5C%22%24http_referer%5C%22%20'%5Cn%20access_log%20%2Fhome%2Fduhongwei%2Flog%2Faccess.log%20dev%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22V9a99%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"HERic\" id=\"HERic\"><span data-lake-id=\"u5894dfa7\" id=\"u5894dfa7\" style=\"color: rgb(51, 51, 51)\">location 匹配规则</span></h2><p data-lake-id=\"u2d42ea63\" id=\"u2d42ea63\"><span data-lake-id=\"ud6a81a65\" id=\"ud6a81a65\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">@ 匹配规则在后面的 try_files 中有举例</span></p><p data-lake-id=\"u196af0c3\" id=\"u196af0c3\"><span data-lake-id=\"u14507a7a\" id=\"u14507a7a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">location 按如下优先级匹配</span></p><ol list=\"ub22db070\"><li fid=\"ue7d7d9e7\" data-lake-id=\"u1b2d6e45\" id=\"u1b2d6e45\"><span data-lake-id=\"u4943a987\" id=\"u4943a987\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">= 绝对匹配，一个字符也不能差</span></li><li fid=\"ue7d7d9e7\" data-lake-id=\"ufb5b75f2\" id=\"ufb5b75f2\"><span data-lake-id=\"udb97a29f\" id=\"udb97a29f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">^~ 前缀匹配</span></li><li fid=\"ue7d7d9e7\" data-lake-id=\"u7abf663e\" id=\"u7abf663e\"><span data-lake-id=\"ua0dad957\" id=\"ua0dad957\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">~（区分大小写）， ~*(不区分大小写) 正则匹配</span></li><li fid=\"ue7d7d9e7\" data-lake-id=\"ub2bfac06\" id=\"ub2bfac06\"><span data-lake-id=\"ue7cf018c\" id=\"ue7cf018c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">普通前缀匹配</span></li></ol><p data-lake-id=\"u65a5c308\" id=\"u65a5c308\"><span data-lake-id=\"uaaa6cc80\" id=\"uaaa6cc80\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">2，4的匹配是匹配最长优先。 3 的匹配是按顺序，写在前面的优先。</span></p><h3 data-lake-id=\"hfxlS\" id=\"hfxlS\"><span data-lake-id=\"u8f036429\" id=\"u8f036429\" style=\"color: rgb(51, 51, 51)\">完全匹配</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%3D%20%2Fabc%20%7B%5Cn%20%20%20return%20900%3B%5Cn%7D%5Cn%5Cncurl%20-I%20localhost%3A3000%2Fabc%5CnHTTP%2F1.1%20901%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OIX6j%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf1bd7b12\" id=\"uf1bd7b12\"><span data-lake-id=\"ub8f0a272\" id=\"ub8f0a272\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">location = abc 虽然只少了 / ，但这样是匹配不到的，一个字符也不能差。完全匹配优先级最高，无论写在前面还是后面。</span></p><h3 data-lake-id=\"tdUAk\" id=\"tdUAk\"><span data-lake-id=\"u2d6d6fb3\" id=\"u2d6d6fb3\" style=\"color: rgb(51, 51, 51)\">^~ 前端缀匹配</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%5Cnlocation%20~%20abc%20%7B%5Cn%20%20%20return%20900%3B%5Cn%7D%5Cn%23%20%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D%5Cnlocation%20%5E~%20%20%2Fa%20%7B%5Cn%20%20%20return%20901%3B%5Cn%7D%5Cn%5Cncurl%20-I%20localhost%3A3000%2Fabc%5CnHTTP%2F1.1%20901%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22cCuPe%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4ee04bfa\" id=\"u4ee04bfa\"><span data-lake-id=\"u68ed589d\" id=\"u68ed589d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">^~ 匹配的优先级高于正则匹配。</span></p><p data-lake-id=\"u9151764e\" id=\"u9151764e\"><span data-lake-id=\"ue13f6278\" id=\"ue13f6278\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">初看到 ^~ 的人会误以为是正则匹配。这个要注意下，这个是前缀匹配，就是从前向后一个字符一个字符匹配。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E6%99%AE%E9%80%9A%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D%5Cn%2Fabc%2F%20%7B%5Cn%7D%5Cn%5Cn%23%20%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D%5Cn%5E~%20%2Fabc%2F%20%7B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22yF99n%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf79a22fd\" id=\"uf79a22fd\"><span data-lake-id=\"u1d1ce0e4\" id=\"u1d1ce0e4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这两种写法的匹配方式是一样，^~ 的优先级更高。</span></p><h3 data-lake-id=\"W5mQ9\" id=\"W5mQ9\"><span data-lake-id=\"u37606c11\" id=\"u37606c11\" style=\"color: rgb(51, 51, 51)\">正则匹配</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E6%99%AE%E9%80%9A%E5%89%8D%E7%BC%80%E5%8C%B9%E9%85%8D%5Cnlocation%20%20%2Fabcd%20%7B%5Cn%20%20%20return%20901%3B%5Cn%7D%5Cn%23%20%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%5Cnlocation%20~%20%2Fab%20%7B%5Cn%20%20%20return%20902%3B%5Cn%7D%5Cn%5Cncurl%20-I%20localhost%3A3000%2Fabcd%5CnHTTP%2F1.1%20902%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jaSU3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u80d5fdee\" id=\"u80d5fdee\"><span data-lake-id=\"u022bff07\" id=\"u022bff07\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">正则匹配的优先级高于普通前缀匹配。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%5Cnlocation%20~%20%2Fab%20%7B%5Cn%20%20%20return%20901%3B%5Cn%7D%5Cn%5Cn%23%20%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D%5Cnlocation%20~%20%2Fabc%20%7B%5Cn%20%20%20return%20902%3B%5Cn%7D%5Cn%5Cncurl%20-I%20localhost%3A3000%2Fabc%5CnHTTP%2F1.1%20901%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22oe6Ap%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u65c93308\" id=\"u65c93308\"><span data-lake-id=\"u2c2c0252\" id=\"u2c2c0252\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">正则匹配是按顺序来的，前面的匹配成功后面的就不再匹配了。</span></p><p data-lake-id=\"uf6849221\" id=\"uf6849221\"><span data-lake-id=\"uc54befa2\" id=\"uc54befa2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">从性能上来说，尽量不要用正则，正则匹配性能最低。</span></p><h3 data-lake-id=\"qJ719\" id=\"qJ719\"><span data-lake-id=\"u1e5aa005\" id=\"u1e5aa005\" style=\"color: rgb(51, 51, 51)\">前缀匹配最长优先</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%20%2Fabc%20%7B%5Cn%20%20%20return%20901%3B%5Cn%7D%5Cnlocation%20%20%2Fabcd%20%7B%5Cn%20%20%20return%20902%3B%5Cn%7D%5Cn%5Cnlocation%20%5E~%20%2Fdef%20%7B%5Cn%20%20%20return%20903%3B%5Cn%7D%5Cnlocation%20%5E~%20%2Fdefg%20%7B%5Cn%20%20%20return%20904%3B%5Cn%7D%5Cn%5Cn%5Cncurl%20-I%20localhost%3A3000%2Fabc%5CnHTTP%2F1.1%20902%5Cn%5Cncurl%20-I%20localhost%3A3000%2Fdefg%5CnHTTP%2F1.1%20904%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZjVNE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"hnSqW\" id=\"hnSqW\"><span data-lake-id=\"u4448657b\" id=\"u4448657b\" style=\"color: rgb(51, 51, 51)\">pass_proxy 代理</span></h2><p data-lake-id=\"u05937697\" id=\"u05937697\"><span data-lake-id=\"ua885ff71\" id=\"ua885ff71\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">在前端代理主要是为了跨域。虽然前端跨域有多种方法，各有利弊，但用代理来跨域对开发是最友好的。用代理可以不用修改产品代码切换线上线下，非常安全。pass_proxy 默认会把 cookie 也一同转发。 常用的配置非常简单。</span></p><h3 data-lake-id=\"r6G58\" id=\"r6G58\"><span data-lake-id=\"u18f897df\" id=\"u18f897df\" style=\"color: rgb(51, 51, 51)\">不带斜杠</span></h3><p data-lake-id=\"u398b8b29\" id=\"u398b8b29\"><span data-lake-id=\"ua5f7aa3c\" id=\"ua5f7aa3c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">前端 /api/user</span></p><p data-lake-id=\"u18ab069a\" id=\"u18ab069a\"><span data-lake-id=\"u260851e2\" id=\"u260851e2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">后端 /api/user</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20location%20%5E~%20%2Fapi%2F%20%7B%5Cn%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A3001%3B%5Cn%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FLYeM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u5329f6d4\" id=\"u5329f6d4\"><span data-lake-id=\"u6bf9b525\" id=\"u6bf9b525\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">不带斜杠把 path 直接拼接在 url后面；</span></p><h3 data-lake-id=\"wtLKW\" id=\"wtLKW\"><span data-lake-id=\"u7f230d0c\" id=\"u7f230d0c\" style=\"color: rgb(51, 51, 51)\">带斜杠</span></h3><p data-lake-id=\"u48cebdd9\" id=\"u48cebdd9\"><span data-lake-id=\"u0cfcd0dd\" id=\"u0cfcd0dd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">前端 /api/user</span></p><p data-lake-id=\"ue09110fc\" id=\"ue09110fc\"><span data-lake-id=\"u8349e7e0\" id=\"u8349e7e0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">后端 /user</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20location%20%5E~%20%2Fapi%2F%20%7B%5Cn%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A3001%2F%3B%5Cn%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BJVg8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u228ce161\" id=\"u228ce161\"><span data-lake-id=\"u8dcc55d1\" id=\"u8dcc55d1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">带斜杠会先去掉匹配到的 path, 再拼接。</span></p><h3 data-lake-id=\"Selua\" id=\"Selua\"><span data-lake-id=\"uda3d9136\" id=\"uda3d9136\" style=\"color: rgb(51, 51, 51)\">正则匹配的时候不能带斜杠</span></h3><p data-lake-id=\"u20ed640d\" id=\"u20ed640d\"><span data-lake-id=\"ue3e6df5a\" id=\"ue3e6df5a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">~ 区分大小写正则匹配 ，~* 不区分大小写正则匹配 。location 用正则匹配的时候，proxy_pass 后面不能以 / 结尾，因为 nginx 不能处理这种情况。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20location%20%5E~%20%2Fapi%2F%20%7B%5Cn%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A3001%2Fweb%24request_uri%3B%5Cn%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Q9WKP%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u6d567235\" id=\"u6d567235\"><span data-lake-id=\"u181d7e76\" id=\"u181d7e76\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">本例中，请求 localhost:3000/ 会导致 nginx 报错。</span></p><h3 data-lake-id=\"ki2Rm\" id=\"ki2Rm\"><span data-lake-id=\"u42e34215\" id=\"u42e34215\" style=\"color: rgb(51, 51, 51)\">斜杠后面加路径</span></h3><p data-lake-id=\"ue416b363\" id=\"ue416b363\"><span data-lake-id=\"ue75aa219\" id=\"ue75aa219\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">前端 /api/user</span></p><p data-lake-id=\"u2d34a356\" id=\"u2d34a356\"><span data-lake-id=\"u21bd7915\" id=\"u21bd7915\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">后端 /web/api/user</span></p><p data-lake-id=\"u4553d9b8\" id=\"u4553d9b8\"><span data-lake-id=\"u47dc870b\" id=\"u47dc870b\"> location ^~ /api/ {      proxy_pass http://127.0.0.1:3001/web</span><span data-lake-id=\"u0dc94e87\" id=\"u0dc94e87\" style=\"color: teal\">$request_uri</span><span data-lake-id=\"uf4fdc9a9\" id=\"uf4fdc9a9\">;  } </span><span data-lake-id=\"u7f278aec\" id=\"u7f278aec\" class=\"lake-fontsize-9\" style=\"color: rgba(140, 140, 140, 0.8)\">复制代码</span></p><h3 data-lake-id=\"QEW4S\" id=\"QEW4S\"><span data-lake-id=\"u1d4eb796\" id=\"u1d4eb796\" style=\"color: rgb(51, 51, 51)\">代理之前rewrite</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2Fsearch%2F%20%7B%5Cn%20%20%20%20rewrite%20%20%20%20%2Fsearch%2F(%5B%5E%2F%5D%2B)%20%2Fs%3Fwd%3D%241%20break%3B%5Cn%20%20%20%20proxy_pass%20https%3A%2F%2F127.0.0.1%3A3001%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eWPgz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"YBJVk\" id=\"YBJVk\"><span data-lake-id=\"u32c2faef\" id=\"u32c2faef\" style=\"color: rgb(51, 51, 51)\">服务端获取真实ip</span></h3><p data-lake-id=\"u1dc158bc\" id=\"u1dc158bc\"><span data-lake-id=\"u88aeba0b\" id=\"u88aeba0b\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">反向代理: 简单来说 proxy_pass 把请求转发到其它服务地址的时候，就是反向代理。</span></p><p data-lake-id=\"u5aee0471\" id=\"u5aee0471\"><span data-lake-id=\"uf2d47171\" id=\"uf2d47171\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果是客户端与服务器直接连接，nginx 变量</span><span data-lake-id=\"ub34a48ef\" id=\"ub34a48ef\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ub912684d\" id=\"ub912684d\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$remote_addr</span><span data-lake-id=\"u95a6bace\" id=\"u95a6bace\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u7670b4a3\" id=\"u7670b4a3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">就可以拿到 真实ip。</span><span data-lake-id=\"u92465ebb\" id=\"u92465ebb\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$remote_addr</span><span data-lake-id=\"u565392d2\" id=\"u565392d2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u5ec38012\" id=\"u5ec38012\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">是不能伪造的。但是如果 客户端是经过反向代理连接的服务器，服务器能拿到的只有代理服务器的 IP。为了能拿到客户端真实 IP,代理服务器在转发的时候需要加上一个http 扩展头部 X-Forwarded-For。</span></p><p data-lake-id=\"u8012e9ea\" id=\"u8012e9ea\"><span data-lake-id=\"u71961632\" id=\"u71961632\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">所有代理的 ip 依次列出来，从远及近。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22X-Forwarded-For%3A%20IP0%2C%20IP1%2C%20IP2%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mdKE2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u5709834c\" id=\"u5709834c\"><span data-lake-id=\"u68d40d9b\" id=\"u68d40d9b\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">X-Forwarded-For 是一个 HTTP 扩展头部。HTTP/1.1（RFC 2616）协议并没有对它的定义，它最开始是由 Squid 这个缓存代理软件引入，用来表示 HTTP 请求端真实 IP。如今它已经成为事实上的标准，被各大 HTTP 代 理、负载均衡等转发服务广泛使用，并被写入 RFC 7239（Forwarded HTTP Extension）标准之中。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2Fapi%2F%20%7B%5Cnproxy_set_header%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%5Cnproxy_pass%20http%3A%2F%2F127.0.0.1%3A3000%2F%3B%5Cn%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Y5X9f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u76ebe167\" id=\"u76ebe167\"><span data-lake-id=\"u1e52d4fb\" id=\"u1e52d4fb\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$proxy_add_x_forwarded_for</span><span data-lake-id=\"u1a0872f6\" id=\"u1a0872f6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">变量包含客户端请求头中的&quot;X-Forwarded-For&quot;，与</span><span data-lake-id=\"ube6ab6f0\" id=\"ube6ab6f0\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$remote_addr</span><span data-lake-id=\"u523b8100\" id=\"u523b8100\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">用逗号分开，如果没有&quot;X-Forwarded-For&quot; 请求头，则</span><span data-lake-id=\"ue260f5a2\" id=\"ue260f5a2\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$proxy_add_x_forwarded_for</span><span data-lake-id=\"ub3add44a\" id=\"ub3add44a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">等于</span><span data-lake-id=\"uebe47eab\" id=\"uebe47eab\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$remote_addr</span><span data-lake-id=\"u1b1cf02b\" id=\"u1b1cf02b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">。</span><span data-lake-id=\"uc6068659\" id=\"uc6068659\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$remote_addr</span><span data-lake-id=\"u39c3b478\" id=\"u39c3b478\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">变量的值是客户端的IP。</span></p><p data-lake-id=\"ua02e6b19\" id=\"ua02e6b19\"><span data-lake-id=\"u7ec7133c\" id=\"u7ec7133c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">可能你会担心，ip会不会被伪造。即使客户端伪造了 ip，nginx也会用真实的 ip 进行重置。所以</span><span data-lake-id=\"ud6e72168\" id=\"ud6e72168\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u5b71fda4\" id=\"u5b71fda4\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">$remote_addr</span><span data-lake-id=\"u4638d330\" id=\"u4638d330\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uf487ff55\" id=\"uf487ff55\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">是可信的。</span></p><h3 data-lake-id=\"re52p\" id=\"re52p\"><span data-lake-id=\"u3b7aa38e\" id=\"u3b7aa38e\" style=\"color: rgb(51, 51, 51)\">try_files</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22properties%22%2C%22code%22%3A%22try_files%C2%A0file%C2%A0...%C2%A0uri%3B%5Cntry_files%C2%A0file%C2%A0...%20%3Dcode%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22RL3Ca%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u9362bd36\" id=\"u9362bd36\"><span data-lake-id=\"uf5d3bf70\" id=\"uf5d3bf70\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">举两个例子，对应这两种语法。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2Fimages%2F%20%7B%5Cn%20%20%20%20try_files%20%24uri%20%2Fimages%2Fdefault.gif%3B%5Cn%7D%5Cn%5Cnlocation%20%3D%20%2Fimages%2Fdefault.gif%20%7B%5Cn%20%20%20%20expires%2030d%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jU9Yy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20%20%20%20try_files%20%24uri%20%24uri%2Findex.html%20%24uri.html%20%3D404%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22U9ut4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u42e89ba5\" id=\"u42e89ba5\"><span data-lake-id=\"u87d1d68a\" id=\"u87d1d68a\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">=404 的 等号 是必须的</span></p><p data-lake-id=\"u925dbd60\" id=\"u925dbd60\"><span data-lake-id=\"u19146e8c\" id=\"u19146e8c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">try_file 后面必须有一个file, 一个 url 或 code,file 可以有多个。</span></p><p data-lake-id=\"u0ffb86c9\" id=\"u0ffb86c9\"><span data-lake-id=\"uf390858d\" id=\"uf390858d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">简单来说，try_file 按顺序检查 file,如果是文件夹，请在 file后加 / ，如果 file 都不存在，根据最后一个参数做跳转。</span></p><p data-lake-id=\"u2adbb975\" id=\"u2adbb975\"><span data-lake-id=\"u6d13eea0\" id=\"u6d13eea0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">借这个机会说一个 @ 在location中的用法。 @相当于命名了一个变量。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20%20%20%20try_files%20%2Fsystem%2Fmaintenance.html%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24uri%20%24uri%2Findex.html%20%24uri.html%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%40mongrel%3B%5Cn%7D%5Cnlocation%20%40mongrel%20%7B%5Cn%20%20%20%20proxy_pass%20http%3A%2F%2Fmongrel%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OZ0md%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufae798e8\" id=\"ufae798e8\"><span data-lake-id=\"ua9e6ad7b\" id=\"ua9e6ad7b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">try_files 的一个应用场景就是单面应用.</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20try_files%20%24uri%20%24uri%2F%20%2Findex.html%5Cn%20%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bdA5U%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4f418ca3\" id=\"u4f418ca3\"><span data-lake-id=\"u0e43b015\" id=\"u0e43b015\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果请求的是 /a, 首先会查找 a 文件 是否存在，然后找 a 目录是否存在,如果都不存在，转到 /index.html。 再次命中 location / ，再次执行 try_files，这回找到index.html 返回。</span></p><p data-lake-id=\"u0a07bb99\" id=\"u0a07bb99\"><span data-lake-id=\"u9ad6d89c\" id=\"u9ad6d89c\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">注意：如果 index.html 不存在，会报 500，所以用 try_files的时候，要避免多次命中，最后的跳转最好转到别处。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20try_files%20%24uri%20%24uri%2F%20%2Findex.html%20%5Cn%7D%5Cnlocation%20%2Findex.html%7B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22sH68S%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7fffc73f\" id=\"u7fffc73f\"><span data-lake-id=\"uaa73db0c\" id=\"uaa73db0c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这样修改后，只经历一次尝试，如果找不到，会报 404，不是 500。</span></p><h2 data-lake-id=\"ngmIt\" id=\"ngmIt\"><span data-lake-id=\"u8907fcd8\" id=\"u8907fcd8\" style=\"color: rgb(51, 51, 51)\">error_page</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22error_page%C2%A0code%C2%A0...%20%5B%3D%5Bresponse%5D%5D%C2%A0uri%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KXMHJ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u1c618c47\" id=\"u1c618c47\"><span data-lake-id=\"u2328765b\" id=\"u2328765b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">error_page 会产生内部跳转</span></p><p data-lake-id=\"u7c941c14\" id=\"u7c941c14\"><span data-lake-id=\"u7552e67e\" id=\"u7552e67e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">举例</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22error_page%20404%20%20%20%20%20%20%20%20%20%20%20%20%20%2F404.html%3B%5Cnerror_page%20500%20502%20503%20504%20%2F50x.html%3B%5Cnerror_page%20404%20%3D200%20%2Fempty.gif%3B%5Cn%5Cnerror_page%20404%20%3D301%20http%3A%2F%2Fexample.com%2Fnotfound.html%3B%5Cn%5Cnlocation%20%2F%20%7B%5Cn%20%20%20%20error_page%20404%20%3D%20%40fallback%3B%5Cn%7D%5Cn%5Cnlocation%20%40fallback%20%7B%5Cn%20%20%20%20proxy_pass%20http%3A%2F%2Fbackend%3B%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22y4JGS%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u30983b8f\" id=\"u30983b8f\"><span data-lake-id=\"u03a94ea4\" id=\"u03a94ea4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果找不到直接跳 404 页面没什么问题，但是如果是跳到首页，或是显示一张图片，</span></p><p data-lake-id=\"ue11b4acf\" id=\"ue11b4acf\"><span data-lake-id=\"u5e79652a\" id=\"u5e79652a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果这样写</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22error_page%20404%20%2Findex.html%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UOAjK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u73a4b645\" id=\"u73a4b645\"><span data-lake-id=\"uac50d348\" id=\"uac50d348\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">当访问不存在的页面的时候，会跳到首页，但是状态码会显示 404。如果要显示 200,可以指定</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22error_page%20404%20%3D200%20%2Findex.html%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22w8TEv%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"ri2td\" id=\"ri2td\"><span data-lake-id=\"u7aa26769\" id=\"u7aa26769\" style=\"color: rgb(51, 51, 51)\">页面缓存</span></h2><p data-lake-id=\"u12619709\" id=\"u12619709\"><span data-lake-id=\"u86a179c7\" id=\"u86a179c7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">http header 相关的缓存有两种</span></p><ol list=\"u55ff8217\"><li fid=\"u64e50c57\" data-lake-id=\"u628a518f\" id=\"u628a518f\"><span data-lake-id=\"u86e2dace\" id=\"u86e2dace\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">强制缓存</span></li><li fid=\"u64e50c57\" data-lake-id=\"u806a1cfe\" id=\"u806a1cfe\"><span data-lake-id=\"ub56a78e5\" id=\"ub56a78e5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">协商缓存</span></li></ol><p data-lake-id=\"u0ba2c4c7\" id=\"u0ba2c4c7\"><span data-lake-id=\"u65d40e07\" id=\"u65d40e07\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">响应头部有两个值代表是否要强制缓存。Cache-Control 和 expires。至于为什么有两个头，expires 是历史遗留。</span></p><p data-lake-id=\"uc4039fdf\" id=\"uc4039fdf\"><span data-lake-id=\"udf905ccb\" id=\"udf905ccb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果</span><span data-lake-id=\"u41290d5b\" id=\"u41290d5b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><strong><span data-lake-id=\"ube147512\" id=\"ube147512\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">不需要强制缓存</span></strong><span data-lake-id=\"u420803cf\" id=\"u420803cf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u0ca2e19a\" id=\"u0ca2e19a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">nginx可以这样配置</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22expires%20-1%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22vt1CA%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u44ae7e32\" id=\"u44ae7e32\"><span data-lake-id=\"ubcfe978c\" id=\"ubcfe978c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">nginx 发回的头部</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22Cache-Control%3Ano-cache%5CnExpires%3AThu%2C%2018%20Aug%202022%2006%3A55%3A23%20GMT%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22TkzBD%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf7c6c205\" id=\"uf7c6c205\"><span data-lake-id=\"uad98697f\" id=\"uad98697f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">Expires 的时间比当前早一秒。</span></p><p data-lake-id=\"u8e681fc0\" id=\"u8e681fc0\"><span data-lake-id=\"u7ed06b55\" id=\"u7ed06b55\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">也可以不配置 nginx。 默认是关闭强制缓存的</span><span data-lake-id=\"uc5b71502\" id=\"uc5b71502\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u65e48032\" id=\"u65e48032\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">expires off</span></p><p data-lake-id=\"u73572ead\" id=\"u73572ead\"><span data-lake-id=\"u8ad06357\" id=\"u8ad06357\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">expires off</span><span data-lake-id=\"ua946aef2\" id=\"ua946aef2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ud388c9ab\" id=\"ud388c9ab\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">和</span><span data-lake-id=\"u0b6cda01\" id=\"u0b6cda01\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u19bfb7a0\" id=\"u19bfb7a0\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">expires -1</span><span data-lake-id=\"u4ae76139\" id=\"u4ae76139\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u103e13ce\" id=\"u103e13ce\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">都可以关闭强制缓存，但响应头不一样，</span><span data-lake-id=\"udcfd2c6a\" id=\"udcfd2c6a\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">expires off</span><span data-lake-id=\"u63768f9b\" id=\"u63768f9b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u7beee2bb\" id=\"u7beee2bb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">不会发送 Cache-Control 和 expires。</span></p><p data-lake-id=\"u7842bacc\" id=\"u7842bacc\"><span data-lake-id=\"u912c00a5\" id=\"u912c00a5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果需要强制缓存 这样配置</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22expires%201d%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bNEUc%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ue117645b\" id=\"ue117645b\"><span data-lake-id=\"u83c0de8e\" id=\"u83c0de8e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">1d 表示强制缓存一天。但是浏览器是否采用强制缓存还取决于浏览器的具体实现。</span></p><p data-lake-id=\"uf6e6c153\" id=\"uf6e6c153\"><span data-lake-id=\"ufc4f5c32\" id=\"ufc4f5c32\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">比如你在浏览器中直接请求一个图片地址（网络上随便找张图片就成），查看响应头，一般都会带有 expires 和 Cache-control ，下次请求应该会命中强制缓存，但是，下次请求的时候走的是协商缓存，状态码是 304。为什么会这样呢？因为chrome 在直接请求图片的时候 在请求头中加上了</span><span data-lake-id=\"u6098a12b\" id=\"u6098a12b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uf7ecd78d\" id=\"uf7ecd78d\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">cache-control:max-age=0</span><span data-lake-id=\"u59950680\" id=\"u59950680\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">,表明本次请求不会采用强制缓存</span></p><p data-lake-id=\"ued7d36d6\" id=\"ued7d36d6\"><span data-lake-id=\"u69f04603\" id=\"u69f04603\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">当强制刷新的时候，值变为 no-cache，响应码 200。浏览器忽略强制缓存，服务端忽略协商缓存，重新返回内容。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22cache-control%3Ano-cache%5Cnpragma%3Ano-cache%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22DV41u%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ub22cbdb7\" id=\"ub22cbdb7\"><span data-lake-id=\"ucf2e660d\" id=\"ucf2e660d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">不光是图片，chrome 直接访问 html 也不会命中强制缓存。对于浏览器的这个策略也是合理的。当访问一个网站的时候，我们第一个请求的是网站首页 index.html。如果首页被强制缓存了 10天，那么可能 10 天内用户看到的都是旧内容。</span></p><p data-lake-id=\"u89537d9e\" id=\"u89537d9e\"><span data-lake-id=\"ubb4ed77d\" id=\"ubb4ed77d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">cache-control：</span><strong><span data-lake-id=\"u1c96b0a7\" id=\"u1c96b0a7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">no-store</span></strong><span data-lake-id=\"uc344a96b\" id=\"uc344a96b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1563c2ec\" id=\"u1563c2ec\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这个字段就是告诉浏览器不进行缓存。这个最彻底，无论是强制缓存还是协商缓存都会关闭。nginx 中这样配置</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22add_header%20Cache-Control%20no-sotre%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zDXO3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ueb2cb955\" id=\"ueb2cb955\"><span data-lake-id=\"ued54967d\" id=\"ued54967d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">cache-control：</span><strong><span data-lake-id=\"u3a84a710\" id=\"u3a84a710\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">no-cache</span></strong><span data-lake-id=\"uf9d9f784\" id=\"uf9d9f784\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uf2a374d9\" id=\"uf2a374d9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">关闭强制缓存，但还是会走协商缓存。</span></p><p data-lake-id=\"u2f48a749\" id=\"u2f48a749\"><span data-lake-id=\"u562ee271\" id=\"u562ee271\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">关闭了强制缓存就会走协商缓存，Last-Modified、etag， nginx 都会默认加上。</span></p><h3 data-lake-id=\"uLu9Z\" id=\"uLu9Z\"><span data-lake-id=\"ud540e6c6\" id=\"ud540e6c6\" style=\"color: rgb(51, 51, 51)\">给图片等静态资源加强缓存</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20~*%20%5C%5C.(%3F%3Acss(%5C%5C.map)%3F%7Cjs(%5C%5C.map)%3F%7Cgif%7Csvg%7Cjfif%7Cico%7Ccur%7Cheic%7Cwebp%7Ctiff%3F%7Cmp3%7Cm4a%7Caac%7Cogg%7Cmidi%3F%7Cwav%7Cmp4%7Cmov%7Cwebm%7Cmpe%3Fg%7Cavi%7Cogv%7Cflv%7Cwmv)%24%20%7B%5Cn%20%20%20%20%23%20%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%AE%BE%E7%BD%AE%E4%B8%80%E5%B9%B4%E5%BC%BA%E7%BC%93%E5%AD%98%20%5Cn%20%20%20%20expires%20365d%3B%20%5Cn%20%20%20%20access_log%20off%3B%20%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22cFcQH%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf391ced3\" id=\"uf391ced3\"><span data-lake-id=\"u196bdd26\" id=\"u196bdd26\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">一般会给静态资源设置一个较长的缓存。如果资源发生变化，会修改文件名。一般用 md5值做为文件名。</span></p><h2 data-lake-id=\"BHWZj\" id=\"BHWZj\"><span data-lake-id=\"u1f98f0e0\" id=\"u1f98f0e0\" style=\"color: rgb(51, 51, 51)\">root 与 alias</span></h2><p data-lake-id=\"u8d8b17a1\" id=\"u8d8b17a1\"><span data-lake-id=\"u9fbd7437\" id=\"u9fbd7437\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">root 与 alias 决定到哪里在去访问实际的文件，区别在于 root 会拼接匹配到路径，alias 会替换匹配到的路径。我们看个实际的例子。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22makefile%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20root%20%2Fhome%2Fuser%2Fweb%3B%20%5Cn%7D%5Cn%5Cn%E8%AF%B7%E6%B1%82%20%2Fa.jpg%EF%BC%8C%E5%AE%9E%E9%99%85%E8%AF%B7%E6%B1%82%E7%9A%84%E6%98%AF%20%2Fhome%2Fuser%2Fweb%2Fa.jpg%EF%BC%8C%E6%89%BE%E5%88%B0%E5%9B%BE%E7%89%87%5Cn%5Cn%E6%8A%8A%20root%20%E6%8D%A2%E6%88%90%20alias%5Cnlocation%20%2F%20%7B%5Cn%20alias%20%2Fhome%2Fuser%2Fweb%3B%20%5Cn%7D%5Cn%5Cn%E8%AF%B7%E6%B1%82%20%2Fa.jpg%EF%BC%8C%E5%AE%9E%E9%99%85%E8%AF%B7%E6%B1%82%E7%9A%84%E6%98%AF%20%2Fhome%2Fuser%2Fweba.jpg%EF%BC%8C%E6%89%BE%E5%88%B0%E4%B8%8D%E5%9B%BE%E7%89%87%E4%BA%86%E3%80%82%E5%9B%A0%E4%B8%BA%20%2F%20%E8%A2%AB%E6%9B%BF%E6%8D%A2%E6%8E%89%E4%BA%86%E3%80%82%E8%A7%A3%E5%86%B3%E7%9A%84%E6%96%B9%E6%B3%95%E6%98%AF%E6%8A%8A%20%2F%20%E8%A1%A5%E4%B8%8A%5Cn%5Cnlocation%20%2F%20%7B%5Cn%20alias%20%2Fhome%2Fuser%2Fweb%2F%3B%20%5Cn%7D%5Cn%5Cn%E4%B9%9F%E4%B8%8D%E6%98%AF%E8%AF%B4%20alias%20%E5%BF%85%E9%A1%BB%E4%BB%A5%20%2F%20%E7%BB%93%E5%B0%BE%EF%BC%8C%E5%A6%82%E6%9E%9Clocation%E4%B8%AD%20%E4%B8%8D%E6%98%AF%E4%BB%A5%20%2F%E7%BB%93%E5%B0%BE%EF%BC%8Calias%20%E5%90%8E%E9%9D%A2%E5%B0%B1%E4%B8%8D%E5%8A%A0%20%2F%5Cn%5Cn%E5%9C%A8%E8%BF%99%E4%B8%AA%E4%BE%8B%E5%AD%90%E4%B8%AD%20%EF%BC%8C%E8%AF%B7%E6%B1%82%20%2Fa%2Fb.jpg%20%EF%BC%8C%E5%AE%9E%E9%99%85%E6%9F%A5%E6%89%BE%20%2Fhome%2Fuser%2Fweb%2Fb.jpg%E3%80%82%20%E5%8F%AA%E6%98%AF%E6%8A%8A%20%2Fa%20%E5%8E%BB%E6%8E%89%E8%80%8C%E5%B7%B2%E3%80%82%5Cn%5Cnlocation%20%2Fa%20%7B%5Cn%20alias%20%2Fhome%2Fuser%2Fweb%3B%20%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22XOKFY%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u68988bb2\" id=\"u68988bb2\"><span data-lake-id=\"u5ba10b5f\" id=\"u5ba10b5f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">我们在用的时候，优先用 root。root 可以用在</span><span data-lake-id=\"u2b7bd0c6\" id=\"u2b7bd0c6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u4196fda1\" id=\"u4196fda1\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">http</span><span data-lake-id=\"u778696d3\" id=\"u778696d3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, </span><span data-lake-id=\"uc56fcbed\" id=\"uc56fcbed\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">server</span><span data-lake-id=\"ud494402b\" id=\"ud494402b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, </span><span data-lake-id=\"ue548619c\" id=\"ue548619c\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">location</span><span data-lake-id=\"ue83dc8e9\" id=\"ue83dc8e9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, </span><span data-lake-id=\"ue7eb2810\" id=\"ue7eb2810\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">if in location</span><span data-lake-id=\"u9b58e057\" id=\"u9b58e057\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">，alias 只能用在</span><span data-lake-id=\"ua8dd1281\" id=\"ua8dd1281\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u4cdf9f5a\" id=\"u4cdf9f5a\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">location</span><span data-lake-id=\"u5250a082\" id=\"u5250a082\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">。root 对末尾的斜杠并不在意，兼容性更好。 alias 可以作为 root 的补充来使用。</span></p><h2 data-lake-id=\"U9afI\" id=\"U9afI\"><span data-lake-id=\"uca6e126c\" id=\"uca6e126c\" style=\"color: rgb(51, 51, 51)\">url 美化</span></h2><p data-lake-id=\"u7e5b1c6b\" id=\"u7e5b1c6b\"><span data-lake-id=\"ua4c4efde\" id=\"ua4c4efde\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">我们在开发的时候用的 url 是这样的</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%2Fusers%3Fid%3D1%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22juiQ4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u3f1b3a9a\" id=\"u3f1b3a9a\"><span data-lake-id=\"u14a0837b\" id=\"u14a0837b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">让别人访问的时候可能是这样的</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%2Fusers%2F1%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jJgOG%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uca5f259e\" id=\"uca5f259e\"><span data-lake-id=\"u989be4f2\" id=\"u989be4f2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">所以我们需要把</span><span data-lake-id=\"udaca933d\" id=\"udaca933d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ucd487c1e\" id=\"ucd487c1e\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">/users/1</span><span data-lake-id=\"u012e7a57\" id=\"u012e7a57\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u77345d9a\" id=\"u77345d9a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">转为</span><span data-lake-id=\"u8190c8be\" id=\"u8190c8be\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uc19fe9b6\" id=\"uc19fe9b6\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">/users?id=1</span><span data-lake-id=\"u52001155\" id=\"u52001155\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u10959b0e\" id=\"u10959b0e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">,这时就需要 rewrite 出场了。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2Fusers%2F%7B%5Cn%20%20%20%20rewrite%20%5E%2Fusers%2F(.*)%24%20%2Fnodejs%2Fid%3D%241%3F%20last%3B%5Cn%7D%5Cnlocation%20%2Fnodejs%2F%7B%5Cn%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A3000%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KQAty%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ub36e6052\" id=\"ub36e6052\"><span data-lake-id=\"u814b34c5\" id=\"u814b34c5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">当请求</span><span data-lake-id=\"ud4df8e21\" id=\"ud4df8e21\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">/users/1</span><span data-lake-id=\"u5545ce52\" id=\"u5545ce52\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uab61d357\" id=\"uab61d357\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">的时候，命中 location /users/ ，执行rewrite 指令， last flag 指示停止后面的rewrite 指令并做内部跳转，匹配到 location /nodejs/ ，经过 proxy_pass 指令，转到 nodejs 服务。</span></p><p data-lake-id=\"u96ab3675\" id=\"u96ab3675\"><span data-lake-id=\"u526bb622\" id=\"u526bb622\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">你可能对 last 表示疑惑，都已经是最后了，怎么又跳到 /nodejs 了呢？ 接下来，我详细讲解一下 nginx 的</span><span data-lake-id=\"ufb46e40b\" id=\"ufb46e40b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html\" target=\"_blank\" data-lake-id=\"u74aba20f\" id=\"u74aba20f\"><span data-lake-id=\"ufd1e162e\" id=\"ufd1e162e\">rewrite</span></a><span data-lake-id=\"ucc549dbd\" id=\"ucc549dbd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u49e39b98\" id=\"u49e39b98\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">模块。为什么说一个模块呢？因为与rewrite相关的是一组指令。</span></p><h2 data-lake-id=\"vXteh\" id=\"vXteh\"><span data-lake-id=\"u89acf6e1\" id=\"u89acf6e1\" style=\"color: rgb(51, 51, 51)\">nginx http rewrite module 详解</span></h2><p data-lake-id=\"ua15842eb\" id=\"ua15842eb\"><span data-lake-id=\"uea574469\" id=\"uea574469\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">简单来说，</span><span data-lake-id=\"u9d5cfd04\" id=\"u9d5cfd04\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uc7434cb3\" id=\"uc7434cb3\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">ngx_http_rewrite_module</span><span data-lake-id=\"u35c95863\" id=\"u35c95863\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> module 用正则匹配请求，改写请求，然后做跳转，可以是内部跳转，也可以是外部跳转。</span></p><p data-lake-id=\"uc18d2ccc\" id=\"uc18d2ccc\"><span data-lake-id=\"u8f38b7e8\" id=\"u8f38b7e8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">学习这个模块的时候 ，把 rewrite_log 打开，可以在 error log 里查看跳转信息</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20rewrite_log%20on%3B%20%5Cn%20error_log%20%2Fhome%2Flog%2Ftest-error.log%20notice%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22LV01Y%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uae75b44e\" id=\"uae75b44e\"><span data-lake-id=\"ue7bc0626\" id=\"ue7bc0626\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">注意 notice 是必须的</span></p><h3 data-lake-id=\"diG1M\" id=\"diG1M\"><span data-lake-id=\"u2f52fdb0\" id=\"u2f52fdb0\" style=\"color: rgb(51, 51, 51)\">顺序执行和循环跳转</span></h3><ol list=\"u2fa93db9\"><li fid=\"u0ebcc0ee\" data-lake-id=\"u9bc7cdf4\" id=\"u9bc7cdf4\"><span data-lake-id=\"u09fcc97a\" id=\"u09fcc97a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">直接写在 server level 的 指令，顺序执行。</span></li><li fid=\"u0ebcc0ee\" data-lake-id=\"u0e39e5bb\" id=\"u0e39e5bb\"><span data-lake-id=\"ub239e102\" id=\"ub239e102\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">写在 location 中的指定顺序执行。可以跳到其它 location ,最多不超过 10次。</span></li></ol><p data-lake-id=\"u66f0b6a3\" id=\"u66f0b6a3\"><span data-lake-id=\"u9860e36d\" id=\"u9860e36d\">server{     rewrite ^/users/(.*)$ /show?</span><span data-lake-id=\"ub305bf86\" id=\"ub305bf86\">user</span><span data-lake-id=\"u66e3e37d\" id=\"u66e3e37d\">=</span><span data-lake-id=\"u2ecf2a12\" id=\"u2ecf2a12\" style=\"color: teal\">$1</span><span data-lake-id=\"ua31e5ebf\" id=\"ua31e5ebf\"> </span><em><span data-lake-id=\"u3e003c92\" id=\"u3e003c92\" style=\"color: rgb(153, 153, 136)\">;</span></em><span data-lake-id=\"u6fa82378\" id=\"u6fa82378\">     rewrite ^/teachers/(.*)$ /show?</span><span data-lake-id=\"u13479486\" id=\"u13479486\">teacher</span><span data-lake-id=\"ub17c3263\" id=\"ub17c3263\">=</span><span data-lake-id=\"u018cd73e\" id=\"u018cd73e\" style=\"color: teal\">$1</span><span data-lake-id=\"ue588324b\" id=\"ue588324b\"> </span><em><span data-lake-id=\"u1135e6bc\" id=\"u1135e6bc\" style=\"color: rgb(153, 153, 136)\">;</span></em><span data-lake-id=\"u70d760d3\" id=\"u70d760d3\"> } </span><span data-lake-id=\"u3c31efa9\" id=\"u3c31efa9\" class=\"lake-fontsize-9\" style=\"color: rgba(140, 140, 140, 0.8)\">复制代码</span></p><p data-lake-id=\"u77fafe3c\" id=\"u77fafe3c\"><span data-lake-id=\"u81ff6696\" id=\"u81ff6696\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">请求 /users/1 ，先执行第一条</span><span data-lake-id=\"ue082ce1d\" id=\"ue082ce1d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1f396f61\" id=\"u1f396f61\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">rewrite ^/users/(.*)$ /show?user=$1</span><span data-lake-id=\"u2d412b59\" id=\"u2d412b59\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\"> </span><span data-lake-id=\"u6f2deb2f\" id=\"u6f2deb2f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">再执行第二条</span><span data-lake-id=\"ud1f975cf\" id=\"ud1f975cf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uf8e0fdba\" id=\"uf8e0fdba\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">rewrite ^/teachers/(.*)$ /show?teacher=$1 ;</span><span data-lake-id=\"uadde6359\" id=\"uadde6359\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ud2fedb4b\" id=\"ud2fedb4b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">虽然第一条匹配到了，还是会执行第二条。这就是顺序执行的意思。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2F%7B%5Cn%20%20%20%20rewrite%20%5E%2Fteachers%2F(.*)%24%20%2Fshow%2F%241%3B%5Cn%20%20%20%20rewrite%20%5E%2Fusers%2F(.*)%20%2Fshow%2F%241%3B%5Cn%7D%5Cnlocation%20%2Fshow%2F%7B%5Cn%20%20%20%20rewrite%20%5E%2Fshow%2F(.*)%24%20%2Fusers%2F%241%20%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22niyXz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u9fb22f79\" id=\"u9fb22f79\"><span data-lake-id=\"u852e8ed0\" id=\"u852e8ed0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">请求 /users/1 命中第一个location ,顺序执行第一个 rewrite,没命中，即使命中也会继续执行第二 rewrite ，命中。跳转到 第二个location /show/，执行 rewirte 又回跳回 / ，这样循环10次，报 500 错误，查看 error 日志可以看到说明。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22rewrite%20or%20internal%20redirection%20cycle%20while%20processing%20%5C%22%2Fshow%2F1%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22dRsMC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7157fe05\" id=\"u7157fe05\"><span data-lake-id=\"u3d36f1cf\" id=\"u3d36f1cf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这个过程演示了 location 中 rewrite 的执行逻辑。顺序执行，循环跳转。</span></p><p data-lake-id=\"u33f50ea3\" id=\"u33f50ea3\"><span data-lake-id=\"u3f23ada1\" id=\"u3f23ada1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">rewrite module 中还有 5 个指令</span><span data-lake-id=\"ud22e8a89\" id=\"ud22e8a89\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23break\" target=\"_blank\" data-lake-id=\"u60f69a66\" id=\"u60f69a66\"><span data-lake-id=\"u4cec6aea\" id=\"u4cec6aea\">break</span></a><span data-lake-id=\"uf00ecad6\" id=\"uf00ecad6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23if\" target=\"_blank\" data-lake-id=\"u1de5fee7\" id=\"u1de5fee7\"><span data-lake-id=\"u43e560ff\" id=\"u43e560ff\">if</span></a><span data-lake-id=\"u1ba77245\" id=\"u1ba77245\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23return\" target=\"_blank\" data-lake-id=\"ue735aff9\" id=\"ue735aff9\"><span data-lake-id=\"u0435d5d7\" id=\"u0435d5d7\">return</span></a><span data-lake-id=\"udb9ee0cf\" id=\"udb9ee0cf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23rewrite\" target=\"_blank\" data-lake-id=\"ua2d95036\" id=\"ua2d95036\"><span data-lake-id=\"u3f678da1\" id=\"u3f678da1\">rewrite</span></a><span data-lake-id=\"uf27285d3\" id=\"uf27285d3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, and </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_rewrite_module.html%23set\" target=\"_blank\" data-lake-id=\"ua69cd20a\" id=\"ua69cd20a\"><span data-lake-id=\"u07bab6dd\" id=\"u07bab6dd\">set</span></a><span data-lake-id=\"ufd206427\" id=\"ufd206427\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">。 return 可以直接返回，打断后面的 rewrite module 指令的执行。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20return%20409%3B%5Cn%20rewrite%20%5E%2Fteachers%2F(.*)%24%20%2Fshow%2F%241%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZjL9o%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uba80c885\" id=\"uba80c885\"><span data-lake-id=\"u2d56db0d\" id=\"u2d56db0d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">执行 return 后，后面的指令就没有机会执行了。 set,break 比较简单，和其它语言差不多。下面着重讲下 rewirte 指令的 flag。</span></p><p data-lake-id=\"u0074197f\" id=\"u0074197f\"><strong><span data-lake-id=\"u20103d5d\" id=\"u20103d5d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">rewrite</span></strong><span data-lake-id=\"uf9bf76d6\" id=\"uf9bf76d6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1fa38071\" id=\"u1fa38071\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">regex</span><span data-lake-id=\"u65ecc82f\" id=\"u65ecc82f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u0ab5bf6b\" id=\"u0ab5bf6b\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">replacement</span><span data-lake-id=\"u4190bd23\" id=\"u4190bd23\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> [</span><span data-lake-id=\"u7f8791d7\" id=\"u7f8791d7\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">flag</span><span data-lake-id=\"u64c9e63f\" id=\"u64c9e63f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">]</span></p><p data-lake-id=\"u0174dfcc\" id=\"u0174dfcc\"><span data-lake-id=\"u9222674a\" id=\"u9222674a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">flag有四种</span></p><ul list=\"u69e91312\"><li fid=\"u3fb2af47\" data-lake-id=\"u41f3799e\" id=\"u41f3799e\"><span data-lake-id=\"u4a63ea34\" id=\"u4a63ea34\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">last .停止执行后面的 ngx_http_rewrite_module 指令，并发起新的 location 匹配。</span></li><li fid=\"u3fb2af47\" data-lake-id=\"uc7f4738e\" id=\"uc7f4738e\"><span data-lake-id=\"u407d3e68\" id=\"u407d3e68\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">break. 停止执行后面的 ngx_http_rewrite_module 指令。然后没有后续了，不再发起 location 匹配。</span></li><li fid=\"u3fb2af47\" data-lake-id=\"u90dc5b9d\" id=\"u90dc5b9d\"><span data-lake-id=\"u2292c6a2\" id=\"u2292c6a2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">redirect 执行 302跳转，后面的指令不再执行。</span></li><li fid=\"u3fb2af47\" data-lake-id=\"uaa8d2929\" id=\"uaa8d2929\"><span data-lake-id=\"u98b8c632\" id=\"u98b8c632\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">permanent 执行 301跳转，后面的指令不再执行。</span></li></ul><p data-lake-id=\"u9b1064f4\" id=\"u9b1064f4\"><span data-lake-id=\"u2da3a4d1\" id=\"u2da3a4d1\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">last、break 停止执行的是 ngx_http_rewrite_module 指令，其它指令不受影响，还是会执行的。</span></p><p data-lake-id=\"ub8cf5fdc\" id=\"ub8cf5fdc\"><span data-lake-id=\"u3d4cf244\" id=\"u3d4cf244\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">regex 匹配的是路径部分</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20%20%20rewrite%20%5E%2Fteacher%2F(.*)%24%20%2Fshow1%2F%241%20last%3B%5Cn%20%20%20rewrite%20%5E%2Fteacher%2F(.*)%20%2Fshow2%2F%241%3B%5Cn%7D%5Cnlocation%20%2Fshow1%7B%5Cn%20return%20900%3B%5Cn%7D%5Cnlocation%20%2Fshow2%7B%5Cn%20return%20901%3B%5Cn%7D%5Cn%5Cncurl%20http%3A%2F%2Flocalhost%3A3000%2Fteacher%2F1%5CnHTTP%2F1.1%20900%5Cn%5Cn%E5%9B%A0%E4%B8%BA%20last%20%E4%BC%9A%E7%BB%88%E6%AD%A2%E5%90%8E%E9%9D%A2%E7%9A%84%20%20ngx_http_rewrite_module%20%E6%8C%87%E4%BB%A4%EF%BC%8C%E6%89%80%E4%BB%A5%20%E7%AC%AC%E4%BA%8C%E5%8F%A5%20rewrite%20%5E%2Fteacher%2F(.*)%20%2Fshow2%2F%241%20%E4%B8%8D%E4%BC%9A%E6%89%A7%E8%A1%8C%E3%80%82%E7%AC%AC%E4%B8%80%E5%8F%A5%E6%89%A7%E8%A1%8C%E5%AE%8C%E5%90%8E%EF%BC%8C%E8%B7%B3%E5%88%B0%20%2Fshow1%EF%BC%8C%E8%BF%94%E5%9B%9E%20900%5Cn%5Cn%E5%A6%82%E6%9E%9C%E6%8A%8A%20last%20%E6%8D%A2%E6%88%90%20%20break%5CnHTTP%2F1.1%20404%5Cn%5Cn%E5%9B%A0%E4%B8%BA%20break%20%E4%B8%8D%E5%86%8D%E6%89%A7%E8%A1%8C%E8%B7%B3%E8%BD%AC%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%9F%A5%E6%89%BE%20show1%2F1%20%E6%89%BE%E4%B8%8D%E5%88%B0%EF%BC%8C%E6%8A%A5%20404.%5Cn%5Cn%E6%8A%8A%20last%20%E6%8D%A2%E6%88%90%20redirect.%5CnHTTP%2F1.1%20302%20%5Cn%5Cn%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BC%9A%E8%AF%B7%E6%B1%82%E4%B8%A4%E6%AC%A1%E3%80%82%5Cn%5Cn%E6%8A%8A%20last%20%E6%8D%A2%E6%88%90%20permanent.%5CnHTTP%2F1.1%20301%20%5Cn%5Cn%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BC%9A%E8%AF%B7%E6%B1%82%E4%B8%A4%E6%AC%A1%E3%80%82%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22gULr2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u9c22dfd5\" id=\"u9c22dfd5\"><span data-lake-id=\"u8c214e78\" id=\"u8c214e78\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果 replacement 是 http开头，是可以直接跳转的</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20%20rewrite%20%5E%2Fteacher%2F%20http%3A%2F%2Fjuejin.cn%5Cn%7D%5Cn%5Cncurl%20http%3A%2F%2Flocalhost%3A3000%2Fteacher%2F1%5CnHTTP%2F1.1%20302%20%5CnLocation%3A%20http%3A%2F%2Fjuejin.cn%5Cn%5Cn%E7%9B%B8%E5%BD%93%E4%BA%8E%20redirect%20%E6%8C%87%E4%BB%A4%E7%9A%84%E6%95%88%E6%9E%9C%E3%80%82%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22HzZj9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4ff6cd68\" id=\"u4ff6cd68\"><span data-lake-id=\"u8ed4aea3\" id=\"u8ed4aea3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">最后再讲下 if ，if 语句不复杂，但是非常有用，可以这样说，用 if 可以实现很多指令,但是用内置指令更简洁，还是要优先用指令。</span></p><p data-lake-id=\"u7201f25b\" id=\"u7201f25b\"><span data-lake-id=\"ucd8a5130\" id=\"ucd8a5130\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">if ($param)</span><span data-lake-id=\"u590e01b3\" id=\"u590e01b3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u440b022f\" id=\"u440b022f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果 $param 为空字符串或 0 为假，其它情况为真。</span></p><p data-lake-id=\"ud9a92bc7\" id=\"ud9a92bc7\"><span data-lake-id=\"ufc7a6c5d\" id=\"ufc7a6c5d\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">注意 if 后面必须要有空格，否则报错。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22set%20%24param%20'0'%3B%5Cnset%20%24param%200%3B%5Cnset%20%24param%20''%3B%5Cn%5Cn%E8%BF%99%E4%B8%89%E7%A7%8D%E5%86%99%E6%B3%95%20%24param%20%E9%83%BD%E4%B8%BA%E5%81%87%EF%BC%8C%E5%85%B6%E5%AE%83%E6%83%85%E5%86%B5%E9%83%BD%E4%B8%BA%E7%9C%9F%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22f9i0l%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u498ad686\" id=\"u498ad686\"><span data-lake-id=\"u62c41efe\" id=\"u62c41efe\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">用 = ,!=判断相等。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20if%20(%24request_method%20%3D%20POST)%7B%5Cn%20%20%20%20%20%20return%20403%3B%5Cn%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eeYha%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud0729f0c\" id=\"ud0729f0c\"><span data-lake-id=\"u7bf3f614\" id=\"u7bf3f614\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">注意 是一个 = 不是两个=, 等号左右必须要有空格，否则报错</span></p><p data-lake-id=\"u708dd84f\" id=\"u708dd84f\"><span data-lake-id=\"u4d10ccac\" id=\"u4d10ccac\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">用正则表达式判断</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22~%20%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%99%5Cnif%20(%24http_user_agent%20~%20mobile)%5Cn%5Cn~*%20%E4%B8%8D%E5%8C%BA%E5%88%86%E5%A4%A7%E5%B0%8F%E5%86%99%5Cnif%20(%24http_referer%20~*%20juejin%5C%5C.cn)%5Cn%5Cn!~%20%E5%92%8C%20!~*%20%E6%98%AF%E5%AF%B9%E5%BA%94%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%90%A6%E5%AE%9A%E5%86%99%E6%B3%95%2C%E4%B8%8D%E5%86%8D%E4%B8%BE%E4%BE%8B%E4%BA%86%E3%80%82%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22rNqYt%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ue2ef03ba\" id=\"ue2ef03ba\"><span data-lake-id=\"u028e161a\" id=\"u028e161a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">用 flag</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22-f%20!-f%20%20%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cnif%20(-f%20%24request_filename)%5Cnif%20(!-f%20%24request_filename)%5Cn%5Cn-d%20!-d%20%E7%9B%AE%E5%BD%95%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cn-e%20!-e%20%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cn-x%20!-e%20%E6%98%AF%E5%90%A6%E5%8F%AF%E6%89%A7%E8%A1%8C%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22YSVEx%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"lR85n\" id=\"lR85n\"><span data-lake-id=\"u2588433d\" id=\"u2588433d\" style=\"color: rgb(51, 51, 51)\">return</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22return%C2%A0code%C2%A0%5Btext%5D%3B%5Cnreturn%C2%A0code%C2%A0URL%3B%5Cnreturn%C2%A0URL%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22vCGHw%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22location%20%2Fadmin%2F%7B%5Cn%20%20%20%20return%20403%20'%E6%B2%A1%E6%9C%89%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90'%3B%5Cn%7D%5Cnlocation%20%2F%20%7B%5Cn%20%20%20%20return%20302%20%24scheme%3A%2F%2Fwww.baidu.com%24request_uri%3B%5Cn%7D%5Cn%5Cnlocation%20%2Fabc%2F%7B%5Cn%20%20%20%20return%20404%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22AmSng%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"wigWM\" id=\"wigWM\"><span data-lake-id=\"ue7a666bf\" id=\"ue7a666bf\" style=\"color: rgb(51, 51, 51)\">移动pc适配</span></h2><p data-lake-id=\"uade972f1\" id=\"uade972f1\"><span data-lake-id=\"u56d39577\" id=\"u56d39577\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">我们希望在访问 一个网址的时候，如果是在 pc端打开的时候，显示pc的页面，如果是在移动端打开的，显示移动端的页面。网址只有一个</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22server%7B%5Cn%20%7B%20%20%5Cn%20%20%20%20set%20%24isMobile%20true%3B%5Cn%20%20%20%20%5Cn%20%20%20%20if%20(%24http_user_agent%20~*%20'(Android%7CwebOS%7CIEMobile%7CiPhone%7CiPod%7CBlackBerry)')%20%7B%20%5Cn%20%20%20%20%20%20%20%20set%20%24isMobile%20true%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20set%20%24root%20%20%2Fhome%2Fduhongwei%2Fweb%2Fpc%3B%5Cn%20%20%20%20if%20(%24isMobile%20%3D%20true)%20%7B%5Cn%20%20%20%20%20%20set%20%24root%20%20%2Fhome%2Fduhongwei%2Fweb%2Fh5%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20root%20%24root%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22A4Zzo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud647d8b8\" id=\"ud647d8b8\"><span data-lake-id=\"u518180d2\" id=\"u518180d2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这个设置需要放在 server 下面，对于所有 location 有效。在 location 里如果有需要还可以修改 root,所以 set 一个 $isMobile 的变量，方便后面使用。</span></p><p data-lake-id=\"uffaa7776\" id=\"uffaa7776\"><span data-lake-id=\"u532a2160\" id=\"u532a2160\" class=\"lake-fontsize-12\" style=\"color: rgb(102, 102, 102); background-color: rgb(248, 248, 248)\">ipad 虽然是移动设置，但从尺寸上来看更接近 pc，所以页面在 ipad 打开，一般会显示 pc 的页面</span></p><h2 data-lake-id=\"AwwzD\" id=\"AwwzD\"><span data-lake-id=\"u10917264\" id=\"u10917264\" style=\"color: rgb(51, 51, 51)\">配置https服务</span></h2><p data-lake-id=\"u60e83e32\" id=\"u60e83e32\"><span data-lake-id=\"u725117f4\" id=\"u725117f4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">虽然在开发的时候用 http 就行，但有的时候，必须要 https 才行。所以配置开发环境可能也得配置 https 服务。我们的目的是为了让服务跑起来，还是很简单的。</span></p><ol list=\"u7548cb32\"><li fid=\"uf34a647a\" data-lake-id=\"u46813b6e\" id=\"u46813b6e\"><span data-lake-id=\"u3f4b3763\" id=\"u3f4b3763\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">申请证书</span></li><li fid=\"uf34a647a\" data-lake-id=\"uc3692e37\" id=\"uc3692e37\"><span data-lake-id=\"ue1897145\" id=\"ue1897145\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">证书包含一个crt文件一个key文件，crt为证书，key为密钥</span></li><li fid=\"uf34a647a\" data-lake-id=\"uadfae00f\" id=\"uadfae00f\"><span data-lake-id=\"ufd397b19\" id=\"ufd397b19\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">配置nginx</span></li></ol><p data-lake-id=\"u418f9059\" id=\"u418f9059\"><span data-lake-id=\"u530d33e1\" id=\"u530d33e1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果你正在做一个项目，这个项目的域名证书应该是提前就申请好的。用这个证书就行。本地配 host ，配项目的线上域名，就可以测试了。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22server%20%7B%5Cn%20%20%20%20%23%201%20%5Cn%20%20%20%20listen%20%20%20%20%20%20%20443%20ssl%3B%20%20%20%20%5Cn%20%20%20%20server_name%20%20www.xxx.com%3B%20%5Cn%20%20%20%20%5Cn%20%20%20%20%23%202%5Cn%20%20%20%20ssl_certificate%20%20%20%20%20%20%E8%AF%81%E4%B9%A6%E7%9A%84%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%20%20%20%20%20%5Cn%20%20%20%20%23%203%5Cn%20%20%20%20ssl_certificate_key%20%20%E5%AF%86%E9%92%A5%E7%9A%84%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5Cn%7D%20%20%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OIiDV%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud02736ea\" id=\"ud02736ea\"><span data-lake-id=\"u9d688916\" id=\"u9d688916\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">配置 https服务，只需要三步</span></p><ol list=\"u14c29116\"><li fid=\"ud0f9fae0\" data-lake-id=\"u05cbbfee\" id=\"u05cbbfee\"><span data-lake-id=\"u1404fa71\" id=\"u1404fa71\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">监听 443 端口</span></li><li fid=\"ud0f9fae0\" data-lake-id=\"u6b717952\" id=\"u6b717952\"><span data-lake-id=\"u18ef4406\" id=\"u18ef4406\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">设置证书的绝对路径</span></li><li fid=\"ud0f9fae0\" data-lake-id=\"uab56bf59\" id=\"uab56bf59\"><span data-lake-id=\"u3df0590c\" id=\"u3df0590c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">设置密钥的绝对路径</span></li></ol><p data-lake-id=\"u7f206b18\" id=\"u7f206b18\"><span data-lake-id=\"ud63ae887\" id=\"ud63ae887\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">只这三步就完成，很简单吧。</span></p><p data-lake-id=\"uc01a60d1\" id=\"uc01a60d1\"><span data-lake-id=\"u32553bea\" id=\"u32553bea\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">要启用 http2 也很简单， 只需要在 listen 后面加 http2 即可。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22listen%20443%20ssl%20http2%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22fMRMh%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"nXnyw\" id=\"nXnyw\"><span data-lake-id=\"u71a20d56\" id=\"u71a20d56\" style=\"color: rgb(51, 51, 51)\">请求地址末尾加斜杠与不加斜杠</span></h2><p data-lake-id=\"u497be355\" id=\"u497be355\"><span data-lake-id=\"uad46bf5b\" id=\"uad46bf5b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">请求 juejin.cn/b 与 juejin.cn/b/ 有什么区别吗？ nginx解析起来区别就大了。</span></p><p data-lake-id=\"u0c98d141\" id=\"u0c98d141\"><span data-lake-id=\"ue8848c07\" id=\"ue8848c07\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">不加斜杠,如果存在 b 文件,返回 文件 b 如果不存在文件b，但有文件夹 b， 301 到 b/,在浏览器中看到的现象是发了两个请求.如果 b下面没有index.html,返回 403,如果有，返回内容。</span></p><p data-lake-id=\"u7dd5a823\" id=\"u7dd5a823\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1661328357339-bd37763d-61ff-4a2c-90bb-ea75d04549e8.webp%22%2C%22taskId%22%3A%22ue5f6264f-e021-4309-8236-61b09768564%22%2C%22clientId%22%3A%22u81110d56-3058-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1084%2C%22originHeight%22%3A160%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f9faf6%22%2C%22id%22%3A%22u40f1913b%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"></card></p><p data-lake-id=\"ud5be5253\" id=\"ud5be5253\"><span data-lake-id=\"u7138dadf\" id=\"u7138dadf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果没有index.html，为什么是返回 403而不是 404呢？</span></p><p data-lake-id=\"u8528c90e\" id=\"u8528c90e\"><span data-lake-id=\"u6ea89544\" id=\"u6ea89544\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">这是因为 nginx如果找不到 index.html，会尝试浏览目录，默认是不允许的。</span><span data-lake-id=\"udc878ed2\" id=\"udc878ed2\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">autoindex off;</span></p><p data-lake-id=\"u35d0f21f\" id=\"u35d0f21f\"><span data-lake-id=\"u84c1a438\" id=\"u84c1a438\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果既没有文件夹 b 也没有文件 b 返回 404</span></p><p data-lake-id=\"u8e75b19f\" id=\"u8e75b19f\"><span data-lake-id=\"u85141c6d\" id=\"u85141c6d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">为什么访问 b/ 会去查找 b/index.html，这是因为 index指令默认是这样的</span><span data-lake-id=\"uae2aac03\" id=\"uae2aac03\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uc27be2d4\" id=\"uc27be2d4\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">index index.html</span></p><p data-lake-id=\"u560f278a\" id=\"u560f278a\"><span data-lake-id=\"uc31e64d3\" id=\"uc31e64d3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">nginx 默默做了这么多，就是为了让我们用起来方便。如果从性能方面来考虑，写完整地址最好，别让nginx去猜了。用户怎么输入网址我们管不了，但是我们在写跳转地址的时候，最好是写完整地址。</span></p><h2 data-lake-id=\"CWPPz\" id=\"CWPPz\"><span data-lake-id=\"ubb254e6b\" id=\"ubb254e6b\" style=\"color: rgb(51, 51, 51)\">请求头信息对应的 nginx 变量</span></h2><p data-lake-id=\"u3dcda632\" id=\"u3dcda632\"><span data-lake-id=\"ubdc64ff1\" id=\"ubdc64ff1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">nginx 中的有些变量有是规律，按规律可以方便记忆。</span></p><p data-lake-id=\"ubc4d1c3d\" id=\"ubc4d1c3d\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1661328357557-6afd3ab9-9044-40f9-83e3-1cb19d8bc7d4.webp%22%2C%22taskId%22%3A%22u45c731cd-b9f3-404e-bfde-5a9a76ba630%22%2C%22clientId%22%3A%22u81110d56-3058-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A612%2C%22originHeight%22%3A266%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23fafafa%22%2C%22id%22%3A%22u62627197%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"></card></p><p data-lake-id=\"u254df157\" id=\"u254df157\"><strong><span data-lake-id=\"u3ea708e7\" id=\"u3ea708e7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">对每一个请求标头,都对应一个变量</span></strong></p><p data-lake-id=\"ud673ad32\" id=\"ud673ad32\"><span data-lake-id=\"uc16a1fa5\" id=\"uc16a1fa5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">大小写不敏感，以 http_ 开头， - 改为 _ 。</span></p><ul list=\"u829957f4\"><li fid=\"uf72c17f4\" data-lake-id=\"u43de74bd\" id=\"u43de74bd\"><span data-lake-id=\"u9e705150\" id=\"u9e705150\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">$http_accept</span></li><li fid=\"uf72c17f4\" data-lake-id=\"u1912d1c2\" id=\"u1912d1c2\"><span data-lake-id=\"u4929af6f\" id=\"u4929af6f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">$http_cache_control</span></li></ul><p data-lake-id=\"ub37a1da6\" id=\"ub37a1da6\"><strong><span data-lake-id=\"ucbf65cdf\" id=\"ucbf65cdf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">cookie 的中的变量</span></strong></p><p data-lake-id=\"u9cc05a82\" id=\"u9cc05a82\"><span data-lake-id=\"u611a8616\" id=\"u611a8616\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">比如 cookie 中 包含 name=jack,用 $cookie_name 可以拿到 jack 这个值。</span></p><ul list=\"u1a5c57c9\"><li fid=\"u729173b4\" data-lake-id=\"ua73004c2\" id=\"ua73004c2\"><span data-lake-id=\"u943bb9a9\" id=\"u943bb9a9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">cookie_name</span></li></ul><p data-lake-id=\"u87c0a48b\" id=\"u87c0a48b\"><strong><span data-lake-id=\"u4b1d0ae8\" id=\"u4b1d0ae8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">arg 中的变量</span></strong></p><p data-lake-id=\"ufeef389c\" id=\"ufeef389c\"><span data-lake-id=\"u0b40d87f\" id=\"u0b40d87f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">比如有这样的 get 请求 index.html?name=jack ,用 $arg_name 可以拿到 jack 这个值。</span></p><ul list=\"ude3ce26a\"><li fid=\"uc9c17ce8\" data-lake-id=\"u13e443b3\" id=\"u13e443b3\"><span data-lake-id=\"u9e402ecb\" id=\"u9e402ecb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">arg_name</span></li></ul><h2 data-lake-id=\"tqRjc\" id=\"tqRjc\"><span data-lake-id=\"ue51937ef\" id=\"ue51937ef\" style=\"color: rgb(51, 51, 51)\">nginx 接收客户端提交</span></h2><p data-lake-id=\"u2da94e50\" id=\"u2da94e50\"><span data-lake-id=\"u68d43b94\" id=\"u68d43b94\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">当我们提交一个表单的时候，会生成一个请求的 header,body。在header中 Content-Length:123 标明 content 字节大小。nginx 接收到 header，先检查 header 大小，如果 header 大小超过</span><span data-lake-id=\"u2f34b091\" id=\"u2f34b091\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_buffer_size\" target=\"_blank\" data-lake-id=\"u27adcd6a\" id=\"u27adcd6a\"><span data-lake-id=\"u9646104a\" id=\"u9646104a\">client_header_buffer_size</span></a><span data-lake-id=\"u3faf1b68\" id=\"u3faf1b68\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u4dd3619a\" id=\"u4dd3619a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">的默认值 1K,并超过</span><span data-lake-id=\"u137fe9e9\" id=\"u137fe9e9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23large_client_header_buffers\" target=\"_blank\" data-lake-id=\"uf29b2295\" id=\"uf29b2295\"><span data-lake-id=\"u7ff753e9\" id=\"u7ff753e9\">large_client_header_buffers</span></a><span data-lake-id=\"ub9e4a462\" id=\"ub9e4a462\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uedfbcffe\" id=\"uedfbcffe\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">的默认值 8K nginx 会报错。</span></p><p data-lake-id=\"ub8b49c99\" id=\"ub8b49c99\"><span data-lake-id=\"ub070f666\" id=\"ub070f666\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">检查 Content-Length ，如果超过</span><span data-lake-id=\"u679770f8\" id=\"u679770f8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_buffer_size\" target=\"_blank\" data-lake-id=\"ua9436b63\" id=\"ua9436b63\"><span data-lake-id=\"uc68ad965\" id=\"uc68ad965\">client_body_buffer_size</span></a><span data-lake-id=\"u3de910b2\" id=\"u3de910b2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u014d512b\" id=\"u014d512b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">默认值 8K(除了 x86 的 64位系统是 16K），内存缓冲区无法接收，会存到</span><span data-lake-id=\"u1bb5ddfa\" id=\"u1bb5ddfa\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_temp_path\" target=\"_blank\" data-lake-id=\"u8c3426c8\" id=\"u8c3426c8\"><span data-lake-id=\"ue0bdd7c2\" id=\"ue0bdd7c2\">client_body_temp_path</span></a><span data-lake-id=\"u0d1b1720\" id=\"u0d1b1720\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ud8b04c79\" id=\"ud8b04c79\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">指定的目录。但是接收的body总大小不是无限的，不能超过</span><span data-lake-id=\"u0ccbed13\" id=\"u0ccbed13\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_max_body_size\" target=\"_blank\" data-lake-id=\"u9804d018\" id=\"u9804d018\"><span data-lake-id=\"u10a564c7\" id=\"u10a564c7\">client_max_body_size</span></a><span data-lake-id=\"ua50b0f7d\" id=\"ua50b0f7d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1a9378d4\" id=\"u1a9378d4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">的默认值 1M。</span></p><p data-lake-id=\"ue2d79638\" id=\"ue2d79638\"><span data-lake-id=\"u54b6f91f\" id=\"u54b6f91f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">对于大多数请求来讲，都是 get 请求，我们可以直接躺平，默认值即可。 get 请求没有 body，超限的情况可能是 cookie 过多,url 过长。一般来说，超出的可能性不大。</span></p><p data-lake-id=\"u45cb714f\" id=\"u45cb714f\"><span data-lake-id=\"u6bc24364\" id=\"u6bc24364\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">对于 post 请求，当上传文件的时候，可能会超限。nginx 默认只能接收 1M 的内容,可以增加这个默认值。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22locatoin%20%2Fupfile%2F%20%7B%5Cn%20%20%20%20client_max_body_size%3A200M%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KWqvc%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ucce2f4bd\" id=\"ucce2f4bd\"><span data-lake-id=\"u1da132a7\" id=\"u1da132a7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果网络状态不好，可能刚发一个字节，就断了，如果在默认 60 秒内没有再次发送，nginx 会中断链接。这样做是为了节省服务器资源。可以通过 修改</span><span data-lake-id=\"ufb573020\" id=\"ufb573020\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_body_timeout\" target=\"_blank\" data-lake-id=\"ub4fe1da4\" id=\"ub4fe1da4\"><span data-lake-id=\"ua8c362c2\" id=\"ua8c362c2\">client_body_timeout</span></a><span data-lake-id=\"uee18e841\" id=\"uee18e841\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u5fd21775\" id=\"u5fd21775\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">和</span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23client_header_timeout\" target=\"_blank\" data-lake-id=\"u71db9169\" id=\"u71db9169\"><span data-lake-id=\"u12e004d3\" id=\"u12e004d3\">client_header_timeout</span></a><span data-lake-id=\"uffed5b9d\" id=\"uffed5b9d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u15b98a34\" id=\"u15b98a34\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">改变默认值。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22server%7B%5Cn%20%20client_body_timeout%2010s%3B%5Cn%20%20client_header_timeout%2010s%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Rk2dQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u30f54797\" id=\"u30f54797\"><span data-lake-id=\"u0d602f87\" id=\"u0d602f87\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">60秒有点太保守了，可以减小这个值。</span></p><h2 data-lake-id=\"MYplT\" id=\"MYplT\"><span data-lake-id=\"u0d469817\" id=\"u0d469817\" style=\"color: rgb(51, 51, 51)\">nginx gzip 压缩</span></h2><p data-lake-id=\"u180fa6fb\" id=\"u180fa6fb\"><span data-lake-id=\"ue30bf439\" id=\"ue30bf439\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gzip压缩的知识还是非常多的，不过只是启用gzip ,打开功能，还是很简单的。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22server%7B%5Cngzip%20on%3B%5Cngzip_min_length%200%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Ce7GG%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u85a18d40\" id=\"u85a18d40\"><span data-lake-id=\"u41b006ba\" id=\"u41b006ba\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gzip 指令默认是 off,设置为 on 打开 gzip。如果只设置</span><span data-lake-id=\"u07716483\" id=\"u07716483\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u5487cf4c\" id=\"u5487cf4c\" class=\"lake-fontsize-12\" style=\"color: rgb(255, 80, 44); background-color: rgb(255, 245, 245)\">gzip on</span><span data-lake-id=\"u5aba538a\" id=\"u5aba538a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ub0bce527\" id=\"ub0bce527\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gzip 可有不会生效，gzip 默认只对大于20字节的内容做处理。我们在测试的时候页面内容都很少，很容易少于 20字节</span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html%23gzip_min_length\" target=\"_blank\" data-lake-id=\"ufb370ddc\" id=\"ufb370ddc\"><span data-lake-id=\"ue69db605\" id=\"ue69db605\">gzip_min_length</span></a><span data-lake-id=\"ue38a67d0\" id=\"ue38a67d0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">,设为0 代表所有大小都压缩。</span></p><p data-lake-id=\"ua4c4148f\" id=\"ua4c4148f\"><span data-lake-id=\"u2d5a873e\" id=\"u2d5a873e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">启用压缩后，在请求 /index.html 响应 200 的时候，查看 header，发现有两个增加，并且 Content-Length 不见了。</span></p><p data-lake-id=\"uaf580ed7\" id=\"uaf580ed7\"><span data-lake-id=\"ub4fc3409\" id=\"ub4fc3409\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">Content-Encoding:gzip 内容的格式为 gzip,告诉浏览器，需要 gzip 解压再展示。</span></p><p data-lake-id=\"u0c3d3d46\" id=\"u0c3d3d46\"><span data-lake-id=\"uf41d04d4\" id=\"uf41d04d4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">Transfer-Encoding:chunked 数据是通过一系列块来传输的，省略 Content-Length ，为了得到内容大小，需要把每个 chunk 的大小 加起来。</span></p><p data-lake-id=\"ub02267a4\" id=\"ub02267a4\"><span data-lake-id=\"u52b4767b\" id=\"u52b4767b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">为什么打开 gzip 后 content-length 信息没有了呢？ 这是因为 nginx 的压缩是异步的，发送头的时候，nginx 可能正在压缩，不知道压缩完成的文件大小。</span></p><p data-lake-id=\"u7d6f1ab3\" id=\"u7d6f1ab3\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1661328357432-91891d18-8f05-4c09-be78-b5e9cd1abc17.webp%22%2C%22taskId%22%3A%22uf9f5fd84-868f-492b-a829-fbb52fd1bc1%22%2C%22clientId%22%3A%22u81110d56-3058-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A666%2C%22originHeight%22%3A398%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f9f2f1%22%2C%22id%22%3A%22u16f6e592%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"></card></p><h3 data-lake-id=\"sWtIX\" id=\"sWtIX\"><span data-lake-id=\"uf8403158\" id=\"uf8403158\" style=\"color: rgb(51, 51, 51)\">指定需要 gzip 的文件</span></h3><p data-lake-id=\"udc0592b1\" id=\"udc0592b1\"><span data-lake-id=\"u79f9aba1\" id=\"u79f9aba1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">我们访问 /index.css ,发现并没有压缩，这是因为 gzip ，默认只压缩 text/html 类型的文件。</span></p><p data-lake-id=\"u83c2bbdc\" id=\"u83c2bbdc\"><span data-lake-id=\"udb92c42b\" id=\"udb92c42b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">增加 text/css 类型后，css 文件 也可以压缩了。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22gzip_types%20text%2Fhtml%2Ctext%2Fcss%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22nQKWq%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"MTpCP\" id=\"MTpCP\"><span data-lake-id=\"u8ab061be\" id=\"u8ab061be\" style=\"color: rgb(51, 51, 51)\">压缩级别。</span></h3><p data-lake-id=\"u1e2aa04c\" id=\"u1e2aa04c\"><span data-lake-id=\"ucb9f67dc\" id=\"ucb9f67dc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gzip 有9个压缩级别，越高，压缩效果越好，但是对 cpu的消耗越多。默认压缩级别为 1 。我们可以设置一个合适的级别，比如 2；</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22gzip_comp_level%202%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BFAY5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"BMML1\" id=\"BMML1\"><span data-lake-id=\"uc7b7c018\" id=\"uc7b7c018\" style=\"color: rgb(51, 51, 51)\">gzip_static</span></h3><p data-lake-id=\"u433afe4b\" id=\"u433afe4b\"><span data-lake-id=\"udb8e0ce0\" id=\"udb8e0ce0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">前面讲的nginx 处理 gzip的方式是 服务器负责压缩，这样会消耗掉很多 cpu 资源。我们可以先把文件压缩成 gzip，nginx 直接拿 gzip过的文件就行了。预处理的好处不光是节省了 cpu 压缩时间，还可以 让 nginx 可以用 使用</span><span data-lake-id=\"u6b031ca0\" id=\"u6b031ca0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_core_module.html%23sendfile\" target=\"_blank\" data-lake-id=\"u3b54bfa6\" id=\"u3b54bfa6\"><span data-lake-id=\"u13b0c8c4\" id=\"u13b0c8c4\">sendfile</span></a><span data-lake-id=\"u06979016\" id=\"u06979016\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u50d50fb8\" id=\"u50d50fb8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">系统调用来传输文件,性能得到提高。</span></p><p data-lake-id=\"uf4fa6a4c\" id=\"uf4fa6a4c\"><span data-lake-id=\"u6df439a6\" id=\"u6df439a6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">新版本的 nginx 已经 默认安装了这个模块，如果是老版的 nginx 这个模块需要安装一下。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22gzip_static%20always%3B%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22EdAuu%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u0b84e93f\" id=\"u0b84e93f\"><span data-lake-id=\"u27ded3a6\" id=\"u27ded3a6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">如果加上这句,nginx 不报错，说明 gzip_static 模块已经安装了。</span></p><p data-lake-id=\"u5bd24e94\" id=\"u5bd24e94\"><span data-lake-id=\"ua8cf28e2\" id=\"ua8cf28e2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gzip_static 可以有三个值。</span></p><ul list=\"u0709a05b\"><li fid=\"u685c2218\" data-lake-id=\"uac9fc402\" id=\"uac9fc402\"><strong><span data-lake-id=\"u5657d5ba\" id=\"u5657d5ba\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">off</span></strong><span data-lake-id=\"uf1fae315\" id=\"uf1fae315\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uc25d3668\" id=\"uc25d3668\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">默认值。 不启用 gzip_static。gzip功能还是可以用的。</span></li><li fid=\"u685c2218\" data-lake-id=\"u7f7a599f\" id=\"u7f7a599f\"><strong><span data-lake-id=\"u43751d85\" id=\"u43751d85\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">on</span></strong><span data-lake-id=\"u39f7cb3e\" id=\"u39f7cb3e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u86ef55cc\" id=\"u86ef55cc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">启用。 当客户端支持 gzip的时候，发送压缩文件，不支持的时候发送原文件。</span></li><li fid=\"u685c2218\" data-lake-id=\"uf504fc83\" id=\"uf504fc83\"><strong><span data-lake-id=\"u03f370a2\" id=\"u03f370a2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">always</span></strong><span data-lake-id=\"u02f40383\" id=\"u02f40383\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"uf8af86fd\" id=\"uf8af86fd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">总是。 不管客户端是否支持，都优先发送压缩文件。如果没有压缩文件，再发送原文件。</span></li></ul><p data-lake-id=\"u76e12996\" id=\"u76e12996\"><span data-lake-id=\"uc796ee95\" id=\"uc796ee95\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">实操的时候，用 always 比较好。现在不支持 gzip 的浏览器太少了，这样可以免掉 nginx 判断的步骤，对性能有所提高。为了方便 nginx 查找（文件越多，查找越慢），只保留 gzip 文件，原文件全部删除。</span></p><h2 data-lake-id=\"suA6m\" id=\"suA6m\"><span data-lake-id=\"u4768a1cb\" id=\"u4768a1cb\" style=\"color: rgb(51, 51, 51)\">负载均衡</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22upstream%20servers%20%7B%5Cn%20%20%20%20server%20192.168.1.1%3B%5Cn%20%20%20%20server%20192.168.1.2%3B%5Cn%7D%5Cn%5Cnserver%20%7B%5Cn%20%20%20%20listen%20%20%20%20%20%20%2080%3B%5Cn%20%20%20%20server_name%20%20_%3B%5Cn%20%20%20%20location%20%2F%20%7B%5Cn%20%20%20%20%20%20%20%20proxy_pass%20%20%20http%3A%2F%2Fservers%3B%5Cn%20%20%20%20%20%20%20%20proxy_set_header%20%20%20%20%20%20%20%20Host%20%20%20%20%24host%3B%5Cn%20%20%20%20%20%20%20%20proxy_set_header%20%20%20%20%20%20%20%20X-Real-IP%20%20%20%20%20%20%20%24remote_addr%3B%5Cn%20%20%20%20%20%20%20%20proxy_set_header%20%20%20%20%20%20%20%20X-Forwarded-For%20%24proxy_add_x_forwarded_for%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZfBTe%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua7c4b1ed\" id=\"ua7c4b1ed\"><span data-lake-id=\"u98f3d752\" id=\"u98f3d752\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">nginx 常用的负载均衡 是</span><span data-lake-id=\"ube8f6f48\" id=\"ube8f6f48\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><a href=\"https://link.juejin.cn/?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_upstream_module.html%23upstream\" target=\"_blank\" data-lake-id=\"u9c190690\" id=\"u9c190690\"><span data-lake-id=\"u2e0bfbd8\" id=\"u2e0bfbd8\">upstream</span></a><span data-lake-id=\"u147489dd\" id=\"u147489dd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u24b2cffc\" id=\"u24b2cffc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">来完成的。默认采用轮询的方式依次访问各个服务器。可以给每个服务器加权重，调整访问的频率，权重越高，被访问的越频繁。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22upstream%20servers%20%7B%5Cn%20%20%20%20server%20192.168.1.1%20weight%3D1%3B%5Cn%20%20%20%20server%20192.168.1.2%20weight%3D2%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VqLV2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u5da0550f\" id=\"u5da0550f\"><span data-lake-id=\"u51d4f98e\" id=\"u51d4f98e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">根据 ip 也可以分配请求。这样能保证同一个用户可以由同一个服务器来服务，可以解决登录 session 的问题。但是根据 ip 分配 可能导致某些服务器请求过多，又不能再做调整。所以解决 登录 session 的问题，可以用统一的 redis 服务来解决。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22upstream%20servers%20%7B%5Cn%20%20%20%20ip_hash%3B%5Cn%20%20%20%20server%20192.168.1.1%20%3B%5Cn%20%20%20%20server%20192.168.1.2%20%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22C5VZ9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u35a7e0b8\" id=\"u35a7e0b8\"><span data-lake-id=\"ud28b1dc4\" id=\"ud28b1dc4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">根据 url 分配 请求。比如这样的场景， 资源（图片等静态文件）服务器从源服务器拉取资源后，下次请求会再次落到这个资源服务器，就可以直接返回结果 ，不用再从源服务器请求资源了。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22upstream%20servers%20%7B%5Cn%20%20%20%20hash%20%24request_uri%3B%5Cn%20%20%20%20server%20192.168.1.1%20%3B%5Cn%20%20%20%20server%20192.168.1.2%20%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22I0lEv%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u061ca8e5\" id=\"u061ca8e5\"><span data-lake-id=\"uf38b157c\" id=\"uf38b157c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">最后再介绍一下最小连接数方案。在这种场景下，least_conn算法很简单，首选遍历后端集群，比较每个后端的conns/weight（连接数除权重），选取该值最小的后端。 如果有多个后端的conns/weight值同为最小的，那么对它们采用加权轮询算法。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22shell%22%2C%22code%22%3A%22%5Cnupstream%20servers%20%7B%5Cn%20%20%20%20least_conn%3B%5Cn%20%20%20%20server%20192.168.1.1%20weight%3D2%3B%5Cn%20%20%20%20server%20192.168.1.2%20weight%3D1%20%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22c2Eyy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 5,
    "hits": 5,
    "comments_count": 0,
    "word_count": 6783,
    "created_at": "2022-08-24T08:02:49.000Z",
    "updated_at": "2023-08-09T02:39:58.000Z",
    "content_updated_at": "2023-08-09T02:39:57.000Z",
    "published_at": "2023-08-09T02:39:57.000Z",
    "first_published_at": "2022-08-24T08:19:27.884Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913898192,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 84811067,
    "type": "Doc",
    "slug": "sgm2il",
    "title": "简单的文字转图片（svg）",
    "description": "食用方法：创建一个svg文件（例如：a.svg），代码如下 <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"55.00000000000001\" width = \"860.0\">     <!-- Generated by https://api...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ub9b91b7f\" class=\"ne-p\"><span class=\"ne-text\">食用方法：</span></p><p id=\"uf9c3cf40\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u7faca75b\" class=\"ne-p\"><span class=\"ne-text\">创建一个svg文件（例如：a.svg），代码如下</span></p><pre data-language=\"shell\" id=\"ZtH4Q\" class=\"ne-codeblock language-shell\">\n&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;55.00000000000001&quot; width = &quot;860.0&quot;&gt;\n    &lt;!-- Generated by https://api.gushi.ci/ --&gt;\n    &lt;g&gt;\n        &lt;text  text-anchor=&quot;start&quot; letter-spacing=&quot;4.0&quot; font-smoothing=&quot;antialiased&quot; font-family='KaiTi, &quot;Segoe UI&quot;, &quot;Lucida Grande&quot;, Helvetica, Arial, &quot;Microsoft YaHei&quot;, FreeSans, Arimo, &quot;Droid Sans&quot;,&quot;wenquanyi micro hei&quot;,&quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, sans-serif' font-size=&quot;50.0&quot; id=&quot;svg_1&quot; y=&quot;50.0&quot; x=&quot;0&quot; stroke-width=&quot;0&quot; stroke=&quot;#000&quot; fill=&quot;#000000&quot;&gt;独出前门望野田，月明荞麦花如雪。&lt;/text&gt;\n    &lt;/g&gt;\n&lt;/svg&gt;</pre><p id=\"u47516dc6\" class=\"ne-p\"><span class=\"ne-text\"> 在相应要显示的位置调用如下：</span></p><pre data-language=\"shell\" id=\"UdDKz\" class=\"ne-codeblock language-shell\">&lt;img src=&quot;https://v1.jinrishici.com/all.svg?font-size=50&amp;amp;spacing=4&quot; data-origin=&quot;a.sgv&quot; alt=&quot;今日诗词&quot;&gt;</pre><p id=\"uf363d82e\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u46e80f73\" class=\"ne-p\"><span class=\"ne-text\">食完，收工~~~</span></p></div>",
    "body": "食用方法：\n\n创建一个svg文件（例如：a.svg），代码如下\n```shell\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"55.00000000000001\" width = \"860.0\">\n    <!-- Generated by https://api.gushi.ci/ -->\n    <g>\n        <text  text-anchor=\"start\" letter-spacing=\"4.0\" font-smoothing=\"antialiased\" font-family='KaiTi, \"Segoe UI\", \"Lucida Grande\", Helvetica, Arial, \"Microsoft YaHei\", FreeSans, Arimo, \"Droid Sans\",\"wenquanyi micro hei\",\"Hiragino Sans GB\", \"Hiragino Sans GB W3\", sans-serif' font-size=\"50.0\" id=\"svg_1\" y=\"50.0\" x=\"0\" stroke-width=\"0\" stroke=\"#000\" fill=\"#000000\">独出前门望野田，月明荞麦花如雪。</text>\n    </g>\n</svg>\n```\n 在相应要显示的位置调用如下：\n```shell\n<img src=\"https://v1.jinrishici.com/all.svg?font-size=50&amp;spacing=4\" data-origin=\"a.sgv\" alt=\"今日诗词\">\n```\n\n食完，收工~~~\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ub9b91b7f\" class=\"ne-p\"><span class=\"ne-text\">食用方法：</span></p><p id=\"uf9c3cf40\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u7faca75b\" class=\"ne-p\"><span class=\"ne-text\">创建一个svg文件（例如：a.svg），代码如下</span></p><pre data-language=\"shell\" id=\"ZtH4Q\" class=\"ne-codeblock language-shell\">\n&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;55.00000000000001&quot; width = &quot;860.0&quot;&gt;\n    &lt;!-- Generated by https://api.gushi.ci/ --&gt;\n    &lt;g&gt;\n        &lt;text  text-anchor=&quot;start&quot; letter-spacing=&quot;4.0&quot; font-smoothing=&quot;antialiased&quot; font-family='KaiTi, &quot;Segoe UI&quot;, &quot;Lucida Grande&quot;, Helvetica, Arial, &quot;Microsoft YaHei&quot;, FreeSans, Arimo, &quot;Droid Sans&quot;,&quot;wenquanyi micro hei&quot;,&quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, sans-serif' font-size=&quot;50.0&quot; id=&quot;svg_1&quot; y=&quot;50.0&quot; x=&quot;0&quot; stroke-width=&quot;0&quot; stroke=&quot;#000&quot; fill=&quot;#000000&quot;&gt;独出前门望野田，月明荞麦花如雪。&lt;/text&gt;\n    &lt;/g&gt;\n&lt;/svg&gt;</pre><p id=\"u47516dc6\" class=\"ne-p\"><span class=\"ne-text\"> 在相应要显示的位置调用如下：</span></p><pre data-language=\"shell\" id=\"UdDKz\" class=\"ne-codeblock language-shell\">&lt;img src=&quot;https://v1.jinrishici.com/all.svg?font-size=50&amp;amp;spacing=4&quot; data-origin=&quot;a.sgv&quot; alt=&quot;今日诗词&quot;&gt;</pre><p id=\"uf363d82e\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u46e80f73\" class=\"ne-p\"><span class=\"ne-text\">食完，收工~~~</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"ub9b91b7f\" id=\"ub9b91b7f\"><span data-lake-id=\"ub9b63538\" id=\"ub9b63538\">食用方法：</span></p><p data-lake-id=\"uf9c3cf40\" id=\"uf9c3cf40\"><span data-lake-id=\"uddd2c3b8\" id=\"uddd2c3b8\">​</span><br></p><p data-lake-id=\"u7faca75b\" id=\"u7faca75b\"><span data-lake-id=\"ud389a544\" id=\"ud389a544\">创建一个svg文件（例如：a.svg），代码如下</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%5Cn%3Csvg%20xmlns%3D%5C%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%5C%22%20height%3D%5C%2255.00000000000001%5C%22%20width%20%3D%20%5C%22860.0%5C%22%3E%5Cn%20%20%20%20%3C!--%20Generated%20by%20https%3A%2F%2Fapi.gushi.ci%2F%20--%3E%5Cn%20%20%20%20%3Cg%3E%5Cn%20%20%20%20%20%20%20%20%3Ctext%20%20text-anchor%3D%5C%22start%5C%22%20letter-spacing%3D%5C%224.0%5C%22%20font-smoothing%3D%5C%22antialiased%5C%22%20font-family%3D'KaiTi%2C%20%5C%22Segoe%20UI%5C%22%2C%20%5C%22Lucida%20Grande%5C%22%2C%20Helvetica%2C%20Arial%2C%20%5C%22Microsoft%20YaHei%5C%22%2C%20FreeSans%2C%20Arimo%2C%20%5C%22Droid%20Sans%5C%22%2C%5C%22wenquanyi%20micro%20hei%5C%22%2C%5C%22Hiragino%20Sans%20GB%5C%22%2C%20%5C%22Hiragino%20Sans%20GB%20W3%5C%22%2C%20sans-serif'%20font-size%3D%5C%2250.0%5C%22%20id%3D%5C%22svg_1%5C%22%20y%3D%5C%2250.0%5C%22%20x%3D%5C%220%5C%22%20stroke-width%3D%5C%220%5C%22%20stroke%3D%5C%22%23000%5C%22%20fill%3D%5C%22%23000000%5C%22%3E%E7%8B%AC%E5%87%BA%E5%89%8D%E9%97%A8%E6%9C%9B%E9%87%8E%E7%94%B0%EF%BC%8C%E6%9C%88%E6%98%8E%E8%8D%9E%E9%BA%A6%E8%8A%B1%E5%A6%82%E9%9B%AA%E3%80%82%3C%2Ftext%3E%5Cn%20%20%20%20%3C%2Fg%3E%5Cn%3C%2Fsvg%3E%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZtH4Q%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u47516dc6\" id=\"u47516dc6\"><span data-lake-id=\"u61403d09\" id=\"u61403d09\"> 在相应要显示的位置调用如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%3Cimg%20src%3D%5C%22https%3A%2F%2Fv1.jinrishici.com%2Fall.svg%3Ffont-size%3D50%26amp%3Bspacing%3D4%5C%22%20data-origin%3D%5C%22a.sgv%5C%22%20alt%3D%5C%22%E4%BB%8A%E6%97%A5%E8%AF%97%E8%AF%8D%5C%22%3E%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UdDKz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf363d82e\" id=\"uf363d82e\"><span data-lake-id=\"ue456f752\" id=\"ue456f752\">​</span><br></p><p data-lake-id=\"u46e80f73\" id=\"u46e80f73\"><span data-lake-id=\"u3945041d\" id=\"u3945041d\">食完，收工~~~</span></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 117,
    "created_at": "2022-07-28T07:11:43.000Z",
    "updated_at": "2022-11-06T21:14:26.000Z",
    "content_updated_at": "2022-07-28T07:14:18.000Z",
    "published_at": "2022-07-28T07:14:18.000Z",
    "first_published_at": "2022-07-28T07:14:18.300Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1130624504,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 83682389,
    "type": "Doc",
    "slug": "mkvdtz",
    "title": "PHP使用Solr全文搜索引擎(windows)",
    "description": "tags: [php,sole,搜索,全文搜索,搜索引擎,windows]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:在windo...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127114583-33d0d408-62e0-482f-b7b6-cc5306a5be60.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,sole,搜索,全文搜索,搜索引擎,windows]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在windows上使用solr全文搜索引擎</span></p></div><h1 id=\"VXwhD\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">安装solr</span></h1><h2 id=\"cSNAt\"><span class=\"ne-text\">安装jre运行环境</span></h2><p id=\"u1e4fa6d8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">已正确安装JRE运行环境。</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">JRE安装请参考《JRE安装指南》。</span></p><h2 id=\"oQsd9\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77)\">下载solr</span></h2><p id=\"uc86264db\" class=\"ne-p\"><a href=\"https://solr.apache.org/downloads.html\" data-href=\"https://solr.apache.org/downloads.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">下载地址</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">：https://solr.apache.org/downloads.html ，如图所示：</span></p><p id=\"uaa8b40ba\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127114583-33d0d408-62e0-482f-b7b6-cc5306a5be60.png\" width=\"1042.415131853756\" id=\"u909eb52e\" class=\"ne-image\"></p><p id=\"uab1e2544\" class=\"ne-p\"><br></p><p id=\"ud91d5a73\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">或者：</span></p><p id=\"u6d47ef0f\" class=\"ne-p\"><a href=\"http://archive.apache.org/dist/lucene/solr/\" data-href=\"http://archive.apache.org/dist/lucene/solr/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://archive.apache.org/dist/lucene/solr/</span></a></p><p id=\"u69a1eee3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><p id=\"u3ad94350\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">各系统适用版本见下表。</span></p><table id=\"PnaTH\" class=\"ne-table\" style=\"width: 588px\"><tbody><tr style=\"height: 33px\"><td width=\"213\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"ua0e9d1d9\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">安装包版本</span></strong></p></td><td width=\"375\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"uddc0b838\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">适用系统</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"213\"><p id=\"u258c73d1\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr-X.X.X-src.tgz</span></p></td><td width=\"375\"><p id=\"u14992689\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Solr 源代码。可在不使用官方 Git 存储库的情况下在 Solr 上进行开</span></p></td></tr><tr style=\"height: 33px\"><td width=\"213\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u017c1f1d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr-X.X.X.tgz</span></p></td><td width=\"375\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u0c4ca193\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Linux/Unix/OSX</span></p></td></tr><tr style=\"height: 33px\"><td width=\"213\"><p id=\"u72ed4990\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr-X.X.X.zip</span></p></td><td width=\"375\"><p id=\"u1f6b63c7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Microsoft Windows</span></p></td></tr></tbody></table><h2 id=\"vAms5\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">安装 Solr</span></h2><p id=\"u3e0cffc5\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">使用解压工具解压安装包，解压即可启动</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">。解压后目录结构如表所示：</span></p><table id=\"YGBm2\" class=\"ne-table\" style=\"width: 734px\"><tbody><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u396374ed\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">目录名称</span></strong></p></td><td width=\"136\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"ub6b79c7e\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">功能</span></strong></p></td><td width=\"148\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u852bc4e6\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">次级文件/文件目录</span></strong></p></td><td width=\"309\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u472e0558\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">功能</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"udd7773a7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">bin/</span></p></td><td width=\"136\"><p id=\"u1d75103d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含几个重要的脚本，它们将使 Solr 的使用更容易</span></p></td><td width=\"148\"><p id=\"ua1c7ee72\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Solr、solr.cmd</span></p></td><td width=\"309\"><p id=\"ua581946f\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">是Solr 的控制脚本，也称为bin/solr(*nix) / bin/solr.cmd(Windows)。此脚本是启动和停止 Solr 的首选工具。在 SolrCloud 模式下运行时，您还可以创建集合或核心、配置身份验证和使用配置文件</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ucf005fc6\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">post</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u65be496d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">提供了用于发布内容到Solr一个简单的命令行界面</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"></td><td width=\"136\"></td><td width=\"148\"><p id=\"uba3fc9e6\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr.in.sh、solr.in.cmd</span></p></td><td width=\"309\"><p id=\"ubf3e4724\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">是 *nix 和 Windows 系统的属性文件。Java、Jetty 和 Solr 的系统级属性在此处配置。使用bin/solr/时可以覆盖其中许多设置bin/solr.cmd，但这允许您在一个地方设置所有属性</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc3e5c866\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">install_solr_services.sh</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc5a7b0ed\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">此脚本在 *nix 系统上用于将 Solr 安装为服务</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"u01421361\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">contrib/</span></p></td><td width=\"136\"><p id=\"u2b44c245\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包括用于 Solr 特殊功能的附加插件</span></p></td><td width=\"148\"><p id=\"u0dea3cf7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\"><p id=\"u4f87883e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u211d89e9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">dist/</span></p></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u6d09fd39\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含主要的 Solr .jar 文件</span></p></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ude6c7ce9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u2381ed57\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"u88189de9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">docs/</span></p></td><td width=\"136\"><p id=\"uf6f004ae\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含指向 Solr 的在线 Javadocs 的链接</span></p></td><td width=\"148\"><p id=\"u5177e398\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\"><p id=\"ud702f0b0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u15e01cc0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">example/</span></p></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uf99e7a8c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含多种类型的示例，用于演示各种 Solr 功能</span></p></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u521abc8d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u8773d6c3\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"u6848edd5\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">licenses/</span></p></td><td width=\"136\"><p id=\"u713ce39e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含 Solr 使用的第 3 方库的所有许可证</span></p></td><td width=\"148\"><p id=\"u9e88ca32\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\"><p id=\"uc6933346\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ueb44774e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">server/</span></p></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc37acf5c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">是 Solr 应用程序的核心所在</span></p></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u3872d735\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/solr-webapp</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u81b60185\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Solr 的UI管理</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"></td><td width=\"136\"></td><td width=\"148\"><p id=\"u18aa55d2\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/lib</span></p></td><td width=\"309\"><p id=\"u2f5f6aa7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Jetty libraries</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u4c39d54d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/logs</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ud5b1c98d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">日志文件</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"></td><td width=\"136\"></td><td width=\"148\"><p id=\"u7d274976\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/resources</span></p></td><td width=\"309\"><p id=\"u0d77c1b7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">日志配置</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u553203c1\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/solr/configsets</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u7fad7387\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">示例配置集</span></p></td></tr></tbody></table><h2 id=\"SCLCm\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">启动solr</span></h2><p id=\"u43e9b43e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">Solr 包括一个名为bin/solr(Linux/MacOS) 或bin\\solr.cmd(Windows)的命令行界面工具。该工具允许您启动和停止 Solr、创建核心和集合、配置身份验证以及检查系统状态。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">要使用它来启动 Solr，只需在解压后的bin目录下打开命令行，执行命令：</span></p><p id=\"u417f21b3\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">~~~</span></p><p id=\"u3abc1e74\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 14px\">.</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: unset; background-color: rgb(250, 250, 250); font-size: 14px\">solr </span><span class=\"ne-text\" style=\"color: rgb(221, 74, 104); background-color: rgb(250, 250, 250); font-size: 14px\">start</span><span class=\"ne-text\" style=\"color: unset; background-color: rgb(250, 250, 250); font-size: 14px\"></span></p><p id=\"u3eff5a9c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 16px\">~~~</span></p><p id=\"u0ec4abd2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 16px\"></span></p><p id=\"u6768a136\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 16px\">几条常用命令</span></p><pre data-language=\"shell\" id=\"xuoqf\" class=\"ne-codeblock language-shell\"><code>solr start –p 端口号 #单机版启动solr服务\nsolr restart –p 端口号 #重启solr服务\nsolr stop –p 端口号 #关闭solr服务\n</code></pre><p id=\"u49a59769\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 16px\"></span></p><p id=\"ue5c2fa2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这将在后台启动 Solr，侦听端口 8983。当您在后台启动 Solr 时，脚本将等待以确保 Solr 正确启动，然后再返回命令行提示符。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">启动完成后默认监听8983端口，</span><a href=\"http://localhost:8983/solr/\" data-href=\"http://localhost:8983/solr/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">管理界面</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">访问地址：http://localhost:8983/solr/</span></p><h2 id=\"qhKk8\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\"> 停止Solr</span></h2><p id=\"u3542548e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在bin目录下执行命令：</span></p><p id=\"u2641753e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 14px\">.</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: unset; background-color: rgb(250, 250, 250); font-size: 14px\">solr stop </span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: unset; background-color: rgb(250, 250, 250); font-size: 14px\">all</span></p><p id=\"ua5cc1d62\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">注：停止时必须指定端口。</span></p><h1 id=\"Iua0c\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">安装php扩展solr .dll</span></h1><h2 id=\"z8JDw\"><span class=\"ne-text\">0、环境</span></h2><ol class=\"ne-ol\"><li id=\"uf41e38cb\" data-lake-index-type=\"0\"><span class=\"ne-text\">操作系统：Windows10</span></li><li id=\"ubdc76fa0\" data-lake-index-type=\"0\"><span class=\"ne-text\">solr: 8.9.0</span></li><li id=\"u129d8e1d\" data-lake-index-type=\"0\"><span class=\"ne-text\">php：7.3 （nts）</span></li></ol><h2 id=\"IpjiJ\"><span class=\"ne-text\">1、扩展说明</span></h2><p id=\"u837eb9ba\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px\">扩展地址：</span></strong></p><p id=\"ub7458288\" class=\"ne-p\"><a href=\"https://pecl.php.net/ \" data-href=\"https://pecl.php.net/ \" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"background-color: rgb(250, 250, 250); font-size: 14px\">https://pecl.php.net/ </span></a><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 16px\">确定线性与非线性</span></strong></p><p id=\"u9872813b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">Non Thread Safe </span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">(</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">NTS</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">)</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\"> x64 / Thread Safe </span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">(</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">TS</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">)</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\"> x64</span></p><p id=\"ud7652bab\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">通过phpinfo</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">();</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\"> 查看其中的 Thread Safety 项，这个项目就是查看是否是线程安全</span></p><p id=\"u52a902c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">如果是：enabled，一般来说应该是ts版，否则是nts版。</span></p><h2 id=\"fx2pg\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">2、安装php扩展</span></h2><p id=\"u0a760b49\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">打开扩展下载地址：</span></p><p id=\"u5eb89714\" class=\"ne-p\"><a href=\"https://pecl.php.net/package/solr\" data-href=\"https://pecl.php.net/package/solr\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://pecl.php.net/package/solr</span></a></p><p id=\"ua87a1f73\" class=\"ne-p\"><span class=\"ne-text\">选择版本后面的dll文件（我用的是2.5.1版本的dll）</span></p><p id=\"u01add59f\" class=\"ne-p\"><a href=\"https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip\" data-href=\"https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip</span></a></p><p id=\"uc868fc4f\" class=\"ne-p\"><span class=\"ne-text\">并点击下载。</span></p><p id=\"u46521b77\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108004278-e1ac5886-8688-4801-a581-e5ebf234ea61.png\" width=\"1129.3585312090652\" id=\"u01c49dde\" class=\"ne-image\"></p><p id=\"u3d71c879\" class=\"ne-p\"><span class=\"ne-text\">下载成功后，解压获取：</span></p><ol class=\"ne-ol\"><li id=\"u3ef26699\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php_solr.dll </span></li><li id=\"u5ae30239\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php_solr.pdb</span></li></ol><p id=\"uc3bf10c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">将压缩包的php_solr.dll、php_solr.pdb 放到你的 php 扩展目录下 php/ext/ 下。 </span></p><p id=\"u0998959a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php.ini中加入 extension</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php_solr.dll </span></p><p id=\"u95499e03\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108202536-3d93ee60-5d56-4be8-8aa3-91c280883f42.png\" width=\"566.9434166294104\" id=\"ua670e885\" class=\"ne-image\"></p><p id=\"u0d566327\" class=\"ne-p\"><br></p><p id=\"u3e020436\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">我的集成环境位置： </span><span class=\"ne-text\">D:\\phpEnv\\php\\php-7.3\\ext</span></p><p id=\"ue259552e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">重启服务器，查看phpinfo</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">()</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">，</span></p><p id=\"u34e55f85\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">是否有显示solr扩展加载成功。</span></p><p id=\"u1f14ff00\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108254208-edbc8d29-1a2f-483b-b39e-44219d65f46d.png\" width=\"948.2264492188382\" id=\"u5fe2cd3d\" class=\"ne-image\"></p><h1 id=\"ubnsN\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\"> 常用操作</span></h1><p id=\"ub847aa3c\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">创建core，-c指定创建的core名</span></strong></p><p id=\"u1d5d2eb1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 14px\">.</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: unset; background-color: rgb(250, 250, 250); font-size: 14px\">solr create </span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: unset; background-color: rgb(250, 250, 250); font-size: 14px\">c test_core1 </span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250); font-size: 16px\">1</span></p><p id=\"uba8472b6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">删除core，-c指定删除的core名</span></strong></p><p id=\"u2e63b801\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">.</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89)\">/</span><span class=\"ne-text\">solr delete </span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89)\">-</span><span class=\"ne-text\">c test_core1</span></p><p id=\"ufb0f8658\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"udff107a2\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127465096-e38fc348-6514-4fc7-a764-ce946777deb2.png\" width=\"1267\" id=\"ua150db6d\" class=\"ne-image\"></p><p id=\"ua76c3951\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127470711-73c2ff90-c5ed-438a-b040-e14c99ded58a.png\" width=\"640\" id=\"uddf79326\" class=\"ne-image\"></p><p id=\"u177831bf\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127476667-41a12875-1ffb-4285-bd57-21ce09aa06a6.png\" width=\"641\" id=\"u801b6d25\" class=\"ne-image\"></p><p id=\"u44e10ea5\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127481012-dc1b0ebf-6f3e-49c9-bd52-96e2259dd09e.png\" width=\"620\" id=\"u17ca993b\" class=\"ne-image\"></p><p id=\"u5e3ef02b\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127485301-62701194-113b-487c-92be-12289aabb291.png\" width=\"446\" id=\"u9b3fd6ae\" class=\"ne-image\"></p><p id=\"ubc4e595a\" class=\"ne-p\"><br></p><h2 id=\"VJyoE\"><span class=\"ne-text\">二、创建核心</span></h2><h3 id=\"TTO9Q\"><span class=\"ne-text\">2.1 创建核心前准备工作</span></h3><p id=\"ua27a148e\" class=\"ne-p\"><span class=\"ne-text\">每个核心都是solr的一个实例，一个solr服务可以创建多个核心，每个核心都可以进行自己独立配置。</span></p><ul class=\"ne-ul\"><li id=\"ud8f8b0e3\" data-lake-index-type=\"0\"><span class=\"ne-text\">1.切换至solr_home\\server\\solr目录，例如：E:\\solr-8.1.1\\server\\solr，在该目录下创建一个文件夹，文件夹名称与核心名称相同。 </span><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788037-3dd84813-0a7f-456b-a0e1-57e0833147f6.webp\" width=\"814\" id=\"uc850f99b\" class=\"ne-image\"><span class=\"ne-text\">_v_images/2019062</span></li><li id=\"u6800eb5d\" data-lake-index-type=\"0\"><span class=\"ne-text\">2.将E:\\solr-8.1.1\\server\\solr\\configsets_default路径下的conf文件夹复制到new_core目录（E:\\solr-8.1.1\\server\\solr\\new_core）下。</span></li></ul><h3 id=\"V73sY\"><span class=\"ne-text\">2.2 创建核心</span></h3><h4 id=\"ADKrG\"><span class=\"ne-text\">方式一：打开solr界面，进行如图顺序操作。</span></h4><p id=\"u8c2718b2\" class=\"ne-p\"><span class=\"ne-text\">这种方式 需要 在 E:\\solr-8.1.1\\server\\solr 目录下创建 new_core文件夹</span></p><p id=\"u69200590\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788016-424a695c-b554-4066-b999-736c33b8b2c3.webp\" width=\"1300\" id=\"u72b236cd\" class=\"ne-image\"></p><h4 id=\"sdYns\"><span class=\"ne-text\">方式二：bin目录下输入命令：solr create -c new_core （推荐）</span></h4><h2 id=\"EQ2RX\"><span class=\"ne-text\">三、schema</span></h2><p id=\"u425c0069\" class=\"ne-p\"><span class=\"ne-text\">每个核心core中都有这么一个 schema配置文件。 schema文件可以对索引库的数据类型进行定义，对字段是否进行索引、存储等进行配置，需要针对狠心单独进行配置。 schema的数据类型进本够用，如果不能满足需求，比如说对中文分词、拼音分词等，就可以自定义分词器。 Solr8.1.1 的schema的配置文件名 为managed-schema,home\\server\\solr\\new_core\\conf\\managed-schema（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）。</span></p><h3 id=\"ua5cy\"><span class=\"ne-text\">3.1 schema主要成员</span></h3><ul class=\"ne-ul\"><li id=\"ud4baf83f\" data-lake-index-type=\"0\"><span class=\"ne-text\">（1） fieldType：为field定义类型，最主要作用是定义分词器，分词器决定着如何从文档中检索关键字。</span></li><li id=\"u02bf10c1\" data-lake-index-type=\"0\"><span class=\"ne-text\">（2） analyzer：fieldType的子元素，是分词器，由tokenizer和filter组成。例如</span></li></ul><p id=\"ub7d66cd0\" class=\"ne-p\"><span class=\"ne-text\">&lt;fieldType </span><span class=\"ne-text\">name</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;text_tr&quot;</span><span class=\"ne-text\"> class=</span><span class=\"ne-text\">&quot;solr.TextField&quot;</span><span class=\"ne-text\"> positionIncrementGap=</span><span class=\"ne-text\">&quot;100&quot;</span><span class=\"ne-text\">&gt;     &lt;analyzer&gt;       &lt;tokenizer </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.StandardTokenizerFactory&quot;</span><span class=\"ne-text\">/&gt;       &lt;filter </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.TurkishLowerCaseFilterFactory&quot;</span><span class=\"ne-text\">/&gt;       &lt;filter </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.StopFilterFactory&quot;</span><span class=\"ne-text\"> words=</span><span class=\"ne-text\">&quot;lang/stopwords_tr.txt&quot;</span><span class=\"ne-text\"> ignoreCase=</span><span class=\"ne-text\">&quot;false&quot;</span><span class=\"ne-text\">/&gt;       &lt;filter </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.SnowballPorterFilterFactory&quot;</span><span class=\"ne-text\"> language=</span><span class=\"ne-text\">&quot;Turkish&quot;</span><span class=\"ne-text\">/&gt;     &lt;/analyzer&gt;   &lt;/fieldType&gt; </span><span class=\"ne-text\">复制代码</span></p><ul class=\"ne-ul\"><li id=\"u99fee3ac\" data-lake-index-type=\"0\"><span class=\"ne-text\">（3） field：字段，用来创建索引,如果这个字段需要生成索引，则需要设置的indexed为true，需要存储设置stored属性为true。例如：</span></li></ul><p id=\"ud689fcea\" class=\"ne-p\"><span class=\"ne-text\">&lt;field </span><span class=\"ne-text\">name</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;age&quot;</span><span class=\"ne-text\"> type=</span><span class=\"ne-text\">&quot;pint&quot;</span><span class=\"ne-text\"> indexed=</span><span class=\"ne-text\">&quot;true&quot;</span><span class=\"ne-text\"> stored=</span><span class=\"ne-text\">&quot;true&quot;</span><span class=\"ne-text\">/&gt; </span><span class=\"ne-text\">复制代码</span></p><h3 id=\"aajOB\"><span class=\"ne-text\">3.2 添加索引字段</span></h3><ul class=\"ne-ul\"><li id=\"u589ba43a\" data-lake-index-type=\"0\"><span class=\"ne-text\">方式一：直接修改managed-schema配置文件（不推荐，修改后需要重启服务），例如：</span></li></ul><p id=\"u437b52e2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); font-size: 12px\">&lt;field </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px\">name</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); font-size: 12px\">=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;age&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); font-size: 12px\"> type=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;pint&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); font-size: 12px\"> indexed=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;true&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); font-size: 12px\"> stored=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;true&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248); font-size: 12px\">/&gt;</span></p><ul class=\"ne-ul\"><li id=\"u62849e39\" data-lake-index-type=\"0\"><span class=\"ne-text\">方式二：通过solr页面进行添加。（推荐，不需要重启服务）</span></li></ul><p id=\"u2aeba663\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">![](_v_images/20190623133627274_22114.png =811x)</span></p><h3 id=\"wfAys\"><span class=\"ne-text\">3.3 配置中文分词工具</span></h3><ul class=\"ne-ul\"><li id=\"u03813362\" data-lake-index-type=\"0\"><span class=\"ne-text\">1.下载中文分词器IKAnalyzer，</span><a href=\"https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F19_nVrOrUrj00rlu13OGOkg\" data-href=\"https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F19_nVrOrUrj00rlu13OGOkg\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">下载地址</span></a><span class=\"ne-text\">，密码：igt9。</span></li><li id=\"uda52d333\" data-lake-index-type=\"0\"><span class=\"ne-text\">2.解压压缩包包，目录如下：</span></li></ul><p id=\"u658f953b\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788037-71d0ec37-c053-45ac-a19b-1f4495e4ee58.webp\" width=\"518\" id=\"u93455122\" class=\"ne-image\"></p><ul class=\"ne-ul\"><li id=\"u1c3d5dda\" data-lake-index-type=\"0\"><span class=\"ne-text\">3.将两个jar包复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib。</span></li><li id=\"ua4de5822\" data-lake-index-type=\"0\"><span class=\"ne-text\">4.另外将三个配置文件复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\classes。如果没有classes文件夹就新建一个。</span></li><li id=\"u7880eecb\" data-lake-index-type=\"0\"><span class=\"ne-text\">5.在schema中添加分词器。</span></li></ul><pre data-language=\"shell\" id=\"Q4YIZ\" class=\"ne-codeblock language-shell\"><code>&lt;fieldType name=&quot;text_ik&quot; class=&quot;solr.TextField&quot;&gt;\n  &lt;analyzer type=&quot;index&quot;&gt;\n\t  &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;false&quot; conf=&quot;ik.conf&quot;/&gt;\n\t  &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n  &lt;/analyzer&gt;\n  &lt;analyzer type=&quot;query&quot;&gt;\n\t  &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;true&quot; conf=&quot;ik.conf&quot;/&gt;\n\t  &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n  &lt;/analyzer&gt;\n&lt;/fieldType&gt;\n</code></pre><ul class=\"ne-ul\"><li id=\"u75a0ab13\" data-lake-index-type=\"0\"><span class=\"ne-text\">6.在ext.dic文件中添加自定义的中文词组</span></li><li id=\"uf3d59ec8\" data-lake-index-type=\"0\"><span class=\"ne-text\">需要重启solr</span></li></ul><p id=\"u5453c876\" class=\"ne-p\"><span class=\"ne-text\">效果如下： </span></p><p id=\"ucff196d9\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788089-a128751b-080b-4cb5-8903-2951345cf1f8.webp\" width=\"1358\" id=\"u64162da3\" class=\"ne-image\"></p><h2 id=\"lXu1T\"><span class=\"ne-text\">四、导入索引数据（mysql数据为例）</span></h2><ul class=\"ne-ul\"><li id=\"ufb2c4b14\" data-lake-index-type=\"0\"><span class=\"ne-text\">1.创建mysql数据库</span></li></ul><p id=\"uac68de7d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788040-b8b6f2fa-b4f0-4559-a787-1a52871abc8c.webp\" width=\"692\" id=\"u59084290\" class=\"ne-image\"></p><ul class=\"ne-ul\"><li id=\"u27474c27\" data-lake-index-type=\"0\"><span class=\"ne-text\">2.在该路径下solr_home\\server\\solr\\new_core\\conf（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）下新建my-data-config.xml文件</span></li></ul><pre data-language=\"shell\" id=\"ckb8p\" class=\"ne-codeblock language-shell\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;dataConfig&gt;\n    &lt;dataSource type=&quot;JdbcDataSource&quot; driver=&quot;com.mysql.jdbc.Driver&quot; url=&quot;jdbc:mysql://localhost:3306/solr_test&quot;\n                user=&quot;root&quot; password=&quot;&quot;/&gt;\n    &lt;document&gt;\n        &lt;entity name=&quot;user&quot; query=&quot;select * from user&quot;&gt;\n            &lt;field column=&quot;id&quot; name=&quot;id&quot;/&gt;\n            &lt;field column=&quot;age&quot; name=&quot;age&quot;/&gt;\n            &lt;field column=&quot;name&quot; name=&quot;name&quot;/&gt;\n            &lt;field column=&quot;hobby&quot; name=&quot;hobby&quot;/&gt;\n        &lt;/entity&gt;\n    &lt;/document&gt;\n&lt;/dataConfig&gt;\n</code></pre><ul class=\"ne-ul\"><li id=\"ub2c7fdb5\" data-lake-index-type=\"0\"><span class=\"ne-text\">3.用solr添加数据库字段对应的索引字段，添加后打开managed-schema文件会看到：</span></li></ul><pre data-language=\"shell\" id=\"xrLYf\" class=\"ne-codeblock language-shell\"><code>&lt;field name=&quot;name&quot; type=&quot;string&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n&lt;field name=&quot;age&quot; type=&quot;pint&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n&lt;field name=&quot;hobby&quot; type=&quot;string&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n</code></pre><p id=\"uccd93892\" class=\"ne-p\"><strong><span class=\"ne-text\">请勿添加id字段，该字段已存在，添加会报错</span></strong></p><ul class=\"ne-ul\"><li id=\"u5e7950b1\" data-lake-index-type=\"0\"><span class=\"ne-text\">4.打开该路径下文件：solr_home\\server\\solr\\new_core\\conf\\solrconfig.xml（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf\\solrconfig.xml），随便找一个与requestHandler同级节点上添加以下配置。如图：</span></li></ul><p id=\"ua345c231\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789705-05706f41-625e-4027-a4d1-1cb9a19bb621.webp\" width=\"934\" id=\"u450b1c77\" class=\"ne-image\"></p><pre data-language=\"shell\" id=\"mbuMo\" class=\"ne-codeblock language-shell\"><code>&lt;requestHandler name=&quot;/dataimport&quot; class=&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;&gt;\n\t&lt;lst name=&quot;defaults&quot;&gt;\n\t\t&lt;str name=&quot;config&quot;&gt;my-data-config.xml&lt;/str&gt;\n\t&lt;/lst&gt;\n&lt;/requestHandler&gt;\n\n</code></pre><ul class=\"ne-ul\"><li id=\"ua92aab38\" data-lake-index-type=\"0\"><span class=\"ne-text\">5.将solr_home\\dist（E:\\solr-8.1.1\\dist）目录下的solr-dataimporthandler-8.1.1.jar和MySQL驱动（随便找个MySQL驱动）复制到solr_home\\server\\solr-webapp\\webapp\\WEB-INF\\lib（E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib）目录下。</span></li><li id=\"u6fd9996f\" data-lake-index-type=\"0\"><span class=\"ne-text\">6.重启solr服务。</span></li><li id=\"u5ff52e4c\" data-lake-index-type=\"0\"><span class=\"ne-text\">7.打开solr页面，进行下面操作。</span></li></ul><p id=\"uac586b0a\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789821-cd1c7622-59de-4e9a-b69c-c9ce68fdef58.webp\" width=\"1209\" id=\"uae005891\" class=\"ne-image\"></p><ul class=\"ne-ul\"><li id=\"ud43142e7\" data-lake-index-type=\"0\"><span class=\"ne-text\">8.检测数据是否导入成功</span></li></ul><p id=\"uc15bcceb\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789862-dbbacbb7-e01b-46be-bcd7-80aad8c48a24.webp\" width=\"933\" id=\"u6a98f6db\" class=\"ne-image\"></p><h3 id=\"imjeH\"><span class=\"ne-text\">如果对索引字段进行中文分词</span></h3><p id=\"uc98511d3\" class=\"ne-p\"><span class=\"ne-text\">添加对索引字段时，fileType ：选择text_ik</span></p><p id=\"ubae93715\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789803-bc546502-4fcb-43cf-a968-b9fda978fe7b.webp\" width=\"974\" id=\"u4e01f864\" class=\"ne-image\"></p><p id=\"u21ee617f\" class=\"ne-p\"><span class=\"ne-text\">效果如图： 查询 </span><strong><span class=\"ne-text\">鲁西化工</span></strong><span class=\"ne-text\"> 的结果</span></p><p id=\"u0b3c2d6e\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789921-c9625e48-e98f-4529-83f4-57a6a48b77fc.webp\" width=\"1369\" id=\"ub8eb0e9d\" class=\"ne-image\"></p><h2 id=\"X6xYa\"></h2><h2 id=\"WzEne\"><span class=\"ne-text\">七、删除索引库（删除所有数据）的两种方法</span></h2><ul class=\"ne-ul\"><li id=\"uf13025e0\" data-lake-index-type=\"0\"><span class=\"ne-text\">1.删除索引库所有数据的方法一：直接用solr可视化界面删除</span></li></ul><p id=\"u5900d264\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127790457-5b348534-e2ba-4b26-960f-80171f49d3e4.webp\" width=\"813\" id=\"u00b14a0e\" class=\"ne-image\"></p></div>",
    "body": "tags: [php,sole,搜索,全文搜索,搜索引擎,windows]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n> 在windows上使用solr全文搜索引擎\n\n<a name=\"VXwhD\"></a>\n# 安装solr\n<a name=\"cSNAt\"></a>\n## 安装jre运行环境\n已正确安装JRE运行环境。<br />JRE安装请参考《JRE安装指南》。\n<a name=\"oQsd9\"></a>\n## 下载solr\n[下载地址](https://solr.apache.org/downloads.html)：https://solr.apache.org/downloads.html ，如图所示：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127114583-33d0d408-62e0-482f-b7b6-cc5306a5be60.png#clientId=u591e7470-37f3-4&from=paste&height=680&id=u909eb52e&originHeight=751&originWidth=1151&originalType=binary&ratio=1&rotation=0&showTitle=false&size=68403&status=done&style=none&taskId=u1ee3913b-ec2f-4836-8a4e-9e37e94bca2&title=&width=1042.415131853756)\n\n或者：<br />[http://archive.apache.org/dist/lucene/solr/](http://archive.apache.org/dist/lucene/solr/)\n\n各系统适用版本见下表。\n\n| **安装包版本** | **适用系统** |\n| --- | --- |\n| solr-X.X.X-src.tgz | Solr 源代码。可在不使用官方 Git 存储库的情况下在 Solr 上进行开 |\n| solr-X.X.X.tgz | Linux/Unix/OSX |\n| solr-X.X.X.zip | Microsoft Windows |\n\n<a name=\"vAms5\"></a>\n## 安装 Solr\n**使用解压工具解压安装包，解压即可启动**。解压后目录结构如表所示：\n\n| **目录名称** | **功能** | **次级文件/文件目录** | **功能** |\n| --- | --- | --- | --- |\n| bin/ | 包含几个重要的脚本，它们将使 Solr 的使用更容易 | Solr、solr.cmd | 是Solr 的控制脚本，也称为bin/solr(*nix) / bin/solr.cmd(Windows)。此脚本是启动和停止 Solr 的首选工具。在 SolrCloud 模式下运行时，您还可以创建集合或核心、配置身份验证和使用配置文件 |\n|  |  | post | 提供了用于发布内容到Solr一个简单的命令行界面 |\n|  |  | solr.in.sh、solr.in.cmd | 是 *nix 和 Windows 系统的属性文件。Java、Jetty 和 Solr 的系统级属性在此处配置。使用bin/solr/时可以覆盖其中许多设置bin/solr.cmd，但这允许您在一个地方设置所有属性 |\n|  |  | install_solr_services.sh | 此脚本在 *nix 系统上用于将 Solr 安装为服务 |\n| contrib/ | 包括用于 Solr 特殊功能的附加插件 | / | / |\n| dist/ | 包含主要的 Solr .jar 文件 | / | / |\n| docs/ | 包含指向 Solr 的在线 Javadocs 的链接 | / | / |\n| example/ | 包含多种类型的示例，用于演示各种 Solr 功能 | / | / |\n| licenses/ | 包含 Solr 使用的第 3 方库的所有许可证 | / | / |\n| server/ | 是 Solr 应用程序的核心所在 | /solr-webapp | Solr 的UI管理 |\n|  |  | /lib | Jetty libraries |\n|  |  | /logs | 日志文件 |\n|  |  | /resources | 日志配置 |\n|  |  | /solr/configsets | 示例配置集 |\n\n<a name=\"SCLCm\"></a>\n## 启动solr\nSolr 包括一个名为bin/solr(Linux/MacOS) 或bin\\solr.cmd(Windows)的命令行界面工具。该工具允许您启动和停止 Solr、创建核心和集合、配置身份验证以及检查系统状态。<br />要使用它来启动 Solr，只需在解压后的bin目录下打开命令行，执行命令：<br />~~~<br />./solr start<br />~~~\n\n几条常用命令\n```shell\nsolr start –p 端口号 #单机版启动solr服务\nsolr restart –p 端口号 #重启solr服务\nsolr stop –p 端口号 #关闭solr服务\n\n```\n\n这将在后台启动 Solr，侦听端口 8983。当您在后台启动 Solr 时，脚本将等待以确保 Solr 正确启动，然后再返回命令行提示符。<br />启动完成后默认监听8983端口，[管理界面](http://localhost:8983/solr/)访问地址：http://localhost:8983/solr/\n<a name=\"qhKk8\"></a>\n##  停止Solr\n在bin目录下执行命令：<br />./solr stop -all<br />注：停止时必须指定端口。\n<a name=\"Iua0c\"></a>\n# 安装php扩展solr .dll\n<a name=\"z8JDw\"></a>\n## 0、环境\n\n1. 操作系统：Windows10\n2. solr: 8.9.0\n3. php：7.3 （nts）\n<a name=\"IpjiJ\"></a>\n## 1、扩展说明\n**扩展地址：**<br />[https://pecl.php.net/ ](https://pecl.php.net/ )<br />**确定线性与非线性**<br />Non Thread Safe (NTS) x64 / Thread Safe (TS) x64<br />通过phpinfo(); 查看其中的 Thread Safety 项，这个项目就是查看是否是线程安全<br />如果是：enabled，一般来说应该是ts版，否则是nts版。\n<a name=\"fx2pg\"></a>\n## <br />2、安装php扩展\n打开扩展下载地址：<br />[https://pecl.php.net/package/solr](https://pecl.php.net/package/solr)<br />选择版本后面的dll文件（我用的是2.5.1版本的dll）<br />[https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip](https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip)<br />并点击下载。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108004278-e1ac5886-8688-4801-a581-e5ebf234ea61.png#clientId=u7953d6aa-a114-4&from=paste&height=552&id=u01c49dde&originHeight=610&originWidth=1247&originalType=binary&ratio=1&rotation=0&showTitle=false&size=83774&status=done&style=none&taskId=u3ed7378b-9369-4a50-84ca-29b7e037cd1&title=&width=1129.3585312090652)<br />下载成功后，解压获取：\n\n1. php_solr.dll \n2. php_solr.pdb\n\n将压缩包的php_solr.dll、php_solr.pdb 放到你的 php 扩展目录下 php/ext/ 下。 <br />php.ini中加入 extension=php_solr.dll <br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108202536-3d93ee60-5d56-4be8-8aa3-91c280883f42.png#clientId=u7953d6aa-a114-4&from=paste&height=254&id=ua670e885&originHeight=280&originWidth=626&originalType=binary&ratio=1&rotation=0&showTitle=false&size=42409&status=done&style=none&taskId=u2e04a2ca-59af-471e-ba06-7220993c8c5&title=&width=566.9434166294104)\n\n我的集成环境位置： D:\\phpEnv\\php\\php-7.3\\ext<br />重启服务器，查看phpinfo()，<br />是否有显示solr扩展加载成功。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108254208-edbc8d29-1a2f-483b-b39e-44219d65f46d.png#clientId=u7953d6aa-a114-4&from=paste&height=601&id=u5fe2cd3d&originHeight=664&originWidth=1047&originalType=binary&ratio=1&rotation=0&showTitle=false&size=61684&status=done&style=none&taskId=u449d70c2-4b36-495c-b1b3-6b695283693&title=&width=948.2264492188382)\n<a name=\"ubnsN\"></a>\n#  常用操作\n**创建core，-c指定创建的core名**<br />./solr create -c test_core1 1<br />**删除core，-c指定删除的core名**<br />./solr delete -c test_core1\n\n![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127465096-e38fc348-6514-4fc7-a764-ce946777deb2.png#clientId=u591e7470-37f3-4&from=paste&id=ua150db6d&originHeight=575&originWidth=1267&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u7817f55c-446d-4bab-8977-7ab117c7e06&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127470711-73c2ff90-c5ed-438a-b040-e14c99ded58a.png#clientId=u591e7470-37f3-4&from=paste&id=uddf79326&originHeight=228&originWidth=640&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ua65c7a53-a5a8-4097-a2eb-dcaf0120f7b&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127476667-41a12875-1ffb-4285-bd57-21ce09aa06a6.png#clientId=u591e7470-37f3-4&from=paste&id=u801b6d25&originHeight=304&originWidth=641&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ud0110b6f-c137-4eb6-87e2-57ab7dc379c&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127481012-dc1b0ebf-6f3e-49c9-bd52-96e2259dd09e.png#clientId=u591e7470-37f3-4&from=paste&id=u17ca993b&originHeight=240&originWidth=620&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u8344ee63-3135-4bf6-b002-f9544c51bc8&title=)<br />![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127485301-62701194-113b-487c-92be-12289aabb291.png#clientId=u591e7470-37f3-4&from=paste&id=u9b3fd6ae&originHeight=300&originWidth=446&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uebc5e4ad-238f-4943-b6bc-4c5eb294d5f&title=)\n\n<a name=\"VJyoE\"></a>\n## 二、创建核心\n<a name=\"TTO9Q\"></a>\n### 2.1 创建核心前准备工作\n每个核心都是solr的一个实例，一个solr服务可以创建多个核心，每个核心都可以进行自己独立配置。\n\n- 1.切换至solr_home\\server\\solr目录，例如：E:\\solr-8.1.1\\server\\solr，在该目录下创建一个文件夹，文件夹名称与核心名称相同。 ![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788037-3dd84813-0a7f-456b-a0e1-57e0833147f6.webp#clientId=u591e7470-37f3-4&from=paste&id=uc850f99b&originHeight=300&originWidth=814&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u93f16027-4409-4e7c-ac5d-17010743d21&title=)_v_images/2019062\n- 2.将E:\\solr-8.1.1\\server\\solr\\configsets_default路径下的conf文件夹复制到new_core目录（E:\\solr-8.1.1\\server\\solr\\new_core）下。\n<a name=\"V73sY\"></a>\n### 2.2 创建核心\n<a name=\"ADKrG\"></a>\n#### 方式一：打开solr界面，进行如图顺序操作。\n这种方式 需要 在 E:\\solr-8.1.1\\server\\solr 目录下创建 new_core文件夹<br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788016-424a695c-b554-4066-b999-736c33b8b2c3.webp#clientId=u591e7470-37f3-4&from=paste&id=u72b236cd&originHeight=618&originWidth=1300&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u7c769d2b-f93a-425b-9906-0a60d499df7&title=)\n<a name=\"sdYns\"></a>\n#### 方式二：bin目录下输入命令：solr create -c new_core （推荐）\n<a name=\"EQ2RX\"></a>\n## 三、schema\n每个核心core中都有这么一个 schema配置文件。 schema文件可以对索引库的数据类型进行定义，对字段是否进行索引、存储等进行配置，需要针对狠心单独进行配置。 schema的数据类型进本够用，如果不能满足需求，比如说对中文分词、拼音分词等，就可以自定义分词器。 Solr8.1.1 的schema的配置文件名 为managed-schema,home\\server\\solr\\new_core\\conf\\managed-schema（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）。\n<a name=\"ua5cy\"></a>\n### 3.1 schema主要成员\n\n- （1） fieldType：为field定义类型，最主要作用是定义分词器，分词器决定着如何从文档中检索关键字。\n- （2） analyzer：fieldType的子元素，是分词器，由tokenizer和filter组成。例如\n\n<fieldType name=\"text_tr\" class=\"solr.TextField\" positionIncrementGap=\"100\">     <analyzer>       <tokenizer class=\"solr.StandardTokenizerFactory\"/>       <filter class=\"solr.TurkishLowerCaseFilterFactory\"/>       <filter class=\"solr.StopFilterFactory\" words=\"lang/stopwords_tr.txt\" ignoreCase=\"false\"/>       <filter class=\"solr.SnowballPorterFilterFactory\" language=\"Turkish\"/>     </analyzer>   </fieldType> 复制代码\n\n- （3） field：字段，用来创建索引,如果这个字段需要生成索引，则需要设置的indexed为true，需要存储设置stored属性为true。例如：\n\n<field name=\"age\" type=\"pint\" indexed=\"true\" stored=\"true\"/> 复制代码\n<a name=\"aajOB\"></a>\n### 3.2 添加索引字段\n\n- 方式一：直接修改managed-schema配置文件（不推荐，修改后需要重启服务），例如：\n\n<field name=\"age\" type=\"pint\" indexed=\"true\" stored=\"true\"/>\n\n- 方式二：通过solr页面进行添加。（推荐，不需要重启服务）\n\n![](_v_images/20190623133627274_22114.png =811x)\n<a name=\"wfAys\"></a>\n### 3.3 配置中文分词工具\n\n- 1.下载中文分词器IKAnalyzer，[下载地址](https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F19_nVrOrUrj00rlu13OGOkg)，密码：igt9。\n- 2.解压压缩包包，目录如下：\n\n![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788037-71d0ec37-c053-45ac-a19b-1f4495e4ee58.webp#clientId=u591e7470-37f3-4&from=paste&id=u93455122&originHeight=138&originWidth=518&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u2185b132-c94c-49dd-af88-fd0f403e627&title=)\n\n- 3.将两个jar包复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib。\n- 4.另外将三个配置文件复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\classes。如果没有classes文件夹就新建一个。\n- 5.在schema中添加分词器。\n```shell\n<fieldType name=\"text_ik\" class=\"solr.TextField\">\n  <analyzer type=\"index\">\n\t  <tokenizer class=\"org.wltea.analyzer.lucene.IKTokenizerFactory\" useSmart=\"false\" conf=\"ik.conf\"/>\n\t  <filter class=\"solr.LowerCaseFilterFactory\"/>\n  </analyzer>\n  <analyzer type=\"query\">\n\t  <tokenizer class=\"org.wltea.analyzer.lucene.IKTokenizerFactory\" useSmart=\"true\" conf=\"ik.conf\"/>\n\t  <filter class=\"solr.LowerCaseFilterFactory\"/>\n  </analyzer>\n</fieldType>\n\n```\n\n- 6.在ext.dic文件中添加自定义的中文词组\n- 需要重启solr\n\n效果如下： <br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788089-a128751b-080b-4cb5-8903-2951345cf1f8.webp#clientId=u591e7470-37f3-4&from=paste&id=u64162da3&originHeight=699&originWidth=1358&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u40384c2d-3fcf-4d16-8162-bbc5c27fa9c&title=)\n<a name=\"lXu1T\"></a>\n## 四、导入索引数据（mysql数据为例）\n\n- 1.创建mysql数据库\n\n![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788040-b8b6f2fa-b4f0-4559-a787-1a52871abc8c.webp#clientId=u591e7470-37f3-4&from=paste&id=u59084290&originHeight=236&originWidth=692&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u42bbddfe-6bf1-4bc2-9055-a0ea4b5a550&title=)\n\n- 2.在该路径下solr_home\\server\\solr\\new_core\\conf（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）下新建my-data-config.xml文件\n```shell\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<dataConfig>\n    <dataSource type=\"JdbcDataSource\" driver=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://localhost:3306/solr_test\"\n                user=\"root\" password=\"\"/>\n    <document>\n        <entity name=\"user\" query=\"select * from user\">\n            <field column=\"id\" name=\"id\"/>\n            <field column=\"age\" name=\"age\"/>\n            <field column=\"name\" name=\"name\"/>\n            <field column=\"hobby\" name=\"hobby\"/>\n        </entity>\n    </document>\n</dataConfig>\n\n```\n\n- 3.用solr添加数据库字段对应的索引字段，添加后打开managed-schema文件会看到：\n```shell\n<field name=\"name\" type=\"string\" indexed=\"true\" stored=\"true\"/>\n<field name=\"age\" type=\"pint\" indexed=\"true\" stored=\"true\"/>\n<field name=\"hobby\" type=\"string\" indexed=\"true\" stored=\"true\"/>\n\n```\n**请勿添加id字段，该字段已存在，添加会报错**\n\n- 4.打开该路径下文件：solr_home\\server\\solr\\new_core\\conf\\solrconfig.xml（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf\\solrconfig.xml），随便找一个与requestHandler同级节点上添加以下配置。如图：\n\n![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789705-05706f41-625e-4027-a4d1-1cb9a19bb621.webp#clientId=u591e7470-37f3-4&from=paste&id=u450b1c77&originHeight=236&originWidth=934&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u46162f86-3d9e-4302-97bd-de0e839379b&title=)\n```shell\n<requestHandler name=\"/dataimport\" class=\"org.apache.solr.handler.dataimport.DataImportHandler\">\n\t<lst name=\"defaults\">\n\t\t<str name=\"config\">my-data-config.xml</str>\n\t</lst>\n</requestHandler>\n\n\n```\n\n- 5.将solr_home\\dist（E:\\solr-8.1.1\\dist）目录下的solr-dataimporthandler-8.1.1.jar和MySQL驱动（随便找个MySQL驱动）复制到solr_home\\server\\solr-webapp\\webapp\\WEB-INF\\lib（E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib）目录下。\n- 6.重启solr服务。\n- 7.打开solr页面，进行下面操作。\n\n![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789821-cd1c7622-59de-4e9a-b69c-c9ce68fdef58.webp#clientId=u591e7470-37f3-4&from=paste&id=uae005891&originHeight=664&originWidth=1209&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u2cc0c352-2afe-4061-944a-cee608cb397&title=)\n\n- 8.检测数据是否导入成功\n\n![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789862-dbbacbb7-e01b-46be-bcd7-80aad8c48a24.webp#clientId=u591e7470-37f3-4&from=paste&id=u6a98f6db&originHeight=704&originWidth=933&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u0a7e4698-424e-449d-9eaa-47f921414b1&title=)\n<a name=\"imjeH\"></a>\n### 如果对索引字段进行中文分词\n添加对索引字段时，fileType ：选择text_ik<br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789803-bc546502-4fcb-43cf-a968-b9fda978fe7b.webp#clientId=u591e7470-37f3-4&from=paste&id=u4e01f864&originHeight=721&originWidth=974&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u6b78e123-0319-4dda-9b2c-1c44ee53a2a&title=)<br />效果如图： 查询 **鲁西化工** 的结果<br />![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789921-c9625e48-e98f-4529-83f4-57a6a48b77fc.webp#clientId=u591e7470-37f3-4&from=paste&id=ub8eb0e9d&originHeight=854&originWidth=1369&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ua8e921d1-371b-47bf-a129-19bd9fc6cba&title=)\n<a name=\"X6xYa\"></a>\n## \n<a name=\"WzEne\"></a>\n## 七、删除索引库（删除所有数据）的两种方法\n\n- 1.删除索引库所有数据的方法一：直接用solr可视化界面删除\n\n![](https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127790457-5b348534-e2ba-4b26-960f-80171f49d3e4.webp#clientId=u591e7470-37f3-4&from=paste&id=u00b14a0e&originHeight=513&originWidth=813&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u3e1c5470-5f3a-448f-8f88-556681399a8&title=)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,sole,搜索,全文搜索,搜索引擎,windows]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在windows上使用solr全文搜索引擎</span></p></div><h1 id=\"VXwhD\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">安装solr</span></h1><h2 id=\"cSNAt\"><span class=\"ne-text\">安装jre运行环境</span></h2><p id=\"u1e4fa6d8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">已正确安装JRE运行环境。</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">JRE安装请参考《JRE安装指南》。</span></p><h2 id=\"oQsd9\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77)\">下载solr</span></h2><p id=\"uc86264db\" class=\"ne-p\"><a href=\"https://solr.apache.org/downloads.html\" data-href=\"https://solr.apache.org/downloads.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">下载地址</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">：https://solr.apache.org/downloads.html ，如图所示：</span></p><p id=\"uaa8b40ba\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127114583-33d0d408-62e0-482f-b7b6-cc5306a5be60.png\" width=\"1042.415131853756\" id=\"u909eb52e\" class=\"ne-image\"></p><p id=\"uab1e2544\" class=\"ne-p\"><br></p><p id=\"ud91d5a73\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">或者：</span></p><p id=\"u6d47ef0f\" class=\"ne-p\"><a href=\"http://archive.apache.org/dist/lucene/solr/\" data-href=\"http://archive.apache.org/dist/lucene/solr/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://archive.apache.org/dist/lucene/solr/</span></a></p><p id=\"u69a1eee3\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"></span></p><p id=\"u3ad94350\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">各系统适用版本见下表。</span></p><table id=\"PnaTH\" class=\"ne-table\" style=\"width: 588px\"><tbody><tr style=\"height: 33px\"><td width=\"213\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"ua0e9d1d9\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">安装包版本</span></strong></p></td><td width=\"375\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"uddc0b838\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">适用系统</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"213\"><p id=\"u258c73d1\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr-X.X.X-src.tgz</span></p></td><td width=\"375\"><p id=\"u14992689\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Solr 源代码。可在不使用官方 Git 存储库的情况下在 Solr 上进行开</span></p></td></tr><tr style=\"height: 33px\"><td width=\"213\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u017c1f1d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr-X.X.X.tgz</span></p></td><td width=\"375\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u0c4ca193\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Linux/Unix/OSX</span></p></td></tr><tr style=\"height: 33px\"><td width=\"213\"><p id=\"u72ed4990\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr-X.X.X.zip</span></p></td><td width=\"375\"><p id=\"u1f6b63c7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Microsoft Windows</span></p></td></tr></tbody></table><h2 id=\"vAms5\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">安装 Solr</span></h2><p id=\"u3e0cffc5\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">使用解压工具解压安装包，解压即可启动</span></strong><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">。解压后目录结构如表所示：</span></p><table id=\"YGBm2\" class=\"ne-table\" style=\"width: 734px\"><tbody><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u396374ed\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">目录名称</span></strong></p></td><td width=\"136\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"ub6b79c7e\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">功能</span></strong></p></td><td width=\"148\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u852bc4e6\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">次级文件/文件目录</span></strong></p></td><td width=\"309\" style=\"background-color: rgb(239, 243, 245)\"><p id=\"u472e0558\" class=\"ne-p\" style=\"text-align: center\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">功能</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"udd7773a7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">bin/</span></p></td><td width=\"136\"><p id=\"u1d75103d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含几个重要的脚本，它们将使 Solr 的使用更容易</span></p></td><td width=\"148\"><p id=\"ua1c7ee72\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Solr、solr.cmd</span></p></td><td width=\"309\"><p id=\"ua581946f\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">是Solr 的控制脚本，也称为bin/solr(*nix) / bin/solr.cmd(Windows)。此脚本是启动和停止 Solr 的首选工具。在 SolrCloud 模式下运行时，您还可以创建集合或核心、配置身份验证和使用配置文件</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ucf005fc6\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">post</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u65be496d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">提供了用于发布内容到Solr一个简单的命令行界面</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"></td><td width=\"136\"></td><td width=\"148\"><p id=\"uba3fc9e6\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">solr.in.sh、solr.in.cmd</span></p></td><td width=\"309\"><p id=\"ubf3e4724\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">是 *nix 和 Windows 系统的属性文件。Java、Jetty 和 Solr 的系统级属性在此处配置。使用bin/solr/时可以覆盖其中许多设置bin/solr.cmd，但这允许您在一个地方设置所有属性</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc3e5c866\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">install_solr_services.sh</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc5a7b0ed\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">此脚本在 *nix 系统上用于将 Solr 安装为服务</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"u01421361\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">contrib/</span></p></td><td width=\"136\"><p id=\"u2b44c245\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包括用于 Solr 特殊功能的附加插件</span></p></td><td width=\"148\"><p id=\"u0dea3cf7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\"><p id=\"u4f87883e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u211d89e9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">dist/</span></p></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u6d09fd39\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含主要的 Solr .jar 文件</span></p></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ude6c7ce9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u2381ed57\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"u88189de9\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">docs/</span></p></td><td width=\"136\"><p id=\"uf6f004ae\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含指向 Solr 的在线 Javadocs 的链接</span></p></td><td width=\"148\"><p id=\"u5177e398\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\"><p id=\"ud702f0b0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u15e01cc0\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">example/</span></p></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uf99e7a8c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含多种类型的示例，用于演示各种 Solr 功能</span></p></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u521abc8d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u8773d6c3\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"><p id=\"u6848edd5\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">licenses/</span></p></td><td width=\"136\"><p id=\"u713ce39e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">包含 Solr 使用的第 3 方库的所有许可证</span></p></td><td width=\"148\"><p id=\"u9e88ca32\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td><td width=\"309\"><p id=\"uc6933346\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ueb44774e\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">server/</span></p></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"uc37acf5c\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">是 Solr 应用程序的核心所在</span></p></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u3872d735\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/solr-webapp</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u81b60185\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Solr 的UI管理</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"></td><td width=\"136\"></td><td width=\"148\"><p id=\"u18aa55d2\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/lib</span></p></td><td width=\"309\"><p id=\"u2f5f6aa7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">Jetty libraries</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u4c39d54d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/logs</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"ud5b1c98d\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">日志文件</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\"></td><td width=\"136\"></td><td width=\"148\"><p id=\"u7d274976\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/resources</span></p></td><td width=\"309\"><p id=\"u0d77c1b7\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">日志配置</span></p></td></tr><tr style=\"height: 33px\"><td width=\"141\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"136\" style=\"background-color: rgb(247, 247, 247)\"></td><td width=\"148\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u553203c1\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">/solr/configsets</span></p></td><td width=\"309\" style=\"background-color: rgb(247, 247, 247)\"><p id=\"u7fad7387\" class=\"ne-p\" style=\"text-align: center\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); font-size: 14px\">示例配置集</span></p></td></tr></tbody></table><h2 id=\"SCLCm\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">启动solr</span></h2><p id=\"u43e9b43e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">Solr 包括一个名为bin/solr(Linux/MacOS) 或bin\\solr.cmd(Windows)的命令行界面工具。该工具允许您启动和停止 Solr、创建核心和集合、配置身份验证以及检查系统状态。<br />要使用它来启动 Solr，只需在解压后的bin目录下打开命令行，执行命令：</span></p><p id=\"u417f21b3\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\">~~~</span></p><p id=\"u3abc1e74\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">.</span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">/</span><span class=\"ne-text\" style=\"font-size: 14px; color: unset; background-color: rgb(250, 250, 250)\">solr </span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(221, 74, 104); background-color: rgb(250, 250, 250)\">start</span><span class=\"ne-text\" style=\"font-size: 14px; color: unset; background-color: rgb(250, 250, 250)\"></span></p><p id=\"u3eff5a9c\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; background-color: rgb(250, 250, 250); color: rgb(153, 153, 153)\">~~~</span></p><p id=\"u0ec4abd2\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; background-color: rgb(250, 250, 250); color: rgb(153, 153, 153)\"></span></p><p id=\"u6768a136\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; background-color: rgb(250, 250, 250); color: rgb(153, 153, 153)\">几条常用命令</span></p><pre data-language=\"shell\" id=\"xuoqf\" class=\"ne-codeblock language-shell\">solr start –p 端口号 #单机版启动solr服务\nsolr restart –p 端口号 #重启solr服务\nsolr stop –p 端口号 #关闭solr服务\n</pre><p id=\"u49a59769\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; background-color: rgb(250, 250, 250); color: rgb(153, 153, 153)\"></span></p><p id=\"ue5c2fa2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">这将在后台启动 Solr，侦听端口 8983。当您在后台启动 Solr 时，脚本将等待以确保 Solr 正确启动，然后再返回命令行提示符。<br />启动完成后默认监听8983端口，</span><a href=\"http://localhost:8983/solr/\" data-href=\"http://localhost:8983/solr/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">管理界面</span></a><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">访问地址：http://localhost:8983/solr/</span></p><h2 id=\"qhKk8\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\"> 停止Solr</span></h2><p id=\"u3542548e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">在bin目录下执行命令：</span></p><p id=\"u2641753e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">.</span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">/</span><span class=\"ne-text\" style=\"font-size: 14px; color: unset; background-color: rgb(250, 250, 250)\">solr stop </span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">-</span><span class=\"ne-text\" style=\"font-size: 14px; color: unset; background-color: rgb(250, 250, 250)\">all</span></p><p id=\"ua5cc1d62\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">注：停止时必须指定端口。</span></p><h1 id=\"Iua0c\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">安装php扩展solr .dll</span></h1><h2 id=\"z8JDw\"><span class=\"ne-text\">0、环境</span></h2><ol class=\"ne-ol\"><li id=\"uf41e38cb\"><span class=\"ne-text\">操作系统：Windows10</span></li><li id=\"ubdc76fa0\"><span class=\"ne-text\">solr: 8.9.0</span></li><li id=\"u129d8e1d\"><span class=\"ne-text\">php：7.3 （nts）</span></li></ol><h2 id=\"IpjiJ\"><span class=\"ne-text\">1、扩展说明</span></h2><p id=\"u837eb9ba\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px\">扩展地址：</span></strong></p><p id=\"ub7458288\" class=\"ne-p\"><a href=\"https://pecl.php.net/ \" data-href=\"https://pecl.php.net/ \" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\" style=\"background-color: rgb(250, 250, 250); font-size: 14px\">https://pecl.php.net/ </span></a><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 16px\">确定线性与非线性</span></strong></p><p id=\"u9872813b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">Non Thread Safe </span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">(</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">NTS</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">)</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\"> x64 / Thread Safe </span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">(</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">TS</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">)</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\"> x64</span></p><p id=\"ud7652bab\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">通过phpinfo</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">();</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\"> 查看其中的 Thread Safety 项，这个项目就是查看是否是线程安全</span></p><p id=\"u52a902c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">如果是：enabled，一般来说应该是ts版，否则是nts版。</span></p><h2 id=\"fx2pg\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">2、安装php扩展</span></h2><p id=\"u0a760b49\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">打开扩展下载地址：</span></p><p id=\"u5eb89714\" class=\"ne-p\"><a href=\"https://pecl.php.net/package/solr\" data-href=\"https://pecl.php.net/package/solr\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://pecl.php.net/package/solr</span></a></p><p id=\"ua87a1f73\" class=\"ne-p\"><span class=\"ne-text\">选择版本后面的dll文件（我用的是2.5.1版本的dll）</span></p><p id=\"u01add59f\" class=\"ne-p\"><a href=\"https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip\" data-href=\"https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip</span></a></p><p id=\"uc868fc4f\" class=\"ne-p\"><span class=\"ne-text\">并点击下载。</span></p><p id=\"u46521b77\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108004278-e1ac5886-8688-4801-a581-e5ebf234ea61.png\" width=\"1129.3585312090652\" id=\"u01c49dde\" class=\"ne-image\"></p><p id=\"u3d71c879\" class=\"ne-p\"><span class=\"ne-text\">下载成功后，解压获取：</span></p><ol class=\"ne-ol\"><li id=\"u3ef26699\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php_solr.dll </span></li><li id=\"u5ae30239\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php_solr.pdb</span></li></ol><p id=\"uc3bf10c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">将压缩包的php_solr.dll、php_solr.pdb 放到你的 php 扩展目录下 php/ext/ 下。 </span></p><p id=\"u0998959a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php.ini中加入 extension</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">php_solr.dll </span></p><p id=\"u95499e03\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108202536-3d93ee60-5d56-4be8-8aa3-91c280883f42.png\" width=\"566.9434166294104\" id=\"ua670e885\" class=\"ne-image\"></p><p id=\"u0d566327\" class=\"ne-p\"><br></p><p id=\"u3e020436\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">我的集成环境位置： </span><span class=\"ne-text\">D:\\phpEnv\\php\\php-7.3\\ext</span></p><p id=\"ue259552e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">重启服务器，查看phpinfo</span><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); font-size: 14px\">()</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">，</span></p><p id=\"u34e55f85\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250); font-size: 14px\">是否有显示solr扩展加载成功。</span></p><p id=\"u1f14ff00\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658108254208-edbc8d29-1a2f-483b-b39e-44219d65f46d.png\" width=\"948.2264492188382\" id=\"u5fe2cd3d\" class=\"ne-image\"></p><h1 id=\"ubnsN\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\"> 常用操作</span></h1><p id=\"ub847aa3c\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">创建core，-c指定创建的core名</span></strong></p><p id=\"u1d5d2eb1\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">.</span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">/</span><span class=\"ne-text\" style=\"font-size: 14px; color: unset; background-color: rgb(250, 250, 250)\">solr create </span><span class=\"ne-text\" style=\"font-size: 14px; color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">-</span><span class=\"ne-text\" style=\"font-size: 14px; color: unset; background-color: rgb(250, 250, 250)\">c test_core1 </span><span class=\"ne-text\" style=\"font-size: 16px; background-color: rgb(250, 250, 250); color: rgb(153, 153, 153)\">1</span></p><p id=\"uba8472b6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">删除core，-c指定删除的core名</span></strong></p><p id=\"u2e63b801\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">.</span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89)\">/</span><span class=\"ne-text\">solr delete </span><span class=\"ne-text\" style=\"color: rgb(166, 127, 89)\">-</span><span class=\"ne-text\">c test_core1</span></p><p id=\"ufb0f8658\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"udff107a2\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127465096-e38fc348-6514-4fc7-a764-ce946777deb2.png\" width=\"1267\" id=\"ua150db6d\" class=\"ne-image\"></p><p id=\"ua76c3951\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127470711-73c2ff90-c5ed-438a-b040-e14c99ded58a.png\" width=\"640\" id=\"uddf79326\" class=\"ne-image\"></p><p id=\"u177831bf\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127476667-41a12875-1ffb-4285-bd57-21ce09aa06a6.png\" width=\"641\" id=\"u801b6d25\" class=\"ne-image\"></p><p id=\"u44e10ea5\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127481012-dc1b0ebf-6f3e-49c9-bd52-96e2259dd09e.png\" width=\"620\" id=\"u17ca993b\" class=\"ne-image\"></p><p id=\"u5e3ef02b\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1658127485301-62701194-113b-487c-92be-12289aabb291.png\" width=\"446\" id=\"u9b3fd6ae\" class=\"ne-image\"></p><p id=\"ubc4e595a\" class=\"ne-p\"><br></p><h2 id=\"VJyoE\"><span class=\"ne-text\">二、创建核心</span></h2><h3 id=\"TTO9Q\"><span class=\"ne-text\">2.1 创建核心前准备工作</span></h3><p id=\"ua27a148e\" class=\"ne-p\"><span class=\"ne-text\">每个核心都是solr的一个实例，一个solr服务可以创建多个核心，每个核心都可以进行自己独立配置。</span></p><ul class=\"ne-ul\"><li id=\"ud8f8b0e3\"><span class=\"ne-text\">1.切换至solr_home\\server\\solr目录，例如：E:\\solr-8.1.1\\server\\solr，在该目录下创建一个文件夹，文件夹名称与核心名称相同。 </span><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788037-3dd84813-0a7f-456b-a0e1-57e0833147f6.webp\" width=\"814\" id=\"uc850f99b\" class=\"ne-image\"><span class=\"ne-text\">_v_images/2019062</span></li><li id=\"u6800eb5d\"><span class=\"ne-text\">2.将E:\\solr-8.1.1\\server\\solr\\configsets_default路径下的conf文件夹复制到new_core目录（E:\\solr-8.1.1\\server\\solr\\new_core）下。</span></li></ul><h3 id=\"V73sY\"><span class=\"ne-text\">2.2 创建核心</span></h3><h4 id=\"ADKrG\"><span class=\"ne-text\">方式一：打开solr界面，进行如图顺序操作。</span></h4><p id=\"u8c2718b2\" class=\"ne-p\"><span class=\"ne-text\">这种方式 需要 在 E:\\solr-8.1.1\\server\\solr 目录下创建 new_core文件夹</span></p><p id=\"u69200590\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788016-424a695c-b554-4066-b999-736c33b8b2c3.webp\" width=\"1300\" id=\"u72b236cd\" class=\"ne-image\"></p><h4 id=\"sdYns\"><span class=\"ne-text\">方式二：bin目录下输入命令：solr create -c new_core （推荐）</span></h4><h2 id=\"EQ2RX\"><span class=\"ne-text\">三、schema</span></h2><p id=\"u425c0069\" class=\"ne-p\"><span class=\"ne-text\">每个核心core中都有这么一个 schema配置文件。 schema文件可以对索引库的数据类型进行定义，对字段是否进行索引、存储等进行配置，需要针对狠心单独进行配置。 schema的数据类型进本够用，如果不能满足需求，比如说对中文分词、拼音分词等，就可以自定义分词器。 Solr8.1.1 的schema的配置文件名 为managed-schema,home\\server\\solr\\new_core\\conf\\managed-schema（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）。</span></p><h3 id=\"ua5cy\"><span class=\"ne-text\">3.1 schema主要成员</span></h3><ul class=\"ne-ul\"><li id=\"ud4baf83f\"><span class=\"ne-text\">（1） fieldType：为field定义类型，最主要作用是定义分词器，分词器决定着如何从文档中检索关键字。</span></li><li id=\"u02bf10c1\"><span class=\"ne-text\">（2） analyzer：fieldType的子元素，是分词器，由tokenizer和filter组成。例如</span></li></ul><p id=\"ub7d66cd0\" class=\"ne-p\"><span class=\"ne-text\">&lt;fieldType </span><span class=\"ne-text\">name</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;text_tr&quot;</span><span class=\"ne-text\"> class=</span><span class=\"ne-text\">&quot;solr.TextField&quot;</span><span class=\"ne-text\"> positionIncrementGap=</span><span class=\"ne-text\">&quot;100&quot;</span><span class=\"ne-text\">&gt;     &lt;analyzer&gt;       &lt;tokenizer </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.StandardTokenizerFactory&quot;</span><span class=\"ne-text\">/&gt;       &lt;filter </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.TurkishLowerCaseFilterFactory&quot;</span><span class=\"ne-text\">/&gt;       &lt;filter </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.StopFilterFactory&quot;</span><span class=\"ne-text\"> words=</span><span class=\"ne-text\">&quot;lang/stopwords_tr.txt&quot;</span><span class=\"ne-text\"> ignoreCase=</span><span class=\"ne-text\">&quot;false&quot;</span><span class=\"ne-text\">/&gt;       &lt;filter </span><span class=\"ne-text\">class</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;solr.SnowballPorterFilterFactory&quot;</span><span class=\"ne-text\"> language=</span><span class=\"ne-text\">&quot;Turkish&quot;</span><span class=\"ne-text\">/&gt;     &lt;/analyzer&gt;   &lt;/fieldType&gt; </span><span class=\"ne-text\">复制代码</span></p><ul class=\"ne-ul\"><li id=\"u99fee3ac\"><span class=\"ne-text\">（3） field：字段，用来创建索引,如果这个字段需要生成索引，则需要设置的indexed为true，需要存储设置stored属性为true。例如：</span></li></ul><p id=\"ud689fcea\" class=\"ne-p\"><span class=\"ne-text\">&lt;field </span><span class=\"ne-text\">name</span><span class=\"ne-text\">=</span><span class=\"ne-text\">&quot;age&quot;</span><span class=\"ne-text\"> type=</span><span class=\"ne-text\">&quot;pint&quot;</span><span class=\"ne-text\"> indexed=</span><span class=\"ne-text\">&quot;true&quot;</span><span class=\"ne-text\"> stored=</span><span class=\"ne-text\">&quot;true&quot;</span><span class=\"ne-text\">/&gt; </span><span class=\"ne-text\">复制代码</span></p><h3 id=\"aajOB\"><span class=\"ne-text\">3.2 添加索引字段</span></h3><ul class=\"ne-ul\"><li id=\"u589ba43a\"><span class=\"ne-text\">方式一：直接修改managed-schema配置文件（不推荐，修改后需要重启服务），例如：</span></li></ul><p id=\"u437b52e2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px; background-color: rgb(248, 248, 248)\">&lt;field </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px\">name</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px; background-color: rgb(248, 248, 248)\">=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;age&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px; background-color: rgb(248, 248, 248)\"> type=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;pint&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px; background-color: rgb(248, 248, 248)\"> indexed=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;true&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px; background-color: rgb(248, 248, 248)\"> stored=</span><span class=\"ne-text\" style=\"color: rgb(221, 17, 68); font-size: 12px\">&quot;true&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 12px; background-color: rgb(248, 248, 248)\">/&gt;</span></p><ul class=\"ne-ul\"><li id=\"u62849e39\"><span class=\"ne-text\">方式二：通过solr页面进行添加。（推荐，不需要重启服务）</span></li></ul><p id=\"u2aeba663\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">![](_v_images/20190623133627274_22114.png =811x)</span></p><h3 id=\"wfAys\"><span class=\"ne-text\">3.3 配置中文分词工具</span></h3><ul class=\"ne-ul\"><li id=\"u03813362\"><span class=\"ne-text\">1.下载中文分词器IKAnalyzer，</span><a href=\"https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F19_nVrOrUrj00rlu13OGOkg\" data-href=\"https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F19_nVrOrUrj00rlu13OGOkg\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">下载地址</span></a><span class=\"ne-text\">，密码：igt9。</span></li><li id=\"uda52d333\"><span class=\"ne-text\">2.解压压缩包包，目录如下：</span></li></ul><p id=\"u658f953b\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788037-71d0ec37-c053-45ac-a19b-1f4495e4ee58.webp\" width=\"518\" id=\"u93455122\" class=\"ne-image\"></p><ul class=\"ne-ul\"><li id=\"u1c3d5dda\"><span class=\"ne-text\">3.将两个jar包复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib。</span></li><li id=\"ua4de5822\"><span class=\"ne-text\">4.另外将三个配置文件复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\classes。如果没有classes文件夹就新建一个。</span></li><li id=\"u7880eecb\"><span class=\"ne-text\">5.在schema中添加分词器。</span></li></ul><pre data-language=\"shell\" id=\"Q4YIZ\" class=\"ne-codeblock language-shell\">&lt;fieldType name=&quot;text_ik&quot; class=&quot;solr.TextField&quot;&gt;\n  &lt;analyzer type=&quot;index&quot;&gt;\n\t  &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;false&quot; conf=&quot;ik.conf&quot;/&gt;\n\t  &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n  &lt;/analyzer&gt;\n  &lt;analyzer type=&quot;query&quot;&gt;\n\t  &lt;tokenizer class=&quot;org.wltea.analyzer.lucene.IKTokenizerFactory&quot; useSmart=&quot;true&quot; conf=&quot;ik.conf&quot;/&gt;\n\t  &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n  &lt;/analyzer&gt;\n&lt;/fieldType&gt;\n</pre><ul class=\"ne-ul\"><li id=\"u75a0ab13\"><span class=\"ne-text\">6.在ext.dic文件中添加自定义的中文词组</span></li><li id=\"uf3d59ec8\"><span class=\"ne-text\">需要重启solr</span></li></ul><p id=\"u5453c876\" class=\"ne-p\"><span class=\"ne-text\">效果如下： </span></p><p id=\"ucff196d9\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788089-a128751b-080b-4cb5-8903-2951345cf1f8.webp\" width=\"1358\" id=\"u64162da3\" class=\"ne-image\"></p><h2 id=\"lXu1T\"><span class=\"ne-text\">四、导入索引数据（mysql数据为例）</span></h2><ul class=\"ne-ul\"><li id=\"ufb2c4b14\"><span class=\"ne-text\">1.创建mysql数据库</span></li></ul><p id=\"uac68de7d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127788040-b8b6f2fa-b4f0-4559-a787-1a52871abc8c.webp\" width=\"692\" id=\"u59084290\" class=\"ne-image\"></p><ul class=\"ne-ul\"><li id=\"u27474c27\"><span class=\"ne-text\">2.在该路径下solr_home\\server\\solr\\new_core\\conf（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）下新建my-data-config.xml文件</span></li></ul><pre data-language=\"shell\" id=\"ckb8p\" class=\"ne-codeblock language-shell\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;dataConfig&gt;\n    &lt;dataSource type=&quot;JdbcDataSource&quot; driver=&quot;com.mysql.jdbc.Driver&quot; url=&quot;jdbc:mysql://localhost:3306/solr_test&quot;\n                user=&quot;root&quot; password=&quot;&quot;/&gt;\n    &lt;document&gt;\n        &lt;entity name=&quot;user&quot; query=&quot;select * from user&quot;&gt;\n            &lt;field column=&quot;id&quot; name=&quot;id&quot;/&gt;\n            &lt;field column=&quot;age&quot; name=&quot;age&quot;/&gt;\n            &lt;field column=&quot;name&quot; name=&quot;name&quot;/&gt;\n            &lt;field column=&quot;hobby&quot; name=&quot;hobby&quot;/&gt;\n        &lt;/entity&gt;\n    &lt;/document&gt;\n&lt;/dataConfig&gt;\n</pre><ul class=\"ne-ul\"><li id=\"ub2c7fdb5\"><span class=\"ne-text\">3.用solr添加数据库字段对应的索引字段，添加后打开managed-schema文件会看到：</span></li></ul><pre data-language=\"shell\" id=\"xrLYf\" class=\"ne-codeblock language-shell\">&lt;field name=&quot;name&quot; type=&quot;string&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n&lt;field name=&quot;age&quot; type=&quot;pint&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n&lt;field name=&quot;hobby&quot; type=&quot;string&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt;\n</pre><p id=\"uccd93892\" class=\"ne-p\"><strong><span class=\"ne-text\">请勿添加id字段，该字段已存在，添加会报错</span></strong></p><ul class=\"ne-ul\"><li id=\"u5e7950b1\"><span class=\"ne-text\">4.打开该路径下文件：solr_home\\server\\solr\\new_core\\conf\\solrconfig.xml（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf\\solrconfig.xml），随便找一个与requestHandler同级节点上添加以下配置。如图：</span></li></ul><p id=\"ua345c231\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789705-05706f41-625e-4027-a4d1-1cb9a19bb621.webp\" width=\"934\" id=\"u450b1c77\" class=\"ne-image\"></p><pre data-language=\"shell\" id=\"mbuMo\" class=\"ne-codeblock language-shell\">&lt;requestHandler name=&quot;/dataimport&quot; class=&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;&gt;\n\t&lt;lst name=&quot;defaults&quot;&gt;\n\t\t&lt;str name=&quot;config&quot;&gt;my-data-config.xml&lt;/str&gt;\n\t&lt;/lst&gt;\n&lt;/requestHandler&gt;\n\n</pre><ul class=\"ne-ul\"><li id=\"ua92aab38\"><span class=\"ne-text\">5.将solr_home\\dist（E:\\solr-8.1.1\\dist）目录下的solr-dataimporthandler-8.1.1.jar和MySQL驱动（随便找个MySQL驱动）复制到solr_home\\server\\solr-webapp\\webapp\\WEB-INF\\lib（E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib）目录下。</span></li><li id=\"u6fd9996f\"><span class=\"ne-text\">6.重启solr服务。</span></li><li id=\"u5ff52e4c\"><span class=\"ne-text\">7.打开solr页面，进行下面操作。</span></li></ul><p id=\"uac586b0a\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789821-cd1c7622-59de-4e9a-b69c-c9ce68fdef58.webp\" width=\"1209\" id=\"uae005891\" class=\"ne-image\"></p><ul class=\"ne-ul\"><li id=\"ud43142e7\"><span class=\"ne-text\">8.检测数据是否导入成功</span></li></ul><p id=\"uc15bcceb\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789862-dbbacbb7-e01b-46be-bcd7-80aad8c48a24.webp\" width=\"933\" id=\"u6a98f6db\" class=\"ne-image\"></p><h3 id=\"imjeH\"><span class=\"ne-text\">如果对索引字段进行中文分词</span></h3><p id=\"uc98511d3\" class=\"ne-p\"><span class=\"ne-text\">添加对索引字段时，fileType ：选择text_ik</span></p><p id=\"ubae93715\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789803-bc546502-4fcb-43cf-a968-b9fda978fe7b.webp\" width=\"974\" id=\"u4e01f864\" class=\"ne-image\"></p><p id=\"u21ee617f\" class=\"ne-p\"><span class=\"ne-text\">效果如图： 查询 </span><strong><span class=\"ne-text\">鲁西化工</span></strong><span class=\"ne-text\"> 的结果</span></p><p id=\"u0b3c2d6e\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127789921-c9625e48-e98f-4529-83f4-57a6a48b77fc.webp\" width=\"1369\" id=\"ub8eb0e9d\" class=\"ne-image\"></p><h2 id=\"X6xYa\"></h2><h2 id=\"WzEne\"><span class=\"ne-text\">七、删除索引库（删除所有数据）的两种方法</span></h2><ul class=\"ne-ul\"><li id=\"uf13025e0\"><span class=\"ne-text\">1.删除索引库所有数据的方法一：直接用solr可视化界面删除</span></li></ul><p id=\"u5900d264\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/webp/27022430/1658127790457-5b348534-e2ba-4b26-960f-80171f49d3e4.webp\" width=\"813\" id=\"u00b14a0e\" class=\"ne-image\"></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,sole,搜索,全文搜索,搜索引擎,windows]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u9a915e5f\" id=\"u9a915e5f\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"u99045a10\" id=\"u99045a10\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><blockquote data-lake-id=\"u89b227d0\" id=\"u89b227d0\"><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">在windows上使用solr全文搜索引擎</span></p></blockquote><h1 data-lake-id=\"VXwhD\" id=\"VXwhD\"><span data-lake-id=\"ue2abc289\" id=\"ue2abc289\" style=\"color: rgb(51, 51, 51)\">安装solr</span></h1><h2 data-lake-id=\"cSNAt\" id=\"cSNAt\"><span data-lake-id=\"u2d40f997\" id=\"u2d40f997\">安装jre运行环境</span></h2><p data-lake-id=\"u1e4fa6d8\" id=\"u1e4fa6d8\"><span data-lake-id=\"u3cdfd8fc\" id=\"u3cdfd8fc\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">已正确安装JRE运行环境。</span><span data-lake-id=\"u7bbb634b\" id=\"u7bbb634b\"><br /></span><span data-lake-id=\"uba3a58d7\" id=\"uba3a58d7\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">JRE安装请参考《JRE安装指南》。</span></p><h2 data-lake-id=\"oQsd9\" id=\"oQsd9\"><span data-lake-id=\"u771494fc\" id=\"u771494fc\" style=\"color: rgb(77, 77, 77)\">下载solr</span></h2><p data-lake-id=\"uc86264db\" id=\"uc86264db\"><a href=\"https://solr.apache.org/downloads.html\" target=\"_blank\" data-lake-id=\"ue051b013\" id=\"ue051b013\"><span data-lake-id=\"u6c69c208\" id=\"u6c69c208\">下载地址</span></a><span data-lake-id=\"u63cfd5f7\" id=\"u63cfd5f7\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">：https://solr.apache.org/downloads.html ，如图所示：</span></p><p data-lake-id=\"uaa8b40ba\" id=\"uaa8b40ba\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658127114583-33d0d408-62e0-482f-b7b6-cc5306a5be60.png%22%2C%22taskId%22%3A%22u1ee3913b-ec2f-4836-8a4e-9e37e94bca2%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1042.415131853756%2C%22height%22%3A680%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A68403%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1151%2C%22originHeight%22%3A751%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22SOLR%20DOWNLOADS%20OFFICIAL%20RELEASES%20ARE%20USUALLY%20CREATED%20WHEN%20THE%20DEVELOPERS%20FEEL%20TEEL%20THE%20OPERS%20FEEL%20THERE%20ARE%20SUFFICIENT%20CHANGES%2CIMPROVEMENTS%20AND%20BUG%20FIXES%20TO%20WARRANT%20A%20RELEASE%2C%20DUE%20TO%20THE%20VOLUNTARY%20NATURE%20OF%20SOLI%2CNO%20RELEASES%20ARE%20SCHEDULED%20IN%20ADVANCE%2C%20SOLR%209.0.0%20SOLR%209.0%20IS%20THE%20MOST%20RECENT%20APACHE%20SOLR%20RELEASE.%20SOURCE%20RELEASE%3A%20SOLR-9.0-SRC.TGZ%20%5BPGP%5D%20%5BSHA512%5D%20BINARY%20RELEASES%3ASOLR-9.0.TGZ%20%5BPGP%5D%5BSHA512%5D%20DOCKER%3ASOLR%3A9.0.0%20CHANGE%20LOG%20SOLR%208.11.2%20SOLR%208.11.2%20IS%20THE%20LAST%20RELEASE%20IN%20THE%208.X%20SERIES.%20SOURCE%20RELEASE%3A%20SOLR-8.11.2-SRC.TGZ%20%5BPGP%5D%20%5BSHA512%5D%20BINARY%20RELEASES%3A%20SOLR-8.11.2.TGZ%20%5BPGP%5D%5BSHA512%5D%2F%20SOLR-8.11.2.ZIP%20%5BPGP%5D%5BSHA512%5D%20DOCKER%3ASOLR%3A8.11.2%20CHANGE%20LOG%20SOLR%20REFERENCE%20GUIDE%20THE%20SOLR%20REFERENCE%20GUIDE%20IS%20SOLR'S%20O%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A103.886%2C%22y%22%3A29.305393%2C%22width%22%3A352.15240000000006%2C%22height%22%3A46.524507%2C%22text%22%3A%22SOLR%20DOWNLOADS%22%7D%2C%7B%22x%22%3A105.06018%2C%22y%22%3A110.82556%2C%22width%22%3A511.64447%2C%22height%22%3A22.97099%2C%22text%22%3A%22OFFICIAL%20RELEASES%20ARE%20USUALLY%20CREATED%20WHEN%20THE%20DEVELOPERS%20FEEL%20TEEL%20THE%22%7D%2C%7B%22x%22%3A544.63715%2C%22y%22%3A113.15431%2C%22width%22%3A586.7266500000001%2C%22height%22%3A21.43172%2C%22text%22%3A%22OPERS%20FEEL%20THERE%20ARE%20SUFFICIENT%20CHANGES%2CIMPROVEMENTS%20AND%20BUG%20FIXES%20TO%22%7D%2C%7B%22x%22%3A104.22368%2C%22y%22%3A148.19827%2C%22width%22%3A774.5376699999999%2C%22height%22%3A16.00743%2C%22text%22%3A%22WARRANT%20A%20RELEASE%2C%20DUE%20TO%20THE%20VOLUNTARY%20NATURE%20OF%20SOLI%2CNO%20RELEASES%20ARE%20SCHEDULED%20IN%20ADVANCE%2C%22%7D%2C%7B%22x%22%3A104.294304%2C%22y%22%3A200.7474%2C%22width%22%3A116.15549600000001%2C%22height%22%3A24.61214000000001%2C%22text%22%3A%22SOLR%209.0.0%22%7D%2C%7B%22x%22%3A104.75149%2C%22y%22%3A258.29352%2C%22width%22%3A410.79251%2C%22height%22%3A20.374979999999994%2C%22text%22%3A%22SOLR%209.0%20IS%20THE%20MOST%20RECENT%20APACHE%20SOLR%20RELEASE.%22%7D%2C%7B%22x%22%3A124.14627%2C%22y%22%3A309.7485%2C%22width%22%3A407.31722999999994%2C%22height%22%3A20.404359999999997%2C%22text%22%3A%22SOURCE%20RELEASE%3A%20SOLR-9.0-SRC.TGZ%20%5BPGP%5D%20%5BSHA512%5D%22%7D%2C%7B%22x%22%3A124.39114%2C%22y%22%3A338.212%2C%22width%22%3A379.3447%2C%22height%22%3A20.42518000000001%2C%22text%22%3A%22BINARY%20RELEASES%3ASOLR-9.0.TGZ%20%5BPGP%5D%5BSHA512%5D%22%7D%2C%7B%22x%22%3A126.01046%2C%22y%22%3A368.3045%2C%22width%22%3A145.97529%2C%22height%22%3A18.028099999999995%2C%22text%22%3A%22DOCKER%3ASOLR%3A9.0.0%22%7D%2C%7B%22x%22%3A124.2847%2C%22y%22%3A396.51318%2C%22width%22%3A98.29172999999999%2C%22height%22%3A20.15668000000005%2C%22text%22%3A%22CHANGE%20LOG%22%7D%2C%7B%22x%22%3A104.2963%2C%22y%22%3A446.67386%2C%22width%22%3A114.10173%2C%22height%22%3A21.11441000000002%2C%22text%22%3A%22SOLR%208.11.2%22%7D%2C%7B%22x%22%3A103.48837%2C%22y%22%3A491.57138%2C%22width%22%3A379.99783%2C%22height%22%3A18.91837000000004%2C%22text%22%3A%22SOLR%208.11.2%20IS%20THE%20LAST%20RELEASE%20IN%20THE%208.X%20SERIES.%22%7D%2C%7B%22x%22%3A123.83038%2C%22y%22%3A537.6092%2C%22width%22%3A396.66571999999996%2C%22height%22%3A25.889760000000024%2C%22text%22%3A%22SOURCE%20RELEASE%3A%20SOLR-8.11.2-SRC.TGZ%20%5BPGP%5D%20%5BSHA512%5D%22%7D%2C%7B%22x%22%3A125.11295%2C%22y%22%3A569.8637%2C%22width%22%3A520.6581100000001%2C%22height%22%3A22.575000000000045%2C%22text%22%3A%22BINARY%20RELEASES%3A%20SOLR-8.11.2.TGZ%20%5BPGP%5D%5BSHA512%5D%2F%20SOLR-8.11.2.ZIP%22%7D%2C%7B%22x%22%3A658.6123%2C%22y%22%3A571.6576%2C%22width%22%3A124.66265999999996%2C%22height%22%3A19.340569999999957%2C%22text%22%3A%22%5BPGP%5D%5BSHA512%5D%22%7D%2C%7B%22x%22%3A125.85537%2C%22y%22%3A599.5694%2C%22width%22%3A156.70997%2C%22height%22%3A19.4221%2C%22text%22%3A%22DOCKER%3ASOLR%3A8.11.2%22%7D%2C%7B%22x%22%3A126.30355%2C%22y%22%3A629.1652%2C%22width%22%3A96.28693000000001%2C%22height%22%3A18.47726%2C%22text%22%3A%22CHANGE%20LOG%22%7D%2C%7B%22x%22%3A103.75445%2C%22y%22%3A680.97485%2C%22width%22%3A265.98807%2C%22height%22%3A23.967290000000048%2C%22text%22%3A%22SOLR%20REFERENCE%20GUIDE%22%7D%2C%7B%22x%22%3A101.554245%2C%22y%22%3A736.5127%2C%22width%22%3A288.435135%2C%22height%22%3A17.093870000000038%2C%22text%22%3A%22THE%20SOLR%20REFERENCE%20GUIDE%20IS%20SOLR'S%20O%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u909eb52e%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"uab1e2544\" id=\"uab1e2544\"><br></p><p data-lake-id=\"ud91d5a73\" id=\"ud91d5a73\"><span data-lake-id=\"u983c9072\" id=\"u983c9072\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">或者：</span></p><p data-lake-id=\"u6d47ef0f\" id=\"u6d47ef0f\"><a href=\"http://archive.apache.org/dist/lucene/solr/\" target=\"_blank\" data-lake-id=\"u7419de97\" id=\"u7419de97\"><span data-lake-id=\"uac6c99b0\" id=\"uac6c99b0\">http://archive.apache.org/dist/lucene/solr/</span></a></p><p data-lake-id=\"u69a1eee3\" id=\"u69a1eee3\"><span data-lake-id=\"ubf120b3b\" id=\"ubf120b3b\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><p data-lake-id=\"u3ad94350\" id=\"u3ad94350\"><span data-lake-id=\"u7131c860\" id=\"u7131c860\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">各系统适用版本见下表。</span></p><table data-lake-id=\"PnaTH\" id=\"PnaTH\" class=\"lake-table\" style=\"width: 588px\"><colgroup><col width=\"213\"><col width=\"375\"></colgroup><tbody><tr data-lake-id=\"u3a2a5dab\" id=\"u3a2a5dab\"><td data-lake-id=\"u74cdcf50\" id=\"u74cdcf50\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"ua0e9d1d9\" id=\"ua0e9d1d9\" style=\"text-align: center\"><strong><span data-lake-id=\"udb58f8e9\" id=\"udb58f8e9\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">安装包版本</span></strong></p></td><td data-lake-id=\"u553cdcd3\" id=\"u553cdcd3\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"uddc0b838\" id=\"uddc0b838\" style=\"text-align: center\"><strong><span data-lake-id=\"u1507d770\" id=\"u1507d770\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">适用系统</span></strong></p></td></tr><tr data-lake-id=\"uf5397114\" id=\"uf5397114\"><td data-lake-id=\"u9065b5a1\" id=\"u9065b5a1\"><p data-lake-id=\"u258c73d1\" id=\"u258c73d1\" style=\"text-align: center\"><span data-lake-id=\"ubc645be0\" id=\"ubc645be0\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">solr-X.X.X-src.tgz</span></p></td><td data-lake-id=\"u03808344\" id=\"u03808344\"><p data-lake-id=\"u14992689\" id=\"u14992689\" style=\"text-align: center\"><span data-lake-id=\"u0e5988f7\" id=\"u0e5988f7\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">Solr 源代码。可在不使用官方 Git 存储库的情况下在 Solr 上进行开</span></p></td></tr><tr data-lake-id=\"u5154f72d\" id=\"u5154f72d\"><td data-lake-id=\"udbb5afc9\" id=\"udbb5afc9\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u017c1f1d\" id=\"u017c1f1d\" style=\"text-align: center\"><span data-lake-id=\"u1951c99b\" id=\"u1951c99b\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">solr-X.X.X.tgz</span></p></td><td data-lake-id=\"u9d9b4c91\" id=\"u9d9b4c91\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u0c4ca193\" id=\"u0c4ca193\" style=\"text-align: center\"><span data-lake-id=\"u3cbd9824\" id=\"u3cbd9824\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">Linux/Unix/OSX</span></p></td></tr><tr data-lake-id=\"ue7a22333\" id=\"ue7a22333\"><td data-lake-id=\"u00802542\" id=\"u00802542\"><p data-lake-id=\"u72ed4990\" id=\"u72ed4990\" style=\"text-align: center\"><span data-lake-id=\"uce3a7f99\" id=\"uce3a7f99\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">solr-X.X.X.zip</span></p></td><td data-lake-id=\"u6cedc756\" id=\"u6cedc756\"><p data-lake-id=\"u1f6b63c7\" id=\"u1f6b63c7\" style=\"text-align: center\"><span data-lake-id=\"u2f22aa29\" id=\"u2f22aa29\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">Microsoft Windows</span></p></td></tr></tbody></table><h2 data-lake-id=\"vAms5\" id=\"vAms5\"><span data-lake-id=\"u5aaaa8e7\" id=\"u5aaaa8e7\" style=\"color: rgb(79, 79, 79)\">安装 Solr</span></h2><p data-lake-id=\"u3e0cffc5\" id=\"u3e0cffc5\"><strong><span data-lake-id=\"uf67790c1\" id=\"uf67790c1\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">使用解压工具解压安装包，解压即可启动</span></strong><span data-lake-id=\"u4f26d526\" id=\"u4f26d526\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">。解压后目录结构如表所示：</span></p><table data-lake-id=\"YGBm2\" id=\"YGBm2\" class=\"lake-table\" style=\"width: 734px\"><colgroup><col width=\"141\"><col width=\"136\"><col width=\"148\"><col width=\"309\"></colgroup><tbody><tr data-lake-id=\"u0c759416\" id=\"u0c759416\"><td data-lake-id=\"ued2b0b39\" id=\"ued2b0b39\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"u396374ed\" id=\"u396374ed\" style=\"text-align: center\"><strong><span data-lake-id=\"u54824e11\" id=\"u54824e11\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">目录名称</span></strong></p></td><td data-lake-id=\"u2b6095b8\" id=\"u2b6095b8\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"ub6b79c7e\" id=\"ub6b79c7e\" style=\"text-align: center\"><strong><span data-lake-id=\"u291cd585\" id=\"u291cd585\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">功能</span></strong></p></td><td data-lake-id=\"u0766fab9\" id=\"u0766fab9\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"u852bc4e6\" id=\"u852bc4e6\" style=\"text-align: center\"><strong><span data-lake-id=\"u9b7bdca8\" id=\"u9b7bdca8\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">次级文件/文件目录</span></strong></p></td><td data-lake-id=\"uddfa757c\" id=\"uddfa757c\" style=\"background-color: rgb(239, 243, 245)\"><p data-lake-id=\"u472e0558\" id=\"u472e0558\" style=\"text-align: center\"><strong><span data-lake-id=\"ue448f54b\" id=\"ue448f54b\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">功能</span></strong></p></td></tr><tr data-lake-id=\"uaef414ae\" id=\"uaef414ae\"><td data-lake-id=\"u29ae1cd6\" id=\"u29ae1cd6\"><p data-lake-id=\"udd7773a7\" id=\"udd7773a7\" style=\"text-align: center\"><span data-lake-id=\"u5829ac09\" id=\"u5829ac09\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">bin/</span></p></td><td data-lake-id=\"u89e4b826\" id=\"u89e4b826\"><p data-lake-id=\"u1d75103d\" id=\"u1d75103d\" style=\"text-align: center\"><span data-lake-id=\"u1ab5a872\" id=\"u1ab5a872\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包含几个重要的脚本，它们将使 Solr 的使用更容易</span></p></td><td data-lake-id=\"u8ad5ff78\" id=\"u8ad5ff78\"><p data-lake-id=\"ua1c7ee72\" id=\"ua1c7ee72\" style=\"text-align: center\"><span data-lake-id=\"u251fa737\" id=\"u251fa737\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">Solr、solr.cmd</span></p></td><td data-lake-id=\"u12c9bfdd\" id=\"u12c9bfdd\"><p data-lake-id=\"ua581946f\" id=\"ua581946f\" style=\"text-align: center\"><span data-lake-id=\"uf93d06fa\" id=\"uf93d06fa\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">是Solr 的控制脚本，也称为bin/solr(*nix) / bin/solr.cmd(Windows)。此脚本是启动和停止 Solr 的首选工具。在 SolrCloud 模式下运行时，您还可以创建集合或核心、配置身份验证和使用配置文件</span></p></td></tr><tr data-lake-id=\"u4e112598\" id=\"u4e112598\"><td data-lake-id=\"u61445395\" id=\"u61445395\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"uf0aebf97\" id=\"uf0aebf97\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"u8a5f5750\" id=\"u8a5f5750\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ucf005fc6\" id=\"ucf005fc6\" style=\"text-align: center\"><span data-lake-id=\"ud3e8a2be\" id=\"ud3e8a2be\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">post</span></p></td><td data-lake-id=\"u03ae427e\" id=\"u03ae427e\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u65be496d\" id=\"u65be496d\" style=\"text-align: center\"><span data-lake-id=\"u582afa27\" id=\"u582afa27\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">提供了用于发布内容到Solr一个简单的命令行界面</span></p></td></tr><tr data-lake-id=\"u8cc8f2a1\" id=\"u8cc8f2a1\"><td data-lake-id=\"ub639dac0\" id=\"ub639dac0\"></td><td data-lake-id=\"u4aed7b98\" id=\"u4aed7b98\"></td><td data-lake-id=\"u45907cfd\" id=\"u45907cfd\"><p data-lake-id=\"uba3fc9e6\" id=\"uba3fc9e6\" style=\"text-align: center\"><span data-lake-id=\"u9e1fc447\" id=\"u9e1fc447\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">solr.in.sh、solr.in.cmd</span></p></td><td data-lake-id=\"u6bde2d26\" id=\"u6bde2d26\"><p data-lake-id=\"ubf3e4724\" id=\"ubf3e4724\" style=\"text-align: center\"><span data-lake-id=\"u51f19ee1\" id=\"u51f19ee1\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">是 *nix 和 Windows 系统的属性文件。Java、Jetty 和 Solr 的系统级属性在此处配置。使用bin/solr/时可以覆盖其中许多设置bin/solr.cmd，但这允许您在一个地方设置所有属性</span></p></td></tr><tr data-lake-id=\"uc8c23879\" id=\"uc8c23879\"><td data-lake-id=\"u9b3e652f\" id=\"u9b3e652f\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"udf613e2d\" id=\"udf613e2d\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"u68184cc9\" id=\"u68184cc9\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uc3e5c866\" id=\"uc3e5c866\" style=\"text-align: center\"><span data-lake-id=\"u6dcd8aaf\" id=\"u6dcd8aaf\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">install_solr_services.sh</span></p></td><td data-lake-id=\"ue46f08a5\" id=\"ue46f08a5\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uc5a7b0ed\" id=\"uc5a7b0ed\" style=\"text-align: center\"><span data-lake-id=\"u699a82e5\" id=\"u699a82e5\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">此脚本在 *nix 系统上用于将 Solr 安装为服务</span></p></td></tr><tr data-lake-id=\"u5ad3044c\" id=\"u5ad3044c\"><td data-lake-id=\"u7682b3ad\" id=\"u7682b3ad\"><p data-lake-id=\"u01421361\" id=\"u01421361\" style=\"text-align: center\"><span data-lake-id=\"ue23c1026\" id=\"ue23c1026\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">contrib/</span></p></td><td data-lake-id=\"u06f10b06\" id=\"u06f10b06\"><p data-lake-id=\"u2b44c245\" id=\"u2b44c245\" style=\"text-align: center\"><span data-lake-id=\"u9fea77db\" id=\"u9fea77db\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包括用于 Solr 特殊功能的附加插件</span></p></td><td data-lake-id=\"ud1056ba2\" id=\"ud1056ba2\"><p data-lake-id=\"u0dea3cf7\" id=\"u0dea3cf7\" style=\"text-align: center\"><span data-lake-id=\"u1191bbc8\" id=\"u1191bbc8\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td><td data-lake-id=\"ue46bb4a9\" id=\"ue46bb4a9\"><p data-lake-id=\"u4f87883e\" id=\"u4f87883e\" style=\"text-align: center\"><span data-lake-id=\"uf7377854\" id=\"uf7377854\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td></tr><tr data-lake-id=\"ucf54715b\" id=\"ucf54715b\"><td data-lake-id=\"u34864a98\" id=\"u34864a98\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u211d89e9\" id=\"u211d89e9\" style=\"text-align: center\"><span data-lake-id=\"uc7a9bf3e\" id=\"uc7a9bf3e\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">dist/</span></p></td><td data-lake-id=\"u87228efb\" id=\"u87228efb\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u6d09fd39\" id=\"u6d09fd39\" style=\"text-align: center\"><span data-lake-id=\"u8ab7da4c\" id=\"u8ab7da4c\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包含主要的 Solr .jar 文件</span></p></td><td data-lake-id=\"u6902198f\" id=\"u6902198f\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ude6c7ce9\" id=\"ude6c7ce9\" style=\"text-align: center\"><span data-lake-id=\"u60c7b772\" id=\"u60c7b772\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td><td data-lake-id=\"u143120ef\" id=\"u143120ef\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u2381ed57\" id=\"u2381ed57\" style=\"text-align: center\"><span data-lake-id=\"ua8679d57\" id=\"ua8679d57\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td></tr><tr data-lake-id=\"udfa75141\" id=\"udfa75141\"><td data-lake-id=\"ue2e4adfd\" id=\"ue2e4adfd\"><p data-lake-id=\"u88189de9\" id=\"u88189de9\" style=\"text-align: center\"><span data-lake-id=\"u960a8cfd\" id=\"u960a8cfd\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">docs/</span></p></td><td data-lake-id=\"u1851d008\" id=\"u1851d008\"><p data-lake-id=\"uf6f004ae\" id=\"uf6f004ae\" style=\"text-align: center\"><span data-lake-id=\"u4c8e7297\" id=\"u4c8e7297\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包含指向 Solr 的在线 Javadocs 的链接</span></p></td><td data-lake-id=\"ucd52e371\" id=\"ucd52e371\"><p data-lake-id=\"u5177e398\" id=\"u5177e398\" style=\"text-align: center\"><span data-lake-id=\"u0fc4d88e\" id=\"u0fc4d88e\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td><td data-lake-id=\"u78d27c76\" id=\"u78d27c76\"><p data-lake-id=\"ud702f0b0\" id=\"ud702f0b0\" style=\"text-align: center\"><span data-lake-id=\"u657e22c0\" id=\"u657e22c0\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td></tr><tr data-lake-id=\"uf146c20e\" id=\"uf146c20e\"><td data-lake-id=\"u9d34e721\" id=\"u9d34e721\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u15e01cc0\" id=\"u15e01cc0\" style=\"text-align: center\"><span data-lake-id=\"u32b6f00c\" id=\"u32b6f00c\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">example/</span></p></td><td data-lake-id=\"u1e284d48\" id=\"u1e284d48\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uf99e7a8c\" id=\"uf99e7a8c\" style=\"text-align: center\"><span data-lake-id=\"u41261d86\" id=\"u41261d86\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包含多种类型的示例，用于演示各种 Solr 功能</span></p></td><td data-lake-id=\"u6f6385ea\" id=\"u6f6385ea\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u521abc8d\" id=\"u521abc8d\" style=\"text-align: center\"><span data-lake-id=\"u7c1f5fb6\" id=\"u7c1f5fb6\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td><td data-lake-id=\"u947edcc8\" id=\"u947edcc8\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u8773d6c3\" id=\"u8773d6c3\" style=\"text-align: center\"><span data-lake-id=\"u11f31163\" id=\"u11f31163\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td></tr><tr data-lake-id=\"uab08ab49\" id=\"uab08ab49\"><td data-lake-id=\"ub9f50673\" id=\"ub9f50673\"><p data-lake-id=\"u6848edd5\" id=\"u6848edd5\" style=\"text-align: center\"><span data-lake-id=\"u37971540\" id=\"u37971540\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">licenses/</span></p></td><td data-lake-id=\"u01e6187f\" id=\"u01e6187f\"><p data-lake-id=\"u713ce39e\" id=\"u713ce39e\" style=\"text-align: center\"><span data-lake-id=\"u84945ad9\" id=\"u84945ad9\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">包含 Solr 使用的第 3 方库的所有许可证</span></p></td><td data-lake-id=\"u4b33c998\" id=\"u4b33c998\"><p data-lake-id=\"u9e88ca32\" id=\"u9e88ca32\" style=\"text-align: center\"><span data-lake-id=\"u4bc51078\" id=\"u4bc51078\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td><td data-lake-id=\"ua886f7b9\" id=\"ua886f7b9\"><p data-lake-id=\"uc6933346\" id=\"uc6933346\" style=\"text-align: center\"><span data-lake-id=\"u5ede7f24\" id=\"u5ede7f24\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/</span></p></td></tr><tr data-lake-id=\"u72cd1d1f\" id=\"u72cd1d1f\"><td data-lake-id=\"uf27c43c0\" id=\"uf27c43c0\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ueb44774e\" id=\"ueb44774e\" style=\"text-align: center\"><span data-lake-id=\"u84402daf\" id=\"u84402daf\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">server/</span></p></td><td data-lake-id=\"u7c91554e\" id=\"u7c91554e\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"uc37acf5c\" id=\"uc37acf5c\" style=\"text-align: center\"><span data-lake-id=\"u67aa0d23\" id=\"u67aa0d23\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">是 Solr 应用程序的核心所在</span></p></td><td data-lake-id=\"uf7431bca\" id=\"uf7431bca\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u3872d735\" id=\"u3872d735\" style=\"text-align: center\"><span data-lake-id=\"u6c2a9537\" id=\"u6c2a9537\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/solr-webapp</span></p></td><td data-lake-id=\"ue08af2f6\" id=\"ue08af2f6\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u81b60185\" id=\"u81b60185\" style=\"text-align: center\"><span data-lake-id=\"ub45ab4a7\" id=\"ub45ab4a7\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">Solr 的UI管理</span></p></td></tr><tr data-lake-id=\"ufb0e915f\" id=\"ufb0e915f\"><td data-lake-id=\"uc305be9e\" id=\"uc305be9e\"></td><td data-lake-id=\"ua584a982\" id=\"ua584a982\"></td><td data-lake-id=\"u67a3dc66\" id=\"u67a3dc66\"><p data-lake-id=\"u18aa55d2\" id=\"u18aa55d2\" style=\"text-align: center\"><span data-lake-id=\"u8e738e6f\" id=\"u8e738e6f\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/lib</span></p></td><td data-lake-id=\"uc481dbfc\" id=\"uc481dbfc\"><p data-lake-id=\"u2f5f6aa7\" id=\"u2f5f6aa7\" style=\"text-align: center\"><span data-lake-id=\"u9b0c068a\" id=\"u9b0c068a\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">Jetty libraries</span></p></td></tr><tr data-lake-id=\"u09aad02b\" id=\"u09aad02b\"><td data-lake-id=\"u1492acbd\" id=\"u1492acbd\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"ud5c1979d\" id=\"ud5c1979d\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"u003cb455\" id=\"u003cb455\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u4c39d54d\" id=\"u4c39d54d\" style=\"text-align: center\"><span data-lake-id=\"u7329faf8\" id=\"u7329faf8\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/logs</span></p></td><td data-lake-id=\"u2425ecea\" id=\"u2425ecea\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"ud5b1c98d\" id=\"ud5b1c98d\" style=\"text-align: center\"><span data-lake-id=\"u24798d47\" id=\"u24798d47\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">日志文件</span></p></td></tr><tr data-lake-id=\"u2a5dc050\" id=\"u2a5dc050\"><td data-lake-id=\"ue857ed40\" id=\"ue857ed40\"></td><td data-lake-id=\"u9a028427\" id=\"u9a028427\"></td><td data-lake-id=\"u99c03fe6\" id=\"u99c03fe6\"><p data-lake-id=\"u7d274976\" id=\"u7d274976\" style=\"text-align: center\"><span data-lake-id=\"u50f79972\" id=\"u50f79972\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/resources</span></p></td><td data-lake-id=\"ud2fe3351\" id=\"ud2fe3351\"><p data-lake-id=\"u0d77c1b7\" id=\"u0d77c1b7\" style=\"text-align: center\"><span data-lake-id=\"u12922b90\" id=\"u12922b90\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">日志配置</span></p></td></tr><tr data-lake-id=\"uf0453eda\" id=\"uf0453eda\"><td data-lake-id=\"u5bb668a7\" id=\"u5bb668a7\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"uc24b6acd\" id=\"uc24b6acd\" style=\"background-color: rgb(247, 247, 247)\"></td><td data-lake-id=\"u2dcb5368\" id=\"u2dcb5368\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u553203c1\" id=\"u553203c1\" style=\"text-align: center\"><span data-lake-id=\"ueef0952e\" id=\"ueef0952e\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">/solr/configsets</span></p></td><td data-lake-id=\"u0460fd69\" id=\"u0460fd69\" style=\"background-color: rgb(247, 247, 247)\"><p data-lake-id=\"u7fad7387\" id=\"u7fad7387\" style=\"text-align: center\"><span data-lake-id=\"u71f68e56\" id=\"u71f68e56\" class=\"lake-fontsize-11\" style=\"color: rgb(79, 79, 79)\">示例配置集</span></p></td></tr></tbody></table><h2 data-lake-id=\"SCLCm\" id=\"SCLCm\"><span data-lake-id=\"u3cefda6f\" id=\"u3cefda6f\" style=\"color: rgb(79, 79, 79)\">启动solr</span></h2><p data-lake-id=\"u43e9b43e\" id=\"u43e9b43e\"><span data-lake-id=\"ubb9fc544\" id=\"ubb9fc544\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">Solr 包括一个名为bin/solr(Linux/MacOS) 或bin\\solr.cmd(Windows)的命令行界面工具。该工具允许您启动和停止 Solr、创建核心和集合、配置身份验证以及检查系统状态。<br />要使用它来启动 Solr，只需在解压后的bin目录下打开命令行，执行命令：</span></p><p data-lake-id=\"u417f21b3\" id=\"u417f21b3\"><span data-lake-id=\"u97ecb1a9\" id=\"u97ecb1a9\" class=\"lake-fontsize-12\">~~~</span></p><p data-lake-id=\"u3abc1e74\" id=\"u3abc1e74\"><span data-lake-id=\"ua5916a6e\" id=\"ua5916a6e\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">.</span><span data-lake-id=\"u42010132\" id=\"u42010132\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">/</span><span data-lake-id=\"uf3db84bc\" id=\"uf3db84bc\" class=\"lake-fontsize-11\" style=\"color: unset; background-color: rgb(250, 250, 250)\">solr </span><span data-lake-id=\"u3f05080d\" id=\"u3f05080d\" class=\"lake-fontsize-11\" style=\"color: rgb(221, 74, 104); background-color: rgb(250, 250, 250)\">start</span><span data-lake-id=\"uf8cf93e9\" id=\"uf8cf93e9\" class=\"lake-fontsize-11\" style=\"color: unset; background-color: rgb(250, 250, 250)\">​</span></p><p data-lake-id=\"u3eff5a9c\" id=\"u3eff5a9c\"><span data-lake-id=\"u8427a923\" id=\"u8427a923\" class=\"lake-fontsize-12\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">~~~</span></p><p data-lake-id=\"u0ec4abd2\" id=\"u0ec4abd2\"><span data-lake-id=\"u64bd22ac\" id=\"u64bd22ac\" class=\"lake-fontsize-12\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">​</span><br></p><p data-lake-id=\"u6768a136\" id=\"u6768a136\"><span data-lake-id=\"uf473ce2f\" id=\"uf473ce2f\" class=\"lake-fontsize-12\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">几条常用命令</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22solr%20start%20%E2%80%93p%20%E7%AB%AF%E5%8F%A3%E5%8F%B7%20%23%E5%8D%95%E6%9C%BA%E7%89%88%E5%90%AF%E5%8A%A8solr%E6%9C%8D%E5%8A%A1%5Cnsolr%20restart%20%E2%80%93p%20%E7%AB%AF%E5%8F%A3%E5%8F%B7%20%23%E9%87%8D%E5%90%AFsolr%E6%9C%8D%E5%8A%A1%5Cnsolr%20stop%20%E2%80%93p%20%E7%AB%AF%E5%8F%A3%E5%8F%B7%20%23%E5%85%B3%E9%97%ADsolr%E6%9C%8D%E5%8A%A1%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22xuoqf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u49a59769\" id=\"u49a59769\"><span data-lake-id=\"u4473d15c\" id=\"u4473d15c\" class=\"lake-fontsize-12\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">​</span><br></p><p data-lake-id=\"ue5c2fa2c\" id=\"ue5c2fa2c\"><span data-lake-id=\"u6f8419aa\" id=\"u6f8419aa\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">这将在后台启动 Solr，侦听端口 8983。当您在后台启动 Solr 时，脚本将等待以确保 Solr 正确启动，然后再返回命令行提示符。<br />启动完成后默认监听8983端口，</span><a href=\"http://localhost:8983/solr/\" target=\"_blank\" data-lake-id=\"u17990e98\" id=\"u17990e98\"><span data-lake-id=\"u6336b1a7\" id=\"u6336b1a7\">管理界面</span></a><span data-lake-id=\"u0b2e1368\" id=\"u0b2e1368\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">访问地址：http://localhost:8983/solr/</span></p><h2 data-lake-id=\"qhKk8\" id=\"qhKk8\"><span data-lake-id=\"u787ceb14\" id=\"u787ceb14\" style=\"color: rgb(79, 79, 79)\"> 停止Solr</span></h2><p data-lake-id=\"u3542548e\" id=\"u3542548e\"><span data-lake-id=\"ufdd87886\" id=\"ufdd87886\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">在bin目录下执行命令：</span></p><p data-lake-id=\"u2641753e\" id=\"u2641753e\"><span data-lake-id=\"u5c48fe0b\" id=\"u5c48fe0b\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">.</span><span data-lake-id=\"ucdcd5642\" id=\"ucdcd5642\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">/</span><span data-lake-id=\"u64da52d7\" id=\"u64da52d7\" class=\"lake-fontsize-11\" style=\"color: unset; background-color: rgb(250, 250, 250)\">solr stop </span><span data-lake-id=\"u55a2d003\" id=\"u55a2d003\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">-</span><span data-lake-id=\"u99b0cba4\" id=\"u99b0cba4\" class=\"lake-fontsize-11\" style=\"color: unset; background-color: rgb(250, 250, 250)\">all</span></p><p data-lake-id=\"ua5cc1d62\" id=\"ua5cc1d62\"><span data-lake-id=\"uf650b0ae\" id=\"uf650b0ae\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">注：停止时必须指定端口。</span></p><h1 data-lake-id=\"Iua0c\" id=\"Iua0c\"><span data-lake-id=\"u3096857f\" id=\"u3096857f\" style=\"color: rgb(51, 51, 51)\">安装php扩展solr .dll</span></h1><h2 data-lake-id=\"z8JDw\" id=\"z8JDw\"><span data-lake-id=\"u6aa59f91\" id=\"u6aa59f91\">0、环境</span></h2><ol list=\"uc0f324f6\"><li fid=\"u708f60ba\" data-lake-id=\"uf41e38cb\" id=\"uf41e38cb\"><span data-lake-id=\"ucba49986\" id=\"ucba49986\">操作系统：Windows10</span></li><li fid=\"u708f60ba\" data-lake-id=\"ubdc76fa0\" id=\"ubdc76fa0\"><span data-lake-id=\"ud378b8ec\" id=\"ud378b8ec\">solr: 8.9.0</span></li><li fid=\"u708f60ba\" data-lake-id=\"u129d8e1d\" id=\"u129d8e1d\"><span data-lake-id=\"u995ef22b\" id=\"u995ef22b\">php：7.3 （nts）</span></li></ol><h2 data-lake-id=\"IpjiJ\" id=\"IpjiJ\"><span data-lake-id=\"u362b5323\" id=\"u362b5323\">1、扩展说明</span></h2><p data-lake-id=\"u837eb9ba\" id=\"u837eb9ba\"><strong><span data-lake-id=\"uf241dfe7\" id=\"uf241dfe7\" class=\"lake-fontsize-12\">扩展地址：</span></strong></p><p data-lake-id=\"ub7458288\" id=\"ub7458288\"><a href=\"https://pecl.php.net/ \" target=\"_blank\" data-lake-id=\"uf61cf43c\" id=\"uf61cf43c\"><span data-lake-id=\"uecfe2acf\" id=\"uecfe2acf\" class=\"lake-fontsize-11\" style=\"background-color: rgb(250, 250, 250)\">https://pecl.php.net/ </span></a><span data-lake-id=\"ucd4289df\" id=\"ucd4289df\"><br /></span><strong><span data-lake-id=\"uba6bb2a1\" id=\"uba6bb2a1\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">确定线性与非线性</span></strong></p><p data-lake-id=\"u9872813b\" id=\"u9872813b\"><span data-lake-id=\"u360a9197\" id=\"u360a9197\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">Non Thread Safe </span><span data-lake-id=\"udb723896\" id=\"udb723896\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153)\">(</span><span data-lake-id=\"uf230fec1\" id=\"uf230fec1\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">NTS</span><span data-lake-id=\"u83143418\" id=\"u83143418\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153)\">)</span><span data-lake-id=\"u4d5fa124\" id=\"u4d5fa124\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\"> x64 / Thread Safe </span><span data-lake-id=\"u5008b86b\" id=\"u5008b86b\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153)\">(</span><span data-lake-id=\"u8067e954\" id=\"u8067e954\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">TS</span><span data-lake-id=\"u059fc5e6\" id=\"u059fc5e6\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153)\">)</span><span data-lake-id=\"ub373fdc9\" id=\"ub373fdc9\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\"> x64</span></p><p data-lake-id=\"ud7652bab\" id=\"ud7652bab\"><span data-lake-id=\"u2d6a452c\" id=\"u2d6a452c\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">通过phpinfo</span><span data-lake-id=\"u96d9ae15\" id=\"u96d9ae15\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153)\">();</span><span data-lake-id=\"uf10b332e\" id=\"uf10b332e\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\"> 查看其中的 Thread Safety 项，这个项目就是查看是否是线程安全</span></p><p data-lake-id=\"u52a902c1\" id=\"u52a902c1\"><span data-lake-id=\"u24437bb5\" id=\"u24437bb5\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">如果是：enabled，一般来说应该是ts版，否则是nts版。</span></p><h2 data-lake-id=\"fx2pg\" id=\"fx2pg\"><span data-lake-id=\"uf8dfd77c\" id=\"uf8dfd77c\"><br /></span><span data-lake-id=\"u9d6538bc\" id=\"u9d6538bc\">2、安装php扩展</span></h2><p data-lake-id=\"u0a760b49\" id=\"u0a760b49\"><span data-lake-id=\"u494d6860\" id=\"u494d6860\" class=\"lake-fontsize-11\">打开扩展下载地址：</span></p><p data-lake-id=\"u5eb89714\" id=\"u5eb89714\"><a href=\"https://pecl.php.net/package/solr\" target=\"_blank\" data-lake-id=\"u56223f4d\" id=\"u56223f4d\"><span data-lake-id=\"ucd2aa5f6\" id=\"ucd2aa5f6\">https://pecl.php.net/package/solr</span></a></p><p data-lake-id=\"ua87a1f73\" id=\"ua87a1f73\"><span data-lake-id=\"u492078d6\" id=\"u492078d6\">选择版本后面的dll文件（我用的是2.5.1版本的dll）</span></p><p data-lake-id=\"u01add59f\" id=\"u01add59f\"><a href=\"https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip\" target=\"_blank\" data-lake-id=\"ub240d5e3\" id=\"ub240d5e3\"><span data-lake-id=\"u4d0646bc\" id=\"u4d0646bc\">https://windows.php.net/downloads/pecl/releases/solr/2.5.1/php_solr-2.5.1-7.3-nts-vc15-x64.zip</span></a></p><p data-lake-id=\"uc868fc4f\" id=\"uc868fc4f\"><span data-lake-id=\"u01f563f5\" id=\"u01f563f5\">并点击下载。</span></p><p data-lake-id=\"u46521b77\" id=\"u46521b77\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658108004278-e1ac5886-8688-4801-a581-e5ebf234ea61.png%22%2C%22taskId%22%3A%22u3ed7378b-9369-4a50-84ca-29b7e037cd1%22%2C%22clientId%22%3A%22u7953d6aa-a114-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1129.3585312090652%2C%22height%22%3A552%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A83774%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1247%2C%22originHeight%22%3A610%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22HTTPS%3A%2F%2FGITHUB.COM%2FPHP%2FPECL-SEARCH_ENGINE-SOLR%20HOMEPAGE%20HTTP%3A%2F%2FLUCENE.APACHE.ORG%2FSOLR%2F%20%5B%20CHANGELOG%20%5D%20%5B%20LATEST%20TARBALL%5D%20I%20PACKAGE%20BUGS%20%5D%20%5BY%20%5B%20BROWSE%20SOURCE%20%5D%20AVAILABLE%20RELEASES%20DOWNLOADS%20STATE%20RELEASE%20DATE%20VERSION%20ADLL%202.5.1%202020-09-09%20SOLR-2.5.1.TGZ(605.5KB%5D%20STABLE%202019-07-04%202.5.0%20STABLE%20SOLR-2.5.0.TGZ(704.9KB)%20ADLL%202.4.0%202016-03-30%20STABLE%20SOLR-2.4.0.TGZ(250.3KB)%202.3.0%202015-12-01%20SOLR-2.3.0.TGZ(148.7KB)%20STABLE%20DLL%202015-09-27%202.2.1%20STABLE%20SOLR-2.2.1.TGZ(139.0KB)%20STABLE%202015-09-26%202.2.0%20SOLR-2.2.0.TGZ(139.0KB)%20SOLR-2.1.0.TGZ(119.2KB)%202.1.0%202015-01-17%20STABLE%202014-06-24%20SOLR-2.0.0.TGZ(11.0KB)%20STABLE%202.0.0%20STABLE%201.1.1%20SOLR-1.1.1.TGZ(108.6KB)%202014-06-20%20SOLR-1.1.0.TGZ(106.2KB)%201.1.0%202014-06-19%20STABLE%20ADLL%202014-03-17%20SOLR-1.1.0B.TGZ(102.9KB)%201.1.0B%20BETA%20DLL%20SOLR-2.0.0B.TGZ(105.7KB)%202014-02-28%20BETA%202.0.0B%20STABLE%20DLL%202011-11-28%201.0.2%20SOLR-1.0.2.TGZ(98.9KB)%20STABLE%201.0.1%202011-06-04%20SOLR-1.0.1.TGZ(98.3KB)%202010-06-22%20SOLR-0.9.11.TGZ(96.1KB)%200.9.11%20BETA%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A105.11499%2C%22y%22%3A8.01084%2C%22width%22%3A390.36161000000004%2C%22height%22%3A18.515828999999997%2C%22text%22%3A%22HTTPS%3A%2F%2FGITHUB.COM%2FPHP%2FPECL-SEARCH_ENGINE-SOLR%22%7D%2C%7B%22x%22%3A1.4072776%2C%22y%22%3A33.999752%2C%22width%22%3A351.55912240000004%2C%22height%22%3A18.652411999999998%2C%22text%22%3A%22HOMEPAGE%20HTTP%3A%2F%2FLUCENE.APACHE.ORG%2FSOLR%2F%22%7D%2C%7B%22x%22%3A723.75964%2C%22y%22%3A80.078514%2C%22width%22%3A109.74796000000003%2C%22height%22%3A20.735816%2C%22text%22%3A%22%5B%20CHANGELOG%20%5D%22%7D%2C%7B%22x%22%3A252.12956%2C%22y%22%3A81.071175%2C%22width%22%3A128.55744%2C%22height%22%3A19.674825%2C%22text%22%3A%22%5B%20LATEST%20TARBALL%5D%22%7D%2C%7B%22x%22%3A721.2039%2C%22y%22%3A110.403786%2C%22width%22%3A126.91280000000006%2C%22height%22%3A18.144204000000002%2C%22text%22%3A%22I%20PACKAGE%20BUGS%20%5D%22%7D%2C%7B%22x%22%3A1220.9324%2C%22y%22%3A110.64107%2C%22width%22%3A25.232200000000148%2C%22height%22%3A19.083780000000004%2C%22text%22%3A%22%5BY%22%7D%2C%7B%22x%22%3A248.58679%2C%22y%22%3A111.27793%2C%22width%22%3A137.10983%2C%22height%22%3A18.154240000000016%2C%22text%22%3A%22%5B%20BROWSE%20SOURCE%20%5D%22%7D%2C%7B%22x%22%3A682.62524%2C%22y%22%3A159.71516%2C%22width%22%3A168.76046000000008%2C%22height%22%3A16.801620000000014%2C%22text%22%3A%22AVAILABLE%20RELEASES%22%7D%2C%7B%22x%22%3A903.8832%2C%22y%22%3A184.95944%2C%22width%22%3A98.82310000000007%2C%22height%22%3A14.902260000000012%2C%22text%22%3A%22DOWNLOADS%22%7D%2C%7B%22x%22%3A220.3414%2C%22y%22%3A185.34662%2C%22width%22%3A46.2157%2C%22height%22%3A14.387799999999999%2C%22text%22%3A%22STATE%22%7D%2C%7B%22x%22%3A404.17624%2C%22y%22%3A185.04091%2C%22width%22%3A116.71705999999995%2C%22height%22%3A15.552570000000003%2C%22text%22%3A%22RELEASE%20DATE%22%7D%2C%7B%22x%22%3A50.20234%2C%22y%22%3A186.31792%2C%22width%22%3A68.38709%2C%22height%22%3A13.421280000000024%2C%22text%22%3A%22VERSION%22%7D%2C%7B%22x%22%3A825.57117%2C%22y%22%3A207.79898%2C%22width%22%3A45.40053%2C%22height%22%3A16.013499999999993%2C%22text%22%3A%22ADLL%22%7D%2C%7B%22x%22%3A62.334187%2C%22y%22%3A208.48619%2C%22width%22%3A49.144333%2C%22height%22%3A16.341980000000007%2C%22text%22%3A%222.5.1%22%7D%2C%7B%22x%22%3A313.4923%2C%22y%22%3A208.35536%2C%22width%22%3A95.49378000000002%2C%22height%22%3A15.55379000000002%2C%22text%22%3A%222020-09-09%22%7D%2C%7B%22x%22%3A618.14746%2C%22y%22%3A208.87376%2C%22width%22%3A193.30486999999994%2C%22height%22%3A16.535969999999992%2C%22text%22%3A%22SOLR-2.5.1.TGZ(605.5KB%5D%22%7D%2C%7B%22x%22%3A180.72531%2C%22y%22%3A209.35144%2C%22width%22%3A46.00756999999999%2C%22height%22%3A14.63991999999999%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A313.56656%2C%22y%22%3A233.41988%2C%22width%22%3A97.02716000000004%2C%22height%22%3A16.05019999999999%2C%22text%22%3A%222019-07-04%22%7D%2C%7B%22x%22%3A63.257725%2C%22y%22%3A233.65527%2C%22width%22%3A46.971475000000005%2C%22height%22%3A15.601979999999998%2C%22text%22%3A%222.5.0%22%7D%2C%7B%22x%22%3A179.42024%2C%22y%22%3A233.85715%2C%22width%22%3A48.85706999999999%2C%22height%22%3A15.141739999999999%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A617.92523%2C%22y%22%3A232.77689%2C%22width%22%3A193.8185699999999%2C%22height%22%3A18.88675999999998%2C%22text%22%3A%22SOLR-2.5.0.TGZ(704.9KB)%22%7D%2C%7B%22x%22%3A833.0677%2C%22y%22%3A256.74246%2C%22width%22%3A38.367000000000075%2C%22height%22%3A16.682889999999986%2C%22text%22%3A%22ADLL%22%7D%2C%7B%22x%22%3A62.70443%2C%22y%22%3A257.5809%2C%22width%22%3A48.32585%2C%22height%22%3A16.174560000000042%2C%22text%22%3A%222.4.0%22%7D%2C%7B%22x%22%3A313.59897%2C%22y%22%3A258.1688%2C%22width%22%3A95.96280000000002%2C%22height%22%3A16.330160000000035%2C%22text%22%3A%222016-03-30%22%7D%2C%7B%22x%22%3A179.13504%2C%22y%22%3A257.28726%2C%22width%22%3A48.93397999999999%2C%22height%22%3A15.498170000000016%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A617.4939%2C%22y%22%3A259.0283%2C%22width%22%3A198.21782999999994%2C%22height%22%3A16.536099999999976%2C%22text%22%3A%22SOLR-2.4.0.TGZ(250.3KB)%22%7D%2C%7B%22x%22%3A62.204464%2C%22y%22%3A281.67865%2C%22width%22%3A47.858176%2C%22height%22%3A15.810999999999979%2C%22text%22%3A%222.3.0%22%7D%2C%7B%22x%22%3A313.81104%2C%22y%22%3A281.7468%2C%22width%22%3A94.8435%2C%22height%22%3A16.36311999999998%2C%22text%22%3A%222015-12-01%22%7D%2C%7B%22x%22%3A617.81854%2C%22y%22%3A280.4824%2C%22width%22%3A254.81556%2C%22height%22%3A19.853080000000034%2C%22text%22%3A%22SOLR-2.3.0.TGZ(148.7KB)%22%7D%2C%7B%22x%22%3A179.61191%2C%22y%22%3A282.52353%2C%22width%22%3A47.98955000000001%2C%22height%22%3A14.19574%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A835.1294%2C%22y%22%3A304.89838%2C%22width%22%3A37.45555999999999%2C%22height%22%3A17.541650000000004%2C%22text%22%3A%22DLL%22%7D%2C%7B%22x%22%3A314.21085%2C%22y%22%3A306.40613%2C%22width%22%3A95.89515%2C%22height%22%3A15.688870000000009%2C%22text%22%3A%222015-09-27%22%7D%2C%7B%22x%22%3A62.311317%2C%22y%22%3A306.61002%2C%22width%22%3A47.31008299999999%2C%22height%22%3A15.94023999999996%2C%22text%22%3A%222.2.1%22%7D%2C%7B%22x%22%3A179.71501%2C%22y%22%3A306.49146%2C%22width%22%3A49.59646999999998%2C%22height%22%3A15.35739000000001%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A617.55164%2C%22y%22%3A305.72733%2C%22width%22%3A201.11115999999993%2C%22height%22%3A18.007870000000025%2C%22text%22%3A%22SOLR-2.2.1.TGZ(139.0KB)%22%7D%2C%7B%22x%22%3A179.2318%2C%22y%22%3A330.24683%2C%22width%22%3A49.013239999999996%2C%22height%22%3A15.234829999999988%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A314.5809%2C%22y%22%3A330.7007%2C%22width%22%3A95.1001%2C%22height%22%3A16.17998%2C%22text%22%3A%222015-09-26%22%7D%2C%7B%22x%22%3A61.922287%2C%22y%22%3A330.84158%2C%22width%22%3A48.464833%2C%22height%22%3A15.157870000000003%2C%22text%22%3A%222.2.0%22%7D%2C%7B%22x%22%3A616.5429%2C%22y%22%3A329.60004%2C%22width%22%3A192.3709%2C%22height%22%3A18.78946000000002%2C%22text%22%3A%22SOLR-2.2.0.TGZ(139.0KB)%22%7D%2C%7B%22x%22%3A616.879%2C%22y%22%3A353.06714%2C%22width%22%3A254.6889%2C%22height%22%3A20.586180000000013%2C%22text%22%3A%22SOLR-2.1.0.TGZ(119.2KB)%22%7D%2C%7B%22x%22%3A61.61337%2C%22y%22%3A354.51685%2C%22width%22%3A49.06228%2C%22height%22%3A17.04400000000004%2C%22text%22%3A%222.1.0%22%7D%2C%7B%22x%22%3A313.4055%2C%22y%22%3A355.1477%2C%22width%22%3A96.43856%2C%22height%22%3A17.060429999999997%2C%22text%22%3A%222015-01-17%22%7D%2C%7B%22x%22%3A179.72621%2C%22y%22%3A354.8263%2C%22width%22%3A47.80984999999998%2C%22height%22%3A16.351040000000012%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A313.30505%2C%22y%22%3A379.44733%2C%22width%22%3A96.49855000000002%2C%22height%22%3A15.827110000000005%2C%22text%22%3A%222014-06-24%22%7D%2C%7B%22x%22%3A616.5654%2C%22y%22%3A378.81375%2C%22width%22%3A255.16330000000005%2C%22height%22%3A20.312449999999956%2C%22text%22%3A%22SOLR-2.0.0.TGZ(11.0KB)%22%7D%2C%7B%22x%22%3A179.84938%2C%22y%22%3A379.60382%2C%22width%22%3A47.64410000000001%2C%22height%22%3A15.656310000000019%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A61.668533%2C%22y%22%3A379.92734%2C%22width%22%3A48.683717%2C%22height%22%3A15.10336000000001%2C%22text%22%3A%222.0.0%22%7D%2C%7B%22x%22%3A179.44466%2C%22y%22%3A403.75067%2C%22width%22%3A48.17747%2C%22height%22%3A14.179809999999975%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A61.978115%2C%22y%22%3A404.10077%2C%22width%22%3A47.85523499999999%2C%22height%22%3A14.850829999999974%2C%22text%22%3A%221.1.1%22%7D%2C%7B%22x%22%3A617.70013%2C%22y%22%3A402.49246%2C%22width%22%3A255.0967700000001%2C%22height%22%3A19.41861%2C%22text%22%3A%22SOLR-1.1.1.TGZ(108.6KB)%22%7D%2C%7B%22x%22%3A313.27805%2C%22y%22%3A403.96994%2C%22width%22%3A97.06074999999998%2C%22height%22%3A15.350430000000017%2C%22text%22%3A%222014-06-20%22%7D%2C%7B%22x%22%3A618.03564%2C%22y%22%3A426.42102%2C%22width%22%3A198.24512000000004%2C%22height%22%3A19.807799999999986%2C%22text%22%3A%22SOLR-1.1.0.TGZ(106.2KB)%22%7D%2C%7B%22x%22%3A61.68024%2C%22y%22%3A428.0845%2C%22width%22%3A49.82902%2C%22height%22%3A16.570159999999987%2C%22text%22%3A%221.1.0%22%7D%2C%7B%22x%22%3A312.86917%2C%22y%22%3A429.02295%2C%22width%22%3A97.47818000000001%2C%22height%22%3A16.816280000000006%2C%22text%22%3A%222014-06-19%22%7D%2C%7B%22x%22%3A178.995%2C%22y%22%3A428.65634%2C%22width%22%3A49.76238999999998%2C%22height%22%3A15.283599999999979%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A833.72437%2C%22y%22%3A451.56976%2C%22width%22%3A47.47542999999996%2C%22height%22%3A16.63196000000005%2C%22text%22%3A%22ADLL%22%7D%2C%7B%22x%22%3A313.25912%2C%22y%22%3A451.96884%2C%22width%22%3A97.36932999999999%2C%22height%22%3A17.17133000000001%2C%22text%22%3A%222014-03-17%22%7D%2C%7B%22x%22%3A618.02423%2C%22y%22%3A451.45828%2C%22width%22%3A202.01909999999998%2C%22height%22%3A18.747349999999983%2C%22text%22%3A%22SOLR-1.1.0B.TGZ(102.9KB)%22%7D%2C%7B%22x%22%3A57.249767%2C%22y%22%3A453.0186%2C%22width%22%3A56.667882999999996%2C%22height%22%3A14.75884000000002%2C%22text%22%3A%221.1.0B%22%7D%2C%7B%22x%22%3A181.01602%2C%22y%22%3A453.67792%2C%22width%22%3A32.742080000000016%2C%22height%22%3A13.947080000000028%2C%22text%22%3A%22BETA%22%7D%2C%7B%22x%22%3A848.74243%2C%22y%22%3A477.05078%2C%22width%22%3A31.712040000000002%2C%22height%22%3A16.66840000000002%2C%22text%22%3A%22DLL%22%7D%2C%7B%22x%22%3A623.4932%2C%22y%22%3A477.73526%2C%22width%22%3A190.96163%2C%22height%22%3A16.439580000000035%2C%22text%22%3A%22SOLR-2.0.0B.TGZ(105.7KB)%22%7D%2C%7B%22x%22%3A314.28244%2C%22y%22%3A478.18192%2C%22width%22%3A95.26706000000001%2C%22height%22%3A15.625609999999995%2C%22text%22%3A%222014-02-28%22%7D%2C%7B%22x%22%3A180.48053%2C%22y%22%3A478.36578%2C%22width%22%3A34.148300000000006%2C%22height%22%3A14.768380000000036%2C%22text%22%3A%22BETA%22%7D%2C%7B%22x%22%3A58.03251%2C%22y%22%3A478.34225%2C%22width%22%3A55.075419999999994%2C%22height%22%3A14.638490000000047%2C%22text%22%3A%222.0.0B%22%7D%2C%7B%22x%22%3A179.9556%2C%22y%22%3A500.85956%2C%22width%22%3A47.88822999999999%2C%22height%22%3A15.996579999999994%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A825.58014%2C%22y%22%3A501.71118%2C%22width%22%3A35.20781999999997%2C%22height%22%3A15.24036000000001%2C%22text%22%3A%22DLL%22%7D%2C%7B%22x%22%3A313.93988%2C%22y%22%3A501.82816%2C%22width%22%3A94.89968999999996%2C%22height%22%3A15.230939999999919%2C%22text%22%3A%222011-11-28%22%7D%2C%7B%22x%22%3A63.309166%2C%22y%22%3A501.7226%2C%22width%22%3A46.751944%2C%22height%22%3A16.030500000000018%2C%22text%22%3A%221.0.2%22%7D%2C%7B%22x%22%3A619.76746%2C%22y%22%3A501.73056%2C%22width%22%3A175.26393999999993%2C%22height%22%3A17.08904000000001%2C%22text%22%3A%22SOLR-1.0.2.TGZ(98.9KB)%22%7D%2C%7B%22x%22%3A180.14478%2C%22y%22%3A525.2299%2C%22width%22%3A49.26590999999999%2C%22height%22%3A17.088699999999903%2C%22text%22%3A%22STABLE%22%7D%2C%7B%22x%22%3A61.68375%2C%22y%22%3A525.64557%2C%22width%22%3A46.80902499999999%2C%22height%22%3A16.204470000000015%2C%22text%22%3A%221.0.1%22%7D%2C%7B%22x%22%3A313.91135%2C%22y%22%3A526.6217%2C%22width%22%3A94.37670999999995%2C%22height%22%3A14.839849999999956%2C%22text%22%3A%222011-06-04%22%7D%2C%7B%22x%22%3A617.1133%2C%22y%22%3A526.4978%2C%22width%22%3A185.65323999999998%2C%22height%22%3A18.105959999999982%2C%22text%22%3A%22SOLR-1.0.1.TGZ(98.3KB)%22%7D%2C%7B%22x%22%3A313.21323%2C%22y%22%3A550.97516%2C%22width%22%3A95.03346999999997%2C%22height%22%3A15.475340000000074%2C%22text%22%3A%222010-06-22%22%7D%2C%7B%22x%22%3A618.9618%2C%22y%22%3A550.8294%2C%22width%22%3A195.57629999999995%2C%22height%22%3A17.02827000000002%2C%22text%22%3A%22SOLR-0.9.11.TGZ(96.1KB)%22%7D%2C%7B%22x%22%3A56.453453%2C%22y%22%3A551.29236%2C%22width%22%3A57.32334099999999%2C%22height%22%3A15.227599999999939%2C%22text%22%3A%220.9.11%22%7D%2C%7B%22x%22%3A180.58617%2C%22y%22%3A552.1471%2C%22width%22%3A33.46584999999999%2C%22height%22%3A14.807999999999993%2C%22text%22%3A%22BETA%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u01c49dde%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u3d71c879\" id=\"u3d71c879\"><span data-lake-id=\"u32b6de0b\" id=\"u32b6de0b\">下载成功后，解压获取：</span></p><ol list=\"u548e393b\"><li fid=\"u78a1be31\" data-lake-id=\"u3ef26699\" id=\"u3ef26699\"><span data-lake-id=\"u34a356b5\" id=\"u34a356b5\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">php_solr.dll </span></li><li fid=\"u78a1be31\" data-lake-id=\"u5ae30239\" id=\"u5ae30239\"><span data-lake-id=\"uc1311ace\" id=\"uc1311ace\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">php_solr.pdb</span></li></ol><p data-lake-id=\"uc3bf10c1\" id=\"uc3bf10c1\"><span data-lake-id=\"ud89541d4\" id=\"ud89541d4\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">将压缩包的php_solr.dll、php_solr.pdb 放到你的 php 扩展目录下 php/ext/ 下。 </span></p><p data-lake-id=\"u0998959a\" id=\"u0998959a\"><span data-lake-id=\"u6aee6a2c\" id=\"u6aee6a2c\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">php.ini中加入 extension</span><span data-lake-id=\"u0b6f70ed\" id=\"u0b6f70ed\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 127, 89)\">=</span><span data-lake-id=\"ufdbf0cd5\" id=\"ufdbf0cd5\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">php_solr.dll </span></p><p data-lake-id=\"u95499e03\" id=\"u95499e03\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658108202536-3d93ee60-5d56-4be8-8aa3-91c280883f42.png%22%2C%22taskId%22%3A%22u2e04a2ca-59af-471e-ba06-7220993c8c5%22%2C%22clientId%22%3A%22u7953d6aa-a114-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A566.9434166294104%2C%22height%22%3A254%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A42409%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A626%2C%22originHeight%22%3A280%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%5BMEMCACHE%5D%201945%201946%20EXTENSION%20%E4%B8%89%20PHP-7.3.X_MEMCACHE.DLL%20%5BREDIS%5D%201947%20EXTENSION%20%E4%B8%89%20PHP_REDIS.DLL%201948%20%5BXDEBUG%5D%201949%20%3BZEND_EXTENSION%20%E4%B8%89%20PHP_XDEBUG.DLL%201950%20%3BXDEBUG.REMOTE_ENABLE%20%E4%B8%89%20ON%201951%20%3BXDEBUG.REMOTE_HOST%20%E4%B8%89%20LOCALHOST%201952%20%3BXDEBUG.REMOTE_PORT%20%E4%B8%89%209100%201953%201954%20%5BSOLR%5D%201955%20LEXTENSION%20%E4%B8%89%20PHP_SOLR.DLL%201956%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A76.89062%2C%22y%22%3A8.797073%2C%22width%22%3A87.26209000000001%2C%22height%22%3A14.868903000000001%2C%22text%22%3A%22%5BMEMCACHE%5D%22%7D%2C%7B%22x%22%3A3.5724766%2C%22y%22%3A10.748589%2C%22width%22%3A34.0890434%2C%22height%22%3A11.918103999999998%2C%22text%22%3A%221945%22%7D%2C%7B%22x%22%3A2.2622077%2C%22y%22%3A32.69144%2C%22width%22%3A36.0133663%2C%22height%22%3A12.385235000000002%2C%22text%22%3A%221946%22%7D%2C%7B%22x%22%3A72.94251%2C%22y%22%3A30.476522%2C%22width%22%3A322.09301000000005%2C%22height%22%3A16.838522%2C%22text%22%3A%22EXTENSION%20%E4%B8%89%20PHP-7.3.X_MEMCACHE.DLL%22%7D%2C%7B%22x%22%3A73.691574%2C%22y%22%3A52.210217%2C%22width%22%3A63.55560599999998%2C%22height%22%3A15.786158999999998%2C%22text%22%3A%22%5BREDIS%5D%22%7D%2C%7B%22x%22%3A2.3852699%2C%22y%22%3A54.413486%2C%22width%22%3A35.4887401%2C%22height%22%3A12.436754%2C%22text%22%3A%221947%22%7D%2C%7B%22x%22%3A72.1131%2C%22y%22%3A73.99642%2C%22width%22%3A238.1414%2C%22height%22%3A15.90419%2C%22text%22%3A%22EXTENSION%20%E4%B8%89%20PHP_REDIS.DLL%22%7D%2C%7B%22x%22%3A1.8011923%2C%22y%22%3A76.594215%2C%22width%22%3A36.3006827%2C%22height%22%3A12.826661000000001%2C%22text%22%3A%221948%22%7D%2C%7B%22x%22%3A70.80085%2C%22y%22%3A96.65377%2C%22width%22%3A75.61811%2C%22height%22%3A16.69972%2C%22text%22%3A%22%5BXDEBUG%5D%22%7D%2C%7B%22x%22%3A2.192181%2C%22y%22%3A98.092285%2C%22width%22%3A36.086099000000004%2C%22height%22%3A12.805054999999996%2C%22text%22%3A%221949%22%7D%2C%7B%22x%22%3A74.41531%2C%22y%22%3A117.34986%2C%22width%22%3A302.44732999999997%2C%22height%22%3A17.106449999999995%2C%22text%22%3A%22%3BZEND_EXTENSION%20%E4%B8%89%20PHP_XDEBUG.DLL%22%7D%2C%7B%22x%22%3A2.4398165%2C%22y%22%3A120.16263%2C%22width%22%3A36.0425215%2C%22height%22%3A13.189800000000005%2C%22text%22%3A%221950%22%7D%2C%7B%22x%22%3A74.17783%2C%22y%22%3A141.11719%2C%22width%22%3A237.85714%2C%22height%22%3A16.426389999999998%2C%22text%22%3A%22%3BXDEBUG.REMOTE_ENABLE%20%E4%B8%89%20ON%22%7D%2C%7B%22x%22%3A2.325568%2C%22y%22%3A142.00826%2C%22width%22%3A35.735406000000005%2C%22height%22%3A13.956389999999999%2C%22text%22%3A%221951%22%7D%2C%7B%22x%22%3A75.005226%2C%22y%22%3A161.47113%2C%22width%22%3A291.882804%2C%22height%22%3A17.623890000000017%2C%22text%22%3A%22%3BXDEBUG.REMOTE_HOST%20%E4%B8%89%20LOCALHOST%22%7D%2C%7B%22x%22%3A2.4103525%2C%22y%22%3A163.8028%2C%22width%22%3A36.0436845%2C%22height%22%3A13.099910000000023%2C%22text%22%3A%221952%22%7D%2C%7B%22x%22%3A74.203316%2C%22y%22%3A185.33376%2C%22width%22%3A244.494384%2C%22height%22%3A16.849649999999997%2C%22text%22%3A%22%3BXDEBUG.REMOTE_PORT%20%E4%B8%89%209100%22%7D%2C%7B%22x%22%3A1.9859624%2C%22y%22%3A185.69519%2C%22width%22%3A36.6026176%2C%22height%22%3A12.717090000000013%2C%22text%22%3A%221953%22%7D%2C%7B%22x%22%3A1.7538036%2C%22y%22%3A207.31664%2C%22width%22%3A37.517516400000005%2C%22height%22%3A13.232489999999984%2C%22text%22%3A%221954%22%7D%2C%7B%22x%22%3A70.13265%2C%22y%22%3A226.20433%2C%22width%22%3A59.681500000000014%2C%22height%22%3A20.14437000000001%2C%22text%22%3A%22%5BSOLR%5D%22%7D%2C%7B%22x%22%3A2.273634%2C%22y%22%3A230.36745%2C%22width%22%3A35.299093%2C%22height%22%3A11.743130000000008%2C%22text%22%3A%221955%22%7D%2C%7B%22x%22%3A71.33938%2C%22y%22%3A250.28868%2C%22width%22%3A230.68079%2C%22height%22%3A18.804550000000006%2C%22text%22%3A%22LEXTENSION%20%E4%B8%89%20PHP_SOLR.DLL%22%7D%2C%7B%22x%22%3A3.219057%2C%22y%22%3A252.58185%2C%22width%22%3A35.38164%2C%22height%22%3A12.905850000000015%2C%22text%22%3A%221956%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ua670e885%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u0d566327\" id=\"u0d566327\"><br></p><p data-lake-id=\"u3e020436\" id=\"u3e020436\"><span data-lake-id=\"u7874fc55\" id=\"u7874fc55\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">我的集成环境位置： </span><span data-lake-id=\"u16d10921\" id=\"u16d10921\">D:\\phpEnv\\php\\php-7.3\\ext</span></p><p data-lake-id=\"ue259552e\" id=\"ue259552e\"><span data-lake-id=\"u3579a79e\" id=\"u3579a79e\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">重启服务器，查看phpinfo</span><span data-lake-id=\"u48771f9e\" id=\"u48771f9e\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153)\">()</span><span data-lake-id=\"u6e7a4e74\" id=\"u6e7a4e74\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">，</span></p><p data-lake-id=\"u34e55f85\" id=\"u34e55f85\"><span data-lake-id=\"uf87aa0b8\" id=\"uf87aa0b8\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0); background-color: rgb(250, 250, 250)\">是否有显示solr扩展加载成功。</span></p><p data-lake-id=\"u1f14ff00\" id=\"u1f14ff00\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658108254208-edbc8d29-1a2f-483b-b39e-44219d65f46d.png%22%2C%22taskId%22%3A%22u449d70c2-4b36-495c-b1b3-6b695283693%22%2C%22clientId%22%3A%22u7953d6aa-a114-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A948.2264492188382%2C%22height%22%3A601%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A61684%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1047%2C%22originHeight%22%3A664%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22SODIUM%20SODIUM%20SUPPORT%20ENABLED%201.0.17%20LIBSODIUM%20HEADERS%20VERSION%201.0.17%20LIBSODIUM%20LIBRARY%20VERSION%20SOLR%20SOLR%20SUPPORT%20ENABLED%202.5.1%20VERSION%20SEP%209%202020%20LAST%20BUILD%20DATE%2018%3A04%3A54%20LAST%20BUILD%20TIME%20SPL%20SPL%20SUPPORT%20ENABLED%20OUTERLTERATOR%2C%20RECURSIVELTERATOR%2CSEEKABLELTERATOR%2CSPLOBSERVERVERVER%2C%20SPISUBJECT%20INTERFACES%20APPENDITERATOR%2CARRAYLTERATOR%2C%20ARRAYOBJECT%2CBADFUNCTIONCALLEXCEPTION%2CBADMETHODCALLEXCEPTION%2C%20CLASSES%20CACHINGLTERATOR%2C%20CALLBACKFITERITERATOR%2CDIRECTORYLTERATOR%2CDOMAINEXCEPTION%2CEMPTYLTERATOR%2C%20IFLESYSTEMITERATOR%2CFLTERITERATOR%2C%20GLOBITERATOR%20INFINITERATOR%20INVALDARQUMENTEXCEP%20TERATOR%2C%20ITERATORATO%20LENGTHEXCEPTION%2C%20LIMITLTERATOR%2C%20LOGICEXCEPTION%2CMULTIPLELTERATOR%2C%20NOREWINDLTERATOR%2C%20OUTOFBOUNDSEXCEPTION%2C%20OUTOFRANGEEXCEPTION%2COVERFLOVEXCEPTION%2C%20PARENTITERATOR%2C%20RANGEEXCEPTION.%20RECURSIVEARRAVITERATOR%2C%20RECURSIVECACHINGLTERATOR%2C%20RECURSIVECALLBACKFITERITERATOR%2C%20RECURSIVEDIRECTOR%2C%20I%20RECURSIVEFITERITERATOR%2CRECURSIVELTERATORITERATOR%2C%20RECURSIVEREGEXITERATOR%2C%20RECURSIVETREELTERATOR%2C%20I%20REGEXTTERATOR%2C%20RUNTINEEXCEPTION%2C%20SPIDOUBLYLINKEDLIST%2C%20SPIFIFILELNFO%2C%20SPIFIECT%2CSPIFIXEDARRAY%2CSPLHEAP%20I%20SPIMINHEAP%2CSPIMAXHEAP%2CSPLOBJECISTORAGE%2CSPIPIORITYQUEUEUE%2C%20SPLQUEUE%2C%20SPISTACK%2CSPITEMPFLEOBJECT%2C%20UNDERFLOWEXCEPTION%2C%20UNEXPECTEDVALUEEXCEPTION%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A484.27493%2C%22y%22%3A28.612854%2C%22width%22%3A82.51492999999999%2C%22height%22%3A17.747131000000003%2C%22text%22%3A%22SODIUM%22%7D%2C%7B%22x%22%3A128.14314%2C%22y%22%3A76.94348%2C%22width%22%3A109.61417%2C%22height%22%3A14.11787600000001%2C%22text%22%3A%22SODIUM%20SUPPORT%22%7D%2C%7B%22x%22%3A669.41%2C%22y%22%3A77.1417%2C%22width%22%3A56.078500000000076%2C%22height%22%3A13.65146%2C%22text%22%3A%22ENABLED%22%7D%2C%7B%22x%22%3A359.52463%2C%22y%22%3A102.97664%2C%22width%22%3A38.48651000000001%2C%22height%22%3A13.994185000000002%2C%22text%22%3A%221.0.17%22%7D%2C%7B%22x%22%3A14.855459%2C%22y%22%3A104.09466%2C%22width%22%3A177.682121%2C%22height%22%3A13.59993%2C%22text%22%3A%22LIBSODIUM%20HEADERS%20VERSION%22%7D%2C%7B%22x%22%3A359.5485%2C%22y%22%3A130.60243%2C%22width%22%3A38.40602999999999%2C%22height%22%3A13.355580000000003%2C%22text%22%3A%221.0.17%22%7D%2C%7B%22x%22%3A14.018205%2C%22y%22%3A130.96011%2C%22width%22%3A171.543375%2C%22height%22%3A15.046710000000019%2C%22text%22%3A%22LIBSODIUM%20LIBRARY%20VERSION%22%7D%2C%7B%22x%22%3A504.48724%2C%22y%22%3A176.77916%2C%22width%22%3A41.44251000000003%2C%22height%22%3A17.06369000000001%2C%22text%22%3A%22SOLR%22%7D%2C%7B%22x%22%3A138.69418%2C%22y%22%3A224.4907%2C%22width%22%3A87.34040000000002%2C%22height%22%3A14.082949999999983%2C%22text%22%3A%22SOLR%20SUPPORT%22%7D%2C%7B%22x%22%3A669.76996%2C%22y%22%3A225.76698%2C%22width%22%3A54.80354%2C%22height%22%3A12.547920000000005%2C%22text%22%3A%22ENABLED%22%7D%2C%7B%22x%22%3A358.1972%2C%22y%22%3A251.05997%2C%22width%22%3A29.866370000000018%2C%22height%22%3A13.140500000000003%2C%22text%22%3A%222.5.1%22%7D%2C%7B%22x%22%3A15.028681%2C%22y%22%3A251.54384%2C%22width%22%3A50.302619%2C%22height%22%3A12.963940000000036%2C%22text%22%3A%22VERSION%22%7D%2C%7B%22x%22%3A358.78983%2C%22y%22%3A278.062%2C%22width%22%3A71.59063000000003%2C%22height%22%3A13.604299999999967%2C%22text%22%3A%22SEP%209%202020%22%7D%2C%7B%22x%22%3A15.33238%2C%22y%22%3A279.162%2C%22width%22%3A101.55742%2C%22height%22%3A13.35503%2C%22text%22%3A%22LAST%20BUILD%20DATE%22%7D%2C%7B%22x%22%3A362.21878%2C%22y%22%3A305.1137%2C%22width%22%3A50.51660000000004%2C%22height%22%3A12.266599999999983%2C%22text%22%3A%2218%3A04%3A54%22%7D%2C%7B%22x%22%3A17.708944%2C%22y%22%3A306.16177%2C%22width%22%3A101.693986%2C%22height%22%3A12.352450000000033%2C%22text%22%3A%22LAST%20BUILD%20TIME%22%7D%2C%7B%22x%22%3A506.9157%2C%22y%22%3A349.59256%2C%22width%22%3A39.41473999999994%2C%22height%22%3A18.809300000000007%2C%22text%22%3A%22SPL%22%7D%2C%7B%22x%22%3A140.03929%2C%22y%22%3A397.7571%2C%22width%22%3A85.36347%2C%22height%22%3A16.384749999999997%2C%22text%22%3A%22SPL%20SUPPORT%22%7D%2C%7B%22x%22%3A669.8436%2C%22y%22%3A399.61124%2C%22width%22%3A54.26119999999992%2C%22height%22%3A13.39812999999998%2C%22text%22%3A%22ENABLED%22%7D%2C%7B%22x%22%3A359.2481%2C%22y%22%3A425.20105%2C%22width%22%3A465.193%2C%22height%22%3A15.60005000000001%2C%22text%22%3A%22OUTERLTERATOR%2C%20RECURSIVELTERATOR%2CSEEKABLELTERATOR%2CSPLOBSERVERVERVER%2C%20SPISUBJECT%22%7D%2C%7B%22x%22%3A15.14119%2C%22y%22%3A426.2633%2C%22width%22%3A68.06030000000001%2C%22height%22%3A13.15082000000001%2C%22text%22%3A%22INTERFACES%22%7D%2C%7B%22x%22%3A359.2008%2C%22y%22%3A451.707%2C%22width%22%3A609.2213999999999%2C%22height%22%3A17.180240000000026%2C%22text%22%3A%22APPENDITERATOR%2CARRAYLTERATOR%2C%20ARRAYOBJECT%2CBADFUNCTIONCALLEXCEPTION%2CBADMETHODCALLEXCEPTION%2C%22%7D%2C%7B%22x%22%3A15.140481%2C%22y%22%3A453.52536%2C%22width%22%3A50.721229%2C%22height%22%3A12.821720000000028%2C%22text%22%3A%22CLASSES%22%7D%2C%7B%22x%22%3A359.45135%2C%22y%22%3A470.66193%2C%22width%22%3A562.6085499999999%2C%22height%22%3A13.786429999999996%2C%22text%22%3A%22CACHINGLTERATOR%2C%20CALLBACKFITERITERATOR%2CDIRECTORYLTERATOR%2CDOMAINEXCEPTION%2CEMPTYLTERATOR%2C%22%7D%2C%7B%22x%22%3A359.58362%2C%22y%22%3A487.522%2C%22width%22%3A655.12524%2C%22height%22%3A15.286200000000008%2C%22text%22%3A%22IFLESYSTEMITERATOR%2CFLTERITERATOR%2C%20GLOBITERATOR%20INFINITERATOR%20INVALDARQUMENTEXCEP%20TERATOR%2C%20ITERATORATO%22%7D%2C%7B%22x%22%3A359.83496%2C%22y%22%3A505.57114%2C%22width%22%3A525.3010899999999%2C%22height%22%3A13.222660000000019%2C%22text%22%3A%22LENGTHEXCEPTION%2C%20LIMITLTERATOR%2C%20LOGICEXCEPTION%2CMULTIPLELTERATOR%2C%20NOREWINDLTERATOR%2C%22%7D%2C%7B%22x%22%3A360.21744%2C%22y%22%3A519.877%2C%22width%22%3A629.47799%2C%22height%22%3A15.893570000000068%2C%22text%22%3A%22OUTOFBOUNDSEXCEPTION%2C%20OUTOFRANGEEXCEPTION%2COVERFLOVEXCEPTION%2C%20PARENTITERATOR%2C%20RANGEEXCEPTION.%22%7D%2C%7B%22x%22%3A359.5495%2C%22y%22%3A537.8203%2C%22width%22%3A676.6457%2C%22height%22%3A15.117140000000063%2C%22text%22%3A%22RECURSIVEARRAVITERATOR%2C%20RECURSIVECACHINGLTERATOR%2C%20RECURSIVECALLBACKFITERITERATOR%2C%20RECURSIVEDIRECTOR%2C%22%7D%2C%7B%22x%22%3A358.6352%2C%22y%22%3A556.1956%2C%22width%22%3A593.72686%2C%22height%22%3A13.559200000000033%2C%22text%22%3A%22I%20RECURSIVEFITERITERATOR%2CRECURSIVELTERATORITERATOR%2C%20RECURSIVEREGEXITERATOR%2C%20RECURSIVETREELTERATOR%2C%22%7D%2C%7B%22x%22%3A358.631%2C%22y%22%3A572.1839%2C%22width%22%3A663.2129%2C%22height%22%3A14.895999999999958%2C%22text%22%3A%22I%20REGEXTTERATOR%2C%20RUNTINEEXCEPTION%2C%20SPIDOUBLYLINKEDLIST%2C%20SPIFIFILELNFO%2C%20SPIFIECT%2CSPIFIXEDARRAY%2CSPLHEAP%22%7D%2C%7B%22x%22%3A359.03574%2C%22y%22%3A589.50195%2C%22width%22%3A657.28006%2C%22height%22%3A15.168450000000007%2C%22text%22%3A%22I%20SPIMINHEAP%2CSPIMAXHEAP%2CSPLOBJECISTORAGE%2CSPIPIORITYQUEUEUE%2C%20SPLQUEUE%2C%20SPISTACK%2CSPITEMPFLEOBJECT%2C%22%7D%2C%7B%22x%22%3A359.56665%2C%22y%22%3A606.49054%2C%22width%22%3A306.64075%2C%22height%22%3A13.337220000000002%2C%22text%22%3A%22UNDERFLOWEXCEPTION%2C%20UNEXPECTEDVALUEEXCEPTION%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u5fe2cd3d%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"ubnsN\" id=\"ubnsN\"><span data-lake-id=\"u2d32e0da\" id=\"u2d32e0da\" style=\"color: rgb(79, 79, 79)\"> 常用操作</span></h1><p data-lake-id=\"ub847aa3c\" id=\"ub847aa3c\"><strong><span data-lake-id=\"ub1ee1fb1\" id=\"ub1ee1fb1\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">创建core，-c指定创建的core名</span></strong></p><p data-lake-id=\"u1d5d2eb1\" id=\"u1d5d2eb1\"><span data-lake-id=\"u7224f4db\" id=\"u7224f4db\" class=\"lake-fontsize-11\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">.</span><span data-lake-id=\"uaa441e98\" id=\"uaa441e98\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">/</span><span data-lake-id=\"u7e618df1\" id=\"u7e618df1\" class=\"lake-fontsize-11\" style=\"color: unset; background-color: rgb(250, 250, 250)\">solr create </span><span data-lake-id=\"u0412e1e2\" id=\"u0412e1e2\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 127, 89); background-color: rgb(250, 250, 250)\">-</span><span data-lake-id=\"ue902c7de\" id=\"ue902c7de\" class=\"lake-fontsize-11\" style=\"color: unset; background-color: rgb(250, 250, 250)\">c test_core1 </span><span data-lake-id=\"uf732dbcd\" id=\"uf732dbcd\" class=\"lake-fontsize-12\" style=\"color: rgb(153, 153, 153); background-color: rgb(250, 250, 250)\">1</span></p><p data-lake-id=\"uba8472b6\" id=\"uba8472b6\"><strong><span data-lake-id=\"uc987119a\" id=\"uc987119a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">删除core，-c指定删除的core名</span></strong></p><p data-lake-id=\"u2e63b801\" id=\"u2e63b801\"><span data-lake-id=\"u59f3e19b\" id=\"u59f3e19b\" style=\"color: rgb(153, 153, 153)\">.</span><span data-lake-id=\"u3dfb2fb4\" id=\"u3dfb2fb4\" style=\"color: rgb(166, 127, 89)\">/</span><span data-lake-id=\"uc8cb8665\" id=\"uc8cb8665\">solr delete </span><span data-lake-id=\"u688a3683\" id=\"u688a3683\" style=\"color: rgb(166, 127, 89)\">-</span><span data-lake-id=\"u383362df\" id=\"u383362df\">c test_core1</span></p><p data-lake-id=\"ufb0f8658\" id=\"ufb0f8658\"><span data-lake-id=\"ud0ed688c\" id=\"ud0ed688c\">​</span><br></p><p data-lake-id=\"udff107a2\" id=\"udff107a2\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658127465096-e38fc348-6514-4fc7-a764-ce946777deb2.png%22%2C%22taskId%22%3A%22u7817f55c-446d-4bab-8977-7ab117c7e06%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1267%2C%22originHeight%22%3A575%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ua150db6d%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ua76c3951\" id=\"ua76c3951\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658127470711-73c2ff90-c5ed-438a-b040-e14c99ded58a.png%22%2C%22taskId%22%3A%22ua65c7a53-a5a8-4097-a2eb-dcaf0120f7b%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A640%2C%22originHeight%22%3A228%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uddf79326%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u177831bf\" id=\"u177831bf\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658127476667-41a12875-1ffb-4285-bd57-21ce09aa06a6.png%22%2C%22taskId%22%3A%22ud0110b6f-c137-4eb6-87e2-57ab7dc379c%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A641%2C%22originHeight%22%3A304%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u801b6d25%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u44e10ea5\" id=\"u44e10ea5\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658127481012-dc1b0ebf-6f3e-49c9-bd52-96e2259dd09e.png%22%2C%22taskId%22%3A%22u8344ee63-3135-4bf6-b002-f9544c51bc8%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A620%2C%22originHeight%22%3A240%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u17ca993b%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u5e3ef02b\" id=\"u5e3ef02b\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1658127485301-62701194-113b-487c-92be-12289aabb291.png%22%2C%22taskId%22%3A%22uebc5e4ad-238f-4943-b6bc-4c5eb294d5f%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A446%2C%22originHeight%22%3A300%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u9b3fd6ae%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ubc4e595a\" id=\"ubc4e595a\"><br></p><h2 data-lake-id=\"VJyoE\" id=\"VJyoE\"><span data-lake-id=\"ua726a136\" id=\"ua726a136\">二、创建核心</span></h2><h3 data-lake-id=\"TTO9Q\" id=\"TTO9Q\"><span data-lake-id=\"ubf728daf\" id=\"ubf728daf\">2.1 创建核心前准备工作</span></h3><p data-lake-id=\"ua27a148e\" id=\"ua27a148e\"><span data-lake-id=\"ub01eb425\" id=\"ub01eb425\">每个核心都是solr的一个实例，一个solr服务可以创建多个核心，每个核心都可以进行自己独立配置。</span></p><ul list=\"u877e5e3d\"><li fid=\"uec96222d\" data-lake-id=\"ud8f8b0e3\" id=\"ud8f8b0e3\"><span data-lake-id=\"u1d826e75\" id=\"u1d826e75\">1.切换至solr_home\\server\\solr目录，例如：E:\\solr-8.1.1\\server\\solr，在该目录下创建一个文件夹，文件夹名称与核心名称相同。 </span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127788037-3dd84813-0a7f-456b-a0e1-57e0833147f6.webp%22%2C%22taskId%22%3A%22u93f16027-4409-4e7c-ac5d-17010743d21%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A814%2C%22originHeight%22%3A300%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uc850f99b%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><span data-lake-id=\"ubb4f07b3\" id=\"ubb4f07b3\">_v_images/2019062</span></li><li fid=\"uec96222d\" data-lake-id=\"u6800eb5d\" id=\"u6800eb5d\"><span data-lake-id=\"ueb191722\" id=\"ueb191722\">2.将E:\\solr-8.1.1\\server\\solr\\configsets_default路径下的conf文件夹复制到new_core目录（E:\\solr-8.1.1\\server\\solr\\new_core）下。</span></li></ul><h3 data-lake-id=\"V73sY\" id=\"V73sY\"><span data-lake-id=\"u7a565caa\" id=\"u7a565caa\">2.2 创建核心</span></h3><h4 data-lake-id=\"ADKrG\" id=\"ADKrG\"><span data-lake-id=\"u8c922129\" id=\"u8c922129\">方式一：打开solr界面，进行如图顺序操作。</span></h4><p data-lake-id=\"u8c2718b2\" id=\"u8c2718b2\"><span data-lake-id=\"u34f571f4\" id=\"u34f571f4\">这种方式 需要 在 E:\\solr-8.1.1\\server\\solr 目录下创建 new_core文件夹</span></p><p data-lake-id=\"u69200590\" id=\"u69200590\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127788016-424a695c-b554-4066-b999-736c33b8b2c3.webp%22%2C%22taskId%22%3A%22u7c769d2b-f93a-425b-9906-0a60d499df7%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1300%2C%22originHeight%22%3A618%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u72b236cd%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h4 data-lake-id=\"sdYns\" id=\"sdYns\"><span data-lake-id=\"u5bc3225c\" id=\"u5bc3225c\">方式二：bin目录下输入命令：solr create -c new_core （推荐）</span></h4><h2 data-lake-id=\"EQ2RX\" id=\"EQ2RX\"><span data-lake-id=\"u82d39258\" id=\"u82d39258\">三、schema</span></h2><p data-lake-id=\"u425c0069\" id=\"u425c0069\"><span data-lake-id=\"uf77a3253\" id=\"uf77a3253\">每个核心core中都有这么一个 schema配置文件。 schema文件可以对索引库的数据类型进行定义，对字段是否进行索引、存储等进行配置，需要针对狠心单独进行配置。 schema的数据类型进本够用，如果不能满足需求，比如说对中文分词、拼音分词等，就可以自定义分词器。 Solr8.1.1 的schema的配置文件名 为managed-schema,home\\server\\solr\\new_core\\conf\\managed-schema（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）。</span></p><h3 data-lake-id=\"ua5cy\" id=\"ua5cy\"><span data-lake-id=\"u7d7e8ca7\" id=\"u7d7e8ca7\">3.1 schema主要成员</span></h3><ul list=\"u9da2a0a7\"><li fid=\"u7833d892\" data-lake-id=\"ud4baf83f\" id=\"ud4baf83f\"><span data-lake-id=\"ub3480c67\" id=\"ub3480c67\">（1） fieldType：为field定义类型，最主要作用是定义分词器，分词器决定着如何从文档中检索关键字。</span></li><li fid=\"u7833d892\" data-lake-id=\"u02bf10c1\" id=\"u02bf10c1\"><span data-lake-id=\"ua98ff6ae\" id=\"ua98ff6ae\">（2） analyzer：fieldType的子元素，是分词器，由tokenizer和filter组成。例如</span></li></ul><p data-lake-id=\"ub7d66cd0\" id=\"ub7d66cd0\"><span data-lake-id=\"u2ff29dd8\" id=\"u2ff29dd8\">&lt;fieldType </span><span data-lake-id=\"u392a8980\" id=\"u392a8980\">name</span><span data-lake-id=\"ue911449d\" id=\"ue911449d\">=</span><span data-lake-id=\"uf3273171\" id=\"uf3273171\">&quot;text_tr&quot;</span><span data-lake-id=\"ub35088c1\" id=\"ub35088c1\"> class=</span><span data-lake-id=\"u38ff5004\" id=\"u38ff5004\">&quot;solr.TextField&quot;</span><span data-lake-id=\"u22d09646\" id=\"u22d09646\"> positionIncrementGap=</span><span data-lake-id=\"u84cef328\" id=\"u84cef328\">&quot;100&quot;</span><span data-lake-id=\"ucd7c80c2\" id=\"ucd7c80c2\">&gt;     &lt;analyzer&gt;       &lt;tokenizer </span><span data-lake-id=\"u8a3a6b68\" id=\"u8a3a6b68\">class</span><span data-lake-id=\"u87c247fb\" id=\"u87c247fb\">=</span><span data-lake-id=\"u66fa1143\" id=\"u66fa1143\">&quot;solr.StandardTokenizerFactory&quot;</span><span data-lake-id=\"u01f85062\" id=\"u01f85062\">/&gt;       &lt;filter </span><span data-lake-id=\"u8f31b89b\" id=\"u8f31b89b\">class</span><span data-lake-id=\"u849fe013\" id=\"u849fe013\">=</span><span data-lake-id=\"u4912174c\" id=\"u4912174c\">&quot;solr.TurkishLowerCaseFilterFactory&quot;</span><span data-lake-id=\"uc3830171\" id=\"uc3830171\">/&gt;       &lt;filter </span><span data-lake-id=\"uc5fe508b\" id=\"uc5fe508b\">class</span><span data-lake-id=\"uc1a4218d\" id=\"uc1a4218d\">=</span><span data-lake-id=\"ucb3bfbd3\" id=\"ucb3bfbd3\">&quot;solr.StopFilterFactory&quot;</span><span data-lake-id=\"ue7919683\" id=\"ue7919683\"> words=</span><span data-lake-id=\"u45f91f30\" id=\"u45f91f30\">&quot;lang/stopwords_tr.txt&quot;</span><span data-lake-id=\"ucbd6e5f3\" id=\"ucbd6e5f3\"> ignoreCase=</span><span data-lake-id=\"udaa84c47\" id=\"udaa84c47\">&quot;false&quot;</span><span data-lake-id=\"ud40e5a62\" id=\"ud40e5a62\">/&gt;       &lt;filter </span><span data-lake-id=\"u3624f0fa\" id=\"u3624f0fa\">class</span><span data-lake-id=\"u1be55c09\" id=\"u1be55c09\">=</span><span data-lake-id=\"u045081f1\" id=\"u045081f1\">&quot;solr.SnowballPorterFilterFactory&quot;</span><span data-lake-id=\"u2e1c13c3\" id=\"u2e1c13c3\"> language=</span><span data-lake-id=\"u8e5c02d0\" id=\"u8e5c02d0\">&quot;Turkish&quot;</span><span data-lake-id=\"u1144f222\" id=\"u1144f222\">/&gt;     &lt;/analyzer&gt;   &lt;/fieldType&gt; </span><span data-lake-id=\"u2ae14047\" id=\"u2ae14047\">复制代码</span></p><ul list=\"u96ad4317\"><li fid=\"uf8556db9\" data-lake-id=\"u99fee3ac\" id=\"u99fee3ac\"><span data-lake-id=\"u4ccf6671\" id=\"u4ccf6671\">（3） field：字段，用来创建索引,如果这个字段需要生成索引，则需要设置的indexed为true，需要存储设置stored属性为true。例如：</span></li></ul><p data-lake-id=\"ud689fcea\" id=\"ud689fcea\"><span data-lake-id=\"uc34835f9\" id=\"uc34835f9\">&lt;field </span><span data-lake-id=\"ub38e768b\" id=\"ub38e768b\">name</span><span data-lake-id=\"uca2ecbc7\" id=\"uca2ecbc7\">=</span><span data-lake-id=\"u609c3f80\" id=\"u609c3f80\">&quot;age&quot;</span><span data-lake-id=\"u8639f785\" id=\"u8639f785\"> type=</span><span data-lake-id=\"u48b89b5a\" id=\"u48b89b5a\">&quot;pint&quot;</span><span data-lake-id=\"u56c388cd\" id=\"u56c388cd\"> indexed=</span><span data-lake-id=\"u5e93f877\" id=\"u5e93f877\">&quot;true&quot;</span><span data-lake-id=\"u40ad92f8\" id=\"u40ad92f8\"> stored=</span><span data-lake-id=\"u9ce2c84c\" id=\"u9ce2c84c\">&quot;true&quot;</span><span data-lake-id=\"u7d6f8529\" id=\"u7d6f8529\">/&gt; </span><span data-lake-id=\"uafdc29f4\" id=\"uafdc29f4\">复制代码</span></p><h3 data-lake-id=\"aajOB\" id=\"aajOB\"><span data-lake-id=\"u276b0ee8\" id=\"u276b0ee8\">3.2 添加索引字段</span></h3><ul list=\"u458c29a5\"><li fid=\"u76bd3a26\" data-lake-id=\"u589ba43a\" id=\"u589ba43a\"><span data-lake-id=\"ud34239aa\" id=\"ud34239aa\">方式一：直接修改managed-schema配置文件（不推荐，修改后需要重启服务），例如：</span></li></ul><p data-lake-id=\"u437b52e2\" id=\"u437b52e2\"><span data-lake-id=\"ucbecdcfa\" id=\"ucbecdcfa\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248)\">&lt;field </span><span data-lake-id=\"u99bd4f6c\" id=\"u99bd4f6c\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51)\">name</span><span data-lake-id=\"u063478e9\" id=\"u063478e9\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248)\">=</span><span data-lake-id=\"ud92b2c7e\" id=\"ud92b2c7e\" class=\"lake-fontsize-9\" style=\"color: rgb(221, 17, 68)\">&quot;age&quot;</span><span data-lake-id=\"u439f5245\" id=\"u439f5245\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248)\"> type=</span><span data-lake-id=\"u9bc85f1a\" id=\"u9bc85f1a\" class=\"lake-fontsize-9\" style=\"color: rgb(221, 17, 68)\">&quot;pint&quot;</span><span data-lake-id=\"ua9edcb48\" id=\"ua9edcb48\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248)\"> indexed=</span><span data-lake-id=\"u02233658\" id=\"u02233658\" class=\"lake-fontsize-9\" style=\"color: rgb(221, 17, 68)\">&quot;true&quot;</span><span data-lake-id=\"u02d4c017\" id=\"u02d4c017\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248)\"> stored=</span><span data-lake-id=\"u835c30fc\" id=\"u835c30fc\" class=\"lake-fontsize-9\" style=\"color: rgb(221, 17, 68)\">&quot;true&quot;</span><span data-lake-id=\"u48b5a0e8\" id=\"u48b5a0e8\" class=\"lake-fontsize-9\" style=\"color: rgb(51, 51, 51); background-color: rgb(248, 248, 248)\">/&gt;</span></p><ul list=\"u4df65f2f\"><li fid=\"u59e3ed36\" data-lake-id=\"u62849e39\" id=\"u62849e39\"><span data-lake-id=\"uf9876f6d\" id=\"uf9876f6d\">方式二：通过solr页面进行添加。（推荐，不需要重启服务）</span></li></ul><p data-lake-id=\"u2aeba663\" id=\"u2aeba663\"><span data-lake-id=\"u0122bead\" id=\"u0122bead\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">![](_v_images/20190623133627274_22114.png =811x)</span></p><h3 data-lake-id=\"wfAys\" id=\"wfAys\"><span data-lake-id=\"u7f42c26b\" id=\"u7f42c26b\">3.3 配置中文分词工具</span></h3><ul list=\"ud2217ce5\"><li fid=\"u3a0ee3e3\" data-lake-id=\"u03813362\" id=\"u03813362\"><span data-lake-id=\"uc6db91cd\" id=\"uc6db91cd\">1.下载中文分词器IKAnalyzer，</span><a href=\"https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F19_nVrOrUrj00rlu13OGOkg\" target=\"_blank\" data-lake-id=\"u98357b0e\" id=\"u98357b0e\"><span data-lake-id=\"u9b94b8f9\" id=\"u9b94b8f9\">下载地址</span></a><span data-lake-id=\"u8aa25391\" id=\"u8aa25391\">，密码：igt9。</span></li><li fid=\"u3a0ee3e3\" data-lake-id=\"uda52d333\" id=\"uda52d333\"><span data-lake-id=\"ue07b7380\" id=\"ue07b7380\">2.解压压缩包包，目录如下：</span></li></ul><p data-lake-id=\"u658f953b\" id=\"u658f953b\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127788037-71d0ec37-c053-45ac-a19b-1f4495e4ee58.webp%22%2C%22taskId%22%3A%22u2185b132-c94c-49dd-af88-fd0f403e627%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A518%2C%22originHeight%22%3A138%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u93455122%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><ul list=\"uf9380dbc\"><li fid=\"u756f9e1e\" data-lake-id=\"u1c3d5dda\" id=\"u1c3d5dda\"><span data-lake-id=\"ud6f28ffa\" id=\"ud6f28ffa\">3.将两个jar包复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib。</span></li><li fid=\"u756f9e1e\" data-lake-id=\"ua4de5822\" id=\"ua4de5822\"><span data-lake-id=\"u990f691b\" id=\"u990f691b\">4.另外将三个配置文件复制到该路径下：E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\classes。如果没有classes文件夹就新建一个。</span></li><li fid=\"u756f9e1e\" data-lake-id=\"u7880eecb\" id=\"u7880eecb\"><span data-lake-id=\"ua9ac769e\" id=\"ua9ac769e\">5.在schema中添加分词器。</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%3CfieldType%20name%3D%5C%22text_ik%5C%22%20class%3D%5C%22solr.TextField%5C%22%3E%5Cn%20%20%3Canalyzer%20type%3D%5C%22index%5C%22%3E%5Cn%5Ct%20%20%3Ctokenizer%20class%3D%5C%22org.wltea.analyzer.lucene.IKTokenizerFactory%5C%22%20useSmart%3D%5C%22false%5C%22%20conf%3D%5C%22ik.conf%5C%22%2F%3E%5Cn%5Ct%20%20%3Cfilter%20class%3D%5C%22solr.LowerCaseFilterFactory%5C%22%2F%3E%5Cn%20%20%3C%2Fanalyzer%3E%5Cn%20%20%3Canalyzer%20type%3D%5C%22query%5C%22%3E%5Cn%5Ct%20%20%3Ctokenizer%20class%3D%5C%22org.wltea.analyzer.lucene.IKTokenizerFactory%5C%22%20useSmart%3D%5C%22true%5C%22%20conf%3D%5C%22ik.conf%5C%22%2F%3E%5Cn%5Ct%20%20%3Cfilter%20class%3D%5C%22solr.LowerCaseFilterFactory%5C%22%2F%3E%5Cn%20%20%3C%2Fanalyzer%3E%5Cn%3C%2FfieldType%3E%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Q4YIZ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u0ac52fd7\"><li fid=\"u49f1066d\" data-lake-id=\"u75a0ab13\" id=\"u75a0ab13\"><span data-lake-id=\"ub2cbdf91\" id=\"ub2cbdf91\">6.在ext.dic文件中添加自定义的中文词组</span></li><li fid=\"u49f1066d\" data-lake-id=\"uf3d59ec8\" id=\"uf3d59ec8\"><span data-lake-id=\"u8dcf2fc8\" id=\"u8dcf2fc8\">需要重启solr</span></li></ul><p data-lake-id=\"u5453c876\" id=\"u5453c876\"><span data-lake-id=\"uc9c4f7d7\" id=\"uc9c4f7d7\">效果如下： </span></p><p data-lake-id=\"ucff196d9\" id=\"ucff196d9\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127788089-a128751b-080b-4cb5-8903-2951345cf1f8.webp%22%2C%22taskId%22%3A%22u40384c2d-3fcf-4d16-8162-bbc5c27fa9c%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1358%2C%22originHeight%22%3A699%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u64162da3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"lXu1T\" id=\"lXu1T\"><span data-lake-id=\"uc12a67a6\" id=\"uc12a67a6\">四、导入索引数据（mysql数据为例）</span></h2><ul list=\"uaaf2bca8\"><li fid=\"u42903c09\" data-lake-id=\"ufb2c4b14\" id=\"ufb2c4b14\"><span data-lake-id=\"ue3d27fcd\" id=\"ue3d27fcd\">1.创建mysql数据库</span></li></ul><p data-lake-id=\"uac68de7d\" id=\"uac68de7d\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127788040-b8b6f2fa-b4f0-4559-a787-1a52871abc8c.webp%22%2C%22taskId%22%3A%22u42bbddfe-6bf1-4bc2-9055-a0ea4b5a550%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A692%2C%22originHeight%22%3A236%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u59084290%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><ul list=\"u649ae1ae\"><li fid=\"u696f2ab2\" data-lake-id=\"u27474c27\" id=\"u27474c27\"><span data-lake-id=\"uee48f3ce\" id=\"uee48f3ce\">2.在该路径下solr_home\\server\\solr\\new_core\\conf（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf）下新建my-data-config.xml文件</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%3C%3Fxml%20version%3D%5C%221.0%5C%22%20encoding%3D%5C%22UTF-8%5C%22%20%3F%3E%5Cn%3CdataConfig%3E%5Cn%20%20%20%20%3CdataSource%20type%3D%5C%22JdbcDataSource%5C%22%20driver%3D%5C%22com.mysql.jdbc.Driver%5C%22%20url%3D%5C%22jdbc%3Amysql%3A%2F%2Flocalhost%3A3306%2Fsolr_test%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20user%3D%5C%22root%5C%22%20password%3D%5C%22%5C%22%2F%3E%5Cn%20%20%20%20%3Cdocument%3E%5Cn%20%20%20%20%20%20%20%20%3Centity%20name%3D%5C%22user%5C%22%20query%3D%5C%22select%20*%20from%20user%5C%22%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20column%3D%5C%22id%5C%22%20name%3D%5C%22id%5C%22%2F%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20column%3D%5C%22age%5C%22%20name%3D%5C%22age%5C%22%2F%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20column%3D%5C%22name%5C%22%20name%3D%5C%22name%5C%22%2F%3E%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%3Cfield%20column%3D%5C%22hobby%5C%22%20name%3D%5C%22hobby%5C%22%2F%3E%5Cn%20%20%20%20%20%20%20%20%3C%2Fentity%3E%5Cn%20%20%20%20%3C%2Fdocument%3E%5Cn%3C%2FdataConfig%3E%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ckb8p%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u795369c3\"><li fid=\"udb095fd8\" data-lake-id=\"ub2c7fdb5\" id=\"ub2c7fdb5\"><span data-lake-id=\"u887b263e\" id=\"u887b263e\">3.用solr添加数据库字段对应的索引字段，添加后打开managed-schema文件会看到：</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%3Cfield%20name%3D%5C%22name%5C%22%20type%3D%5C%22string%5C%22%20indexed%3D%5C%22true%5C%22%20stored%3D%5C%22true%5C%22%2F%3E%5Cn%3Cfield%20name%3D%5C%22age%5C%22%20type%3D%5C%22pint%5C%22%20indexed%3D%5C%22true%5C%22%20stored%3D%5C%22true%5C%22%2F%3E%5Cn%3Cfield%20name%3D%5C%22hobby%5C%22%20type%3D%5C%22string%5C%22%20indexed%3D%5C%22true%5C%22%20stored%3D%5C%22true%5C%22%2F%3E%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22xrLYf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uccd93892\" id=\"uccd93892\"><strong><span data-lake-id=\"uc0ba7c3d\" id=\"uc0ba7c3d\">请勿添加id字段，该字段已存在，添加会报错</span></strong></p><ul list=\"ua7108edf\"><li fid=\"u62f72e5d\" data-lake-id=\"u5e7950b1\" id=\"u5e7950b1\"><span data-lake-id=\"u6200a4d5\" id=\"u6200a4d5\">4.打开该路径下文件：solr_home\\server\\solr\\new_core\\conf\\solrconfig.xml（E:\\solr-8.1.1\\server\\solr\\core_issuer\\conf\\solrconfig.xml），随便找一个与requestHandler同级节点上添加以下配置。如图：</span></li></ul><p data-lake-id=\"ua345c231\" id=\"ua345c231\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127789705-05706f41-625e-4027-a4d1-1cb9a19bb621.webp%22%2C%22taskId%22%3A%22u46162f86-3d9e-4302-97bd-de0e839379b%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A934%2C%22originHeight%22%3A236%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u450b1c77%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%3CrequestHandler%20name%3D%5C%22%2Fdataimport%5C%22%20class%3D%5C%22org.apache.solr.handler.dataimport.DataImportHandler%5C%22%3E%5Cn%5Ct%3Clst%20name%3D%5C%22defaults%5C%22%3E%5Cn%5Ct%5Ct%3Cstr%20name%3D%5C%22config%5C%22%3Emy-data-config.xml%3C%2Fstr%3E%5Cn%5Ct%3C%2Flst%3E%5Cn%3C%2FrequestHandler%3E%5Cn%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mbuMo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"ue7721a67\"><li fid=\"u50ccd9a2\" data-lake-id=\"ua92aab38\" id=\"ua92aab38\"><span data-lake-id=\"u1eb76909\" id=\"u1eb76909\">5.将solr_home\\dist（E:\\solr-8.1.1\\dist）目录下的solr-dataimporthandler-8.1.1.jar和MySQL驱动（随便找个MySQL驱动）复制到solr_home\\server\\solr-webapp\\webapp\\WEB-INF\\lib（E:\\solr-8.1.1\\server\\solr-webapp\\webapp\\WEB-INF\\lib）目录下。</span></li><li fid=\"u50ccd9a2\" data-lake-id=\"u6fd9996f\" id=\"u6fd9996f\"><span data-lake-id=\"u6f5b5616\" id=\"u6f5b5616\">6.重启solr服务。</span></li><li fid=\"u50ccd9a2\" data-lake-id=\"u5ff52e4c\" id=\"u5ff52e4c\"><span data-lake-id=\"ubab1f41b\" id=\"ubab1f41b\">7.打开solr页面，进行下面操作。</span></li></ul><p data-lake-id=\"uac586b0a\" id=\"uac586b0a\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127789821-cd1c7622-59de-4e9a-b69c-c9ce68fdef58.webp%22%2C%22taskId%22%3A%22u2cc0c352-2afe-4061-944a-cee608cb397%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1209%2C%22originHeight%22%3A664%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uae005891%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><ul list=\"uf1b1cf91\"><li fid=\"u681ef77b\" data-lake-id=\"ud43142e7\" id=\"ud43142e7\"><span data-lake-id=\"uad7a8247\" id=\"uad7a8247\">8.检测数据是否导入成功</span></li></ul><p data-lake-id=\"uc15bcceb\" id=\"uc15bcceb\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127789862-dbbacbb7-e01b-46be-bcd7-80aad8c48a24.webp%22%2C%22taskId%22%3A%22u0a7e4698-424e-449d-9eaa-47f921414b1%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A933%2C%22originHeight%22%3A704%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u6a98f6db%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h3 data-lake-id=\"imjeH\" id=\"imjeH\"><span data-lake-id=\"u70629835\" id=\"u70629835\">如果对索引字段进行中文分词</span></h3><p data-lake-id=\"uc98511d3\" id=\"uc98511d3\"><span data-lake-id=\"u6a4d4393\" id=\"u6a4d4393\">添加对索引字段时，fileType ：选择text_ik</span></p><p data-lake-id=\"ubae93715\" id=\"ubae93715\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127789803-bc546502-4fcb-43cf-a968-b9fda978fe7b.webp%22%2C%22taskId%22%3A%22u6b78e123-0319-4dda-9b2c-1c44ee53a2a%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A974%2C%22originHeight%22%3A721%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u4e01f864%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u21ee617f\" id=\"u21ee617f\"><span data-lake-id=\"uc8bf9fda\" id=\"uc8bf9fda\">效果如图： 查询 </span><strong><span data-lake-id=\"uee962919\" id=\"uee962919\">鲁西化工</span></strong><span data-lake-id=\"u028a9820\" id=\"u028a9820\"> 的结果</span></p><p data-lake-id=\"u0b3c2d6e\" id=\"u0b3c2d6e\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127789921-c9625e48-e98f-4529-83f4-57a6a48b77fc.webp%22%2C%22taskId%22%3A%22ua8e921d1-371b-47bf-a129-19bd9fc6cba%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1369%2C%22originHeight%22%3A854%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ub8eb0e9d%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"X6xYa\" id=\"X6xYa\"><br></h2><h2 data-lake-id=\"WzEne\" id=\"WzEne\"><span data-lake-id=\"u009310a4\" id=\"u009310a4\">七、删除索引库（删除所有数据）的两种方法</span></h2><ul list=\"ued246c9b\"><li fid=\"ua59ee9a2\" data-lake-id=\"uf13025e0\" id=\"uf13025e0\"><span data-lake-id=\"u20a09d29\" id=\"u20a09d29\">1.删除索引库所有数据的方法一：直接用solr可视化界面删除</span></li></ul><p data-lake-id=\"u5900d264\" id=\"u5900d264\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fwebp%2F27022430%2F1658127790457-5b348534-e2ba-4b26-960f-80171f49d3e4.webp%22%2C%22taskId%22%3A%22u3e1c5470-5f3a-448f-8f88-556681399a8%22%2C%22clientId%22%3A%22u591e7470-37f3-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A813%2C%22originHeight%22%3A513%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u00b14a0e%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 4,
    "hits": 4,
    "comments_count": 0,
    "word_count": 2091,
    "created_at": "2022-07-18T01:23:51.000Z",
    "updated_at": "2023-07-27T02:05:48.000Z",
    "content_updated_at": "2023-07-27T02:05:48.000Z",
    "published_at": "2022-07-18T07:16:47.000Z",
    "first_published_at": "2022-07-18T06:56:09.513Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1109862500,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 82247702,
    "type": "Doc",
    "slug": "hgr8sf",
    "title": "Nginx的优化和压力测试",
    "description": "tags: [压测,nginx]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: https://blog.csdn.net/qq_30038111/article/details/7...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901686719-232b21a9-be96-433a-9922-d3da97cd4a03.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [压测,nginx]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span class=\"ne-text\">https://blog.csdn.net/qq_30038111/article/details/79794377</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我们要测试 </span><span class=\"ne-text\">nginx</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 的负载能力，需要借助压力测试工具。本博客是使用 Apache 服务器自带的一个 web 压力测试工具 ApacheBench ，简称 ab。ab 是一个命令行工具，即通过 ab 命令行，模拟多个请求同时对某一 URL 地址进行访问，因此可以用来测试目标服务器的负载压力。</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h2 id=\"ykJdW\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">ab 的安装</span></h2><p id=\"u379345cc\" class=\"ne-p\"><span class=\"ne-text\">ab 的安装可以去官网下载，如果不想安装 apache，又想使用 ab 命令，可以直接安装工具包 httpd-tools，该工具包会将 ab 命令安装到 /usr/bin 下，因此在任何地方都可以调用：</span></p><p id=\"ua1437263\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"ucd63085c\" class=\"ne-p\"><span class=\"ne-text\">yum -y install httpd-tools</span></p></div><p id=\"u74c98569\" class=\"ne-p\"><span class=\"ne-text\">检查ab的安装结果</span></p><pre data-language=\"shell\" id=\"vHYYn\" class=\"ne-codeblock language-shell\"><code>ab -V\n\n# 显示下面信息表示安装成功\nThis is ApacheBench, Version 2.3 &lt;$Revision: 1430300 $&gt;\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/</code></pre><h1 id=\"daa8fecd\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">ab 的简单使用</span></h1><pre data-language=\"shell\" id=\"zKaUU\" class=\"ne-codeblock language-shell\"><code># 查看 ab 的命令及参数\nab -help</code></pre><pre data-language=\"shell\" id=\"BDszQ\" class=\"ne-codeblock language-shell\"><code># 最简单的使用\n# -c：一次并发请求的数量；-n：请求总次数\nab -c 5000 -n 200000 http://192.168.222.101:80/index.html</code></pre><p id=\"udaa6cd92\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901686719-232b21a9-be96-433a-9922-d3da97cd4a03.png\" width=\"815\" id=\"ue14b4672\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901712665-f366e7d2-1b3a-4c35-9f3f-07c9558c4cea.png\" width=\"837\" id=\"ue01e64ee\" class=\"ne-image\"></p><h2 id=\"xyyX8\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">优化思路</span></h2><p id=\"u9f051106\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">每个请求都需要建立 socket 连接，那么影响并发量的因素之一：</span></p><ol class=\"ne-ol\"><li id=\"ud3b03769\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">客户端不允许一次性创建过多的连接</span></li><li id=\"ubc12da5b\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">服务端不允许一次性创建过多的连接<br /></span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">每个请求都要访问一些资源，那么影响并发量的因素之一：</span></li><li id=\"ua0e5f177\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">服务端不允许一个文件在同一时间点被访问 N 次，相当于一个文件在服务端打开 N 次</span></li></ol><p id=\"u10f979a1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我们在使用 ab 模拟并发访问后，执行 dmesg 命令，查看请求的信息</span></p><pre data-language=\"shell\" id=\"Arf1T\" class=\"ne-codeblock language-shell\"><code>dmesg\n# 执行结果的最后一行为：possible SYN flooding on port 80. Sending cookies.\n# 解释：在同一时间有过多的请求访问 80 端口，导致系统误认为遭受了洪水攻击</code></pre><p id=\"uf985936c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">从上面的优化分析中，我们可以从 socket 和文件两个层面进行 Nginx 的高并发优化。</span></p><p id=\"u4b371c0a\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">socket：分为系统层面和 nginx 层面：</span></strong></p><ul class=\"ne-ul\"><li id=\"u5971ca37\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">系统层面</span></li></ul><pre data-language=\"shell\" id=\"jekKm\" class=\"ne-codeblock language-shell\"><code># 禁止洪水抵御，这个操作在重启之后失效\n命令：more /proc/sys/net/ipv4/tcp_syncookies\n结果：1\n命令：echo 0 &gt; /proc/sys/net/ipv4/tcp_syncookies\n# 最大连接数，这个操作在重启之后失效\n命令：more /proc/sys/net/core/somaxconn\n结果：128\n命令：echo 50000 &gt; /proc/sys/net/core/somaxconn\n# 加快 tcp 连接的回收，这个操作在重启之后失效\n命令：cat /proc/sys/net/ipv4/tcp_tw_recycle\n结果：0\n命令：echo 1 &gt; /proc/sys/net/ipv4/tcp_tw_recycle\n# 使空的 tcp 连接重新被利用，这个操作在重启之后失效\n命令：cat /proc/sys/net/ipv4/tcp_tw_reuse\n结果：0\n命令：echo 1 &gt; /proc/sys/net/ipv4/tcp_tw_reuse\n\n# 完整的命令\necho 50000 &gt; /proc/sys/net/core/somaxconn\necho 0 &gt; /proc/sys/net/ipv4/tcp_syncookies\necho 1 &gt; /proc/sys/net/ipv4/tcp_tw_recycle\necho 1 &gt; /proc/sys/net/ipv4/tcp_tw_reuse</code></pre><ul class=\"ne-ul\"><li id=\"u287fedb1\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">nginx</span></li></ul><pre data-language=\"shell\" id=\"L44RU\" class=\"ne-codeblock language-shell\"><code># 子进程允许打开的连接数（nginx.conf）及 IO 选择\nevents {\n    # 子进程连接数\n    worker_connections 65535;\n    # 使用 linux 下的多路复用 IO，是 poll 增强版本\n    use epoll;\n}\n\n# 将 keepalive_timeout 设置为 0，高并发网站中，一般不超过 2s。此参数在 F12 调试页面时，在 Network 的 Headers 的 Response Headers 下可以看到 Connection:keep-alive，如果设置为 0，那么为 Connection:close\nkeepalive_timeout 0;</code></pre><p id=\"uee680f65\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">文件：分为系统层面和 nginx 层面：</span></strong></p><ul class=\"ne-ul\"><li id=\"uc230095c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">系统层面</span></li></ul><pre data-language=\"shell\" id=\"XnMU9\" class=\"ne-codeblock language-shell\"><code># 设置同一个文件同一时间点可以打开 N 次，这个操作在重启之后失效\n命令：ulimit -n\n返回：128\n命令：ulimit -n 20000</code></pre><ul class=\"ne-ul\"><li id=\"ua75d2b54\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">nginx 层面</span></li></ul><pre data-language=\"shell\" id=\"FZ00M\" class=\"ne-codeblock language-shell\"><code># nginx 进程数，按照 CPU 数目指定\nworker_processes 8;\n# nginx 子进程允许打开的文件次数\nworker_rlimit_nofile 102400;</code></pre><h2 id=\"DwSoF\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">ab 使用时的注意点</span></h2><p id=\"uf72a55fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">如果使用 A 和 B 两台虚拟机测试，用 B 上的 ab 测试 A 的 nginx ，即 A 为服务端，B 为客户端。此时需要在 B 上配置下面的参数，并且两个参数至少要等于 A 配置的值。</span></p><pre data-language=\"shell\" id=\"xhCd4\" class=\"ne-codeblock language-shell\"><code>ulimit -n 20000\necho 50000 &gt; /proc/sys/net/core/somaxconn</code></pre><h2 id=\"KEWUr\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">Nginx 添加统计模块及配置</span></h2><p id=\"u8884452b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">nginx 在安装时可以添加访问的统计模块。</span></p><pre data-language=\"php\" id=\"L7zEd\" class=\"ne-codeblock language-php\"><code>./configure --prefix=/usr/local/nginx --with-http_stub_status_module</code></pre><pre data-language=\"shell\" id=\"dS7SU\" class=\"ne-codeblock language-shell\"><code># 在 nginx.conf 中配置统计模块\nlocation /status{\n    # 开启状态\n    stub_status on;\n    # 不需要日志\n    access_log off;\n    # 只允许此 ip 访问\n    allow 192.168.222.101;\n    # 其他 ip 禁止访问\n    deny all;\n}</code></pre><h2 id=\"m14Qk\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">使用 Nginx 的统计模块查看状态</span></h2><pre data-language=\"php\" id=\"spkmJ\" class=\"ne-codeblock language-php\"><code># ab 测试并发\nab -c 1000 -n 100000 http://192.168.222.101:80/index.html</code></pre><pre data-language=\"php\" id=\"hhE6I\" class=\"ne-codeblock language-php\"><code># 浏览器打开\nhttp://192.168.222.101:80/status</code></pre></div>",
    "body": "tags: [压测,nginx]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: https://blog.csdn.net/qq_30038111/article/details/79794377<br />copyright_author: <br />cover:\n\n---\n\n我们要测试 nginx 的负载能力，需要借助压力测试工具。本博客是使用 Apache 服务器自带的一个 web 压力测试工具 ApacheBench ，简称 ab。ab 是一个命令行工具，即通过 ab 命令行，模拟多个请求同时对某一 URL 地址进行访问，因此可以用来测试目标服务器的负载压力。\n\n<a name=\"ykJdW\"></a>\n## ab 的安装\nab 的安装可以去官网下载，如果不想安装 apache，又想使用 ab 命令，可以直接安装工具包 httpd-tools，该工具包会将 ab 命令安装到 /usr/bin 下，因此在任何地方都可以调用：\n\n> yum -y install httpd-tools\n\n检查ab的安装结果\n```shell\nab -V\n\n# 显示下面信息表示安装成功\nThis is ApacheBench, Version 2.3 <$Revision: 1430300 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n```\n<a name=\"daa8fecd\"></a>\n# <br />ab 的简单使用\n```shell\n# 查看 ab 的命令及参数\nab -help\n```\n```shell\n# 最简单的使用\n# -c：一次并发请求的数量；-n：请求总次数\nab -c 5000 -n 200000 http://192.168.222.101:80/index.html\n```\n![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901686719-232b21a9-be96-433a-9922-d3da97cd4a03.png#clientId=u8461f789-44d5-4&from=paste&id=ue14b4672&originHeight=832&originWidth=815&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc30e4186-cd48-450c-adeb-180f209b095&title=)![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901712665-f366e7d2-1b3a-4c35-9f3f-07c9558c4cea.png#clientId=u8461f789-44d5-4&from=paste&id=ue01e64ee&originHeight=349&originWidth=837&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u374982e4-aa74-452c-b51b-1ceee80aff1&title=)\n<a name=\"xyyX8\"></a>\n## 优化思路\n每个请求都需要建立 socket 连接，那么影响并发量的因素之一：\n\n1. 客户端不允许一次性创建过多的连接\n2. 服务端不允许一次性创建过多的连接<br />每个请求都要访问一些资源，那么影响并发量的因素之一：\n3. 服务端不允许一个文件在同一时间点被访问 N 次，相当于一个文件在服务端打开 N 次\n\n我们在使用 ab 模拟并发访问后，执行 dmesg 命令，查看请求的信息\n```shell\ndmesg\n# 执行结果的最后一行为：possible SYN flooding on port 80. Sending cookies.\n# 解释：在同一时间有过多的请求访问 80 端口，导致系统误认为遭受了洪水攻击\n```\n从上面的优化分析中，我们可以从 socket 和文件两个层面进行 Nginx 的高并发优化。<br />**socket：分为系统层面和 nginx 层面：**\n\n- 系统层面\n```shell\n# 禁止洪水抵御，这个操作在重启之后失效\n命令：more /proc/sys/net/ipv4/tcp_syncookies\n结果：1\n命令：echo 0 > /proc/sys/net/ipv4/tcp_syncookies\n# 最大连接数，这个操作在重启之后失效\n命令：more /proc/sys/net/core/somaxconn\n结果：128\n命令：echo 50000 > /proc/sys/net/core/somaxconn\n# 加快 tcp 连接的回收，这个操作在重启之后失效\n命令：cat /proc/sys/net/ipv4/tcp_tw_recycle\n结果：0\n命令：echo 1 > /proc/sys/net/ipv4/tcp_tw_recycle\n# 使空的 tcp 连接重新被利用，这个操作在重启之后失效\n命令：cat /proc/sys/net/ipv4/tcp_tw_reuse\n结果：0\n命令：echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse\n\n# 完整的命令\necho 50000 > /proc/sys/net/core/somaxconn\necho 0 > /proc/sys/net/ipv4/tcp_syncookies\necho 1 > /proc/sys/net/ipv4/tcp_tw_recycle\necho 1 > /proc/sys/net/ipv4/tcp_tw_reuse\n```\n\n- nginx\n```shell\n# 子进程允许打开的连接数（nginx.conf）及 IO 选择\nevents {\n    # 子进程连接数\n    worker_connections 65535;\n    # 使用 linux 下的多路复用 IO，是 poll 增强版本\n    use epoll;\n}\n\n# 将 keepalive_timeout 设置为 0，高并发网站中，一般不超过 2s。此参数在 F12 调试页面时，在 Network 的 Headers 的 Response Headers 下可以看到 Connection:keep-alive，如果设置为 0，那么为 Connection:close\nkeepalive_timeout 0;\n```\n**文件：分为系统层面和 nginx 层面：**\n\n- 系统层面\n```shell\n# 设置同一个文件同一时间点可以打开 N 次，这个操作在重启之后失效\n命令：ulimit -n\n返回：128\n命令：ulimit -n 20000\n```\n\n- nginx 层面\n```shell\n# nginx 进程数，按照 CPU 数目指定\nworker_processes 8;\n# nginx 子进程允许打开的文件次数\nworker_rlimit_nofile 102400;\n```\n<a name=\"DwSoF\"></a>\n## ab 使用时的注意点\n如果使用 A 和 B 两台虚拟机测试，用 B 上的 ab 测试 A 的 nginx ，即 A 为服务端，B 为客户端。此时需要在 B 上配置下面的参数，并且两个参数至少要等于 A 配置的值。\n```shell\nulimit -n 20000\necho 50000 > /proc/sys/net/core/somaxconn\n```\n<a name=\"KEWUr\"></a>\n## Nginx 添加统计模块及配置\nnginx 在安装时可以添加访问的统计模块。\n```php\n./configure --prefix=/usr/local/nginx --with-http_stub_status_module\n```\n```shell\n# 在 nginx.conf 中配置统计模块\nlocation /status{\n    # 开启状态\n    stub_status on;\n    # 不需要日志\n    access_log off;\n    # 只允许此 ip 访问\n    allow 192.168.222.101;\n    # 其他 ip 禁止访问\n    deny all;\n}\n```\n<a name=\"m14Qk\"></a>\n## 使用 Nginx 的统计模块查看状态\n```php\n# ab 测试并发\nab -c 1000 -n 100000 http://192.168.222.101:80/index.html\n```\n```php\n# 浏览器打开\nhttp://192.168.222.101:80/status\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [压测,nginx]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span class=\"ne-text\">https://blog.csdn.net/qq_30038111/article/details/79794377</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我们要测试 </span><span class=\"ne-text\">nginx</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 的负载能力，需要借助压力测试工具。本博客是使用 Apache 服务器自带的一个 web 压力测试工具 ApacheBench ，简称 ab。ab 是一个命令行工具，即通过 ab 命令行，模拟多个请求同时对某一 URL 地址进行访问，因此可以用来测试目标服务器的负载压力。</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h2 id=\"ykJdW\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">ab 的安装</span></h2><p id=\"u379345cc\" class=\"ne-p\"><span class=\"ne-text\">ab 的安装可以去官网下载，如果不想安装 apache，又想使用 ab 命令，可以直接安装工具包 httpd-tools，该工具包会将 ab 命令安装到 /usr/bin 下，因此在任何地方都可以调用：</span></p><p id=\"ua1437263\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"ucd63085c\" class=\"ne-p\"><span class=\"ne-text\">yum -y install httpd-tools</span></p></div><p id=\"u74c98569\" class=\"ne-p\"><span class=\"ne-text\">检查ab的安装结果</span></p><pre data-language=\"shell\" id=\"vHYYn\" class=\"ne-codeblock language-shell\">ab -V\n\n# 显示下面信息表示安装成功\nThis is ApacheBench, Version 2.3 &lt;$Revision: 1430300 $&gt;\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/</pre><h1 id=\"daa8fecd\"><span class=\"ne-text\"><br />ab 的简单使用</span></h1><pre data-language=\"shell\" id=\"zKaUU\" class=\"ne-codeblock language-shell\"># 查看 ab 的命令及参数\nab -help</pre><pre data-language=\"shell\" id=\"BDszQ\" class=\"ne-codeblock language-shell\"># 最简单的使用\n# -c：一次并发请求的数量；-n：请求总次数\nab -c 5000 -n 200000 http://192.168.222.101:80/index.html</pre><p id=\"udaa6cd92\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901686719-232b21a9-be96-433a-9922-d3da97cd4a03.png\" width=\"815\" id=\"ue14b4672\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1656901712665-f366e7d2-1b3a-4c35-9f3f-07c9558c4cea.png\" width=\"837\" id=\"ue01e64ee\" class=\"ne-image\"></p><h2 id=\"xyyX8\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">优化思路</span></h2><p id=\"u9f051106\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">每个请求都需要建立 socket 连接，那么影响并发量的因素之一：</span></p><ol class=\"ne-ol\"><li id=\"ud3b03769\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">客户端不允许一次性创建过多的连接</span></li><li id=\"ubc12da5b\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">服务端不允许一次性创建过多的连接<br />每个请求都要访问一些资源，那么影响并发量的因素之一：</span></li><li id=\"ua0e5f177\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">服务端不允许一个文件在同一时间点被访问 N 次，相当于一个文件在服务端打开 N 次</span></li></ol><p id=\"u10f979a1\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">我们在使用 ab 模拟并发访问后，执行 dmesg 命令，查看请求的信息</span></p><pre data-language=\"shell\" id=\"Arf1T\" class=\"ne-codeblock language-shell\">dmesg\n# 执行结果的最后一行为：possible SYN flooding on port 80. Sending cookies.\n# 解释：在同一时间有过多的请求访问 80 端口，导致系统误认为遭受了洪水攻击</pre><p id=\"uf985936c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">从上面的优化分析中，我们可以从 socket 和文件两个层面进行 Nginx 的高并发优化。</span></p><p id=\"u4b371c0a\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">socket：分为系统层面和 nginx 层面：</span></strong></p><ul class=\"ne-ul\"><li id=\"u5971ca37\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">系统层面</span></li></ul><pre data-language=\"shell\" id=\"jekKm\" class=\"ne-codeblock language-shell\"># 禁止洪水抵御，这个操作在重启之后失效\n命令：more /proc/sys/net/ipv4/tcp_syncookies\n结果：1\n命令：echo 0 &gt; /proc/sys/net/ipv4/tcp_syncookies\n# 最大连接数，这个操作在重启之后失效\n命令：more /proc/sys/net/core/somaxconn\n结果：128\n命令：echo 50000 &gt; /proc/sys/net/core/somaxconn\n# 加快 tcp 连接的回收，这个操作在重启之后失效\n命令：cat /proc/sys/net/ipv4/tcp_tw_recycle\n结果：0\n命令：echo 1 &gt; /proc/sys/net/ipv4/tcp_tw_recycle\n# 使空的 tcp 连接重新被利用，这个操作在重启之后失效\n命令：cat /proc/sys/net/ipv4/tcp_tw_reuse\n结果：0\n命令：echo 1 &gt; /proc/sys/net/ipv4/tcp_tw_reuse\n\n# 完整的命令\necho 50000 &gt; /proc/sys/net/core/somaxconn\necho 0 &gt; /proc/sys/net/ipv4/tcp_syncookies\necho 1 &gt; /proc/sys/net/ipv4/tcp_tw_recycle\necho 1 &gt; /proc/sys/net/ipv4/tcp_tw_reuse</pre><ul class=\"ne-ul\"><li id=\"u287fedb1\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">nginx</span></li></ul><pre data-language=\"shell\" id=\"L44RU\" class=\"ne-codeblock language-shell\"># 子进程允许打开的连接数（nginx.conf）及 IO 选择\nevents {\n    # 子进程连接数\n    worker_connections 65535;\n    # 使用 linux 下的多路复用 IO，是 poll 增强版本\n    use epoll;\n}\n\n# 将 keepalive_timeout 设置为 0，高并发网站中，一般不超过 2s。此参数在 F12 调试页面时，在 Network 的 Headers 的 Response Headers 下可以看到 Connection:keep-alive，如果设置为 0，那么为 Connection:close\nkeepalive_timeout 0;</pre><p id=\"uee680f65\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">文件：分为系统层面和 nginx 层面：</span></strong></p><ul class=\"ne-ul\"><li id=\"uc230095c\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">系统层面</span></li></ul><pre data-language=\"shell\" id=\"XnMU9\" class=\"ne-codeblock language-shell\"># 设置同一个文件同一时间点可以打开 N 次，这个操作在重启之后失效\n命令：ulimit -n\n返回：128\n命令：ulimit -n 20000</pre><ul class=\"ne-ul\"><li id=\"ua75d2b54\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgba(0, 0, 0, 0.75)\">nginx 层面</span></li></ul><pre data-language=\"shell\" id=\"FZ00M\" class=\"ne-codeblock language-shell\"># nginx 进程数，按照 CPU 数目指定\nworker_processes 8;\n# nginx 子进程允许打开的文件次数\nworker_rlimit_nofile 102400;</pre><h2 id=\"DwSoF\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">ab 使用时的注意点</span></h2><p id=\"uf72a55fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">如果使用 A 和 B 两台虚拟机测试，用 B 上的 ab 测试 A 的 nginx ，即 A 为服务端，B 为客户端。此时需要在 B 上配置下面的参数，并且两个参数至少要等于 A 配置的值。</span></p><pre data-language=\"shell\" id=\"xhCd4\" class=\"ne-codeblock language-shell\">ulimit -n 20000\necho 50000 &gt; /proc/sys/net/core/somaxconn</pre><h2 id=\"KEWUr\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">Nginx 添加统计模块及配置</span></h2><p id=\"u8884452b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">nginx 在安装时可以添加访问的统计模块。</span></p><pre data-language=\"php\" id=\"L7zEd\" class=\"ne-codeblock language-php\">./configure --prefix=/usr/local/nginx --with-http_stub_status_module</pre><pre data-language=\"shell\" id=\"dS7SU\" class=\"ne-codeblock language-shell\"># 在 nginx.conf 中配置统计模块\nlocation /status{\n    # 开启状态\n    stub_status on;\n    # 不需要日志\n    access_log off;\n    # 只允许此 ip 访问\n    allow 192.168.222.101;\n    # 其他 ip 禁止访问\n    deny all;\n}</pre><h2 id=\"m14Qk\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">使用 Nginx 的统计模块查看状态</span></h2><pre data-language=\"php\" id=\"spkmJ\" class=\"ne-codeblock language-php\"># ab 测试并发\nab -c 1000 -n 100000 http://192.168.222.101:80/index.html</pre><pre data-language=\"php\" id=\"hhE6I\" class=\"ne-codeblock language-php\"># 浏览器打开\nhttp://192.168.222.101:80/status</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [压测,nginx]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u9ae6fade\" id=\"u9ae6fade\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span data-lake-id=\"u58ae1f7d\" id=\"u58ae1f7d\">https://blog.csdn.net/qq_30038111/article/details/79794377</span><span data-lake-id=\"u093b4487\" id=\"u093b4487\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"ub6dbea7f\" id=\"ub6dbea7f\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">我们要测试 </span><span data-lake-id=\"u9f3abc0b\" id=\"u9f3abc0b\">nginx</span><span data-lake-id=\"ub9c87782\" id=\"ub9c87782\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> 的负载能力，需要借助压力测试工具。本博客是使用 Apache 服务器自带的一个 web 压力测试工具 ApacheBench ，简称 ab。ab 是一个命令行工具，即通过 ab 命令行，模拟多个请求同时对某一 URL 地址进行访问，因此可以用来测试目标服务器的负载压力。</span><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p><h2 data-lake-id=\"ykJdW\" id=\"ykJdW\"><span data-lake-id=\"u7ee7c0c9\" id=\"u7ee7c0c9\" style=\"color: rgb(79, 79, 79)\">ab 的安装</span></h2><p data-lake-id=\"u379345cc\" id=\"u379345cc\"><span data-lake-id=\"u3344ab81\" id=\"u3344ab81\">ab 的安装可以去官网下载，如果不想安装 apache，又想使用 ab 命令，可以直接安装工具包 httpd-tools，该工具包会将 ab 命令安装到 /usr/bin 下，因此在任何地方都可以调用：</span></p><p data-lake-id=\"ua1437263\" id=\"ua1437263\"><br></p><blockquote data-lake-id=\"u8dcc3f22\" id=\"u8dcc3f22\"><p data-lake-id=\"ucd63085c\" id=\"ucd63085c\"><span data-lake-id=\"u9278626b\" id=\"u9278626b\">yum -y install httpd-tools</span></p></blockquote><p data-lake-id=\"u74c98569\" id=\"u74c98569\"><span data-lake-id=\"ue2e93a74\" id=\"ue2e93a74\">检查ab的安装结果</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22ab%20-V%5Cn%5Cn%23%20%E6%98%BE%E7%A4%BA%E4%B8%8B%E9%9D%A2%E4%BF%A1%E6%81%AF%E8%A1%A8%E7%A4%BA%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%5CnThis%20is%20ApacheBench%2C%20Version%202.3%20%3C%24Revision%3A%201430300%20%24%3E%5CnCopyright%201996%20Adam%20Twiss%2C%20Zeus%20Technology%20Ltd%2C%20http%3A%2F%2Fwww.zeustech.net%2F%5CnLicensed%20to%20The%20Apache%20Software%20Foundation%2C%20http%3A%2F%2Fwww.apache.org%2F%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22vHYYn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"daa8fecd\" id=\"daa8fecd\"><span data-lake-id=\"u0cf4a347\" id=\"u0cf4a347\"><br />ab 的简单使用</span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E6%9F%A5%E7%9C%8B%20ab%20%E7%9A%84%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%8F%82%E6%95%B0%5Cnab%20-help%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zKaUU%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E4%BD%BF%E7%94%A8%5Cn%23%20-c%EF%BC%9A%E4%B8%80%E6%AC%A1%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82%E7%9A%84%E6%95%B0%E9%87%8F%EF%BC%9B-n%EF%BC%9A%E8%AF%B7%E6%B1%82%E6%80%BB%E6%AC%A1%E6%95%B0%5Cnab%20-c%205000%20-n%20200000%20http%3A%2F%2F192.168.222.101%3A80%2Findex.html%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BDszQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"udaa6cd92\" id=\"udaa6cd92\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1656901686719-232b21a9-be96-433a-9922-d3da97cd4a03.png%22%2C%22taskId%22%3A%22uc30e4186-cd48-450c-adeb-180f209b095%22%2C%22clientId%22%3A%22u8461f789-44d5-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A815%2C%22originHeight%22%3A832%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ue14b4672%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1656901712665-f366e7d2-1b3a-4c35-9f3f-07c9558c4cea.png%22%2C%22taskId%22%3A%22u374982e4-aa74-452c-b51b-1ceee80aff1%22%2C%22clientId%22%3A%22u8461f789-44d5-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A837%2C%22originHeight%22%3A349%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ue01e64ee%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"xyyX8\" id=\"xyyX8\"><span data-lake-id=\"u1cb8b639\" id=\"u1cb8b639\" style=\"color: rgb(79, 79, 79)\">优化思路</span></h2><p data-lake-id=\"u9f051106\" id=\"u9f051106\"><span data-lake-id=\"ufbecdba6\" id=\"ufbecdba6\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">每个请求都需要建立 socket 连接，那么影响并发量的因素之一：</span></p><ol list=\"udba0a2e2\"><li fid=\"u0617a554\" data-lake-id=\"ud3b03769\" id=\"ud3b03769\"><span data-lake-id=\"uc13a3816\" id=\"uc13a3816\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">客户端不允许一次性创建过多的连接</span></li><li fid=\"u0617a554\" data-lake-id=\"ubc12da5b\" id=\"ubc12da5b\"><span data-lake-id=\"ucc280bbb\" id=\"ucc280bbb\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">服务端不允许一次性创建过多的连接<br />每个请求都要访问一些资源，那么影响并发量的因素之一：</span></li><li fid=\"u0617a554\" data-lake-id=\"ua0e5f177\" id=\"ua0e5f177\"><span data-lake-id=\"ue78c8e8e\" id=\"ue78c8e8e\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">服务端不允许一个文件在同一时间点被访问 N 次，相当于一个文件在服务端打开 N 次</span></li></ol><p data-lake-id=\"u10f979a1\" id=\"u10f979a1\"><span data-lake-id=\"u8f5e811c\" id=\"u8f5e811c\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">我们在使用 ab 模拟并发访问后，执行 dmesg 命令，查看请求的信息</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22dmesg%5Cn%23%20%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E4%B8%BA%EF%BC%9Apossible%20SYN%20flooding%20on%20port%2080.%20Sending%20cookies.%5Cn%23%20%E8%A7%A3%E9%87%8A%EF%BC%9A%E5%9C%A8%E5%90%8C%E4%B8%80%E6%97%B6%E9%97%B4%E6%9C%89%E8%BF%87%E5%A4%9A%E7%9A%84%E8%AF%B7%E6%B1%82%E8%AE%BF%E9%97%AE%2080%20%E7%AB%AF%E5%8F%A3%EF%BC%8C%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E8%AF%AF%E8%AE%A4%E4%B8%BA%E9%81%AD%E5%8F%97%E4%BA%86%E6%B4%AA%E6%B0%B4%E6%94%BB%E5%87%BB%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Arf1T%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf985936c\" id=\"uf985936c\"><span data-lake-id=\"u1efd6726\" id=\"u1efd6726\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">从上面的优化分析中，我们可以从 socket 和文件两个层面进行 Nginx 的高并发优化。</span></p><p data-lake-id=\"u4b371c0a\" id=\"u4b371c0a\"><strong><span data-lake-id=\"ua8013ed5\" id=\"ua8013ed5\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">socket：分为系统层面和 nginx 层面：</span></strong></p><ul list=\"u1e7a4b8b\"><li fid=\"ub97f4f6e\" data-lake-id=\"u5971ca37\" id=\"u5971ca37\"><span data-lake-id=\"ucd2c2d5a\" id=\"ucd2c2d5a\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">系统层面</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E7%A6%81%E6%AD%A2%E6%B4%AA%E6%B0%B4%E6%8A%B5%E5%BE%A1%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%9C%A8%E9%87%8D%E5%90%AF%E4%B9%8B%E5%90%8E%E5%A4%B1%E6%95%88%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Amore%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_syncookies%5Cn%E7%BB%93%E6%9E%9C%EF%BC%9A1%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Aecho%200%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_syncookies%5Cn%23%20%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%9C%A8%E9%87%8D%E5%90%AF%E4%B9%8B%E5%90%8E%E5%A4%B1%E6%95%88%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Amore%20%2Fproc%2Fsys%2Fnet%2Fcore%2Fsomaxconn%5Cn%E7%BB%93%E6%9E%9C%EF%BC%9A128%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Aecho%2050000%20%3E%20%2Fproc%2Fsys%2Fnet%2Fcore%2Fsomaxconn%5Cn%23%20%E5%8A%A0%E5%BF%AB%20tcp%20%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%9B%9E%E6%94%B6%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%9C%A8%E9%87%8D%E5%90%AF%E4%B9%8B%E5%90%8E%E5%A4%B1%E6%95%88%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Acat%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_tw_recycle%5Cn%E7%BB%93%E6%9E%9C%EF%BC%9A0%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Aecho%201%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_tw_recycle%5Cn%23%20%E4%BD%BF%E7%A9%BA%E7%9A%84%20tcp%20%E8%BF%9E%E6%8E%A5%E9%87%8D%E6%96%B0%E8%A2%AB%E5%88%A9%E7%94%A8%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%9C%A8%E9%87%8D%E5%90%AF%E4%B9%8B%E5%90%8E%E5%A4%B1%E6%95%88%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Acat%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_tw_reuse%5Cn%E7%BB%93%E6%9E%9C%EF%BC%9A0%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Aecho%201%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_tw_reuse%5Cn%5Cn%23%20%E5%AE%8C%E6%95%B4%E7%9A%84%E5%91%BD%E4%BB%A4%5Cnecho%2050000%20%3E%20%2Fproc%2Fsys%2Fnet%2Fcore%2Fsomaxconn%5Cnecho%200%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_syncookies%5Cnecho%201%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_tw_recycle%5Cnecho%201%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Ftcp_tw_reuse%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jekKm%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u7b421d38\"><li fid=\"u43c6297d\" data-lake-id=\"u287fedb1\" id=\"u287fedb1\"><span data-lake-id=\"u6e6af966\" id=\"u6e6af966\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">nginx</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%85%81%E8%AE%B8%E6%89%93%E5%BC%80%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%95%B0%EF%BC%88nginx.conf%EF%BC%89%E5%8F%8A%20IO%20%E9%80%89%E6%8B%A9%5Cnevents%20%7B%5Cn%20%20%20%20%23%20%E5%AD%90%E8%BF%9B%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%95%B0%5Cn%20%20%20%20worker_connections%2065535%3B%5Cn%20%20%20%20%23%20%E4%BD%BF%E7%94%A8%20linux%20%E4%B8%8B%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%20IO%EF%BC%8C%E6%98%AF%20poll%20%E5%A2%9E%E5%BC%BA%E7%89%88%E6%9C%AC%5Cn%20%20%20%20use%20epoll%3B%5Cn%7D%5Cn%5Cn%23%20%E5%B0%86%20keepalive_timeout%20%E8%AE%BE%E7%BD%AE%E4%B8%BA%200%EF%BC%8C%E9%AB%98%E5%B9%B6%E5%8F%91%E7%BD%91%E7%AB%99%E4%B8%AD%EF%BC%8C%E4%B8%80%E8%88%AC%E4%B8%8D%E8%B6%85%E8%BF%87%202s%E3%80%82%E6%AD%A4%E5%8F%82%E6%95%B0%E5%9C%A8%20F12%20%E8%B0%83%E8%AF%95%E9%A1%B5%E9%9D%A2%E6%97%B6%EF%BC%8C%E5%9C%A8%20Network%20%E7%9A%84%20Headers%20%E7%9A%84%20Response%20Headers%20%E4%B8%8B%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%20Connection%3Akeep-alive%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%AE%BE%E7%BD%AE%E4%B8%BA%200%EF%BC%8C%E9%82%A3%E4%B9%88%E4%B8%BA%20Connection%3Aclose%5Cnkeepalive_timeout%200%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22L44RU%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uee680f65\" id=\"uee680f65\"><strong><span data-lake-id=\"u31d8b849\" id=\"u31d8b849\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">文件：分为系统层面和 nginx 层面：</span></strong></p><ul list=\"u96802a75\"><li fid=\"u489d9015\" data-lake-id=\"uc230095c\" id=\"uc230095c\"><span data-lake-id=\"ufc55b032\" id=\"ufc55b032\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">系统层面</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E8%AE%BE%E7%BD%AE%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%90%8C%E4%B8%80%E6%97%B6%E9%97%B4%E7%82%B9%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80%20N%20%E6%AC%A1%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%9C%A8%E9%87%8D%E5%90%AF%E4%B9%8B%E5%90%8E%E5%A4%B1%E6%95%88%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Aulimit%20-n%5Cn%E8%BF%94%E5%9B%9E%EF%BC%9A128%5Cn%E5%91%BD%E4%BB%A4%EF%BC%9Aulimit%20-n%2020000%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22XnMU9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ul list=\"u8ee6d252\"><li fid=\"u2519891d\" data-lake-id=\"ua75d2b54\" id=\"ua75d2b54\"><span data-lake-id=\"u236f0a8c\" id=\"u236f0a8c\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">nginx 层面</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20nginx%20%E8%BF%9B%E7%A8%8B%E6%95%B0%EF%BC%8C%E6%8C%89%E7%85%A7%20CPU%20%E6%95%B0%E7%9B%AE%E6%8C%87%E5%AE%9A%5Cnworker_processes%208%3B%5Cn%23%20nginx%20%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%85%81%E8%AE%B8%E6%89%93%E5%BC%80%E7%9A%84%E6%96%87%E4%BB%B6%E6%AC%A1%E6%95%B0%5Cnworker_rlimit_nofile%20102400%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FZ00M%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"DwSoF\" id=\"DwSoF\"><span data-lake-id=\"u39b83966\" id=\"u39b83966\" style=\"color: rgb(79, 79, 79)\">ab 使用时的注意点</span></h2><p data-lake-id=\"uf72a55fe\" id=\"uf72a55fe\"><span data-lake-id=\"ub7149bb3\" id=\"ub7149bb3\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">如果使用 A 和 B 两台虚拟机测试，用 B 上的 ab 测试 A 的 nginx ，即 A 为服务端，B 为客户端。此时需要在 B 上配置下面的参数，并且两个参数至少要等于 A 配置的值。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22ulimit%20-n%2020000%5Cnecho%2050000%20%3E%20%2Fproc%2Fsys%2Fnet%2Fcore%2Fsomaxconn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22xhCd4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"KEWUr\" id=\"KEWUr\"><span data-lake-id=\"ufb976cd7\" id=\"ufb976cd7\" style=\"color: rgb(79, 79, 79)\">Nginx 添加统计模块及配置</span></h2><p data-lake-id=\"u8884452b\" id=\"u8884452b\"><span data-lake-id=\"u45e3d71a\" id=\"u45e3d71a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">nginx 在安装时可以添加访问的统计模块。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22.%2Fconfigure%20--prefix%3D%2Fusr%2Flocal%2Fnginx%20--with-http_stub_status_module%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22L7zEd%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23%20%E5%9C%A8%20nginx.conf%20%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9D%97%5Cnlocation%20%2Fstatus%7B%5Cn%20%20%20%20%23%20%E5%BC%80%E5%90%AF%E7%8A%B6%E6%80%81%5Cn%20%20%20%20stub_status%20on%3B%5Cn%20%20%20%20%23%20%E4%B8%8D%E9%9C%80%E8%A6%81%E6%97%A5%E5%BF%97%5Cn%20%20%20%20access_log%20off%3B%5Cn%20%20%20%20%23%20%E5%8F%AA%E5%85%81%E8%AE%B8%E6%AD%A4%20ip%20%E8%AE%BF%E9%97%AE%5Cn%20%20%20%20allow%20192.168.222.101%3B%5Cn%20%20%20%20%23%20%E5%85%B6%E4%BB%96%20ip%20%E7%A6%81%E6%AD%A2%E8%AE%BF%E9%97%AE%5Cn%20%20%20%20deny%20all%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22dS7SU%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"m14Qk\" id=\"m14Qk\"><span data-lake-id=\"u53e9e069\" id=\"u53e9e069\" style=\"color: rgb(79, 79, 79)\">使用 Nginx 的统计模块查看状态</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%23%20ab%20%E6%B5%8B%E8%AF%95%E5%B9%B6%E5%8F%91%5Cnab%20-c%201000%20-n%20100000%20http%3A%2F%2F192.168.222.101%3A80%2Findex.html%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22spkmJ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%23%20%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%5Cnhttp%3A%2F%2F192.168.222.101%3A80%2Fstatus%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22hhE6I%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 3,
    "hits": 3,
    "comments_count": 0,
    "word_count": 1128,
    "created_at": "2022-07-04T02:25:56.000Z",
    "updated_at": "2023-07-27T02:05:52.000Z",
    "content_updated_at": "2023-07-27T02:05:52.000Z",
    "published_at": "2022-07-04T02:31:17.000Z",
    "first_published_at": "2022-07-04T02:31:17.052Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1082123331,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 81999532,
    "type": "Doc",
    "slug": "dpz36z",
    "title": "解决nginx反向代理后页面上的js/css文件无法加载",
    "description": "tags: [nginx,反向代理]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:问题现象：nginx配置反向代理后，网页可以正常访...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [nginx,反向代理]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">问题现象：</span></p><p id=\"u2e7640d9\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">nginx配置反向代理后，网页可以正常访问，但是页面上的js、css和图片等资源都无法访问。</span></p><pre data-language=\"php\" id=\"Riogl\" class=\"ne-codeblock language-php\"><code>（1）nginx配置如下：\n（2）域名访问：js css文件无法加载；\n（3）IP访问：js css文件可以正常加载；\n（4）CI框架下无法访问</code></pre><p id=\"u05e4a68d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); background-color: rgb(245, 245, 245); font-size: 12px\">配置此例即可：</span></p><pre data-language=\"php\" id=\"JBg9K\" class=\"ne-codeblock language-php\"><code>location / {\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }</code></pre><p id=\"u6373a035\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">解决方法：</span></p><p id=\"ub249327f\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">nginx配置文件中，修改为如下配置：</span></p><pre data-language=\"php\" id=\"EgVby\" class=\"ne-codeblock language-php\"><code> location ~ \\.php$ {\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n        location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$ {\n                expires      30d;\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n\n        location ~ .*\\.(js|css)?$ {\n                expires      12h;\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }</code></pre><p id=\"u2a168769\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">需要把静态文件也添加反向代理设置。<br /></span><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">原因分析：</span></p><p id=\"u7dd7bfea\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">反向代理的路径下找不到文件，这里需要单独指定js和css文件的访问路径。</span></p></div>",
    "body": "tags: [nginx,反向代理]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />问题现象：<br />nginx配置反向代理后，网页可以正常访问，但是页面上的js、css和图片等资源都无法访问。\n```php\n（1）nginx配置如下：\n（2）域名访问：js css文件无法加载；\n（3）IP访问：js css文件可以正常加载；\n（4）CI框架下无法访问\n```\n配置此例即可：\n```php\nlocation / {\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n```\n解决方法：<br />nginx配置文件中，修改为如下配置：\n```php\n location ~ \\.php$ {\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n        location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$ {\n                expires      30d;\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n\n        location ~ .*\\.(js|css)?$ {\n                expires      12h;\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n```\n需要把静态文件也添加反向代理设置。<br />原因分析：<br />反向代理的路径下找不到文件，这里需要单独指定js和css文件的访问路径。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [nginx,反向代理]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">问题现象：</span></p><p id=\"u2e7640d9\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">nginx配置反向代理后，网页可以正常访问，但是页面上的js、css和图片等资源都无法访问。</span></p><pre data-language=\"php\" id=\"Riogl\" class=\"ne-codeblock language-php\">（1）nginx配置如下：\n（2）域名访问：js css文件无法加载；\n（3）IP访问：js css文件可以正常加载；\n（4）CI框架下无法访问</pre><p id=\"u05e4a68d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); font-size: 12px; background-color: rgb(245, 245, 245)\">配置此例即可：</span></p><pre data-language=\"php\" id=\"JBg9K\" class=\"ne-codeblock language-php\">location / {\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }</pre><p id=\"u6373a035\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">解决方法：</span></p><p id=\"ub249327f\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">nginx配置文件中，修改为如下配置：</span></p><pre data-language=\"php\" id=\"EgVby\" class=\"ne-codeblock language-php\"> location ~ \\.php$ {\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n        location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$ {\n                expires      30d;\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }\n\n        location ~ .*\\.(js|css)?$ {\n                expires      12h;\n                proxy_pass http://127.0.0.1:8000;\n                include naproxy.conf;\n        }</pre><p id=\"u2a168769\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">需要把静态文件也添加反向代理设置。<br />原因分析：</span></p><p id=\"u7dd7bfea\" class=\"ne-p\" style=\"text-align: justify\"><span class=\"ne-text\" style=\"color: rgb(80, 80, 80); font-size: 14px\">反向代理的路径下找不到文件，这里需要单独指定js和css文件的访问路径。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [nginx,反向代理]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u1479fbbf\" id=\"u1479fbbf\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"u28eb8ea1\" id=\"u28eb8ea1\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\" style=\"text-align: justify\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u45866978\" id=\"u45866978\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 80, 80)\">问题现象：</span></p><p data-lake-id=\"u2e7640d9\" id=\"u2e7640d9\" style=\"text-align: justify\"><span data-lake-id=\"ub455ec65\" id=\"ub455ec65\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 80, 80)\">nginx配置反向代理后，网页可以正常访问，但是页面上的js、css和图片等资源都无法访问。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%EF%BC%881%EF%BC%89nginx%E9%85%8D%E7%BD%AE%E5%A6%82%E4%B8%8B%EF%BC%9A%5Cn%EF%BC%882%EF%BC%89%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%EF%BC%9Ajs%20css%E6%96%87%E4%BB%B6%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%EF%BC%9B%5Cn%EF%BC%883%EF%BC%89IP%E8%AE%BF%E9%97%AE%EF%BC%9Ajs%20css%E6%96%87%E4%BB%B6%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E5%8A%A0%E8%BD%BD%EF%BC%9B%5Cn%EF%BC%884%EF%BC%89CI%E6%A1%86%E6%9E%B6%E4%B8%8B%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Riogl%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u05e4a68d\" id=\"u05e4a68d\"><span data-lake-id=\"u0cc61b29\" id=\"u0cc61b29\" class=\"lake-fontsize-9\" style=\"color: rgb(102, 102, 102); background-color: rgb(245, 245, 245)\">配置此例即可：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A8000%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20include%20naproxy.conf%3B%5Cn%20%20%20%20%20%20%20%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22JBg9K%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u6373a035\" id=\"u6373a035\" style=\"text-align: justify\"><span data-lake-id=\"u453e7dd5\" id=\"u453e7dd5\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 80, 80)\">解决方法：</span></p><p data-lake-id=\"ub249327f\" id=\"ub249327f\" style=\"text-align: justify\"><span data-lake-id=\"u44d2b340\" id=\"u44d2b340\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 80, 80)\">nginx配置文件中，修改为如下配置：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%20location%20~%20%5C%5C.php%24%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A8000%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20include%20naproxy.conf%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20location%20~%20.*%5C%5C.(gif%7Cjpg%7Cjpeg%7Cpng%7Cbmp%7Cswf)%24%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20expires%20%20%20%20%20%2030d%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A8000%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20include%20naproxy.conf%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20location%20~%20.*%5C%5C.(js%7Ccss)%3F%24%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20expires%20%20%20%20%20%2012h%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2F127.0.0.1%3A8000%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20include%20naproxy.conf%3B%5Cn%20%20%20%20%20%20%20%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22EgVby%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u2a168769\" id=\"u2a168769\" style=\"text-align: justify\"><span data-lake-id=\"u35194bd4\" id=\"u35194bd4\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 80, 80)\">需要把静态文件也添加反向代理设置。<br />原因分析：</span></p><p data-lake-id=\"u7dd7bfea\" id=\"u7dd7bfea\" style=\"text-align: justify\"><span data-lake-id=\"ua5e42ecb\" id=\"ua5e42ecb\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 80, 80)\">反向代理的路径下找不到文件，这里需要单独指定js和css文件的访问路径。</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 237,
    "created_at": "2022-07-01T00:54:17.000Z",
    "updated_at": "2023-07-27T02:05:58.000Z",
    "content_updated_at": "2023-07-27T02:05:58.000Z",
    "published_at": "2022-07-01T00:55:28.000Z",
    "first_published_at": "2022-07-01T00:55:28.161Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1077637737,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 81367492,
    "type": "Doc",
    "slug": "hu0586",
    "title": "laravel 的 intervention-image 图像处理笔记",
    "description": "tags: [图像处理,image,interertion]categories: 学无止境copyright_author_href:  https://blog.csdn.net/beyond__devilcopyright_url: https://blog.csdn.net/beyon...",
    "cover": "https://g.yuque.com/gr/latex?width%20%5B%5B",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [图像处理,image,interertion]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href:  https://blog.csdn.net/beyond__devil</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span class=\"ne-text\">https://blog.csdn.net/beyond__devil/article/details/62230610</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span><span class=\"ne-text\">beyond__devil</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\">安装：</span></p><p id=\"ub9b61dc2\" class=\"ne-p\"><br></p><h3 id=\"25a68d79\"><span class=\"ne-text\">需求：</span></h3><p id=\"u93d9d28c\" class=\"ne-p\"><br></p><ul class=\"ne-ul\"><li id=\"u628ffc16\"><span class=\"ne-text\">PHP &gt;= 5.4</span></li><li id=\"u1887b276\"><span class=\"ne-text\">Fileinfo 扩展</span></li><li id=\"u779581c5\"><span class=\"ne-text\">GD库 &gt;= 2.0</span></li><li id=\"u16e96f8d\"><span class=\"ne-text\">Imagick 扩展 &gt;=6.5.7</span></li></ul><p id=\"u08fff3f6\" class=\"ne-p\"><br></p><h3 id=\"0456f5e6\"><span class=\"ne-text\">composer安装：</span></h3><p id=\"u07a94e04\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"u73772ac4\" class=\"ne-p\"><span class=\"ne-text\">composer require intervention/image</span></p></div><p id=\"u41197f7d\" class=\"ne-p\"><br></p><p id=\"uc0e142df\" class=\"ne-p\"><br></p><h2 id=\"b1B5T\"><span class=\"ne-text\">简单的基本使用</span></h2><pre data-language=\"php\" id=\"MtBde\" class=\"ne-codeblock language-php\">        $img-&gt;blur(12);//图片的模糊度，GD下大量使用影响性能，默认1\n        $img-&gt;brightness(30);//图片亮度，-100-100，默认0\n        $img = Image::canvas(32, 32, '#ff0000');//画图创建画板，可添加背景色\n        $img = Image::canvas(300, 200, '#ddd');\n        $img-&gt;circle(100, 50, 50, function ($draw) {//在图片里面画圆，直径，x坐标，y坐标\n            $draw-&gt;background('#0000ff');//背景色\n            $draw-&gt;border(1, '#f00');//圆边框，与背景色\n        $img-&gt;colorize(-100, 0, 100);//R,G,B调色，【-100,100】\n        $img-&gt;contrast(65);//对比度【-100,100】\n        });\n        $img-&gt;crop(100, 100, 25, 25);//图片的裁剪，默认左上角开始裁剪，宽，高，可选x,y坐标\n        $img-&gt;destroy();//删除图片\n       $img-&gt;save('/222.jpg');//保存图片\n        $img-&gt;ellipse(20, 30, 20, 30, function ($draw) {//定义椭圆跟圆一致\n            $draw-&gt;background('#0000ff');\n            $draw-&gt;border(1, '#ff0000');\n        });\n        $img-&gt;encode('jpg', 75);//编码，只有jpg才能选择质量，0-100\n        $img-&gt;fill('#ff00ff',0, 0);//填充图片或颜色，可带坐标，带坐标以该坐标点颜色进行选择填充\n        $img-&gt;flip('h');//图片翻转，v上下，h左右\n        $img-&gt;fit(200,300);//修改图片长宽，按比例，自动裁剪，一个参数正方形\n        $img-&gt;fit(800, 600, function ($constraint) {//按照比例多原始图片最大修剪\n            $constraint-&gt;upsize();\n        });\n        $img-&gt;gamma(5);//色彩gamma矫正》0\n        $imagick = $img-&gt;getCore();//返回 gd resource 资源size：宽X高，trueColor\n        dd($imagick);\n        $img-&gt;greyscale();//将图片变灰\n      return  $img-&gt;height();//图片高度\n        $img-&gt;heighten(50);\n        $img-&gt;heighten(50, function ($constraint) {\n            $constraint-&gt;upsize();\n        });//以高为基准生成比例图片\n        $tt= Image::canvas(130,100,'#F60');\n        $img-&gt;insert('public/watermark.png', 'bottom-right', 10, 10);//插入图片，可选位置模式，默认：top-left ，top，top-right，left，center，right，bottom-left，bottom，bottom-right，可选x,y坐标\n        $img-&gt;interlace(true);//编码相关，true，false\n        $img-&gt;invert();//反转图片颜色\n       $tt =  $img-&gt;iptc();\n        $img-&gt;limitColors(30);//色彩限制，出现磨砂效果\n        $img-&gt;line(10, 10, 195, 195, function ($draw) {//不支持GD，画线\n            $draw-&gt;color('#f00');\n            $draw-&gt;width(5);\n        });\n        $img-&gt;mask($tt,true);\n       dd($tt);\n        return $img-&gt;mime();//图片格式 image/jpeg\n        $img-&gt;opacity(90);//透明度0-100，消耗性能\n        return $img-&gt;orientate();\n    return $img-&gt;pickColor(50,50,'hex');//获取坐标颜色，array，rgb，rgba，hex，int\n        $img-&gt;pixel('#0000ff', 32, 32);//指定坐标填充色彩\n\n        $img-&gt;pixelate(2);//像素画马赛克\n        $points = array(\n            40,  50,  // Point 1 (x, y)\n            20,  110, // Point 2 (x, y)\n            60,  60,  // Point 3 (x, y)\n            120, 20,  // Point 4 (x, y)\n            50,  40,  // Point 5 (x, y)\n            10,  10   // Point 6 (x, y)\n        );\n        $img-&gt;polygon($points, function ($draw) {\n            $draw-&gt;background('#0000ff');\n            $draw-&gt;border(1, '#ff0000');\n        });//坐标画图，背景和边框\n        $img-&gt;rectangle(5, 5, 50, 50, function ($draw) {//画矩形，可选背景色（颜色类型可选rgba，和普通）\n            $draw-&gt;background('rgba(255, 255, 255, 0.5)');\n            $draw-&gt;border(2, '#000');\n        });\n        $img-&gt;backup();//备份图片状态\n        $img-&gt;reset();//图片恢复到备份状态\n        $img-&gt;resize(null, 200, function ($constraint) {\n            $constraint-&gt;aspectRatio();\n            $constraint-&gt;upsize();\n        });//设置图片的大小，回调可选，可单设置宽，高\n        $img-&gt;resizeCanvas(1280, 720, 'center', false, 'ff00ff');//图片添加背景画板，可选位置模式，相对添加，背景色\n        $img-&gt;rotate(-45);//转动图片\n        $img-&gt;sharpen(15);//锐化，0-100\n        $img-&gt;stream('jpg', 60);//流编码\n        $img-&gt;text('foo', 50, 50, function($font) {\n            $font-&gt;file('foo/bar.ttf');\n            $font-&gt;size(72);\n            $font-&gt;color('#fdf6e3');\n            $font-&gt;align('center');\n            $font-&gt;valign('top');\n            $font-&gt;angle(30);\n        });\n        $img-&gt;text('The quick brown fox jumps over the lazy dog.', 50, 50);\n        $img-&gt;text('foo', 0, 0, function($font) {\n            $font-&gt;color(array(255, 255, 255, 0.5));\n        });//文字书写\n        $img-&gt;widen(300, function ($constraint) {\n            $constraint-&gt;upsize();\n        });//按照宽等比，可回调\n        return $img-&gt;width();//获取图片宽\n        return $img-&gt;response('png');//修改图片格式\n</pre><h3 id=\"d71f57ae\"><span class=\"ne-text\">laravel配置：</span></h3><p id=\"uf57d3c8f\" class=\"ne-p\"><br></p><ol class=\"ne-ol\"><li id=\"u3cc2719e\"><span class=\"ne-text\">编辑 config/app.php<br /></span><span class=\"ne-text\">$providers 添加 'Intervention\\Image\\ImageServiceProvider::class'</span></li><li id=\"uac692818\"></li></ol><p id=\"ufc9d38af\" class=\"ne-p\"><br></p><p id=\"u61f35fad\" class=\"ne-p\"><span class=\"ne-text\">$aliases 添加 ''Image' =&gt; Intervention\\Image\\Facades\\Image::class'</span></p><p id=\"ueb1023fc\" class=\"ne-p\"><br></p><ol start=\"2\" class=\"ne-ol\"><li id=\"u7a485f19\"><span class=\"ne-text\">默认使用的是 'GD' 库，想修改的话，需要配置驱动，我们来生成配置文件：<br /></span><span class=\"ne-text\">php artisan vendor:publish --provider=&quot;Intervention\\Image\\ImageServiceProviderLaravel5&quot;</span></li></ol><p id=\"ufb5c77a4\" class=\"ne-p\"><br></p><p id=\"ud0792696\" class=\"ne-p\"><span class=\"ne-text\">生成 config/image.php 配置文件</span></p><p id=\"ucf4819f3\" class=\"ne-p\"><br></p><ol start=\"4\" class=\"ne-ol\"><li id=\"u7704e8f4\"><span class=\"ne-text\">PHP涉及到的配置项：<br /></span><span class=\"ne-text\">memory_limit - 最大内存限制</span></li><li id=\"ud157b444\"></li></ol><p id=\"ucc496928\" class=\"ne-p\"><br></p><p id=\"u4738d7a6\" class=\"ne-p\"><span class=\"ne-text\">upload_max_filesize - 如果上传图片时，可能修改</span></p><p id=\"u74bc079b\" class=\"ne-p\"><br></p><p id=\"u74a5c3ce\" class=\"ne-p\"><span class=\"ne-text\">－－－－－</span></p><p id=\"ub3095c62\" class=\"ne-p\"><br></p><p id=\"u5257ac67\" class=\"ne-p\"><span class=\"ne-text\">其实，可能还有好多<br /></span><span class=\"ne-text\">max_execution_time - 最大执行时间</span></p><hr id=\"IdT4Z\" class=\"ne-hr\"><h2 id=\"adc45117\"><span class=\"ne-text\">基本使用：</span></h2><p id=\"u76efcca2\" class=\"ne-p\"><br></p><h3 id=\"da6e5d8b\"><span class=\"ne-text\">1.使用 Intervention\\Image\\ImageManager - 图片管理类</span></h3><p id=\"ued891349\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"1c00f65f\" class=\"ne-codeblock language-php\">use Intervention\\Image\\ImageManager;\n$manager = new ImageManager(array('driver' =&gt; 'imagick'));\n$manager-&gt;make('public/foo.jpg');</pre><p id=\"u83226ef1\" class=\"ne-p\"><br></p><h3 id=\"3260a481\"><span class=\"ne-text\">2.使用 ImageManager 的静态版本</span></h3><p id=\"ua4dcfb31\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"6aa04a9f\" class=\"ne-codeblock language-php\">use Intervention\\Image\\ImageManagerStatic as Image;\nImage::configure(array('driver' =&gt; 'imagick'));\t//api中未出现此方法\nImage::make('public/foo.jpg');</pre><p id=\"u92b63e6f\" class=\"ne-p\"><br></p><h2 id=\"ef448ac7\"><span class=\"ne-text\">HTTP响应：</span></h2><p id=\"u2022c03f\" class=\"ne-p\"><br></p><h3 id=\"672e8df7\"><span class=\"ne-text\">1.将图像直接返回到用户浏览器的最简单的方法是输出response（）方法。</span></h3><p id=\"ud9556690\" class=\"ne-p\"><br></p><p id=\"u93c654aa\" class=\"ne-p\"><span class=\"ne-text\">它将根据当前图像自动发送HTTP头，并输出编码的图像数据。</span></p><p id=\"u9a0edb67\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"9a83857f\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\necho $img-&gt;response('jpg', 70);</pre><p id=\"u496fd04a\" class=\"ne-p\"><br></p><h3 id=\"c631db98\"><span class=\"ne-text\">2.手动发送HTTP响应</span></h3><p id=\"u12641445\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"b284fa63\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\nheader('Content-Type: image/png');\necho $img-&gt;encode('png');</pre><p id=\"uf1c4b9b8\" class=\"ne-p\"><br></p><p id=\"ua8b01559\" class=\"ne-p\"><strong><span class=\"ne-text\">在laravel中，同上面的2种方法一样：</span></strong></p><p id=\"ub99ee66a\" class=\"ne-p\"><br></p><h3 id=\"3.\"><span class=\"ne-text\">3.</span></h3><p id=\"u38ec21ab\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"5dd12db7\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\nreturn $img-&gt;response();</pre><p id=\"ufdeaa069\" class=\"ne-p\"><br></p><h3 id=\"4.\"><span class=\"ne-text\">4.</span></h3><p id=\"u5b4877a7\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"82ef6c91\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\n$response = Response::make($img-&gt;encode('png'));\n$response-&gt;header('Content-Type', 'image/png');\nreturn $response;</pre><p id=\"u2f5532e7\" class=\"ne-p\"><br></p><h2 id=\"46d37e50\"><span class=\"ne-text\">图片上传：</span></h2><p id=\"u2a405d7f\" class=\"ne-p\"><br></p><h3 id=\"f2552d3b\"><span class=\"ne-text\">1.直接从 $_FILES 中，获取 'tmp' 临时图片数据</span></h3><p id=\"u098d1e64\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"63c21459\" class=\"ne-codeblock language-php\">$img = Image::make($_FILES['image']['tmp_name']);// Image::make() 支持这种方式\n$img-&gt;fit(300, 200);\n$img-&gt;save('public/bar.jpg');</pre><p id=\"u658c3ad0\" class=\"ne-p\"><br></p><h3 id=\"2f651434\"><span class=\"ne-text\">2.在laravel中处理图片上传</span></h3><p id=\"u82eafd83\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"016d99f8\" class=\"ne-codeblock language-php\">Image::make(Input::file('photo'));// Input::file() 来获取$_FILES</pre><p id=\"u7c967dc7\" class=\"ne-p\"><br></p><h2 id=\"5e6dec5e\"><span class=\"ne-text\">图片过滤器：</span></h2><p id=\"u57829b9d\" class=\"ne-p\"><br></p><p id=\"u5e5d44a3\" class=\"ne-p\"><span class=\"ne-text\">图片过滤器，给了我们非常有用的方式，将多个图像转换命令集合在一个专用类中。(可将多个图像处理步骤，封装成一个过滤器)。<br /></span><span class=\"ne-text\">Intervention/image，提供了基本接口(Intervention\\Image\\Filters\\FilterInterface)，所有的过滤器都需要实现它。<br /></span><span class=\"ne-text\">调用过滤器：</span></p><p id=\"u9d79bbd4\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"ad0fb1a6\" class=\"ne-codeblock language-php\">$img = Image::make('foo.jpg');\n$img-&gt;filter(new DemoFilter(5));</pre><p id=\"udebc700b\" class=\"ne-p\"><br></p><p id=\"u2264fbd4\" class=\"ne-p\"><span class=\"ne-text\">定义过滤器：</span></p><p id=\"u23c6d115\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"47b261e8\" class=\"ne-codeblock language-php\">src/Intervention/Image/Filters/DemoFilter.php\n\n&lt;?php\nnamespace Intervention\\Image\\Filters;\n\n\tclass DemoFilter implements FilterInterface\n\t{\n\t    /**\n\t     * Default size of filter effects\n\t     */\n\t    const DEFAULT_SIZE = 10;\n\n\t    /**\n\t     * Size of filter effects\n\t     *\n\t     * @var integer\n\t     */\n\t    private $size;\n\n\t    /**\n\t     * Creates new instance of filter\n\t     *\n\t     * @param integer $size\n\t     */\n\t    public function __construct($size = null)\n\t    {\n\t        $this-&gt;size = is_numeric($size) ? intval($size) : self::DEFAULT_SIZE;\n\t    }\n\n\t    /**\n\t     * Applies filter effects to given image\n\t     *\n\t     * @param  Intervention\\Image\\Image $image\n\t     * @return Intervention\\Image\\Image\n\t     */\n\t    public function applyFilter(\\Intervention\\Image\\Image $image)\n\t    {\n\t        $image-&gt;pixelate($this-&gt;size);\n\t        $image-&gt;greyscale();\n\n\t        return $image;\n\t    }\n\t}\n?&gt;</pre><p id=\"ub571dc14\" class=\"ne-p\"><br></p><h2 id=\"5c856fc3\"><span class=\"ne-text\">图像缓存：</span></h2><p id=\"ud9e0b782\" class=\"ne-p\"><br></p><p id=\"u424010f1\" class=\"ne-p\"><span class=\"ne-text\">图像缓存包，扩展了缓存图像的能力。</span></p><p id=\"u1b2ef7f4\" class=\"ne-p\"><br></p><p id=\"u8f3d6f0e\" class=\"ne-p\"><span class=\"ne-text\">缓存包使用laravel的 'Illuminate/Cache' 包。基于laravel的缓存配置，可以使用 '文件系统'、'数据库'、'Memcached'或'Redis' 来作为临时缓冲存储</span></p><p id=\"u410892c8\" class=\"ne-p\"><br></p><p id=\"u5e3f8457\" class=\"ne-p\"><span class=\"ne-text\">原理很简单。一旦安装了缓存包，就可以调用静态缓存方法。每个对 Intervention/Image 类的方法调用，都会被缓存接口捕获和检查。如果这个特定的操作序列意境生成过，将直接从缓存中获取数据，而不是重新执行一遍资源密集型的GD操作</span></p><p id=\"u33d3d5ef\" class=\"ne-p\"><br></p><h3 id=\"1d32bcac-1\"><span class=\"ne-text\">安装：</span></h3><p id=\"u9c77298f\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"u740ae6f4\" class=\"ne-p\"><span class=\"ne-text\">composer require intervention/imagecache</span></p></div><p id=\"u35390d65\" class=\"ne-p\"><br></p><h3 id=\"08b8b8b4\"><span class=\"ne-text\">使用方式：</span></h3><p id=\"u3682dfa3\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"92794179\" class=\"ne-codeblock language-php\">$img = Image::cache(function($image){\n$image-&gt;make('public/foo.jpg')-&gt;resize(300, 200)-&gt;greyscale();\n});</pre><p id=\"u0d8b1189\" class=\"ne-p\"><br></p><h2 id=\"24cf4861\"><span class=\"ne-text\">基于URL的图像操作：</span></h2><p id=\"u0bd1ff5e\" class=\"ne-p\"><br></p><p id=\"u3272837f\" class=\"ne-p\"><span class=\"ne-text\">在Laravel应用程序中，可以使用URL来动态操作图像。 URL图像的操作版本将存储在缓存中，并且将直接加载而无需资源密集型GD操作。</span></p><p id=\"udbad237b\" class=\"ne-p\"><br></p><p id=\"u59b7883a\" class=\"ne-p\"><span class=\"ne-text\">图像必须上传一次。当通过HTTP请求方式访问文件，所有操作(例如：调整大小、裁剪)将稍后处理，例如：<br /></span><a href=\"http://yourhost.com/%7Broute-name%7D/%7Btemplate-name%7D/%7Bfile-name%7D\" data-href=\"http://yourhost.com/%7Broute-name%7D/%7Btemplate-name%7D/%7Bfile-name%7D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://yourhost.com/{route-name}/{template-name}/{file-name}</span></a></p><p id=\"ucfd8c645\" class=\"ne-p\"><br></p><h3 id=\"506a1712\"><span class=\"ne-text\">1.安装：</span></h3><p id=\"ude7bebb8\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"20d4de5d\" class=\"ne-codeblock language-plain\">composer require intervention/image\ncomposer require intervention/imagecache</pre><p id=\"u8d390532\" class=\"ne-p\"><br></p><h3 id=\"0ff6cbc8\"><span class=\"ne-text\">2.生成配置文件</span></h3><p id=\"u3f93e2cd\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"bc711ec5\" class=\"ne-codeblock language-plain\">php artisan vendor:publish\n生成 config/imagecache.php</pre><p id=\"ub3d468d1\" class=\"ne-p\"><br></p><h3 id=\"48ce34ad\"><span class=\"ne-text\">3.启用操作</span></h3><p id=\"u877255a8\" class=\"ne-p\"><br></p><p id=\"u59f73f58\" class=\"ne-p\"><span class=\"ne-text\">默认情况下，基于URL的图像操作是关闭的。在imagecache.php配置文件中，来指定 'route' 配置项</span></p><p id=\"u65ddb9dd\" class=\"ne-p\"><br></p><p id=\"u2ab64c6b\" class=\"ne-p\"><span class=\"ne-text\">'route' =&gt; 'imagecache'</span></p><p id=\"u700f8751\" class=\"ne-p\"><br></p><p id=\"u19845293\" class=\"ne-p\"><span class=\"ne-text\">配置好route后，可以通过artisan命令，列出所有已注册的路有，并检查新路有是否正确列出：</span></p><p id=\"u158865c3\" class=\"ne-p\"><br></p><p id=\"ucaf479be\" class=\"ne-p\"><span class=\"ne-text\">php artisan route:list</span></p><p id=\"u901256b0\" class=\"ne-p\"><br></p><h3 id=\"260d9642\"><span class=\"ne-text\">4.定义资源目录</span></h3><p id=\"uc6f836e4\" class=\"ne-p\"><br></p><p id=\"udbe15962\" class=\"ne-p\"><span class=\"ne-text\">告诉PHP，在哪里搜索图片。我们可以定义自己喜欢的任意数量的目录。例如：定义应用程序的所有上传目录。应用程序将在目录中搜索在路有中提交的文件。</span></p><p id=\"ud27b8013\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ec627e03\" class=\"ne-codeblock language-plain\">'paths' =&gt; array(\n'storage/uploads/images',\npublic_path('img'),\n),</pre><p id=\"u069cb014\" class=\"ne-p\"><br></p><p id=\"u7092d087\" class=\"ne-p\"><span class=\"ne-text\">在这些目录中保存具有唯一文件名的图像文件是有意义的。否则，包将返回首先找到的图像。</span></p><p id=\"uf5113a87\" class=\"ne-p\"><br></p><p id=\"u77c95d4d\" class=\"ne-p\"><span class=\"ne-text\">注意：</span></p><p id=\"u9e84530c\" class=\"ne-p\"><br></p><p id=\"u24af66f9\" class=\"ne-p\"><span class=\"ne-text\">出于安全原因，路由仅接受由以下字符组成的文件名：</span></p><p id=\"u7bb98d8b\" class=\"ne-p\"><br></p><p id=\"u710ccf68\" class=\"ne-p\"><span class=\"ne-text\">a-zA-Z0-9-_/.</span></p><p id=\"u9b27160f\" class=\"ne-p\"><br></p><h3 id=\"2ad30608\"><span class=\"ne-text\">5.模板</span></h3><p id=\"u141ed247\" class=\"ne-p\"><br></p><p id=\"u097f07b0\" class=\"ne-p\"><span class=\"ne-text\">模板的定义，就是过滤器类的名称，可以在其中定义任意操作命令(之前介绍过过滤器)。系统自带3个基本模板：</span></p><p id=\"u56a2a389\" class=\"ne-p\"><br></p><ul class=\"ne-ul\"><li id=\"ua3da023c\"><span class=\"ne-text\">small - 120x90</span></li><li id=\"udc93c1a5\"><span class=\"ne-text\">medium - 240x180</span></li><li id=\"u517f6009\"><span class=\"ne-text\">large - 480x360<br /></span><span class=\"ne-text\">我们可以在配置文件中，自由配置可用的模板：</span></li></ul><p id=\"u5cfc3b17\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"78d6b871\" class=\"ne-codeblock language-plain\">'templates' =&gt; array(\n'small' =&gt; 'Intervention\\Image\\Templates\\Small',\n'medium' =&gt; 'Intervention\\Image\\Templates\\Medium',\n'large' =&gt; 'Intervention\\Image\\Templates\\Large',\n),</pre><p id=\"uaa05a4ed\" class=\"ne-p\"><br></p><h4 id=\"2837a280\"><span class=\"ne-text\">访问原始图片：</span></h4><p id=\"ueed86b79\" class=\"ne-p\"><br></p><p id=\"ub1947721\" class=\"ne-p\"><span class=\"ne-text\">original - 使用原始图像文件，发送HTTP响应</span></p><p id=\"u4bf6e09d\" class=\"ne-p\"><br></p><p id=\"uddd8cc31\" class=\"ne-p\"><span class=\"ne-text\">download - 发送HTTP响应并强制浏览器下载原始图像文件，而不是显示它。</span></p><p id=\"u1eb6ea2c\" class=\"ne-p\"><br></p><p id=\"u196c8764\" class=\"ne-p\"><span class=\"ne-text\">例如：</span></p><p id=\"u1f6c4ab7\" class=\"ne-p\"><br></p><p id=\"uddf8d34f\" class=\"ne-p\"><a href=\"http://yourhost.com/%7Broute-name%7D/original/%7Bfile-name%7D\" data-href=\"http://yourhost.com/%7Broute-name%7D/original/%7Bfile-name%7D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://yourhost.com/{route-name}/original/{file-name}</span></a></p><p id=\"ua3c71bd2\" class=\"ne-p\"><br></p><h3 id=\"6f6a414d\"><span class=\"ne-text\">6.图像缓存的生命周期：</span></h3><p id=\"udec23afb\" class=\"ne-p\"><br></p><p id=\"ud4b48e9c\" class=\"ne-p\"><span class=\"ne-text\">一旦第一次访问了URL，搜索图片，并根据模板，编辑图像，并存储到缓存中。 所以下次访问URL时，所有的GD操作都被绕过，文件将直接来自缓存</span></p><p id=\"u165d29a4\" class=\"ne-p\"><br></p><p id=\"udc9d0362\" class=\"ne-p\"><span class=\"ne-text\">'lifetime' =&gt; 43200,        // 单位是 'minutes-分钟'<br /></span><span class=\"ne-text\">支持的格式：</span></p><p id=\"ue6c02ae4\" class=\"ne-p\"><br></p><p id=\"ubbf94059\" class=\"ne-p\"><span class=\"ne-text\">图片格式：</span></p><p id=\"u7d85c6b2\" class=\"ne-p\"><br></p><p id=\"ua80f7488\" class=\"ne-p\"><span class=\"ne-text\">GD库：jpeg, png, gif</span></p><p id=\"u1070cbf0\" class=\"ne-p\"><br></p><p id=\"ub90bcd6a\" class=\"ne-p\"><span class=\"ne-text\">Imagick库：jpeg, png, gif, tif, bmp, ico, psd</span></p><p id=\"ub5686fa3\" class=\"ne-p\"><br></p><p id=\"u503605a2\" class=\"ne-p\"><span class=\"ne-text\">颜色格式：</span></p><p id=\"ud6f4daa3\" class=\"ne-p\"><br></p><p id=\"u46e92d5a\" class=\"ne-p\"><span class=\"ne-text\">整数</span></p><p id=\"ub01ce4a1\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"72cef3bb\" class=\"ne-codeblock language-plain\">$color = Image::make('public/foo.jpg')-&gt;pickColor(10, 10);    // pickColor()返回的是整数形式的RGB值\n$img-&gt;fill($color);</pre><p id=\"u7e3b3902\" class=\"ne-p\"><br></p><p id=\"u88be15f9\" class=\"ne-p\"><span class=\"ne-text\">数组</span></p><p id=\"u7d48ee95\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"33f2dcff\" class=\"ne-codeblock language-plain\">$img-&gt;fill(array(255, 0, 0));\n$img-&gt;fill(array(255, 0, 0, 0.5));</pre><p id=\"u8813d65c\" class=\"ne-p\"><br></p><p id=\"u6b35e538\" class=\"ne-p\"><span class=\"ne-text\">16进制</span></p><p id=\"u5b273a88\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"99c88cce\" class=\"ne-codeblock language-plain\">$img-&gt;fill('#000000');</pre><p id=\"ubdceae8a\" class=\"ne-p\"><br></p><p id=\"u3a5ea298\" class=\"ne-p\"><span class=\"ne-text\">RGB和RGBA字符串格式</span></p><p id=\"ud4b618cd\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a00290bd\" class=\"ne-codeblock language-plain\">$img-&gt;fill('rgb(255, 0, 0)');\n$img-&gt;fill('rgb(255, 0, 0, 0.5)');</pre><p id=\"u1b19a391\" class=\"ne-p\"><br></p><p id=\"u6395f854\" class=\"ne-p\"><span class=\"ne-text\">创建图像：<br /></span><span class=\"ne-text\">1.canvas($width, $height [, mixed $bgcolor]) - 创建一个空的画布</span></p><p id=\"uf640de7e\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"3c06211b\" class=\"ne-codeblock language-plain\">构造方法，使用给定的宽、高，创建一个新的空的图像实例。可以选择性的定义一个背景色。默认画布背景是透明(transparent)的。\n\n示例：\n\t$img = Image::canvas(800, 600);\n\t$img = Image::canvas(32, 32, '#ff0000');</pre><p id=\"ue7abedfb\" class=\"ne-p\"><br></p><p id=\"udb43c2bc\" class=\"ne-p\"><span class=\"ne-text\">2.make($source) - 从给定的资料中读取图像</span></p><p id=\"uadc2c877\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"21d09428\" class=\"ne-codeblock language-plain\">从资源中创建新的图像实例的通用工厂方法。该方法高度可变，可读取下面列出的所有输入类型:\n\tstring - 文件系统的图片路径\n\tstring - 图片的URL地址(allow_url_fopen必须启用)\n\tstring - 二进制图片数据\n\tstring - data-url编码的图片数据\n\tstring - base64编码的图片数据\n\tresource - gd类型的PHP资源(当使用GD库)\n\tobject - Imagick实例(当使用Imagick库)\n\tobject - Intervention\\Image\\Image 实例\n\tobject - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) - laravel框架自带的图片上传实例</pre><p id=\"u4ae030e7\" class=\"ne-p\"><br></p><p id=\"u05ed3257\" class=\"ne-p\"><span class=\"ne-text\">销毁图像：<br /></span><span class=\"ne-text\">1.destroy() - 销毁图像</span></p><p id=\"u8f41f419\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"7242bd54\" class=\"ne-codeblock language-plain\">在PHP脚本结束前，释放当前图像实例相关的内存。通常资源会在脚本结束后，自动释放。\n当然，该方法调用后，图像实例不再可用。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;resize(320, 240);\n\t$img-&gt;save('public/small.jpg');\n\t$img-&gt;destroy();</pre><p id=\"ub3e5a010\" class=\"ne-p\"><br></p><p id=\"u50f403de\" class=\"ne-p\"><span class=\"ne-text\">图像输出：<br /></span><span class=\"ne-text\">1.response([string $format [, integer $quality]]) - 直接作为HTTP响应</span></p><p id=\"uc88fe4c2\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"808b4fa2\" class=\"ne-codeblock language-plain\">以指定的格式和图像质量，来发送当前图像，作为HTTP响应\n$format - 可以是:jpg,png,gif,tif,bmp。默认是jpeg\n$quality - 从0-100.默认是90</pre><p id=\"u2276d83b\" class=\"ne-p\"><br></p><p id=\"u659e428d\" class=\"ne-p\"><span class=\"ne-text\">2.save([string $path [, int $quality]]) - 保存图像到指定路径(未指定，则表示覆盖原图)</span></p><p id=\"u6786d365\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"42ef49e1\" class=\"ne-codeblock language-plain\">将图像对象的当前状态保存到文件系统中。可指定路径和图像质量。\n保存到图像类型通过文件后缀来定义。例如：foo.jpg 图片将被保存为 'JPG' 格式。如果未指定可用后缀，首先尝试图像的MIME类型，如果失败，将被编码为 'JPEG'\n此外，图像将始终以RGB颜色模式保存，而没有嵌入的颜色配置文件。\n$path - 指定图像数据写入的文件路径。如果图像是从一个存在的文件路径创建的，同时我们未指定 $path，将会尝试覆盖该路径。\n\n示例：\n\t$img = Image::make('public/foo.jpg')-&gt;resize(300, 200);\n\t$img-&gt;save('public/bar.png', 60);\n\t$img-&gt;save('public/bar.jpg');</pre><p id=\"u8b5a58ae\" class=\"ne-p\"><br></p><p id=\"u43cdcc6f\" class=\"ne-p\"><span class=\"ne-text\">3.stream([mixed $format [, int $quality]]) - 图像流</span></p><p id=\"u8e295fac\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a45840e6\" class=\"ne-codeblock language-plain\">以给定格式和给定图像质量，对当前图像进行编码，并基于图像数据，创建新的PSR-7流。</pre><p id=\"u2d2c69b8\" class=\"ne-p\"><br></p><p id=\"u1d68af39\" class=\"ne-p\"><span class=\"ne-text\">4.encode([$format [, $quality]]) - 图像进行编码</span></p><p id=\"uacae860f\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"34124cc5\" class=\"ne-codeblock language-plain\">将当前图片，按给定的格式和图片质量进行编码\n\n$format - jpg、png、gif、tif、bmp、data-url(base64)。默认返回的编码后的数据。默认类型是 'jpeg'\n$quality - 返回从 0-100。0-最低，100最大。只对 'jpg' 编码格式有效，因为png压缩是无损的，不会影响图片质量。默认是90\n\n示例：\n\t$jpg = (string) Image::make('public/foo.png')-&gt;encode('jpg', 75);\n\t$data = (string) Image::make('public/foo.png')-&gt;encode('data-url');</pre><p id=\"u64cad745\" class=\"ne-p\"><br></p><p id=\"uff59f19c\" class=\"ne-p\"><span class=\"ne-text\">图像缓存相关<br /></span><span class=\"ne-text\">1.cache(Closure $callback [, int $lifetime [,bool $returnObj]]) - 图像缓存</span></p><p id=\"uf8031851\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"7b57ef7e\" class=\"ne-codeblock language-plain\">$callback - 从Closure回调，创建新的缓存图像实例。\n$lifetime - 为回调传递一个生命周期\n$returnObj - 获取一个Intervention图像实例作为返回值，还是直接接收图像流。\ncache()方法，需要安装额外的 'intervention/imagecache' 依赖包\n\n示例：\n\t$img = Image::cache(function($image){\n\t\t$image-&gt;make('public/foo.jpg')-&gt;resize(300, 200)-&gt;greyscale();\n\t}, 10, true);</pre><p id=\"ud7e296d0\" class=\"ne-p\"><br></p><p id=\"ubb96a6e6\" class=\"ne-p\"><span class=\"ne-text\">2.backup($name = 'default') - 图像状态备份</span></p><p id=\"ua843fd1a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"1090e63e\" class=\"ne-codeblock language-plain\">备份当前图片的状态。将图片的当前状态备份到 $name。之后，可以调用 reset($name = 'default') 来进行状态恢复。\n\n$name默认是'default'。我们可以传递不同的$name，来记录图片处理过程中的多个状态\n\n示例：\n\t$img = Image::canvas(120, 90, '#000');\n\t$img-&gt;fill('#f00');\n\t$img-&gt;backup();\n\t$img-&gt;fill('#0f0');\n\t$img-&gt;reset();</pre><p id=\"uc7eea877\" class=\"ne-p\"><br></p><p id=\"uc420bcbe\" class=\"ne-p\"><span class=\"ne-text\">3.reset($name = 'default') - 图像状态恢复</span></p><p id=\"u27a921e7\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"74d3c01e\" class=\"ne-codeblock language-plain\">backup()用于备份图像状态，reset()用于恢复到之前的某个备份</pre><p id=\"u26193938\" class=\"ne-p\"><br></p><p id=\"u51e5d31e\" class=\"ne-p\"><span class=\"ne-text\">原生图像处理驱动调用：<br /></span><span class=\"ne-text\">1.getCore() - GD库｜Imagick库 对象调用</span></p><p id=\"ucadc7a92\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"9ff69ad5\" class=\"ne-codeblock language-plain\">以特定驱动的核心格式，返回当前图像。如果使用的是 'GD' 库，则返回 GD 资源类型；如果使用的是 'Imagick'，则返回一个 Imagick 对象。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$imagick = $img-&gt;getCore();\t\t\t// 返回原始的 'imagick' 对象\n\t$imagick-&gt;embossImage(0, 1);\t\t// 就可以调用 'imagick' 的方法了</pre><p id=\"u01f623da\" class=\"ne-p\"><br></p><p id=\"u7bab082d\" class=\"ne-p\"><span class=\"ne-text\">调整图像尺寸：<br /></span><span class=\"ne-text\">1.resize($width, $height [,Closure $callback]) - 调整图像尺寸</span></p><p id=\"ufe0f1b04\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"289ac572\" class=\"ne-codeblock language-plain\">使用给定的宽、高，来调整当前图像。传递一个可选的Closure回调来约束resize命令。\n回调函数，定义了resize命令的约束。可约束图像的 '宽高比(aspect-ratio)' 和 '不希望的大小(a unwanted upsizing)'\n\taspectRatio()\n\t\t约束当前图像的宽高比。作为比例调整大小的快捷方式，可以使用 widen() 和 heighten()\n\tupsize()\n\t\t保持图像大小\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;resize(300, 200);\n\t$img-&gt;resize(300, null);\n\t$img-&gt;resize(null, 200);\n\t$img-&gt;resize(300, null, function($constraint){\t\t// 调整图像的宽到300，并约束宽高比(高自动)\n\t\t$constraint-&gt;aspectRatio();\n\t});\n\t$img-&gt;resize(null, 200, function($constraint){\t\t// 调整图像的高到200，并约束宽高比(宽自动)\n\t\t$constraint-&gt;aspectRatio();\n\t});\n\t$img-&gt;resize(null, 400, function($constraint){\t\t// 阻止可能的尺寸变化(保持图像大小)\n\t\t$constraint-&gt;aspectRatio();\n\t\t$constraint-&gt;upsize();\n\t});</pre><p id=\"u30bfab03\" class=\"ne-p\"><br></p><p id=\"u4ef11b71\" class=\"ne-p\"><span class=\"ne-text\">2.widen($width [, Closure $callback]) - 调整图像宽(保持宽高比)</span></p><p id=\"ue63d3843\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8c5ad84f\" class=\"ne-codeblock language-plain\">调整图像的宽到给定的宽度，保持宽高比。传递一个可选的回调函数，来应用额外的约束，例如：阻止可能的尺寸变化\n\tupsize()\n\t\t保持图像大小</pre><p id=\"u41a75ea5\" class=\"ne-p\"><br></p><p id=\"u8e1ba88e\" class=\"ne-p\"><span class=\"ne-text\">3.heighten($height [, Closure $callback]) - 调整图像高(保持宽高比)</span></p><p id=\"ube8ee1ea\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a9625099\" class=\"ne-codeblock language-plain\">调整图像的高到给定的高度，保持宽高比。传递一个可选的回调函数，来应用额外的约束，例如：阻止可能的尺寸变化\n\tupsize()\n\t\t保持图像大小</pre><p id=\"u81cb5e72\" class=\"ne-p\"><br></p><p id=\"u9f51dd78\" class=\"ne-p\"><span class=\"ne-text\">4.crop($width, $height [, $x, $y]) - 裁剪图像</span></p><p id=\"ue6a9252d\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"4af19940\" class=\"ne-codeblock language-plain\">使用给定的宽、高，裁剪当前图像的一个矩形区域。默认从图像的0.0开始，可传递一个坐标，定位裁剪的起始点。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;crop(100, 100, 20, 20);</pre><p id=\"u3e1ba682\" class=\"ne-p\"><br></p><p id=\"u338a7e8a\" class=\"ne-p\"><span class=\"ne-text\">5.fit(</span><span id=\"z1YfA\" class=\"ne-math\"><img src=\"https://g.yuque.com/gr/latex?width%20%5B%5B\"></span><span class=\"ne-text\">height] [, Closure $callback [, $position]]]) - 智能裁剪和调整</span></p><p id=\"u060e1ed6\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"248846d4\" class=\"ne-codeblock language-plain\">以一个智能的方式，结合裁剪和调整来格式化图片。该方法将会自动找到给定的宽、高的最佳宽高比，裁剪并调整到给定尺寸。\n$callback - 回调函数，来约束可能的尺寸变化\n\tupsize()\n\t\t保持图像大小\n\n$position - 自定义裁剪的位置。默认是 '中心'\n\ttop-left\n\ttop\n\ttop-right\n\tleft\n\tcenter(默认)\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right</pre><p id=\"u3e41c2f7\" class=\"ne-p\"><br></p><p id=\"u30aed8b4\" class=\"ne-p\"><span class=\"ne-text\">6.resizeCanvas($width, $height [, $anchor [, bool $relative [, $bgcolor]]])</span></p><p id=\"u0003dca7\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"57a276d7\" class=\"ne-codeblock language-plain\">调整当前图像的边界到给定的宽和高。\n\n$anchor - 从图像的哪点开始调整\n\ttop-left\n\ttop\n\ttop-right\n\tleft\n\tcenter(默认)\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n\n$relative - 将模式设置为相对，用以在真实的图片尺寸上，添加或者减去给定的宽、高。\n\n$bgcolor - 画布背景(默认 '#000000')</pre><p id=\"u38b171a8\" class=\"ne-p\"><br></p><p id=\"ub4f534cc\" class=\"ne-p\"><span class=\"ne-text\">7.trim([$base [, array $away [, $tolerance [, $feather]]]])<br /></span><span class=\"ne-text\">以给定颜色修剪图像空间。</span></p><p id=\"uc32aeeee\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"054eabd2\" class=\"ne-codeblock language-plain\">$base - 定义从什么位置来选取修剪颜色的点。例如：设置为  'bottom-right'，图像上的所有颜色将被修剪掉，等同于图片左下角的颜色。可选的值有：\n\ttop-left(默认)\n\tbottom-right\n\ttranparent\n\n$away - 应该被修剪掉的边框。你可以添加多个边框(array)，可选的值有：\n\ttop\n\tbottom\n\tleft\n\tright\n\n$tolerance - 定义一个偏差度，修剪相似颜色值。范围0-100。默认是0\n\n$feather - 羽化效果\n\t有时，在修剪时在对象周围留下未触摸的“边框”可能是有用的。 特别是修剪非实体背景时，您可以展开（正值）或收缩（负值）修剪对象周围的空间一定量的像素。\n\n示例：\n\tImage::make('public/foo.jpg')-&gt;trim();\t\t// 默认，所有边框使用 'top-left' 颜色\n\tImage::make('public/foo.jpg')-&gt;trim('bottom-right');\t\t// 所有边框使用 'bottom-right' 颜色\n\tImage::make('public/foo.jpg')-&gt;trim('transparent', array('top', 'bottom'));\t\t// 上、下边框透明\n\tImage::make('public/foo.jpg')-&gt;trim('top-left', 'left');\t\t// 只有左边框，使用 'top-left' 颜色\n\tImage::make('public/foo.jpg')-&gt;trim('top-left', null, 40);\t\t// 移除图像所有边框＋40偏差度\n\tImage::make('public/foo.jpg')-&gt;trim('top-left', null, 25, 50);\t\t// 移除图像所有边框＋25偏差度＋50px的边框羽化效果</pre><p id=\"u9c741fdf\" class=\"ne-p\"><br></p><p id=\"u8075bd82\" class=\"ne-p\"><span class=\"ne-text\">调整图像：<br /></span><span class=\"ne-text\">1.gamma($correction) - 伽马矫正</span></p><p id=\"ue6c6c944\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"894c1065\" class=\"ne-codeblock language-plain\">对当前图像执行伽马矫正操作\n$correction - 伽马补偿值(gamma compensation value)\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;gamma(1.6);</pre><p id=\"uea6a9d8b\" class=\"ne-p\"><br></p><p id=\"uaed7d836\" class=\"ne-p\"><span class=\"ne-text\">2.brightness($level) - 亮度</span></p><p id=\"uae90b51b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"726167fe\" class=\"ne-codeblock language-plain\">改变当前图像的亮度。$level可选范围为：-100 - 100。0-表示不改变，-100最小，＋100最大。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;brightness(35);</pre><p id=\"u460292c3\" class=\"ne-p\"><br></p><p id=\"ud8e93b70\" class=\"ne-p\"><span class=\"ne-text\">3.constrast($level) - 对比度</span></p><p id=\"u511ae49b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"0a024424\" class=\"ne-codeblock language-plain\">改变图像的对比度。$level可选范围为：-100 - 100。0-表示不改变，-100最小，＋100最大。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;constrast(35);</pre><p id=\"ua6a1836a\" class=\"ne-p\"><br></p><p id=\"u1c41b088\" class=\"ne-p\"><span class=\"ne-text\">4.colorize($red, $green, $blue) - 改变RGB色道</span></p><p id=\"uf20b60da\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"b048ba65\" class=\"ne-codeblock language-plain\">使用给定的红、绿、蓝色道，改变当前图像的RGB颜色。色道值是规范化的，范围从 -100 - 100。0-表示不改变，－100表示移除图像上的所有特定颜色，＋100表示最大颜色\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;colorize(-100, 0, 100);\t// 添加蓝，移除红\n\t$img-&gt;colorize(0, 30, 0);\t\t// 给图片添加部分蓝色调</pre><p id=\"ufe251fe0\" class=\"ne-p\"><br></p><p id=\"uf5590698\" class=\"ne-p\"><span class=\"ne-text\">5.greyscale() - 灰度</span></p><p id=\"u2703a1c8\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"24115df7\" class=\"ne-codeblock language-plain\">将图像转换为灰度版本\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$image = $img-&gt;greyscale();</pre><p id=\"u4b1295c9\" class=\"ne-p\"><br></p><p id=\"u541dc75d\" class=\"ne-p\"><span class=\"ne-text\">6.flip($mode) - 图像镜像</span></p><p id=\"u72aa8203\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"7249adeb\" class=\"ne-codeblock language-plain\">给当前图像，制作镜像。$mode可以指定为：h-水平镜像和v-垂直镜像。默认是h\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;flip('v');</pre><p id=\"ucde44ea3\" class=\"ne-p\"><br></p><p id=\"udb74dda9\" class=\"ne-p\"><span class=\"ne-text\">7.invert() - 反转图像颜色</span></p><p id=\"u42e5dc7b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"d37aac96\" class=\"ne-codeblock language-plain\">反转当前图像的所有颜色\n\n示例：\n\t$img = Image::make('public/foo.jpg')-&gt;invert();</pre><p id=\"u6d98289e\" class=\"ne-p\"><br></p><p id=\"uf9616a15\" class=\"ne-p\"><span class=\"ne-text\">8.opacity($transparency) - 设置图像的透明度</span></p><p id=\"u7e69fa4a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ff3fffa5\" class=\"ne-codeblock language-plain\">设置当前图像的不透明度的百分比。从 100%-0%，100%－不透明｜0%-全透明\n\n示例：\n\tImage::make('public/foo.jpg')-&gt;opacity(50);\n\tImage::make('public/foo.jpg')-&gt;opacity(0);</pre><p id=\"u20454f43\" class=\"ne-p\"><br></p><p id=\"u36340352\" class=\"ne-p\"><span class=\"ne-text\">9.orientate() - 旋转图像(记得摩点图像处理，使用了它。Imagick)</span></p><p id=\"ufa989bc1\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ac27090c\" class=\"ne-codeblock language-plain\">此方法读取EXIF图像配置项 '方向'，并对图像执行旋转，以正确显示图像。必须从文件路径实例化图像，才能正确读取EXIF数据\n注意：\n\t使用该方法，要求PHP编译时，必须指定 '--enable-exif'。windows用户，还必须启用 'mbstring' 扩展\n\n示例：\n\t$img = Image::make('public/foo.jpg')-&gt;orientate();</pre><p id=\"uc7725053\" class=\"ne-p\"><br></p><p id=\"ua2263217\" class=\"ne-p\"><span class=\"ne-text\">10.rotate(float $angle [, string $bgcolor]) - 图像旋转</span></p><p id=\"ud7c1111d\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"aaae9aca\" class=\"ne-codeblock language-plain\">将当前图像，逆时针旋转给定角度。可定义旋转后，未覆盖区域的背景颜色！\n$angle - 旋转角度\n$bgcolor - 旋转后，可能出现未覆盖区域，我们可设置背景色</pre><p id=\"ub5a3ebc2\" class=\"ne-p\"><br></p><p id=\"u20befdbe\" class=\"ne-p\"><span class=\"ne-text\">11.mask($source [, bool $mask_with_alpha = false])<br /></span><span class=\"ne-text\">将给定的图像资源应用为当前图像的alpha蒙板，以改变当前透明度。蒙板将调整为当前图像大小。默认情况下，蒙板的灰度版本会转换为alpha值，但可通过设置 </span><span id=\"gDfje\" class=\"ne-math\"><img src=\"https://g.yuque.com/gr/latex?mask_with_alpha%20%E4%BB%A5%E5%BA%94%E7%94%A8%E4%B8%96%E7%BA%AA%E7%9A%84alpha%E9%80%9A%E9%81%93%E3%80%82%E5%B0%86%E4%BF%9D%E6%8C%81%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E9%80%8F%E6%98%8E%E5%BA%A6%E3%80%82%0A\"></span><span class=\"ne-text\">source：<br /></span><span class=\"ne-text\">string - 文件系统的图片路径<br /></span><span class=\"ne-text\">string - 图片的URL地址(allow_url_fopen必须启用)<br /></span><span class=\"ne-text\">string - 二进制图片数据<br /></span><span class=\"ne-text\">string - data-url编码的图片数据<br /></span><span class=\"ne-text\">string - base64编码的图片数据<br /></span><span class=\"ne-text\">resource - gd类型的PHP资源(当使用GD库)<br /></span><span class=\"ne-text\">object - Imagick实例(当使用Imagick库)<br /></span><span class=\"ne-text\">object - Intervention\\Image\\Image 实例<br /></span><span class=\"ne-text\">object - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) -<br /></span><span class=\"ne-text\">laravel框架自带的图片上传实例<br /></span><span class=\"ne-text\">$mask_with_alpha - 设置为true，可将实际的alpha通道作为蒙板，应用于当前图像，替代颜色值。默认是 false<br /></span><span class=\"ne-text\">应用效果：<br /></span><span class=\"ne-text\">1.filter(Intervention\\Image\\Filters\\FilterInterface $filter) - 使用滤镜</span></p><p id=\"ud2df4cbd\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a8094baa\" class=\"ne-codeblock language-plain\">给当前图像，应用自定义的滤镜效果</pre><p id=\"u153ee170\" class=\"ne-p\"><br></p><p id=\"uc5b08d37\" class=\"ne-p\"><span class=\"ne-text\">2.blur($amount = 1) - 高斯模糊</span></p><p id=\"u05239ae8\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"6d6aa6df\" class=\"ne-codeblock language-plain\">在当前图片上，应用高斯模糊滤镜。$amount可选范围为 0-100。(GD库处理，高强度的高斯模糊会非常占用性能，小心使用)\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;blur();\t\t// 轻微的高斯模糊\n\t$img-&gt;blur(15);\t\t// 高强度的高斯模糊</pre><p id=\"u6e542320\" class=\"ne-p\"><br></p><p id=\"ue3a680bb\" class=\"ne-p\"><span class=\"ne-text\">3.sharpen($amount = 10) - 锐化效果</span></p><p id=\"u81677015\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"41177e95\" class=\"ne-codeblock language-plain\">锐化当前图像。$amount可选范围为 0-100。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;sharpen(15);</pre><p id=\"u9ef1a62b\" class=\"ne-p\"><br></p><p id=\"u360c5c36\" class=\"ne-p\"><span class=\"ne-text\">4.pixelate($size) - 像素化效果</span></p><p id=\"u3d312c25\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ccf3ed9c\" class=\"ne-codeblock language-plain\">将像素化效果应用于当前图像(指定像素化效果的尺寸)</pre><p id=\"uedbece8e\" class=\"ne-p\"><br></p><p id=\"ufcb7dace\" class=\"ne-p\"><span class=\"ne-text\">5.limitColors($count [, $matte])</span></p><p id=\"ud25685a6\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8e4581ef\" class=\"ne-codeblock language-plain\">将当前图片的现有颜色，转换为具有给定最大颜色数的颜色表。该函数保留尽可能多的alpha通道信息，并将透明像素与可选的遮罩颜色混合。\n$count - 应在调色板中保留的最大颜色数。设置为null，转为真彩色(truecolor)\n$matte - 用于混合透明像素的颜色。默认值：无遮罩颜色\n\n示例：\n\t$img = Image::make('public/foo.png');\n\t$img-&gt;limitColors(255, '#f90');</pre><p id=\"u1e703dc8\" class=\"ne-p\"><br></p><p id=\"u9421cde2\" class=\"ne-p\"><span class=\"ne-text\">6.interlace($interlace = true) - 图像隔行扫描</span></p><p id=\"ueb243cb3\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"c0405ea6\" class=\"ne-codeblock language-plain\">传递一个boolean类型参数，切换隔行扫描模式，来确定是否使用隔行扫描或标准模式，对图像进行编码。如果jpeg图像使用隔行扫描模式，图像将被处理为渐进式jpeg。\n设置为true－隔行扫描模式｜false－标准模式。默认是true\n\n示例：\n\t$img = Image::make('public/foo.png');\n\t$img-&gt;interlace();\t\t\t// 开启隔行扫描\n\t$img-&gt;save();\n\t$img = Image::make('public/interlaced.gif');\n\t$img-&gt;interlace(false);\t\t// 关闭隔行扫描\n\t$img-&gt;save();</pre><p id=\"u17dcdf10\" class=\"ne-p\"><br></p><p id=\"u3b36a2dd\" class=\"ne-p\"><span class=\"ne-text\">画图：<br /></span><span class=\"ne-text\">1.text($text [, $x [, $y [, Closure $callback]]]) - 文字</span></p><p id=\"u2454833f\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"5f0bd574\" class=\"ne-codeblock language-plain\">在指定的位置，写入文本。在回调函数中，可定义更多细节，例如：字体大小，字体文件，对其方式等\n$callback - 回调函数\n\tfile($filepath) - 字体文件。设置True Type Font文件的路径，或者GD库内部字体之一的1到5之间的整数值。 默认值：1\n\tsize($size) - 字体大小。字体大小仅在设置字体文件时可用，否则将被忽略。 默认值：12\n\tcolor($color) - 字体颜色\n\talign($align) - 水平对齐方式：left,right,center。默认left\n\tvalign($valign) - 垂直对齐方式：top,bottom,middle。默认bottom\n\tangle($angle) - 文本旋转角度。文本将围绕垂直和水平对齐点逆时针旋转。 旋转仅在设置字体文件时可用，否则将被忽略</pre><p id=\"ubfd53ec3\" class=\"ne-p\"><br></p><p id=\"uab559066\" class=\"ne-p\"><span class=\"ne-text\">2.pixel($color, $x, $y) - 点</span></p><p id=\"u4fc807fa\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"2c3e5a01\" class=\"ne-codeblock language-plain\">在给定的坐标上，以给定的颜色画单个像素点</pre><p id=\"u79c810a7\" class=\"ne-p\"><br></p><p id=\"u4a5b1fed\" class=\"ne-p\"><span class=\"ne-text\">3.line($x1, $y1, $x2, $y2 [Closure $callback]) - 线</span></p><p id=\"u9be6f524\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"d323dced\" class=\"ne-codeblock language-plain\">在当前图像上，指定2点画线。可以在回调函数中，定义线的颜色和宽度\n$callback\n\tcolor($color) - 指定线的颜色。默认：#000000\n\twidth($width) - 指定线的宽度。默认：1px。\t\t\t// GD库无效！！</pre><p id=\"ue5e51dc7\" class=\"ne-p\"><br></p><p id=\"u74a6da5a\" class=\"ne-p\"><span class=\"ne-text\">4.rectangle($x1, $y1, $x2, $y2 [Closure $callback]) - 矩形</span></p><p id=\"u1ebc092a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"432f13ae\" class=\"ne-codeblock language-plain\">指定2点坐标，分别代表左上角和右下角，来画一个矩形。</pre><p id=\"ua3f5a24b\" class=\"ne-p\"><br></p><p id=\"u5bd7b423\" class=\"ne-p\"><span class=\"ne-text\">5.polygon(array $points [, Closure $callback]) - 多边形</span></p><p id=\"u687dbb40\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"5b18f194\" class=\"ne-codeblock language-plain\">使用给定的点数据，来画一个多边形。可以在回调函数中，定义多变形的外观\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n\n示例：\n\t$img = Image::canvas(800, 600, '#ddd');\n\t$points = array(\n\t\t40, 50,\n\t\t30, 40,\n\t\t20, 30,\n\t\t10, 20,\n\t\t5, 10,\n\t);\n\t$img-&gt;polygon($points, function($draw){\n\t\t$draw-&gt;background('#ff0');\n\t\t$draw-&gt;border(1, '#f0f');\n\t})</pre><p id=\"ue6cc9209\" class=\"ne-p\"><br></p><p id=\"ubade9bb4\" class=\"ne-p\"><span class=\"ne-text\">6.circle($diameter, $x, $y [,Closure $callback]) - 圆</span></p><p id=\"u1641cab0\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"912c9798\" class=\"ne-codeblock language-plain\">在给定的x、y坐标点上，使用给定的直径画一个圆。\n可以通过回调函数，来定义圆的外观。\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n\n示例：\n\t$img = Image::canvas(300, 200, '#ddd');\n\t$img-&gt;circle(100, 50, 50, function($draw){\n\t\t$draw-&gt;background('#ff0');\n\t\t$draw-&gt;border(1, '#f00');\n\t})</pre><p id=\"ufc4de046\" class=\"ne-p\"><br></p><p id=\"u8c9b9609\" class=\"ne-p\"><span class=\"ne-text\">7.ellipse($width = 10, $height = 10, $x, $y [Closure $callback]) - 椭圆</span></p><p id=\"u87878a06\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"d7a09676\" class=\"ne-codeblock language-plain\">在给定的x、y坐标点，绘制彩色椭圆。可以定义宽度和高度，以及通过可选的闭包回调来设置椭圆的外观\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框</pre><p id=\"uabb7582d\" class=\"ne-p\"><br></p><p id=\"ufc740d75\" class=\"ne-p\"><span class=\"ne-text\">图像的其它处理方法：<br /></span><span class=\"ne-text\">1.fill($filling [, $x, $y]) - 图像填充</span></p><p id=\"u7a5a31c7\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"f15fd254\" class=\"ne-codeblock language-plain\">使用给定颜色或另一张图片来填充当前图像。传递可选的x、y坐标，表示开始填充的位置。\n如果指定了x、y坐标，原始图像上该坐标的颜色，将执行泛红填充(flood fill)。如果未指定坐标，不管下面是什么，填充整个图像\n\n$filling - 填充颜色或图像模式。图像资源格式如下：\n\tstring - 文件系统的图片路径\n\tstring - 图片的URL地址(allow_url_fopen必须启用)\n\tstring - 二进制图片数据\n\tstring - data-url编码的图片数据\n\tstring - base64编码的图片数据\n\tresource - gd类型的PHP资源(当使用GD库)\n\tobject - Imagick实例(当使用Imagick库)\n\tobject - Intervention\\Image\\Image 实例\n\tobject - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) - laravel框架自带的图片上传实例\n\n示例：\n\t$img = Image::canvas(800, 600);\n\t$img-&gt;fill('#ccc');\n\t$img-&gt;fill('public/foo.jpg');\n\t$img-&gt;fill('#f0f', 0, 0);</pre><p id=\"u233292cb\" class=\"ne-p\"><br></p><p id=\"ub38b031b\" class=\"ne-p\"><span class=\"ne-text\">2.insert($source [, $position [, $x, $y]]) - 插入图片</span></p><p id=\"udf386839\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"fb82a691\" class=\"ne-codeblock language-plain\">将一个给定的图片资源插入到当前图像中。\n\n$source - 另一个图片资源\n\n$position - 位置(相对于当前图像)\n\ttop-left(默认)\n\ttop\n\ttop-right\n\tleft\n\tcenter\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n\n$x,$y - 偏移坐标(默认：0.0)\n\t在 $position 指定的位置上，再进行相对偏移\n\n此方法可用于，将另一张图像作为水印，因为保持了透明度。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;insert('public/bar.png');\t\t\t\t\t\t\t\t\t// 插入另一个图片\n\t$watermark = Image::make('public/watermark.png');\t\t\t\t// 创建一个新的图片实例\n\t$img-&gt;insert($watermark, 'center');\t\t\t\t\t\t\t\t// 插入图片\n\t$img-&gt;insert('public/watermark.png', 'bottom-right', 10, 10);</pre><p id=\"ue8acce14\" class=\"ne-p\"><br></p><p id=\"ufb70160a\" class=\"ne-p\"><span class=\"ne-text\">3.pickColor($x, $y [string $format]) - 选取给定坐标颜色</span></p><p id=\"u4dbe8682\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"39e7e41a\" class=\"ne-codeblock language-plain\">在当前图像上的指定坐标，获取颜色，并返回给定的颜色格式\n$format - 颜色格式，可以是：\n\tarray - array(255, 255, 255, 1)\n\trgb - rgb(255, 255, 255)\n\trgba - rgba(255, 255, 255, 0.5)\n\thex - #cccccc\n\tint - 16776956\n默认情况下，该方法将像素的RGB值作为数组返回。使用整数格式，将颜色直接传递给任意GD库函数</pre><p id=\"ucac01800\" class=\"ne-p\"><br></p><p id=\"ufe862eab\" class=\"ne-p\"><span class=\"ne-text\">检索信息：<br /></span><span class=\"ne-text\">1.width()<br /></span><span class=\"ne-text\">获取当前图片的宽度(单位：px)</span></p><p id=\"ucc1aa728\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"c8b0ac52\" class=\"ne-codeblock language-plain\">示例：\n\t$width = Image::make('public/foo.jpg')-&gt;width();</pre><p id=\"ua85ccb9c\" class=\"ne-p\"><br></p><p id=\"ub63b4c70\" class=\"ne-p\"><span class=\"ne-text\">2.height()<br /></span><span class=\"ne-text\">获取当前图片的高度(单位：px)</span></p><p id=\"u7258613b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"b4e8b05f\" class=\"ne-codeblock language-plain\">示例：\n\t$height = Image::make('public/foo.jpg')-&gt;height();</pre><p id=\"u955a4646\" class=\"ne-p\"><br></p><p id=\"uf37b7384\" class=\"ne-p\"><span class=\"ne-text\">3.mime()<br /></span><span class=\"ne-text\">如果已经图像已经定义了MIME类型，从当前图像实例中读取MIME类型。</span></p><p id=\"uadb45d7c\" class=\"ne-p\"><br></p><p id=\"u927b8ee5\" class=\"ne-p\"><span class=\"ne-text\">4.exif([string </span><span id=\"cys3F\" class=\"ne-math\"><img src=\"https://g.yuque.com/gr/latex?key%5D)%0A%E4%BB%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96%20'Exif'%20%E5%85%83%E6%95%B0%E6%8D%AE%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%8E%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E6%98%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%9B%BE%E5%83%8F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96EXIF%E6%95%B0%E6%8D%AE%0Aimagick%E4%BB%8E2.3.9%E5%BC%80%E5%A7%8B%E6%94%AF%E6%8C%81exif%E3%80%82PHP%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%8C%85%E5%90%AB%20'--enable-exif'%20%E6%89%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E3%80%82windows%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%98%E5%BF%85%E9%A1%BB%E5%BC%80%E5%90%AF%20'mbstring'%20%E6%89%A9%E5%B1%95(PHP%E6%89%8B%E5%86%8C%E6%9C%89%E8%AF%A5%E5%87%BD%E6%95%B0%E5%BA%93)%0A\"></span><span class=\"ne-text\">key - 检索的exif哪个下标</span></p><p id=\"u7e80c617\" class=\"ne-p\"><br></p><p id=\"u9a024b0f\" class=\"ne-p\"><span class=\"ne-text\">5.iptc([string $key])<br /></span><span class=\"ne-text\">从当前图像中读取 'IPTC' 元数据<br /></span><span class=\"ne-text\">默认获取所有元数据，可以传递下标，来获取指定的元数据。没有发现元数据，返回 'NULL'</span></p><p id=\"u286bd0b0\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8e0f237a\" class=\"ne-codeblock language-plain\">示例：\n\t$data = Image::make('public/foo.jpg')-&gt;iptc();\t\t\t\t\t\t// 获取所有数据\n\n\t$copyright = Image::make('public/foo.jpg')-&gt;iptc('Copyright');\t\t// 获取 'Copyright'</pre><p id=\"u1060959f\" class=\"ne-p\"><br></p><p id=\"u8ddc5bbf\" class=\"ne-p\"><span class=\"ne-text\">6.filezise()<br /></span><span class=\"ne-text\">如果实例是从一个真实文件初始化的，获取当前图像实例的文件尺寸<br /></span><span class=\"ne-text\">返回图像的尺寸大小，单位是 'bytes - 字节'，如果不是从一个文件创建的图像实例，则返回false</span></p><p id=\"u5f873a49\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"13ab79b6\" class=\"ne-codeblock language-plain\">示例：\n\t$img = Image::make('public/foo.jpg');\n\t$size = $img-&gt;filesize();</pre></div>",
    "body": "tags: [图像处理,image,interertion]<br />categories: 学无止境<br />copyright_author_href:  https://blog.csdn.net/beyond__devil<br />copyright_url: https://blog.csdn.net/beyond__devil/article/details/62230610<br />copyright_author: beyond__devil<br />cover:\n\n---\n\n<br />安装：\n\n<a name=\"25a68d79\"></a>\n### 需求：\n\n- PHP >= 5.4\n- Fileinfo 扩展\n- GD库 >= 2.0\n- Imagick 扩展 >=6.5.7\n\n<a name=\"0456f5e6\"></a>\n### composer安装：\n\n> composer require intervention/image\n\n\n\n<a name=\"b1B5T\"></a>\n## 简单的基本使用\n```php\n        $img->blur(12);//图片的模糊度，GD下大量使用影响性能，默认1\n        $img->brightness(30);//图片亮度，-100-100，默认0\n        $img = Image::canvas(32, 32, '#ff0000');//画图创建画板，可添加背景色\n        $img = Image::canvas(300, 200, '#ddd');\n        $img->circle(100, 50, 50, function ($draw) {//在图片里面画圆，直径，x坐标，y坐标\n            $draw->background('#0000ff');//背景色\n            $draw->border(1, '#f00');//圆边框，与背景色\n        $img->colorize(-100, 0, 100);//R,G,B调色，【-100,100】\n        $img->contrast(65);//对比度【-100,100】\n        });\n        $img->crop(100, 100, 25, 25);//图片的裁剪，默认左上角开始裁剪，宽，高，可选x,y坐标\n        $img->destroy();//删除图片\n       $img->save('/222.jpg');//保存图片\n        $img->ellipse(20, 30, 20, 30, function ($draw) {//定义椭圆跟圆一致\n            $draw->background('#0000ff');\n            $draw->border(1, '#ff0000');\n        });\n        $img->encode('jpg', 75);//编码，只有jpg才能选择质量，0-100\n        $img->fill('#ff00ff',0, 0);//填充图片或颜色，可带坐标，带坐标以该坐标点颜色进行选择填充\n        $img->flip('h');//图片翻转，v上下，h左右\n        $img->fit(200,300);//修改图片长宽，按比例，自动裁剪，一个参数正方形\n        $img->fit(800, 600, function ($constraint) {//按照比例多原始图片最大修剪\n            $constraint->upsize();\n        });\n        $img->gamma(5);//色彩gamma矫正》0\n        $imagick = $img->getCore();//返回 gd resource 资源size：宽X高，trueColor\n        dd($imagick);\n        $img->greyscale();//将图片变灰\n      return  $img->height();//图片高度\n        $img->heighten(50);\n        $img->heighten(50, function ($constraint) {\n            $constraint->upsize();\n        });//以高为基准生成比例图片\n        $tt= Image::canvas(130,100,'#F60');\n        $img->insert('public/watermark.png', 'bottom-right', 10, 10);//插入图片，可选位置模式，默认：top-left ，top，top-right，left，center，right，bottom-left，bottom，bottom-right，可选x,y坐标\n        $img->interlace(true);//编码相关，true，false\n        $img->invert();//反转图片颜色\n       $tt =  $img->iptc();\n        $img->limitColors(30);//色彩限制，出现磨砂效果\n        $img->line(10, 10, 195, 195, function ($draw) {//不支持GD，画线\n            $draw->color('#f00');\n            $draw->width(5);\n        });\n        $img->mask($tt,true);\n       dd($tt);\n        return $img->mime();//图片格式 image/jpeg\n        $img->opacity(90);//透明度0-100，消耗性能\n        return $img->orientate();\n    return $img->pickColor(50,50,'hex');//获取坐标颜色，array，rgb，rgba，hex，int\n        $img->pixel('#0000ff', 32, 32);//指定坐标填充色彩\n\n        $img->pixelate(2);//像素画马赛克\n        $points = array(\n            40,  50,  // Point 1 (x, y)\n            20,  110, // Point 2 (x, y)\n            60,  60,  // Point 3 (x, y)\n            120, 20,  // Point 4 (x, y)\n            50,  40,  // Point 5 (x, y)\n            10,  10   // Point 6 (x, y)\n        );\n        $img->polygon($points, function ($draw) {\n            $draw->background('#0000ff');\n            $draw->border(1, '#ff0000');\n        });//坐标画图，背景和边框\n        $img->rectangle(5, 5, 50, 50, function ($draw) {//画矩形，可选背景色（颜色类型可选rgba，和普通）\n            $draw->background('rgba(255, 255, 255, 0.5)');\n            $draw->border(2, '#000');\n        });\n        $img->backup();//备份图片状态\n        $img->reset();//图片恢复到备份状态\n        $img->resize(null, 200, function ($constraint) {\n            $constraint->aspectRatio();\n            $constraint->upsize();\n        });//设置图片的大小，回调可选，可单设置宽，高\n        $img->resizeCanvas(1280, 720, 'center', false, 'ff00ff');//图片添加背景画板，可选位置模式，相对添加，背景色\n        $img->rotate(-45);//转动图片\n        $img->sharpen(15);//锐化，0-100\n        $img->stream('jpg', 60);//流编码\n        $img->text('foo', 50, 50, function($font) {\n            $font->file('foo/bar.ttf');\n            $font->size(72);\n            $font->color('#fdf6e3');\n            $font->align('center');\n            $font->valign('top');\n            $font->angle(30);\n        });\n        $img->text('The quick brown fox jumps over the lazy dog.', 50, 50);\n        $img->text('foo', 0, 0, function($font) {\n            $font->color(array(255, 255, 255, 0.5));\n        });//文字书写\n        $img->widen(300, function ($constraint) {\n            $constraint->upsize();\n        });//按照宽等比，可回调\n        return $img->width();//获取图片宽\n        return $img->response('png');//修改图片格式\n\n```\n<a name=\"d71f57ae\"></a>\n### laravel配置：\n\n1. 编辑 config/app.php<br />$providers 添加 'Intervention\\Image\\ImageServiceProvider::class'\n2. <br />\n\n$aliases 添加 ''Image' => Intervention\\Image\\Facades\\Image::class'\n\n2. 默认使用的是 'GD' 库，想修改的话，需要配置驱动，我们来生成配置文件：<br />php artisan vendor:publish --provider=\"Intervention\\Image\\ImageServiceProviderLaravel5\"\n\n生成 config/image.php 配置文件\n\n4. PHP涉及到的配置项：<br />memory_limit - 最大内存限制\n5. <br />\n\nupload_max_filesize - 如果上传图片时，可能修改\n\n－－－－－\n\n其实，可能还有好多<br />max_execution_time - 最大执行时间\n\n---\n\n<a name=\"adc45117\"></a>\n## 基本使用：\n\n<a name=\"da6e5d8b\"></a>\n### 1.使用 Intervention\\Image\\ImageManager - 图片管理类\n\n```php\nuse Intervention\\Image\\ImageManager;\n$manager = new ImageManager(array('driver' => 'imagick'));\n$manager->make('public/foo.jpg');\n```\n\n<a name=\"3260a481\"></a>\n### 2.使用 ImageManager 的静态版本\n\n```php\nuse Intervention\\Image\\ImageManagerStatic as Image;\nImage::configure(array('driver' => 'imagick'));\t//api中未出现此方法\nImage::make('public/foo.jpg');\n```\n\n<a name=\"ef448ac7\"></a>\n## HTTP响应：\n\n<a name=\"672e8df7\"></a>\n### 1.将图像直接返回到用户浏览器的最简单的方法是输出response（）方法。\n\n它将根据当前图像自动发送HTTP头，并输出编码的图像数据。\n\n```php\n$img = Image::canvas(800, 600, '#ff0000');\necho $img->response('jpg', 70);\n```\n\n<a name=\"c631db98\"></a>\n### 2.手动发送HTTP响应\n\n```php\n$img = Image::canvas(800, 600, '#ff0000');\nheader('Content-Type: image/png');\necho $img->encode('png');\n```\n\n**在laravel中，同上面的2种方法一样：**\n\n<a name=\"3.\"></a>\n### 3.\n\n```php\n$img = Image::canvas(800, 600, '#ff0000');\nreturn $img->response();\n```\n\n<a name=\"4.\"></a>\n### 4.\n\n```php\n$img = Image::canvas(800, 600, '#ff0000');\n$response = Response::make($img->encode('png'));\n$response->header('Content-Type', 'image/png');\nreturn $response;\n```\n\n<a name=\"46d37e50\"></a>\n## 图片上传：\n\n<a name=\"f2552d3b\"></a>\n### 1.直接从 $_FILES 中，获取 'tmp' 临时图片数据\n\n```php\n$img = Image::make($_FILES['image']['tmp_name']);// Image::make() 支持这种方式\n$img->fit(300, 200);\n$img->save('public/bar.jpg');\n```\n\n<a name=\"2f651434\"></a>\n### 2.在laravel中处理图片上传\n\n```php\nImage::make(Input::file('photo'));// Input::file() 来获取$_FILES\n```\n\n<a name=\"5e6dec5e\"></a>\n## 图片过滤器：\n\n图片过滤器，给了我们非常有用的方式，将多个图像转换命令集合在一个专用类中。(可将多个图像处理步骤，封装成一个过滤器)。<br />Intervention/image，提供了基本接口(Intervention\\Image\\Filters\\FilterInterface)，所有的过滤器都需要实现它。<br />调用过滤器：\n\n```php\n$img = Image::make('foo.jpg');\n$img->filter(new DemoFilter(5));\n```\n\n定义过滤器：\n\n```php\nsrc/Intervention/Image/Filters/DemoFilter.php\n\n<?php\nnamespace Intervention\\Image\\Filters;\n\n\tclass DemoFilter implements FilterInterface\n\t{\n\t    /**\n\t     * Default size of filter effects\n\t     */\n\t    const DEFAULT_SIZE = 10;\n\n\t    /**\n\t     * Size of filter effects\n\t     *\n\t     * @var integer\n\t     */\n\t    private $size;\n\n\t    /**\n\t     * Creates new instance of filter\n\t     *\n\t     * @param integer $size\n\t     */\n\t    public function __construct($size = null)\n\t    {\n\t        $this->size = is_numeric($size) ? intval($size) : self::DEFAULT_SIZE;\n\t    }\n\n\t    /**\n\t     * Applies filter effects to given image\n\t     *\n\t     * @param  Intervention\\Image\\Image $image\n\t     * @return Intervention\\Image\\Image\n\t     */\n\t    public function applyFilter(\\Intervention\\Image\\Image $image)\n\t    {\n\t        $image->pixelate($this->size);\n\t        $image->greyscale();\n\n\t        return $image;\n\t    }\n\t}\n?>\n```\n\n<a name=\"5c856fc3\"></a>\n## 图像缓存：\n\n图像缓存包，扩展了缓存图像的能力。\n\n缓存包使用laravel的 'Illuminate/Cache' 包。基于laravel的缓存配置，可以使用 '文件系统'、'数据库'、'Memcached'或'Redis' 来作为临时缓冲存储\n\n原理很简单。一旦安装了缓存包，就可以调用静态缓存方法。每个对 Intervention/Image 类的方法调用，都会被缓存接口捕获和检查。如果这个特定的操作序列意境生成过，将直接从缓存中获取数据，而不是重新执行一遍资源密集型的GD操作\n\n<a name=\"1d32bcac-1\"></a>\n### 安装：\n\n> composer require intervention/imagecache\n\n\n<a name=\"08b8b8b4\"></a>\n### 使用方式：\n\n```php\n$img = Image::cache(function($image){\n$image->make('public/foo.jpg')->resize(300, 200)->greyscale();\n});\n```\n\n<a name=\"24cf4861\"></a>\n## 基于URL的图像操作：\n\n在Laravel应用程序中，可以使用URL来动态操作图像。 URL图像的操作版本将存储在缓存中，并且将直接加载而无需资源密集型GD操作。\n\n图像必须上传一次。当通过HTTP请求方式访问文件，所有操作(例如：调整大小、裁剪)将稍后处理，例如：<br />[http://yourhost.com/{route-name}/{template-name}/{file-name}](http://yourhost.com/%7Broute-name%7D/%7Btemplate-name%7D/%7Bfile-name%7D)\n\n<a name=\"506a1712\"></a>\n### 1.安装：\n\n```\ncomposer require intervention/image\ncomposer require intervention/imagecache\n```\n\n<a name=\"0ff6cbc8\"></a>\n### 2.生成配置文件\n\n```\nphp artisan vendor:publish\n生成 config/imagecache.php\n```\n\n<a name=\"48ce34ad\"></a>\n### 3.启用操作\n\n默认情况下，基于URL的图像操作是关闭的。在imagecache.php配置文件中，来指定 'route' 配置项\n\n'route' => 'imagecache'\n\n配置好route后，可以通过artisan命令，列出所有已注册的路有，并检查新路有是否正确列出：\n\nphp artisan route:list\n\n<a name=\"260d9642\"></a>\n### 4.定义资源目录\n\n告诉PHP，在哪里搜索图片。我们可以定义自己喜欢的任意数量的目录。例如：定义应用程序的所有上传目录。应用程序将在目录中搜索在路有中提交的文件。\n\n```\n'paths' => array(\n'storage/uploads/images',\npublic_path('img'),\n),\n```\n\n在这些目录中保存具有唯一文件名的图像文件是有意义的。否则，包将返回首先找到的图像。\n\n注意：\n\n出于安全原因，路由仅接受由以下字符组成的文件名：\n\na-zA-Z0-9-_/.\n\n<a name=\"2ad30608\"></a>\n### 5.模板\n\n模板的定义，就是过滤器类的名称，可以在其中定义任意操作命令(之前介绍过过滤器)。系统自带3个基本模板：\n\n- small - 120x90\n- medium - 240x180\n- large - 480x360<br />我们可以在配置文件中，自由配置可用的模板：\n\n```\n'templates' => array(\n'small' => 'Intervention\\Image\\Templates\\Small',\n'medium' => 'Intervention\\Image\\Templates\\Medium',\n'large' => 'Intervention\\Image\\Templates\\Large',\n),\n```\n\n<a name=\"2837a280\"></a>\n#### 访问原始图片：\n\noriginal - 使用原始图像文件，发送HTTP响应\n\ndownload - 发送HTTP响应并强制浏览器下载原始图像文件，而不是显示它。\n\n例如：\n\n[http://yourhost.com/{route-name}/original/{file-name}](http://yourhost.com/%7Broute-name%7D/original/%7Bfile-name%7D)\n\n<a name=\"6f6a414d\"></a>\n### 6.图像缓存的生命周期：\n\n一旦第一次访问了URL，搜索图片，并根据模板，编辑图像，并存储到缓存中。 所以下次访问URL时，所有的GD操作都被绕过，文件将直接来自缓存\n\n'lifetime' => 43200,        // 单位是 'minutes-分钟'<br />支持的格式：\n\n图片格式：\n\nGD库：jpeg, png, gif\n\nImagick库：jpeg, png, gif, tif, bmp, ico, psd\n\n颜色格式：\n\n整数\n\n```\n$color = Image::make('public/foo.jpg')->pickColor(10, 10);    // pickColor()返回的是整数形式的RGB值\n$img->fill($color);\n```\n\n数组\n\n```\n$img->fill(array(255, 0, 0));\n$img->fill(array(255, 0, 0, 0.5));\n```\n\n16进制\n\n```\n$img->fill('#000000');\n```\n\nRGB和RGBA字符串格式\n\n```\n$img->fill('rgb(255, 0, 0)');\n$img->fill('rgb(255, 0, 0, 0.5)');\n```\n\n创建图像：<br />1.canvas($width, $height [, mixed $bgcolor]) - 创建一个空的画布\n\n```\n构造方法，使用给定的宽、高，创建一个新的空的图像实例。可以选择性的定义一个背景色。默认画布背景是透明(transparent)的。\n\n示例：\n\t$img = Image::canvas(800, 600);\n\t$img = Image::canvas(32, 32, '#ff0000');\n```\n\n2.make($source) - 从给定的资料中读取图像\n\n```\n从资源中创建新的图像实例的通用工厂方法。该方法高度可变，可读取下面列出的所有输入类型:\n\tstring - 文件系统的图片路径\n\tstring - 图片的URL地址(allow_url_fopen必须启用)\n\tstring - 二进制图片数据\n\tstring - data-url编码的图片数据\n\tstring - base64编码的图片数据\n\tresource - gd类型的PHP资源(当使用GD库)\n\tobject - Imagick实例(当使用Imagick库)\n\tobject - Intervention\\Image\\Image 实例\n\tobject - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) - laravel框架自带的图片上传实例\n```\n\n销毁图像：<br />1.destroy() - 销毁图像\n\n```\n在PHP脚本结束前，释放当前图像实例相关的内存。通常资源会在脚本结束后，自动释放。\n当然，该方法调用后，图像实例不再可用。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->resize(320, 240);\n\t$img->save('public/small.jpg');\n\t$img->destroy();\n```\n\n图像输出：<br />1.response([string $format [, integer $quality]]) - 直接作为HTTP响应\n\n```\n以指定的格式和图像质量，来发送当前图像，作为HTTP响应\n$format - 可以是:jpg,png,gif,tif,bmp。默认是jpeg\n$quality - 从0-100.默认是90\n```\n\n2.save([string $path [, int $quality]]) - 保存图像到指定路径(未指定，则表示覆盖原图)\n\n```\n将图像对象的当前状态保存到文件系统中。可指定路径和图像质量。\n保存到图像类型通过文件后缀来定义。例如：foo.jpg 图片将被保存为 'JPG' 格式。如果未指定可用后缀，首先尝试图像的MIME类型，如果失败，将被编码为 'JPEG'\n此外，图像将始终以RGB颜色模式保存，而没有嵌入的颜色配置文件。\n$path - 指定图像数据写入的文件路径。如果图像是从一个存在的文件路径创建的，同时我们未指定 $path，将会尝试覆盖该路径。\n\n示例：\n\t$img = Image::make('public/foo.jpg')->resize(300, 200);\n\t$img->save('public/bar.png', 60);\n\t$img->save('public/bar.jpg');\n```\n\n3.stream([mixed $format [, int $quality]]) - 图像流\n\n```\n以给定格式和给定图像质量，对当前图像进行编码，并基于图像数据，创建新的PSR-7流。\n```\n\n4.encode([$format [, $quality]]) - 图像进行编码\n\n```\n将当前图片，按给定的格式和图片质量进行编码\n\n$format - jpg、png、gif、tif、bmp、data-url(base64)。默认返回的编码后的数据。默认类型是 'jpeg'\n$quality - 返回从 0-100。0-最低，100最大。只对 'jpg' 编码格式有效，因为png压缩是无损的，不会影响图片质量。默认是90\n\n示例：\n\t$jpg = (string) Image::make('public/foo.png')->encode('jpg', 75);\n\t$data = (string) Image::make('public/foo.png')->encode('data-url');\n```\n\n图像缓存相关<br />1.cache(Closure $callback [, int $lifetime [,bool $returnObj]]) - 图像缓存\n\n```\n$callback - 从Closure回调，创建新的缓存图像实例。\n$lifetime - 为回调传递一个生命周期\n$returnObj - 获取一个Intervention图像实例作为返回值，还是直接接收图像流。\ncache()方法，需要安装额外的 'intervention/imagecache' 依赖包\n\n示例：\n\t$img = Image::cache(function($image){\n\t\t$image->make('public/foo.jpg')->resize(300, 200)->greyscale();\n\t}, 10, true);\n```\n\n2.backup($name = 'default') - 图像状态备份\n\n```\n备份当前图片的状态。将图片的当前状态备份到 $name。之后，可以调用 reset($name = 'default') 来进行状态恢复。\n\n$name默认是'default'。我们可以传递不同的$name，来记录图片处理过程中的多个状态\n\n示例：\n\t$img = Image::canvas(120, 90, '#000');\n\t$img->fill('#f00');\n\t$img->backup();\n\t$img->fill('#0f0');\n\t$img->reset();\n```\n\n3.reset($name = 'default') - 图像状态恢复\n\n```\nbackup()用于备份图像状态，reset()用于恢复到之前的某个备份\n```\n\n原生图像处理驱动调用：<br />1.getCore() - GD库｜Imagick库 对象调用\n\n```\n以特定驱动的核心格式，返回当前图像。如果使用的是 'GD' 库，则返回 GD 资源类型；如果使用的是 'Imagick'，则返回一个 Imagick 对象。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$imagick = $img->getCore();\t\t\t// 返回原始的 'imagick' 对象\n\t$imagick->embossImage(0, 1);\t\t// 就可以调用 'imagick' 的方法了\n```\n\n调整图像尺寸：<br />1.resize($width, $height [,Closure $callback]) - 调整图像尺寸\n\n```\n使用给定的宽、高，来调整当前图像。传递一个可选的Closure回调来约束resize命令。\n回调函数，定义了resize命令的约束。可约束图像的 '宽高比(aspect-ratio)' 和 '不希望的大小(a unwanted upsizing)'\n\taspectRatio()\n\t\t约束当前图像的宽高比。作为比例调整大小的快捷方式，可以使用 widen() 和 heighten()\n\tupsize()\n\t\t保持图像大小\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->resize(300, 200);\n\t$img->resize(300, null);\n\t$img->resize(null, 200);\n\t$img->resize(300, null, function($constraint){\t\t// 调整图像的宽到300，并约束宽高比(高自动)\n\t\t$constraint->aspectRatio();\n\t});\n\t$img->resize(null, 200, function($constraint){\t\t// 调整图像的高到200，并约束宽高比(宽自动)\n\t\t$constraint->aspectRatio();\n\t});\n\t$img->resize(null, 400, function($constraint){\t\t// 阻止可能的尺寸变化(保持图像大小)\n\t\t$constraint->aspectRatio();\n\t\t$constraint->upsize();\n\t});\n```\n\n2.widen($width [, Closure $callback]) - 调整图像宽(保持宽高比)\n\n```\n调整图像的宽到给定的宽度，保持宽高比。传递一个可选的回调函数，来应用额外的约束，例如：阻止可能的尺寸变化\n\tupsize()\n\t\t保持图像大小\n```\n\n3.heighten($height [, Closure $callback]) - 调整图像高(保持宽高比)\n\n```\n调整图像的高到给定的高度，保持宽高比。传递一个可选的回调函数，来应用额外的约束，例如：阻止可能的尺寸变化\n\tupsize()\n\t\t保持图像大小\n```\n\n4.crop($width, $height [, $x, $y]) - 裁剪图像\n\n```\n使用给定的宽、高，裁剪当前图像的一个矩形区域。默认从图像的0.0开始，可传递一个坐标，定位裁剪的起始点。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->crop(100, 100, 20, 20);\n```\n\n5.fit(![](https://g.yuque.com/gr/latex?width%20%5B%5B#card=math&code=width%20%5B%5B&id=z1YfA)height] [, Closure $callback [, $position]]]) - 智能裁剪和调整\n\n```\n以一个智能的方式，结合裁剪和调整来格式化图片。该方法将会自动找到给定的宽、高的最佳宽高比，裁剪并调整到给定尺寸。\n$callback - 回调函数，来约束可能的尺寸变化\n\tupsize()\n\t\t保持图像大小\n\n$position - 自定义裁剪的位置。默认是 '中心'\n\ttop-left\n\ttop\n\ttop-right\n\tleft\n\tcenter(默认)\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n```\n\n6.resizeCanvas($width, $height [, $anchor [, bool $relative [, $bgcolor]]])\n\n```\n调整当前图像的边界到给定的宽和高。\n\n$anchor - 从图像的哪点开始调整\n\ttop-left\n\ttop\n\ttop-right\n\tleft\n\tcenter(默认)\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n\n$relative - 将模式设置为相对，用以在真实的图片尺寸上，添加或者减去给定的宽、高。\n\n$bgcolor - 画布背景(默认 '#000000')\n```\n\n7.trim([$base [, array $away [, $tolerance [, $feather]]]])<br />以给定颜色修剪图像空间。\n\n```\n$base - 定义从什么位置来选取修剪颜色的点。例如：设置为  'bottom-right'，图像上的所有颜色将被修剪掉，等同于图片左下角的颜色。可选的值有：\n\ttop-left(默认)\n\tbottom-right\n\ttranparent\n\n$away - 应该被修剪掉的边框。你可以添加多个边框(array)，可选的值有：\n\ttop\n\tbottom\n\tleft\n\tright\n\n$tolerance - 定义一个偏差度，修剪相似颜色值。范围0-100。默认是0\n\n$feather - 羽化效果\n\t有时，在修剪时在对象周围留下未触摸的“边框”可能是有用的。 特别是修剪非实体背景时，您可以展开（正值）或收缩（负值）修剪对象周围的空间一定量的像素。\n\n示例：\n\tImage::make('public/foo.jpg')->trim();\t\t// 默认，所有边框使用 'top-left' 颜色\n\tImage::make('public/foo.jpg')->trim('bottom-right');\t\t// 所有边框使用 'bottom-right' 颜色\n\tImage::make('public/foo.jpg')->trim('transparent', array('top', 'bottom'));\t\t// 上、下边框透明\n\tImage::make('public/foo.jpg')->trim('top-left', 'left');\t\t// 只有左边框，使用 'top-left' 颜色\n\tImage::make('public/foo.jpg')->trim('top-left', null, 40);\t\t// 移除图像所有边框＋40偏差度\n\tImage::make('public/foo.jpg')->trim('top-left', null, 25, 50);\t\t// 移除图像所有边框＋25偏差度＋50px的边框羽化效果\n```\n\n调整图像：<br />1.gamma($correction) - 伽马矫正\n\n```\n对当前图像执行伽马矫正操作\n$correction - 伽马补偿值(gamma compensation value)\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->gamma(1.6);\n```\n\n2.brightness($level) - 亮度\n\n```\n改变当前图像的亮度。$level可选范围为：-100 - 100。0-表示不改变，-100最小，＋100最大。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->brightness(35);\n```\n\n3.constrast($level) - 对比度\n\n```\n改变图像的对比度。$level可选范围为：-100 - 100。0-表示不改变，-100最小，＋100最大。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->constrast(35);\n```\n\n4.colorize($red, $green, $blue) - 改变RGB色道\n\n```\n使用给定的红、绿、蓝色道，改变当前图像的RGB颜色。色道值是规范化的，范围从 -100 - 100。0-表示不改变，－100表示移除图像上的所有特定颜色，＋100表示最大颜色\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->colorize(-100, 0, 100);\t// 添加蓝，移除红\n\t$img->colorize(0, 30, 0);\t\t// 给图片添加部分蓝色调\n```\n\n5.greyscale() - 灰度\n\n```\n将图像转换为灰度版本\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$image = $img->greyscale();\n```\n\n6.flip($mode) - 图像镜像\n\n```\n给当前图像，制作镜像。$mode可以指定为：h-水平镜像和v-垂直镜像。默认是h\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->flip('v');\n```\n\n7.invert() - 反转图像颜色\n\n```\n反转当前图像的所有颜色\n\n示例：\n\t$img = Image::make('public/foo.jpg')->invert();\n```\n\n8.opacity($transparency) - 设置图像的透明度\n\n```\n设置当前图像的不透明度的百分比。从 100%-0%，100%－不透明｜0%-全透明\n\n示例：\n\tImage::make('public/foo.jpg')->opacity(50);\n\tImage::make('public/foo.jpg')->opacity(0);\n```\n\n9.orientate() - 旋转图像(记得摩点图像处理，使用了它。Imagick)\n\n```\n此方法读取EXIF图像配置项 '方向'，并对图像执行旋转，以正确显示图像。必须从文件路径实例化图像，才能正确读取EXIF数据\n注意：\n\t使用该方法，要求PHP编译时，必须指定 '--enable-exif'。windows用户，还必须启用 'mbstring' 扩展\n\n示例：\n\t$img = Image::make('public/foo.jpg')->orientate();\n```\n\n10.rotate(float $angle [, string $bgcolor]) - 图像旋转\n\n```\n将当前图像，逆时针旋转给定角度。可定义旋转后，未覆盖区域的背景颜色！\n$angle - 旋转角度\n$bgcolor - 旋转后，可能出现未覆盖区域，我们可设置背景色\n```\n\n11.mask($source [, bool $mask_with_alpha = false])<br />将给定的图像资源应用为当前图像的alpha蒙板，以改变当前透明度。蒙板将调整为当前图像大小。默认情况下，蒙板的灰度版本会转换为alpha值，但可通过设置 ![](https://g.yuque.com/gr/latex?mask_with_alpha%20%E4%BB%A5%E5%BA%94%E7%94%A8%E4%B8%96%E7%BA%AA%E7%9A%84alpha%E9%80%9A%E9%81%93%E3%80%82%E5%B0%86%E4%BF%9D%E6%8C%81%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E9%80%8F%E6%98%8E%E5%BA%A6%E3%80%82%0A#card=math&code=mask_with_alpha%20%E4%BB%A5%E5%BA%94%E7%94%A8%E4%B8%96%E7%BA%AA%E7%9A%84alpha%E9%80%9A%E9%81%93%E3%80%82%E5%B0%86%E4%BF%9D%E6%8C%81%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E9%80%8F%E6%98%8E%E5%BA%A6%E3%80%82%0A&id=gDfje)source：<br />string - 文件系统的图片路径<br />string - 图片的URL地址(allow_url_fopen必须启用)<br />string - 二进制图片数据<br />string - data-url编码的图片数据<br />string - base64编码的图片数据<br />resource - gd类型的PHP资源(当使用GD库)<br />object - Imagick实例(当使用Imagick库)<br />object - Intervention\\Image\\Image 实例<br />object - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) -<br />laravel框架自带的图片上传实例<br />$mask_with_alpha - 设置为true，可将实际的alpha通道作为蒙板，应用于当前图像，替代颜色值。默认是 false<br />应用效果：<br />1.filter(Intervention\\Image\\Filters\\FilterInterface $filter) - 使用滤镜\n\n```\n给当前图像，应用自定义的滤镜效果\n```\n\n2.blur($amount = 1) - 高斯模糊\n\n```\n在当前图片上，应用高斯模糊滤镜。$amount可选范围为 0-100。(GD库处理，高强度的高斯模糊会非常占用性能，小心使用)\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->blur();\t\t// 轻微的高斯模糊\n\t$img->blur(15);\t\t// 高强度的高斯模糊\n```\n\n3.sharpen($amount = 10) - 锐化效果\n\n```\n锐化当前图像。$amount可选范围为 0-100。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->sharpen(15);\n```\n\n4.pixelate($size) - 像素化效果\n\n```\n将像素化效果应用于当前图像(指定像素化效果的尺寸)\n```\n\n5.limitColors($count [, $matte])\n\n```\n将当前图片的现有颜色，转换为具有给定最大颜色数的颜色表。该函数保留尽可能多的alpha通道信息，并将透明像素与可选的遮罩颜色混合。\n$count - 应在调色板中保留的最大颜色数。设置为null，转为真彩色(truecolor)\n$matte - 用于混合透明像素的颜色。默认值：无遮罩颜色\n\n示例：\n\t$img = Image::make('public/foo.png');\n\t$img->limitColors(255, '#f90');\n```\n\n6.interlace($interlace = true) - 图像隔行扫描\n\n```\n传递一个boolean类型参数，切换隔行扫描模式，来确定是否使用隔行扫描或标准模式，对图像进行编码。如果jpeg图像使用隔行扫描模式，图像将被处理为渐进式jpeg。\n设置为true－隔行扫描模式｜false－标准模式。默认是true\n\n示例：\n\t$img = Image::make('public/foo.png');\n\t$img->interlace();\t\t\t// 开启隔行扫描\n\t$img->save();\n\t$img = Image::make('public/interlaced.gif');\n\t$img->interlace(false);\t\t// 关闭隔行扫描\n\t$img->save();\n```\n\n画图：<br />1.text($text [, $x [, $y [, Closure $callback]]]) - 文字\n\n```\n在指定的位置，写入文本。在回调函数中，可定义更多细节，例如：字体大小，字体文件，对其方式等\n$callback - 回调函数\n\tfile($filepath) - 字体文件。设置True Type Font文件的路径，或者GD库内部字体之一的1到5之间的整数值。 默认值：1\n\tsize($size) - 字体大小。字体大小仅在设置字体文件时可用，否则将被忽略。 默认值：12\n\tcolor($color) - 字体颜色\n\talign($align) - 水平对齐方式：left,right,center。默认left\n\tvalign($valign) - 垂直对齐方式：top,bottom,middle。默认bottom\n\tangle($angle) - 文本旋转角度。文本将围绕垂直和水平对齐点逆时针旋转。 旋转仅在设置字体文件时可用，否则将被忽略\n```\n\n2.pixel($color, $x, $y) - 点\n\n```\n在给定的坐标上，以给定的颜色画单个像素点\n```\n\n3.line($x1, $y1, $x2, $y2 [Closure $callback]) - 线\n\n```\n在当前图像上，指定2点画线。可以在回调函数中，定义线的颜色和宽度\n$callback\n\tcolor($color) - 指定线的颜色。默认：#000000\n\twidth($width) - 指定线的宽度。默认：1px。\t\t\t// GD库无效！！\n```\n\n4.rectangle($x1, $y1, $x2, $y2 [Closure $callback]) - 矩形\n\n```\n指定2点坐标，分别代表左上角和右下角，来画一个矩形。\n```\n\n5.polygon(array $points [, Closure $callback]) - 多边形\n\n```\n使用给定的点数据，来画一个多边形。可以在回调函数中，定义多变形的外观\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n\n示例：\n\t$img = Image::canvas(800, 600, '#ddd');\n\t$points = array(\n\t\t40, 50,\n\t\t30, 40,\n\t\t20, 30,\n\t\t10, 20,\n\t\t5, 10,\n\t);\n\t$img->polygon($points, function($draw){\n\t\t$draw->background('#ff0');\n\t\t$draw->border(1, '#f0f');\n\t})\n```\n\n6.circle($diameter, $x, $y [,Closure $callback]) - 圆\n\n```\n在给定的x、y坐标点上，使用给定的直径画一个圆。\n可以通过回调函数，来定义圆的外观。\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n\n示例：\n\t$img = Image::canvas(300, 200, '#ddd');\n\t$img->circle(100, 50, 50, function($draw){\n\t\t$draw->background('#ff0');\n\t\t$draw->border(1, '#f00');\n\t})\n```\n\n7.ellipse($width = 10, $height = 10, $x, $y [Closure $callback]) - 椭圆\n\n```\n在给定的x、y坐标点，绘制彩色椭圆。可以定义宽度和高度，以及通过可选的闭包回调来设置椭圆的外观\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n```\n\n图像的其它处理方法：<br />1.fill($filling [, $x, $y]) - 图像填充\n\n```\n使用给定颜色或另一张图片来填充当前图像。传递可选的x、y坐标，表示开始填充的位置。\n如果指定了x、y坐标，原始图像上该坐标的颜色，将执行泛红填充(flood fill)。如果未指定坐标，不管下面是什么，填充整个图像\n\n$filling - 填充颜色或图像模式。图像资源格式如下：\n\tstring - 文件系统的图片路径\n\tstring - 图片的URL地址(allow_url_fopen必须启用)\n\tstring - 二进制图片数据\n\tstring - data-url编码的图片数据\n\tstring - base64编码的图片数据\n\tresource - gd类型的PHP资源(当使用GD库)\n\tobject - Imagick实例(当使用Imagick库)\n\tobject - Intervention\\Image\\Image 实例\n\tobject - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) - laravel框架自带的图片上传实例\n\n示例：\n\t$img = Image::canvas(800, 600);\n\t$img->fill('#ccc');\n\t$img->fill('public/foo.jpg');\n\t$img->fill('#f0f', 0, 0);\n```\n\n2.insert($source [, $position [, $x, $y]]) - 插入图片\n\n```\n将一个给定的图片资源插入到当前图像中。\n\n$source - 另一个图片资源\n\n$position - 位置(相对于当前图像)\n\ttop-left(默认)\n\ttop\n\ttop-right\n\tleft\n\tcenter\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n\n$x,$y - 偏移坐标(默认：0.0)\n\t在 $position 指定的位置上，再进行相对偏移\n\n此方法可用于，将另一张图像作为水印，因为保持了透明度。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img->insert('public/bar.png');\t\t\t\t\t\t\t\t\t// 插入另一个图片\n\t$watermark = Image::make('public/watermark.png');\t\t\t\t// 创建一个新的图片实例\n\t$img->insert($watermark, 'center');\t\t\t\t\t\t\t\t// 插入图片\n\t$img->insert('public/watermark.png', 'bottom-right', 10, 10);\n```\n\n3.pickColor($x, $y [string $format]) - 选取给定坐标颜色\n\n```\n在当前图像上的指定坐标，获取颜色，并返回给定的颜色格式\n$format - 颜色格式，可以是：\n\tarray - array(255, 255, 255, 1)\n\trgb - rgb(255, 255, 255)\n\trgba - rgba(255, 255, 255, 0.5)\n\thex - #cccccc\n\tint - 16776956\n默认情况下，该方法将像素的RGB值作为数组返回。使用整数格式，将颜色直接传递给任意GD库函数\n```\n\n检索信息：<br />1.width()<br />获取当前图片的宽度(单位：px)\n\n```\n示例：\n\t$width = Image::make('public/foo.jpg')->width();\n```\n\n2.height()<br />获取当前图片的高度(单位：px)\n\n```\n示例：\n\t$height = Image::make('public/foo.jpg')->height();\n```\n\n3.mime()<br />如果已经图像已经定义了MIME类型，从当前图像实例中读取MIME类型。\n\n4.exif([string ![](https://g.yuque.com/gr/latex?key%5D)%0A%E4%BB%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96%20'Exif'%20%E5%85%83%E6%95%B0%E6%8D%AE%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%8E%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E6%98%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%9B%BE%E5%83%8F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96EXIF%E6%95%B0%E6%8D%AE%0Aimagick%E4%BB%8E2.3.9%E5%BC%80%E5%A7%8B%E6%94%AF%E6%8C%81exif%E3%80%82PHP%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%8C%85%E5%90%AB%20'--enable-exif'%20%E6%89%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E3%80%82windows%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%98%E5%BF%85%E9%A1%BB%E5%BC%80%E5%90%AF%20'mbstring'%20%E6%89%A9%E5%B1%95(PHP%E6%89%8B%E5%86%8C%E6%9C%89%E8%AF%A5%E5%87%BD%E6%95%B0%E5%BA%93)%0A#card=math&code=key%5D%29%0A%E4%BB%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96%20%27Exif%27%20%E5%85%83%E6%95%B0%E6%8D%AE%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%8E%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E6%98%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%9B%BE%E5%83%8F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96EXIF%E6%95%B0%E6%8D%AE%0Aimagick%E4%BB%8E2.3.9%E5%BC%80%E5%A7%8B%E6%94%AF%E6%8C%81exif%E3%80%82PHP%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%8C%85%E5%90%AB%20%27--enable-exif%27%20%E6%89%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E3%80%82windows%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%98%E5%BF%85%E9%A1%BB%E5%BC%80%E5%90%AF%20%27mbstring%27%20%E6%89%A9%E5%B1%95%28PHP%E6%89%8B%E5%86%8C%E6%9C%89%E8%AF%A5%E5%87%BD%E6%95%B0%E5%BA%93%29%0A&id=cys3F)key - 检索的exif哪个下标\n\n5.iptc([string $key])<br />从当前图像中读取 'IPTC' 元数据<br />默认获取所有元数据，可以传递下标，来获取指定的元数据。没有发现元数据，返回 'NULL'\n\n```\n示例：\n\t$data = Image::make('public/foo.jpg')->iptc();\t\t\t\t\t\t// 获取所有数据\n\n\t$copyright = Image::make('public/foo.jpg')->iptc('Copyright');\t\t// 获取 'Copyright'\n```\n\n6.filezise()<br />如果实例是从一个真实文件初始化的，获取当前图像实例的文件尺寸<br />返回图像的尺寸大小，单位是 'bytes - 字节'，如果不是从一个文件创建的图像实例，则返回false\n\n```\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$size = $img->filesize();\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [图像处理,image,interertion]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href:  https://blog.csdn.net/beyond__devil</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span class=\"ne-text\">https://blog.csdn.net/beyond__devil/article/details/62230610</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span><span class=\"ne-text\">beyond__devil</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\">安装：</span></p><p id=\"ub9b61dc2\" class=\"ne-p\"><br></p><h3 id=\"25a68d79\"><span class=\"ne-text\">需求：</span></h3><p id=\"u93d9d28c\" class=\"ne-p\"><br></p><ul class=\"ne-ul\"><li id=\"u628ffc16\"><span class=\"ne-text\">PHP &gt;= 5.4</span></li><li id=\"u1887b276\"><span class=\"ne-text\">Fileinfo 扩展</span></li><li id=\"u779581c5\"><span class=\"ne-text\">GD库 &gt;= 2.0</span></li><li id=\"u16e96f8d\"><span class=\"ne-text\">Imagick 扩展 &gt;=6.5.7</span></li></ul><p id=\"u08fff3f6\" class=\"ne-p\"><br></p><h3 id=\"0456f5e6\"><span class=\"ne-text\">composer安装：</span></h3><p id=\"u07a94e04\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"u73772ac4\" class=\"ne-p\"><span class=\"ne-text\">composer require intervention/image</span></p></div><p id=\"u41197f7d\" class=\"ne-p\"><br></p><p id=\"uc0e142df\" class=\"ne-p\"><br></p><h2 id=\"b1B5T\"><span class=\"ne-text\">简单的基本使用</span></h2><pre data-language=\"php\" id=\"MtBde\" class=\"ne-codeblock language-php\">        $img-&gt;blur(12);//图片的模糊度，GD下大量使用影响性能，默认1\n        $img-&gt;brightness(30);//图片亮度，-100-100，默认0\n        $img = Image::canvas(32, 32, '#ff0000');//画图创建画板，可添加背景色\n        $img = Image::canvas(300, 200, '#ddd');\n        $img-&gt;circle(100, 50, 50, function ($draw) {//在图片里面画圆，直径，x坐标，y坐标\n            $draw-&gt;background('#0000ff');//背景色\n            $draw-&gt;border(1, '#f00');//圆边框，与背景色\n        $img-&gt;colorize(-100, 0, 100);//R,G,B调色，【-100,100】\n        $img-&gt;contrast(65);//对比度【-100,100】\n        });\n        $img-&gt;crop(100, 100, 25, 25);//图片的裁剪，默认左上角开始裁剪，宽，高，可选x,y坐标\n        $img-&gt;destroy();//删除图片\n       $img-&gt;save('/222.jpg');//保存图片\n        $img-&gt;ellipse(20, 30, 20, 30, function ($draw) {//定义椭圆跟圆一致\n            $draw-&gt;background('#0000ff');\n            $draw-&gt;border(1, '#ff0000');\n        });\n        $img-&gt;encode('jpg', 75);//编码，只有jpg才能选择质量，0-100\n        $img-&gt;fill('#ff00ff',0, 0);//填充图片或颜色，可带坐标，带坐标以该坐标点颜色进行选择填充\n        $img-&gt;flip('h');//图片翻转，v上下，h左右\n        $img-&gt;fit(200,300);//修改图片长宽，按比例，自动裁剪，一个参数正方形\n        $img-&gt;fit(800, 600, function ($constraint) {//按照比例多原始图片最大修剪\n            $constraint-&gt;upsize();\n        });\n        $img-&gt;gamma(5);//色彩gamma矫正》0\n        $imagick = $img-&gt;getCore();//返回 gd resource 资源size：宽X高，trueColor\n        dd($imagick);\n        $img-&gt;greyscale();//将图片变灰\n      return  $img-&gt;height();//图片高度\n        $img-&gt;heighten(50);\n        $img-&gt;heighten(50, function ($constraint) {\n            $constraint-&gt;upsize();\n        });//以高为基准生成比例图片\n        $tt= Image::canvas(130,100,'#F60');\n        $img-&gt;insert('public/watermark.png', 'bottom-right', 10, 10);//插入图片，可选位置模式，默认：top-left ，top，top-right，left，center，right，bottom-left，bottom，bottom-right，可选x,y坐标\n        $img-&gt;interlace(true);//编码相关，true，false\n        $img-&gt;invert();//反转图片颜色\n       $tt =  $img-&gt;iptc();\n        $img-&gt;limitColors(30);//色彩限制，出现磨砂效果\n        $img-&gt;line(10, 10, 195, 195, function ($draw) {//不支持GD，画线\n            $draw-&gt;color('#f00');\n            $draw-&gt;width(5);\n        });\n        $img-&gt;mask($tt,true);\n       dd($tt);\n        return $img-&gt;mime();//图片格式 image/jpeg\n        $img-&gt;opacity(90);//透明度0-100，消耗性能\n        return $img-&gt;orientate();\n    return $img-&gt;pickColor(50,50,'hex');//获取坐标颜色，array，rgb，rgba，hex，int\n        $img-&gt;pixel('#0000ff', 32, 32);//指定坐标填充色彩\n\n        $img-&gt;pixelate(2);//像素画马赛克\n        $points = array(\n            40,  50,  // Point 1 (x, y)\n            20,  110, // Point 2 (x, y)\n            60,  60,  // Point 3 (x, y)\n            120, 20,  // Point 4 (x, y)\n            50,  40,  // Point 5 (x, y)\n            10,  10   // Point 6 (x, y)\n        );\n        $img-&gt;polygon($points, function ($draw) {\n            $draw-&gt;background('#0000ff');\n            $draw-&gt;border(1, '#ff0000');\n        });//坐标画图，背景和边框\n        $img-&gt;rectangle(5, 5, 50, 50, function ($draw) {//画矩形，可选背景色（颜色类型可选rgba，和普通）\n            $draw-&gt;background('rgba(255, 255, 255, 0.5)');\n            $draw-&gt;border(2, '#000');\n        });\n        $img-&gt;backup();//备份图片状态\n        $img-&gt;reset();//图片恢复到备份状态\n        $img-&gt;resize(null, 200, function ($constraint) {\n            $constraint-&gt;aspectRatio();\n            $constraint-&gt;upsize();\n        });//设置图片的大小，回调可选，可单设置宽，高\n        $img-&gt;resizeCanvas(1280, 720, 'center', false, 'ff00ff');//图片添加背景画板，可选位置模式，相对添加，背景色\n        $img-&gt;rotate(-45);//转动图片\n        $img-&gt;sharpen(15);//锐化，0-100\n        $img-&gt;stream('jpg', 60);//流编码\n        $img-&gt;text('foo', 50, 50, function($font) {\n            $font-&gt;file('foo/bar.ttf');\n            $font-&gt;size(72);\n            $font-&gt;color('#fdf6e3');\n            $font-&gt;align('center');\n            $font-&gt;valign('top');\n            $font-&gt;angle(30);\n        });\n        $img-&gt;text('The quick brown fox jumps over the lazy dog.', 50, 50);\n        $img-&gt;text('foo', 0, 0, function($font) {\n            $font-&gt;color(array(255, 255, 255, 0.5));\n        });//文字书写\n        $img-&gt;widen(300, function ($constraint) {\n            $constraint-&gt;upsize();\n        });//按照宽等比，可回调\n        return $img-&gt;width();//获取图片宽\n        return $img-&gt;response('png');//修改图片格式\n</pre><h3 id=\"d71f57ae\"><span class=\"ne-text\">laravel配置：</span></h3><p id=\"uf57d3c8f\" class=\"ne-p\"><br></p><ol class=\"ne-ol\"><li id=\"u3cc2719e\"><span class=\"ne-text\">编辑 config/app.php<br /></span><span class=\"ne-text\">$providers 添加 'Intervention\\Image\\ImageServiceProvider::class'</span></li><li id=\"uac692818\"></li></ol><p id=\"ufc9d38af\" class=\"ne-p\"><br></p><p id=\"u61f35fad\" class=\"ne-p\"><span class=\"ne-text\">$aliases 添加 ''Image' =&gt; Intervention\\Image\\Facades\\Image::class'</span></p><p id=\"ueb1023fc\" class=\"ne-p\"><br></p><ol start=\"2\" class=\"ne-ol\"><li id=\"u7a485f19\"><span class=\"ne-text\">默认使用的是 'GD' 库，想修改的话，需要配置驱动，我们来生成配置文件：<br /></span><span class=\"ne-text\">php artisan vendor:publish --provider=&quot;Intervention\\Image\\ImageServiceProviderLaravel5&quot;</span></li></ol><p id=\"ufb5c77a4\" class=\"ne-p\"><br></p><p id=\"ud0792696\" class=\"ne-p\"><span class=\"ne-text\">生成 config/image.php 配置文件</span></p><p id=\"ucf4819f3\" class=\"ne-p\"><br></p><ol start=\"4\" class=\"ne-ol\"><li id=\"u7704e8f4\"><span class=\"ne-text\">PHP涉及到的配置项：<br /></span><span class=\"ne-text\">memory_limit - 最大内存限制</span></li><li id=\"ud157b444\"></li></ol><p id=\"ucc496928\" class=\"ne-p\"><br></p><p id=\"u4738d7a6\" class=\"ne-p\"><span class=\"ne-text\">upload_max_filesize - 如果上传图片时，可能修改</span></p><p id=\"u74bc079b\" class=\"ne-p\"><br></p><p id=\"u74a5c3ce\" class=\"ne-p\"><span class=\"ne-text\">－－－－－</span></p><p id=\"ub3095c62\" class=\"ne-p\"><br></p><p id=\"u5257ac67\" class=\"ne-p\"><span class=\"ne-text\">其实，可能还有好多<br /></span><span class=\"ne-text\">max_execution_time - 最大执行时间</span></p><hr id=\"IdT4Z\" class=\"ne-hr\"><h2 id=\"adc45117\"><span class=\"ne-text\">基本使用：</span></h2><p id=\"u76efcca2\" class=\"ne-p\"><br></p><h3 id=\"da6e5d8b\"><span class=\"ne-text\">1.使用 Intervention\\Image\\ImageManager - 图片管理类</span></h3><p id=\"ued891349\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"1c00f65f\" class=\"ne-codeblock language-php\">use Intervention\\Image\\ImageManager;\n$manager = new ImageManager(array('driver' =&gt; 'imagick'));\n$manager-&gt;make('public/foo.jpg');</pre><p id=\"u83226ef1\" class=\"ne-p\"><br></p><h3 id=\"3260a481\"><span class=\"ne-text\">2.使用 ImageManager 的静态版本</span></h3><p id=\"ua4dcfb31\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"6aa04a9f\" class=\"ne-codeblock language-php\">use Intervention\\Image\\ImageManagerStatic as Image;\nImage::configure(array('driver' =&gt; 'imagick'));\t//api中未出现此方法\nImage::make('public/foo.jpg');</pre><p id=\"u92b63e6f\" class=\"ne-p\"><br></p><h2 id=\"ef448ac7\"><span class=\"ne-text\">HTTP响应：</span></h2><p id=\"u2022c03f\" class=\"ne-p\"><br></p><h3 id=\"672e8df7\"><span class=\"ne-text\">1.将图像直接返回到用户浏览器的最简单的方法是输出response（）方法。</span></h3><p id=\"ud9556690\" class=\"ne-p\"><br></p><p id=\"u93c654aa\" class=\"ne-p\"><span class=\"ne-text\">它将根据当前图像自动发送HTTP头，并输出编码的图像数据。</span></p><p id=\"u9a0edb67\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"9a83857f\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\necho $img-&gt;response('jpg', 70);</pre><p id=\"u496fd04a\" class=\"ne-p\"><br></p><h3 id=\"c631db98\"><span class=\"ne-text\">2.手动发送HTTP响应</span></h3><p id=\"u12641445\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"b284fa63\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\nheader('Content-Type: image/png');\necho $img-&gt;encode('png');</pre><p id=\"uf1c4b9b8\" class=\"ne-p\"><br></p><p id=\"ua8b01559\" class=\"ne-p\"><strong><span class=\"ne-text\">在laravel中，同上面的2种方法一样：</span></strong></p><p id=\"ub99ee66a\" class=\"ne-p\"><br></p><h3 id=\"3.\"><span class=\"ne-text\">3.</span></h3><p id=\"u38ec21ab\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"5dd12db7\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\nreturn $img-&gt;response();</pre><p id=\"ufdeaa069\" class=\"ne-p\"><br></p><h3 id=\"4.\"><span class=\"ne-text\">4.</span></h3><p id=\"u5b4877a7\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"82ef6c91\" class=\"ne-codeblock language-php\">$img = Image::canvas(800, 600, '#ff0000');\n$response = Response::make($img-&gt;encode('png'));\n$response-&gt;header('Content-Type', 'image/png');\nreturn $response;</pre><p id=\"u2f5532e7\" class=\"ne-p\"><br></p><h2 id=\"46d37e50\"><span class=\"ne-text\">图片上传：</span></h2><p id=\"u2a405d7f\" class=\"ne-p\"><br></p><h3 id=\"f2552d3b\"><span class=\"ne-text\">1.直接从 $_FILES 中，获取 'tmp' 临时图片数据</span></h3><p id=\"u098d1e64\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"63c21459\" class=\"ne-codeblock language-php\">$img = Image::make($_FILES['image']['tmp_name']);// Image::make() 支持这种方式\n$img-&gt;fit(300, 200);\n$img-&gt;save('public/bar.jpg');</pre><p id=\"u658c3ad0\" class=\"ne-p\"><br></p><h3 id=\"2f651434\"><span class=\"ne-text\">2.在laravel中处理图片上传</span></h3><p id=\"u82eafd83\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"016d99f8\" class=\"ne-codeblock language-php\">Image::make(Input::file('photo'));// Input::file() 来获取$_FILES</pre><p id=\"u7c967dc7\" class=\"ne-p\"><br></p><h2 id=\"5e6dec5e\"><span class=\"ne-text\">图片过滤器：</span></h2><p id=\"u57829b9d\" class=\"ne-p\"><br></p><p id=\"u5e5d44a3\" class=\"ne-p\"><span class=\"ne-text\">图片过滤器，给了我们非常有用的方式，将多个图像转换命令集合在一个专用类中。(可将多个图像处理步骤，封装成一个过滤器)。<br /></span><span class=\"ne-text\">Intervention/image，提供了基本接口(Intervention\\Image\\Filters\\FilterInterface)，所有的过滤器都需要实现它。<br /></span><span class=\"ne-text\">调用过滤器：</span></p><p id=\"u9d79bbd4\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"ad0fb1a6\" class=\"ne-codeblock language-php\">$img = Image::make('foo.jpg');\n$img-&gt;filter(new DemoFilter(5));</pre><p id=\"udebc700b\" class=\"ne-p\"><br></p><p id=\"u2264fbd4\" class=\"ne-p\"><span class=\"ne-text\">定义过滤器：</span></p><p id=\"u23c6d115\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"47b261e8\" class=\"ne-codeblock language-php\">src/Intervention/Image/Filters/DemoFilter.php\n\n&lt;?php\nnamespace Intervention\\Image\\Filters;\n\n\tclass DemoFilter implements FilterInterface\n\t{\n\t    /**\n\t     * Default size of filter effects\n\t     */\n\t    const DEFAULT_SIZE = 10;\n\n\t    /**\n\t     * Size of filter effects\n\t     *\n\t     * @var integer\n\t     */\n\t    private $size;\n\n\t    /**\n\t     * Creates new instance of filter\n\t     *\n\t     * @param integer $size\n\t     */\n\t    public function __construct($size = null)\n\t    {\n\t        $this-&gt;size = is_numeric($size) ? intval($size) : self::DEFAULT_SIZE;\n\t    }\n\n\t    /**\n\t     * Applies filter effects to given image\n\t     *\n\t     * @param  Intervention\\Image\\Image $image\n\t     * @return Intervention\\Image\\Image\n\t     */\n\t    public function applyFilter(\\Intervention\\Image\\Image $image)\n\t    {\n\t        $image-&gt;pixelate($this-&gt;size);\n\t        $image-&gt;greyscale();\n\n\t        return $image;\n\t    }\n\t}\n?&gt;</pre><p id=\"ub571dc14\" class=\"ne-p\"><br></p><h2 id=\"5c856fc3\"><span class=\"ne-text\">图像缓存：</span></h2><p id=\"ud9e0b782\" class=\"ne-p\"><br></p><p id=\"u424010f1\" class=\"ne-p\"><span class=\"ne-text\">图像缓存包，扩展了缓存图像的能力。</span></p><p id=\"u1b2ef7f4\" class=\"ne-p\"><br></p><p id=\"u8f3d6f0e\" class=\"ne-p\"><span class=\"ne-text\">缓存包使用laravel的 'Illuminate/Cache' 包。基于laravel的缓存配置，可以使用 '文件系统'、'数据库'、'Memcached'或'Redis' 来作为临时缓冲存储</span></p><p id=\"u410892c8\" class=\"ne-p\"><br></p><p id=\"u5e3f8457\" class=\"ne-p\"><span class=\"ne-text\">原理很简单。一旦安装了缓存包，就可以调用静态缓存方法。每个对 Intervention/Image 类的方法调用，都会被缓存接口捕获和检查。如果这个特定的操作序列意境生成过，将直接从缓存中获取数据，而不是重新执行一遍资源密集型的GD操作</span></p><p id=\"u33d3d5ef\" class=\"ne-p\"><br></p><h3 id=\"1d32bcac-1\"><span class=\"ne-text\">安装：</span></h3><p id=\"u9c77298f\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"u740ae6f4\" class=\"ne-p\"><span class=\"ne-text\">composer require intervention/imagecache</span></p></div><p id=\"u35390d65\" class=\"ne-p\"><br></p><h3 id=\"08b8b8b4\"><span class=\"ne-text\">使用方式：</span></h3><p id=\"u3682dfa3\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"92794179\" class=\"ne-codeblock language-php\">$img = Image::cache(function($image){\n$image-&gt;make('public/foo.jpg')-&gt;resize(300, 200)-&gt;greyscale();\n});</pre><p id=\"u0d8b1189\" class=\"ne-p\"><br></p><h2 id=\"24cf4861\"><span class=\"ne-text\">基于URL的图像操作：</span></h2><p id=\"u0bd1ff5e\" class=\"ne-p\"><br></p><p id=\"u3272837f\" class=\"ne-p\"><span class=\"ne-text\">在Laravel应用程序中，可以使用URL来动态操作图像。 URL图像的操作版本将存储在缓存中，并且将直接加载而无需资源密集型GD操作。</span></p><p id=\"udbad237b\" class=\"ne-p\"><br></p><p id=\"u59b7883a\" class=\"ne-p\"><span class=\"ne-text\">图像必须上传一次。当通过HTTP请求方式访问文件，所有操作(例如：调整大小、裁剪)将稍后处理，例如：<br /></span><a href=\"http://yourhost.com/%7Broute-name%7D/%7Btemplate-name%7D/%7Bfile-name%7D\" data-href=\"http://yourhost.com/%7Broute-name%7D/%7Btemplate-name%7D/%7Bfile-name%7D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://yourhost.com/{route-name}/{template-name}/{file-name}</span></a></p><p id=\"ucfd8c645\" class=\"ne-p\"><br></p><h3 id=\"506a1712\"><span class=\"ne-text\">1.安装：</span></h3><p id=\"ude7bebb8\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"20d4de5d\" class=\"ne-codeblock language-plain\">composer require intervention/image\ncomposer require intervention/imagecache</pre><p id=\"u8d390532\" class=\"ne-p\"><br></p><h3 id=\"0ff6cbc8\"><span class=\"ne-text\">2.生成配置文件</span></h3><p id=\"u3f93e2cd\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"bc711ec5\" class=\"ne-codeblock language-plain\">php artisan vendor:publish\n生成 config/imagecache.php</pre><p id=\"ub3d468d1\" class=\"ne-p\"><br></p><h3 id=\"48ce34ad\"><span class=\"ne-text\">3.启用操作</span></h3><p id=\"u877255a8\" class=\"ne-p\"><br></p><p id=\"u59f73f58\" class=\"ne-p\"><span class=\"ne-text\">默认情况下，基于URL的图像操作是关闭的。在imagecache.php配置文件中，来指定 'route' 配置项</span></p><p id=\"u65ddb9dd\" class=\"ne-p\"><br></p><p id=\"u2ab64c6b\" class=\"ne-p\"><span class=\"ne-text\">'route' =&gt; 'imagecache'</span></p><p id=\"u700f8751\" class=\"ne-p\"><br></p><p id=\"u19845293\" class=\"ne-p\"><span class=\"ne-text\">配置好route后，可以通过artisan命令，列出所有已注册的路有，并检查新路有是否正确列出：</span></p><p id=\"u158865c3\" class=\"ne-p\"><br></p><p id=\"ucaf479be\" class=\"ne-p\"><span class=\"ne-text\">php artisan route:list</span></p><p id=\"u901256b0\" class=\"ne-p\"><br></p><h3 id=\"260d9642\"><span class=\"ne-text\">4.定义资源目录</span></h3><p id=\"uc6f836e4\" class=\"ne-p\"><br></p><p id=\"udbe15962\" class=\"ne-p\"><span class=\"ne-text\">告诉PHP，在哪里搜索图片。我们可以定义自己喜欢的任意数量的目录。例如：定义应用程序的所有上传目录。应用程序将在目录中搜索在路有中提交的文件。</span></p><p id=\"ud27b8013\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ec627e03\" class=\"ne-codeblock language-plain\">'paths' =&gt; array(\n'storage/uploads/images',\npublic_path('img'),\n),</pre><p id=\"u069cb014\" class=\"ne-p\"><br></p><p id=\"u7092d087\" class=\"ne-p\"><span class=\"ne-text\">在这些目录中保存具有唯一文件名的图像文件是有意义的。否则，包将返回首先找到的图像。</span></p><p id=\"uf5113a87\" class=\"ne-p\"><br></p><p id=\"u77c95d4d\" class=\"ne-p\"><span class=\"ne-text\">注意：</span></p><p id=\"u9e84530c\" class=\"ne-p\"><br></p><p id=\"u24af66f9\" class=\"ne-p\"><span class=\"ne-text\">出于安全原因，路由仅接受由以下字符组成的文件名：</span></p><p id=\"u7bb98d8b\" class=\"ne-p\"><br></p><p id=\"u710ccf68\" class=\"ne-p\"><span class=\"ne-text\">a-zA-Z0-9-_/.</span></p><p id=\"u9b27160f\" class=\"ne-p\"><br></p><h3 id=\"2ad30608\"><span class=\"ne-text\">5.模板</span></h3><p id=\"u141ed247\" class=\"ne-p\"><br></p><p id=\"u097f07b0\" class=\"ne-p\"><span class=\"ne-text\">模板的定义，就是过滤器类的名称，可以在其中定义任意操作命令(之前介绍过过滤器)。系统自带3个基本模板：</span></p><p id=\"u56a2a389\" class=\"ne-p\"><br></p><ul class=\"ne-ul\"><li id=\"ua3da023c\"><span class=\"ne-text\">small - 120x90</span></li><li id=\"udc93c1a5\"><span class=\"ne-text\">medium - 240x180</span></li><li id=\"u517f6009\"><span class=\"ne-text\">large - 480x360<br /></span><span class=\"ne-text\">我们可以在配置文件中，自由配置可用的模板：</span></li></ul><p id=\"u5cfc3b17\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"78d6b871\" class=\"ne-codeblock language-plain\">'templates' =&gt; array(\n'small' =&gt; 'Intervention\\Image\\Templates\\Small',\n'medium' =&gt; 'Intervention\\Image\\Templates\\Medium',\n'large' =&gt; 'Intervention\\Image\\Templates\\Large',\n),</pre><p id=\"uaa05a4ed\" class=\"ne-p\"><br></p><h4 id=\"2837a280\"><span class=\"ne-text\">访问原始图片：</span></h4><p id=\"ueed86b79\" class=\"ne-p\"><br></p><p id=\"ub1947721\" class=\"ne-p\"><span class=\"ne-text\">original - 使用原始图像文件，发送HTTP响应</span></p><p id=\"u4bf6e09d\" class=\"ne-p\"><br></p><p id=\"uddd8cc31\" class=\"ne-p\"><span class=\"ne-text\">download - 发送HTTP响应并强制浏览器下载原始图像文件，而不是显示它。</span></p><p id=\"u1eb6ea2c\" class=\"ne-p\"><br></p><p id=\"u196c8764\" class=\"ne-p\"><span class=\"ne-text\">例如：</span></p><p id=\"u1f6c4ab7\" class=\"ne-p\"><br></p><p id=\"uddf8d34f\" class=\"ne-p\"><a href=\"http://yourhost.com/%7Broute-name%7D/original/%7Bfile-name%7D\" data-href=\"http://yourhost.com/%7Broute-name%7D/original/%7Bfile-name%7D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">http://yourhost.com/{route-name}/original/{file-name}</span></a></p><p id=\"ua3c71bd2\" class=\"ne-p\"><br></p><h3 id=\"6f6a414d\"><span class=\"ne-text\">6.图像缓存的生命周期：</span></h3><p id=\"udec23afb\" class=\"ne-p\"><br></p><p id=\"ud4b48e9c\" class=\"ne-p\"><span class=\"ne-text\">一旦第一次访问了URL，搜索图片，并根据模板，编辑图像，并存储到缓存中。 所以下次访问URL时，所有的GD操作都被绕过，文件将直接来自缓存</span></p><p id=\"u165d29a4\" class=\"ne-p\"><br></p><p id=\"udc9d0362\" class=\"ne-p\"><span class=\"ne-text\">'lifetime' =&gt; 43200,        // 单位是 'minutes-分钟'<br /></span><span class=\"ne-text\">支持的格式：</span></p><p id=\"ue6c02ae4\" class=\"ne-p\"><br></p><p id=\"ubbf94059\" class=\"ne-p\"><span class=\"ne-text\">图片格式：</span></p><p id=\"u7d85c6b2\" class=\"ne-p\"><br></p><p id=\"ua80f7488\" class=\"ne-p\"><span class=\"ne-text\">GD库：jpeg, png, gif</span></p><p id=\"u1070cbf0\" class=\"ne-p\"><br></p><p id=\"ub90bcd6a\" class=\"ne-p\"><span class=\"ne-text\">Imagick库：jpeg, png, gif, tif, bmp, ico, psd</span></p><p id=\"ub5686fa3\" class=\"ne-p\"><br></p><p id=\"u503605a2\" class=\"ne-p\"><span class=\"ne-text\">颜色格式：</span></p><p id=\"ud6f4daa3\" class=\"ne-p\"><br></p><p id=\"u46e92d5a\" class=\"ne-p\"><span class=\"ne-text\">整数</span></p><p id=\"ub01ce4a1\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"72cef3bb\" class=\"ne-codeblock language-plain\">$color = Image::make('public/foo.jpg')-&gt;pickColor(10, 10);    // pickColor()返回的是整数形式的RGB值\n$img-&gt;fill($color);</pre><p id=\"u7e3b3902\" class=\"ne-p\"><br></p><p id=\"u88be15f9\" class=\"ne-p\"><span class=\"ne-text\">数组</span></p><p id=\"u7d48ee95\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"33f2dcff\" class=\"ne-codeblock language-plain\">$img-&gt;fill(array(255, 0, 0));\n$img-&gt;fill(array(255, 0, 0, 0.5));</pre><p id=\"u8813d65c\" class=\"ne-p\"><br></p><p id=\"u6b35e538\" class=\"ne-p\"><span class=\"ne-text\">16进制</span></p><p id=\"u5b273a88\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"99c88cce\" class=\"ne-codeblock language-plain\">$img-&gt;fill('#000000');</pre><p id=\"ubdceae8a\" class=\"ne-p\"><br></p><p id=\"u3a5ea298\" class=\"ne-p\"><span class=\"ne-text\">RGB和RGBA字符串格式</span></p><p id=\"ud4b618cd\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a00290bd\" class=\"ne-codeblock language-plain\">$img-&gt;fill('rgb(255, 0, 0)');\n$img-&gt;fill('rgb(255, 0, 0, 0.5)');</pre><p id=\"u1b19a391\" class=\"ne-p\"><br></p><p id=\"u6395f854\" class=\"ne-p\"><span class=\"ne-text\">创建图像：<br /></span><span class=\"ne-text\">1.canvas($width, $height [, mixed $bgcolor]) - 创建一个空的画布</span></p><p id=\"uf640de7e\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"3c06211b\" class=\"ne-codeblock language-plain\">构造方法，使用给定的宽、高，创建一个新的空的图像实例。可以选择性的定义一个背景色。默认画布背景是透明(transparent)的。\n\n示例：\n\t$img = Image::canvas(800, 600);\n\t$img = Image::canvas(32, 32, '#ff0000');</pre><p id=\"ue7abedfb\" class=\"ne-p\"><br></p><p id=\"udb43c2bc\" class=\"ne-p\"><span class=\"ne-text\">2.make($source) - 从给定的资料中读取图像</span></p><p id=\"uadc2c877\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"21d09428\" class=\"ne-codeblock language-plain\">从资源中创建新的图像实例的通用工厂方法。该方法高度可变，可读取下面列出的所有输入类型:\n\tstring - 文件系统的图片路径\n\tstring - 图片的URL地址(allow_url_fopen必须启用)\n\tstring - 二进制图片数据\n\tstring - data-url编码的图片数据\n\tstring - base64编码的图片数据\n\tresource - gd类型的PHP资源(当使用GD库)\n\tobject - Imagick实例(当使用Imagick库)\n\tobject - Intervention\\Image\\Image 实例\n\tobject - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) - laravel框架自带的图片上传实例</pre><p id=\"u4ae030e7\" class=\"ne-p\"><br></p><p id=\"u05ed3257\" class=\"ne-p\"><span class=\"ne-text\">销毁图像：<br /></span><span class=\"ne-text\">1.destroy() - 销毁图像</span></p><p id=\"u8f41f419\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"7242bd54\" class=\"ne-codeblock language-plain\">在PHP脚本结束前，释放当前图像实例相关的内存。通常资源会在脚本结束后，自动释放。\n当然，该方法调用后，图像实例不再可用。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;resize(320, 240);\n\t$img-&gt;save('public/small.jpg');\n\t$img-&gt;destroy();</pre><p id=\"ub3e5a010\" class=\"ne-p\"><br></p><p id=\"u50f403de\" class=\"ne-p\"><span class=\"ne-text\">图像输出：<br /></span><span class=\"ne-text\">1.response([string $format [, integer $quality]]) - 直接作为HTTP响应</span></p><p id=\"uc88fe4c2\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"808b4fa2\" class=\"ne-codeblock language-plain\">以指定的格式和图像质量，来发送当前图像，作为HTTP响应\n$format - 可以是:jpg,png,gif,tif,bmp。默认是jpeg\n$quality - 从0-100.默认是90</pre><p id=\"u2276d83b\" class=\"ne-p\"><br></p><p id=\"u659e428d\" class=\"ne-p\"><span class=\"ne-text\">2.save([string $path [, int $quality]]) - 保存图像到指定路径(未指定，则表示覆盖原图)</span></p><p id=\"u6786d365\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"42ef49e1\" class=\"ne-codeblock language-plain\">将图像对象的当前状态保存到文件系统中。可指定路径和图像质量。\n保存到图像类型通过文件后缀来定义。例如：foo.jpg 图片将被保存为 'JPG' 格式。如果未指定可用后缀，首先尝试图像的MIME类型，如果失败，将被编码为 'JPEG'\n此外，图像将始终以RGB颜色模式保存，而没有嵌入的颜色配置文件。\n$path - 指定图像数据写入的文件路径。如果图像是从一个存在的文件路径创建的，同时我们未指定 $path，将会尝试覆盖该路径。\n\n示例：\n\t$img = Image::make('public/foo.jpg')-&gt;resize(300, 200);\n\t$img-&gt;save('public/bar.png', 60);\n\t$img-&gt;save('public/bar.jpg');</pre><p id=\"u8b5a58ae\" class=\"ne-p\"><br></p><p id=\"u43cdcc6f\" class=\"ne-p\"><span class=\"ne-text\">3.stream([mixed $format [, int $quality]]) - 图像流</span></p><p id=\"u8e295fac\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a45840e6\" class=\"ne-codeblock language-plain\">以给定格式和给定图像质量，对当前图像进行编码，并基于图像数据，创建新的PSR-7流。</pre><p id=\"u2d2c69b8\" class=\"ne-p\"><br></p><p id=\"u1d68af39\" class=\"ne-p\"><span class=\"ne-text\">4.encode([$format [, $quality]]) - 图像进行编码</span></p><p id=\"uacae860f\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"34124cc5\" class=\"ne-codeblock language-plain\">将当前图片，按给定的格式和图片质量进行编码\n\n$format - jpg、png、gif、tif、bmp、data-url(base64)。默认返回的编码后的数据。默认类型是 'jpeg'\n$quality - 返回从 0-100。0-最低，100最大。只对 'jpg' 编码格式有效，因为png压缩是无损的，不会影响图片质量。默认是90\n\n示例：\n\t$jpg = (string) Image::make('public/foo.png')-&gt;encode('jpg', 75);\n\t$data = (string) Image::make('public/foo.png')-&gt;encode('data-url');</pre><p id=\"u64cad745\" class=\"ne-p\"><br></p><p id=\"uff59f19c\" class=\"ne-p\"><span class=\"ne-text\">图像缓存相关<br /></span><span class=\"ne-text\">1.cache(Closure $callback [, int $lifetime [,bool $returnObj]]) - 图像缓存</span></p><p id=\"uf8031851\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"7b57ef7e\" class=\"ne-codeblock language-plain\">$callback - 从Closure回调，创建新的缓存图像实例。\n$lifetime - 为回调传递一个生命周期\n$returnObj - 获取一个Intervention图像实例作为返回值，还是直接接收图像流。\ncache()方法，需要安装额外的 'intervention/imagecache' 依赖包\n\n示例：\n\t$img = Image::cache(function($image){\n\t\t$image-&gt;make('public/foo.jpg')-&gt;resize(300, 200)-&gt;greyscale();\n\t}, 10, true);</pre><p id=\"ud7e296d0\" class=\"ne-p\"><br></p><p id=\"ubb96a6e6\" class=\"ne-p\"><span class=\"ne-text\">2.backup($name = 'default') - 图像状态备份</span></p><p id=\"ua843fd1a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"1090e63e\" class=\"ne-codeblock language-plain\">备份当前图片的状态。将图片的当前状态备份到 $name。之后，可以调用 reset($name = 'default') 来进行状态恢复。\n\n$name默认是'default'。我们可以传递不同的$name，来记录图片处理过程中的多个状态\n\n示例：\n\t$img = Image::canvas(120, 90, '#000');\n\t$img-&gt;fill('#f00');\n\t$img-&gt;backup();\n\t$img-&gt;fill('#0f0');\n\t$img-&gt;reset();</pre><p id=\"uc7eea877\" class=\"ne-p\"><br></p><p id=\"uc420bcbe\" class=\"ne-p\"><span class=\"ne-text\">3.reset($name = 'default') - 图像状态恢复</span></p><p id=\"u27a921e7\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"74d3c01e\" class=\"ne-codeblock language-plain\">backup()用于备份图像状态，reset()用于恢复到之前的某个备份</pre><p id=\"u26193938\" class=\"ne-p\"><br></p><p id=\"u51e5d31e\" class=\"ne-p\"><span class=\"ne-text\">原生图像处理驱动调用：<br /></span><span class=\"ne-text\">1.getCore() - GD库｜Imagick库 对象调用</span></p><p id=\"ucadc7a92\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"9ff69ad5\" class=\"ne-codeblock language-plain\">以特定驱动的核心格式，返回当前图像。如果使用的是 'GD' 库，则返回 GD 资源类型；如果使用的是 'Imagick'，则返回一个 Imagick 对象。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$imagick = $img-&gt;getCore();\t\t\t// 返回原始的 'imagick' 对象\n\t$imagick-&gt;embossImage(0, 1);\t\t// 就可以调用 'imagick' 的方法了</pre><p id=\"u01f623da\" class=\"ne-p\"><br></p><p id=\"u7bab082d\" class=\"ne-p\"><span class=\"ne-text\">调整图像尺寸：<br /></span><span class=\"ne-text\">1.resize($width, $height [,Closure $callback]) - 调整图像尺寸</span></p><p id=\"ufe0f1b04\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"289ac572\" class=\"ne-codeblock language-plain\">使用给定的宽、高，来调整当前图像。传递一个可选的Closure回调来约束resize命令。\n回调函数，定义了resize命令的约束。可约束图像的 '宽高比(aspect-ratio)' 和 '不希望的大小(a unwanted upsizing)'\n\taspectRatio()\n\t\t约束当前图像的宽高比。作为比例调整大小的快捷方式，可以使用 widen() 和 heighten()\n\tupsize()\n\t\t保持图像大小\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;resize(300, 200);\n\t$img-&gt;resize(300, null);\n\t$img-&gt;resize(null, 200);\n\t$img-&gt;resize(300, null, function($constraint){\t\t// 调整图像的宽到300，并约束宽高比(高自动)\n\t\t$constraint-&gt;aspectRatio();\n\t});\n\t$img-&gt;resize(null, 200, function($constraint){\t\t// 调整图像的高到200，并约束宽高比(宽自动)\n\t\t$constraint-&gt;aspectRatio();\n\t});\n\t$img-&gt;resize(null, 400, function($constraint){\t\t// 阻止可能的尺寸变化(保持图像大小)\n\t\t$constraint-&gt;aspectRatio();\n\t\t$constraint-&gt;upsize();\n\t});</pre><p id=\"u30bfab03\" class=\"ne-p\"><br></p><p id=\"u4ef11b71\" class=\"ne-p\"><span class=\"ne-text\">2.widen($width [, Closure $callback]) - 调整图像宽(保持宽高比)</span></p><p id=\"ue63d3843\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8c5ad84f\" class=\"ne-codeblock language-plain\">调整图像的宽到给定的宽度，保持宽高比。传递一个可选的回调函数，来应用额外的约束，例如：阻止可能的尺寸变化\n\tupsize()\n\t\t保持图像大小</pre><p id=\"u41a75ea5\" class=\"ne-p\"><br></p><p id=\"u8e1ba88e\" class=\"ne-p\"><span class=\"ne-text\">3.heighten($height [, Closure $callback]) - 调整图像高(保持宽高比)</span></p><p id=\"ube8ee1ea\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a9625099\" class=\"ne-codeblock language-plain\">调整图像的高到给定的高度，保持宽高比。传递一个可选的回调函数，来应用额外的约束，例如：阻止可能的尺寸变化\n\tupsize()\n\t\t保持图像大小</pre><p id=\"u81cb5e72\" class=\"ne-p\"><br></p><p id=\"u9f51dd78\" class=\"ne-p\"><span class=\"ne-text\">4.crop($width, $height [, $x, $y]) - 裁剪图像</span></p><p id=\"ue6a9252d\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"4af19940\" class=\"ne-codeblock language-plain\">使用给定的宽、高，裁剪当前图像的一个矩形区域。默认从图像的0.0开始，可传递一个坐标，定位裁剪的起始点。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;crop(100, 100, 20, 20);</pre><p id=\"u3e1ba682\" class=\"ne-p\"><br></p><p id=\"u338a7e8a\" class=\"ne-p\"><span class=\"ne-text\">5.fit(</span><span id=\"z1YfA\" class=\"ne-math\"><img src=\"https://g.yuque.com/gr/latex?width%20%5B%5B\"></span><span class=\"ne-text\">height] [, Closure $callback [, $position]]]) - 智能裁剪和调整</span></p><p id=\"u060e1ed6\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"248846d4\" class=\"ne-codeblock language-plain\">以一个智能的方式，结合裁剪和调整来格式化图片。该方法将会自动找到给定的宽、高的最佳宽高比，裁剪并调整到给定尺寸。\n$callback - 回调函数，来约束可能的尺寸变化\n\tupsize()\n\t\t保持图像大小\n\n$position - 自定义裁剪的位置。默认是 '中心'\n\ttop-left\n\ttop\n\ttop-right\n\tleft\n\tcenter(默认)\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right</pre><p id=\"u3e41c2f7\" class=\"ne-p\"><br></p><p id=\"u30aed8b4\" class=\"ne-p\"><span class=\"ne-text\">6.resizeCanvas($width, $height [, $anchor [, bool $relative [, $bgcolor]]])</span></p><p id=\"u0003dca7\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"57a276d7\" class=\"ne-codeblock language-plain\">调整当前图像的边界到给定的宽和高。\n\n$anchor - 从图像的哪点开始调整\n\ttop-left\n\ttop\n\ttop-right\n\tleft\n\tcenter(默认)\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n\n$relative - 将模式设置为相对，用以在真实的图片尺寸上，添加或者减去给定的宽、高。\n\n$bgcolor - 画布背景(默认 '#000000')</pre><p id=\"u38b171a8\" class=\"ne-p\"><br></p><p id=\"ub4f534cc\" class=\"ne-p\"><span class=\"ne-text\">7.trim([$base [, array $away [, $tolerance [, $feather]]]])<br /></span><span class=\"ne-text\">以给定颜色修剪图像空间。</span></p><p id=\"uc32aeeee\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"054eabd2\" class=\"ne-codeblock language-plain\">$base - 定义从什么位置来选取修剪颜色的点。例如：设置为  'bottom-right'，图像上的所有颜色将被修剪掉，等同于图片左下角的颜色。可选的值有：\n\ttop-left(默认)\n\tbottom-right\n\ttranparent\n\n$away - 应该被修剪掉的边框。你可以添加多个边框(array)，可选的值有：\n\ttop\n\tbottom\n\tleft\n\tright\n\n$tolerance - 定义一个偏差度，修剪相似颜色值。范围0-100。默认是0\n\n$feather - 羽化效果\n\t有时，在修剪时在对象周围留下未触摸的“边框”可能是有用的。 特别是修剪非实体背景时，您可以展开（正值）或收缩（负值）修剪对象周围的空间一定量的像素。\n\n示例：\n\tImage::make('public/foo.jpg')-&gt;trim();\t\t// 默认，所有边框使用 'top-left' 颜色\n\tImage::make('public/foo.jpg')-&gt;trim('bottom-right');\t\t// 所有边框使用 'bottom-right' 颜色\n\tImage::make('public/foo.jpg')-&gt;trim('transparent', array('top', 'bottom'));\t\t// 上、下边框透明\n\tImage::make('public/foo.jpg')-&gt;trim('top-left', 'left');\t\t// 只有左边框，使用 'top-left' 颜色\n\tImage::make('public/foo.jpg')-&gt;trim('top-left', null, 40);\t\t// 移除图像所有边框＋40偏差度\n\tImage::make('public/foo.jpg')-&gt;trim('top-left', null, 25, 50);\t\t// 移除图像所有边框＋25偏差度＋50px的边框羽化效果</pre><p id=\"u9c741fdf\" class=\"ne-p\"><br></p><p id=\"u8075bd82\" class=\"ne-p\"><span class=\"ne-text\">调整图像：<br /></span><span class=\"ne-text\">1.gamma($correction) - 伽马矫正</span></p><p id=\"ue6c6c944\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"894c1065\" class=\"ne-codeblock language-plain\">对当前图像执行伽马矫正操作\n$correction - 伽马补偿值(gamma compensation value)\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;gamma(1.6);</pre><p id=\"uea6a9d8b\" class=\"ne-p\"><br></p><p id=\"uaed7d836\" class=\"ne-p\"><span class=\"ne-text\">2.brightness($level) - 亮度</span></p><p id=\"uae90b51b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"726167fe\" class=\"ne-codeblock language-plain\">改变当前图像的亮度。$level可选范围为：-100 - 100。0-表示不改变，-100最小，＋100最大。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;brightness(35);</pre><p id=\"u460292c3\" class=\"ne-p\"><br></p><p id=\"ud8e93b70\" class=\"ne-p\"><span class=\"ne-text\">3.constrast($level) - 对比度</span></p><p id=\"u511ae49b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"0a024424\" class=\"ne-codeblock language-plain\">改变图像的对比度。$level可选范围为：-100 - 100。0-表示不改变，-100最小，＋100最大。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;constrast(35);</pre><p id=\"ua6a1836a\" class=\"ne-p\"><br></p><p id=\"u1c41b088\" class=\"ne-p\"><span class=\"ne-text\">4.colorize($red, $green, $blue) - 改变RGB色道</span></p><p id=\"uf20b60da\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"b048ba65\" class=\"ne-codeblock language-plain\">使用给定的红、绿、蓝色道，改变当前图像的RGB颜色。色道值是规范化的，范围从 -100 - 100。0-表示不改变，－100表示移除图像上的所有特定颜色，＋100表示最大颜色\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;colorize(-100, 0, 100);\t// 添加蓝，移除红\n\t$img-&gt;colorize(0, 30, 0);\t\t// 给图片添加部分蓝色调</pre><p id=\"ufe251fe0\" class=\"ne-p\"><br></p><p id=\"uf5590698\" class=\"ne-p\"><span class=\"ne-text\">5.greyscale() - 灰度</span></p><p id=\"u2703a1c8\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"24115df7\" class=\"ne-codeblock language-plain\">将图像转换为灰度版本\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$image = $img-&gt;greyscale();</pre><p id=\"u4b1295c9\" class=\"ne-p\"><br></p><p id=\"u541dc75d\" class=\"ne-p\"><span class=\"ne-text\">6.flip($mode) - 图像镜像</span></p><p id=\"u72aa8203\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"7249adeb\" class=\"ne-codeblock language-plain\">给当前图像，制作镜像。$mode可以指定为：h-水平镜像和v-垂直镜像。默认是h\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;flip('v');</pre><p id=\"ucde44ea3\" class=\"ne-p\"><br></p><p id=\"udb74dda9\" class=\"ne-p\"><span class=\"ne-text\">7.invert() - 反转图像颜色</span></p><p id=\"u42e5dc7b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"d37aac96\" class=\"ne-codeblock language-plain\">反转当前图像的所有颜色\n\n示例：\n\t$img = Image::make('public/foo.jpg')-&gt;invert();</pre><p id=\"u6d98289e\" class=\"ne-p\"><br></p><p id=\"uf9616a15\" class=\"ne-p\"><span class=\"ne-text\">8.opacity($transparency) - 设置图像的透明度</span></p><p id=\"u7e69fa4a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ff3fffa5\" class=\"ne-codeblock language-plain\">设置当前图像的不透明度的百分比。从 100%-0%，100%－不透明｜0%-全透明\n\n示例：\n\tImage::make('public/foo.jpg')-&gt;opacity(50);\n\tImage::make('public/foo.jpg')-&gt;opacity(0);</pre><p id=\"u20454f43\" class=\"ne-p\"><br></p><p id=\"u36340352\" class=\"ne-p\"><span class=\"ne-text\">9.orientate() - 旋转图像(记得摩点图像处理，使用了它。Imagick)</span></p><p id=\"ufa989bc1\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ac27090c\" class=\"ne-codeblock language-plain\">此方法读取EXIF图像配置项 '方向'，并对图像执行旋转，以正确显示图像。必须从文件路径实例化图像，才能正确读取EXIF数据\n注意：\n\t使用该方法，要求PHP编译时，必须指定 '--enable-exif'。windows用户，还必须启用 'mbstring' 扩展\n\n示例：\n\t$img = Image::make('public/foo.jpg')-&gt;orientate();</pre><p id=\"uc7725053\" class=\"ne-p\"><br></p><p id=\"ua2263217\" class=\"ne-p\"><span class=\"ne-text\">10.rotate(float $angle [, string $bgcolor]) - 图像旋转</span></p><p id=\"ud7c1111d\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"aaae9aca\" class=\"ne-codeblock language-plain\">将当前图像，逆时针旋转给定角度。可定义旋转后，未覆盖区域的背景颜色！\n$angle - 旋转角度\n$bgcolor - 旋转后，可能出现未覆盖区域，我们可设置背景色</pre><p id=\"ub5a3ebc2\" class=\"ne-p\"><br></p><p id=\"u20befdbe\" class=\"ne-p\"><span class=\"ne-text\">11.mask($source [, bool $mask_with_alpha = false])<br /></span><span class=\"ne-text\">将给定的图像资源应用为当前图像的alpha蒙板，以改变当前透明度。蒙板将调整为当前图像大小。默认情况下，蒙板的灰度版本会转换为alpha值，但可通过设置 </span><span id=\"gDfje\" class=\"ne-math\"><img src=\"https://g.yuque.com/gr/latex?mask_with_alpha%20%E4%BB%A5%E5%BA%94%E7%94%A8%E4%B8%96%E7%BA%AA%E7%9A%84alpha%E9%80%9A%E9%81%93%E3%80%82%E5%B0%86%E4%BF%9D%E6%8C%81%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E9%80%8F%E6%98%8E%E5%BA%A6%E3%80%82%0A\"></span><span class=\"ne-text\">source：<br /></span><span class=\"ne-text\">string - 文件系统的图片路径<br /></span><span class=\"ne-text\">string - 图片的URL地址(allow_url_fopen必须启用)<br /></span><span class=\"ne-text\">string - 二进制图片数据<br /></span><span class=\"ne-text\">string - data-url编码的图片数据<br /></span><span class=\"ne-text\">string - base64编码的图片数据<br /></span><span class=\"ne-text\">resource - gd类型的PHP资源(当使用GD库)<br /></span><span class=\"ne-text\">object - Imagick实例(当使用Imagick库)<br /></span><span class=\"ne-text\">object - Intervention\\Image\\Image 实例<br /></span><span class=\"ne-text\">object - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) -<br /></span><span class=\"ne-text\">laravel框架自带的图片上传实例<br /></span><span class=\"ne-text\">$mask_with_alpha - 设置为true，可将实际的alpha通道作为蒙板，应用于当前图像，替代颜色值。默认是 false<br /></span><span class=\"ne-text\">应用效果：<br /></span><span class=\"ne-text\">1.filter(Intervention\\Image\\Filters\\FilterInterface $filter) - 使用滤镜</span></p><p id=\"ud2df4cbd\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"a8094baa\" class=\"ne-codeblock language-plain\">给当前图像，应用自定义的滤镜效果</pre><p id=\"u153ee170\" class=\"ne-p\"><br></p><p id=\"uc5b08d37\" class=\"ne-p\"><span class=\"ne-text\">2.blur($amount = 1) - 高斯模糊</span></p><p id=\"u05239ae8\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"6d6aa6df\" class=\"ne-codeblock language-plain\">在当前图片上，应用高斯模糊滤镜。$amount可选范围为 0-100。(GD库处理，高强度的高斯模糊会非常占用性能，小心使用)\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;blur();\t\t// 轻微的高斯模糊\n\t$img-&gt;blur(15);\t\t// 高强度的高斯模糊</pre><p id=\"u6e542320\" class=\"ne-p\"><br></p><p id=\"ue3a680bb\" class=\"ne-p\"><span class=\"ne-text\">3.sharpen($amount = 10) - 锐化效果</span></p><p id=\"u81677015\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"41177e95\" class=\"ne-codeblock language-plain\">锐化当前图像。$amount可选范围为 0-100。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;sharpen(15);</pre><p id=\"u9ef1a62b\" class=\"ne-p\"><br></p><p id=\"u360c5c36\" class=\"ne-p\"><span class=\"ne-text\">4.pixelate($size) - 像素化效果</span></p><p id=\"u3d312c25\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"ccf3ed9c\" class=\"ne-codeblock language-plain\">将像素化效果应用于当前图像(指定像素化效果的尺寸)</pre><p id=\"uedbece8e\" class=\"ne-p\"><br></p><p id=\"ufcb7dace\" class=\"ne-p\"><span class=\"ne-text\">5.limitColors($count [, $matte])</span></p><p id=\"ud25685a6\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8e4581ef\" class=\"ne-codeblock language-plain\">将当前图片的现有颜色，转换为具有给定最大颜色数的颜色表。该函数保留尽可能多的alpha通道信息，并将透明像素与可选的遮罩颜色混合。\n$count - 应在调色板中保留的最大颜色数。设置为null，转为真彩色(truecolor)\n$matte - 用于混合透明像素的颜色。默认值：无遮罩颜色\n\n示例：\n\t$img = Image::make('public/foo.png');\n\t$img-&gt;limitColors(255, '#f90');</pre><p id=\"u1e703dc8\" class=\"ne-p\"><br></p><p id=\"u9421cde2\" class=\"ne-p\"><span class=\"ne-text\">6.interlace($interlace = true) - 图像隔行扫描</span></p><p id=\"ueb243cb3\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"c0405ea6\" class=\"ne-codeblock language-plain\">传递一个boolean类型参数，切换隔行扫描模式，来确定是否使用隔行扫描或标准模式，对图像进行编码。如果jpeg图像使用隔行扫描模式，图像将被处理为渐进式jpeg。\n设置为true－隔行扫描模式｜false－标准模式。默认是true\n\n示例：\n\t$img = Image::make('public/foo.png');\n\t$img-&gt;interlace();\t\t\t// 开启隔行扫描\n\t$img-&gt;save();\n\t$img = Image::make('public/interlaced.gif');\n\t$img-&gt;interlace(false);\t\t// 关闭隔行扫描\n\t$img-&gt;save();</pre><p id=\"u17dcdf10\" class=\"ne-p\"><br></p><p id=\"u3b36a2dd\" class=\"ne-p\"><span class=\"ne-text\">画图：<br /></span><span class=\"ne-text\">1.text($text [, $x [, $y [, Closure $callback]]]) - 文字</span></p><p id=\"u2454833f\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"5f0bd574\" class=\"ne-codeblock language-plain\">在指定的位置，写入文本。在回调函数中，可定义更多细节，例如：字体大小，字体文件，对其方式等\n$callback - 回调函数\n\tfile($filepath) - 字体文件。设置True Type Font文件的路径，或者GD库内部字体之一的1到5之间的整数值。 默认值：1\n\tsize($size) - 字体大小。字体大小仅在设置字体文件时可用，否则将被忽略。 默认值：12\n\tcolor($color) - 字体颜色\n\talign($align) - 水平对齐方式：left,right,center。默认left\n\tvalign($valign) - 垂直对齐方式：top,bottom,middle。默认bottom\n\tangle($angle) - 文本旋转角度。文本将围绕垂直和水平对齐点逆时针旋转。 旋转仅在设置字体文件时可用，否则将被忽略</pre><p id=\"ubfd53ec3\" class=\"ne-p\"><br></p><p id=\"uab559066\" class=\"ne-p\"><span class=\"ne-text\">2.pixel($color, $x, $y) - 点</span></p><p id=\"u4fc807fa\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"2c3e5a01\" class=\"ne-codeblock language-plain\">在给定的坐标上，以给定的颜色画单个像素点</pre><p id=\"u79c810a7\" class=\"ne-p\"><br></p><p id=\"u4a5b1fed\" class=\"ne-p\"><span class=\"ne-text\">3.line($x1, $y1, $x2, $y2 [Closure $callback]) - 线</span></p><p id=\"u9be6f524\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"d323dced\" class=\"ne-codeblock language-plain\">在当前图像上，指定2点画线。可以在回调函数中，定义线的颜色和宽度\n$callback\n\tcolor($color) - 指定线的颜色。默认：#000000\n\twidth($width) - 指定线的宽度。默认：1px。\t\t\t// GD库无效！！</pre><p id=\"ue5e51dc7\" class=\"ne-p\"><br></p><p id=\"u74a6da5a\" class=\"ne-p\"><span class=\"ne-text\">4.rectangle($x1, $y1, $x2, $y2 [Closure $callback]) - 矩形</span></p><p id=\"u1ebc092a\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"432f13ae\" class=\"ne-codeblock language-plain\">指定2点坐标，分别代表左上角和右下角，来画一个矩形。</pre><p id=\"ua3f5a24b\" class=\"ne-p\"><br></p><p id=\"u5bd7b423\" class=\"ne-p\"><span class=\"ne-text\">5.polygon(array $points [, Closure $callback]) - 多边形</span></p><p id=\"u687dbb40\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"5b18f194\" class=\"ne-codeblock language-plain\">使用给定的点数据，来画一个多边形。可以在回调函数中，定义多变形的外观\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n\n示例：\n\t$img = Image::canvas(800, 600, '#ddd');\n\t$points = array(\n\t\t40, 50,\n\t\t30, 40,\n\t\t20, 30,\n\t\t10, 20,\n\t\t5, 10,\n\t);\n\t$img-&gt;polygon($points, function($draw){\n\t\t$draw-&gt;background('#ff0');\n\t\t$draw-&gt;border(1, '#f0f');\n\t})</pre><p id=\"ue6cc9209\" class=\"ne-p\"><br></p><p id=\"ubade9bb4\" class=\"ne-p\"><span class=\"ne-text\">6.circle($diameter, $x, $y [,Closure $callback]) - 圆</span></p><p id=\"u1641cab0\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"912c9798\" class=\"ne-codeblock language-plain\">在给定的x、y坐标点上，使用给定的直径画一个圆。\n可以通过回调函数，来定义圆的外观。\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框\n\n示例：\n\t$img = Image::canvas(300, 200, '#ddd');\n\t$img-&gt;circle(100, 50, 50, function($draw){\n\t\t$draw-&gt;background('#ff0');\n\t\t$draw-&gt;border(1, '#f00');\n\t})</pre><p id=\"ufc4de046\" class=\"ne-p\"><br></p><p id=\"u8c9b9609\" class=\"ne-p\"><span class=\"ne-text\">7.ellipse($width = 10, $height = 10, $x, $y [Closure $callback]) - 椭圆</span></p><p id=\"u87878a06\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"d7a09676\" class=\"ne-codeblock language-plain\">在给定的x、y坐标点，绘制彩色椭圆。可以定义宽度和高度，以及通过可选的闭包回调来设置椭圆的外观\n$callback 可使用下面的方法，来定义圆的外观：\n\tbackground($color) - 定义圆的背景\n\tborder($width, $color) - 定义圆的边框</pre><p id=\"uabb7582d\" class=\"ne-p\"><br></p><p id=\"ufc740d75\" class=\"ne-p\"><span class=\"ne-text\">图像的其它处理方法：<br /></span><span class=\"ne-text\">1.fill($filling [, $x, $y]) - 图像填充</span></p><p id=\"u7a5a31c7\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"f15fd254\" class=\"ne-codeblock language-plain\">使用给定颜色或另一张图片来填充当前图像。传递可选的x、y坐标，表示开始填充的位置。\n如果指定了x、y坐标，原始图像上该坐标的颜色，将执行泛红填充(flood fill)。如果未指定坐标，不管下面是什么，填充整个图像\n\n$filling - 填充颜色或图像模式。图像资源格式如下：\n\tstring - 文件系统的图片路径\n\tstring - 图片的URL地址(allow_url_fopen必须启用)\n\tstring - 二进制图片数据\n\tstring - data-url编码的图片数据\n\tstring - base64编码的图片数据\n\tresource - gd类型的PHP资源(当使用GD库)\n\tobject - Imagick实例(当使用Imagick库)\n\tobject - Intervention\\Image\\Image 实例\n\tobject - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) - laravel框架自带的图片上传实例\n\n示例：\n\t$img = Image::canvas(800, 600);\n\t$img-&gt;fill('#ccc');\n\t$img-&gt;fill('public/foo.jpg');\n\t$img-&gt;fill('#f0f', 0, 0);</pre><p id=\"u233292cb\" class=\"ne-p\"><br></p><p id=\"ub38b031b\" class=\"ne-p\"><span class=\"ne-text\">2.insert($source [, $position [, $x, $y]]) - 插入图片</span></p><p id=\"udf386839\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"fb82a691\" class=\"ne-codeblock language-plain\">将一个给定的图片资源插入到当前图像中。\n\n$source - 另一个图片资源\n\n$position - 位置(相对于当前图像)\n\ttop-left(默认)\n\ttop\n\ttop-right\n\tleft\n\tcenter\n\tright\n\tbottom-left\n\tbottom\n\tbottom-right\n\n$x,$y - 偏移坐标(默认：0.0)\n\t在 $position 指定的位置上，再进行相对偏移\n\n此方法可用于，将另一张图像作为水印，因为保持了透明度。\n\n示例：\n\t$img = Image::make('public/foo.jpg');\n\t$img-&gt;insert('public/bar.png');\t\t\t\t\t\t\t\t\t// 插入另一个图片\n\t$watermark = Image::make('public/watermark.png');\t\t\t\t// 创建一个新的图片实例\n\t$img-&gt;insert($watermark, 'center');\t\t\t\t\t\t\t\t// 插入图片\n\t$img-&gt;insert('public/watermark.png', 'bottom-right', 10, 10);</pre><p id=\"ue8acce14\" class=\"ne-p\"><br></p><p id=\"ufb70160a\" class=\"ne-p\"><span class=\"ne-text\">3.pickColor($x, $y [string $format]) - 选取给定坐标颜色</span></p><p id=\"u4dbe8682\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"39e7e41a\" class=\"ne-codeblock language-plain\">在当前图像上的指定坐标，获取颜色，并返回给定的颜色格式\n$format - 颜色格式，可以是：\n\tarray - array(255, 255, 255, 1)\n\trgb - rgb(255, 255, 255)\n\trgba - rgba(255, 255, 255, 0.5)\n\thex - #cccccc\n\tint - 16776956\n默认情况下，该方法将像素的RGB值作为数组返回。使用整数格式，将颜色直接传递给任意GD库函数</pre><p id=\"ucac01800\" class=\"ne-p\"><br></p><p id=\"ufe862eab\" class=\"ne-p\"><span class=\"ne-text\">检索信息：<br /></span><span class=\"ne-text\">1.width()<br /></span><span class=\"ne-text\">获取当前图片的宽度(单位：px)</span></p><p id=\"ucc1aa728\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"c8b0ac52\" class=\"ne-codeblock language-plain\">示例：\n\t$width = Image::make('public/foo.jpg')-&gt;width();</pre><p id=\"ua85ccb9c\" class=\"ne-p\"><br></p><p id=\"ub63b4c70\" class=\"ne-p\"><span class=\"ne-text\">2.height()<br /></span><span class=\"ne-text\">获取当前图片的高度(单位：px)</span></p><p id=\"u7258613b\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"b4e8b05f\" class=\"ne-codeblock language-plain\">示例：\n\t$height = Image::make('public/foo.jpg')-&gt;height();</pre><p id=\"u955a4646\" class=\"ne-p\"><br></p><p id=\"uf37b7384\" class=\"ne-p\"><span class=\"ne-text\">3.mime()<br /></span><span class=\"ne-text\">如果已经图像已经定义了MIME类型，从当前图像实例中读取MIME类型。</span></p><p id=\"uadb45d7c\" class=\"ne-p\"><br></p><p id=\"u927b8ee5\" class=\"ne-p\"><span class=\"ne-text\">4.exif([string </span><span id=\"cys3F\" class=\"ne-math\"><img src=\"https://g.yuque.com/gr/latex?key%5D)%0A%E4%BB%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96%20'Exif'%20%E5%85%83%E6%95%B0%E6%8D%AE%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%8E%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E6%98%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%9B%BE%E5%83%8F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96EXIF%E6%95%B0%E6%8D%AE%0Aimagick%E4%BB%8E2.3.9%E5%BC%80%E5%A7%8B%E6%94%AF%E6%8C%81exif%E3%80%82PHP%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%8C%85%E5%90%AB%20'--enable-exif'%20%E6%89%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E3%80%82windows%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%98%E5%BF%85%E9%A1%BB%E5%BC%80%E5%90%AF%20'mbstring'%20%E6%89%A9%E5%B1%95(PHP%E6%89%8B%E5%86%8C%E6%9C%89%E8%AF%A5%E5%87%BD%E6%95%B0%E5%BA%93)%0A\"></span><span class=\"ne-text\">key - 检索的exif哪个下标</span></p><p id=\"u7e80c617\" class=\"ne-p\"><br></p><p id=\"u9a024b0f\" class=\"ne-p\"><span class=\"ne-text\">5.iptc([string $key])<br /></span><span class=\"ne-text\">从当前图像中读取 'IPTC' 元数据<br /></span><span class=\"ne-text\">默认获取所有元数据，可以传递下标，来获取指定的元数据。没有发现元数据，返回 'NULL'</span></p><p id=\"u286bd0b0\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8e0f237a\" class=\"ne-codeblock language-plain\">示例：\n\t$data = Image::make('public/foo.jpg')-&gt;iptc();\t\t\t\t\t\t// 获取所有数据\n\n\t$copyright = Image::make('public/foo.jpg')-&gt;iptc('Copyright');\t\t// 获取 'Copyright'</pre><p id=\"u1060959f\" class=\"ne-p\"><br></p><p id=\"u8ddc5bbf\" class=\"ne-p\"><span class=\"ne-text\">6.filezise()<br /></span><span class=\"ne-text\">如果实例是从一个真实文件初始化的，获取当前图像实例的文件尺寸<br /></span><span class=\"ne-text\">返回图像的尺寸大小，单位是 'bytes - 字节'，如果不是从一个文件创建的图像实例，则返回false</span></p><p id=\"u5f873a49\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"13ab79b6\" class=\"ne-codeblock language-plain\">示例：\n\t$img = Image::make('public/foo.jpg');\n\t$size = $img-&gt;filesize();</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [图像处理,image,interertion]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href:  https://blog.csdn.net/beyond__devil</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u4bb4086e\" id=\"u4bb4086e\" style=\"color: rgb(38, 38, 38)\">copyright_url: </span><span data-lake-id=\"ufb36daad\" id=\"ufb36daad\">https://blog.csdn.net/beyond__devil/article/details/62230610</span><span data-lake-id=\"ue2ae97f0\" id=\"ue2ae97f0\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span><span data-lake-id=\"u07e98473\" id=\"u07e98473\">beyond__devil</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u10c9428d\" id=\"u10c9428d\">安装：</span></p><p data-lake-id=\"ub9b61dc2\" id=\"ub9b61dc2\"><br></p><h3 data-lake-id=\"25a68d79\" id=\"25a68d79\"><span data-lake-id=\"ubbb7eff6\" id=\"ubbb7eff6\">需求：</span></h3><p data-lake-id=\"u93d9d28c\" id=\"u93d9d28c\"><br></p><ul list=\"ue3053264\"><li fid=\"ueb3af231\" data-lake-id=\"u628ffc16\" id=\"u628ffc16\"><span data-lake-id=\"ubae3bc55\" id=\"ubae3bc55\">PHP &gt;= 5.4</span></li><li fid=\"ueb3af231\" data-lake-id=\"u1887b276\" id=\"u1887b276\"><span data-lake-id=\"u90963c27\" id=\"u90963c27\">Fileinfo 扩展</span></li><li fid=\"ueb3af231\" data-lake-id=\"u779581c5\" id=\"u779581c5\"><span data-lake-id=\"ue304ecf3\" id=\"ue304ecf3\">GD库 &gt;= 2.0</span></li><li fid=\"ueb3af231\" data-lake-id=\"u16e96f8d\" id=\"u16e96f8d\"><span data-lake-id=\"ubf7ed463\" id=\"ubf7ed463\">Imagick 扩展 &gt;=6.5.7</span></li></ul><p data-lake-id=\"u08fff3f6\" id=\"u08fff3f6\"><br></p><h3 data-lake-id=\"0456f5e6\" id=\"0456f5e6\"><span data-lake-id=\"ubd7ee2cc\" id=\"ubd7ee2cc\">composer安装：</span></h3><p data-lake-id=\"u07a94e04\" id=\"u07a94e04\"><br></p><blockquote data-lake-id=\"ubda7483a\" id=\"ubda7483a\"><p data-lake-id=\"u73772ac4\" id=\"u73772ac4\"><span data-lake-id=\"uaf5ece11\" id=\"uaf5ece11\">composer require intervention/image</span></p></blockquote><p data-lake-id=\"u41197f7d\" id=\"u41197f7d\"><br></p><p data-lake-id=\"uc0e142df\" id=\"uc0e142df\"><br></p><h2 data-lake-id=\"b1B5T\" id=\"b1B5T\"><span data-lake-id=\"u78e6d898\" id=\"u78e6d898\">简单的基本使用</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%20%20%20%20%20%20%20%20%24img-%3Eblur(12)%3B%2F%2F%E5%9B%BE%E7%89%87%E7%9A%84%E6%A8%A1%E7%B3%8A%E5%BA%A6%EF%BC%8CGD%E4%B8%8B%E5%A4%A7%E9%87%8F%E4%BD%BF%E7%94%A8%E5%BD%B1%E5%93%8D%E6%80%A7%E8%83%BD%EF%BC%8C%E9%BB%98%E8%AE%A41%5Cn%20%20%20%20%20%20%20%20%24img-%3Ebrightness(30)%3B%2F%2F%E5%9B%BE%E7%89%87%E4%BA%AE%E5%BA%A6%EF%BC%8C-100-100%EF%BC%8C%E9%BB%98%E8%AE%A40%5Cn%20%20%20%20%20%20%20%20%24img%20%3D%20Image%3A%3Acanvas(32%2C%2032%2C%20'%23ff0000')%3B%2F%2F%E7%94%BB%E5%9B%BE%E5%88%9B%E5%BB%BA%E7%94%BB%E6%9D%BF%EF%BC%8C%E5%8F%AF%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E8%89%B2%5Cn%20%20%20%20%20%20%20%20%24img%20%3D%20Image%3A%3Acanvas(300%2C%20200%2C%20'%23ddd')%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Ecircle(100%2C%2050%2C%2050%2C%20function%20(%24draw)%20%7B%2F%2F%E5%9C%A8%E5%9B%BE%E7%89%87%E9%87%8C%E9%9D%A2%E7%94%BB%E5%9C%86%EF%BC%8C%E7%9B%B4%E5%BE%84%EF%BC%8Cx%E5%9D%90%E6%A0%87%EF%BC%8Cy%E5%9D%90%E6%A0%87%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Ebackground('%230000ff')%3B%2F%2F%E8%83%8C%E6%99%AF%E8%89%B2%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Eborder(1%2C%20'%23f00')%3B%2F%2F%E5%9C%86%E8%BE%B9%E6%A1%86%EF%BC%8C%E4%B8%8E%E8%83%8C%E6%99%AF%E8%89%B2%5Cn%20%20%20%20%20%20%20%20%24img-%3Ecolorize(-100%2C%200%2C%20100)%3B%2F%2FR%2CG%2CB%E8%B0%83%E8%89%B2%EF%BC%8C%E3%80%90-100%2C100%E3%80%91%5Cn%20%20%20%20%20%20%20%20%24img-%3Econtrast(65)%3B%2F%2F%E5%AF%B9%E6%AF%94%E5%BA%A6%E3%80%90-100%2C100%E3%80%91%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Ecrop(100%2C%20100%2C%2025%2C%2025)%3B%2F%2F%E5%9B%BE%E7%89%87%E7%9A%84%E8%A3%81%E5%89%AA%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%B7%A6%E4%B8%8A%E8%A7%92%E5%BC%80%E5%A7%8B%E8%A3%81%E5%89%AA%EF%BC%8C%E5%AE%BD%EF%BC%8C%E9%AB%98%EF%BC%8C%E5%8F%AF%E9%80%89x%2Cy%E5%9D%90%E6%A0%87%5Cn%20%20%20%20%20%20%20%20%24img-%3Edestroy()%3B%2F%2F%E5%88%A0%E9%99%A4%E5%9B%BE%E7%89%87%5Cn%20%20%20%20%20%20%20%24img-%3Esave('%2F222.jpg')%3B%2F%2F%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87%5Cn%20%20%20%20%20%20%20%20%24img-%3Eellipse(20%2C%2030%2C%2020%2C%2030%2C%20function%20(%24draw)%20%7B%2F%2F%E5%AE%9A%E4%B9%89%E6%A4%AD%E5%9C%86%E8%B7%9F%E5%9C%86%E4%B8%80%E8%87%B4%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Ebackground('%230000ff')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Eborder(1%2C%20'%23ff0000')%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Eencode('jpg'%2C%2075)%3B%2F%2F%E7%BC%96%E7%A0%81%EF%BC%8C%E5%8F%AA%E6%9C%89jpg%E6%89%8D%E8%83%BD%E9%80%89%E6%8B%A9%E8%B4%A8%E9%87%8F%EF%BC%8C0-100%5Cn%20%20%20%20%20%20%20%20%24img-%3Efill('%23ff00ff'%2C0%2C%200)%3B%2F%2F%E5%A1%AB%E5%85%85%E5%9B%BE%E7%89%87%E6%88%96%E9%A2%9C%E8%89%B2%EF%BC%8C%E5%8F%AF%E5%B8%A6%E5%9D%90%E6%A0%87%EF%BC%8C%E5%B8%A6%E5%9D%90%E6%A0%87%E4%BB%A5%E8%AF%A5%E5%9D%90%E6%A0%87%E7%82%B9%E9%A2%9C%E8%89%B2%E8%BF%9B%E8%A1%8C%E9%80%89%E6%8B%A9%E5%A1%AB%E5%85%85%5Cn%20%20%20%20%20%20%20%20%24img-%3Eflip('h')%3B%2F%2F%E5%9B%BE%E7%89%87%E7%BF%BB%E8%BD%AC%EF%BC%8Cv%E4%B8%8A%E4%B8%8B%EF%BC%8Ch%E5%B7%A6%E5%8F%B3%5Cn%20%20%20%20%20%20%20%20%24img-%3Efit(200%2C300)%3B%2F%2F%E4%BF%AE%E6%94%B9%E5%9B%BE%E7%89%87%E9%95%BF%E5%AE%BD%EF%BC%8C%E6%8C%89%E6%AF%94%E4%BE%8B%EF%BC%8C%E8%87%AA%E5%8A%A8%E8%A3%81%E5%89%AA%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E6%AD%A3%E6%96%B9%E5%BD%A2%5Cn%20%20%20%20%20%20%20%20%24img-%3Efit(800%2C%20600%2C%20function%20(%24constraint)%20%7B%2F%2F%E6%8C%89%E7%85%A7%E6%AF%94%E4%BE%8B%E5%A4%9A%E5%8E%9F%E5%A7%8B%E5%9B%BE%E7%89%87%E6%9C%80%E5%A4%A7%E4%BF%AE%E5%89%AA%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24constraint-%3Eupsize()%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Egamma(5)%3B%2F%2F%E8%89%B2%E5%BD%A9gamma%E7%9F%AB%E6%AD%A3%E3%80%8B0%5Cn%20%20%20%20%20%20%20%20%24imagick%20%3D%20%24img-%3EgetCore()%3B%2F%2F%E8%BF%94%E5%9B%9E%20gd%20resource%20%E8%B5%84%E6%BA%90size%EF%BC%9A%E5%AE%BDX%E9%AB%98%EF%BC%8CtrueColor%5Cn%20%20%20%20%20%20%20%20dd(%24imagick)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Egreyscale()%3B%2F%2F%E5%B0%86%E5%9B%BE%E7%89%87%E5%8F%98%E7%81%B0%5Cn%20%20%20%20%20%20return%20%20%24img-%3Eheight()%3B%2F%2F%E5%9B%BE%E7%89%87%E9%AB%98%E5%BA%A6%5Cn%20%20%20%20%20%20%20%20%24img-%3Eheighten(50)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Eheighten(50%2C%20function%20(%24constraint)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24constraint-%3Eupsize()%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%2F%2F%E4%BB%A5%E9%AB%98%E4%B8%BA%E5%9F%BA%E5%87%86%E7%94%9F%E6%88%90%E6%AF%94%E4%BE%8B%E5%9B%BE%E7%89%87%5Cn%20%20%20%20%20%20%20%20%24tt%3D%20Image%3A%3Acanvas(130%2C100%2C'%23F60')%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Einsert('public%2Fwatermark.png'%2C%20'bottom-right'%2C%2010%2C%2010)%3B%2F%2F%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%EF%BC%8C%E5%8F%AF%E9%80%89%E4%BD%8D%E7%BD%AE%E6%A8%A1%E5%BC%8F%EF%BC%8C%E9%BB%98%E8%AE%A4%EF%BC%9Atop-left%20%EF%BC%8Ctop%EF%BC%8Ctop-right%EF%BC%8Cleft%EF%BC%8Ccenter%EF%BC%8Cright%EF%BC%8Cbottom-left%EF%BC%8Cbottom%EF%BC%8Cbottom-right%EF%BC%8C%E5%8F%AF%E9%80%89x%2Cy%E5%9D%90%E6%A0%87%5Cn%20%20%20%20%20%20%20%20%24img-%3Einterlace(true)%3B%2F%2F%E7%BC%96%E7%A0%81%E7%9B%B8%E5%85%B3%EF%BC%8Ctrue%EF%BC%8Cfalse%5Cn%20%20%20%20%20%20%20%20%24img-%3Einvert()%3B%2F%2F%E5%8F%8D%E8%BD%AC%E5%9B%BE%E7%89%87%E9%A2%9C%E8%89%B2%5Cn%20%20%20%20%20%20%20%24tt%20%3D%20%20%24img-%3Eiptc()%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3ElimitColors(30)%3B%2F%2F%E8%89%B2%E5%BD%A9%E9%99%90%E5%88%B6%EF%BC%8C%E5%87%BA%E7%8E%B0%E7%A3%A8%E7%A0%82%E6%95%88%E6%9E%9C%5Cn%20%20%20%20%20%20%20%20%24img-%3Eline(10%2C%2010%2C%20195%2C%20195%2C%20function%20(%24draw)%20%7B%2F%2F%E4%B8%8D%E6%94%AF%E6%8C%81GD%EF%BC%8C%E7%94%BB%E7%BA%BF%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Ecolor('%23f00')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Ewidth(5)%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Emask(%24tt%2Ctrue)%3B%5Cn%20%20%20%20%20%20%20dd(%24tt)%3B%5Cn%20%20%20%20%20%20%20%20return%20%24img-%3Emime()%3B%2F%2F%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%20image%2Fjpeg%5Cn%20%20%20%20%20%20%20%20%24img-%3Eopacity(90)%3B%2F%2F%E9%80%8F%E6%98%8E%E5%BA%A60-100%EF%BC%8C%E6%B6%88%E8%80%97%E6%80%A7%E8%83%BD%5Cn%20%20%20%20%20%20%20%20return%20%24img-%3Eorientate()%3B%5Cn%20%20%20%20return%20%24img-%3EpickColor(50%2C50%2C'hex')%3B%2F%2F%E8%8E%B7%E5%8F%96%E5%9D%90%E6%A0%87%E9%A2%9C%E8%89%B2%EF%BC%8Carray%EF%BC%8Crgb%EF%BC%8Crgba%EF%BC%8Chex%EF%BC%8Cint%5Cn%20%20%20%20%20%20%20%20%24img-%3Epixel('%230000ff'%2C%2032%2C%2032)%3B%2F%2F%E6%8C%87%E5%AE%9A%E5%9D%90%E6%A0%87%E5%A1%AB%E5%85%85%E8%89%B2%E5%BD%A9%5Cn%5Cn%20%20%20%20%20%20%20%20%24img-%3Epixelate(2)%3B%2F%2F%E5%83%8F%E7%B4%A0%E7%94%BB%E9%A9%AC%E8%B5%9B%E5%85%8B%5Cn%20%20%20%20%20%20%20%20%24points%20%3D%20array(%5Cn%20%20%20%20%20%20%20%20%20%20%20%2040%2C%20%2050%2C%20%20%2F%2F%20Point%201%20(x%2C%20y)%5Cn%20%20%20%20%20%20%20%20%20%20%20%2020%2C%20%20110%2C%20%2F%2F%20Point%202%20(x%2C%20y)%5Cn%20%20%20%20%20%20%20%20%20%20%20%2060%2C%20%2060%2C%20%20%2F%2F%20Point%203%20(x%2C%20y)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20120%2C%2020%2C%20%20%2F%2F%20Point%204%20(x%2C%20y)%5Cn%20%20%20%20%20%20%20%20%20%20%20%2050%2C%20%2040%2C%20%20%2F%2F%20Point%205%20(x%2C%20y)%5Cn%20%20%20%20%20%20%20%20%20%20%20%2010%2C%20%2010%20%20%20%2F%2F%20Point%206%20(x%2C%20y)%5Cn%20%20%20%20%20%20%20%20)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Epolygon(%24points%2C%20function%20(%24draw)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Ebackground('%230000ff')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Eborder(1%2C%20'%23ff0000')%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%2F%2F%E5%9D%90%E6%A0%87%E7%94%BB%E5%9B%BE%EF%BC%8C%E8%83%8C%E6%99%AF%E5%92%8C%E8%BE%B9%E6%A1%86%5Cn%20%20%20%20%20%20%20%20%24img-%3Erectangle(5%2C%205%2C%2050%2C%2050%2C%20function%20(%24draw)%20%7B%2F%2F%E7%94%BB%E7%9F%A9%E5%BD%A2%EF%BC%8C%E5%8F%AF%E9%80%89%E8%83%8C%E6%99%AF%E8%89%B2%EF%BC%88%E9%A2%9C%E8%89%B2%E7%B1%BB%E5%9E%8B%E5%8F%AF%E9%80%89rgba%EF%BC%8C%E5%92%8C%E6%99%AE%E9%80%9A%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Ebackground('rgba(255%2C%20255%2C%20255%2C%200.5)')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24draw-%3Eborder(2%2C%20'%23000')%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Ebackup()%3B%2F%2F%E5%A4%87%E4%BB%BD%E5%9B%BE%E7%89%87%E7%8A%B6%E6%80%81%5Cn%20%20%20%20%20%20%20%20%24img-%3Ereset()%3B%2F%2F%E5%9B%BE%E7%89%87%E6%81%A2%E5%A4%8D%E5%88%B0%E5%A4%87%E4%BB%BD%E7%8A%B6%E6%80%81%5Cn%20%20%20%20%20%20%20%20%24img-%3Eresize(null%2C%20200%2C%20function%20(%24constraint)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24constraint-%3EaspectRatio()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24constraint-%3Eupsize()%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%2F%2F%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E7%9A%84%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%9B%9E%E8%B0%83%E5%8F%AF%E9%80%89%EF%BC%8C%E5%8F%AF%E5%8D%95%E8%AE%BE%E7%BD%AE%E5%AE%BD%EF%BC%8C%E9%AB%98%5Cn%20%20%20%20%20%20%20%20%24img-%3EresizeCanvas(1280%2C%20720%2C%20'center'%2C%20false%2C%20'ff00ff')%3B%2F%2F%E5%9B%BE%E7%89%87%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E7%94%BB%E6%9D%BF%EF%BC%8C%E5%8F%AF%E9%80%89%E4%BD%8D%E7%BD%AE%E6%A8%A1%E5%BC%8F%EF%BC%8C%E7%9B%B8%E5%AF%B9%E6%B7%BB%E5%8A%A0%EF%BC%8C%E8%83%8C%E6%99%AF%E8%89%B2%5Cn%20%20%20%20%20%20%20%20%24img-%3Erotate(-45)%3B%2F%2F%E8%BD%AC%E5%8A%A8%E5%9B%BE%E7%89%87%5Cn%20%20%20%20%20%20%20%20%24img-%3Esharpen(15)%3B%2F%2F%E9%94%90%E5%8C%96%EF%BC%8C0-100%5Cn%20%20%20%20%20%20%20%20%24img-%3Estream('jpg'%2C%2060)%3B%2F%2F%E6%B5%81%E7%BC%96%E7%A0%81%5Cn%20%20%20%20%20%20%20%20%24img-%3Etext('foo'%2C%2050%2C%2050%2C%20function(%24font)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Efile('foo%2Fbar.ttf')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Esize(72)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Ecolor('%23fdf6e3')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Ealign('center')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Evalign('top')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Eangle(30)%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Etext('The%20quick%20brown%20fox%20jumps%20over%20the%20lazy%20dog.'%2C%2050%2C%2050)%3B%5Cn%20%20%20%20%20%20%20%20%24img-%3Etext('foo'%2C%200%2C%200%2C%20function(%24font)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24font-%3Ecolor(array(255%2C%20255%2C%20255%2C%200.5))%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%2F%2F%E6%96%87%E5%AD%97%E4%B9%A6%E5%86%99%5Cn%20%20%20%20%20%20%20%20%24img-%3Ewiden(300%2C%20function%20(%24constraint)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24constraint-%3Eupsize()%3B%5Cn%20%20%20%20%20%20%20%20%7D)%3B%2F%2F%E6%8C%89%E7%85%A7%E5%AE%BD%E7%AD%89%E6%AF%94%EF%BC%8C%E5%8F%AF%E5%9B%9E%E8%B0%83%5Cn%20%20%20%20%20%20%20%20return%20%24img-%3Ewidth()%3B%2F%2F%E8%8E%B7%E5%8F%96%E5%9B%BE%E7%89%87%E5%AE%BD%5Cn%20%20%20%20%20%20%20%20return%20%24img-%3Eresponse('png')%3B%2F%2F%E4%BF%AE%E6%94%B9%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22MtBde%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"d71f57ae\" id=\"d71f57ae\"><span data-lake-id=\"ua8c87f30\" id=\"ua8c87f30\">laravel配置：</span></h3><p data-lake-id=\"uf57d3c8f\" id=\"uf57d3c8f\"><br></p><ol list=\"u153cc8d5\"><li fid=\"uf76ae3a2\" data-lake-id=\"u3cc2719e\" id=\"u3cc2719e\"><span data-lake-id=\"ue9fddafa\" id=\"ue9fddafa\">编辑 config/app.php<br /></span><span data-lake-id=\"uaee6aa26\" id=\"uaee6aa26\">$providers 添加 'Intervention\\Image\\ImageServiceProvider::class'</span></li><li fid=\"uf76ae3a2\" data-lake-id=\"uac692818\" id=\"uac692818\"><br></li></ol><p data-lake-id=\"ufc9d38af\" id=\"ufc9d38af\"><br></p><p data-lake-id=\"u61f35fad\" id=\"u61f35fad\"><span data-lake-id=\"ud898a23d\" id=\"ud898a23d\">$aliases 添加 ''Image' =&gt; Intervention\\Image\\Facades\\Image::class'</span></p><p data-lake-id=\"ueb1023fc\" id=\"ueb1023fc\"><br></p><ol list=\"u85f3353c\" start=\"2\"><li fid=\"ufd547ff9\" data-lake-id=\"u7a485f19\" id=\"u7a485f19\"><span data-lake-id=\"ua08503f0\" id=\"ua08503f0\">默认使用的是 'GD' 库，想修改的话，需要配置驱动，我们来生成配置文件：<br /></span><span data-lake-id=\"ucebaaade\" id=\"ucebaaade\">php artisan vendor:publish --provider=&quot;Intervention\\Image\\ImageServiceProviderLaravel5&quot;</span></li></ol><p data-lake-id=\"ufb5c77a4\" id=\"ufb5c77a4\"><br></p><p data-lake-id=\"ud0792696\" id=\"ud0792696\"><span data-lake-id=\"u3277731d\" id=\"u3277731d\">生成 config/image.php 配置文件</span></p><p data-lake-id=\"ucf4819f3\" id=\"ucf4819f3\"><br></p><ol list=\"u5fe1da0e\" start=\"4\"><li fid=\"uf425370b\" data-lake-id=\"u7704e8f4\" id=\"u7704e8f4\"><span data-lake-id=\"ufcccbfc2\" id=\"ufcccbfc2\">PHP涉及到的配置项：<br /></span><span data-lake-id=\"u5e30d774\" id=\"u5e30d774\">memory_limit - 最大内存限制</span></li><li fid=\"uf425370b\" data-lake-id=\"ud157b444\" id=\"ud157b444\"><br></li></ol><p data-lake-id=\"ucc496928\" id=\"ucc496928\"><br></p><p data-lake-id=\"u4738d7a6\" id=\"u4738d7a6\"><span data-lake-id=\"u66df52b6\" id=\"u66df52b6\">upload_max_filesize - 如果上传图片时，可能修改</span></p><p data-lake-id=\"u74bc079b\" id=\"u74bc079b\"><br></p><p data-lake-id=\"u74a5c3ce\" id=\"u74a5c3ce\"><span data-lake-id=\"ua9289661\" id=\"ua9289661\">－－－－－</span></p><p data-lake-id=\"ub3095c62\" id=\"ub3095c62\"><br></p><p data-lake-id=\"u5257ac67\" id=\"u5257ac67\"><span data-lake-id=\"u92f9c56f\" id=\"u92f9c56f\">其实，可能还有好多<br /></span><span data-lake-id=\"ue153488b\" id=\"ue153488b\">max_execution_time - 最大执行时间</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22IdT4Z%22%7D\"></card><h2 data-lake-id=\"adc45117\" id=\"adc45117\"><span data-lake-id=\"u0b468dac\" id=\"u0b468dac\">基本使用：</span></h2><p data-lake-id=\"u76efcca2\" id=\"u76efcca2\"><br></p><h3 data-lake-id=\"da6e5d8b\" id=\"da6e5d8b\"><span data-lake-id=\"ude8495df\" id=\"ude8495df\">1.使用 Intervention\\Image\\ImageManager - 图片管理类</span></h3><p data-lake-id=\"ued891349\" id=\"ued891349\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20Intervention%5C%5CImage%5C%5CImageManager%3B%5Cn%24manager%20%3D%20new%20ImageManager(array('driver'%20%3D%3E%20'imagick'))%3B%5Cn%24manager-%3Emake('public%2Ffoo.jpg')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%221c00f65f%22%7D\"></card><p data-lake-id=\"u83226ef1\" id=\"u83226ef1\"><br></p><h3 data-lake-id=\"3260a481\" id=\"3260a481\"><span data-lake-id=\"u0b951cda\" id=\"u0b951cda\">2.使用 ImageManager 的静态版本</span></h3><p data-lake-id=\"ua4dcfb31\" id=\"ua4dcfb31\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20Intervention%5C%5CImage%5C%5CImageManagerStatic%20as%20Image%3B%5CnImage%3A%3Aconfigure(array('driver'%20%3D%3E%20'imagick'))%3B%5Ct%2F%2Fapi%E4%B8%AD%E6%9C%AA%E5%87%BA%E7%8E%B0%E6%AD%A4%E6%96%B9%E6%B3%95%5CnImage%3A%3Amake('public%2Ffoo.jpg')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%226aa04a9f%22%7D\"></card><p data-lake-id=\"u92b63e6f\" id=\"u92b63e6f\"><br></p><h2 data-lake-id=\"ef448ac7\" id=\"ef448ac7\"><span data-lake-id=\"ud2e87a9b\" id=\"ud2e87a9b\">HTTP响应：</span></h2><p data-lake-id=\"u2022c03f\" id=\"u2022c03f\"><br></p><h3 data-lake-id=\"672e8df7\" id=\"672e8df7\"><span data-lake-id=\"u5a81703f\" id=\"u5a81703f\">1.将图像直接返回到用户浏览器的最简单的方法是输出response（）方法。</span></h3><p data-lake-id=\"ud9556690\" id=\"ud9556690\"><br></p><p data-lake-id=\"u93c654aa\" id=\"u93c654aa\"><span data-lake-id=\"u87a36871\" id=\"u87a36871\">它将根据当前图像自动发送HTTP头，并输出编码的图像数据。</span></p><p data-lake-id=\"u9a0edb67\" id=\"u9a0edb67\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600%2C%20'%23ff0000')%3B%5Cnecho%20%24img-%3Eresponse('jpg'%2C%2070)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%229a83857f%22%7D\"></card><p data-lake-id=\"u496fd04a\" id=\"u496fd04a\"><br></p><h3 data-lake-id=\"c631db98\" id=\"c631db98\"><span data-lake-id=\"u9894a1b4\" id=\"u9894a1b4\">2.手动发送HTTP响应</span></h3><p data-lake-id=\"u12641445\" id=\"u12641445\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600%2C%20'%23ff0000')%3B%5Cnheader('Content-Type%3A%20image%2Fpng')%3B%5Cnecho%20%24img-%3Eencode('png')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22b284fa63%22%7D\"></card><p data-lake-id=\"uf1c4b9b8\" id=\"uf1c4b9b8\"><br></p><p data-lake-id=\"ua8b01559\" id=\"ua8b01559\"><strong><span data-lake-id=\"uc45d9478\" id=\"uc45d9478\">在laravel中，同上面的2种方法一样：</span></strong></p><p data-lake-id=\"ub99ee66a\" id=\"ub99ee66a\"><br></p><h3 data-lake-id=\"3.\" id=\"3.\"><span data-lake-id=\"u6871c2bb\" id=\"u6871c2bb\">3.</span></h3><p data-lake-id=\"u38ec21ab\" id=\"u38ec21ab\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600%2C%20'%23ff0000')%3B%5Cnreturn%20%24img-%3Eresponse()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%225dd12db7%22%7D\"></card><p data-lake-id=\"ufdeaa069\" id=\"ufdeaa069\"><br></p><h3 data-lake-id=\"4.\" id=\"4.\"><span data-lake-id=\"u033fa0f8\" id=\"u033fa0f8\">4.</span></h3><p data-lake-id=\"u5b4877a7\" id=\"u5b4877a7\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600%2C%20'%23ff0000')%3B%5Cn%24response%20%3D%20Response%3A%3Amake(%24img-%3Eencode('png'))%3B%5Cn%24response-%3Eheader('Content-Type'%2C%20'image%2Fpng')%3B%5Cnreturn%20%24response%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2282ef6c91%22%7D\"></card><p data-lake-id=\"u2f5532e7\" id=\"u2f5532e7\"><br></p><h2 data-lake-id=\"46d37e50\" id=\"46d37e50\"><span data-lake-id=\"u2c0a5f5c\" id=\"u2c0a5f5c\">图片上传：</span></h2><p data-lake-id=\"u2a405d7f\" id=\"u2a405d7f\"><br></p><h3 data-lake-id=\"f2552d3b\" id=\"f2552d3b\"><span data-lake-id=\"uab8bea39\" id=\"uab8bea39\">1.直接从 $_FILES 中，获取 'tmp' 临时图片数据</span></h3><p data-lake-id=\"u098d1e64\" id=\"u098d1e64\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Amake(%24_FILES%5B'image'%5D%5B'tmp_name'%5D)%3B%2F%2F%20Image%3A%3Amake()%20%E6%94%AF%E6%8C%81%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%5Cn%24img-%3Efit(300%2C%20200)%3B%5Cn%24img-%3Esave('public%2Fbar.jpg')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2263c21459%22%7D\"></card><p data-lake-id=\"u658c3ad0\" id=\"u658c3ad0\"><br></p><h3 data-lake-id=\"2f651434\" id=\"2f651434\"><span data-lake-id=\"u657ba438\" id=\"u657ba438\">2.在laravel中处理图片上传</span></h3><p data-lake-id=\"u82eafd83\" id=\"u82eafd83\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22Image%3A%3Amake(Input%3A%3Afile('photo'))%3B%2F%2F%20Input%3A%3Afile()%20%E6%9D%A5%E8%8E%B7%E5%8F%96%24_FILES%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22016d99f8%22%7D\"></card><p data-lake-id=\"u7c967dc7\" id=\"u7c967dc7\"><br></p><h2 data-lake-id=\"5e6dec5e\" id=\"5e6dec5e\"><span data-lake-id=\"u4873e40e\" id=\"u4873e40e\">图片过滤器：</span></h2><p data-lake-id=\"u57829b9d\" id=\"u57829b9d\"><br></p><p data-lake-id=\"u5e5d44a3\" id=\"u5e5d44a3\"><span data-lake-id=\"u4b34d033\" id=\"u4b34d033\">图片过滤器，给了我们非常有用的方式，将多个图像转换命令集合在一个专用类中。(可将多个图像处理步骤，封装成一个过滤器)。<br /></span><span data-lake-id=\"u978fdb9f\" id=\"u978fdb9f\">Intervention/image，提供了基本接口(Intervention\\Image\\Filters\\FilterInterface)，所有的过滤器都需要实现它。<br /></span><span data-lake-id=\"u017e8eed\" id=\"u017e8eed\">调用过滤器：</span></p><p data-lake-id=\"u9d79bbd4\" id=\"u9d79bbd4\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Amake('foo.jpg')%3B%5Cn%24img-%3Efilter(new%20DemoFilter(5))%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22ad0fb1a6%22%7D\"></card><p data-lake-id=\"udebc700b\" id=\"udebc700b\"><br></p><p data-lake-id=\"u2264fbd4\" id=\"u2264fbd4\"><span data-lake-id=\"ud93f1115\" id=\"ud93f1115\">定义过滤器：</span></p><p data-lake-id=\"u23c6d115\" id=\"u23c6d115\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22src%2FIntervention%2FImage%2FFilters%2FDemoFilter.php%5Cn%5Cn%3C%3Fphp%5Cnnamespace%20Intervention%5C%5CImage%5C%5CFilters%3B%5Cn%5Cn%5Ctclass%20DemoFilter%20implements%20FilterInterface%5Cn%5Ct%7B%5Cn%5Ct%20%20%20%20%2F**%5Cn%5Ct%20%20%20%20%20*%20Default%20size%20of%20filter%20effects%5Cn%5Ct%20%20%20%20%20*%2F%5Cn%5Ct%20%20%20%20const%20DEFAULT_SIZE%20%3D%2010%3B%5Cn%5Cn%5Ct%20%20%20%20%2F**%5Cn%5Ct%20%20%20%20%20*%20Size%20of%20filter%20effects%5Cn%5Ct%20%20%20%20%20*%5Cn%5Ct%20%20%20%20%20*%20%40var%20integer%5Cn%5Ct%20%20%20%20%20*%2F%5Cn%5Ct%20%20%20%20private%20%24size%3B%5Cn%5Cn%5Ct%20%20%20%20%2F**%5Cn%5Ct%20%20%20%20%20*%20Creates%20new%20instance%20of%20filter%5Cn%5Ct%20%20%20%20%20*%5Cn%5Ct%20%20%20%20%20*%20%40param%20integer%20%24size%5Cn%5Ct%20%20%20%20%20*%2F%5Cn%5Ct%20%20%20%20public%20function%20__construct(%24size%20%3D%20null)%5Cn%5Ct%20%20%20%20%7B%5Cn%5Ct%20%20%20%20%20%20%20%20%24this-%3Esize%20%3D%20is_numeric(%24size)%20%3F%20intval(%24size)%20%3A%20self%3A%3ADEFAULT_SIZE%3B%5Cn%5Ct%20%20%20%20%7D%5Cn%5Cn%5Ct%20%20%20%20%2F**%5Cn%5Ct%20%20%20%20%20*%20Applies%20filter%20effects%20to%20given%20image%5Cn%5Ct%20%20%20%20%20*%5Cn%5Ct%20%20%20%20%20*%20%40param%20%20Intervention%5C%5CImage%5C%5CImage%20%24image%5Cn%5Ct%20%20%20%20%20*%20%40return%20Intervention%5C%5CImage%5C%5CImage%5Cn%5Ct%20%20%20%20%20*%2F%5Cn%5Ct%20%20%20%20public%20function%20applyFilter(%5C%5CIntervention%5C%5CImage%5C%5CImage%20%24image)%5Cn%5Ct%20%20%20%20%7B%5Cn%5Ct%20%20%20%20%20%20%20%20%24image-%3Epixelate(%24this-%3Esize)%3B%5Cn%5Ct%20%20%20%20%20%20%20%20%24image-%3Egreyscale()%3B%5Cn%5Cn%5Ct%20%20%20%20%20%20%20%20return%20%24image%3B%5Cn%5Ct%20%20%20%20%7D%5Cn%5Ct%7D%5Cn%3F%3E%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2247b261e8%22%7D\"></card><p data-lake-id=\"ub571dc14\" id=\"ub571dc14\"><br></p><h2 data-lake-id=\"5c856fc3\" id=\"5c856fc3\"><span data-lake-id=\"ucd14cdfa\" id=\"ucd14cdfa\">图像缓存：</span></h2><p data-lake-id=\"ud9e0b782\" id=\"ud9e0b782\"><br></p><p data-lake-id=\"u424010f1\" id=\"u424010f1\"><span data-lake-id=\"u6e175b12\" id=\"u6e175b12\">图像缓存包，扩展了缓存图像的能力。</span></p><p data-lake-id=\"u1b2ef7f4\" id=\"u1b2ef7f4\"><br></p><p data-lake-id=\"u8f3d6f0e\" id=\"u8f3d6f0e\"><span data-lake-id=\"uebd7d74a\" id=\"uebd7d74a\">缓存包使用laravel的 'Illuminate/Cache' 包。基于laravel的缓存配置，可以使用 '文件系统'、'数据库'、'Memcached'或'Redis' 来作为临时缓冲存储</span></p><p data-lake-id=\"u410892c8\" id=\"u410892c8\"><br></p><p data-lake-id=\"u5e3f8457\" id=\"u5e3f8457\"><span data-lake-id=\"u740a9acb\" id=\"u740a9acb\">原理很简单。一旦安装了缓存包，就可以调用静态缓存方法。每个对 Intervention/Image 类的方法调用，都会被缓存接口捕获和检查。如果这个特定的操作序列意境生成过，将直接从缓存中获取数据，而不是重新执行一遍资源密集型的GD操作</span></p><p data-lake-id=\"u33d3d5ef\" id=\"u33d3d5ef\"><br></p><h3 data-lake-id=\"1d32bcac-1\" id=\"1d32bcac-1\"><span data-lake-id=\"uad6441e6\" id=\"uad6441e6\">安装：</span></h3><p data-lake-id=\"u9c77298f\" id=\"u9c77298f\"><br></p><blockquote data-lake-id=\"u872fcab3\" id=\"u872fcab3\"><p data-lake-id=\"u740ae6f4\" id=\"u740ae6f4\"><span data-lake-id=\"ufe84bdac\" id=\"ufe84bdac\">composer require intervention/imagecache</span></p></blockquote><p data-lake-id=\"u35390d65\" id=\"u35390d65\"><br></p><h3 data-lake-id=\"08b8b8b4\" id=\"08b8b8b4\"><span data-lake-id=\"uf6b06365\" id=\"uf6b06365\">使用方式：</span></h3><p data-lake-id=\"u3682dfa3\" id=\"u3682dfa3\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24img%20%3D%20Image%3A%3Acache(function(%24image)%7B%5Cn%24image-%3Emake('public%2Ffoo.jpg')-%3Eresize(300%2C%20200)-%3Egreyscale()%3B%5Cn%7D)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2292794179%22%7D\"></card><p data-lake-id=\"u0d8b1189\" id=\"u0d8b1189\"><br></p><h2 data-lake-id=\"24cf4861\" id=\"24cf4861\"><span data-lake-id=\"u7beecff1\" id=\"u7beecff1\">基于URL的图像操作：</span></h2><p data-lake-id=\"u0bd1ff5e\" id=\"u0bd1ff5e\"><br></p><p data-lake-id=\"u3272837f\" id=\"u3272837f\"><span data-lake-id=\"u9f239f11\" id=\"u9f239f11\">在Laravel应用程序中，可以使用URL来动态操作图像。 URL图像的操作版本将存储在缓存中，并且将直接加载而无需资源密集型GD操作。</span></p><p data-lake-id=\"udbad237b\" id=\"udbad237b\"><br></p><p data-lake-id=\"u59b7883a\" id=\"u59b7883a\"><span data-lake-id=\"u23e972bf\" id=\"u23e972bf\">图像必须上传一次。当通过HTTP请求方式访问文件，所有操作(例如：调整大小、裁剪)将稍后处理，例如：<br /></span><a href=\"http://yourhost.com/%7Broute-name%7D/%7Btemplate-name%7D/%7Bfile-name%7D\" target=\"_blank\" data-lake-id=\"uaf6844bd\" id=\"uaf6844bd\"><span data-lake-id=\"u155e8d9c\" id=\"u155e8d9c\">http://yourhost.com/{route-name}/{template-name}/{file-name}</span></a></p><p data-lake-id=\"ucfd8c645\" id=\"ucfd8c645\"><br></p><h3 data-lake-id=\"506a1712\" id=\"506a1712\"><span data-lake-id=\"uf4f78901\" id=\"uf4f78901\">1.安装：</span></h3><p data-lake-id=\"ude7bebb8\" id=\"ude7bebb8\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22composer%20require%20intervention%2Fimage%5Cncomposer%20require%20intervention%2Fimagecache%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2220d4de5d%22%7D\"></card><p data-lake-id=\"u8d390532\" id=\"u8d390532\"><br></p><h3 data-lake-id=\"0ff6cbc8\" id=\"0ff6cbc8\"><span data-lake-id=\"uaacba286\" id=\"uaacba286\">2.生成配置文件</span></h3><p data-lake-id=\"u3f93e2cd\" id=\"u3f93e2cd\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22php%20artisan%20vendor%3Apublish%5Cn%E7%94%9F%E6%88%90%20config%2Fimagecache.php%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22bc711ec5%22%7D\"></card><p data-lake-id=\"ub3d468d1\" id=\"ub3d468d1\"><br></p><h3 data-lake-id=\"48ce34ad\" id=\"48ce34ad\"><span data-lake-id=\"uca783ee9\" id=\"uca783ee9\">3.启用操作</span></h3><p data-lake-id=\"u877255a8\" id=\"u877255a8\"><br></p><p data-lake-id=\"u59f73f58\" id=\"u59f73f58\"><span data-lake-id=\"u518193da\" id=\"u518193da\">默认情况下，基于URL的图像操作是关闭的。在imagecache.php配置文件中，来指定 'route' 配置项</span></p><p data-lake-id=\"u65ddb9dd\" id=\"u65ddb9dd\"><br></p><p data-lake-id=\"u2ab64c6b\" id=\"u2ab64c6b\"><span data-lake-id=\"u7862adc5\" id=\"u7862adc5\">'route' =&gt; 'imagecache'</span></p><p data-lake-id=\"u700f8751\" id=\"u700f8751\"><br></p><p data-lake-id=\"u19845293\" id=\"u19845293\"><span data-lake-id=\"u7f6bdf34\" id=\"u7f6bdf34\">配置好route后，可以通过artisan命令，列出所有已注册的路有，并检查新路有是否正确列出：</span></p><p data-lake-id=\"u158865c3\" id=\"u158865c3\"><br></p><p data-lake-id=\"ucaf479be\" id=\"ucaf479be\"><span data-lake-id=\"u3e77b78e\" id=\"u3e77b78e\">php artisan route:list</span></p><p data-lake-id=\"u901256b0\" id=\"u901256b0\"><br></p><h3 data-lake-id=\"260d9642\" id=\"260d9642\"><span data-lake-id=\"uad177945\" id=\"uad177945\">4.定义资源目录</span></h3><p data-lake-id=\"uc6f836e4\" id=\"uc6f836e4\"><br></p><p data-lake-id=\"udbe15962\" id=\"udbe15962\"><span data-lake-id=\"ude49178c\" id=\"ude49178c\">告诉PHP，在哪里搜索图片。我们可以定义自己喜欢的任意数量的目录。例如：定义应用程序的所有上传目录。应用程序将在目录中搜索在路有中提交的文件。</span></p><p data-lake-id=\"ud27b8013\" id=\"ud27b8013\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22'paths'%20%3D%3E%20array(%5Cn'storage%2Fuploads%2Fimages'%2C%5Cnpublic_path('img')%2C%5Cn)%2C%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22ec627e03%22%7D\"></card><p data-lake-id=\"u069cb014\" id=\"u069cb014\"><br></p><p data-lake-id=\"u7092d087\" id=\"u7092d087\"><span data-lake-id=\"uc8b713f6\" id=\"uc8b713f6\">在这些目录中保存具有唯一文件名的图像文件是有意义的。否则，包将返回首先找到的图像。</span></p><p data-lake-id=\"uf5113a87\" id=\"uf5113a87\"><br></p><p data-lake-id=\"u77c95d4d\" id=\"u77c95d4d\"><span data-lake-id=\"ubd0cd0a9\" id=\"ubd0cd0a9\">注意：</span></p><p data-lake-id=\"u9e84530c\" id=\"u9e84530c\"><br></p><p data-lake-id=\"u24af66f9\" id=\"u24af66f9\"><span data-lake-id=\"ud44b0373\" id=\"ud44b0373\">出于安全原因，路由仅接受由以下字符组成的文件名：</span></p><p data-lake-id=\"u7bb98d8b\" id=\"u7bb98d8b\"><br></p><p data-lake-id=\"u710ccf68\" id=\"u710ccf68\"><span data-lake-id=\"u651c2ff4\" id=\"u651c2ff4\">a-zA-Z0-9-_/.</span></p><p data-lake-id=\"u9b27160f\" id=\"u9b27160f\"><br></p><h3 data-lake-id=\"2ad30608\" id=\"2ad30608\"><span data-lake-id=\"u85811f03\" id=\"u85811f03\">5.模板</span></h3><p data-lake-id=\"u141ed247\" id=\"u141ed247\"><br></p><p data-lake-id=\"u097f07b0\" id=\"u097f07b0\"><span data-lake-id=\"ucca8838a\" id=\"ucca8838a\">模板的定义，就是过滤器类的名称，可以在其中定义任意操作命令(之前介绍过过滤器)。系统自带3个基本模板：</span></p><p data-lake-id=\"u56a2a389\" id=\"u56a2a389\"><br></p><ul list=\"u7da317a4\"><li fid=\"ue2ce4833\" data-lake-id=\"ua3da023c\" id=\"ua3da023c\"><span data-lake-id=\"ue64aa386\" id=\"ue64aa386\">small - 120x90</span></li><li fid=\"ue2ce4833\" data-lake-id=\"udc93c1a5\" id=\"udc93c1a5\"><span data-lake-id=\"u1df9d8c3\" id=\"u1df9d8c3\">medium - 240x180</span></li><li fid=\"ue2ce4833\" data-lake-id=\"u517f6009\" id=\"u517f6009\"><span data-lake-id=\"u343ca2aa\" id=\"u343ca2aa\">large - 480x360<br /></span><span data-lake-id=\"ue36a0368\" id=\"ue36a0368\">我们可以在配置文件中，自由配置可用的模板：</span></li></ul><p data-lake-id=\"u5cfc3b17\" id=\"u5cfc3b17\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22'templates'%20%3D%3E%20array(%5Cn'small'%20%3D%3E%20'Intervention%5C%5CImage%5C%5CTemplates%5C%5CSmall'%2C%5Cn'medium'%20%3D%3E%20'Intervention%5C%5CImage%5C%5CTemplates%5C%5CMedium'%2C%5Cn'large'%20%3D%3E%20'Intervention%5C%5CImage%5C%5CTemplates%5C%5CLarge'%2C%5Cn)%2C%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2278d6b871%22%7D\"></card><p data-lake-id=\"uaa05a4ed\" id=\"uaa05a4ed\"><br></p><h4 data-lake-id=\"2837a280\" id=\"2837a280\"><span data-lake-id=\"ucf25dae0\" id=\"ucf25dae0\">访问原始图片：</span></h4><p data-lake-id=\"ueed86b79\" id=\"ueed86b79\"><br></p><p data-lake-id=\"ub1947721\" id=\"ub1947721\"><span data-lake-id=\"u2436f663\" id=\"u2436f663\">original - 使用原始图像文件，发送HTTP响应</span></p><p data-lake-id=\"u4bf6e09d\" id=\"u4bf6e09d\"><br></p><p data-lake-id=\"uddd8cc31\" id=\"uddd8cc31\"><span data-lake-id=\"uac926a0d\" id=\"uac926a0d\">download - 发送HTTP响应并强制浏览器下载原始图像文件，而不是显示它。</span></p><p data-lake-id=\"u1eb6ea2c\" id=\"u1eb6ea2c\"><br></p><p data-lake-id=\"u196c8764\" id=\"u196c8764\"><span data-lake-id=\"u00aa4599\" id=\"u00aa4599\">例如：</span></p><p data-lake-id=\"u1f6c4ab7\" id=\"u1f6c4ab7\"><br></p><p data-lake-id=\"uddf8d34f\" id=\"uddf8d34f\"><a href=\"http://yourhost.com/%7Broute-name%7D/original/%7Bfile-name%7D\" target=\"_blank\" data-lake-id=\"uff11020f\" id=\"uff11020f\"><span data-lake-id=\"u46b80fd1\" id=\"u46b80fd1\">http://yourhost.com/{route-name}/original/{file-name}</span></a></p><p data-lake-id=\"ua3c71bd2\" id=\"ua3c71bd2\"><br></p><h3 data-lake-id=\"6f6a414d\" id=\"6f6a414d\"><span data-lake-id=\"uf6a87eaf\" id=\"uf6a87eaf\">6.图像缓存的生命周期：</span></h3><p data-lake-id=\"udec23afb\" id=\"udec23afb\"><br></p><p data-lake-id=\"ud4b48e9c\" id=\"ud4b48e9c\"><span data-lake-id=\"uba9d3f0b\" id=\"uba9d3f0b\">一旦第一次访问了URL，搜索图片，并根据模板，编辑图像，并存储到缓存中。 所以下次访问URL时，所有的GD操作都被绕过，文件将直接来自缓存</span></p><p data-lake-id=\"u165d29a4\" id=\"u165d29a4\"><br></p><p data-lake-id=\"udc9d0362\" id=\"udc9d0362\"><span data-lake-id=\"u005902c2\" id=\"u005902c2\">'lifetime' =&gt; 43200,        // 单位是 'minutes-分钟'<br /></span><span data-lake-id=\"ud6c5c59d\" id=\"ud6c5c59d\">支持的格式：</span></p><p data-lake-id=\"ue6c02ae4\" id=\"ue6c02ae4\"><br></p><p data-lake-id=\"ubbf94059\" id=\"ubbf94059\"><span data-lake-id=\"uc84ad227\" id=\"uc84ad227\">图片格式：</span></p><p data-lake-id=\"u7d85c6b2\" id=\"u7d85c6b2\"><br></p><p data-lake-id=\"ua80f7488\" id=\"ua80f7488\"><span data-lake-id=\"ue39e6aa5\" id=\"ue39e6aa5\">GD库：jpeg, png, gif</span></p><p data-lake-id=\"u1070cbf0\" id=\"u1070cbf0\"><br></p><p data-lake-id=\"ub90bcd6a\" id=\"ub90bcd6a\"><span data-lake-id=\"u49575354\" id=\"u49575354\">Imagick库：jpeg, png, gif, tif, bmp, ico, psd</span></p><p data-lake-id=\"ub5686fa3\" id=\"ub5686fa3\"><br></p><p data-lake-id=\"u503605a2\" id=\"u503605a2\"><span data-lake-id=\"u832c2b47\" id=\"u832c2b47\">颜色格式：</span></p><p data-lake-id=\"ud6f4daa3\" id=\"ud6f4daa3\"><br></p><p data-lake-id=\"u46e92d5a\" id=\"u46e92d5a\"><span data-lake-id=\"u2e086ec9\" id=\"u2e086ec9\">整数</span></p><p data-lake-id=\"ub01ce4a1\" id=\"ub01ce4a1\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%24color%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3EpickColor(10%2C%2010)%3B%20%20%20%20%2F%2F%20pickColor()%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AF%E6%95%B4%E6%95%B0%E5%BD%A2%E5%BC%8F%E7%9A%84RGB%E5%80%BC%5Cn%24img-%3Efill(%24color)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2272cef3bb%22%7D\"></card><p data-lake-id=\"u7e3b3902\" id=\"u7e3b3902\"><br></p><p data-lake-id=\"u88be15f9\" id=\"u88be15f9\"><span data-lake-id=\"u1ef9965e\" id=\"u1ef9965e\">数组</span></p><p data-lake-id=\"u7d48ee95\" id=\"u7d48ee95\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%24img-%3Efill(array(255%2C%200%2C%200))%3B%5Cn%24img-%3Efill(array(255%2C%200%2C%200%2C%200.5))%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2233f2dcff%22%7D\"></card><p data-lake-id=\"u8813d65c\" id=\"u8813d65c\"><br></p><p data-lake-id=\"u6b35e538\" id=\"u6b35e538\"><span data-lake-id=\"u95fbeee0\" id=\"u95fbeee0\">16进制</span></p><p data-lake-id=\"u5b273a88\" id=\"u5b273a88\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%24img-%3Efill('%23000000')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2299c88cce%22%7D\"></card><p data-lake-id=\"ubdceae8a\" id=\"ubdceae8a\"><br></p><p data-lake-id=\"u3a5ea298\" id=\"u3a5ea298\"><span data-lake-id=\"ue73ece17\" id=\"ue73ece17\">RGB和RGBA字符串格式</span></p><p data-lake-id=\"ud4b618cd\" id=\"ud4b618cd\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%24img-%3Efill('rgb(255%2C%200%2C%200)')%3B%5Cn%24img-%3Efill('rgb(255%2C%200%2C%200%2C%200.5)')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22a00290bd%22%7D\"></card><p data-lake-id=\"u1b19a391\" id=\"u1b19a391\"><br></p><p data-lake-id=\"u6395f854\" id=\"u6395f854\"><span data-lake-id=\"u6b976dcc\" id=\"u6b976dcc\">创建图像：<br /></span><span data-lake-id=\"u4855388e\" id=\"u4855388e\">1.canvas($width, $height [, mixed $bgcolor]) - 创建一个空的画布</span></p><p data-lake-id=\"uf640de7e\" id=\"uf640de7e\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E3%80%81%E9%AB%98%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E7%A9%BA%E7%9A%84%E5%9B%BE%E5%83%8F%E5%AE%9E%E4%BE%8B%E3%80%82%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9%E6%80%A7%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E8%83%8C%E6%99%AF%E8%89%B2%E3%80%82%E9%BB%98%E8%AE%A4%E7%94%BB%E5%B8%83%E8%83%8C%E6%99%AF%E6%98%AF%E9%80%8F%E6%98%8E(transparent)%E7%9A%84%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600)%3B%5Cn%5Ct%24img%20%3D%20Image%3A%3Acanvas(32%2C%2032%2C%20'%23ff0000')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%223c06211b%22%7D\"></card><p data-lake-id=\"ue7abedfb\" id=\"ue7abedfb\"><br></p><p data-lake-id=\"udb43c2bc\" id=\"udb43c2bc\"><span data-lake-id=\"ubc5a6e45\" id=\"ubc5a6e45\">2.make($source) - 从给定的资料中读取图像</span></p><p data-lake-id=\"uadc2c877\" id=\"uadc2c877\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%8E%E8%B5%84%E6%BA%90%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E5%9B%BE%E5%83%8F%E5%AE%9E%E4%BE%8B%E7%9A%84%E9%80%9A%E7%94%A8%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E3%80%82%E8%AF%A5%E6%96%B9%E6%B3%95%E9%AB%98%E5%BA%A6%E5%8F%AF%E5%8F%98%EF%BC%8C%E5%8F%AF%E8%AF%BB%E5%8F%96%E4%B8%8B%E9%9D%A2%E5%88%97%E5%87%BA%E7%9A%84%E6%89%80%E6%9C%89%E8%BE%93%E5%85%A5%E7%B1%BB%E5%9E%8B%3A%5Cn%5Ctstring%20-%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%5Cn%5Ctstring%20-%20%E5%9B%BE%E7%89%87%E7%9A%84URL%E5%9C%B0%E5%9D%80(allow_url_fopen%E5%BF%85%E9%A1%BB%E5%90%AF%E7%94%A8)%5Cn%5Ctstring%20-%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%5Cn%5Ctstring%20-%20data-url%E7%BC%96%E7%A0%81%E7%9A%84%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%5Cn%5Ctstring%20-%20base64%E7%BC%96%E7%A0%81%E7%9A%84%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%5Cn%5Ctresource%20-%20gd%E7%B1%BB%E5%9E%8B%E7%9A%84PHP%E8%B5%84%E6%BA%90(%E5%BD%93%E4%BD%BF%E7%94%A8GD%E5%BA%93)%5Cn%5Ctobject%20-%20Imagick%E5%AE%9E%E4%BE%8B(%E5%BD%93%E4%BD%BF%E7%94%A8Imagick%E5%BA%93)%5Cn%5Ctobject%20-%20Intervention%5C%5CImage%5C%5CImage%20%E5%AE%9E%E4%BE%8B%5Cn%5Ctobject%20-%20SplFileInfo%20instance%20(To%20handle%20Laravel%20file%20uploads%20via%20Symfony%5C%5CComponent%5C%5CHttpFoundation%5C%5CFile%5C%5CUploadedFile)%20-%20laravel%E6%A1%86%E6%9E%B6%E8%87%AA%E5%B8%A6%E7%9A%84%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E5%AE%9E%E4%BE%8B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2221d09428%22%7D\"></card><p data-lake-id=\"u4ae030e7\" id=\"u4ae030e7\"><br></p><p data-lake-id=\"u05ed3257\" id=\"u05ed3257\"><span data-lake-id=\"uec10f56a\" id=\"uec10f56a\">销毁图像：<br /></span><span data-lake-id=\"u005fd757\" id=\"u005fd757\">1.destroy() - 销毁图像</span></p><p data-lake-id=\"u8f41f419\" id=\"u8f41f419\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8PHP%E8%84%9A%E6%9C%AC%E7%BB%93%E6%9D%9F%E5%89%8D%EF%BC%8C%E9%87%8A%E6%94%BE%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E5%AE%9E%E4%BE%8B%E7%9B%B8%E5%85%B3%E7%9A%84%E5%86%85%E5%AD%98%E3%80%82%E9%80%9A%E5%B8%B8%E8%B5%84%E6%BA%90%E4%BC%9A%E5%9C%A8%E8%84%9A%E6%9C%AC%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E8%87%AA%E5%8A%A8%E9%87%8A%E6%94%BE%E3%80%82%5Cn%E5%BD%93%E7%84%B6%EF%BC%8C%E8%AF%A5%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%90%8E%EF%BC%8C%E5%9B%BE%E5%83%8F%E5%AE%9E%E4%BE%8B%E4%B8%8D%E5%86%8D%E5%8F%AF%E7%94%A8%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Eresize(320%2C%20240)%3B%5Cn%5Ct%24img-%3Esave('public%2Fsmall.jpg')%3B%5Cn%5Ct%24img-%3Edestroy()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%227242bd54%22%7D\"></card><p data-lake-id=\"ub3e5a010\" id=\"ub3e5a010\"><br></p><p data-lake-id=\"u50f403de\" id=\"u50f403de\"><span data-lake-id=\"u8533c263\" id=\"u8533c263\">图像输出：<br /></span><span data-lake-id=\"u8a5573a6\" id=\"u8a5573a6\">1.response([string $format [, integer $quality]]) - 直接作为HTTP响应</span></p><p data-lake-id=\"uc88fe4c2\" id=\"uc88fe4c2\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%A5%E6%8C%87%E5%AE%9A%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%92%8C%E5%9B%BE%E5%83%8F%E8%B4%A8%E9%87%8F%EF%BC%8C%E6%9D%A5%E5%8F%91%E9%80%81%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%EF%BC%8C%E4%BD%9C%E4%B8%BAHTTP%E5%93%8D%E5%BA%94%5Cn%24format%20-%20%E5%8F%AF%E4%BB%A5%E6%98%AF%3Ajpg%2Cpng%2Cgif%2Ctif%2Cbmp%E3%80%82%E9%BB%98%E8%AE%A4%E6%98%AFjpeg%5Cn%24quality%20-%20%E4%BB%8E0-100.%E9%BB%98%E8%AE%A4%E6%98%AF90%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22808b4fa2%22%7D\"></card><p data-lake-id=\"u2276d83b\" id=\"u2276d83b\"><br></p><p data-lake-id=\"u659e428d\" id=\"u659e428d\"><span data-lake-id=\"u01760f57\" id=\"u01760f57\">2.save([string $path [, int $quality]]) - 保存图像到指定路径(未指定，则表示覆盖原图)</span></p><p data-lake-id=\"u6786d365\" id=\"u6786d365\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E5%9B%BE%E5%83%8F%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81%E4%BF%9D%E5%AD%98%E5%88%B0%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%B8%AD%E3%80%82%E5%8F%AF%E6%8C%87%E5%AE%9A%E8%B7%AF%E5%BE%84%E5%92%8C%E5%9B%BE%E5%83%8F%E8%B4%A8%E9%87%8F%E3%80%82%5Cn%E4%BF%9D%E5%AD%98%E5%88%B0%E5%9B%BE%E5%83%8F%E7%B1%BB%E5%9E%8B%E9%80%9A%E8%BF%87%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E6%9D%A5%E5%AE%9A%E4%B9%89%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%9Afoo.jpg%20%E5%9B%BE%E7%89%87%E5%B0%86%E8%A2%AB%E4%BF%9D%E5%AD%98%E4%B8%BA%20'JPG'%20%E6%A0%BC%E5%BC%8F%E3%80%82%E5%A6%82%E6%9E%9C%E6%9C%AA%E6%8C%87%E5%AE%9A%E5%8F%AF%E7%94%A8%E5%90%8E%E7%BC%80%EF%BC%8C%E9%A6%96%E5%85%88%E5%B0%9D%E8%AF%95%E5%9B%BE%E5%83%8F%E7%9A%84MIME%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%B0%86%E8%A2%AB%E7%BC%96%E7%A0%81%E4%B8%BA%20'JPEG'%5Cn%E6%AD%A4%E5%A4%96%EF%BC%8C%E5%9B%BE%E5%83%8F%E5%B0%86%E5%A7%8B%E7%BB%88%E4%BB%A5RGB%E9%A2%9C%E8%89%B2%E6%A8%A1%E5%BC%8F%E4%BF%9D%E5%AD%98%EF%BC%8C%E8%80%8C%E6%B2%A1%E6%9C%89%E5%B5%8C%E5%85%A5%E7%9A%84%E9%A2%9C%E8%89%B2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82%5Cn%24path%20-%20%E6%8C%87%E5%AE%9A%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E7%9A%84%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E3%80%82%E5%A6%82%E6%9E%9C%E5%9B%BE%E5%83%8F%E6%98%AF%E4%BB%8E%E4%B8%80%E4%B8%AA%E5%AD%98%E5%9C%A8%E7%9A%84%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%88%9B%E5%BB%BA%E7%9A%84%EF%BC%8C%E5%90%8C%E6%97%B6%E6%88%91%E4%BB%AC%E6%9C%AA%E6%8C%87%E5%AE%9A%20%24path%EF%BC%8C%E5%B0%86%E4%BC%9A%E5%B0%9D%E8%AF%95%E8%A6%86%E7%9B%96%E8%AF%A5%E8%B7%AF%E5%BE%84%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Eresize(300%2C%20200)%3B%5Cn%5Ct%24img-%3Esave('public%2Fbar.png'%2C%2060)%3B%5Cn%5Ct%24img-%3Esave('public%2Fbar.jpg')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2242ef49e1%22%7D\"></card><p data-lake-id=\"u8b5a58ae\" id=\"u8b5a58ae\"><br></p><p data-lake-id=\"u43cdcc6f\" id=\"u43cdcc6f\"><span data-lake-id=\"ubba902b8\" id=\"ubba902b8\">3.stream([mixed $format [, int $quality]]) - 图像流</span></p><p data-lake-id=\"u8e295fac\" id=\"u8e295fac\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%A5%E7%BB%99%E5%AE%9A%E6%A0%BC%E5%BC%8F%E5%92%8C%E7%BB%99%E5%AE%9A%E5%9B%BE%E5%83%8F%E8%B4%A8%E9%87%8F%EF%BC%8C%E5%AF%B9%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E8%BF%9B%E8%A1%8C%E7%BC%96%E7%A0%81%EF%BC%8C%E5%B9%B6%E5%9F%BA%E4%BA%8E%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84PSR-7%E6%B5%81%E3%80%82%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22a45840e6%22%7D\"></card><p data-lake-id=\"u2d2c69b8\" id=\"u2d2c69b8\"><br></p><p data-lake-id=\"u1d68af39\" id=\"u1d68af39\"><span data-lake-id=\"u16de2849\" id=\"u16de2849\">4.encode([$format [, $quality]]) - 图像进行编码</span></p><p data-lake-id=\"uacae860f\" id=\"uacae860f\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E5%BD%93%E5%89%8D%E5%9B%BE%E7%89%87%EF%BC%8C%E6%8C%89%E7%BB%99%E5%AE%9A%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%92%8C%E5%9B%BE%E7%89%87%E8%B4%A8%E9%87%8F%E8%BF%9B%E8%A1%8C%E7%BC%96%E7%A0%81%5Cn%5Cn%24format%20-%20jpg%E3%80%81png%E3%80%81gif%E3%80%81tif%E3%80%81bmp%E3%80%81data-url(base64)%E3%80%82%E9%BB%98%E8%AE%A4%E8%BF%94%E5%9B%9E%E7%9A%84%E7%BC%96%E7%A0%81%E5%90%8E%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82%E9%BB%98%E8%AE%A4%E7%B1%BB%E5%9E%8B%E6%98%AF%20'jpeg'%5Cn%24quality%20-%20%E8%BF%94%E5%9B%9E%E4%BB%8E%200-100%E3%80%820-%E6%9C%80%E4%BD%8E%EF%BC%8C100%E6%9C%80%E5%A4%A7%E3%80%82%E5%8F%AA%E5%AF%B9%20'jpg'%20%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E6%9C%89%E6%95%88%EF%BC%8C%E5%9B%A0%E4%B8%BApng%E5%8E%8B%E7%BC%A9%E6%98%AF%E6%97%A0%E6%8D%9F%E7%9A%84%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%BD%B1%E5%93%8D%E5%9B%BE%E7%89%87%E8%B4%A8%E9%87%8F%E3%80%82%E9%BB%98%E8%AE%A4%E6%98%AF90%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24jpg%20%3D%20(string)%20Image%3A%3Amake('public%2Ffoo.png')-%3Eencode('jpg'%2C%2075)%3B%5Cn%5Ct%24data%20%3D%20(string)%20Image%3A%3Amake('public%2Ffoo.png')-%3Eencode('data-url')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2234124cc5%22%7D\"></card><p data-lake-id=\"u64cad745\" id=\"u64cad745\"><br></p><p data-lake-id=\"uff59f19c\" id=\"uff59f19c\"><span data-lake-id=\"ucff54213\" id=\"ucff54213\">图像缓存相关<br /></span><span data-lake-id=\"uf38eff93\" id=\"uf38eff93\">1.cache(Closure $callback [, int $lifetime [,bool $returnObj]]) - 图像缓存</span></p><p data-lake-id=\"uf8031851\" id=\"uf8031851\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%24callback%20-%20%E4%BB%8EClosure%E5%9B%9E%E8%B0%83%EF%BC%8C%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E7%BC%93%E5%AD%98%E5%9B%BE%E5%83%8F%E5%AE%9E%E4%BE%8B%E3%80%82%5Cn%24lifetime%20-%20%E4%B8%BA%E5%9B%9E%E8%B0%83%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%5Cn%24returnObj%20-%20%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AAIntervention%E5%9B%BE%E5%83%8F%E5%AE%9E%E4%BE%8B%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E8%BF%98%E6%98%AF%E7%9B%B4%E6%8E%A5%E6%8E%A5%E6%94%B6%E5%9B%BE%E5%83%8F%E6%B5%81%E3%80%82%5Cncache()%E6%96%B9%E6%B3%95%EF%BC%8C%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%E9%A2%9D%E5%A4%96%E7%9A%84%20'intervention%2Fimagecache'%20%E4%BE%9D%E8%B5%96%E5%8C%85%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Acache(function(%24image)%7B%5Cn%5Ct%5Ct%24image-%3Emake('public%2Ffoo.jpg')-%3Eresize(300%2C%20200)-%3Egreyscale()%3B%5Cn%5Ct%7D%2C%2010%2C%20true)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%227b57ef7e%22%7D\"></card><p data-lake-id=\"ud7e296d0\" id=\"ud7e296d0\"><br></p><p data-lake-id=\"ubb96a6e6\" id=\"ubb96a6e6\"><span data-lake-id=\"u7d4d2aa1\" id=\"u7d4d2aa1\">2.backup($name = 'default') - 图像状态备份</span></p><p data-lake-id=\"ua843fd1a\" id=\"ua843fd1a\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%A4%87%E4%BB%BD%E5%BD%93%E5%89%8D%E5%9B%BE%E7%89%87%E7%9A%84%E7%8A%B6%E6%80%81%E3%80%82%E5%B0%86%E5%9B%BE%E7%89%87%E7%9A%84%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81%E5%A4%87%E4%BB%BD%E5%88%B0%20%24name%E3%80%82%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%B0%83%E7%94%A8%20reset(%24name%20%3D%20'default')%20%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%8A%B6%E6%80%81%E6%81%A2%E5%A4%8D%E3%80%82%5Cn%5Cn%24name%E9%BB%98%E8%AE%A4%E6%98%AF'default'%E3%80%82%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E4%BC%A0%E9%80%92%E4%B8%8D%E5%90%8C%E7%9A%84%24name%EF%BC%8C%E6%9D%A5%E8%AE%B0%E5%BD%95%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%B8%AA%E7%8A%B6%E6%80%81%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Acanvas(120%2C%2090%2C%20'%23000')%3B%5Cn%5Ct%24img-%3Efill('%23f00')%3B%5Cn%5Ct%24img-%3Ebackup()%3B%5Cn%5Ct%24img-%3Efill('%230f0')%3B%5Cn%5Ct%24img-%3Ereset()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%221090e63e%22%7D\"></card><p data-lake-id=\"uc7eea877\" id=\"uc7eea877\"><br></p><p data-lake-id=\"uc420bcbe\" id=\"uc420bcbe\"><span data-lake-id=\"u7b01bd02\" id=\"u7b01bd02\">3.reset($name = 'default') - 图像状态恢复</span></p><p data-lake-id=\"u27a921e7\" id=\"u27a921e7\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22backup()%E7%94%A8%E4%BA%8E%E5%A4%87%E4%BB%BD%E5%9B%BE%E5%83%8F%E7%8A%B6%E6%80%81%EF%BC%8Creset()%E7%94%A8%E4%BA%8E%E6%81%A2%E5%A4%8D%E5%88%B0%E4%B9%8B%E5%89%8D%E7%9A%84%E6%9F%90%E4%B8%AA%E5%A4%87%E4%BB%BD%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2274d3c01e%22%7D\"></card><p data-lake-id=\"u26193938\" id=\"u26193938\"><br></p><p data-lake-id=\"u51e5d31e\" id=\"u51e5d31e\"><span data-lake-id=\"uc910df43\" id=\"uc910df43\">原生图像处理驱动调用：<br /></span><span data-lake-id=\"u3d3e63a1\" id=\"u3d3e63a1\">1.getCore() - GD库｜Imagick库 对象调用</span></p><p data-lake-id=\"ucadc7a92\" id=\"ucadc7a92\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%A5%E7%89%B9%E5%AE%9A%E9%A9%B1%E5%8A%A8%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A0%BC%E5%BC%8F%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%20'GD'%20%E5%BA%93%EF%BC%8C%E5%88%99%E8%BF%94%E5%9B%9E%20GD%20%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B%EF%BC%9B%E5%A6%82%E6%9E%9C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%20'Imagick'%EF%BC%8C%E5%88%99%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%20Imagick%20%E5%AF%B9%E8%B1%A1%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24imagick%20%3D%20%24img-%3EgetCore()%3B%5Ct%5Ct%5Ct%2F%2F%20%E8%BF%94%E5%9B%9E%E5%8E%9F%E5%A7%8B%E7%9A%84%20'imagick'%20%E5%AF%B9%E8%B1%A1%5Cn%5Ct%24imagick-%3EembossImage(0%2C%201)%3B%5Ct%5Ct%2F%2F%20%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%B0%83%E7%94%A8%20'imagick'%20%E7%9A%84%E6%96%B9%E6%B3%95%E4%BA%86%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%229ff69ad5%22%7D\"></card><p data-lake-id=\"u01f623da\" id=\"u01f623da\"><br></p><p data-lake-id=\"u7bab082d\" id=\"u7bab082d\"><span data-lake-id=\"u3684350e\" id=\"u3684350e\">调整图像尺寸：<br /></span><span data-lake-id=\"ue40f1485\" id=\"ue40f1485\">1.resize($width, $height [,Closure $callback]) - 调整图像尺寸</span></p><p data-lake-id=\"ufe0f1b04\" id=\"ufe0f1b04\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E3%80%81%E9%AB%98%EF%BC%8C%E6%9D%A5%E8%B0%83%E6%95%B4%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E3%80%82%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E5%8F%AF%E9%80%89%E7%9A%84Closure%E5%9B%9E%E8%B0%83%E6%9D%A5%E7%BA%A6%E6%9D%9Fresize%E5%91%BD%E4%BB%A4%E3%80%82%5Cn%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E5%AE%9A%E4%B9%89%E4%BA%86resize%E5%91%BD%E4%BB%A4%E7%9A%84%E7%BA%A6%E6%9D%9F%E3%80%82%E5%8F%AF%E7%BA%A6%E6%9D%9F%E5%9B%BE%E5%83%8F%E7%9A%84%20'%E5%AE%BD%E9%AB%98%E6%AF%94(aspect-ratio)'%20%E5%92%8C%20'%E4%B8%8D%E5%B8%8C%E6%9C%9B%E7%9A%84%E5%A4%A7%E5%B0%8F(a%20unwanted%20upsizing)'%5Cn%5CtaspectRatio()%5Cn%5Ct%5Ct%E7%BA%A6%E6%9D%9F%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E5%AE%BD%E9%AB%98%E6%AF%94%E3%80%82%E4%BD%9C%E4%B8%BA%E6%AF%94%E4%BE%8B%E8%B0%83%E6%95%B4%E5%A4%A7%E5%B0%8F%E7%9A%84%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%20widen()%20%E5%92%8C%20heighten()%5Cn%5Ctupsize()%5Cn%5Ct%5Ct%E4%BF%9D%E6%8C%81%E5%9B%BE%E5%83%8F%E5%A4%A7%E5%B0%8F%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Eresize(300%2C%20200)%3B%5Cn%5Ct%24img-%3Eresize(300%2C%20null)%3B%5Cn%5Ct%24img-%3Eresize(null%2C%20200)%3B%5Cn%5Ct%24img-%3Eresize(300%2C%20null%2C%20function(%24constraint)%7B%5Ct%5Ct%2F%2F%20%E8%B0%83%E6%95%B4%E5%9B%BE%E5%83%8F%E7%9A%84%E5%AE%BD%E5%88%B0300%EF%BC%8C%E5%B9%B6%E7%BA%A6%E6%9D%9F%E5%AE%BD%E9%AB%98%E6%AF%94(%E9%AB%98%E8%87%AA%E5%8A%A8)%5Cn%5Ct%5Ct%24constraint-%3EaspectRatio()%3B%5Cn%5Ct%7D)%3B%5Cn%5Ct%24img-%3Eresize(null%2C%20200%2C%20function(%24constraint)%7B%5Ct%5Ct%2F%2F%20%E8%B0%83%E6%95%B4%E5%9B%BE%E5%83%8F%E7%9A%84%E9%AB%98%E5%88%B0200%EF%BC%8C%E5%B9%B6%E7%BA%A6%E6%9D%9F%E5%AE%BD%E9%AB%98%E6%AF%94(%E5%AE%BD%E8%87%AA%E5%8A%A8)%5Cn%5Ct%5Ct%24constraint-%3EaspectRatio()%3B%5Cn%5Ct%7D)%3B%5Cn%5Ct%24img-%3Eresize(null%2C%20400%2C%20function(%24constraint)%7B%5Ct%5Ct%2F%2F%20%E9%98%BB%E6%AD%A2%E5%8F%AF%E8%83%BD%E7%9A%84%E5%B0%BA%E5%AF%B8%E5%8F%98%E5%8C%96(%E4%BF%9D%E6%8C%81%E5%9B%BE%E5%83%8F%E5%A4%A7%E5%B0%8F)%5Cn%5Ct%5Ct%24constraint-%3EaspectRatio()%3B%5Cn%5Ct%5Ct%24constraint-%3Eupsize()%3B%5Cn%5Ct%7D)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22289ac572%22%7D\"></card><p data-lake-id=\"u30bfab03\" id=\"u30bfab03\"><br></p><p data-lake-id=\"u4ef11b71\" id=\"u4ef11b71\"><span data-lake-id=\"u15119ad0\" id=\"u15119ad0\">2.widen($width [, Closure $callback]) - 调整图像宽(保持宽高比)</span></p><p data-lake-id=\"ue63d3843\" id=\"ue63d3843\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E8%B0%83%E6%95%B4%E5%9B%BE%E5%83%8F%E7%9A%84%E5%AE%BD%E5%88%B0%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E5%BA%A6%EF%BC%8C%E4%BF%9D%E6%8C%81%E5%AE%BD%E9%AB%98%E6%AF%94%E3%80%82%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E5%8F%AF%E9%80%89%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E6%9D%A5%E5%BA%94%E7%94%A8%E9%A2%9D%E5%A4%96%E7%9A%84%E7%BA%A6%E6%9D%9F%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A%E9%98%BB%E6%AD%A2%E5%8F%AF%E8%83%BD%E7%9A%84%E5%B0%BA%E5%AF%B8%E5%8F%98%E5%8C%96%5Cn%5Ctupsize()%5Cn%5Ct%5Ct%E4%BF%9D%E6%8C%81%E5%9B%BE%E5%83%8F%E5%A4%A7%E5%B0%8F%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%228c5ad84f%22%7D\"></card><p data-lake-id=\"u41a75ea5\" id=\"u41a75ea5\"><br></p><p data-lake-id=\"u8e1ba88e\" id=\"u8e1ba88e\"><span data-lake-id=\"uf0a0a76b\" id=\"uf0a0a76b\">3.heighten($height [, Closure $callback]) - 调整图像高(保持宽高比)</span></p><p data-lake-id=\"ube8ee1ea\" id=\"ube8ee1ea\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E8%B0%83%E6%95%B4%E5%9B%BE%E5%83%8F%E7%9A%84%E9%AB%98%E5%88%B0%E7%BB%99%E5%AE%9A%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%8C%E4%BF%9D%E6%8C%81%E5%AE%BD%E9%AB%98%E6%AF%94%E3%80%82%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E5%8F%AF%E9%80%89%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E6%9D%A5%E5%BA%94%E7%94%A8%E9%A2%9D%E5%A4%96%E7%9A%84%E7%BA%A6%E6%9D%9F%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A%E9%98%BB%E6%AD%A2%E5%8F%AF%E8%83%BD%E7%9A%84%E5%B0%BA%E5%AF%B8%E5%8F%98%E5%8C%96%5Cn%5Ctupsize()%5Cn%5Ct%5Ct%E4%BF%9D%E6%8C%81%E5%9B%BE%E5%83%8F%E5%A4%A7%E5%B0%8F%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22a9625099%22%7D\"></card><p data-lake-id=\"u81cb5e72\" id=\"u81cb5e72\"><br></p><p data-lake-id=\"u9f51dd78\" id=\"u9f51dd78\"><span data-lake-id=\"u8cbd23f8\" id=\"u8cbd23f8\">4.crop($width, $height [, $x, $y]) - 裁剪图像</span></p><p data-lake-id=\"ue6a9252d\" id=\"ue6a9252d\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E3%80%81%E9%AB%98%EF%BC%8C%E8%A3%81%E5%89%AA%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E4%B8%80%E4%B8%AA%E7%9F%A9%E5%BD%A2%E5%8C%BA%E5%9F%9F%E3%80%82%E9%BB%98%E8%AE%A4%E4%BB%8E%E5%9B%BE%E5%83%8F%E7%9A%840.0%E5%BC%80%E5%A7%8B%EF%BC%8C%E5%8F%AF%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AA%E5%9D%90%E6%A0%87%EF%BC%8C%E5%AE%9A%E4%BD%8D%E8%A3%81%E5%89%AA%E7%9A%84%E8%B5%B7%E5%A7%8B%E7%82%B9%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Ecrop(100%2C%20100%2C%2020%2C%2020)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%224af19940%22%7D\"></card><p data-lake-id=\"u3e1ba682\" id=\"u3e1ba682\"><br></p><p data-lake-id=\"u338a7e8a\" id=\"u338a7e8a\"><span data-lake-id=\"u0bef2686\" id=\"u0bef2686\">5.fit(</span><card type=\"inline\" name=\"math\" value=\"data:%7B%22code%22%3A%22width%20%5B%5B%22%2C%22src%22%3A%22https%3A%2F%2Fg.yuque.com%2Fgr%2Flatex%3Fwidth%2520%255B%255B%22%2C%22id%22%3A%22z1YfA%22%7D\"></card><span data-lake-id=\"u7b344c09\" id=\"u7b344c09\">height] [, Closure $callback [, $position]]]) - 智能裁剪和调整</span></p><p data-lake-id=\"u060e1ed6\" id=\"u060e1ed6\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BB%A5%E4%B8%80%E4%B8%AA%E6%99%BA%E8%83%BD%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E7%BB%93%E5%90%88%E8%A3%81%E5%89%AA%E5%92%8C%E8%B0%83%E6%95%B4%E6%9D%A5%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%9B%BE%E7%89%87%E3%80%82%E8%AF%A5%E6%96%B9%E6%B3%95%E5%B0%86%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%89%BE%E5%88%B0%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E3%80%81%E9%AB%98%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%BD%E9%AB%98%E6%AF%94%EF%BC%8C%E8%A3%81%E5%89%AA%E5%B9%B6%E8%B0%83%E6%95%B4%E5%88%B0%E7%BB%99%E5%AE%9A%E5%B0%BA%E5%AF%B8%E3%80%82%5Cn%24callback%20-%20%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E6%9D%A5%E7%BA%A6%E6%9D%9F%E5%8F%AF%E8%83%BD%E7%9A%84%E5%B0%BA%E5%AF%B8%E5%8F%98%E5%8C%96%5Cn%5Ctupsize()%5Cn%5Ct%5Ct%E4%BF%9D%E6%8C%81%E5%9B%BE%E5%83%8F%E5%A4%A7%E5%B0%8F%5Cn%5Cn%24position%20-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A3%81%E5%89%AA%E7%9A%84%E4%BD%8D%E7%BD%AE%E3%80%82%E9%BB%98%E8%AE%A4%E6%98%AF%20'%E4%B8%AD%E5%BF%83'%5Cn%5Cttop-left%5Cn%5Cttop%5Cn%5Cttop-right%5Cn%5Ctleft%5Cn%5Ctcenter(%E9%BB%98%E8%AE%A4)%5Cn%5Ctright%5Cn%5Ctbottom-left%5Cn%5Ctbottom%5Cn%5Ctbottom-right%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22248846d4%22%7D\"></card><p data-lake-id=\"u3e41c2f7\" id=\"u3e41c2f7\"><br></p><p data-lake-id=\"u30aed8b4\" id=\"u30aed8b4\"><span data-lake-id=\"ua5e6c88b\" id=\"ua5e6c88b\">6.resizeCanvas($width, $height [, $anchor [, bool $relative [, $bgcolor]]])</span></p><p data-lake-id=\"u0003dca7\" id=\"u0003dca7\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E8%B0%83%E6%95%B4%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E8%BE%B9%E7%95%8C%E5%88%B0%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E5%92%8C%E9%AB%98%E3%80%82%5Cn%5Cn%24anchor%20-%20%E4%BB%8E%E5%9B%BE%E5%83%8F%E7%9A%84%E5%93%AA%E7%82%B9%E5%BC%80%E5%A7%8B%E8%B0%83%E6%95%B4%5Cn%5Cttop-left%5Cn%5Cttop%5Cn%5Cttop-right%5Cn%5Ctleft%5Cn%5Ctcenter(%E9%BB%98%E8%AE%A4)%5Cn%5Ctright%5Cn%5Ctbottom-left%5Cn%5Ctbottom%5Cn%5Ctbottom-right%5Cn%5Cn%24relative%20-%20%E5%B0%86%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE%E4%B8%BA%E7%9B%B8%E5%AF%B9%EF%BC%8C%E7%94%A8%E4%BB%A5%E5%9C%A8%E7%9C%9F%E5%AE%9E%E7%9A%84%E5%9B%BE%E7%89%87%E5%B0%BA%E5%AF%B8%E4%B8%8A%EF%BC%8C%E6%B7%BB%E5%8A%A0%E6%88%96%E8%80%85%E5%87%8F%E5%8E%BB%E7%BB%99%E5%AE%9A%E7%9A%84%E5%AE%BD%E3%80%81%E9%AB%98%E3%80%82%5Cn%5Cn%24bgcolor%20-%20%E7%94%BB%E5%B8%83%E8%83%8C%E6%99%AF(%E9%BB%98%E8%AE%A4%20'%23000000')%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2257a276d7%22%7D\"></card><p data-lake-id=\"u38b171a8\" id=\"u38b171a8\"><br></p><p data-lake-id=\"ub4f534cc\" id=\"ub4f534cc\"><span data-lake-id=\"u54ee7842\" id=\"u54ee7842\">7.trim([$base [, array $away [, $tolerance [, $feather]]]])<br /></span><span data-lake-id=\"u9204d0b1\" id=\"u9204d0b1\">以给定颜色修剪图像空间。</span></p><p data-lake-id=\"uc32aeeee\" id=\"uc32aeeee\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%24base%20-%20%E5%AE%9A%E4%B9%89%E4%BB%8E%E4%BB%80%E4%B9%88%E4%BD%8D%E7%BD%AE%E6%9D%A5%E9%80%89%E5%8F%96%E4%BF%AE%E5%89%AA%E9%A2%9C%E8%89%B2%E7%9A%84%E7%82%B9%E3%80%82%E4%BE%8B%E5%A6%82%EF%BC%9A%E8%AE%BE%E7%BD%AE%E4%B8%BA%20%20'bottom-right'%EF%BC%8C%E5%9B%BE%E5%83%8F%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E9%A2%9C%E8%89%B2%E5%B0%86%E8%A2%AB%E4%BF%AE%E5%89%AA%E6%8E%89%EF%BC%8C%E7%AD%89%E5%90%8C%E4%BA%8E%E5%9B%BE%E7%89%87%E5%B7%A6%E4%B8%8B%E8%A7%92%E7%9A%84%E9%A2%9C%E8%89%B2%E3%80%82%E5%8F%AF%E9%80%89%E7%9A%84%E5%80%BC%E6%9C%89%EF%BC%9A%5Cn%5Cttop-left(%E9%BB%98%E8%AE%A4)%5Cn%5Ctbottom-right%5Cn%5Cttranparent%5Cn%5Cn%24away%20-%20%E5%BA%94%E8%AF%A5%E8%A2%AB%E4%BF%AE%E5%89%AA%E6%8E%89%E7%9A%84%E8%BE%B9%E6%A1%86%E3%80%82%E4%BD%A0%E5%8F%AF%E4%BB%A5%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AA%E8%BE%B9%E6%A1%86(array)%EF%BC%8C%E5%8F%AF%E9%80%89%E7%9A%84%E5%80%BC%E6%9C%89%EF%BC%9A%5Cn%5Cttop%5Cn%5Ctbottom%5Cn%5Ctleft%5Cn%5Ctright%5Cn%5Cn%24tolerance%20-%20%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%81%8F%E5%B7%AE%E5%BA%A6%EF%BC%8C%E4%BF%AE%E5%89%AA%E7%9B%B8%E4%BC%BC%E9%A2%9C%E8%89%B2%E5%80%BC%E3%80%82%E8%8C%83%E5%9B%B40-100%E3%80%82%E9%BB%98%E8%AE%A4%E6%98%AF0%5Cn%5Cn%24feather%20-%20%E7%BE%BD%E5%8C%96%E6%95%88%E6%9E%9C%5Cn%5Ct%E6%9C%89%E6%97%B6%EF%BC%8C%E5%9C%A8%E4%BF%AE%E5%89%AA%E6%97%B6%E5%9C%A8%E5%AF%B9%E8%B1%A1%E5%91%A8%E5%9B%B4%E7%95%99%E4%B8%8B%E6%9C%AA%E8%A7%A6%E6%91%B8%E7%9A%84%E2%80%9C%E8%BE%B9%E6%A1%86%E2%80%9D%E5%8F%AF%E8%83%BD%E6%98%AF%E6%9C%89%E7%94%A8%E7%9A%84%E3%80%82%20%E7%89%B9%E5%88%AB%E6%98%AF%E4%BF%AE%E5%89%AA%E9%9D%9E%E5%AE%9E%E4%BD%93%E8%83%8C%E6%99%AF%E6%97%B6%EF%BC%8C%E6%82%A8%E5%8F%AF%E4%BB%A5%E5%B1%95%E5%BC%80%EF%BC%88%E6%AD%A3%E5%80%BC%EF%BC%89%E6%88%96%E6%94%B6%E7%BC%A9%EF%BC%88%E8%B4%9F%E5%80%BC%EF%BC%89%E4%BF%AE%E5%89%AA%E5%AF%B9%E8%B1%A1%E5%91%A8%E5%9B%B4%E7%9A%84%E7%A9%BA%E9%97%B4%E4%B8%80%E5%AE%9A%E9%87%8F%E7%9A%84%E5%83%8F%E7%B4%A0%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Etrim()%3B%5Ct%5Ct%2F%2F%20%E9%BB%98%E8%AE%A4%EF%BC%8C%E6%89%80%E6%9C%89%E8%BE%B9%E6%A1%86%E4%BD%BF%E7%94%A8%20'top-left'%20%E9%A2%9C%E8%89%B2%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Etrim('bottom-right')%3B%5Ct%5Ct%2F%2F%20%E6%89%80%E6%9C%89%E8%BE%B9%E6%A1%86%E4%BD%BF%E7%94%A8%20'bottom-right'%20%E9%A2%9C%E8%89%B2%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Etrim('transparent'%2C%20array('top'%2C%20'bottom'))%3B%5Ct%5Ct%2F%2F%20%E4%B8%8A%E3%80%81%E4%B8%8B%E8%BE%B9%E6%A1%86%E9%80%8F%E6%98%8E%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Etrim('top-left'%2C%20'left')%3B%5Ct%5Ct%2F%2F%20%E5%8F%AA%E6%9C%89%E5%B7%A6%E8%BE%B9%E6%A1%86%EF%BC%8C%E4%BD%BF%E7%94%A8%20'top-left'%20%E9%A2%9C%E8%89%B2%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Etrim('top-left'%2C%20null%2C%2040)%3B%5Ct%5Ct%2F%2F%20%E7%A7%BB%E9%99%A4%E5%9B%BE%E5%83%8F%E6%89%80%E6%9C%89%E8%BE%B9%E6%A1%86%EF%BC%8B40%E5%81%8F%E5%B7%AE%E5%BA%A6%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Etrim('top-left'%2C%20null%2C%2025%2C%2050)%3B%5Ct%5Ct%2F%2F%20%E7%A7%BB%E9%99%A4%E5%9B%BE%E5%83%8F%E6%89%80%E6%9C%89%E8%BE%B9%E6%A1%86%EF%BC%8B25%E5%81%8F%E5%B7%AE%E5%BA%A6%EF%BC%8B50px%E7%9A%84%E8%BE%B9%E6%A1%86%E7%BE%BD%E5%8C%96%E6%95%88%E6%9E%9C%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22054eabd2%22%7D\"></card><p data-lake-id=\"u9c741fdf\" id=\"u9c741fdf\"><br></p><p data-lake-id=\"u8075bd82\" id=\"u8075bd82\"><span data-lake-id=\"ua7855fdd\" id=\"ua7855fdd\">调整图像：<br /></span><span data-lake-id=\"ud5ed0402\" id=\"ud5ed0402\">1.gamma($correction) - 伽马矫正</span></p><p data-lake-id=\"ue6c6c944\" id=\"ue6c6c944\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%AF%B9%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E6%89%A7%E8%A1%8C%E4%BC%BD%E9%A9%AC%E7%9F%AB%E6%AD%A3%E6%93%8D%E4%BD%9C%5Cn%24correction%20-%20%E4%BC%BD%E9%A9%AC%E8%A1%A5%E5%81%BF%E5%80%BC(gamma%20compensation%20value)%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Egamma(1.6)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22894c1065%22%7D\"></card><p data-lake-id=\"uea6a9d8b\" id=\"uea6a9d8b\"><br></p><p data-lake-id=\"uaed7d836\" id=\"uaed7d836\"><span data-lake-id=\"u71ac384e\" id=\"u71ac384e\">2.brightness($level) - 亮度</span></p><p data-lake-id=\"uae90b51b\" id=\"uae90b51b\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%94%B9%E5%8F%98%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E4%BA%AE%E5%BA%A6%E3%80%82%24level%E5%8F%AF%E9%80%89%E8%8C%83%E5%9B%B4%E4%B8%BA%EF%BC%9A-100%20-%20100%E3%80%820-%E8%A1%A8%E7%A4%BA%E4%B8%8D%E6%94%B9%E5%8F%98%EF%BC%8C-100%E6%9C%80%E5%B0%8F%EF%BC%8C%EF%BC%8B100%E6%9C%80%E5%A4%A7%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Ebrightness(35)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22726167fe%22%7D\"></card><p data-lake-id=\"u460292c3\" id=\"u460292c3\"><br></p><p data-lake-id=\"ud8e93b70\" id=\"ud8e93b70\"><span data-lake-id=\"uee36c340\" id=\"uee36c340\">3.constrast($level) - 对比度</span></p><p data-lake-id=\"u511ae49b\" id=\"u511ae49b\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%94%B9%E5%8F%98%E5%9B%BE%E5%83%8F%E7%9A%84%E5%AF%B9%E6%AF%94%E5%BA%A6%E3%80%82%24level%E5%8F%AF%E9%80%89%E8%8C%83%E5%9B%B4%E4%B8%BA%EF%BC%9A-100%20-%20100%E3%80%820-%E8%A1%A8%E7%A4%BA%E4%B8%8D%E6%94%B9%E5%8F%98%EF%BC%8C-100%E6%9C%80%E5%B0%8F%EF%BC%8C%EF%BC%8B100%E6%9C%80%E5%A4%A7%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Econstrast(35)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%220a024424%22%7D\"></card><p data-lake-id=\"ua6a1836a\" id=\"ua6a1836a\"><br></p><p data-lake-id=\"u1c41b088\" id=\"u1c41b088\"><span data-lake-id=\"u09786fdb\" id=\"u09786fdb\">4.colorize($red, $green, $blue) - 改变RGB色道</span></p><p data-lake-id=\"uf20b60da\" id=\"uf20b60da\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E7%BA%A2%E3%80%81%E7%BB%BF%E3%80%81%E8%93%9D%E8%89%B2%E9%81%93%EF%BC%8C%E6%94%B9%E5%8F%98%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84RGB%E9%A2%9C%E8%89%B2%E3%80%82%E8%89%B2%E9%81%93%E5%80%BC%E6%98%AF%E8%A7%84%E8%8C%83%E5%8C%96%E7%9A%84%EF%BC%8C%E8%8C%83%E5%9B%B4%E4%BB%8E%20-100%20-%20100%E3%80%820-%E8%A1%A8%E7%A4%BA%E4%B8%8D%E6%94%B9%E5%8F%98%EF%BC%8C%EF%BC%8D100%E8%A1%A8%E7%A4%BA%E7%A7%BB%E9%99%A4%E5%9B%BE%E5%83%8F%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E7%89%B9%E5%AE%9A%E9%A2%9C%E8%89%B2%EF%BC%8C%EF%BC%8B100%E8%A1%A8%E7%A4%BA%E6%9C%80%E5%A4%A7%E9%A2%9C%E8%89%B2%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Ecolorize(-100%2C%200%2C%20100)%3B%5Ct%2F%2F%20%E6%B7%BB%E5%8A%A0%E8%93%9D%EF%BC%8C%E7%A7%BB%E9%99%A4%E7%BA%A2%5Cn%5Ct%24img-%3Ecolorize(0%2C%2030%2C%200)%3B%5Ct%5Ct%2F%2F%20%E7%BB%99%E5%9B%BE%E7%89%87%E6%B7%BB%E5%8A%A0%E9%83%A8%E5%88%86%E8%93%9D%E8%89%B2%E8%B0%83%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22b048ba65%22%7D\"></card><p data-lake-id=\"ufe251fe0\" id=\"ufe251fe0\"><br></p><p data-lake-id=\"uf5590698\" id=\"uf5590698\"><span data-lake-id=\"uc91cae43\" id=\"uc91cae43\">5.greyscale() - 灰度</span></p><p data-lake-id=\"u2703a1c8\" id=\"u2703a1c8\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E5%9B%BE%E5%83%8F%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%81%B0%E5%BA%A6%E7%89%88%E6%9C%AC%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24image%20%3D%20%24img-%3Egreyscale()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2224115df7%22%7D\"></card><p data-lake-id=\"u4b1295c9\" id=\"u4b1295c9\"><br></p><p data-lake-id=\"u541dc75d\" id=\"u541dc75d\"><span data-lake-id=\"uc9690865\" id=\"uc9690865\">6.flip($mode) - 图像镜像</span></p><p data-lake-id=\"u72aa8203\" id=\"u72aa8203\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E7%BB%99%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%EF%BC%8C%E5%88%B6%E4%BD%9C%E9%95%9C%E5%83%8F%E3%80%82%24mode%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E4%B8%BA%EF%BC%9Ah-%E6%B0%B4%E5%B9%B3%E9%95%9C%E5%83%8F%E5%92%8Cv-%E5%9E%82%E7%9B%B4%E9%95%9C%E5%83%8F%E3%80%82%E9%BB%98%E8%AE%A4%E6%98%AFh%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Eflip('v')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%227249adeb%22%7D\"></card><p data-lake-id=\"ucde44ea3\" id=\"ucde44ea3\"><br></p><p data-lake-id=\"udb74dda9\" id=\"udb74dda9\"><span data-lake-id=\"uc6eae50f\" id=\"uc6eae50f\">7.invert() - 反转图像颜色</span></p><p data-lake-id=\"u42e5dc7b\" id=\"u42e5dc7b\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%8F%8D%E8%BD%AC%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E6%89%80%E6%9C%89%E9%A2%9C%E8%89%B2%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Einvert()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22d37aac96%22%7D\"></card><p data-lake-id=\"u6d98289e\" id=\"u6d98289e\"><br></p><p data-lake-id=\"uf9616a15\" id=\"uf9616a15\"><span data-lake-id=\"uf4c7c161\" id=\"uf4c7c161\">8.opacity($transparency) - 设置图像的透明度</span></p><p data-lake-id=\"u7e69fa4a\" id=\"u7e69fa4a\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E8%AE%BE%E7%BD%AE%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E4%B8%8D%E9%80%8F%E6%98%8E%E5%BA%A6%E7%9A%84%E7%99%BE%E5%88%86%E6%AF%94%E3%80%82%E4%BB%8E%20100%25-0%25%EF%BC%8C100%25%EF%BC%8D%E4%B8%8D%E9%80%8F%E6%98%8E%EF%BD%9C0%25-%E5%85%A8%E9%80%8F%E6%98%8E%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Eopacity(50)%3B%5Cn%5CtImage%3A%3Amake('public%2Ffoo.jpg')-%3Eopacity(0)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22ff3fffa5%22%7D\"></card><p data-lake-id=\"u20454f43\" id=\"u20454f43\"><br></p><p data-lake-id=\"u36340352\" id=\"u36340352\"><span data-lake-id=\"uc180b996\" id=\"uc180b996\">9.orientate() - 旋转图像(记得摩点图像处理，使用了它。Imagick)</span></p><p data-lake-id=\"ufa989bc1\" id=\"ufa989bc1\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%AD%A4%E6%96%B9%E6%B3%95%E8%AF%BB%E5%8F%96EXIF%E5%9B%BE%E5%83%8F%E9%85%8D%E7%BD%AE%E9%A1%B9%20'%E6%96%B9%E5%90%91'%EF%BC%8C%E5%B9%B6%E5%AF%B9%E5%9B%BE%E5%83%8F%E6%89%A7%E8%A1%8C%E6%97%8B%E8%BD%AC%EF%BC%8C%E4%BB%A5%E6%AD%A3%E7%A1%AE%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%8E%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%9B%BE%E5%83%8F%EF%BC%8C%E6%89%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96EXIF%E6%95%B0%E6%8D%AE%5Cn%E6%B3%A8%E6%84%8F%EF%BC%9A%5Cn%5Ct%E4%BD%BF%E7%94%A8%E8%AF%A5%E6%96%B9%E6%B3%95%EF%BC%8C%E8%A6%81%E6%B1%82PHP%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E6%8C%87%E5%AE%9A%20'--enable-exif'%E3%80%82windows%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%98%E5%BF%85%E9%A1%BB%E5%90%AF%E7%94%A8%20'mbstring'%20%E6%89%A9%E5%B1%95%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Eorientate()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22ac27090c%22%7D\"></card><p data-lake-id=\"uc7725053\" id=\"uc7725053\"><br></p><p data-lake-id=\"ua2263217\" id=\"ua2263217\"><span data-lake-id=\"u0675f0eb\" id=\"u0675f0eb\">10.rotate(float $angle [, string $bgcolor]) - 图像旋转</span></p><p data-lake-id=\"ud7c1111d\" id=\"ud7c1111d\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%EF%BC%8C%E9%80%86%E6%97%B6%E9%92%88%E6%97%8B%E8%BD%AC%E7%BB%99%E5%AE%9A%E8%A7%92%E5%BA%A6%E3%80%82%E5%8F%AF%E5%AE%9A%E4%B9%89%E6%97%8B%E8%BD%AC%E5%90%8E%EF%BC%8C%E6%9C%AA%E8%A6%86%E7%9B%96%E5%8C%BA%E5%9F%9F%E7%9A%84%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%EF%BC%81%5Cn%24angle%20-%20%E6%97%8B%E8%BD%AC%E8%A7%92%E5%BA%A6%5Cn%24bgcolor%20-%20%E6%97%8B%E8%BD%AC%E5%90%8E%EF%BC%8C%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E6%9C%AA%E8%A6%86%E7%9B%96%E5%8C%BA%E5%9F%9F%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E8%AE%BE%E7%BD%AE%E8%83%8C%E6%99%AF%E8%89%B2%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22aaae9aca%22%7D\"></card><p data-lake-id=\"ub5a3ebc2\" id=\"ub5a3ebc2\"><br></p><p data-lake-id=\"u20befdbe\" id=\"u20befdbe\"><span data-lake-id=\"uc6d9ad12\" id=\"uc6d9ad12\">11.mask($source [, bool $mask_with_alpha = false])<br /></span><span data-lake-id=\"uddf7c8e5\" id=\"uddf7c8e5\">将给定的图像资源应用为当前图像的alpha蒙板，以改变当前透明度。蒙板将调整为当前图像大小。默认情况下，蒙板的灰度版本会转换为alpha值，但可通过设置 </span><card type=\"inline\" name=\"math\" value=\"data:%7B%22code%22%3A%22mask_with_alpha%20%E4%BB%A5%E5%BA%94%E7%94%A8%E4%B8%96%E7%BA%AA%E7%9A%84alpha%E9%80%9A%E9%81%93%E3%80%82%E5%B0%86%E4%BF%9D%E6%8C%81%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E7%9A%84%E9%80%8F%E6%98%8E%E5%BA%A6%E3%80%82%5Cn%22%2C%22src%22%3A%22https%3A%2F%2Fg.yuque.com%2Fgr%2Flatex%3Fmask_with_alpha%2520%25E4%25BB%25A5%25E5%25BA%2594%25E7%2594%25A8%25E4%25B8%2596%25E7%25BA%25AA%25E7%259A%2584alpha%25E9%2580%259A%25E9%2581%2593%25E3%2580%2582%25E5%25B0%2586%25E4%25BF%259D%25E6%258C%2581%25E5%25BD%2593%25E5%2589%258D%25E5%259B%25BE%25E5%2583%258F%25E7%259A%2584%25E9%2580%258F%25E6%2598%258E%25E5%25BA%25A6%25E3%2580%2582%250A%22%2C%22id%22%3A%22gDfje%22%7D\"></card><span data-lake-id=\"u3c2a584c\" id=\"u3c2a584c\">source：<br /></span><span data-lake-id=\"u05a84ed2\" id=\"u05a84ed2\">string - 文件系统的图片路径<br /></span><span data-lake-id=\"ueb9962d9\" id=\"ueb9962d9\">string - 图片的URL地址(allow_url_fopen必须启用)<br /></span><span data-lake-id=\"u4b065d31\" id=\"u4b065d31\">string - 二进制图片数据<br /></span><span data-lake-id=\"u274e3278\" id=\"u274e3278\">string - data-url编码的图片数据<br /></span><span data-lake-id=\"u1e854eae\" id=\"u1e854eae\">string - base64编码的图片数据<br /></span><span data-lake-id=\"u1d91badd\" id=\"u1d91badd\">resource - gd类型的PHP资源(当使用GD库)<br /></span><span data-lake-id=\"u666c67fd\" id=\"u666c67fd\">object - Imagick实例(当使用Imagick库)<br /></span><span data-lake-id=\"u9d7a1b6f\" id=\"u9d7a1b6f\">object - Intervention\\Image\\Image 实例<br /></span><span data-lake-id=\"ueb3b7e9c\" id=\"ueb3b7e9c\">object - SplFileInfo instance (To handle Laravel file uploads via Symfony\\Component\\HttpFoundation\\File\\UploadedFile) -<br /></span><span data-lake-id=\"u195887aa\" id=\"u195887aa\">laravel框架自带的图片上传实例<br /></span><span data-lake-id=\"udab0b4a7\" id=\"udab0b4a7\">$mask_with_alpha - 设置为true，可将实际的alpha通道作为蒙板，应用于当前图像，替代颜色值。默认是 false<br /></span><span data-lake-id=\"ub7171046\" id=\"ub7171046\">应用效果：<br /></span><span data-lake-id=\"u7ad2ddaa\" id=\"u7ad2ddaa\">1.filter(Intervention\\Image\\Filters\\FilterInterface $filter) - 使用滤镜</span></p><p data-lake-id=\"ud2df4cbd\" id=\"ud2df4cbd\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E7%BB%99%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%EF%BC%8C%E5%BA%94%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%BB%A4%E9%95%9C%E6%95%88%E6%9E%9C%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22a8094baa%22%7D\"></card><p data-lake-id=\"u153ee170\" id=\"u153ee170\"><br></p><p data-lake-id=\"uc5b08d37\" id=\"uc5b08d37\"><span data-lake-id=\"u8abac6a9\" id=\"u8abac6a9\">2.blur($amount = 1) - 高斯模糊</span></p><p data-lake-id=\"u05239ae8\" id=\"u05239ae8\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E5%BD%93%E5%89%8D%E5%9B%BE%E7%89%87%E4%B8%8A%EF%BC%8C%E5%BA%94%E7%94%A8%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A%E6%BB%A4%E9%95%9C%E3%80%82%24amount%E5%8F%AF%E9%80%89%E8%8C%83%E5%9B%B4%E4%B8%BA%200-100%E3%80%82(GD%E5%BA%93%E5%A4%84%E7%90%86%EF%BC%8C%E9%AB%98%E5%BC%BA%E5%BA%A6%E7%9A%84%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A%E4%BC%9A%E9%9D%9E%E5%B8%B8%E5%8D%A0%E7%94%A8%E6%80%A7%E8%83%BD%EF%BC%8C%E5%B0%8F%E5%BF%83%E4%BD%BF%E7%94%A8)%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Eblur()%3B%5Ct%5Ct%2F%2F%20%E8%BD%BB%E5%BE%AE%E7%9A%84%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A%5Cn%5Ct%24img-%3Eblur(15)%3B%5Ct%5Ct%2F%2F%20%E9%AB%98%E5%BC%BA%E5%BA%A6%E7%9A%84%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%226d6aa6df%22%7D\"></card><p data-lake-id=\"u6e542320\" id=\"u6e542320\"><br></p><p data-lake-id=\"ue3a680bb\" id=\"ue3a680bb\"><span data-lake-id=\"u58adbea7\" id=\"u58adbea7\">3.sharpen($amount = 10) - 锐化效果</span></p><p data-lake-id=\"u81677015\" id=\"u81677015\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E9%94%90%E5%8C%96%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E3%80%82%24amount%E5%8F%AF%E9%80%89%E8%8C%83%E5%9B%B4%E4%B8%BA%200-100%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Esharpen(15)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2241177e95%22%7D\"></card><p data-lake-id=\"u9ef1a62b\" id=\"u9ef1a62b\"><br></p><p data-lake-id=\"u360c5c36\" id=\"u360c5c36\"><span data-lake-id=\"u654d9c21\" id=\"u654d9c21\">4.pixelate($size) - 像素化效果</span></p><p data-lake-id=\"u3d312c25\" id=\"u3d312c25\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E5%83%8F%E7%B4%A0%E5%8C%96%E6%95%88%E6%9E%9C%E5%BA%94%E7%94%A8%E4%BA%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F(%E6%8C%87%E5%AE%9A%E5%83%8F%E7%B4%A0%E5%8C%96%E6%95%88%E6%9E%9C%E7%9A%84%E5%B0%BA%E5%AF%B8)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22ccf3ed9c%22%7D\"></card><p data-lake-id=\"uedbece8e\" id=\"uedbece8e\"><br></p><p data-lake-id=\"ufcb7dace\" id=\"ufcb7dace\"><span data-lake-id=\"u53777388\" id=\"u53777388\">5.limitColors($count [, $matte])</span></p><p data-lake-id=\"ud25685a6\" id=\"ud25685a6\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E5%BD%93%E5%89%8D%E5%9B%BE%E7%89%87%E7%9A%84%E7%8E%B0%E6%9C%89%E9%A2%9C%E8%89%B2%EF%BC%8C%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%85%B7%E6%9C%89%E7%BB%99%E5%AE%9A%E6%9C%80%E5%A4%A7%E9%A2%9C%E8%89%B2%E6%95%B0%E7%9A%84%E9%A2%9C%E8%89%B2%E8%A1%A8%E3%80%82%E8%AF%A5%E5%87%BD%E6%95%B0%E4%BF%9D%E7%95%99%E5%B0%BD%E5%8F%AF%E8%83%BD%E5%A4%9A%E7%9A%84alpha%E9%80%9A%E9%81%93%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%B9%B6%E5%B0%86%E9%80%8F%E6%98%8E%E5%83%8F%E7%B4%A0%E4%B8%8E%E5%8F%AF%E9%80%89%E7%9A%84%E9%81%AE%E7%BD%A9%E9%A2%9C%E8%89%B2%E6%B7%B7%E5%90%88%E3%80%82%5Cn%24count%20-%20%E5%BA%94%E5%9C%A8%E8%B0%83%E8%89%B2%E6%9D%BF%E4%B8%AD%E4%BF%9D%E7%95%99%E7%9A%84%E6%9C%80%E5%A4%A7%E9%A2%9C%E8%89%B2%E6%95%B0%E3%80%82%E8%AE%BE%E7%BD%AE%E4%B8%BAnull%EF%BC%8C%E8%BD%AC%E4%B8%BA%E7%9C%9F%E5%BD%A9%E8%89%B2(truecolor)%5Cn%24matte%20-%20%E7%94%A8%E4%BA%8E%E6%B7%B7%E5%90%88%E9%80%8F%E6%98%8E%E5%83%8F%E7%B4%A0%E7%9A%84%E9%A2%9C%E8%89%B2%E3%80%82%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%9A%E6%97%A0%E9%81%AE%E7%BD%A9%E9%A2%9C%E8%89%B2%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.png')%3B%5Cn%5Ct%24img-%3ElimitColors(255%2C%20'%23f90')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%228e4581ef%22%7D\"></card><p data-lake-id=\"u1e703dc8\" id=\"u1e703dc8\"><br></p><p data-lake-id=\"u9421cde2\" id=\"u9421cde2\"><span data-lake-id=\"ufe932179\" id=\"ufe932179\">6.interlace($interlace = true) - 图像隔行扫描</span></p><p data-lake-id=\"ueb243cb3\" id=\"ueb243cb3\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BC%A0%E9%80%92%E4%B8%80%E4%B8%AAboolean%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%EF%BC%8C%E5%88%87%E6%8D%A2%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%9D%A5%E7%A1%AE%E5%AE%9A%E6%98%AF%E5%90%A6%E4%BD%BF%E7%94%A8%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F%E6%88%96%E6%A0%87%E5%87%86%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%AF%B9%E5%9B%BE%E5%83%8F%E8%BF%9B%E8%A1%8C%E7%BC%96%E7%A0%81%E3%80%82%E5%A6%82%E6%9E%9Cjpeg%E5%9B%BE%E5%83%8F%E4%BD%BF%E7%94%A8%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F%E6%A8%A1%E5%BC%8F%EF%BC%8C%E5%9B%BE%E5%83%8F%E5%B0%86%E8%A2%AB%E5%A4%84%E7%90%86%E4%B8%BA%E6%B8%90%E8%BF%9B%E5%BC%8Fjpeg%E3%80%82%5Cn%E8%AE%BE%E7%BD%AE%E4%B8%BAtrue%EF%BC%8D%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F%E6%A8%A1%E5%BC%8F%EF%BD%9Cfalse%EF%BC%8D%E6%A0%87%E5%87%86%E6%A8%A1%E5%BC%8F%E3%80%82%E9%BB%98%E8%AE%A4%E6%98%AFtrue%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.png')%3B%5Cn%5Ct%24img-%3Einterlace()%3B%5Ct%5Ct%5Ct%2F%2F%20%E5%BC%80%E5%90%AF%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F%5Cn%5Ct%24img-%3Esave()%3B%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Finterlaced.gif')%3B%5Cn%5Ct%24img-%3Einterlace(false)%3B%5Ct%5Ct%2F%2F%20%E5%85%B3%E9%97%AD%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F%5Cn%5Ct%24img-%3Esave()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22c0405ea6%22%7D\"></card><p data-lake-id=\"u17dcdf10\" id=\"u17dcdf10\"><br></p><p data-lake-id=\"u3b36a2dd\" id=\"u3b36a2dd\"><span data-lake-id=\"u4d7693b7\" id=\"u4d7693b7\">画图：<br /></span><span data-lake-id=\"ua3213794\" id=\"ua3213794\">1.text($text [, $x [, $y [, Closure $callback]]]) - 文字</span></p><p data-lake-id=\"u2454833f\" id=\"u2454833f\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%8C%E5%86%99%E5%85%A5%E6%96%87%E6%9C%AC%E3%80%82%E5%9C%A8%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E4%B8%AD%EF%BC%8C%E5%8F%AF%E5%AE%9A%E4%B9%89%E6%9B%B4%E5%A4%9A%E7%BB%86%E8%8A%82%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%EF%BC%8C%E5%AF%B9%E5%85%B6%E6%96%B9%E5%BC%8F%E7%AD%89%5Cn%24callback%20-%20%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%5Cn%5Ctfile(%24filepath)%20-%20%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E3%80%82%E8%AE%BE%E7%BD%AETrue%20Type%20Font%E6%96%87%E4%BB%B6%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%88%96%E8%80%85GD%E5%BA%93%E5%86%85%E9%83%A8%E5%AD%97%E4%BD%93%E4%B9%8B%E4%B8%80%E7%9A%841%E5%88%B05%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B4%E6%95%B0%E5%80%BC%E3%80%82%20%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%9A1%5Cn%5Ctsize(%24size)%20-%20%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F%E3%80%82%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F%E4%BB%85%E5%9C%A8%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E6%97%B6%E5%8F%AF%E7%94%A8%EF%BC%8C%E5%90%A6%E5%88%99%E5%B0%86%E8%A2%AB%E5%BF%BD%E7%95%A5%E3%80%82%20%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%9A12%5Cn%5Ctcolor(%24color)%20-%20%E5%AD%97%E4%BD%93%E9%A2%9C%E8%89%B2%5Cn%5Ctalign(%24align)%20-%20%E6%B0%B4%E5%B9%B3%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%EF%BC%9Aleft%2Cright%2Ccenter%E3%80%82%E9%BB%98%E8%AE%A4left%5Cn%5Ctvalign(%24valign)%20-%20%E5%9E%82%E7%9B%B4%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F%EF%BC%9Atop%2Cbottom%2Cmiddle%E3%80%82%E9%BB%98%E8%AE%A4bottom%5Cn%5Ctangle(%24angle)%20-%20%E6%96%87%E6%9C%AC%E6%97%8B%E8%BD%AC%E8%A7%92%E5%BA%A6%E3%80%82%E6%96%87%E6%9C%AC%E5%B0%86%E5%9B%B4%E7%BB%95%E5%9E%82%E7%9B%B4%E5%92%8C%E6%B0%B4%E5%B9%B3%E5%AF%B9%E9%BD%90%E7%82%B9%E9%80%86%E6%97%B6%E9%92%88%E6%97%8B%E8%BD%AC%E3%80%82%20%E6%97%8B%E8%BD%AC%E4%BB%85%E5%9C%A8%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E6%97%B6%E5%8F%AF%E7%94%A8%EF%BC%8C%E5%90%A6%E5%88%99%E5%B0%86%E8%A2%AB%E5%BF%BD%E7%95%A5%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%225f0bd574%22%7D\"></card><p data-lake-id=\"ubfd53ec3\" id=\"ubfd53ec3\"><br></p><p data-lake-id=\"uab559066\" id=\"uab559066\"><span data-lake-id=\"uf03d95ca\" id=\"uf03d95ca\">2.pixel($color, $x, $y) - 点</span></p><p data-lake-id=\"u4fc807fa\" id=\"u4fc807fa\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E5%9D%90%E6%A0%87%E4%B8%8A%EF%BC%8C%E4%BB%A5%E7%BB%99%E5%AE%9A%E7%9A%84%E9%A2%9C%E8%89%B2%E7%94%BB%E5%8D%95%E4%B8%AA%E5%83%8F%E7%B4%A0%E7%82%B9%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%222c3e5a01%22%7D\"></card><p data-lake-id=\"u79c810a7\" id=\"u79c810a7\"><br></p><p data-lake-id=\"u4a5b1fed\" id=\"u4a5b1fed\"><span data-lake-id=\"u0c9257ba\" id=\"u0c9257ba\">3.line($x1, $y1, $x2, $y2 [Closure $callback]) - 线</span></p><p data-lake-id=\"u9be6f524\" id=\"u9be6f524\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E4%B8%8A%EF%BC%8C%E6%8C%87%E5%AE%9A2%E7%82%B9%E7%94%BB%E7%BA%BF%E3%80%82%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E4%B8%AD%EF%BC%8C%E5%AE%9A%E4%B9%89%E7%BA%BF%E7%9A%84%E9%A2%9C%E8%89%B2%E5%92%8C%E5%AE%BD%E5%BA%A6%5Cn%24callback%5Cn%5Ctcolor(%24color)%20-%20%E6%8C%87%E5%AE%9A%E7%BA%BF%E7%9A%84%E9%A2%9C%E8%89%B2%E3%80%82%E9%BB%98%E8%AE%A4%EF%BC%9A%23000000%5Cn%5Ctwidth(%24width)%20-%20%E6%8C%87%E5%AE%9A%E7%BA%BF%E7%9A%84%E5%AE%BD%E5%BA%A6%E3%80%82%E9%BB%98%E8%AE%A4%EF%BC%9A1px%E3%80%82%5Ct%5Ct%5Ct%2F%2F%20GD%E5%BA%93%E6%97%A0%E6%95%88%EF%BC%81%EF%BC%81%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22d323dced%22%7D\"></card><p data-lake-id=\"ue5e51dc7\" id=\"ue5e51dc7\"><br></p><p data-lake-id=\"u74a6da5a\" id=\"u74a6da5a\"><span data-lake-id=\"uaaf08abf\" id=\"uaaf08abf\">4.rectangle($x1, $y1, $x2, $y2 [Closure $callback]) - 矩形</span></p><p data-lake-id=\"u1ebc092a\" id=\"u1ebc092a\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E6%8C%87%E5%AE%9A2%E7%82%B9%E5%9D%90%E6%A0%87%EF%BC%8C%E5%88%86%E5%88%AB%E4%BB%A3%E8%A1%A8%E5%B7%A6%E4%B8%8A%E8%A7%92%E5%92%8C%E5%8F%B3%E4%B8%8B%E8%A7%92%EF%BC%8C%E6%9D%A5%E7%94%BB%E4%B8%80%E4%B8%AA%E7%9F%A9%E5%BD%A2%E3%80%82%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22432f13ae%22%7D\"></card><p data-lake-id=\"ua3f5a24b\" id=\"ua3f5a24b\"><br></p><p data-lake-id=\"u5bd7b423\" id=\"u5bd7b423\"><span data-lake-id=\"uc56468f0\" id=\"uc56468f0\">5.polygon(array $points [, Closure $callback]) - 多边形</span></p><p data-lake-id=\"u687dbb40\" id=\"u687dbb40\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E7%82%B9%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%9D%A5%E7%94%BB%E4%B8%80%E4%B8%AA%E5%A4%9A%E8%BE%B9%E5%BD%A2%E3%80%82%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E4%B8%AD%EF%BC%8C%E5%AE%9A%E4%B9%89%E5%A4%9A%E5%8F%98%E5%BD%A2%E7%9A%84%E5%A4%96%E8%A7%82%5Cn%24callback%20%E5%8F%AF%E4%BD%BF%E7%94%A8%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E6%9D%A5%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E5%A4%96%E8%A7%82%EF%BC%9A%5Cn%5Ctbackground(%24color)%20-%20%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E8%83%8C%E6%99%AF%5Cn%5Ctborder(%24width%2C%20%24color)%20-%20%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E8%BE%B9%E6%A1%86%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600%2C%20'%23ddd')%3B%5Cn%5Ct%24points%20%3D%20array(%5Cn%5Ct%5Ct40%2C%2050%2C%5Cn%5Ct%5Ct30%2C%2040%2C%5Cn%5Ct%5Ct20%2C%2030%2C%5Cn%5Ct%5Ct10%2C%2020%2C%5Cn%5Ct%5Ct5%2C%2010%2C%5Cn%5Ct)%3B%5Cn%5Ct%24img-%3Epolygon(%24points%2C%20function(%24draw)%7B%5Cn%5Ct%5Ct%24draw-%3Ebackground('%23ff0')%3B%5Cn%5Ct%5Ct%24draw-%3Eborder(1%2C%20'%23f0f')%3B%5Cn%5Ct%7D)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%225b18f194%22%7D\"></card><p data-lake-id=\"ue6cc9209\" id=\"ue6cc9209\"><br></p><p data-lake-id=\"ubade9bb4\" id=\"ubade9bb4\"><span data-lake-id=\"u69259503\" id=\"u69259503\">6.circle($diameter, $x, $y [,Closure $callback]) - 圆</span></p><p data-lake-id=\"u1641cab0\" id=\"u1641cab0\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E7%BB%99%E5%AE%9A%E7%9A%84x%E3%80%81y%E5%9D%90%E6%A0%87%E7%82%B9%E4%B8%8A%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E7%9A%84%E7%9B%B4%E5%BE%84%E7%94%BB%E4%B8%80%E4%B8%AA%E5%9C%86%E3%80%82%5Cn%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%8C%E6%9D%A5%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E5%A4%96%E8%A7%82%E3%80%82%5Cn%24callback%20%E5%8F%AF%E4%BD%BF%E7%94%A8%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E6%9D%A5%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E5%A4%96%E8%A7%82%EF%BC%9A%5Cn%5Ctbackground(%24color)%20-%20%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E8%83%8C%E6%99%AF%5Cn%5Ctborder(%24width%2C%20%24color)%20-%20%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E8%BE%B9%E6%A1%86%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Acanvas(300%2C%20200%2C%20'%23ddd')%3B%5Cn%5Ct%24img-%3Ecircle(100%2C%2050%2C%2050%2C%20function(%24draw)%7B%5Cn%5Ct%5Ct%24draw-%3Ebackground('%23ff0')%3B%5Cn%5Ct%5Ct%24draw-%3Eborder(1%2C%20'%23f00')%3B%5Cn%5Ct%7D)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22912c9798%22%7D\"></card><p data-lake-id=\"ufc4de046\" id=\"ufc4de046\"><br></p><p data-lake-id=\"u8c9b9609\" id=\"u8c9b9609\"><span data-lake-id=\"u632c1dd7\" id=\"u632c1dd7\">7.ellipse($width = 10, $height = 10, $x, $y [Closure $callback]) - 椭圆</span></p><p data-lake-id=\"u87878a06\" id=\"u87878a06\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E7%BB%99%E5%AE%9A%E7%9A%84x%E3%80%81y%E5%9D%90%E6%A0%87%E7%82%B9%EF%BC%8C%E7%BB%98%E5%88%B6%E5%BD%A9%E8%89%B2%E6%A4%AD%E5%9C%86%E3%80%82%E5%8F%AF%E4%BB%A5%E5%AE%9A%E4%B9%89%E5%AE%BD%E5%BA%A6%E5%92%8C%E9%AB%98%E5%BA%A6%EF%BC%8C%E4%BB%A5%E5%8F%8A%E9%80%9A%E8%BF%87%E5%8F%AF%E9%80%89%E7%9A%84%E9%97%AD%E5%8C%85%E5%9B%9E%E8%B0%83%E6%9D%A5%E8%AE%BE%E7%BD%AE%E6%A4%AD%E5%9C%86%E7%9A%84%E5%A4%96%E8%A7%82%5Cn%24callback%20%E5%8F%AF%E4%BD%BF%E7%94%A8%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E6%9D%A5%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E5%A4%96%E8%A7%82%EF%BC%9A%5Cn%5Ctbackground(%24color)%20-%20%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E8%83%8C%E6%99%AF%5Cn%5Ctborder(%24width%2C%20%24color)%20-%20%E5%AE%9A%E4%B9%89%E5%9C%86%E7%9A%84%E8%BE%B9%E6%A1%86%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22d7a09676%22%7D\"></card><p data-lake-id=\"uabb7582d\" id=\"uabb7582d\"><br></p><p data-lake-id=\"ufc740d75\" id=\"ufc740d75\"><span data-lake-id=\"u932a0ff9\" id=\"u932a0ff9\">图像的其它处理方法：<br /></span><span data-lake-id=\"u39c025e6\" id=\"u39c025e6\">1.fill($filling [, $x, $y]) - 图像填充</span></p><p data-lake-id=\"u7a5a31c7\" id=\"u7a5a31c7\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E4%BD%BF%E7%94%A8%E7%BB%99%E5%AE%9A%E9%A2%9C%E8%89%B2%E6%88%96%E5%8F%A6%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E6%9D%A5%E5%A1%AB%E5%85%85%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E3%80%82%E4%BC%A0%E9%80%92%E5%8F%AF%E9%80%89%E7%9A%84x%E3%80%81y%E5%9D%90%E6%A0%87%EF%BC%8C%E8%A1%A8%E7%A4%BA%E5%BC%80%E5%A7%8B%E5%A1%AB%E5%85%85%E7%9A%84%E4%BD%8D%E7%BD%AE%E3%80%82%5Cn%E5%A6%82%E6%9E%9C%E6%8C%87%E5%AE%9A%E4%BA%86x%E3%80%81y%E5%9D%90%E6%A0%87%EF%BC%8C%E5%8E%9F%E5%A7%8B%E5%9B%BE%E5%83%8F%E4%B8%8A%E8%AF%A5%E5%9D%90%E6%A0%87%E7%9A%84%E9%A2%9C%E8%89%B2%EF%BC%8C%E5%B0%86%E6%89%A7%E8%A1%8C%E6%B3%9B%E7%BA%A2%E5%A1%AB%E5%85%85(flood%20fill)%E3%80%82%E5%A6%82%E6%9E%9C%E6%9C%AA%E6%8C%87%E5%AE%9A%E5%9D%90%E6%A0%87%EF%BC%8C%E4%B8%8D%E7%AE%A1%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E5%A1%AB%E5%85%85%E6%95%B4%E4%B8%AA%E5%9B%BE%E5%83%8F%5Cn%5Cn%24filling%20-%20%E5%A1%AB%E5%85%85%E9%A2%9C%E8%89%B2%E6%88%96%E5%9B%BE%E5%83%8F%E6%A8%A1%E5%BC%8F%E3%80%82%E5%9B%BE%E5%83%8F%E8%B5%84%E6%BA%90%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%EF%BC%9A%5Cn%5Ctstring%20-%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9B%BE%E7%89%87%E8%B7%AF%E5%BE%84%5Cn%5Ctstring%20-%20%E5%9B%BE%E7%89%87%E7%9A%84URL%E5%9C%B0%E5%9D%80(allow_url_fopen%E5%BF%85%E9%A1%BB%E5%90%AF%E7%94%A8)%5Cn%5Ctstring%20-%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%5Cn%5Ctstring%20-%20data-url%E7%BC%96%E7%A0%81%E7%9A%84%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%5Cn%5Ctstring%20-%20base64%E7%BC%96%E7%A0%81%E7%9A%84%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%5Cn%5Ctresource%20-%20gd%E7%B1%BB%E5%9E%8B%E7%9A%84PHP%E8%B5%84%E6%BA%90(%E5%BD%93%E4%BD%BF%E7%94%A8GD%E5%BA%93)%5Cn%5Ctobject%20-%20Imagick%E5%AE%9E%E4%BE%8B(%E5%BD%93%E4%BD%BF%E7%94%A8Imagick%E5%BA%93)%5Cn%5Ctobject%20-%20Intervention%5C%5CImage%5C%5CImage%20%E5%AE%9E%E4%BE%8B%5Cn%5Ctobject%20-%20SplFileInfo%20instance%20(To%20handle%20Laravel%20file%20uploads%20via%20Symfony%5C%5CComponent%5C%5CHttpFoundation%5C%5CFile%5C%5CUploadedFile)%20-%20laravel%E6%A1%86%E6%9E%B6%E8%87%AA%E5%B8%A6%E7%9A%84%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E5%AE%9E%E4%BE%8B%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Acanvas(800%2C%20600)%3B%5Cn%5Ct%24img-%3Efill('%23ccc')%3B%5Cn%5Ct%24img-%3Efill('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Efill('%23f0f'%2C%200%2C%200)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22f15fd254%22%7D\"></card><p data-lake-id=\"u233292cb\" id=\"u233292cb\"><br></p><p data-lake-id=\"ub38b031b\" id=\"ub38b031b\"><span data-lake-id=\"u96558ac8\" id=\"u96558ac8\">2.insert($source [, $position [, $x, $y]]) - 插入图片</span></p><p data-lake-id=\"udf386839\" id=\"udf386839\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%B0%86%E4%B8%80%E4%B8%AA%E7%BB%99%E5%AE%9A%E7%9A%84%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%E6%8F%92%E5%85%A5%E5%88%B0%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E4%B8%AD%E3%80%82%5Cn%5Cn%24source%20-%20%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%5Cn%5Cn%24position%20-%20%E4%BD%8D%E7%BD%AE(%E7%9B%B8%E5%AF%B9%E4%BA%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F)%5Cn%5Cttop-left(%E9%BB%98%E8%AE%A4)%5Cn%5Cttop%5Cn%5Cttop-right%5Cn%5Ctleft%5Cn%5Ctcenter%5Cn%5Ctright%5Cn%5Ctbottom-left%5Cn%5Ctbottom%5Cn%5Ctbottom-right%5Cn%5Cn%24x%2C%24y%20-%20%E5%81%8F%E7%A7%BB%E5%9D%90%E6%A0%87(%E9%BB%98%E8%AE%A4%EF%BC%9A0.0)%5Cn%5Ct%E5%9C%A8%20%24position%20%E6%8C%87%E5%AE%9A%E7%9A%84%E4%BD%8D%E7%BD%AE%E4%B8%8A%EF%BC%8C%E5%86%8D%E8%BF%9B%E8%A1%8C%E7%9B%B8%E5%AF%B9%E5%81%8F%E7%A7%BB%5Cn%5Cn%E6%AD%A4%E6%96%B9%E6%B3%95%E5%8F%AF%E7%94%A8%E4%BA%8E%EF%BC%8C%E5%B0%86%E5%8F%A6%E4%B8%80%E5%BC%A0%E5%9B%BE%E5%83%8F%E4%BD%9C%E4%B8%BA%E6%B0%B4%E5%8D%B0%EF%BC%8C%E5%9B%A0%E4%B8%BA%E4%BF%9D%E6%8C%81%E4%BA%86%E9%80%8F%E6%98%8E%E5%BA%A6%E3%80%82%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24img-%3Einsert('public%2Fbar.png')%3B%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20%E6%8F%92%E5%85%A5%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%9B%BE%E7%89%87%5Cn%5Ct%24watermark%20%3D%20Image%3A%3Amake('public%2Fwatermark.png')%3B%5Ct%5Ct%5Ct%5Ct%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%9B%BE%E7%89%87%E5%AE%9E%E4%BE%8B%5Cn%5Ct%24img-%3Einsert(%24watermark%2C%20'center')%3B%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87%5Cn%5Ct%24img-%3Einsert('public%2Fwatermark.png'%2C%20'bottom-right'%2C%2010%2C%2010)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22fb82a691%22%7D\"></card><p data-lake-id=\"ue8acce14\" id=\"ue8acce14\"><br></p><p data-lake-id=\"ufb70160a\" id=\"ufb70160a\"><span data-lake-id=\"uf491d313\" id=\"uf491d313\">3.pickColor($x, $y [string $format]) - 选取给定坐标颜色</span></p><p data-lake-id=\"u4dbe8682\" id=\"u4dbe8682\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E5%9C%A8%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E4%B8%8A%E7%9A%84%E6%8C%87%E5%AE%9A%E5%9D%90%E6%A0%87%EF%BC%8C%E8%8E%B7%E5%8F%96%E9%A2%9C%E8%89%B2%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%BB%99%E5%AE%9A%E7%9A%84%E9%A2%9C%E8%89%B2%E6%A0%BC%E5%BC%8F%5Cn%24format%20-%20%E9%A2%9C%E8%89%B2%E6%A0%BC%E5%BC%8F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%98%AF%EF%BC%9A%5Cn%5Ctarray%20-%20array(255%2C%20255%2C%20255%2C%201)%5Cn%5Ctrgb%20-%20rgb(255%2C%20255%2C%20255)%5Cn%5Ctrgba%20-%20rgba(255%2C%20255%2C%20255%2C%200.5)%5Cn%5Cthex%20-%20%23cccccc%5Cn%5Ctint%20-%2016776956%5Cn%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E8%AF%A5%E6%96%B9%E6%B3%95%E5%B0%86%E5%83%8F%E7%B4%A0%E7%9A%84RGB%E5%80%BC%E4%BD%9C%E4%B8%BA%E6%95%B0%E7%BB%84%E8%BF%94%E5%9B%9E%E3%80%82%E4%BD%BF%E7%94%A8%E6%95%B4%E6%95%B0%E6%A0%BC%E5%BC%8F%EF%BC%8C%E5%B0%86%E9%A2%9C%E8%89%B2%E7%9B%B4%E6%8E%A5%E4%BC%A0%E9%80%92%E7%BB%99%E4%BB%BB%E6%84%8FGD%E5%BA%93%E5%87%BD%E6%95%B0%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2239e7e41a%22%7D\"></card><p data-lake-id=\"ucac01800\" id=\"ucac01800\"><br></p><p data-lake-id=\"ufe862eab\" id=\"ufe862eab\"><span data-lake-id=\"ue4632040\" id=\"ue4632040\">检索信息：<br /></span><span data-lake-id=\"u3c5402e6\" id=\"u3c5402e6\">1.width()<br /></span><span data-lake-id=\"ua5aadfea\" id=\"ua5aadfea\">获取当前图片的宽度(单位：px)</span></p><p data-lake-id=\"ucc1aa728\" id=\"ucc1aa728\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24width%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Ewidth()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22c8b0ac52%22%7D\"></card><p data-lake-id=\"ua85ccb9c\" id=\"ua85ccb9c\"><br></p><p data-lake-id=\"ub63b4c70\" id=\"ub63b4c70\"><span data-lake-id=\"u82cdb449\" id=\"u82cdb449\">2.height()<br /></span><span data-lake-id=\"u970f7d84\" id=\"u970f7d84\">获取当前图片的高度(单位：px)</span></p><p data-lake-id=\"u7258613b\" id=\"u7258613b\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24height%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Eheight()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22b4e8b05f%22%7D\"></card><p data-lake-id=\"u955a4646\" id=\"u955a4646\"><br></p><p data-lake-id=\"uf37b7384\" id=\"uf37b7384\"><span data-lake-id=\"u384a354f\" id=\"u384a354f\">3.mime()<br /></span><span data-lake-id=\"ucc6f6c4b\" id=\"ucc6f6c4b\">如果已经图像已经定义了MIME类型，从当前图像实例中读取MIME类型。</span></p><p data-lake-id=\"uadb45d7c\" id=\"uadb45d7c\"><br></p><p data-lake-id=\"u927b8ee5\" id=\"u927b8ee5\"><span data-lake-id=\"u766c892e\" id=\"u766c892e\">4.exif([string </span><card type=\"inline\" name=\"math\" value=\"data:%7B%22code%22%3A%22key%5D)%5Cn%E4%BB%8E%E5%BD%93%E5%89%8D%E5%9B%BE%E5%83%8F%E8%AF%BB%E5%8F%96%20'Exif'%20%E5%85%83%E6%95%B0%E6%8D%AE%E3%80%82%E5%BF%85%E9%A1%BB%E4%BB%8E%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E6%98%AF%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%9B%BE%E5%83%8F%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%89%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E8%AF%BB%E5%8F%96EXIF%E6%95%B0%E6%8D%AE%5Cnimagick%E4%BB%8E2.3.9%E5%BC%80%E5%A7%8B%E6%94%AF%E6%8C%81exif%E3%80%82PHP%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%8C%85%E5%90%AB%20'--enable-exif'%20%E6%89%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E3%80%82windows%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%98%E5%BF%85%E9%A1%BB%E5%BC%80%E5%90%AF%20'mbstring'%20%E6%89%A9%E5%B1%95(PHP%E6%89%8B%E5%86%8C%E6%9C%89%E8%AF%A5%E5%87%BD%E6%95%B0%E5%BA%93)%5Cn%22%2C%22src%22%3A%22https%3A%2F%2Fg.yuque.com%2Fgr%2Flatex%3Fkey%255D)%250A%25E4%25BB%258E%25E5%25BD%2593%25E5%2589%258D%25E5%259B%25BE%25E5%2583%258F%25E8%25AF%25BB%25E5%258F%2596%2520'Exif'%2520%25E5%2585%2583%25E6%2595%25B0%25E6%258D%25AE%25E3%2580%2582%25E5%25BF%2585%25E9%25A1%25BB%25E4%25BB%258E%25E6%2596%2587%25E4%25BB%25B6%25E8%25B7%25AF%25E5%25BE%2584%25E6%2598%25AF%25E5%25AE%259E%25E4%25BE%258B%25E5%258C%2596%25E5%259B%25BE%25E5%2583%258F%25E5%25AF%25B9%25E8%25B1%25A1%25EF%25BC%258C%25E6%2589%258D%25E8%2583%25BD%25E6%25AD%25A3%25E7%25A1%25AE%25E8%25AF%25BB%25E5%258F%2596EXIF%25E6%2595%25B0%25E6%258D%25AE%250Aimagick%25E4%25BB%258E2.3.9%25E5%25BC%2580%25E5%25A7%258B%25E6%2594%25AF%25E6%258C%2581exif%25E3%2580%2582PHP%25E7%25BC%2596%25E8%25AF%2591%25E6%2597%25B6%25EF%25BC%258C%25E5%25BF%2585%25E9%25A1%25BB%25E5%258C%2585%25E5%2590%25AB%2520'--enable-exif'%2520%25E6%2589%258D%25E8%2583%25BD%25E4%25BD%25BF%25E7%2594%25A8%25E8%25BF%2599%25E4%25B8%25AA%25E6%2596%25B9%25E6%25B3%2595%25E3%2580%2582windows%25E7%2594%25A8%25E6%2588%25B7%25EF%25BC%258C%25E8%25BF%2598%25E5%25BF%2585%25E9%25A1%25BB%25E5%25BC%2580%25E5%2590%25AF%2520'mbstring'%2520%25E6%2589%25A9%25E5%25B1%2595(PHP%25E6%2589%258B%25E5%2586%258C%25E6%259C%2589%25E8%25AF%25A5%25E5%2587%25BD%25E6%2595%25B0%25E5%25BA%2593)%250A%22%2C%22id%22%3A%22cys3F%22%7D\"></card><span data-lake-id=\"u478ed942\" id=\"u478ed942\">key - 检索的exif哪个下标</span></p><p data-lake-id=\"u7e80c617\" id=\"u7e80c617\"><br></p><p data-lake-id=\"u9a024b0f\" id=\"u9a024b0f\"><span data-lake-id=\"u9989ed92\" id=\"u9989ed92\">5.iptc([string $key])<br /></span><span data-lake-id=\"u9edf4aa9\" id=\"u9edf4aa9\">从当前图像中读取 'IPTC' 元数据<br /></span><span data-lake-id=\"uebb66639\" id=\"uebb66639\">默认获取所有元数据，可以传递下标，来获取指定的元数据。没有发现元数据，返回 'NULL'</span></p><p data-lake-id=\"u286bd0b0\" id=\"u286bd0b0\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24data%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Eiptc()%3B%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%5Cn%5Cn%5Ct%24copyright%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')-%3Eiptc('Copyright')%3B%5Ct%5Ct%2F%2F%20%E8%8E%B7%E5%8F%96%20'Copyright'%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%228e0f237a%22%7D\"></card><p data-lake-id=\"u1060959f\" id=\"u1060959f\"><br></p><p data-lake-id=\"u8ddc5bbf\" id=\"u8ddc5bbf\"><span data-lake-id=\"ua2da93c5\" id=\"ua2da93c5\">6.filezise()<br /></span><span data-lake-id=\"uca3b1c83\" id=\"uca3b1c83\">如果实例是从一个真实文件初始化的，获取当前图像实例的文件尺寸<br /></span><span data-lake-id=\"u2a223a19\" id=\"u2a223a19\">返回图像的尺寸大小，单位是 'bytes - 字节'，如果不是从一个文件创建的图像实例，则返回false</span></p><p data-lake-id=\"u5f873a49\" id=\"u5f873a49\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Ct%24img%20%3D%20Image%3A%3Amake('public%2Ffoo.jpg')%3B%5Cn%5Ct%24size%20%3D%20%24img-%3Efilesize()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2213ab79b6%22%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 6949,
    "created_at": "2022-06-24T08:41:22.000Z",
    "updated_at": "2022-11-06T21:14:32.000Z",
    "content_updated_at": "2022-06-24T08:58:03.000Z",
    "published_at": "2022-06-24T08:58:03.000Z",
    "first_published_at": "2022-06-24T08:55:20.235Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1066053639,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 80631872,
    "type": "Doc",
    "slug": "quq4eo",
    "title": "Env环境变量类库",
    "description": "tags: [env,环境变量,类库]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:<?php   /**   * Created ...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [env,环境变量,类库]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><pre data-language=\"php\" id=\"68497ee0\" class=\"ne-codeblock language-php\"><code>&lt;?php\n  /**\n  * Created by PhpStorm.\n  * User: 小灰灰\n  * Date: 2022-04-26\n  * Time: 21:53:40\n  * Info:\n  */\n  namespace support\\lib;\nEnv::load();\nclass Env\n{\n  \n  /**\n  * 环境变量数据\n  * @var array\n  */\n  protected static $data = [];\n  \n  /**\n  * 读取环境变量定义文件\n  * @access public\n  *\n  * @param string $file 环境变量定义文件\n  *\n  * @return void\n  */\n  public static function load($file = '.env')\n  {\n    if ( ! is_file($file)) {\n      return;\n    }\n    $env = parse_ini_file($file, true);\n    self::set($env);\n  }\n  \n  /**\n  * 获取环境变量值\n  * @access public\n  *\n  * @param string $name    环境变量名\n  * @param mixed  $default 默认值\n  */\n  public static function get($name = null, $default = null)\n  {\n    if ($name == null) {\n      return self::$data;\n    }\n    $name = strtoupper($name);\n    $name = strtoupper(str_replace('.', '_', $name));\n    if (isset(self::$data[$name])) {\n      return self::$data[$name];\n    }\n    \n    return $default;\n  }\n  \n  /**\n  * 设置环境变量值\n  * @access public\n  *\n  * @param string|array $env   环境变量\n  * @param mixed        $value 值\n  *\n  * @return void\n  */\n  public static function set($env, $value = null)\n  {\n    if (is_array($env)) {\n      $env = array_change_key_case($env, CASE_UPPER);\n      foreach ($env as $key =&gt; $val) {\n        if (is_array($val)) {\n          foreach ($val as $k =&gt; $v) {\n            self::$data[$key.'_'.strtoupper($k)] = $v;\n          }\n        } else {\n          self::$data[$key] = $val;\n        }\n      }\n    } else {\n      $name              = strtoupper(str_replace('.', '_', $env));\n      self::$data[$name] = $value;\n    }\n  }\n}</code></pre><p id=\"uacc89832\" class=\"ne-p\"><br></p><p id=\"u5b0a7fba\" class=\"ne-p\"><span class=\"ne-text\">使用方法：</span></p><p id=\"ub5c65ccb\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"ef1eb744\" class=\"ne-codeblock language-php\"><code>use support\\lib\\Env;\n\nEnv::get('SQL.DB_DEFAULT', 'mysql')</code></pre><p id=\"ud9751753\" class=\"ne-p\"><br></p><p id=\"uf4cbe955\" class=\"ne-p\"><span class=\"ne-text\">.env文件：</span></p><p id=\"uf3dc6f8e\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8ac290ae\" class=\"ne-codeblock language-plain\"><code>[SQL]\nDB_DEFAULT = mysql\nHOSTNAME = 127.0.0.1\nDATABASE = database\nDBNAME = root\nDBPASS = 123456\nHOSTPOINT = 3306\nPREFIX = cmf_</code></pre><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p></div>",
    "body": "tags: [env,环境变量,类库]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n```php\n<?php\n  /**\n  * Created by PhpStorm.\n  * User: 小灰灰\n  * Date: 2022-04-26\n  * Time: 21:53:40\n  * Info:\n  */\n  namespace support\\lib;\nEnv::load();\nclass Env\n{\n  \n  /**\n  * 环境变量数据\n  * @var array\n  */\n  protected static $data = [];\n  \n  /**\n  * 读取环境变量定义文件\n  * @access public\n  *\n  * @param string $file 环境变量定义文件\n  *\n  * @return void\n  */\n  public static function load($file = '.env')\n  {\n    if ( ! is_file($file)) {\n      return;\n    }\n    $env = parse_ini_file($file, true);\n    self::set($env);\n  }\n  \n  /**\n  * 获取环境变量值\n  * @access public\n  *\n  * @param string $name    环境变量名\n  * @param mixed  $default 默认值\n  */\n  public static function get($name = null, $default = null)\n  {\n    if ($name == null) {\n      return self::$data;\n    }\n    $name = strtoupper($name);\n    $name = strtoupper(str_replace('.', '_', $name));\n    if (isset(self::$data[$name])) {\n      return self::$data[$name];\n    }\n    \n    return $default;\n  }\n  \n  /**\n  * 设置环境变量值\n  * @access public\n  *\n  * @param string|array $env   环境变量\n  * @param mixed        $value 值\n  *\n  * @return void\n  */\n  public static function set($env, $value = null)\n  {\n    if (is_array($env)) {\n      $env = array_change_key_case($env, CASE_UPPER);\n      foreach ($env as $key => $val) {\n        if (is_array($val)) {\n          foreach ($val as $k => $v) {\n            self::$data[$key.'_'.strtoupper($k)] = $v;\n          }\n        } else {\n          self::$data[$key] = $val;\n        }\n      }\n    } else {\n      $name              = strtoupper(str_replace('.', '_', $env));\n      self::$data[$name] = $value;\n    }\n  }\n}\n```\n\n使用方法：\n\n```php\nuse support\\lib\\Env;\n\nEnv::get('SQL.DB_DEFAULT', 'mysql')\n```\n\n.env文件：\n\n```\n[SQL]\nDB_DEFAULT = mysql\nHOSTNAME = 127.0.0.1\nDATABASE = database\nDBNAME = root\nDBPASS = 123456\nHOSTPOINT = 3306\nPREFIX = cmf_\n```\n\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [env,环境变量,类库]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><pre data-language=\"php\" id=\"68497ee0\" class=\"ne-codeblock language-php\">&lt;?php\n  /**\n  * Created by PhpStorm.\n  * User: 小灰灰\n  * Date: 2022-04-26\n  * Time: 21:53:40\n  * Info:\n  */\n  namespace support\\lib;\nEnv::load();\nclass Env\n{\n  \n  /**\n  * 环境变量数据\n  * @var array\n  */\n  protected static $data = [];\n  \n  /**\n  * 读取环境变量定义文件\n  * @access public\n  *\n  * @param string $file 环境变量定义文件\n  *\n  * @return void\n  */\n  public static function load($file = '.env')\n  {\n    if ( ! is_file($file)) {\n      return;\n    }\n    $env = parse_ini_file($file, true);\n    self::set($env);\n  }\n  \n  /**\n  * 获取环境变量值\n  * @access public\n  *\n  * @param string $name    环境变量名\n  * @param mixed  $default 默认值\n  */\n  public static function get($name = null, $default = null)\n  {\n    if ($name == null) {\n      return self::$data;\n    }\n    $name = strtoupper($name);\n    $name = strtoupper(str_replace('.', '_', $name));\n    if (isset(self::$data[$name])) {\n      return self::$data[$name];\n    }\n    \n    return $default;\n  }\n  \n  /**\n  * 设置环境变量值\n  * @access public\n  *\n  * @param string|array $env   环境变量\n  * @param mixed        $value 值\n  *\n  * @return void\n  */\n  public static function set($env, $value = null)\n  {\n    if (is_array($env)) {\n      $env = array_change_key_case($env, CASE_UPPER);\n      foreach ($env as $key =&gt; $val) {\n        if (is_array($val)) {\n          foreach ($val as $k =&gt; $v) {\n            self::$data[$key.'_'.strtoupper($k)] = $v;\n          }\n        } else {\n          self::$data[$key] = $val;\n        }\n      }\n    } else {\n      $name              = strtoupper(str_replace('.', '_', $env));\n      self::$data[$name] = $value;\n    }\n  }\n}</pre><p id=\"uacc89832\" class=\"ne-p\"><br></p><p id=\"u5b0a7fba\" class=\"ne-p\"><span class=\"ne-text\">使用方法：</span></p><p id=\"ub5c65ccb\" class=\"ne-p\"><br></p><pre data-language=\"php\" id=\"ef1eb744\" class=\"ne-codeblock language-php\">use support\\lib\\Env;\n\nEnv::get('SQL.DB_DEFAULT', 'mysql')</pre><p id=\"ud9751753\" class=\"ne-p\"><br></p><p id=\"uf4cbe955\" class=\"ne-p\"><span class=\"ne-text\">.env文件：</span></p><p id=\"uf3dc6f8e\" class=\"ne-p\"><br></p><pre data-language=\"plain\" id=\"8ac290ae\" class=\"ne-codeblock language-plain\">[SQL]\nDB_DEFAULT = mysql\nHOSTNAME = 127.0.0.1\nDATABASE = database\nDBNAME = root\nDBPASS = 123456\nHOSTPOINT = 3306\nPREFIX = cmf_</pre><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [env,环境变量,类库]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"ua0e54973\" id=\"ua0e54973\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uaebb4464\" id=\"uaebb4464\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%20%20%2F**%5Cn%20%20*%20Created%20by%20PhpStorm.%5Cn%20%20*%20User%3A%20%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20%20*%20Date%3A%202022-04-26%5Cn%20%20*%20Time%3A%2021%3A53%3A40%5Cn%20%20*%20Info%3A%5Cn%20%20*%2F%5Cn%20%20namespace%20support%5C%5Clib%3B%5CnEnv%3A%3Aload()%3B%5Cnclass%20Env%5Cn%7B%5Cn%20%20%5Cn%20%20%2F**%5Cn%20%20*%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%95%B0%E6%8D%AE%5Cn%20%20*%20%40var%20array%5Cn%20%20*%2F%5Cn%20%20protected%20static%20%24data%20%3D%20%5B%5D%3B%5Cn%20%20%5Cn%20%20%2F**%5Cn%20%20*%20%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%5Cn%20%20*%20%40access%20public%5Cn%20%20*%5Cn%20%20*%20%40param%20string%20%24file%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%5Cn%20%20*%5Cn%20%20*%20%40return%20void%5Cn%20%20*%2F%5Cn%20%20public%20static%20function%20load(%24file%20%3D%20'.env')%5Cn%20%20%7B%5Cn%20%20%20%20if%20(%20!%20is_file(%24file))%20%7B%5Cn%20%20%20%20%20%20return%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%24env%20%3D%20parse_ini_file(%24file%2C%20true)%3B%5Cn%20%20%20%20self%3A%3Aset(%24env)%3B%5Cn%20%20%7D%5Cn%20%20%5Cn%20%20%2F**%5Cn%20%20*%20%E8%8E%B7%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%80%BC%5Cn%20%20*%20%40access%20public%5Cn%20%20*%5Cn%20%20*%20%40param%20string%20%24name%20%20%20%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%90%8D%5Cn%20%20*%20%40param%20mixed%20%20%24default%20%E9%BB%98%E8%AE%A4%E5%80%BC%5Cn%20%20*%2F%5Cn%20%20public%20static%20function%20get(%24name%20%3D%20null%2C%20%24default%20%3D%20null)%5Cn%20%20%7B%5Cn%20%20%20%20if%20(%24name%20%3D%3D%20null)%20%7B%5Cn%20%20%20%20%20%20return%20self%3A%3A%24data%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%24name%20%3D%20strtoupper(%24name)%3B%5Cn%20%20%20%20%24name%20%3D%20strtoupper(str_replace('.'%2C%20'_'%2C%20%24name))%3B%5Cn%20%20%20%20if%20(isset(self%3A%3A%24data%5B%24name%5D))%20%7B%5Cn%20%20%20%20%20%20return%20self%3A%3A%24data%5B%24name%5D%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20return%20%24default%3B%5Cn%20%20%7D%5Cn%20%20%5Cn%20%20%2F**%5Cn%20%20*%20%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%80%BC%5Cn%20%20*%20%40access%20public%5Cn%20%20*%5Cn%20%20*%20%40param%20string%7Carray%20%24env%20%20%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%5Cn%20%20*%20%40param%20mixed%20%20%20%20%20%20%20%20%24value%20%E5%80%BC%5Cn%20%20*%5Cn%20%20*%20%40return%20void%5Cn%20%20*%2F%5Cn%20%20public%20static%20function%20set(%24env%2C%20%24value%20%3D%20null)%5Cn%20%20%7B%5Cn%20%20%20%20if%20(is_array(%24env))%20%7B%5Cn%20%20%20%20%20%20%24env%20%3D%20array_change_key_case(%24env%2C%20CASE_UPPER)%3B%5Cn%20%20%20%20%20%20foreach%20(%24env%20as%20%24key%20%3D%3E%20%24val)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(is_array(%24val))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20foreach%20(%24val%20as%20%24k%20%3D%3E%20%24v)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20self%3A%3A%24data%5B%24key.'_'.strtoupper(%24k)%5D%20%3D%20%24v%3B%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20self%3A%3A%24data%5B%24key%5D%20%3D%20%24val%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%24name%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20strtoupper(str_replace('.'%2C%20'_'%2C%20%24env))%3B%5Cn%20%20%20%20%20%20self%3A%3A%24data%5B%24name%5D%20%3D%20%24value%3B%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%2268497ee0%22%7D\"></card><p data-lake-id=\"uacc89832\" id=\"uacc89832\"><br></p><p data-lake-id=\"u5b0a7fba\" id=\"u5b0a7fba\"><span data-lake-id=\"u3e7b0d97\" id=\"u3e7b0d97\">使用方法：</span></p><p data-lake-id=\"ub5c65ccb\" id=\"ub5c65ccb\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20support%5C%5Clib%5C%5CEnv%3B%5Cn%5CnEnv%3A%3Aget('SQL.DB_DEFAULT'%2C%20'mysql')%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%22ef1eb744%22%7D\"></card><p data-lake-id=\"ud9751753\" id=\"ud9751753\"><br></p><p data-lake-id=\"uf4cbe955\" id=\"uf4cbe955\"><span data-lake-id=\"u1fc8ff97\" id=\"u1fc8ff97\">.env文件：</span></p><p data-lake-id=\"uf3dc6f8e\" id=\"uf3dc6f8e\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5BSQL%5D%5CnDB_DEFAULT%20%3D%20mysql%5CnHOSTNAME%20%3D%20127.0.0.1%5CnDATABASE%20%3D%20database%5CnDBNAME%20%3D%20root%5CnDBPASS%20%3D%20123456%5CnHOSTPOINT%20%3D%203306%5CnPREFIX%20%3D%20cmf_%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22id%22%3A%228ac290ae%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 305,
    "created_at": "2022-06-17T01:16:25.000Z",
    "updated_at": "2023-07-27T02:06:12.000Z",
    "content_updated_at": "2023-07-27T02:06:12.000Z",
    "published_at": "2022-06-17T01:17:31.000Z",
    "first_published_at": "2022-06-17T01:17:31.002Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1052010627,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 79782496,
    "type": "Doc",
    "slug": "hiryva",
    "title": "VsCode下载，使用国内镜像秒下载",
    "description": "tags: [镜像,vscode,下载]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:~还在因为vscode官方下载慢而头疼嘛，按这个...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u06ea8685\" class=\"ne-p\"><span class=\"ne-text\">tags: [镜像,vscode,下载]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"M9iK9\" class=\"ne-hr\"><p id=\"u2574afcc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">~还在因为</span><span class=\"ne-text\">vscode</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">官方下载慢而头疼嘛，按这个步骤来直接起飞兄弟萌</span></p><ol class=\"ne-ol\"><li id=\"ueb91358d\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">首先进入vscode</span><span class=\"ne-text\">官方网站</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">然后选择对应版本下载</span></li><li id=\"u61d4aadd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">然后进入浏览器下载页面</span></li><li id=\"ub5d70008\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">复制下载链接粘贴到地址栏</span></li></ol><p id=\"u8bd158d9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">将地址中的</span></p><p id=\"ubca421dd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: #E8323C\">/stable</span><span class=\"ne-text\"> 前换成 </span><strong><span class=\"ne-text\" style=\"color: #E8323C\">vscode.cdn.azure.cn</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">即可实现超速下载</span></p><p id=\"udb94f7c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">下面是一个国内镜像的下载链接</span></p><p id=\"u1a6b1aec\" class=\"ne-p\"><a href=\"https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe\" data-href=\"https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe</span></a></p></div>",
    "body": "tags: [镜像,vscode,下载]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n~还在因为vscode官方下载慢而头疼嘛，按这个步骤来直接起飞兄弟萌\n\n1. 首先进入vscode官方网站然后选择对应版本下载\n2. 然后进入浏览器下载页面\n3. 复制下载链接粘贴到地址栏\n\n将地址中的<br />/stable 前换成 **vscode.cdn.azure.cn**<br />即可实现超速下载<br />下面是一个国内镜像的下载链接<br />[https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe](https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u06ea8685\" class=\"ne-p\"><span class=\"ne-text\">tags: [镜像,vscode,下载]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"M9iK9\" class=\"ne-hr\"><p id=\"u2574afcc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">~还在因为</span><span class=\"ne-text\">vscode</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">官方下载慢而头疼嘛，按这个步骤来直接起飞兄弟萌</span></p><ol class=\"ne-ol\"><li id=\"ueb91358d\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">首先进入vscode</span><span class=\"ne-text\">官方网站</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">然后选择对应版本下载</span></li><li id=\"u61d4aadd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">然后进入浏览器下载页面</span></li><li id=\"ub5d70008\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">复制下载链接粘贴到地址栏</span></li></ol><p id=\"u8bd158d9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">将地址中的</span></p><p id=\"ubca421dd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: #E8323C\">/stable</span><span class=\"ne-text\"> 前换成 </span><strong><span class=\"ne-text\" style=\"color: #E8323C\">vscode.cdn.azure.cn</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">即可实现超速下载</span></p><p id=\"udb94f7c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">下面是一个国内镜像的下载链接</span></p><p id=\"u1a6b1aec\" class=\"ne-p\"><a href=\"https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe\" data-href=\"https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe</span></a></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u06ea8685\" id=\"u06ea8685\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [镜像,vscode,下载]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"uaf2d7bf5\" id=\"uaf2d7bf5\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uef552ece\" id=\"uef552ece\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"u9c175d47\" id=\"u9c175d47\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22M9iK9%22%7D\"></card><p data-lake-id=\"u2574afcc\" id=\"u2574afcc\"><span data-lake-id=\"u196e0fd3\" id=\"u196e0fd3\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">~还在因为</span><span data-lake-id=\"ufcc4dc4a\" id=\"ufcc4dc4a\">vscode</span><span data-lake-id=\"udbfdea78\" id=\"udbfdea78\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">官方下载慢而头疼嘛，按这个步骤来直接起飞兄弟萌</span></p><ol list=\"u2bedf905\"><li fid=\"u33dab1fb\" data-lake-id=\"ueb91358d\" id=\"ueb91358d\"><span data-lake-id=\"ua48ecc53\" id=\"ua48ecc53\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">首先进入vscode</span><span data-lake-id=\"u3d0eced0\" id=\"u3d0eced0\">官方网站</span><span data-lake-id=\"ud8f251f3\" id=\"ud8f251f3\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">然后选择对应版本下载</span></li><li fid=\"u33dab1fb\" data-lake-id=\"u61d4aadd\" id=\"u61d4aadd\"><span data-lake-id=\"u184b94ba\" id=\"u184b94ba\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">然后进入浏览器下载页面</span></li><li fid=\"u33dab1fb\" data-lake-id=\"ub5d70008\" id=\"ub5d70008\"><span data-lake-id=\"u7d94e1ca\" id=\"u7d94e1ca\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">复制下载链接粘贴到地址栏</span></li></ol><p data-lake-id=\"u8bd158d9\" id=\"u8bd158d9\"><span data-lake-id=\"ua5910d2b\" id=\"ua5910d2b\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">将地址中的</span></p><p data-lake-id=\"ubca421dd\" id=\"ubca421dd\"><span data-lake-id=\"uc7b5c975\" id=\"uc7b5c975\" style=\"color: #E8323C\">/stable</span><span data-lake-id=\"u6f9b1306\" id=\"u6f9b1306\"> 前换成 </span><strong><span data-lake-id=\"u1d251f59\" id=\"u1d251f59\" style=\"color: #E8323C\">vscode.cdn.azure.cn</span></strong><span data-lake-id=\"ubc236b06\" id=\"ubc236b06\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"><br /></span><span data-lake-id=\"ub67103d1\" id=\"ub67103d1\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">即可实现超速下载</span></p><p data-lake-id=\"udb94f7c4\" id=\"udb94f7c4\"><span data-lake-id=\"u339fe90f\" id=\"u339fe90f\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">下面是一个国内镜像的下载链接</span></p><p data-lake-id=\"u1a6b1aec\" id=\"u1a6b1aec\"><a href=\"https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe\" target=\"_blank\" data-lake-id=\"u07f31e24\" id=\"u07f31e24\"><span data-lake-id=\"uc9483df6\" id=\"uc9483df6\">https://vscode.cdn.azure.cn/stable/c3511e6c69bb39013c4a4b7b9566ec1ca73fc4d5/VSCodeUserSetup-x64-1.67.2.exe</span></a></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 8,
    "hits": 8,
    "comments_count": 0,
    "word_count": 123,
    "created_at": "2022-06-08T01:12:40.000Z",
    "updated_at": "2023-08-09T02:38:50.000Z",
    "content_updated_at": "2023-08-09T02:38:50.000Z",
    "published_at": "2023-08-09T02:38:50.000Z",
    "first_published_at": "2022-06-08T01:14:10.926Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913893292,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 79717788,
    "type": "Doc",
    "slug": "be3q2o",
    "title": "【亲测成功】Navicat Premium for Win v16.0.13 完美激活版附激活工具",
    "description": "tags: [navicat,激活,破解,补丁]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:Navicat Premium是一个数...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1654584961477-3a7101bd-b652-44c7-aa6c-023e24738fb8.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [navicat,激活,破解,补丁]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">Navicat Premium是一个数据库开发工具，允许你同时连接MySQL、MariaDB、MongoDB、SQL Server、Oracle、PostgreSQL和SQLite数据库。兼容Amazon RDS、Amazon Aurora、Amazon Redshift、Microsoft Azure、Oracle cloud、谷歌cloud、MongoDB Atlas等云数据库。您可以快速、轻松地构建、管理和维护数据库。</span></p><p id=\"u4abd0037\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654584961477-3a7101bd-b652-44c7-aa6c-023e24738fb8.png\" width=\"585.0566248284331\" id=\"u54864953\" class=\"ne-image\"></p><h1 id=\"BpnXQ\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">新功能和改进:</span></h1><h2 id=\"WqFbA\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">图表</span></h2><p id=\"u49a88710\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">将您的数据库数据转换为可视化数据，以便通过图表和图形获得清晰的洞察力。</span></p><h2 id=\"h0taJ\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">数据传输</span></h2><p id=\"u4014cfdc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">版本15中发布了一种传输数据的新方法。我们的新设计提供了一个直观的界面，用于自定义字段和指定希望传输的行数。</span></p><p id=\"u0a022a34\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"></span></p><h2 id=\"l78z1\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">SQL Builder</span></h2><p id=\"u18478253\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">我们设计了一种全新的机制来提高SQL Builder的用户体验和查询书写的整体效率。</span></p><h2 id=\"b5Cdr\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">建模</span></h2><p id=\"u2cfc1b51\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">交付模型和数据库之间的差异的全貌，并生成更新目标数据库的脚本。</span></p><h2 id=\"qZuY3\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">黑暗的模式</span></h2><p id=\"u01fe2bf6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">暗模式支持已经到达我们的15个更新。设置黑暗主题，以保护您的眼睛从传统致盲的白色电脑。</span></p><h2 id=\"mvKaM\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">本地Linux</span></h2><p id=\"u4b06e991\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">本地Linux支持现在添加到我们的Navicat家族。您可以享受与Linux系统的用户体验更好匹配的UI。</span></p><p id=\"u7ef7ef0c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"></span></p><h1 id=\"gJ96m\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">破解教程:</span></h1><h2 id=\"iKAdI\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第一步,安装软件</span></h2><p id=\"u1737ae65\" class=\"ne-p\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585089035-df5c1914-ebc3-4802-ac60-a19e09951401.png\" width=\"539.7736043308763\" id=\"u68dffc5c\" class=\"ne-image\"></p><h2 id=\"ql2JW\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第二步,复制补丁</span></h2><p id=\"ue1e5384f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">把破解补丁复制到Navicat Premium安装目录;</span></p><p id=\"u7e1ca505\" class=\"ne-p\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585130997-13a62685-5a93-4cdf-bb93-f085b6648c4b.png\" width=\"292\" id=\"ud0e06887\" class=\"ne-image\"></p><p id=\"uc3276d32\" class=\"ne-p\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585140429-1503f3ee-f528-426f-969e-199bf2bc1dcb.png\" width=\"396\" id=\"u00c8d220\" class=\"ne-image\"></p><h2 id=\"yzk6Y\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第三步,打开软件选择到注册页面；</span></h2><p id=\"ubc3a2ff8\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585180261-e62680da-2181-41e2-b9d2-7c78bc9a891c.png\" width=\"1414\" id=\"u1ccd4e11\" class=\"ne-image\"></p><h1 id=\"bVHUC\"><span class=\"ne-text\">第四步，打开破解补丁软件</span></h1><p id=\"ud6421843\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585225674-6b3b2f23-5395-4364-a443-6104509b68c7.png\" width=\"864\" id=\"u541539b3\" class=\"ne-image\"></p><p id=\"u9f7d3929\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585233097-a9a0f4c6-5907-446a-80ca-171c69173514.png\" width=\"792\" id=\"ub25c28ea\" class=\"ne-image\"></p><p id=\"u0b0835f0\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585241595-53b2cb1a-6cbc-426f-9788-1faf32c6d14f.png\" width=\"922\" id=\"uf0952df5\" class=\"ne-image\"></p><p id=\"ucf569ddf\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585247800-431e4cb6-fab5-485d-943d-6e316963181a.png\" width=\"502\" id=\"uc999464f\" class=\"ne-image\"></p><h2 id=\"J1GnB\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第六步</span></h2><p id=\"ub9b9934a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">在激活软件里选择最后一个generate 之后选择安装目录下的 RegPrivateKey.pem 会得到激活码，切换到软件界面完成激活 。至此激活完成</span></p><p id=\"u50d871fc\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585289168-0dd209c7-a7a9-4e85-a571-907078a4e5ae.png\" width=\"502\" id=\"u3c87dc3a\" class=\"ne-image\"></p><p id=\"u7e63ebe6\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585296115-f2ab5c53-32d2-4bae-884c-9bcc13f71b38.png\" width=\"795\" id=\"u2d1822eb\" class=\"ne-image\"></p><p id=\"u04affb49\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585302078-c26971fb-6f1b-4037-a11b-7b4badb465f9.png\" width=\"590\" id=\"u9d419c5f\" class=\"ne-image\"></p><h2 id=\"qgKh7\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第七步,开始使用Navicat Premium 16.</span></h2><p id=\"uaf24d31f\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585346396-a9236df2-dfcd-45a9-a9ce-56c0be430978.png\" width=\"950.9434304486915\" id=\"uc0ea6417\" class=\"ne-image\"></p><p id=\"u76d59158\" class=\"ne-p\"><br></p><p id=\"u930ae1d3\" class=\"ne-p\"><br></p><h1 id=\"FdVtc\"><span class=\"ne-text\">下载地址：</span></h1><h2 id=\"aTwQ8\"><span class=\"ne-text\">阿里网盘下载地址：</span></h2><p id=\"u56a11c46\" class=\"ne-p\"><span class=\"ne-text\">https://www.aliyundrive.com/s/GjNLnRQ8PrX</span></p><p id=\"u82509a0c\" class=\"ne-p\"><span class=\"ne-text\">提取码： rc88</span></p><p id=\"u2cb5c4e8\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h2 id=\"c9ZyB\"><span class=\"ne-text\">百度网盘下载地址：</span></h2><p id=\"u77faf6eb\" class=\"ne-p\"><span class=\"ne-text\">https://pan.baidu.com/share/init?surl=kBiiqr2hZW87t4mwm4VJzw&amp;pwd=jpqa</span></p><p id=\"uca40d24b\" class=\"ne-p\"><span class=\"ne-text\">提取码：jpqa</span></p></div>",
    "body": "tags: [navicat,激活,破解,补丁]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\nNavicat Premium是一个数据库开发工具，允许你同时连接MySQL、MariaDB、MongoDB、SQL Server、Oracle、PostgreSQL和SQLite数据库。兼容Amazon RDS、Amazon Aurora、Amazon Redshift、Microsoft Azure、Oracle cloud、谷歌cloud、MongoDB Atlas等云数据库。您可以快速、轻松地构建、管理和维护数据库。\n\n![417dae52779f2b845472784fb108b4a.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654584961477-3a7101bd-b652-44c7-aa6c-023e24738fb8.png#clientId=udaf18b14-ac2d-4&from=paste&height=488&id=u54864953&originHeight=539&originWidth=646&originalType=binary&ratio=1&rotation=0&showTitle=false&size=54447&status=done&style=none&taskId=u486c468a-88f0-46b3-bbaa-bfbef16ed0f&title=&width=585.0566248284331)\n<a name=\"BpnXQ\"></a>\n# 新功能和改进:\n<a name=\"WqFbA\"></a>\n## <br />图表\n<br />将您的数据库数据转换为可视化数据，以便通过图表和图形获得清晰的洞察力。\n<a name=\"h0taJ\"></a>\n## 数据传输\n<br />版本15中发布了一种传输数据的新方法。我们的新设计提供了一个直观的界面，用于自定义字段和指定希望传输的行数。\n\n<a name=\"l78z1\"></a>\n## SQL Builder\n<br />我们设计了一种全新的机制来提高SQL Builder的用户体验和查询书写的整体效率。\n<a name=\"b5Cdr\"></a>\n## 建模\n<br />交付模型和数据库之间的差异的全貌，并生成更新目标数据库的脚本。\n<a name=\"qZuY3\"></a>\n## 黑暗的模式\n<br />暗模式支持已经到达我们的15个更新。设置黑暗主题，以保护您的眼睛从传统致盲的白色电脑。\n<a name=\"mvKaM\"></a>\n## 本地Linux\n<br />本地Linux支持现在添加到我们的Navicat家族。您可以享受与Linux系统的用户体验更好匹配的UI。\n\n<a name=\"gJ96m\"></a>\n# 破解教程:\n<a name=\"iKAdI\"></a>\n## 第一步,安装软件\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585089035-df5c1914-ebc3-4802-ac60-a19e09951401.png#clientId=udaf18b14-ac2d-4&from=paste&height=413&id=u68dffc5c&originHeight=456&originWidth=596&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23383&status=done&style=none&taskId=u32daa116-fe2b-4f08-95e0-d041410b070&title=&width=539.7736043308763)\n<a name=\"ql2JW\"></a>\n## 第二步,复制补丁\n把破解补丁复制到Navicat Premium安装目录;<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585130997-13a62685-5a93-4cdf-bb93-f085b6648c4b.png#clientId=udaf18b14-ac2d-4&from=paste&id=ud0e06887&originHeight=154&originWidth=292&originalType=url&ratio=1&rotation=0&showTitle=false&size=4544&status=done&style=none&taskId=u11f6a30d-0a5d-4611-a280-43f5cdcf0d7&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585140429-1503f3ee-f528-426f-969e-199bf2bc1dcb.png#clientId=udaf18b14-ac2d-4&from=paste&id=u00c8d220&originHeight=262&originWidth=396&originalType=url&ratio=1&rotation=0&showTitle=false&size=24685&status=done&style=none&taskId=u1ab585ca-7dd0-4aeb-9cd9-244519e8f2b&title=)\n<a name=\"yzk6Y\"></a>\n## 第三步,打开软件选择到注册页面；\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585180261-e62680da-2181-41e2-b9d2-7c78bc9a891c.png#clientId=udaf18b14-ac2d-4&from=paste&id=u1ccd4e11&originHeight=847&originWidth=1414&originalType=url&ratio=1&rotation=0&showTitle=false&size=44486&status=done&style=none&taskId=u8d1a22fe-e48f-4c30-aee6-123bebb487b&title=)\n<a name=\"bVHUC\"></a>\n# 第四步，打开破解补丁软件\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585225674-6b3b2f23-5395-4364-a443-6104509b68c7.png#clientId=udaf18b14-ac2d-4&from=paste&id=u541539b3&originHeight=510&originWidth=864&originalType=url&ratio=1&rotation=0&showTitle=false&size=52845&status=done&style=none&taskId=u7c3502ba-558c-4437-88ed-e87d5e5fcc5&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585233097-a9a0f4c6-5907-446a-80ca-171c69173514.png#clientId=udaf18b14-ac2d-4&from=paste&id=ub25c28ea&originHeight=461&originWidth=792&originalType=url&ratio=1&rotation=0&showTitle=false&size=41745&status=done&style=none&taskId=u3be53028-dc6f-4759-ab6f-40492cd5622&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585241595-53b2cb1a-6cbc-426f-9788-1faf32c6d14f.png#clientId=udaf18b14-ac2d-4&from=paste&id=uf0952df5&originHeight=691&originWidth=922&originalType=url&ratio=1&rotation=0&showTitle=false&size=56410&status=done&style=none&taskId=uad884a9e-d80d-402c-8e14-0c68879e6a5&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585247800-431e4cb6-fab5-485d-943d-6e316963181a.png#clientId=udaf18b14-ac2d-4&from=paste&id=uc999464f&originHeight=396&originWidth=502&originalType=url&ratio=1&rotation=0&showTitle=false&size=43874&status=done&style=none&taskId=uedf34502-077b-4981-b4e2-22a1b966eda&title=)\n<a name=\"J1GnB\"></a>\n## 第六步\n在激活软件里选择最后一个generate 之后选择安装目录下的 RegPrivateKey.pem 会得到激活码，切换到软件界面完成激活 。至此激活完成<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585289168-0dd209c7-a7a9-4e85-a571-907078a4e5ae.png#clientId=udaf18b14-ac2d-4&from=paste&id=u3c87dc3a&originHeight=396&originWidth=502&originalType=url&ratio=1&rotation=0&showTitle=false&size=57097&status=done&style=none&taskId=u9fd12649-4b4c-4bf9-851c-2683e241fac&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585296115-f2ab5c53-32d2-4bae-884c-9bcc13f71b38.png#clientId=udaf18b14-ac2d-4&from=paste&id=u2d1822eb&originHeight=443&originWidth=795&originalType=url&ratio=1&rotation=0&showTitle=false&size=22014&status=done&style=none&taskId=u8739371b-2321-4a3f-82c6-15fb2d65dca&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585302078-c26971fb-6f1b-4037-a11b-7b4badb465f9.png#clientId=udaf18b14-ac2d-4&from=paste&id=u9d419c5f&originHeight=615&originWidth=590&originalType=url&ratio=1&rotation=0&showTitle=false&size=52935&status=done&style=none&taskId=uf78c2d21-dbe2-4937-8fed-1510164f434&title=)\n<a name=\"qgKh7\"></a>\n## 第七步,开始使用Navicat Premium 16.\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585346396-a9236df2-dfcd-45a9-a9ce-56c0be430978.png#clientId=udaf18b14-ac2d-4&from=paste&height=635&id=uc0ea6417&originHeight=701&originWidth=1050&originalType=binary&ratio=1&rotation=0&showTitle=false&size=90329&status=done&style=none&taskId=ua78f790a-29a1-4d01-a467-bff185f61c1&title=&width=950.9434304486915)\n\n\n<a name=\"FdVtc\"></a>\n# 下载地址：\n<a name=\"aTwQ8\"></a>\n## 阿里网盘下载地址：\nhttps://www.aliyundrive.com/s/GjNLnRQ8PrX<br />提取码： rc88\n\n<a name=\"c9ZyB\"></a>\n## 百度网盘下载地址：\nhttps://pan.baidu.com/share/init?surl=kBiiqr2hZW87t4mwm4VJzw&pwd=jpqa<br />提取码：jpqa\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [navicat,激活,破解,补丁]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\">Navicat Premium是一个数据库开发工具，允许你同时连接MySQL、MariaDB、MongoDB、SQL Server、Oracle、PostgreSQL和SQLite数据库。兼容Amazon RDS、Amazon Aurora、Amazon Redshift、Microsoft Azure、Oracle cloud、谷歌cloud、MongoDB Atlas等云数据库。您可以快速、轻松地构建、管理和维护数据库。</span></p><p id=\"u4abd0037\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654584961477-3a7101bd-b652-44c7-aa6c-023e24738fb8.png\" width=\"585.0566248284331\" id=\"u54864953\" class=\"ne-image\"></p><h1 id=\"BpnXQ\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">新功能和改进:</span></h1><h2 id=\"WqFbA\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\"><br />图表</span></h2><p id=\"u49a88710\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br />将您的数据库数据转换为可视化数据，以便通过图表和图形获得清晰的洞察力。</span></p><h2 id=\"h0taJ\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">数据传输</span></h2><p id=\"u4014cfdc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br />版本15中发布了一种传输数据的新方法。我们的新设计提供了一个直观的界面，用于自定义字段和指定希望传输的行数。</span></p><p id=\"u0a022a34\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"></span></p><h2 id=\"l78z1\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">SQL Builder</span></h2><p id=\"u18478253\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br />我们设计了一种全新的机制来提高SQL Builder的用户体验和查询书写的整体效率。</span></p><h2 id=\"b5Cdr\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">建模</span></h2><p id=\"u2cfc1b51\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br />交付模型和数据库之间的差异的全貌，并生成更新目标数据库的脚本。</span></p><h2 id=\"qZuY3\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">黑暗的模式</span></h2><p id=\"u01fe2bf6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br />暗模式支持已经到达我们的15个更新。设置黑暗主题，以保护您的眼睛从传统致盲的白色电脑。</span></p><h2 id=\"mvKaM\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">本地Linux</span></h2><p id=\"u4b06e991\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"><br />本地Linux支持现在添加到我们的Navicat家族。您可以享受与Linux系统的用户体验更好匹配的UI。</span></p><p id=\"u7ef7ef0c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88); font-size: 16px\"></span></p><h1 id=\"gJ96m\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">破解教程:</span></h1><h2 id=\"iKAdI\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第一步,安装软件</span></h2><p id=\"u1737ae65\" class=\"ne-p\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585089035-df5c1914-ebc3-4802-ac60-a19e09951401.png\" width=\"539.7736043308763\" id=\"u68dffc5c\" class=\"ne-image\"></p><h2 id=\"ql2JW\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第二步,复制补丁</span></h2><p id=\"ue1e5384f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">把破解补丁复制到Navicat Premium安装目录;</span></p><p id=\"u7e1ca505\" class=\"ne-p\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585130997-13a62685-5a93-4cdf-bb93-f085b6648c4b.png\" width=\"292\" id=\"ud0e06887\" class=\"ne-image\"></p><p id=\"uc3276d32\" class=\"ne-p\" style=\"text-align: center\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585140429-1503f3ee-f528-426f-969e-199bf2bc1dcb.png\" width=\"396\" id=\"u00c8d220\" class=\"ne-image\"></p><h2 id=\"yzk6Y\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第三步,打开软件选择到注册页面；</span></h2><p id=\"ubc3a2ff8\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585180261-e62680da-2181-41e2-b9d2-7c78bc9a891c.png\" width=\"1414\" id=\"u1ccd4e11\" class=\"ne-image\"></p><h1 id=\"bVHUC\"><span class=\"ne-text\">第四步，打开破解补丁软件</span></h1><p id=\"ud6421843\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585225674-6b3b2f23-5395-4364-a443-6104509b68c7.png\" width=\"864\" id=\"u541539b3\" class=\"ne-image\"></p><p id=\"u9f7d3929\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585233097-a9a0f4c6-5907-446a-80ca-171c69173514.png\" width=\"792\" id=\"ub25c28ea\" class=\"ne-image\"></p><p id=\"u0b0835f0\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585241595-53b2cb1a-6cbc-426f-9788-1faf32c6d14f.png\" width=\"922\" id=\"uf0952df5\" class=\"ne-image\"></p><p id=\"ucf569ddf\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585247800-431e4cb6-fab5-485d-943d-6e316963181a.png\" width=\"502\" id=\"uc999464f\" class=\"ne-image\"></p><h2 id=\"J1GnB\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第六步</span></h2><p id=\"ub9b9934a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">在激活软件里选择最后一个generate 之后选择安装目录下的 RegPrivateKey.pem 会得到激活码，切换到软件界面完成激活 。至此激活完成</span></p><p id=\"u50d871fc\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585289168-0dd209c7-a7a9-4e85-a571-907078a4e5ae.png\" width=\"502\" id=\"u3c87dc3a\" class=\"ne-image\"></p><p id=\"u7e63ebe6\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585296115-f2ab5c53-32d2-4bae-884c-9bcc13f71b38.png\" width=\"795\" id=\"u2d1822eb\" class=\"ne-image\"></p><p id=\"u04affb49\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585302078-c26971fb-6f1b-4037-a11b-7b4badb465f9.png\" width=\"590\" id=\"u9d419c5f\" class=\"ne-image\"></p><h2 id=\"qgKh7\"><span class=\"ne-text\" style=\"color: rgb(78, 83, 88)\">第七步,开始使用Navicat Premium 16.</span></h2><p id=\"uaf24d31f\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654585346396-a9236df2-dfcd-45a9-a9ce-56c0be430978.png\" width=\"950.9434304486915\" id=\"uc0ea6417\" class=\"ne-image\"></p><p id=\"u76d59158\" class=\"ne-p\"><br></p><p id=\"u930ae1d3\" class=\"ne-p\"><br></p><h1 id=\"FdVtc\"><span class=\"ne-text\">下载地址：</span></h1><h2 id=\"aTwQ8\"><span class=\"ne-text\">阿里网盘下载地址：</span></h2><p id=\"u56a11c46\" class=\"ne-p\"><span class=\"ne-text\">https://www.aliyundrive.com/s/GjNLnRQ8PrX</span></p><p id=\"u82509a0c\" class=\"ne-p\"><span class=\"ne-text\">提取码： rc88</span></p><p id=\"u2cb5c4e8\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h2 id=\"c9ZyB\"><span class=\"ne-text\">百度网盘下载地址：</span></h2><p id=\"u77faf6eb\" class=\"ne-p\"><span class=\"ne-text\">https://pan.baidu.com/share/init?surl=kBiiqr2hZW87t4mwm4VJzw&amp;pwd=jpqa</span></p><p id=\"uca40d24b\" class=\"ne-p\"><span class=\"ne-text\">提取码：jpqa</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [navicat,激活,破解,补丁]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uef552ece\" id=\"uef552ece\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"u9c175d47\" id=\"u9c175d47\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"u92c8bbe2\" id=\"u92c8bbe2\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\">Navicat Premium是一个数据库开发工具，允许你同时连接MySQL、MariaDB、MongoDB、SQL Server、Oracle、PostgreSQL和SQLite数据库。兼容Amazon RDS、Amazon Aurora、Amazon Redshift、Microsoft Azure、Oracle cloud、谷歌cloud、MongoDB Atlas等云数据库。您可以快速、轻松地构建、管理和维护数据库。</span></p><p data-lake-id=\"u4abd0037\" id=\"u4abd0037\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654584961477-3a7101bd-b652-44c7-aa6c-023e24738fb8.png%22%2C%22taskId%22%3A%22u486c468a-88f0-46b3-bbaa-bfbef16ed0f%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A585.0566248284331%2C%22height%22%3A488%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22417dae52779f2b845472784fb108b4a.png%22%2C%22size%22%3A54447%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A646%2C%22originHeight%22%3A539%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NAVICAT%20PREMIUM%20%E7%89%88%E6%9C%AC16.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)-PREMIUM%20NAVG-OWVO-QXQ5-****%20HUIHUI%20TOUSHI-TEAM%20COPYRIGHT%20O%201999-2022%20PREMIUMSOFT%20CYBERTECH%20LTD.%E4%BF%9D%E7%95%99%E6%89%80%E6%9C%89%E6%9D%83%E5%88%A9.%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A232.3387%2C%22y%22%3A246.66553%2C%22width%22%3A184.01155000000003%2C%22height%22%3A41.59066999999999%2C%22text%22%3A%22NAVICAT%22%7D%2C%7B%22x%22%3A253.6679%2C%22y%22%3A296.3793%2C%22width%22%3A137.64399999999998%2C%22height%22%3A20.066599999999994%2C%22text%22%3A%22PREMIUM%22%7D%2C%7B%22x%22%3A201.01854%2C%22y%22%3A324.57504%2C%22width%22%3A243.63298%2C%22height%22%3A18.029539999999997%2C%22text%22%3A%22%E7%89%88%E6%9C%AC16.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)-PREMIUM%22%7D%2C%7B%22x%22%3A228.39104%2C%22y%22%3A345.6703%2C%22width%22%3A186.44809999999998%2C%22height%22%3A16.218500000000006%2C%22text%22%3A%22NAVG-OWVO-QXQ5-****%22%7D%2C%7B%22x%22%3A300.76083%2C%22y%22%3A366.07138%2C%22width%22%3A45.46656999999999%2C%22height%22%3A15.407520000000034%2C%22text%22%3A%22HUIHUI%22%7D%2C%7B%22x%22%3A277.77014%2C%22y%22%3A388.11636%2C%22width%22%3A89.92163%2C%22height%22%3A11.813820000000021%2C%22text%22%3A%22TOUSHI-TEAM%22%7D%2C%7B%22x%22%3A68.00903%2C%22y%22%3A503.3762%2C%22width%22%3A508.36557%2C%22height%22%3A17.78132999999997%2C%22text%22%3A%22COPYRIGHT%20O%201999-2022%20PREMIUMSOFT%20CYBERTECH%20LTD.%E4%BF%9D%E7%95%99%E6%89%80%E6%9C%89%E6%9D%83%E5%88%A9.%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u54864953%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"BpnXQ\" id=\"BpnXQ\"><span data-lake-id=\"ue8802393\" id=\"ue8802393\" style=\"color: rgb(78, 83, 88)\">新功能和改进:</span></h1><h2 data-lake-id=\"WqFbA\" id=\"WqFbA\"><span data-lake-id=\"u227036a2\" id=\"u227036a2\" style=\"color: rgb(78, 83, 88)\"><br />图表</span></h2><p data-lake-id=\"u49a88710\" id=\"u49a88710\"><span data-lake-id=\"uc3d6b767\" id=\"uc3d6b767\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\"><br />将您的数据库数据转换为可视化数据，以便通过图表和图形获得清晰的洞察力。</span></p><h2 data-lake-id=\"h0taJ\" id=\"h0taJ\"><span data-lake-id=\"u739448db\" id=\"u739448db\" style=\"color: rgb(78, 83, 88)\">数据传输</span></h2><p data-lake-id=\"u4014cfdc\" id=\"u4014cfdc\"><span data-lake-id=\"u368f93b9\" id=\"u368f93b9\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\"><br />版本15中发布了一种传输数据的新方法。我们的新设计提供了一个直观的界面，用于自定义字段和指定希望传输的行数。</span></p><p data-lake-id=\"u0a022a34\" id=\"u0a022a34\"><span data-lake-id=\"uaa42b9a9\" id=\"uaa42b9a9\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\">​</span><br></p><h2 data-lake-id=\"l78z1\" id=\"l78z1\"><span data-lake-id=\"u63407070\" id=\"u63407070\" style=\"color: rgb(78, 83, 88)\">SQL Builder</span></h2><p data-lake-id=\"u18478253\" id=\"u18478253\"><span data-lake-id=\"uec1fad22\" id=\"uec1fad22\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\"><br />我们设计了一种全新的机制来提高SQL Builder的用户体验和查询书写的整体效率。</span></p><h2 data-lake-id=\"b5Cdr\" id=\"b5Cdr\"><span data-lake-id=\"u95f14091\" id=\"u95f14091\" style=\"color: rgb(78, 83, 88)\">建模</span></h2><p data-lake-id=\"u2cfc1b51\" id=\"u2cfc1b51\"><span data-lake-id=\"ua2078e3f\" id=\"ua2078e3f\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\"><br />交付模型和数据库之间的差异的全貌，并生成更新目标数据库的脚本。</span></p><h2 data-lake-id=\"qZuY3\" id=\"qZuY3\"><span data-lake-id=\"ub4915124\" id=\"ub4915124\" style=\"color: rgb(78, 83, 88)\">黑暗的模式</span></h2><p data-lake-id=\"u01fe2bf6\" id=\"u01fe2bf6\"><span data-lake-id=\"u933c69f4\" id=\"u933c69f4\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\"><br />暗模式支持已经到达我们的15个更新。设置黑暗主题，以保护您的眼睛从传统致盲的白色电脑。</span></p><h2 data-lake-id=\"mvKaM\" id=\"mvKaM\"><span data-lake-id=\"ube52723f\" id=\"ube52723f\" style=\"color: rgb(78, 83, 88)\">本地Linux</span></h2><p data-lake-id=\"u4b06e991\" id=\"u4b06e991\"><span data-lake-id=\"udd8d3191\" id=\"udd8d3191\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\"><br />本地Linux支持现在添加到我们的Navicat家族。您可以享受与Linux系统的用户体验更好匹配的UI。</span></p><p data-lake-id=\"u7ef7ef0c\" id=\"u7ef7ef0c\"><span data-lake-id=\"ua76b7949\" id=\"ua76b7949\" class=\"lake-fontsize-12\" style=\"color: rgb(78, 83, 88)\">​</span><br></p><h1 data-lake-id=\"gJ96m\" id=\"gJ96m\"><span data-lake-id=\"ud30a48ea\" id=\"ud30a48ea\" style=\"color: rgb(78, 83, 88)\">破解教程:</span></h1><h2 data-lake-id=\"iKAdI\" id=\"iKAdI\"><span data-lake-id=\"ued9e911a\" id=\"ued9e911a\" style=\"color: rgb(78, 83, 88)\">第一步,安装软件</span></h2><p data-lake-id=\"u1737ae65\" id=\"u1737ae65\" style=\"text-align: center\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585089035-df5c1914-ebc3-4802-ac60-a19e09951401.png%22%2C%22taskId%22%3A%22u32daa116-fe2b-4f08-95e0-d041410b070%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A539.7736043308763%2C%22height%22%3A413%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A23383%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A596%2C%22originHeight%22%3A456%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F-NAVICATPREMIUM16%20%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%A4%B9%20%E5%9C%A8%E5%93%AA%E9%87%8C%E5%AE%89%E8%A3%85NAVICATPREMIUM%2016%3F%20%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F%E5%B0%86%E5%9C%A8%E4%BB%A5%E4%B8%8B%E6%96%87%E4%BB%B6%E5%A4%B9%E5%AE%89%E8%A3%85NAVICAT%20PREMIUM%2016.%20%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5%E7%BB%A7%E7%BB%AD.%E6%AC%B2%E6%94%B9%E5%8F%98%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%A4%B9%2C%E7%82%B9%E5%87%BB%E6%B5%8F%E8%A7%88.%20D%3A%3APROGRAM%20FILES%20(X86)%5C%5CPREMIUMSOFTINAVICAT%20PREMIUM%2016%20%E6%B5%8F%E8%A7%88(...%20%E8%87%B3%E5%B0%91%E9%9C%80%E8%A6%81305.6MB%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4.%20%E5%8F%96%E6%B6%88%20%E4%B8%8A%E4%B8%80%E6%AD%A5(%E4%BD%86)%20%E4%B8%8B%E4%B8%80%E6%AD%A5(N)%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A36.34268%2C%22y%22%3A10.005463%2C%22width%22%3A194.11882%2C%22height%22%3A14.368158%2C%22text%22%3A%22%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F-NAVICATPREMIUM16%22%7D%2C%7B%22x%22%3A34.557205%2C%22y%22%3A46.41316%2C%22width%22%3A92.246625%2C%22height%22%3A14.577277000000002%2C%22text%22%3A%22%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%A4%B9%22%7D%2C%7B%22x%22%3A53.493%2C%22y%22%3A64.90431%2C%22width%22%3A183.7724%2C%22height%22%3A14.131140000000002%2C%22text%22%3A%22%E5%9C%A8%E5%93%AA%E9%87%8C%E5%AE%89%E8%A3%85NAVICATPREMIUM%2016%3F%22%7D%2C%7B%22x%22%3A98.28901%2C%22y%22%3A125.492516%2C%22width%22%3A279.91569%2C%22height%22%3A15.336354%2C%22text%22%3A%22%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F%E5%B0%86%E5%9C%A8%E4%BB%A5%E4%B8%8B%E6%96%87%E4%BB%B6%E5%A4%B9%E5%AE%89%E8%A3%85NAVICAT%20PREMIUM%2016.%22%7D%2C%7B%22x%22%3A54.822376%2C%22y%22%3A163.51582%2C%22width%22%3A268.130384%2C%22height%22%3A14.823610000000002%2C%22text%22%3A%22%E7%82%B9%E5%87%BB%E4%B8%8B%E4%B8%80%E6%AD%A5%E7%BB%A7%E7%BB%AD.%E6%AC%B2%E6%94%B9%E5%8F%98%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%A4%B9%2C%E7%82%B9%E5%87%BB%E6%B5%8F%E8%A7%88.%22%7D%2C%7B%22x%22%3A58.767292%2C%22y%22%3A193.95763%2C%22width%22%3A310.578048%2C%22height%22%3A12.702950000000016%2C%22text%22%3A%22D%3A%3APROGRAM%20FILES%20(X86)%5C%5CPREMIUMSOFTINAVICAT%20PREMIUM%2016%22%7D%2C%7B%22x%22%3A473.42026%2C%22y%22%3A194.96985%2C%22width%22%3A46.23424%2C%22height%22%3A15.282639999999986%2C%22text%22%3A%22%E6%B5%8F%E8%A7%88(...%22%7D%2C%7B%22x%22%3A52.45904%2C%22y%22%3A365.09396%2C%22width%22%3A163.40728000000001%2C%22height%22%3A16.62052%2C%22text%22%3A%22%E8%87%B3%E5%B0%91%E9%9C%80%E8%A6%81305.6MB%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4.%22%7D%2C%7B%22x%22%3A517.5042%2C%22y%22%3A417.12186%2C%22width%22%3A28.082700000000045%2C%22height%22%3A15.45823999999999%2C%22text%22%3A%22%E5%8F%96%E6%B6%88%22%7D%2C%7B%22x%22%3A317.389%2C%22y%22%3A417.62595%2C%22width%22%3A51.90314000000001%2C%22height%22%3A14.541409999999985%2C%22text%22%3A%22%E4%B8%8A%E4%B8%80%E6%AD%A5(%E4%BD%86)%22%7D%2C%7B%22x%22%3A403.89597%2C%22y%22%3A417.7798%2C%22width%22%3A54.54296000000005%2C%22height%22%3A13.814039999999977%2C%22text%22%3A%22%E4%B8%8B%E4%B8%80%E6%AD%A5(N)%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u68dffc5c%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"ql2JW\" id=\"ql2JW\"><span data-lake-id=\"u494f53ee\" id=\"u494f53ee\" style=\"color: rgb(78, 83, 88)\">第二步,复制补丁</span></h2><p data-lake-id=\"ue1e5384f\" id=\"ue1e5384f\"><span data-lake-id=\"ubaa620d1\" id=\"ubaa620d1\" style=\"color: rgb(78, 83, 88)\">把破解补丁复制到Navicat Premium安装目录;</span></p><p data-lake-id=\"u7e1ca505\" id=\"u7e1ca505\" style=\"text-align: center\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585130997-13a62685-5a93-4cdf-bb93-f085b6648c4b.png%22%2C%22taskId%22%3A%22u11f6a30d-0a5d-4611-a280-43f5cdcf0d7%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A4544%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A292%2C%22originHeight%22%3A154%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22LIBCC.DLL%20REGPRIVAT%20EKEYPEM%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A18.200506%2C%22y%22%3A54.856064%2C%22width%22%3A44.60148099999999%2C%22height%22%3A12.816040000000001%2C%22text%22%3A%22LIBCC.DLL%22%7D%2C%7B%22x%22%3A89.51462%2C%22y%22%3A55.67632%2C%22width%22%3A58.63098000000001%2C%22height%22%3A12.739245000000004%2C%22text%22%3A%22REGPRIVAT%22%7D%2C%7B%22x%22%3A90.041756%2C%22y%22%3A73.7847%2C%22width%22%3A57.90853399999999%2C%22height%22%3A11.177210000000002%2C%22text%22%3A%22EKEYPEM%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ud0e06887%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"uc3276d32\" id=\"uc3276d32\" style=\"text-align: center\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585140429-1503f3ee-f528-426f-969e-199bf2bc1dcb.png%22%2C%22taskId%22%3A%22u1ab585ca-7dd0-4aeb-9cd9-244519e8f2b%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A24685%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A396%2C%22originHeight%22%3A262%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NAVICAT16%20PREM%20NAVICAT16%20PREM%20IUM%20ONLY%20KEYG%20LUM%20ONLY%20KEYG%20EN.V1.0_BY_DFO%20EN%20V1.0%20BY%20DFO%20XJPG%20X%2CEXE%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A115.631584%2C%22y%22%3A93.24456%2C%22width%22%3A95.182016%2C%22height%22%3A14.076549999999997%2C%22text%22%3A%22NAVICAT16%20PREM%22%7D%2C%7B%22x%22%3A10.925721%2C%22y%22%3A95.0311%2C%22width%22%3A94.163899%2C%22height%22%3A11.593810000000005%2C%22text%22%3A%22NAVICAT16%20PREM%22%7D%2C%7B%22x%22%3A118.10256%2C%22y%22%3A110.861885%2C%22width%22%3A89.99575%2C%22height%22%3A14.390424999999993%2C%22text%22%3A%22IUM%20ONLY%20KEYG%22%7D%2C%7B%22x%22%3A12.421323%2C%22y%22%3A112.10251%2C%22width%22%3A89.336027%2C%22height%22%3A13.413854999999998%2C%22text%22%3A%22LUM%20ONLY%20KEYG%22%7D%2C%7B%22x%22%3A117.750824%2C%22y%22%3A128.37721%2C%22width%22%3A91.399396%2C%22height%22%3A13.621550000000013%2C%22text%22%3A%22EN.V1.0_BY_DFO%22%7D%2C%7B%22x%22%3A12.382609%2C%22y%22%3A128.68196%2C%22width%22%3A90.583251%2C%22height%22%3A12.681170000000009%2C%22text%22%3A%22EN%20V1.0%20BY%20DFO%22%7D%2C%7B%22x%22%3A146.90495%2C%22y%22%3A144.95966%2C%22width%22%3A32.871249999999975%2C%22height%22%3A15.346809999999977%2C%22text%22%3A%22XJPG%22%7D%2C%7B%22x%22%3A41.53664%2C%22y%22%3A146.33896%2C%22width%22%3A31.745849999999997%2C%22height%22%3A11.057980000000015%2C%22text%22%3A%22X%2CEXE%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u00c8d220%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"yzk6Y\" id=\"yzk6Y\"><span data-lake-id=\"uee32ac06\" id=\"uee32ac06\" style=\"color: rgb(78, 83, 88)\">第三步,打开软件选择到注册页面；</span></h2><p data-lake-id=\"ubc3a2ff8\" id=\"ubc3a2ff8\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585180261-e62680da-2181-41e2-b9d2-7c78bc9a891c.png%22%2C%22taskId%22%3A%22u8d1a22fe-e48f-4c30-aee6-123bebb487b%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A44486%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1414%2C%22originHeight%22%3A847%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%B3%A8%E5%86%8C%20%E8%AE%A2%E9%98%85%20%E6%B0%B8%E4%B9%85%E8%AE%B8%E5%8F%AF%E8%AF%81%20%E4%BD%BF%E7%94%A8NAVICAT%20ID%20%E7%99%BB%E5%BD%95%20%E4%BD%BF%E7%94%A8%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%AF%86%E9%92%A5%E6%B3%A8%E5%86%8C%E5%B9%B6%E6%BF%80%E6%B4%BB.%20NAVICAT%20ID(%E7%94%B5%E5%AD%90%E9%82%AE%E7%AE%B1)%20%E5%AF%86%E7%A0%81%20%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%20%E7%99%BB%E5%BD%95%20%E6%BF%80%E6%B4%BB%20%E5%9C%A8%E7%BA%BF%E8%B4%AD%E4%B9%B0%20%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE%20NAVICAT%20PREMIUM%2016.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A328.92273%2C%22y%22%3A136.8693%2C%22width%22%3A27.01366999999999%2C%22height%22%3A16.700739999999996%2C%22text%22%3A%22%E6%B3%A8%E5%86%8C%22%7D%2C%7B%22x%22%3A744.5679%2C%22y%22%3A209.70316%2C%22width%22%3A43.51239999999996%2C%22height%22%3A21.620920000000012%2C%22text%22%3A%22%E8%AE%A2%E9%98%85%22%7D%2C%7B%22x%22%3A365.95993%2C%22y%22%3A209.49234%2C%22width%22%3A97.84393%2C%22height%22%3A20.659809999999993%2C%22text%22%3A%22%E6%B0%B8%E4%B9%85%E8%AE%B8%E5%8F%AF%E8%AF%81%22%7D%2C%7B%22x%22%3A745.64026%2C%22y%22%3A240.92442%2C%22width%22%3A118.77653999999995%2C%22height%22%3A15.121199999999988%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8NAVICAT%20ID%20%E7%99%BB%E5%BD%95%22%7D%2C%7B%22x%22%3A366.30676%2C%22y%22%3A240.96906%2C%22width%22%3A148.53424%2C%22height%22%3A14.29638%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%AF%86%E9%92%A5%E6%B3%A8%E5%86%8C%E5%B9%B6%E6%BF%80%E6%B4%BB.%22%7D%2C%7B%22x%22%3A748.61237%2C%22y%22%3A290.56992%2C%22width%22%3A121.06112999999993%2C%22height%22%3A17.16257999999999%2C%22text%22%3A%22NAVICAT%20ID(%E7%94%B5%E5%AD%90%E9%82%AE%E7%AE%B1)%22%7D%2C%7B%22x%22%3A749.36475%2C%22y%22%3A322.92886%2C%22width%22%3A26.432800000000043%2C%22height%22%3A15.572420000000022%2C%22text%22%3A%22%E5%AF%86%E7%A0%81%22%7D%2C%7B%22x%22%3A996.81244%2C%22y%22%3A348.94662%2C%22width%22%3A51.337359999999876%2C%22height%22%3A14.489880000000028%2C%22text%22%3A%22%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%22%7D%2C%7B%22x%22%3A883.4014%2C%22y%22%3A389.6424%2C%22width%22%3A27.748559999999998%2C%22height%22%3A13.77109999999999%2C%22text%22%3A%22%E7%99%BB%E5%BD%95%22%7D%2C%7B%22x%22%3A422.22388%2C%22y%22%3A389.56323%2C%22width%22%3A26.08684999999997%2C%22height%22%3A13.642520000000047%2C%22text%22%3A%22%E6%BF%80%E6%B4%BB%22%7D%2C%7B%22x%22%3A391.39996%2C%22y%22%3A504.60236%2C%22width%22%3A51.90859999999998%2C%22height%22%3A15.225040000000035%2C%22text%22%3A%22%E5%9C%A8%E7%BA%BF%E8%B4%AD%E4%B9%B0%22%7D%2C%7B%22x%22%3A997.84424%2C%22y%22%3A505.57095%2C%22width%22%3A50.39086000000009%2C%22height%22%3A13.632750000000044%2C%22text%22%3A%22%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A603.4734%2C%22y%22%3A519.35175%2C%22width%22%3A207.38819999999998%2C%22height%22%3A18.358949999999936%2C%22text%22%3A%22NAVICAT%20PREMIUM%2016.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u1ccd4e11%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"bVHUC\" id=\"bVHUC\"><span data-lake-id=\"u6fe1e9d6\" id=\"u6fe1e9d6\">第四步，打开破解补丁软件</span></h1><p data-lake-id=\"ud6421843\" id=\"ud6421843\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585225674-6b3b2f23-5395-4364-a443-6104509b68c7.png%22%2C%22taskId%22%3A%22u7c3502ba-558c-4437-88ed-e87d5e5fcc5%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A52845%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A864%2C%22originHeight%22%3A510%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%B3%A8%E5%86%8C%20NAVICAT16PREMIUM%20-%20ONLY%20KEYGEN%20V1.O%201)PATCH%20HOST%2FSERIAL%20HOST%20AUTO-LNSERT%20SIMPLIFIED%20CHINESE%20LANGUAGES%3A%20%E6%B0%B8%E4%B9%85%E8%AE%B8%E5%8F%AF%E8%AE%A2%20COPY%20NAVC-HEDP-3V33-DCGU%20GENERATE%20SERIAL%20KEYGEN%20%E4%BD%BF%E7%94%A8%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%AF%86%E9%92%A5%202)%20KEYGEN%20%2F%20OFFLINE%20ACTIVATION%20YOUR%20NAME%20DELTAFOX%20NAVC%20HED%20DEFCONX%20YOUR%20ORGANIZATION%20AUTO-INSERT%20%E7%8E%B0%E5%9C%A8%E6%BF%80%E6%B4%BB%E6%9D%A5%E5%AE%8C%E6%88%90%20REGUEST%20CODE%3A%20%E8%AF%B7%E5%9C%A82022%2F06%2F2%20%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%20COPY%20CLEAR%20%E6%BF%80%E6%B4%BB%20PASTE%20ACTIVATION%20CODE%3A%20CLEAR%20COPY%20GENERATE%20%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE%20%E5%9C%A8%E7%BA%BF%E8%B4%AD%E4%B9%B0%20HTTPS%3A%2F%2FNAVICAT.COM%20BY%20DELTAFOX%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A42.507957%2C%22y%22%3A39.155373%2C%22width%22%3A24.792043%2C%22height%22%3A13.374622000000002%2C%22text%22%3A%22%E6%B3%A8%E5%86%8C%22%7D%2C%7B%22x%22%3A197.88023%2C%22y%22%3A55.424015%2C%22width%22%3A228.14424999999997%2C%22height%22%3A15.183875%2C%22text%22%3A%22NAVICAT16PREMIUM%20-%20ONLY%20KEYGEN%20V1.O%22%7D%2C%7B%22x%22%3A190.11623%2C%22y%22%3A89.608025%2C%22width%22%3A127.18821%2C%22height%22%3A12.879545000000007%2C%22text%22%3A%221)PATCH%20HOST%2FSERIAL%22%7D%2C%7B%22x%22%3A515.29114%2C%22y%22%3A104.312256%2C%22width%22%3A24.382659999999987%2C%22height%22%3A11.610624000000001%2C%22text%22%3A%22HOST%22%7D%2C%7B%22x%22%3A580.9915%2C%22y%22%3A105.23408%2C%22width%22%3A62.15553%2C%22height%22%3A10.31729%2C%22text%22%3A%22AUTO-LNSERT%22%7D%2C%7B%22x%22%3A292.65195%2C%22y%22%3A105.50642%2C%22width%22%3A103.45909999999998%2C%22height%22%3A11.272719999999993%2C%22text%22%3A%22SIMPLIFIED%20CHINESE%22%7D%2C%7B%22x%22%3A190.99992%2C%22y%22%3A107.20044%2C%22width%22%3A69.55870000000002%2C%22height%22%3A11.003439999999998%2C%22text%22%3A%22LANGUAGES%3A%22%7D%2C%7B%22x%22%3A80.03278%2C%22y%22%3A109.55971%2C%22width%22%3A90.04462000000001%2C%22height%22%3A21.572720000000004%2C%22text%22%3A%22%E6%B0%B8%E4%B9%85%E8%AE%B8%E5%8F%AF%E8%AE%A2%22%7D%2C%7B%22x%22%3A509.1642%2C%22y%22%3A129.77956%2C%22width%22%3A30.651599999999974%2C%22height%22%3A12.485929999999996%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A315.93573%2C%22y%22%3A128.86482%2C%22width%22%3A145.25562000000002%2C%22height%22%3A13.01572999999999%2C%22text%22%3A%22NAVC-HEDP-3V33-DCGU%22%7D%2C%7B%22x%22%3A578.0547%2C%22y%22%3A130.45448%2C%22width%22%3A53.24082999999996%2C%22height%22%3A10.871120000000019%2C%22text%22%3A%22GENERATE%22%7D%2C%7B%22x%22%3A189.6231%2C%22y%22%3A130.79547%2C%22width%22%3A84.76630000000003%2C%22height%22%3A12.289569999999998%2C%22text%22%3A%22SERIAL%20KEYGEN%22%7D%2C%7B%22x%22%3A79.32674%2C%22y%22%3A141.19662%2C%22width%22%3A91.85874999999999%2C%22height%22%3A14.424030000000016%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%AF%86%E9%92%A5%22%7D%2C%7B%22x%22%3A188.79997%2C%22y%22%3A159.33618%2C%22width%22%3A171.31008%2C%22height%22%3A14.16449%2C%22text%22%3A%222)%20KEYGEN%20%2F%20OFFLINE%20ACTIVATION%22%7D%2C%7B%22x%22%3A190.94994%2C%22y%22%3A176.07346%2C%22width%22%3A67.71666000000002%2C%22height%22%3A12.26291999999998%2C%22text%22%3A%22YOUR%20NAME%22%7D%2C%7B%22x%22%3A452.1889%2C%22y%22%3A176.59393%2C%22width%22%3A54.16678000000002%2C%22height%22%3A11.381969999999995%2C%22text%22%3A%22DELTAFOX%22%7D%2C%7B%22x%22%3A82.99247%2C%22y%22%3A193.03311%2C%22width%22%3A34.784620000000004%2C%22height%22%3A11.378070000000008%2C%22text%22%3A%22NAVC%22%7D%2C%7B%22x%22%3A141.29614%2C%22y%22%3A193.09625%2C%22width%22%3A27.144929999999988%2C%22height%22%3A11.428410000000014%2C%22text%22%3A%22HED%22%7D%2C%7B%22x%22%3A452.01196%2C%22y%22%3A200.59317%2C%22width%22%3A55.29054000000002%2C%22height%22%3A11.333650000000006%2C%22text%22%3A%22DEFCONX%22%7D%2C%7B%22x%22%3A192.31552%2C%22y%22%3A200.59378%2C%22width%22%3A101.75202000000002%2C%22height%22%3A12.561779999999999%2C%22text%22%3A%22YOUR%20ORGANIZATION%22%7D%2C%7B%22x%22%3A451.86673%2C%22y%22%3A217.40536%2C%22width%22%3A62.11220999999995%2C%22height%22%3A10.694199999999995%2C%22text%22%3A%22AUTO-INSERT%22%7D%2C%7B%22x%22%3A78.263725%2C%22y%22%3A220.29811%2C%22width%22%3A87.043935%2C%22height%22%3A14.428159999999991%2C%22text%22%3A%22%E7%8E%B0%E5%9C%A8%E6%BF%80%E6%B4%BB%E6%9D%A5%E5%AE%8C%E6%88%90%22%7D%2C%7B%22x%22%3A191.70755%2C%22y%22%3A232.03519%2C%22width%22%3A85.78293%2C%22height%22%3A11.492259999999987%2C%22text%22%3A%22REGUEST%20CODE%3A%22%7D%2C%7B%22x%22%3A79.400696%2C%22y%22%3A238.31137%2C%22width%22%3A90.87344399999999%2C%22height%22%3A14.87693999999999%2C%22text%22%3A%22%E8%AF%B7%E5%9C%A82022%2F06%2F2%22%7D%2C%7B%22x%22%3A710.8426%2C%22y%22%3A249.06044%2C%22width%22%3A51.23900000000003%2C%22height%22%3A14.85596000000001%2C%22text%22%3A%22%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%22%7D%2C%7B%22x%22%3A259.03122%2C%22y%22%3A251.94276%2C%22width%22%3A29.458529999999996%2C%22height%22%3A11.360539999999986%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A200.18991%2C%22y%22%3A252.73952%2C%22width%22%3A29.534670000000006%2C%22height%22%3A10.313279999999992%2C%22text%22%3A%22CLEAR%22%7D%2C%7B%22x%22%3A134.46837%2C%22y%22%3A289.08072%2C%22width%22%3A26.632480000000015%2C%22height%22%3A13.670880000000011%2C%22text%22%3A%22%E6%BF%80%E6%B4%BB%22%7D%2C%7B%22x%22%3A226.99959%2C%22y%22%3A296.19452%2C%22width%22%3A33.205269999999985%2C%22height%22%3A10.324219999999968%2C%22text%22%3A%22PASTE%22%7D%2C%7B%22x%22%3A190.24503%2C%22y%22%3A324.24948%2C%22width%22%3A100.08176999999998%2C%22height%22%3A12.406040000000019%2C%22text%22%3A%22ACTIVATION%20CODE%3A%22%7D%2C%7B%22x%22%3A198.38823%2C%22y%22%3A344.27408%2C%22width%22%3A30.597350000000006%2C%22height%22%3A11.341339999999946%2C%22text%22%3A%22CLEAR%22%7D%2C%7B%22x%22%3A259.62305%2C%22y%22%3A344.40915%2C%22width%22%3A29.580900000000042%2C%22height%22%3A11.353880000000004%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A216.52248%2C%22y%22%3A392.68268%2C%22width%22%3A54.14097000000001%2C%22height%22%3A11.703550000000007%2C%22text%22%3A%22GENERATE%22%7D%2C%7B%22x%22%3A711.147%2C%22y%22%3A405.01236%2C%22width%22%3A50.964939999999956%2C%22height%22%3A16.355340000000012%2C%22text%22%3A%22%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A105.579216%2C%22y%22%3A405.44843%2C%22width%22%3A49.20720399999999%2C%22height%22%3A13.033050000000003%2C%22text%22%3A%22%E5%9C%A8%E7%BA%BF%E8%B4%AD%E4%B9%B0%22%7D%2C%7B%22x%22%3A538.3598%2C%22y%22%3A420.23325%2C%22width%22%3A115.43680000000006%2C%22height%22%3A13.870200000000011%2C%22text%22%3A%22HTTPS%3A%2F%2FNAVICAT.COM%22%7D%2C%7B%22x%22%3A181.2398%2C%22y%22%3A420.40747%2C%22width%22%3A71.91788%2C%22height%22%3A12.23108000000002%2C%22text%22%3A%22BY%20DELTAFOX%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u541539b3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u9f7d3929\" id=\"u9f7d3929\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585233097-a9a0f4c6-5907-446a-80ca-171c69173514.png%22%2C%22taskId%22%3A%22u3be53028-dc6f-4759-ab6f-40492cd5622%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A41745%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A792%2C%22originHeight%22%3A461%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%B3%A8%E5%86%8C%20%E6%B0%B8%E4%B9%85%E8%AE%B8%E5%8F%AF%E8%AF%81%20%E8%AE%A2%E9%98%85%20%E4%BD%BF%E7%94%A8NAVICATID%E7%99%BB%E5%BD%95%20%E4%BD%BF%E7%94%A8%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%AF%86%E9%92%A5%E6%B3%A8%E5%86%8C%E5%B9%B6%E6%BF%80%E6%B4%BB.%20NAV%20%E5%9B%A0%E4%B8%BA%E6%BF%80%E6%B4%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9A%82%E6%97%B6%E4%B8%8D%E5%8F%AF%E4%BD%BF%E7%94%A8%2C%E6%89%80%E4%BB%A5%E4%BD%A0%E7%9A%84%E8%AE%B8%E5%8F%AF%E8%AF%81%E6%9C%AA%E8%83%BD%E6%BF%80%E6%B4%BB.%E8%AF%B7%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8%E6%89%BF%E5%8A%A8%E6%BF%80%E6%B4%BB%2C%E6%88%96%E7%A8%8D%E5%90%8E%E5%86%8D%E8%AF%95.%20%E7%8E%B0%E5%9C%A8%E6%B8%A9%20%E5%A6%82%E6%9E%9C%E6%AD%A4%E9%97%AE%E9%A2%98%E4%BB%8D%E7%84%B6%E5%AD%98%E5%9C%A8%2C%E8%AF%B7%E5%89%8D%E5%BE%80HTTPS%3A%2F%2FHELP.NAVICAT.COM%2FHE%2FZH-CN%2F%2FEQUESTS%2FNEW%20%E8%81%94%E7%B3%BB%20NAVICAT%E6%94%AF%E6%8C%81.%20%E8%AF%B7%E5%9C%A8%20%E5%B7%B1%E5%AF%86%E7%A0%81%2090010001%20%E7%A1%AE%E5%AE%9A%20%E6%89%8B%E5%8A%A8%E6%BF%80%E6%B4%BB%20%E5%9C%A8%E7%BA%BF%E8%B4%AD%E4%B9%B0%20%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE%20NAVICAT%20PREMIUM%2016.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A13.988998%2C%22y%22%3A11.932419%2C%22width%22%3A25.475048%2C%22height%22%3A14.075027000000002%2C%22text%22%3A%22%E6%B3%A8%E5%86%8C%22%7D%2C%7B%22x%22%3A51.634388%2C%22y%22%3A82.44938%2C%22width%22%3A97.151702%2C%22height%22%3A20.848799999999997%2C%22text%22%3A%22%E6%B0%B8%E4%B9%85%E8%AE%B8%E5%8F%AF%E8%AF%81%22%7D%2C%7B%22x%22%3A430.82632%2C%22y%22%3A84.07198%2C%22width%22%3A38.76947999999999%2C%22height%22%3A20.033084000000002%2C%22text%22%3A%22%E8%AE%A2%E9%98%85%22%7D%2C%7B%22x%22%3A431.92807%2C%22y%22%3A113.41169%2C%22width%22%3A117.26303000000001%2C%22height%22%3A14.49676500000001%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8NAVICATID%E7%99%BB%E5%BD%95%22%7D%2C%7B%22x%22%3A51.680447%2C%22y%22%3A114.90894%2C%22width%22%3A148.627523%2C%22height%22%3A13.091759999999994%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8%E8%AE%B8%E5%8F%AF%E8%AF%81%E5%AF%86%E9%92%A5%E6%B3%A8%E5%86%8C%E5%B9%B6%E6%BF%80%E6%B4%BB.%22%7D%2C%7B%22x%22%3A54.889084%2C%22y%22%3A166.98116%2C%22width%22%3A29.938485999999997%2C%22height%22%3A10.377600000000001%2C%22text%22%3A%22NAV%22%7D%2C%7B%22x%22%3A132.87666%2C%22y%22%3A182.92961%2C%22width%22%3A496.01751%2C%22height%22%3A15.964429999999993%2C%22text%22%3A%22%E5%9B%A0%E4%B8%BA%E6%BF%80%E6%B4%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9A%82%E6%97%B6%E4%B8%8D%E5%8F%AF%E4%BD%BF%E7%94%A8%2C%E6%89%80%E4%BB%A5%E4%BD%A0%E7%9A%84%E8%AE%B8%E5%8F%AF%E8%AF%81%E6%9C%AA%E8%83%BD%E6%BF%80%E6%B4%BB.%E8%AF%B7%E5%B0%9D%E8%AF%95%E4%BD%BF%E7%94%A8%E6%89%BF%E5%8A%A8%E6%BF%80%E6%B4%BB%2C%E6%88%96%E7%A8%8D%E5%90%8E%E5%86%8D%E8%AF%95.%22%7D%2C%7B%22x%22%3A51.672367%2C%22y%22%3A194.61925%2C%22width%22%3A34.181943%2C%22height%22%3A12.964920000000006%2C%22text%22%3A%22%E7%8E%B0%E5%9C%A8%E6%B8%A9%22%7D%2C%7B%22x%22%3A133.09322%2C%22y%22%3A197.82452%2C%22width%22%3A544.17228%2C%22height%22%3A17.17371%2C%22text%22%3A%22%E5%A6%82%E6%9E%9C%E6%AD%A4%E9%97%AE%E9%A2%98%E4%BB%8D%E7%84%B6%E5%AD%98%E5%9C%A8%2C%E8%AF%B7%E5%89%8D%E5%BE%80HTTPS%3A%2F%2FHELP.NAVICAT.COM%2FHE%2FZH-CN%2F%2FEQUESTS%2FNEW%20%E8%81%94%E7%B3%BB%20NAVICAT%E6%94%AF%E6%8C%81.%22%7D%2C%7B%22x%22%3A51.795563%2C%22y%22%3A211.57167%2C%22width%22%3A28.126897%2C%22height%22%3A13.011769999999984%2C%22text%22%3A%22%E8%AF%B7%E5%9C%A8%22%7D%2C%7B%22x%22%3A699.449%2C%22y%22%3A221.50697%2C%22width%22%3A33.35964999999999%2C%22height%22%3A14.129490000000004%2C%22text%22%3A%22%E5%B7%B1%E5%AF%86%E7%A0%81%22%7D%2C%7B%22x%22%3A132.37218%2C%22y%22%3A235.908%2C%22width%22%3A56.28576000000001%2C%22height%22%3A12.836340000000007%2C%22text%22%3A%2290010001%22%7D%2C%7B%22x%22%3A335.5792%2C%22y%22%3A263.82364%2C%22width%22%3A29.07990000000001%2C%22height%22%3A13.719760000000008%2C%22text%22%3A%22%E7%A1%AE%E5%AE%9A%22%7D%2C%7B%22x%22%3A406.16104%2C%22y%22%3A264.09927%2C%22width%22%3A50.23357999999996%2C%22height%22%3A13.586250000000007%2C%22text%22%3A%22%E6%89%8B%E5%8A%A8%E6%BF%80%E6%B4%BB%22%7D%2C%7B%22x%22%3A77.31353%2C%22y%22%3A377.78323%2C%22width%22%3A49.850229999999996%2C%22height%22%3A13.929689999999994%2C%22text%22%3A%22%E5%9C%A8%E7%BA%BF%E8%B4%AD%E4%B9%B0%22%7D%2C%7B%22x%22%3A683.7324%2C%22y%22%3A378.8126%2C%22width%22%3A49.50459999999998%2C%22height%22%3A13.460930000000019%2C%22text%22%3A%22%E8%BF%9E%E6%8E%A5%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A289.28833%2C%22y%22%3A393.14243%2C%22width%22%3A203.48080000000004%2C%22height%22%3A17.18139000000002%2C%22text%22%3A%22NAVICAT%20PREMIUM%2016.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ub25c28ea%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u0b0835f0\" id=\"u0b0835f0\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585241595-53b2cb1a-6cbc-426f-9788-1faf32c6d14f.png%22%2C%22taskId%22%3A%22uad884a9e-d80d-402c-8e14-0c68879e6a5%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A56410%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A922%2C%22originHeight%22%3A691%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%89%8B%E5%8A%A8%E6%BF%80%E6%B4%BB%20%E8%AF%B7%E5%9C%A8%E6%9C%89%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%94%B5%E8%84%91%E5%89%8D%E5%BE%80HTTPS%2F%2FCUSTOMERNAVICATCON%2FCR%2FCR%2FMANUAL%20ACTIVATE.PHP%2C%E8%BE%93%E5%85%A5%E6%B8%85%E6%B0%B8%E7%A0%81%E6%9D%A5%E5%8D%B3%E6%97%B6%E8%8E%B7%E5%8F%96%E6%95%99%20%E6%B4%BB%E7%A0%81.%E7%84%B6%E5%90%8E%2C%E5%9C%A8%E6%BF%80%E6%B4%BB%E7%A0%81%E5%AD%97%E6%AE%B5%E8%BE%93%E5%85%A5%E4%BD%A0%E7%9A%84%E6%BF%80%E6%B4%BB%E7%A0%81%E5%B9%B6%E7%82%B9%E5%87%BB%E6%BF%80%E6%B4%BB%E6%8C%89%E9%92%AE.%20%E6%B3%A8%E5%86%8C%20%E8%AF%B7%E6%B1%82%E7%A0%81%3A%20ILVUVEN3XF%2FRETGGDAHZ3JD4CMAYNUKDEIOTJ68MUWIZWAPPZEJAVACSU%2BBDNX2KBT2W3ATXNW4C1A%20%E6%B0%B8%E4%B9%85%20%2BMLOG%20%5D%2BW9PD639H0GPIHZ374DRTBAHVUZLAMXEOKBMEEXWEORSITK9%2BLVGBIANRSJPBYGCSXI2JSBRAC02XSO%20QUM8BFNIK%20%E4%BD%BF%E7%94%A8%E8%AE%B8%20L%2BIM2RT050308JIUSHNRVAJTF64XJA700%2F1-TTBI8PEKO1TG2RLJCNIUC8XODVIUOKPEPKJOUGFOR%2F%20ISLHOEXQOUINSQLBTJJTHEDEOJEXCKYXVOGKDAA2GUOD6BWFH6BALUOWREVQPHIJI3PCL2K%2FGOI%2FNMXZ%20ZWQPSLIOVLYLA%20NAVC%20%E7%8E%B0%E5%9C%A8%E6%BF%80%20%E8%AF%B7%E5%9C%A820%20%E8%AE%B0%E5%AF%86%E7%A0%81%20%E6%BF%80%E6%B4%BB%E7%A0%81%3A%20%E6%8E%A5%E8%AE%BE%E7%BD%AE%20%E6%BF%80%E6%B4%BB%20%E5%8F%96%E6%B6%88%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A163.27106%2C%22y%22%3A27.784506%2C%22width%22%3A48.80008000000001%2C%22height%22%3A13.908884%2C%22text%22%3A%22%E6%89%8B%E5%8A%A8%E6%BF%80%E6%B4%BB%22%7D%2C%7B%22x%22%3A168.6374%2C%22y%22%3A66.73685%2C%22width%22%3A577.4286999999999%2C%22height%22%3A13.311329999999998%2C%22text%22%3A%22%E8%AF%B7%E5%9C%A8%E6%9C%89%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%94%B5%E8%84%91%E5%89%8D%E5%BE%80HTTPS%2F%2FCUSTOMERNAVICATCON%2FCR%2FCR%2FMANUAL%20ACTIVATE.PHP%2C%E8%BE%93%E5%85%A5%E6%B8%85%E6%B0%B8%E7%A0%81%E6%9D%A5%E5%8D%B3%E6%97%B6%E8%8E%B7%E5%8F%96%E6%95%99%22%7D%2C%7B%22x%22%3A168.58963%2C%22y%22%3A83.27468%2C%22width%22%3A316.82431%2C%22height%22%3A14.083794999999995%2C%22text%22%3A%22%E6%B4%BB%E7%A0%81.%E7%84%B6%E5%90%8E%2C%E5%9C%A8%E6%BF%80%E6%B4%BB%E7%A0%81%E5%AD%97%E6%AE%B5%E8%BE%93%E5%85%A5%E4%BD%A0%E7%9A%84%E6%BF%80%E6%B4%BB%E7%A0%81%E5%B9%B6%E7%82%B9%E5%87%BB%E6%BF%80%E6%B4%BB%E6%8C%89%E9%92%AE.%22%7D%2C%7B%22x%22%3A81.99898%2C%22y%22%3A128.21562%2C%22width%22%3A25.347486000000004%2C%22height%22%3A13.685949999999991%2C%22text%22%3A%22%E6%B3%A8%E5%86%8C%22%7D%2C%7B%22x%22%3A166.56941%2C%22y%22%3A158.47858%2C%22width%22%3A39.359639999999985%2C%22height%22%3A13.689099999999996%2C%22text%22%3A%22%E8%AF%B7%E6%B1%82%E7%A0%81%3A%22%7D%2C%7B%22x%22%3A172.96005%2C%22y%22%3A187.05786%2C%22width%22%3A546.87815%2C%22height%22%3A11.369370000000004%2C%22text%22%3A%22ILVUVEN3XF%2FRETGGDAHZ3JD4CMAYNUKDEIOTJ68MUWIZWAPPZEJAVACSU%2BBDNX2KBT2W3ATXNW4C1A%22%7D%2C%7B%22x%22%3A118.8336%2C%22y%22%3A200.16786%2C%22width%22%3A38.32815999999998%2C%22height%22%3A20.23137%2C%22text%22%3A%22%E6%B0%B8%E4%B9%85%22%7D%2C%7B%22x%22%3A173.90614%2C%22y%22%3A201.58517%2C%22width%22%3A33.693070000000006%2C%22height%22%3A10.42161999999999%2C%22text%22%3A%22%2BMLOG%22%7D%2C%7B%22x%22%3A172.02667%2C%22y%22%3A214.39235%2C%22width%22%3A554.42456%2C%22height%22%3A12.042630000000003%2C%22text%22%3A%22%5D%2BW9PD639H0GPIHZ374DRTBAHVUZLAMXEOKBMEEXWEORSITK9%2BLVGBIANRSJPBYGCSXI2JSBRAC02XSO%22%7D%2C%7B%22x%22%3A172.33293%2C%22y%22%3A228.31688%2C%22width%22%3A66.51109%2C%22height%22%3A12.06443999999999%2C%22text%22%3A%22QUM8BFNIK%22%7D%2C%7B%22x%22%3A118.974945%2C%22y%22%3A229.87524%2C%22width%22%3A41.59371499999999%2C%22height%22%3A13.366370000000018%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8%E8%AE%B8%22%7D%2C%7B%22x%22%3A172.29945%2C%22y%22%3A242.14409%2C%22width%22%3A554.08141%2C%22height%22%3A12.983309999999989%2C%22text%22%3A%22L%2BIM2RT050308JIUSHNRVAJTF64XJA700%2F1-TTBI8PEKO1TG2RLJCNIUC8XODVIUOKPEPKJOUGFOR%2F%22%7D%2C%7B%22x%22%3A172.94511%2C%22y%22%3A257.10013%2C%22width%22%3A554.68764%2C%22height%22%3A11.423770000000047%2C%22text%22%3A%22ISLHOEXQOUINSQLBTJJTHEDEOJEXCKYXVOGKDAA2GUOD6BWFH6BALUOWREVQPHIJI3PCL2K%2FGOI%2FNMXZ%22%7D%2C%7B%22x%22%3A173.29176%2C%22y%22%3A271.99014%2C%22width%22%3A105.91771%2C%22height%22%3A11.43707999999998%2C%22text%22%3A%22ZWQPSLIOVLYLA%22%7D%2C%7B%22x%22%3A123.710724%2C%22y%22%3A281.94702%2C%22width%22%3A32.318816%2C%22height%22%3A12.25961000000001%2C%22text%22%3A%22NAVC%22%7D%2C%7B%22x%22%3A118.79089%2C%22y%22%3A309.98288%2C%22width%22%3A40.35831%2C%22height%22%3A13.603449999999953%2C%22text%22%3A%22%E7%8E%B0%E5%9C%A8%E6%BF%80%22%7D%2C%7B%22x%22%3A120.08538%2C%22y%22%3A327.91052%2C%22width%22%3A40.9884%2C%22height%22%3A13.493409999999983%2C%22text%22%3A%22%E8%AF%B7%E5%9C%A820%22%7D%2C%7B%22x%22%3A762.78296%2C%22y%22%3A339.23758%2C%22width%22%3A38.717840000000024%2C%22height%22%3A12.44476000000003%2C%22text%22%3A%22%E8%AE%B0%E5%AF%86%E7%A0%81%22%7D%2C%7B%22x%22%3A166.18129%2C%22y%22%3A389.8789%2C%22width%22%3A40.88401000000002%2C%22height%22%3A13.599300000000028%2C%22text%22%3A%22%E6%BF%80%E6%B4%BB%E7%A0%81%3A%22%7D%2C%7B%22x%22%3A759.7729%2C%22y%22%3A494.21228%2C%22width%22%3A41.691299999999956%2C%22height%22%3A14.381619999999998%2C%22text%22%3A%22%E6%8E%A5%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A617.21533%2C%22y%22%3A620.18915%2C%22width%22%3A26.94177000000002%2C%22height%22%3A14.437249999999949%2C%22text%22%3A%22%E6%BF%80%E6%B4%BB%22%7D%2C%7B%22x%22%3A700.21924%2C%22y%22%3A620.9736%2C%22width%22%3A26.507460000000037%2C%22height%22%3A13.573339999999916%2C%22text%22%3A%22%E5%8F%96%E6%B6%88%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uf0952df5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ucf569ddf\" id=\"ucf569ddf\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585247800-431e4cb6-fab5-485d-943d-6e316963181a.png%22%2C%22taskId%22%3A%22uedf34502-077b-4981-b4e2-22a1b966eda%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A43874%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A502%2C%22originHeight%22%3A396%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NAVICAT16%20PREMIUM%20-%20ONLY%20KEYGEN%20V1.0%201)PATCH%20HOST%2FSERIAL%20HOST%20SIMPLIFIED%20CHINESE%20AUTO-INSERT%20LANGUAGES%3A%20NAVC-HEDP-3V33-DCGU%20COPY%20SERIAL%20KEYGEN%3A%20GENERATE%202)KEYGEN%2FOFFLINE%20ACTIVATION%20DELT-FOX%20YOUR%20NAME%20DEFCONX%20YOUR%20ORGANIZATION%20AUTO-INSERT%20REQUEST%20CODE%20LVUVEW3%3E%20F%20RE%20TGGDAHZ3IJP4CMQYNUKDELQTJ68MUW%201Z%20WQPP75AYAC3U%2BBDNX2KBT2W3ATXNW4C1Q%2BMLOQ%20CLEAR%20COPY%20'SPD639H0QPIHZ374DRTBAHVUZLAMXEQKBMEEXWEOR%20SJTK9%2BLVGB1QNRSJPBYGCSX2IGBRAC02XSOQUM8BFNIK%20%2BIM2T0SQJO8JIUSHWRVAJTF64XJA700%2FTTBI8PEKO%201TG%20PASTE%202HJCNLUC8XODVIUOKPEPKJOUGFQKQ8%2FSLHOEXQOULW5QLB%20ACTIVATION%20CODE%20CLEAR%20COPY%20GENERATE%20BY%20DELTAFOX%20HTTPS%3A%2F%2FNAVICAT.COM%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A27.347952%2C%22y%22%3A6.8073173%2C%22width%22%3A229.573928%2C%22height%22%3A17.3063607%2C%22text%22%3A%22NAVICAT16%20PREMIUM%20-%20ONLY%20KEYGEN%20V1.0%22%7D%2C%7B%22x%22%3A20.992233%2C%22y%22%3A42.777744%2C%22width%22%3A127.090147%2C%22height%22%3A12.426018%2C%22text%22%3A%221)PATCH%20HOST%2FSERIAL%22%7D%2C%7B%22x%22%3A344.1193%2C%22y%22%3A56.94243%2C%22width%22%3A28.64119999999997%2C%22height%22%3A11.797809999999998%2C%22text%22%3A%22HOST%22%7D%2C%7B%22x%22%3A124.24091%2C%22y%22%3A58.15903%2C%22width%22%3A103.3847%2C%22height%22%3A11.430040000000005%2C%22text%22%3A%22SIMPLIFIED%20CHINESE%22%7D%2C%7B%22x%22%3A412.4036%2C%22y%22%3A58.186153%2C%22width%22%3A62.8664%2C%22height%22%3A11.719107000000001%2C%22text%22%3A%22AUTO-INSERT%22%7D%2C%7B%22x%22%3A21.875814%2C%22y%22%3A58.782124%2C%22width%22%3A70.688906%2C%22height%22%3A12.512086000000004%2C%22text%22%3A%22LANGUAGES%3A%22%7D%2C%7B%22x%22%3A147.14839%2C%22y%22%3A81.52454%2C%22width%22%3A144.20081%2C%22height%22%3A12.40186%2C%22text%22%3A%22NAVC-HEDP-3V33-DCGU%22%7D%2C%7B%22x%22%3A340.34775%2C%22y%22%3A83.55728%2C%22width%22%3A29.679499999999962%2C%22height%22%3A11.190209999999993%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A21.146828%2C%22y%22%3A83.88354%2C%22width%22%3A85.267936%2C%22height%22%3A12.608519999999999%2C%22text%22%3A%22SERIAL%20KEYGEN%3A%22%7D%2C%7B%22x%22%3A411.7819%2C%22y%22%3A84.76034%2C%22width%22%3A51.20702%2C%22height%22%3A9.912549999999996%2C%22text%22%3A%22GENERATE%22%7D%2C%7B%22x%22%3A21.16919%2C%22y%22%3A113.54293%2C%22width%22%3A170.56815999999998%2C%22height%22%3A13.700050000000005%2C%22text%22%3A%222)KEYGEN%2FOFFLINE%20ACTIVATION%22%7D%2C%7B%22x%22%3A283.90787%2C%22y%22%3A128.644%2C%22width%22%3A53.035030000000006%2C%22height%22%3A13.299569999999989%2C%22text%22%3A%22DELT-FOX%22%7D%2C%7B%22x%22%3A23.341028%2C%22y%22%3A129.61684%2C%22width%22%3A66.587842%2C%22height%22%3A12.19919999999999%2C%22text%22%3A%22YOUR%20NAME%22%7D%2C%7B%22x%22%3A283.8704%2C%22y%22%3A153.21248%2C%22width%22%3A53.59832%2C%22height%22%3A12.118989999999997%2C%22text%22%3A%22DEFCONX%22%7D%2C%7B%22x%22%3A22.894526%2C%22y%22%3A153.56413%2C%22width%22%3A106.167504%2C%22height%22%3A12.864409999999992%2C%22text%22%3A%22YOUR%20ORGANIZATION%22%7D%2C%7B%22x%22%3A282.0472%2C%22y%22%3A169.98427%2C%22width%22%3A68.91545000000002%2C%22height%22%3A11.440349999999995%2C%22text%22%3A%22AUTO-INSERT%22%7D%2C%7B%22x%22%3A21.611702%2C%22y%22%3A185.30714%2C%22width%22%3A85.32002299999999%2C%22height%22%3A12.14434%2C%22text%22%3A%22REQUEST%20CODE%22%7D%2C%7B%22x%22%3A143.81526%2C%22y%22%3A184.86932%2C%22width%22%3A312.20930999999996%2C%22height%22%3A12.690629999999999%2C%22text%22%3A%22LVUVEW3%3E%20F%20RE%20TGGDAHZ3IJP4CMQYNUKDELQTJ68MUW%201Z%22%7D%2C%7B%22x%22%3A140.6186%2C%22y%22%3A197.63484%2C%22width%22%3A292.14263000000005%2C%22height%22%3A14.348919999999993%2C%22text%22%3A%22WQPP75AYAC3U%2BBDNX2KBT2W3ATXNW4C1Q%2BMLOQ%22%7D%2C%7B%22x%22%3A30.254107%2C%22y%22%3A204.6419%2C%22width%22%3A31.739253%2C%22height%22%3A11.774130000000014%2C%22text%22%3A%22CLEAR%22%7D%2C%7B%22x%22%3A89.77316%2C%22y%22%3A205.1403%2C%22width%22%3A30.528809999999993%2C%22height%22%3A11.88282000000001%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A165.6882%2C%22y%22%3A211.94696%2C%22width%22%3A295.26013%2C%22height%22%3A13.093510000000009%2C%22text%22%3A%22'SPD639H0QPIHZ374DRTBAHVUZLAMXEQKBMEEXWEOR%22%7D%2C%7B%22x%22%3A140.60503%2C%22y%22%3A223.26393%2C%22width%22%3A307.92952%2C%22height%22%3A14.080450000000013%2C%22text%22%3A%22SJTK9%2BLVGB1QNRSJPBYGCSX2IGBRAC02XSOQUM8BFNIK%22%7D%2C%7B%22x%22%3A143.22762%2C%22y%22%3A238.60449%2C%22width%22%3A318.79304%2C%22height%22%3A10.969069999999988%2C%22text%22%3A%22%2BIM2T0SQJO8JIUSHWRVAJTF64XJA700%2FTTBI8PEKO%201TG%22%7D%2C%7B%22x%22%3A57.88528%2C%22y%22%3A249.33122%2C%22width%22%3A32.879735000000004%2C%22height%22%3A10.294299999999993%2C%22text%22%3A%22PASTE%22%7D%2C%7B%22x%22%3A141.94287%2C%22y%22%3A251.1436%2C%22width%22%3A319.71646%2C%22height%22%3A12.369000000000028%2C%22text%22%3A%222HJCNLUC8XODVIUOKPEPKJOUGFQKQ8%2FSLHOEXQOULW5QLB%22%7D%2C%7B%22x%22%3A22.916626%2C%22y%22%3A277.47726%2C%22width%22%3A94.06453400000001%2C%22height%22%3A11.809239999999988%2C%22text%22%3A%22ACTIVATION%20CODE%22%7D%2C%7B%22x%22%3A29.475256%2C%22y%22%3A296.47516%2C%22width%22%3A29.948293999999997%2C%22height%22%3A12.097899999999981%2C%22text%22%3A%22CLEAR%22%7D%2C%7B%22x%22%3A89.80099%2C%22y%22%3A297.08136%2C%22width%22%3A30.54083%2C%22height%22%3A12.04079999999999%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A48.502335%2C%22y%22%3A345.39258%2C%22width%22%3A52.715864999999994%2C%22height%22%3A11.821519999999964%2C%22text%22%3A%22GENERATE%22%7D%2C%7B%22x%22%3A12.089442%2C%22y%22%3A372.68884%2C%22width%22%3A72.35177399999999%2C%22height%22%3A13.371979999999951%2C%22text%22%3A%22BY%20DELTAFOX%22%7D%2C%7B%22x%22%3A370.36392%2C%22y%22%3A373.5852%2C%22width%22%3A114.71161000000001%2C%22height%22%3A12.913340000000005%2C%22text%22%3A%22HTTPS%3A%2F%2FNAVICAT.COM%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uc999464f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"J1GnB\" id=\"J1GnB\"><span data-lake-id=\"ue8f51214\" id=\"ue8f51214\" style=\"color: rgb(78, 83, 88)\">第六步</span></h2><p data-lake-id=\"ub9b9934a\" id=\"ub9b9934a\"><span data-lake-id=\"u76a35d0b\" id=\"u76a35d0b\" style=\"color: rgb(78, 83, 88)\">在激活软件里选择最后一个generate 之后选择安装目录下的 RegPrivateKey.pem 会得到激活码，切换到软件界面完成激活 。至此激活完成</span></p><p data-lake-id=\"u50d871fc\" id=\"u50d871fc\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585289168-0dd209c7-a7a9-4e85-a571-907078a4e5ae.png%22%2C%22taskId%22%3A%22u9fd12649-4b4c-4bf9-851c-2683e241fac%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A57097%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A502%2C%22originHeight%22%3A396%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22N%20JCAT16%20PREMIUM%20-%20ONLY%20KEYGEN%20V1.O%201)PATCH%20HOST%2FSERIAL%20HOST%20SIMPLIFIED%20CHINESE%20AUTO-INSEIT%20LANGUAGES%3A%20NAVC-HEDP-3V33-DCGU%20COPY%20SERIAL%20KEYGEN%3A%20ERATE%202)%20KEYGEN%2FOFFLINE%20ACTIVATION%20DELTAFOX%20YOUR%20NAME%20DEFCONX%20YOUR%20ORGANIZATION%20AUTO-INSERT%20REQUEST%20CODE%3A%20LVUVEW3XF%2FRE%20TGGDAHZ3%20'D4CMQYNUKDELQTJ68MUW%201Z%20WQPPZEJAYAC3U%2BBDNX2K%60ST2W%203ATXNW4C%201Q%2BMLOQ%20CLEAR%20COPY%20%2BW90D639H0QPIHZ37%2FURTBAHVUZLAMXEQKBMEEXWEOR%20SJTK9%2BLVGB1QNRSJR3YGCSX2GBRAC02XSOQUM8BFNIK%20%2BLM2T0SQJO8JI%60SHW%2BVAITF64XJA700%2FRTTBI8PEKO%201TG%20PASTE%202HJCNLUC8X0%2F%2FIUOKPEPKJOUGFQKQ8%2FSLHOEXQOULW5QLB%20ACTIVATION%20CODE%20IBYPP9%2F%20JSONILLEKSSYPCQGEFOG6YWKYN%20SSJYDSH3KVXCYHACTJBABO%2FH7YWN%201DQLR5XALZX%20%2BNXY%20CLEAR%20COPY%20J2FS9NFYOWHUTHDSV1FLTLYSMTDY5OR7JOUSENHQTJ%20ZUAW75YD00JSL%2F7SHDSKB5ZUMZBWBNZHR4QEQ6EDO%20OF72CIV856J7WHUVTZ1URJZFY1LLWBBUHKZKXZA0DZQHL%20QYCXQVRS3LDBUBPYFAMJSEZONK2Q3H9%2FYFNN3NC6Y5%20GENERATE%20YATHA%2FTAGMERGAANA%20L%20HN%2FAYA%20CFFYHVE22.%20CAI%20BY%20DELTAFOX%20HTTPS%3A%2F%2FNAVICAT.COM%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A27.772156%2C%22y%22%3A4.467504%2C%22width%22%3A229.28482400000001%2C%22height%22%3A21.324595000000002%2C%22text%22%3A%22N%20JCAT16%20PREMIUM%20-%20ONLY%20KEYGEN%20V1.O%22%7D%2C%7B%22x%22%3A21.70124%2C%22y%22%3A42.70162%2C%22width%22%3A126.54687%2C%22height%22%3A12.422026000000002%2C%22text%22%3A%221)PATCH%20HOST%2FSERIAL%22%7D%2C%7B%22x%22%3A344.11865%2C%22y%22%3A56.967075%2C%22width%22%3A28.65298999999999%2C%22height%22%3A11.932944999999997%2C%22text%22%3A%22HOST%22%7D%2C%7B%22x%22%3A124.66388%2C%22y%22%3A58.16472%2C%22width%22%3A102.98205999999999%2C%22height%22%3A11.249690000000001%2C%22text%22%3A%22SIMPLIFIED%20CHINESE%22%7D%2C%7B%22x%22%3A411.89188%2C%22y%22%3A58.381947%2C%22width%22%3A63.54051999999996%2C%22height%22%3A10.674413000000001%2C%22text%22%3A%22AUTO-INSEIT%22%7D%2C%7B%22x%22%3A22.31013%2C%22y%22%3A58.83662%2C%22width%22%3A70.31466%2C%22height%22%3A12.490400000000001%2C%22text%22%3A%22LANGUAGES%3A%22%7D%2C%7B%22x%22%3A147.20844%2C%22y%22%3A81.70852%2C%22width%22%3A144.10030999999998%2C%22height%22%3A11.830580000000012%2C%22text%22%3A%22NAVC-HEDP-3V33-DCGU%22%7D%2C%7B%22x%22%3A340.0274%2C%22y%22%3A82.99044%2C%22width%22%3A30.06772000000001%2C%22height%22%3A11.65536999999999%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A21.119427%2C%22y%22%3A83.824554%2C%22width%22%3A85.464193%2C%22height%22%3A12.727685999999991%2C%22text%22%3A%22SERIAL%20KEYGEN%3A%22%7D%2C%7B%22x%22%3A432.40683%2C%22y%22%3A85.33335%2C%22width%22%3A30.46459999999996%2C%22height%22%3A8.737729999999999%2C%22text%22%3A%22ERATE%22%7D%2C%7B%22x%22%3A21.199713%2C%22y%22%3A113.37029%2C%22width%22%3A170.543267%2C%22height%22%3A13.736550000000008%2C%22text%22%3A%222)%20KEYGEN%2FOFFLINE%20ACTIVATION%22%7D%2C%7B%22x%22%3A283.28992%2C%22y%22%3A129.19894%2C%22width%22%3A54.22570000000002%2C%22height%22%3A11.695060000000012%2C%22text%22%3A%22DELTAFOX%22%7D%2C%7B%22x%22%3A23.350077%2C%22y%22%3A129.60655%2C%22width%22%3A66.511068%2C%22height%22%3A12.061710000000005%2C%22text%22%3A%22YOUR%20NAME%22%7D%2C%7B%22x%22%3A283.03598%2C%22y%22%3A153.54976%2C%22width%22%3A53.67077999999998%2C%22height%22%3A11.306790000000007%2C%22text%22%3A%22DEFCONX%22%7D%2C%7B%22x%22%3A22.918282%2C%22y%22%3A153.55545%2C%22width%22%3A106.25655799999998%2C%22height%22%3A12.803179999999998%2C%22text%22%3A%22YOUR%20ORGANIZATION%22%7D%2C%7B%22x%22%3A260.57013%2C%22y%22%3A169.3114%2C%22width%22%3A92.71062999999998%2C%22height%22%3A12.284670000000006%2C%22text%22%3A%22AUTO-INSERT%22%7D%2C%7B%22x%22%3A21.489843%2C%22y%22%3A185.12659%2C%22width%22%3A87.091417%2C%22height%22%3A12.467569999999995%2C%22text%22%3A%22REQUEST%20CODE%3A%22%7D%2C%7B%22x%22%3A142.60924%2C%22y%22%3A185.48619%2C%22width%22%3A320.42039%2C%22height%22%3A11.472980000000007%2C%22text%22%3A%22LVUVEW3XF%2FRE%20TGGDAHZ3%20'D4CMQYNUKDELQTJ68MUW%201Z%22%7D%2C%7B%22x%22%3A141.45598%2C%22y%22%3A200.29466%2C%22width%22%3A290.76691999999997%2C%22height%22%3A10.002600000000001%2C%22text%22%3A%22WQPPZEJAYAC3U%2BBDNX2K%60ST2W%203ATXNW4C%201Q%2BMLOQ%22%7D%2C%7B%22x%22%3A30.303976%2C%22y%22%3A204.62048%2C%22width%22%3A31.467019999999998%2C%22height%22%3A11.792290000000008%2C%22text%22%3A%22CLEAR%22%7D%2C%7B%22x%22%3A90.53094%2C%22y%22%3A204.75844%2C%22width%22%3A30.239109999999997%2C%22height%22%3A12.310640000000006%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A141.77342%2C%22y%22%3A212.08882%2C%22width%22%3A319.15098%2C%22height%22%3A11.752559999999988%2C%22text%22%3A%22%2BW90D639H0QPIHZ37%2FURTBAHVUZLAMXEQKBMEEXWEOR%22%7D%2C%7B%22x%22%3A141.5559%2C%22y%22%3A224.2226%2C%22width%22%3A307.03996%2C%22height%22%3A12.37190000000001%2C%22text%22%3A%22SJTK9%2BLVGB1QNRSJR3YGCSX2GBRAC02XSOQUM8BFNIK%22%7D%2C%7B%22x%22%3A142.42961%2C%22y%22%3A238.61327%2C%22width%22%3A319.58329000000003%2C%22height%22%3A10.768869999999993%2C%22text%22%3A%22%2BLM2T0SQJO8JI%60SHW%2BVAITF64XJA700%2FRTTBI8PEKO%201TG%22%7D%2C%7B%22x%22%3A57.64699%2C%22y%22%3A248.85573%2C%22width%22%3A32.74298999999999%2C%22height%22%3A10.699600000000032%2C%22text%22%3A%22PASTE%22%7D%2C%7B%22x%22%3A141.70566%2C%22y%22%3A251.23492%2C%22width%22%3A320.02368%2C%22height%22%3A11.925020000000018%2C%22text%22%3A%222HJCNLUC8X0%2F%2FIUOKPEPKJOUGFQKQ8%2FSLHOEXQOULW5QLB%22%7D%2C%7B%22x%22%3A22.823305%2C%22y%22%3A277.4285%2C%22width%22%3A93.008135%2C%22height%22%3A11.738159999999993%2C%22text%22%3A%22ACTIVATION%20CODE%22%7D%2C%7B%22x%22%3A140.9258%2C%22y%22%3A276.7745%2C%22width%22%3A220.90192999999996%2C%22height%22%3A14.794320000000027%2C%22text%22%3A%22IBYPP9%2F%20JSONILLEKSSYPCQGEFOG6YWKYN%22%7D%2C%7B%22x%22%3A174.54393%2C%22y%22%3A291.3845%2C%22width%22%3A285.89347000000004%2C%22height%22%3A13.30619999999999%2C%22text%22%3A%22SSJYDSH3KVXCYHACTJBABO%2FH7YWN%201DQLR5XALZX%22%7D%2C%7B%22x%22%3A144.27296%2C%22y%22%3A294.34167%2C%22width%22%3A26.19238999999999%2C%22height%22%3A8.386390000000006%2C%22text%22%3A%22%2BNXY%22%7D%2C%7B%22x%22%3A29.30948%2C%22y%22%3A296.35593%2C%22width%22%3A30.43455%2C%22height%22%3A12.445400000000006%2C%22text%22%3A%22CLEAR%22%7D%2C%7B%22x%22%3A91.46044%2C%22y%22%3A297.43204%2C%22width%22%3A28.316689999999994%2C%22height%22%3A10.91064%2C%22text%22%3A%22COPY%22%7D%2C%7B%22x%22%3A154.2939%2C%22y%22%3A304.5081%2C%22width%22%3A305.722%2C%22height%22%3A12.228000000000009%2C%22text%22%3A%22J2FS9NFYOWHUTHDSV1FLTLYSMTDY5OR7JOUSENHQTJ%22%7D%2C%7B%22x%22%3A140.389%2C%22y%22%3A317.7711%2C%22width%22%3A321.6507%2C%22height%22%3A13.350450000000023%2C%22text%22%3A%22ZUAW75YD00JSL%2F7SHDSKB5ZUMZBWBNZHR4QEQ6EDO%22%7D%2C%7B%22x%22%3A140.52542%2C%22y%22%3A330.4298%2C%22width%22%3A320.56918%2C%22height%22%3A12.471479999999985%2C%22text%22%3A%22OF72CIV856J7WHUVTZ1URJZFY1LLWBBUHKZKXZA0DZQHL%22%7D%2C%7B%22x%22%3A141.32837%2C%22y%22%3A344.0037%2C%22width%22%3A313.02952999999997%2C%22height%22%3A11.29095000000001%2C%22text%22%3A%22QYCXQVRS3LDBUBPYFAMJSEZONK2Q3H9%2FYFNN3NC6Y5%22%7D%2C%7B%22x%22%3A48.972885%2C%22y%22%3A345.76505%2C%22width%22%3A52.25640500000001%2C%22height%22%3A11.485850000000028%2C%22text%22%3A%22GENERATE%22%7D%2C%7B%22x%22%3A156.42354%2C%22y%22%3A357.02744%2C%22width%22%3A126.91462999999999%2C%22height%22%3A7.113029999999981%2C%22text%22%3A%22YATHA%2FTAGMERGAANA%22%7D%2C%7B%22x%22%3A303.13196%2C%22y%22%3A357.50113%2C%22width%22%3A151.46347000000003%2C%22height%22%3A8.417970000000025%2C%22text%22%3A%22L%20HN%2FAYA%20CFFYHVE22.%20CAI%22%7D%2C%7B%22x%22%3A12.763272%2C%22y%22%3A372.35355%2C%22width%22%3A71.072908%2C%22height%22%3A13.733249999999998%2C%22text%22%3A%22BY%20DELTAFOX%22%7D%2C%7B%22x%22%3A370.9058%2C%22y%22%3A373.9603%2C%22width%22%3A114.06819999999999%2C%22height%22%3A12.38964999999996%2C%22text%22%3A%22HTTPS%3A%2F%2FNAVICAT.COM%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u3c87dc3a%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u7e63ebe6\" id=\"u7e63ebe6\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585296115-f2ab5c53-32d2-4bae-884c-9bcc13f71b38.png%22%2C%22taskId%22%3A%22u8739371b-2321-4a3f-82c6-15fb2d65dca%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A22014%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A795%2C%22originHeight%22%3A443%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22REGPRIVAT%20INSTANTCLIE%20CACERT.PE%20RESOURCE%20NT.11.2%20EKEY.PEM%20M%20%E5%90%8D(N)%3A%20FILE%20PEM(*.PEM)%20%E5%8F%96%E6%B6%88%20%E6%89%93%E5%BC%80(O)%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A258.4217%2C%22y%22%3A64.201836%2C%22width%22%3A58.22958%2C%22height%22%3A14.537824%2C%22text%22%3A%22REGPRIVAT%22%7D%2C%7B%22x%22%3A26.524725%2C%22y%22%3A65.48771%2C%22width%22%3A58.713449%2C%22height%22%3A12.49105999999999%2C%22text%22%3A%22INSTANTCLIE%22%7D%2C%7B%22x%22%3A183.51526%2C%22y%22%3A67.20794%2C%22width%22%3A54.27208999999999%2C%22height%22%3A11.501750000000001%2C%22text%22%3A%22CACERT.PE%22%7D%2C%7B%22x%22%3A107.79197%2C%22y%22%3A67.901535%2C%22width%22%3A51.68049999999998%2C%22height%22%3A9.39728500000001%2C%22text%22%3A%22RESOURCE%22%7D%2C%7B%22x%22%3A33.638638%2C%22y%22%3A82.69457%2C%22width%22%3A44.81921199999999%2C%22height%22%3A14.624064000000004%2C%22text%22%3A%22NT.11.2%22%7D%2C%7B%22x%22%3A258.86792%2C%22y%22%3A83.315674%2C%22width%22%3A58.529019999999946%2C%22height%22%3A12.380981000000006%2C%22text%22%3A%22EKEY.PEM%22%7D%2C%7B%22x%22%3A203.98097%2C%22y%22%3A85.34385%2C%22width%22%3A12.845709999999997%2C%22height%22%3A8.699095999999997%2C%22text%22%3A%22M%22%7D%2C%7B%22x%22%3A0.042460207%2C%22y%22%3A367.745%2C%22width%22%3A33.966301793%2C%22height%22%3A15.54140000000001%2C%22text%22%3A%22%E5%90%8D(N)%3A%22%7D%2C%7B%22x%22%3A586.914%2C%22y%22%3A370.19998%2C%22width%22%3A96.79010000000005%2C%22height%22%3A13.78012000000001%2C%22text%22%3A%22FILE%20PEM(*.PEM)%22%7D%2C%7B%22x%22%3A713.6492%2C%22y%22%3A400.0807%2C%22width%22%3A26.80810000000008%2C%22height%22%3A13.347300000000018%2C%22text%22%3A%22%E5%8F%96%E6%B6%88%22%7D%2C%7B%22x%22%3A605.59344%2C%22y%22%3A400.49646%2C%22width%22%3A42.32866000000001%2C%22height%22%3A13.581389999999999%2C%22text%22%3A%22%E6%89%93%E5%BC%80(O)%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u2d1822eb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u04affb49\" id=\"u04affb49\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585302078-c26971fb-6f1b-4037-a11b-7b4badb465f9.png%22%2C%22taskId%22%3A%22uf78c2d21-dbe2-4937-8fed-1510164f434%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A52935%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A590%2C%22originHeight%22%3A615%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E8%AF%B7%E5%9C%A8%E7%89%B9%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%94%B5%E8%84%91%E5%89%8D%E5%BE%80HTTPS%2F%2FCUSTOMER.NAVICATCOM%2FCN%2FCN%2FMANUAL%20ACTIVATE.PHP%2C%E8%BE%93%E5%85%A5%E8%AF%B7%E6%B1%82%E7%A0%81%E6%9D%A5%E5%8D%B3%E6%97%B6%E8%8E%B7%E5%8F%96%E6%95%99%20%E6%B4%BB%E7%A0%81.%E7%84%B6%E5%90%8E%2C%E5%9C%A8%E6%BF%80%E6%B4%BB%E7%A0%81%E5%AD%97%E6%AE%B5%E8%BE%93%E5%85%A5%E4%BD%A0%E7%9A%84%E6%BF%80%E6%B4%BB%E7%A0%81%E5%B9%B6%E7%82%B9%E5%87%BB%E6%BF%80%E6%B4%BB%E6%8C%89%E9%92%AE.%20%E8%AF%B7%E6%B1%82%E7%A0%81%3A%20LVUVENSXF%2FRETGGDANZ3JJP4CHAYNUKDEIOTJ68MUN1ZWAPPZEJAYAC3U%2BBDNX2KBT2W3ATXNW4C1Q%20%2BMLOG%20%2BW9PD639HEAPIHZ374DRTBAHVUZLANXEOKBMEEXNEORSITK9%2BLVGB1GNRSJPBYGCSXI2IGBRACE2XSO%20QUM8BFNIK%20%2BIMZRT0SQJO8JIUSHNRVAJTF64XJA700%2F1RTTBI8PERO1TG2RLJCNIUC8XEDVIUOKPEPKJOUGFOK08%2F%20SLHOEXOOUIW5QLBTJJTWODEC..%20%2FPHIJI3PCL2K%2FGOI%2FNMXZ%20ZWQP5LIOVLYLA%20NAVICAT%20PREMIUM%20%E7%8E%B0%E5%B7%B2%E6%BF%80%E6%B4%BB.%20%E7%A1%AE%E5%AE%9A%20%E6%BF%80%E6%B4%BB%E7%A0%81%3A%20IBYPP9Y9SONILEKSSYPCQGEFOG6VWKVN%20%2BHXV63JDYDSH3KYXCYHACTJB7H60%2FH7YUNIDALS5XALZXTBRJ2FS9NFYOWHUTHDSVIFLTIVSMTDV5OR%207J0USENHATJZUAW75YD00JSL%2F7SHDSKB5ZUMZBWBNZRHR4QEGSEDOBEDOBF72CIV85677WHUVTZIURJZFY1%20ITIWBBUHKZKXZA0DZIQHLQYCXQVRS3IDBUBPYFGMJSEZONKI203H9%2FYFNN3NC6YSMXCZZZB0%2FTN9V1ER%20GOCP8AMUYBN%2FAYOSF5CBXS232XSEIWUIPKC%2BTJNIDECO8JYOIIMGZ5%2FA2053IQ%2BRQVZSIRLNG%E4%B8%89%E4%B8%89%20%E6%BF%80%E6%B4%BB%20%E5%8F%96%E6%B6%88%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A2.143758%2C%22y%22%3A30.205805%2C%22width%22%3A577.425272%2C%22height%22%3A15.061525%2C%22text%22%3A%22%E8%AF%B7%E5%9C%A8%E7%89%B9%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%94%B5%E8%84%91%E5%89%8D%E5%BE%80HTTPS%2F%2FCUSTOMER.NAVICATCOM%2FCN%2FCN%2FMANUAL%20ACTIVATE.PHP%2C%E8%BE%93%E5%85%A5%E8%AF%B7%E6%B1%82%E7%A0%81%E6%9D%A5%E5%8D%B3%E6%97%B6%E8%8E%B7%E5%8F%96%E6%95%99%22%7D%2C%7B%22x%22%3A2.0622485%2C%22y%22%3A48.176365%2C%22width%22%3A316.7875715%2C%22height%22%3A14.444665%2C%22text%22%3A%22%E6%B4%BB%E7%A0%81.%E7%84%B6%E5%90%8E%2C%E5%9C%A8%E6%BF%80%E6%B4%BB%E7%A0%81%E5%AD%97%E6%AE%B5%E8%BE%93%E5%85%A5%E4%BD%A0%E7%9A%84%E6%BF%80%E6%B4%BB%E7%A0%81%E5%B9%B6%E7%82%B9%E5%87%BB%E6%BF%80%E6%B4%BB%E6%8C%89%E9%92%AE.%22%7D%2C%7B%22x%22%3A1.2132441%2C%22y%22%3A124.020164%2C%22width%22%3A37.353855900000006%2C%22height%22%3A13.12517600000001%2C%22text%22%3A%22%E8%AF%B7%E6%B1%82%E7%A0%81%3A%22%7D%2C%7B%22x%22%3A6.1483765%2C%22y%22%3A153.00684%2C%22width%22%3A546.6178235%2C%22height%22%3A11.190199999999976%2C%22text%22%3A%22LVUVENSXF%2FRETGGDANZ3JJP4CHAYNUKDEIOTJ68MUN1ZWAPPZEJAYAC3U%2BBDNX2KBT2W3ATXNW4C1Q%22%7D%2C%7B%22x%22%3A7.34609%2C%22y%22%3A167.58846%2C%22width%22%3A32.409586000000004%2C%22height%22%3A9.262200000000007%2C%22text%22%3A%22%2BMLOG%22%7D%2C%7B%22x%22%3A6.6069036%2C%22y%22%3A178.90062%2C%22width%22%3A553.3845964%2C%22height%22%3A12.660229999999984%2C%22text%22%3A%22%2BW9PD639HEAPIHZ374DRTBAHVUZLANXEOKBMEEXNEORSITK9%2BLVGB1GNRSJPBYGCSXI2IGBRACE2XSO%22%7D%2C%7B%22x%22%3A4.984287%2C%22y%22%3A194.0544%2C%22width%22%3A64.762303%2C%22height%22%3A11.239010000000007%2C%22text%22%3A%22QUM8BFNIK%22%7D%2C%7B%22x%22%3A5.67572%2C%22y%22%3A207.15546%2C%22width%22%3A554.22253%2C%22height%22%3A13.495679999999993%2C%22text%22%3A%22%2BIMZRT0SQJO8JIUSHNRVAJTF64XJA700%2F1RTTBI8PERO1TG2RLJCNIUC8XEDVIUOKPEPKJOUGFOK08%2F%22%7D%2C%7B%22x%22%3A4.982718%2C%22y%22%3A222.33418%2C%22width%22%3A175.720282%2C%22height%22%3A11.451220000000006%2C%22text%22%3A%22SLHOEXOOUIW5QLBTJJTWODEC..%22%7D%2C%7B%22x%22%3A418.14636%2C%22y%22%3A222.95514%2C%22width%22%3A141.62593999999996%2C%22height%22%3A11.044720000000012%2C%22text%22%3A%22%2FPHIJI3PCL2K%2FGOI%2FNMXZ%22%7D%2C%7B%22x%22%3A4.9832153%2C%22y%22%3A236.44963%2C%22width%22%3A105.7281797%2C%22height%22%3A10.98218%2C%22text%22%3A%22ZWQP5LIOVLYLA%22%7D%2C%7B%22x%22%3A226.31786%2C%22y%22%3A281.01862%2C%22width%22%3A154.67246999999998%2C%22height%22%3A13.743780000000015%2C%22text%22%3A%22NAVICAT%20PREMIUM%20%E7%8E%B0%E5%B7%B2%E6%BF%80%E6%B4%BB.%22%7D%2C%7B%22x%22%3A276.7643%2C%22y%22%3A328.50168%2C%22width%22%3A26.477550000000008%2C%22height%22%3A12.83168999999998%2C%22text%22%3A%22%E7%A1%AE%E5%AE%9A%22%7D%2C%7B%22x%22%3A0.5726878%2C%22y%22%3A354.62988%2C%22width%22%3A38.132527200000006%2C%22height%22%3A13.810889999999972%2C%22text%22%3A%22%E6%BF%80%E6%B4%BB%E7%A0%81%3A%22%7D%2C%7B%22x%22%3A5.7013965%2C%22y%22%3A383.5742%2C%22width%22%3A227.72421350000002%2C%22height%22%3A13.030569999999955%2C%22text%22%3A%22IBYPP9Y9SONILEKSSYPCQGEFOG6VWKVN%22%7D%2C%7B%22x%22%3A6.184591%2C%22y%22%3A398.28232%2C%22width%22%3A552.6907090000001%2C%22height%22%3A11.81102999999996%2C%22text%22%3A%22%2BHXV63JDYDSH3KYXCYHACTJB7H60%2FH7YUNIDALS5XALZXTBRJ2FS9NFYOWHUTHDSVIFLTIVSMTDV5OR%22%7D%2C%7B%22x%22%3A4.5474105%2C%22y%22%3A412.03586%2C%22width%22%3A554.9372895%2C%22height%22%3A11.209540000000004%2C%22text%22%3A%227J0USENHATJZUAW75YD00JSL%2F7SHDSKB5ZUMZBWBNZRHR4QEGSEDOBEDOBF72CIV85677WHUVTZIURJZFY1%22%7D%2C%7B%22x%22%3A4.9293823%2C%22y%22%3A425.94946%2C%22width%22%3A554.7200177%2C%22height%22%3A12.191990000000033%2C%22text%22%3A%22ITIWBBUHKZKXZA0DZIQHLQYCXQVRS3IDBUBPYFGMJSEZONKI203H9%2FYFNN3NC6YSMXCZZZB0%2FTN9V1ER%22%7D%2C%7B%22x%22%3A5.1120734%2C%22y%22%3A441.04453%2C%22width%22%3A526.4772866000001%2C%22height%22%3A10.463189999999997%2C%22text%22%3A%22GOCP8AMUYBN%2FAYOSF5CBXS232XSEIWUIPKC%2BTJNIDECO8JYOIIMGZ5%2FA2053IQ%2BRQVZSIRLNG%E4%B8%89%E4%B8%89%22%7D%2C%7B%22x%22%3A448.72314%2C%22y%22%3A585.7055%2C%22width%22%3A27.402499999999975%2C%22height%22%3A14.629639999999995%2C%22text%22%3A%22%E6%BF%80%E6%B4%BB%22%7D%2C%7B%22x%22%3A532.2612%2C%22y%22%3A586.13837%2C%22width%22%3A26.801060000000007%2C%22height%22%3A13.390729999999962%2C%22text%22%3A%22%E5%8F%96%E6%B6%88%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u9d419c5f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"qgKh7\" id=\"qgKh7\"><span data-lake-id=\"ueab01655\" id=\"ueab01655\" style=\"color: rgb(78, 83, 88)\">第七步,开始使用Navicat Premium 16.</span></h2><p data-lake-id=\"uaf24d31f\" id=\"uaf24d31f\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654585346396-a9236df2-dfcd-45a9-a9ce-56c0be430978.png%22%2C%22taskId%22%3A%22ua78f790a-29a1-4d01-a467-bff185f61c1%22%2C%22clientId%22%3A%22udaf18b14-ac2d-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A950.9434304486915%2C%22height%22%3A635%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A90329%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1050%2C%22originHeight%22%3A701%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NAVICAT%20PREMIUM%20%E5%B7%A5%E5%85%B7%20%E6%9F%A5%E7%9C%8B%20%E7%AA%97%E5%8F%A3%20%E6%96%87%E4%BB%B6%20%E7%BC%96%E8%BE%91%20%E6%94%B6%E8%97%8F%E5%A4%B9%20%E5%B8%AE%E5%8A%A9%20%E4%B8%AD%E5%9B%BD%20G%20%E5%9B%BE%E8%A1%A8%20%E8%87%AA%E5%8A%A8%E8%BF%90%E8%A1%8C%20%E6%A8%A1%E5%9E%8B%20O%20NAVICAT%20PREMIUM%20%E7%89%88%E6%9C%AC16.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)-PREMIUM%20NAVG-OWVO-QXQ5-*****%20HUIHUI%20TOUSHI-TEAM%20COPYRIGHT%20O%201999-2022%20PREMIUMSOFTM%20CYBERTECH%20LTD.%E4%BF%9D%E7%95%99%E6%89%80%E6%9C%89%E6%9D%83%E5%88%A9.%20VICAT%5C%5CMYSQL%5C%5CSERVERS%5C%5C39.105.22.112%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%97%E7%AC%A6%E9%9B%86%20%E8%87%AA%E5%8A%A8%20SSH%E4%B8%BB%E6%9C%BA%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A34.491043%2C%22y%22%3A9.362957%2C%22width%22%3A109.47595700000002%2C%22height%22%3A14.421023%2C%22text%22%3A%22NAVICAT%20PREMIUM%22%7D%2C%7B%22x%22%3A236.84912%2C%22y%22%3A39.810677%2C%22width%22%3A29.83313000000001%2C%22height%22%3A15.710425999999998%2C%22text%22%3A%22%E5%B7%A5%E5%85%B7%22%7D%2C%7B%22x%22%3A116.838165%2C%22y%22%3A40.195312%2C%22width%22%3A27.163915000000003%2C%22height%22%3A14.765637999999996%2C%22text%22%3A%22%E6%9F%A5%E7%9C%8B%22%7D%2C%7B%22x%22%3A289.18643%2C%22y%22%3A39.99908%2C%22width%22%3A28.37363000000005%2C%22height%22%3A14.545070000000003%2C%22text%22%3A%22%E7%AA%97%E5%8F%A3%22%7D%2C%7B%22x%22%3A12.077427%2C%22y%22%3A40.088997%2C%22width%22%3A28.173229%2C%22height%22%3A14.849007%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%22%7D%2C%7B%22x%22%3A63.889645%2C%22y%22%3A40.209675%2C%22width%22%3A28.217185%2C%22height%22%3A14.927952000000005%2C%22text%22%3A%22%E7%BC%96%E8%BE%91%22%7D%2C%7B%22x%22%3A170.6438%2C%22y%22%3A40.909992%2C%22width%22%3A41.19605999999999%2C%22height%22%3A13.923397999999999%2C%22text%22%3A%22%E6%94%B6%E8%97%8F%E5%A4%B9%22%7D%2C%7B%22x%22%3A348.29346%2C%22y%22%3A40.994972%2C%22width%22%3A27.47084000000001%2C%22height%22%3A13.794008000000005%2C%22text%22%3A%22%E5%B8%AE%E5%8A%A9%22%7D%2C%7B%22x%22%3A778.4478%2C%22y%22%3A66.563705%2C%22width%22%3A137.45489999999995%2C%22height%22%3A32.783685000000006%2C%22text%22%3A%22%E4%B8%AD%E5%9B%BD%22%7D%2C%7B%22x%22%3A242.29689%2C%22y%22%3A98.542564%2C%22width%22%3A224.21727%2C%22height%22%3A213.12625599999998%2C%22text%22%3A%22G%22%7D%2C%7B%22x%22%3A880.31146%2C%22y%22%3A105.43366%2C%22width%22%3A29.209139999999934%2C%22height%22%3A14.568079999999995%2C%22text%22%3A%22%E5%9B%BE%E8%A1%A8%22%7D%2C%7B%22x%22%3A723.6595%2C%22y%22%3A105.60987%2C%22width%22%3A52.99565000000007%2C%22height%22%3A14.424139999999994%2C%22text%22%3A%22%E8%87%AA%E5%8A%A8%E8%BF%90%E8%A1%8C%22%7D%2C%7B%22x%22%3A809.58124%2C%22y%22%3A105.85472%2C%22width%22%3A26.72693000000004%2C%22height%22%3A13.845299999999995%2C%22text%22%3A%22%E6%A8%A1%E5%9E%8B%22%7D%2C%7B%22x%22%3A726.7532%2C%22y%22%3A135.31308%2C%22width%22%3A16.6635%2C%22height%22%3A14.612409999999983%2C%22text%22%3A%22O%22%7D%2C%7B%22x%22%3A266.33282%2C%22y%22%3A317.55856%2C%22width%22%3A180.24607999999995%2C%22height%22%3A44.26947000000001%2C%22text%22%3A%22NAVICAT%22%7D%2C%7B%22x%22%3A287.2744%2C%22y%22%3A366.48236%2C%22width%22%3A136.15413%2C%22height%22%3A21.639189999999985%2C%22text%22%3A%22PREMIUM%22%7D%2C%7B%22x%22%3A235.04471%2C%22y%22%3A396.73056%2C%22width%22%3A242.91170999999997%2C%22height%22%3A16.827439999999967%2C%22text%22%3A%22%E7%89%88%E6%9C%AC16.0.13(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)-PREMIUM%22%7D%2C%7B%22x%22%3A262.9328%2C%22y%22%3A416.1778%2C%22width%22%3A185.64124000000004%2C%22height%22%3A16.1678%2C%22text%22%3A%22NAVG-OWVO-QXQ5-*****%22%7D%2C%7B%22x%22%3A333.58646%2C%22y%22%3A438.7411%2C%22width%22%3A44.67671999999999%2C%22height%22%3A14.01400000000001%2C%22text%22%3A%22HUIHUI%22%7D%2C%7B%22x%22%3A310.28674%2C%22y%22%3A458.73962%2C%22width%22%3A90.95396%2C%22height%22%3A14.129059999999981%2C%22text%22%3A%22TOUSHI-TEAM%22%7D%2C%7B%22x%22%3A100.69083%2C%22y%22%3A574.7164%2C%22width%22%3A508.97037%2C%22height%22%3A19.898829999999975%2C%22text%22%3A%22COPYRIGHT%20O%201999-2022%20PREMIUMSOFTM%20CYBERTECH%20LTD.%E4%BF%9D%E7%95%99%E6%89%80%E6%9C%89%E6%9D%83%E5%88%A9.%22%7D%2C%7B%22x%22%3A679.77405%2C%22y%22%3A586.2528%2C%22width%22%3A225.57312000000002%2C%22height%22%3A16.408149999999978%2C%22text%22%3A%22VICAT%5C%5CMYSQL%5C%5CSERVERS%5C%5C39.105.22.112%22%7D%2C%7B%22x%22%3A471.06754%2C%22y%22%3A616.8759%2C%22width%22%3A98.78665999999998%2C%22height%22%3A17.373299999999972%2C%22text%22%3A%22%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%97%E7%AC%A6%E9%9B%86%22%7D%2C%7B%22x%22%3A471.75504%2C%22y%22%3A641.2176%2C%22width%22%3A27.364280000000008%2C%22height%22%3A13.686149999999998%2C%22text%22%3A%22%E8%87%AA%E5%8A%A8%22%7D%2C%7B%22x%22%3A471.688%2C%22y%22%3A670.46387%2C%22width%22%3A70.21050000000002%2C%22height%22%3A16.616629999999986%2C%22text%22%3A%22SSH%E4%B8%BB%E6%9C%BA%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uc0ea6417%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u76d59158\" id=\"u76d59158\"><br></p><p data-lake-id=\"u930ae1d3\" id=\"u930ae1d3\"><br></p><h1 data-lake-id=\"FdVtc\" id=\"FdVtc\"><span data-lake-id=\"u8969e8ce\" id=\"u8969e8ce\">下载地址：</span></h1><h2 data-lake-id=\"aTwQ8\" id=\"aTwQ8\"><span data-lake-id=\"u9a93a9c0\" id=\"u9a93a9c0\">阿里网盘下载地址：</span></h2><p data-lake-id=\"u56a11c46\" id=\"u56a11c46\"><span data-lake-id=\"ud5f950b6\" id=\"ud5f950b6\">https://www.aliyundrive.com/s/GjNLnRQ8PrX</span></p><p data-lake-id=\"u82509a0c\" id=\"u82509a0c\"><span data-lake-id=\"u31fe7f11\" id=\"u31fe7f11\">提取码： rc88</span></p><p data-lake-id=\"u2cb5c4e8\" id=\"u2cb5c4e8\"><span data-lake-id=\"u8ae5d795\" id=\"u8ae5d795\">​</span><br></p><h2 data-lake-id=\"c9ZyB\" id=\"c9ZyB\"><span data-lake-id=\"uafe7c5dc\" id=\"uafe7c5dc\">百度网盘下载地址：</span></h2><p data-lake-id=\"u77faf6eb\" id=\"u77faf6eb\"><span data-lake-id=\"udab14790\" id=\"udab14790\">https://pan.baidu.com/share/init?surl=kBiiqr2hZW87t4mwm4VJzw&amp;pwd=jpqa</span></p><p data-lake-id=\"uca40d24b\" id=\"uca40d24b\"><span data-lake-id=\"u5228dff7\" id=\"u5228dff7\">提取码：jpqa</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 7,
    "hits": 7,
    "comments_count": 0,
    "word_count": 528,
    "created_at": "2022-06-07T06:55:39.000Z",
    "updated_at": "2023-07-27T02:06:28.000Z",
    "content_updated_at": "2023-07-27T02:06:28.000Z",
    "published_at": "2022-06-07T07:07:02.000Z",
    "first_published_at": "2022-06-07T07:06:48.293Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1033608990,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 79307231,
    "type": "Doc",
    "slug": "oekruf",
    "title": "Sql根据不同条件统计总数",
    "description": "tags: [sql,统计总数]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url:  https://blog.csdn.net/Android_xue/article/details/...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561091-7d6274e4-1cf7-41b4-ba48-53a83ebfe2b3.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [sql,统计总数]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span class=\"ne-text\">https://blog.csdn.net/Android_xue/article/details/102802475</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span class=\"ne-text\">SunnyRivers</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h2 id=\"vITWn\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">前言</span></h2><p id=\"u3fcee980\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">经常会遇到根据不同的条件统计总数的问题，一般有两种写法：count和sum都可以<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">数据准备：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561091-7d6274e4-1cf7-41b4-ba48-53a83ebfe2b3.png\" width=\"206\" id=\"ud3d43eb6\" class=\"ne-image\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></p><h2 id=\"ThJMr\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">方法一 ：Count</span></h2><p id=\"u9ad0e554\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">代码：</span></p><pre data-language=\"plain\" id=\"kjENL\" class=\"ne-codeblock language-plain\"><code>SELECT\n\tCOUNT(\n\t\tCASE\n\t\tWHEN age &gt; 20\n\t\tAND age &lt; 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt0,\n\tCOUNT(\n\t\tCASE\n\t\tWHEN age &gt;= 25\n\t\tAND age &lt; 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n</code></pre><p id=\"uef2f399f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">结果：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561057-c9fdbc9c-5862-4237-91af-2349aeebc373.png\" width=\"154\" id=\"u825895be\" class=\"ne-image\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></p><h2 id=\"pMMmM\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">方法二：sum</span></h2><p id=\"u0d402d1f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">代码：</span></p><pre data-language=\"plain\" id=\"XL4Et\" class=\"ne-codeblock language-plain\"><code>SELECT\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt; 20\n\t\tAND age &lt; 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\t0\n\t\tEND\n\t) AS cnt0,\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt;= 25\n\t\tAND age &lt; 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\t0\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n</code></pre><p id=\"ubf408518\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">结果：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561061-5ad89cb0-dcb8-44e9-9e05-80a5cfd7e033.png\" width=\"151\" id=\"u98b08105\" class=\"ne-image\" style=\"color: rgb(77, 77, 77); font-size: 16px\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">当然也可以和count代码一样ELSE后面也写为NULL</span></p><pre data-language=\"plain\" id=\"XGttC\" class=\"ne-codeblock language-plain\"><code>SELECT\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt; 20\n\t\tAND age &lt; 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt0,\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt;= 25\n\t\tAND age &lt; 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n</code></pre><h2 id=\"FycuG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">后记</span></h2><p id=\"u83f249f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">其实原理很简单，count统计的时候有满足条件的就加1，没有满足的变为NULL，我们知道聚合函数统计的时候是忽略null值的；而sum原理和coun相似，不过ELSE后面可以是0或者NULL。</span></p></div>",
    "body": "tags: [sql,统计总数]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url:  https://blog.csdn.net/Android_xue/article/details/102802475<br />copyright_author: SunnyRivers<br />cover:\n\n---\n\n\n\n<a name=\"vITWn\"></a>\n## 前言\n经常会遇到根据不同的条件统计总数的问题，一般有两种写法：count和sum都可以<br />数据准备：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561091-7d6274e4-1cf7-41b4-ba48-53a83ebfe2b3.png#clientId=ufdbd7940-8ec2-4&from=paste&id=ud3d43eb6&originHeight=169&originWidth=206&originalType=url&ratio=1&rotation=0&showTitle=false&size=13537&status=done&style=none&taskId=u04100260-f1e9-4f63-9aac-4ff5d8b022c&title=)\n<a name=\"ThJMr\"></a>\n## 方法一 ：Count\n代码：\n```\nSELECT\n\tCOUNT(\n\t\tCASE\n\t\tWHEN age > 20\n\t\tAND age < 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt0,\n\tCOUNT(\n\t\tCASE\n\t\tWHEN age >= 25\n\t\tAND age < 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n\n```\n结果：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561057-c9fdbc9c-5862-4237-91af-2349aeebc373.png#clientId=ufdbd7940-8ec2-4&from=paste&id=u825895be&originHeight=61&originWidth=154&originalType=url&ratio=1&rotation=0&showTitle=false&size=3244&status=done&style=none&taskId=udbb4fbb6-27fa-44ef-8bd8-16d9df6528d&title=)\n<a name=\"pMMmM\"></a>\n## 方法二：sum\n代码：\n```\nSELECT\n\tSUM(\n\t\tCASE\n\t\tWHEN age > 20\n\t\tAND age < 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\t0\n\t\tEND\n\t) AS cnt0,\n\tSUM(\n\t\tCASE\n\t\tWHEN age >= 25\n\t\tAND age < 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\t0\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n\n```\n结果：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561061-5ad89cb0-dcb8-44e9-9e05-80a5cfd7e033.png#clientId=ufdbd7940-8ec2-4&from=paste&id=u98b08105&originHeight=61&originWidth=151&originalType=url&ratio=1&rotation=0&showTitle=false&size=3361&status=done&style=none&taskId=u032f97ab-91da-4174-b81c-05891ba2930&title=)<br />当然也可以和count代码一样ELSE后面也写为NULL\n```\nSELECT\n\tSUM(\n\t\tCASE\n\t\tWHEN age > 20\n\t\tAND age < 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt0,\n\tSUM(\n\t\tCASE\n\t\tWHEN age >= 25\n\t\tAND age < 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n\n```\n<a name=\"FycuG\"></a>\n## 后记\n其实原理很简单，count统计的时候有满足条件的就加1，没有满足的变为NULL，我们知道聚合函数统计的时候是忽略null值的；而sum原理和coun相似，不过ELSE后面可以是0或者NULL。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [sql,统计总数]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span class=\"ne-text\">https://blog.csdn.net/Android_xue/article/details/102802475</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span><span class=\"ne-text\">SunnyRivers</span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><h2 id=\"vITWn\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">前言</span></h2><p id=\"u3fcee980\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">经常会遇到根据不同的条件统计总数的问题，一般有两种写法：count和sum都可以<br />数据准备：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561091-7d6274e4-1cf7-41b4-ba48-53a83ebfe2b3.png\" width=\"206\" id=\"ud3d43eb6\" class=\"ne-image\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"></p><h2 id=\"ThJMr\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">方法一 ：Count</span></h2><p id=\"u9ad0e554\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">代码：</span></p><pre data-language=\"plain\" id=\"kjENL\" class=\"ne-codeblock language-plain\">SELECT\n\tCOUNT(\n\t\tCASE\n\t\tWHEN age &gt; 20\n\t\tAND age &lt; 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt0,\n\tCOUNT(\n\t\tCASE\n\t\tWHEN age &gt;= 25\n\t\tAND age &lt; 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n</pre><p id=\"uef2f399f\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">结果：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561057-c9fdbc9c-5862-4237-91af-2349aeebc373.png\" width=\"154\" id=\"u825895be\" class=\"ne-image\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"></p><h2 id=\"pMMmM\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">方法二：sum</span></h2><p id=\"u0d402d1f\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">代码：</span></p><pre data-language=\"plain\" id=\"XL4Et\" class=\"ne-codeblock language-plain\">SELECT\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt; 20\n\t\tAND age &lt; 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\t0\n\t\tEND\n\t) AS cnt0,\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt;= 25\n\t\tAND age &lt; 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\t0\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n</pre><p id=\"ubf408518\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">结果：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1654093561061-5ad89cb0-dcb8-44e9-9e05-80a5cfd7e033.png\" width=\"151\" id=\"u98b08105\" class=\"ne-image\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\"><br />当然也可以和count代码一样ELSE后面也写为NULL</span></p><pre data-language=\"plain\" id=\"XGttC\" class=\"ne-codeblock language-plain\">SELECT\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt; 20\n\t\tAND age &lt; 25 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt0,\n\tSUM(\n\t\tCASE\n\t\tWHEN age &gt;= 25\n\t\tAND age &lt; 30 THEN\n\t\t\t1\n\t\tELSE\n\t\t\tNULL\n\t\tEND\n\t) AS cnt1\nFROM\n\tUSER;\n</pre><h2 id=\"FycuG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">后记</span></h2><p id=\"u83f249f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px; color: rgb(77, 77, 77)\">其实原理很简单，count统计的时候有满足条件的就加1，没有满足的变为NULL，我们知道聚合函数统计的时候是忽略null值的；而sum原理和coun相似，不过ELSE后面可以是0或者NULL。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [sql,统计总数]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"uf49b7255\" id=\"uf49b7255\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span data-lake-id=\"u311206ad\" id=\"u311206ad\">https://blog.csdn.net/Android_xue/article/details/102802475</span><span data-lake-id=\"u38203dda\" id=\"u38203dda\" style=\"color: rgb(38, 38, 38)\"><br />copyright_author: </span><span data-lake-id=\"u6aca2633\" id=\"u6aca2633\">SunnyRivers</span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p><h2 data-lake-id=\"vITWn\" id=\"vITWn\"><span data-lake-id=\"u18b784a2\" id=\"u18b784a2\" style=\"color: rgb(79, 79, 79)\">前言</span></h2><p data-lake-id=\"u3fcee980\" id=\"u3fcee980\"><span data-lake-id=\"u59c934bc\" id=\"u59c934bc\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">经常会遇到根据不同的条件统计总数的问题，一般有两种写法：count和sum都可以<br />数据准备：<br /></span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654093561091-7d6274e4-1cf7-41b4-ba48-53a83ebfe2b3.png%22%2C%22taskId%22%3A%22u04100260-f1e9-4f63-9aac-4ff5d8b022c%22%2C%22clientId%22%3A%22ufdbd7940-8ec2-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A13537%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A206%2C%22originHeight%22%3A169%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NAME%20AGE%201%E5%BC%A0%E4%B8%89%2023%202%E6%9D%8E%E5%9B%9B%2024%20%E7%8E%8B%E4%BA%94%2025%204%E8%B5%B5%E5%85%AD%2026%205%E7%94%B0%E4%B8%83%2027%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A55.41969%2C%22y%22%3A7.9999986%2C%22width%22%3A42.23519%2C%22height%22%3A11.360663400000002%2C%22text%22%3A%22NAME%22%7D%2C%7B%22x%22%3A135.89958%2C%22y%22%3A8.354413%2C%22width%22%3A26.715240000000023%2C%22height%22%3A12.769841000000001%2C%22text%22%3A%22AGE%22%7D%2C%7B%22x%22%3A41.55722%2C%22y%22%3A30.700674%2C%22width%22%3A46.06371%2C%22height%22%3A16.766241%2C%22text%22%3A%221%E5%BC%A0%E4%B8%89%22%7D%2C%7B%22x%22%3A175.4041%2C%22y%22%3A31.875076%2C%22width%22%3A20.029779999999988%2C%22height%22%3A14.837539999999997%2C%22text%22%3A%2223%22%7D%2C%7B%22x%22%3A40.512737%2C%22y%22%3A58.84811%2C%22width%22%3A45.921103%2C%22height%22%3A16.125970000000002%2C%22text%22%3A%222%E6%9D%8E%E5%9B%9B%22%7D%2C%7B%22x%22%3A176.31612%2C%22y%22%3A60.616135%2C%22width%22%3A20.338299999999975%2C%22height%22%3A13.410394999999994%2C%22text%22%3A%2224%22%7D%2C%7B%22x%22%3A44.86381%2C%22y%22%3A85.83607%2C%22width%22%3A42.339650000000006%2C%22height%22%3A16.07389599999999%2C%22text%22%3A%22%E7%8E%8B%E4%BA%94%22%7D%2C%7B%22x%22%3A175.65346%2C%22y%22%3A86.80155%2C%22width%22%3A19.85213999999999%2C%22height%22%3A15.422229999999999%2C%22text%22%3A%2225%22%7D%2C%7B%22x%22%3A39.298687%2C%22y%22%3A113.61988%2C%22width%22%3A49.024713000000006%2C%22height%22%3A17.29321999999999%2C%22text%22%3A%224%E8%B5%B5%E5%85%AD%22%7D%2C%7B%22x%22%3A175.64473%2C%22y%22%3A114.20761%2C%22width%22%3A19.632080000000002%2C%22height%22%3A15.465289999999996%2C%22text%22%3A%2226%22%7D%2C%7B%22x%22%3A39.726032%2C%22y%22%3A140.69753%2C%22width%22%3A49.54493800000001%2C%22height%22%3A17.959540000000004%2C%22text%22%3A%225%E7%94%B0%E4%B8%83%22%7D%2C%7B%22x%22%3A175.7237%2C%22y%22%3A142.57246%2C%22width%22%3A19.091499999999996%2C%22height%22%3A14.860979999999984%2C%22text%22%3A%2227%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ud3d43eb6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"></card></p><h2 data-lake-id=\"ThJMr\" id=\"ThJMr\"><span data-lake-id=\"u4c5daeb7\" id=\"u4c5daeb7\" style=\"color: rgb(79, 79, 79)\">方法一 ：Count</span></h2><p data-lake-id=\"u9ad0e554\" id=\"u9ad0e554\"><span data-lake-id=\"u843059c4\" id=\"u843059c4\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">代码：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22SELECT%5Cn%5CtCOUNT(%5Cn%5Ct%5CtCASE%5Cn%5Ct%5CtWHEN%20age%20%3E%2020%5Cn%5Ct%5CtAND%20age%20%3C%2025%20THEN%5Cn%5Ct%5Ct%5Ct1%5Cn%5Ct%5CtELSE%5Cn%5Ct%5Ct%5CtNULL%5Cn%5Ct%5CtEND%5Cn%5Ct)%20AS%20cnt0%2C%5Cn%5CtCOUNT(%5Cn%5Ct%5CtCASE%5Cn%5Ct%5CtWHEN%20age%20%3E%3D%2025%5Cn%5Ct%5CtAND%20age%20%3C%2030%20THEN%5Cn%5Ct%5Ct%5Ct1%5Cn%5Ct%5CtELSE%5Cn%5Ct%5Ct%5CtNULL%5Cn%5Ct%5CtEND%5Cn%5Ct)%20AS%20cnt1%5CnFROM%5Cn%5CtUSER%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kjENL%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uef2f399f\" id=\"uef2f399f\"><span data-lake-id=\"ue9e11e79\" id=\"ue9e11e79\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">结果：<br /></span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654093561057-c9fdbc9c-5862-4237-91af-2349aeebc373.png%22%2C%22taskId%22%3A%22udbb4fbb6-27fa-44ef-8bd8-16d9df6528d%22%2C%22clientId%22%3A%22ufdbd7940-8ec2-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A3244%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A154%2C%22originHeight%22%3A61%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22CNT1%20CNTO%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A75.4477%2C%22y%22%3A4.458631%2C%22width%22%3A28.346739999999997%2C%22height%22%3A11.541369%2C%22text%22%3A%22CNT1%22%7D%2C%7B%22x%22%3A6.0495644%2C%22y%22%3A4.572844%2C%22width%22%3A31.697582599999997%2C%22height%22%3A12.093822%2C%22text%22%3A%22CNTO%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u825895be%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"></card></p><h2 data-lake-id=\"pMMmM\" id=\"pMMmM\"><span data-lake-id=\"uc2e44a84\" id=\"uc2e44a84\" style=\"color: rgb(79, 79, 79)\">方法二：sum</span></h2><p data-lake-id=\"u0d402d1f\" id=\"u0d402d1f\"><span data-lake-id=\"ufb5d4605\" id=\"ufb5d4605\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">代码：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22SELECT%5Cn%5CtSUM(%5Cn%5Ct%5CtCASE%5Cn%5Ct%5CtWHEN%20age%20%3E%2020%5Cn%5Ct%5CtAND%20age%20%3C%2025%20THEN%5Cn%5Ct%5Ct%5Ct1%5Cn%5Ct%5CtELSE%5Cn%5Ct%5Ct%5Ct0%5Cn%5Ct%5CtEND%5Cn%5Ct)%20AS%20cnt0%2C%5Cn%5CtSUM(%5Cn%5Ct%5CtCASE%5Cn%5Ct%5CtWHEN%20age%20%3E%3D%2025%5Cn%5Ct%5CtAND%20age%20%3C%2030%20THEN%5Cn%5Ct%5Ct%5Ct1%5Cn%5Ct%5CtELSE%5Cn%5Ct%5Ct%5Ct0%5Cn%5Ct%5CtEND%5Cn%5Ct)%20AS%20cnt1%5CnFROM%5Cn%5CtUSER%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22XL4Et%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ubf408518\" id=\"ubf408518\"><span data-lake-id=\"u715fdeaf\" id=\"u715fdeaf\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">结果：<br /></span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1654093561061-5ad89cb0-dcb8-44e9-9e05-80a5cfd7e033.png%22%2C%22taskId%22%3A%22u032f97ab-91da-4174-b81c-05891ba2930%22%2C%22clientId%22%3A%22ufdbd7940-8ec2-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A3361%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A151%2C%22originHeight%22%3A61%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22CNTO%20CNT1%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A7.704811%2C%22y%22%3A6.651268%2C%22width%22%3A30.590687000000003%2C%22height%22%3A12.528457999999999%2C%22text%22%3A%22CNTO%22%7D%2C%7B%22x%22%3A76.61292%2C%22y%22%3A6.6737175%2C%22width%22%3A29.056094%2C%22height%22%3A13.374458500000001%2C%22text%22%3A%22CNT1%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u98b08105%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"></card><span data-lake-id=\"uf1a6b45b\" id=\"uf1a6b45b\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"><br />当然也可以和count代码一样ELSE后面也写为NULL</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22SELECT%5Cn%5CtSUM(%5Cn%5Ct%5CtCASE%5Cn%5Ct%5CtWHEN%20age%20%3E%2020%5Cn%5Ct%5CtAND%20age%20%3C%2025%20THEN%5Cn%5Ct%5Ct%5Ct1%5Cn%5Ct%5CtELSE%5Cn%5Ct%5Ct%5CtNULL%5Cn%5Ct%5CtEND%5Cn%5Ct)%20AS%20cnt0%2C%5Cn%5CtSUM(%5Cn%5Ct%5CtCASE%5Cn%5Ct%5CtWHEN%20age%20%3E%3D%2025%5Cn%5Ct%5CtAND%20age%20%3C%2030%20THEN%5Cn%5Ct%5Ct%5Ct1%5Cn%5Ct%5CtELSE%5Cn%5Ct%5Ct%5CtNULL%5Cn%5Ct%5CtEND%5Cn%5Ct)%20AS%20cnt1%5CnFROM%5Cn%5CtUSER%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22XGttC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"FycuG\" id=\"FycuG\"><span data-lake-id=\"u89b9d815\" id=\"u89b9d815\" style=\"color: rgb(79, 79, 79)\">后记</span></h2><p data-lake-id=\"u83f249f9\" id=\"u83f249f9\"><span data-lake-id=\"u797d78ef\" id=\"u797d78ef\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">其实原理很简单，count统计的时候有满足条件的就加1，没有满足的变为NULL，我们知道聚合函数统计的时候是忽略null值的；而sum原理和coun相似，不过ELSE后面可以是0或者NULL。</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 294,
    "created_at": "2022-06-01T14:25:43.000Z",
    "updated_at": "2023-07-27T02:06:33.000Z",
    "content_updated_at": "2023-07-27T02:06:33.000Z",
    "published_at": "2022-06-01T14:28:53.000Z",
    "first_published_at": "2022-06-01T14:26:47.344Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1025801392,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 79253327,
    "type": "Doc",
    "slug": "gdwnif",
    "title": "快速将Butterfly主题的CDN从jsDelivr切换至自建反向代理源",
    "description": "tags: [cdn,jsDeliver,butterfly]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:最新版的Butterfl...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [cdn,jsDeliver,butterfly]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">最新版的Butterfly取消了原来设置在</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">_config.yml</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">里的默认CDN，导致不能快速替换掉现在极不稳定的jsDelivr CDN。本文的默认Butterfly版本为</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">4.1.0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">。</span></p><h1 id=\"t5oWZ\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">配置</span></h1><p id=\"u93a1bdef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">现在的默认CDN地址被放在了主题的</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">/scripts/events/config.js</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">中：</span></p><pre data-language=\"javascript\" id=\"NFeOB\" class=\"ne-codeblock language-javascript\"><code>/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () =&gt; {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://cdn.jsdelivr.net/npm/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js',\n    valine: 'https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js',\n    disqusjs: 'https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js',\n    typed: 'https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js',\n    pangu: 'https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://cdn.jsdelivr.net/npm/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj =&gt; {\n    for (const i in obj) {\n      obj[i] === null &amp;&amp; delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item =&gt; item.toLowerCase().replace(/\\b[a-z]/g, s =&gt; s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})</code></pre><p id=\"udb435e96\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">所以只要快速替换掉这里的CDN，就可以切换到我们自建的CDN上。</span></p><h1 id=\"cDbCq\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">成果</span></h1><p id=\"u14e45b84\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">将</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">cdn.jsdelivr.net</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">全部替换为自己的反代源后，成果就诞生了：</span></p><p id=\"uc6072793\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: #F759AB; font-size: 16px\">（以下2种任选一种即可）</span></strong></p><h2 id=\"stGN1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">【代理后的1 成果】</span></h2><pre data-language=\"javascript\" id=\"VaHVp\" class=\"ne-codeblock language-javascript\"><code>/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () =&gt; {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://unpkg.com/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://unpkg.com/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://unpkg.com/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://unpkg.com/blueimp-md5/js/md5.min.js',\n    valine: 'https://unpkg.com/valine/dist/Valine.min.js',\n    disqusjs: 'https://unpkg.com/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://unpkg.com/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://unpkg.com/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://unpkg.com/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://unpkg.com/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://unpkg.com/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://unpkg.com/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://unpkg.com/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://unpkg.com/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://unpkg.com/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://unpkg.com/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://unpkg.com/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://jsdelivr.pai233.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://jsdelivr.pai233.top/npm/instant.page/instantpage.min.js',\n    typed: 'https://unpkg.com/typed.js/lib/typed.min.js',\n    pangu: 'https://unpkg.com/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://unpkg.com/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://unpkg.com/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://unpkg.com/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://unpkg.com/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://unpkg.com/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://unpkg.com/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://unpkg.com/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://unpkg.com/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://unpkg.com/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://unpkg.com/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://unpkg.com/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://unpkg.com/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://unpkg.com/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://unpkg.com/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://unpkg.com/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://unpkg.com/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://unpkg.com/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj =&gt; {\n    for (const i in obj) {\n      obj[i] === null &amp;&amp; delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item =&gt; item.toLowerCase().replace(/\\b[a-z]/g, s =&gt; s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})\n</code></pre><h2 id=\"j7hhZ\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">【代理后的2 成果】</span></h2><pre data-language=\"javascript\" id=\"m0bVB\" class=\"ne-codeblock language-javascript\"><code>/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () =&gt; {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://jsdelivr.pai233.top/npm/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://jsdelivr.pai233.top/npm/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://jsdelivr.pai233.top/npm/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://jsdelivr.pai233.top/npm/blueimp-md5/js/md5.min.js',\n    valine: 'https://jsdelivr.pai233.top/npm/valine/dist/Valine.min.js',\n    disqusjs: 'https://jsdelivr.pai233.top/npm/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://jsdelivr.pai233.top/npm/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://jsdelivr.pai233.top/npm/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://jsdelivr.pai233.top/npm/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://jsdelivr.pai233.top/npm/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://jsdelivr.pai233.top/npm/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://jsdelivr.pai233.top/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://jsdelivr.pai233.top/npm/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://jsdelivr.pai233.top/npm/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://jsdelivr.pai233.top/npm/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://jsdelivr.pai233.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://jsdelivr.pai233.top/npm/instant.page/instantpage.min.js',\n    typed: 'https://jsdelivr.pai233.top/npm/typed.js/lib/typed.min.js',\n    pangu: 'https://jsdelivr.pai233.top/npm/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://jsdelivr.pai233.top/npm/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://jsdelivr.pai233.top/npm/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://jsdelivr.pai233.top/npm/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://jsdelivr.pai233.top/npm/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://jsdelivr.pai233.top/npm/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://jsdelivr.pai233.top/npm/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://jsdelivr.pai233.top/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://jsdelivr.pai233.top/npm/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://jsdelivr.pai233.top/npm/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://jsdelivr.pai233.top/npm/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://jsdelivr.pai233.top/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://jsdelivr.pai233.top/npm/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://jsdelivr.pai233.top/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://jsdelivr.pai233.top/npm/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj =&gt; {\n    for (const i in obj) {\n      obj[i] === null &amp;&amp; delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item =&gt; item.toLowerCase().replace(/\\b[a-z]/g, s =&gt; s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})</code></pre><p id=\"u864e6c01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">替换完后，运行</span></p><p id=\"ud38869b2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">hexo cl &amp;&amp; hexo g -d</span></p><p id=\"u76620f2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">部署后，就成功切换到了你的反代源上。你也可以直接复制博主的成果进行使用~</span></p></div>",
    "body": "tags: [cdn,jsDeliver,butterfly]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<br />最新版的Butterfly取消了原来设置在_config.yml里的默认CDN，导致不能快速替换掉现在极不稳定的jsDelivr CDN。本文的默认Butterfly版本为4.1.0。\n<a name=\"t5oWZ\"></a>\n# 配置\n现在的默认CDN地址被放在了主题的/scripts/events/config.js中：\n```javascript\n/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () => {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://cdn.jsdelivr.net/npm/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js',\n    valine: 'https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js',\n    disqusjs: 'https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js',\n    typed: 'https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js',\n    pangu: 'https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://cdn.jsdelivr.net/npm/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj => {\n    for (const i in obj) {\n      obj[i] === null && delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item => item.toLowerCase().replace(/\\b[a-z]/g, s => s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})\n```\n所以只要快速替换掉这里的CDN，就可以切换到我们自建的CDN上。\n<a name=\"cDbCq\"></a>\n# 成果\n将cdn.jsdelivr.net全部替换为自己的反代源后，成果就诞生了：<br />**（以下2种任选一种即可）**\n<a name=\"stGN1\"></a>\n## 【代理后的1 成果】\n```javascript\n/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () => {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://unpkg.com/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://unpkg.com/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://unpkg.com/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://unpkg.com/blueimp-md5/js/md5.min.js',\n    valine: 'https://unpkg.com/valine/dist/Valine.min.js',\n    disqusjs: 'https://unpkg.com/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://unpkg.com/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://unpkg.com/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://unpkg.com/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://unpkg.com/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://unpkg.com/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://unpkg.com/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://unpkg.com/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://unpkg.com/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://unpkg.com/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://unpkg.com/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://unpkg.com/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://jsdelivr.pai233.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://jsdelivr.pai233.top/npm/instant.page/instantpage.min.js',\n    typed: 'https://unpkg.com/typed.js/lib/typed.min.js',\n    pangu: 'https://unpkg.com/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://unpkg.com/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://unpkg.com/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://unpkg.com/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://unpkg.com/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://unpkg.com/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://unpkg.com/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://unpkg.com/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://unpkg.com/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://unpkg.com/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://unpkg.com/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://unpkg.com/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://unpkg.com/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://unpkg.com/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://unpkg.com/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://unpkg.com/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://unpkg.com/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://unpkg.com/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj => {\n    for (const i in obj) {\n      obj[i] === null && delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item => item.toLowerCase().replace(/\\b[a-z]/g, s => s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})\n\n```\n<a name=\"j7hhZ\"></a>\n## 【代理后的2 成果】\n```javascript\n/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () => {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://jsdelivr.pai233.top/npm/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://jsdelivr.pai233.top/npm/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://jsdelivr.pai233.top/npm/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://jsdelivr.pai233.top/npm/blueimp-md5/js/md5.min.js',\n    valine: 'https://jsdelivr.pai233.top/npm/valine/dist/Valine.min.js',\n    disqusjs: 'https://jsdelivr.pai233.top/npm/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://jsdelivr.pai233.top/npm/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://jsdelivr.pai233.top/npm/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://jsdelivr.pai233.top/npm/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://jsdelivr.pai233.top/npm/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://jsdelivr.pai233.top/npm/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://jsdelivr.pai233.top/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://jsdelivr.pai233.top/npm/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://jsdelivr.pai233.top/npm/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://jsdelivr.pai233.top/npm/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://jsdelivr.pai233.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://jsdelivr.pai233.top/npm/instant.page/instantpage.min.js',\n    typed: 'https://jsdelivr.pai233.top/npm/typed.js/lib/typed.min.js',\n    pangu: 'https://jsdelivr.pai233.top/npm/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://jsdelivr.pai233.top/npm/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://jsdelivr.pai233.top/npm/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://jsdelivr.pai233.top/npm/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://jsdelivr.pai233.top/npm/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://jsdelivr.pai233.top/npm/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://jsdelivr.pai233.top/npm/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://jsdelivr.pai233.top/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://jsdelivr.pai233.top/npm/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://jsdelivr.pai233.top/npm/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://jsdelivr.pai233.top/npm/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://jsdelivr.pai233.top/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://jsdelivr.pai233.top/npm/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://jsdelivr.pai233.top/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://jsdelivr.pai233.top/npm/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj => {\n    for (const i in obj) {\n      obj[i] === null && delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item => item.toLowerCase().replace(/\\b[a-z]/g, s => s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})\n```\n替换完后，运行<br />hexo cl && hexo g -d<br />部署后，就成功切换到了你的反代源上。你也可以直接复制博主的成果进行使用~\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [cdn,jsDeliver,butterfly]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br />最新版的Butterfly取消了原来设置在</span><span class=\"ne-text\" style=\"background-color: rgb(243, 245, 249); color: rgb(10, 191, 91); font-size: 14px\">_config.yml</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">里的默认CDN，导致不能快速替换掉现在极不稳定的jsDelivr CDN。本文的默认Butterfly版本为</span><span class=\"ne-text\" style=\"background-color: rgb(243, 245, 249); color: rgb(10, 191, 91); font-size: 14px\">4.1.0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">。</span></p><h1 id=\"t5oWZ\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">配置</span></h1><p id=\"u93a1bdef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">现在的默认CDN地址被放在了主题的</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); font-size: 14px; background-color: rgb(243, 245, 249)\">/scripts/events/config.js</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">中：</span></p><pre data-language=\"javascript\" id=\"NFeOB\" class=\"ne-codeblock language-javascript\">/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () =&gt; {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://cdn.jsdelivr.net/npm/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js',\n    valine: 'https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js',\n    disqusjs: 'https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js',\n    typed: 'https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js',\n    pangu: 'https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://cdn.jsdelivr.net/npm/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj =&gt; {\n    for (const i in obj) {\n      obj[i] === null &amp;&amp; delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item =&gt; item.toLowerCase().replace(/\\b[a-z]/g, s =&gt; s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})</pre><p id=\"udb435e96\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">所以只要快速替换掉这里的CDN，就可以切换到我们自建的CDN上。</span></p><h1 id=\"cDbCq\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">成果</span></h1><p id=\"u14e45b84\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">将</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); font-size: 14px; background-color: rgb(243, 245, 249)\">cdn.jsdelivr.net</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">全部替换为自己的反代源后，成果就诞生了：</span></p><p id=\"uc6072793\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: #F759AB; font-size: 16px\">（以下2种任选一种即可）</span></strong></p><h2 id=\"stGN1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">【代理后的1 成果】</span></h2><pre data-language=\"javascript\" id=\"VaHVp\" class=\"ne-codeblock language-javascript\">/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () =&gt; {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://unpkg.com/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://unpkg.com/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://unpkg.com/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://unpkg.com/blueimp-md5/js/md5.min.js',\n    valine: 'https://unpkg.com/valine/dist/Valine.min.js',\n    disqusjs: 'https://unpkg.com/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://unpkg.com/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://unpkg.com/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://unpkg.com/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://unpkg.com/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://unpkg.com/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://unpkg.com/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://unpkg.com/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://unpkg.com/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://unpkg.com/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://unpkg.com/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://unpkg.com/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://unpkg.com/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://jsdelivr.pai233.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://jsdelivr.pai233.top/npm/instant.page/instantpage.min.js',\n    typed: 'https://unpkg.com/typed.js/lib/typed.min.js',\n    pangu: 'https://unpkg.com/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://unpkg.com/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://unpkg.com/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://unpkg.com/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://unpkg.com/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://unpkg.com/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://unpkg.com/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://unpkg.com/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://unpkg.com/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://unpkg.com/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://unpkg.com/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://unpkg.com/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://unpkg.com/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://unpkg.com/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://unpkg.com/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://unpkg.com/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://unpkg.com/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://unpkg.com/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj =&gt; {\n    for (const i in obj) {\n      obj[i] === null &amp;&amp; delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item =&gt; item.toLowerCase().replace(/\\b[a-z]/g, s =&gt; s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})\n</pre><h2 id=\"j7hhZ\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">【代理后的2 成果】</span></h2><pre data-language=\"javascript\" id=\"m0bVB\" class=\"ne-codeblock language-javascript\">/**\n * Butterfly\n * 1. Merge CDN\n * 2. Capitalize the first letter of comment name\n */\n\n'use strict'\n\nhexo.extend.filter.register('before_generate', () =&gt; {\n  const themeConfig = hexo.theme.config\n\n  /**\n   * Merge CDN\n   */\n\n  const defaultCDN = {\n    main_css: '/css/index.css',\n    main: '/js/main.js',\n    utils: '/js/utils.js',\n\n    // pjax\n    pjax: 'https://jsdelivr.pai233.top/npm/pjax/pjax.min.js',\n\n    // comments\n    gitalk: 'https://jsdelivr.pai233.top/npm/gitalk@latest/dist/gitalk.min.js',\n    gitalk_css: 'https://jsdelivr.pai233.top/npm/gitalk/dist/gitalk.min.css',\n    blueimp_md5: 'https://jsdelivr.pai233.top/npm/blueimp-md5/js/md5.min.js',\n    valine: 'https://jsdelivr.pai233.top/npm/valine/dist/Valine.min.js',\n    disqusjs: 'https://jsdelivr.pai233.top/npm/disqusjs@1/dist/disqus.js',\n    disqusjs_css: 'https://jsdelivr.pai233.top/npm/disqusjs@1/dist/disqusjs.css',\n    utterances: 'https://utteranc.es/client.js',\n    twikoo: 'https://jsdelivr.pai233.top/npm/twikoo/dist/twikoo.all.min.js',\n    waline: 'https://jsdelivr.pai233.top/npm/@waline/client/dist/Waline.min.js',\n    giscus: 'https://giscus.app/client.js',\n\n    // share\n    addtoany: 'https://static.addtoany.com/menu/page.js',\n    sharejs: 'https://jsdelivr.pai233.top/npm/social-share.js/dist/js/social-share.min.js',\n    sharejs_css: 'https://jsdelivr.pai233.top/npm/social-share.js/dist/css/share.min.css',\n\n    // search\n    local_search: '/js/search/local-search.js',\n    algolia_js: '/js/search/algolia.js',\n    algolia_search_v4: 'https://jsdelivr.pai233.top/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js',\n    instantsearch_v4: 'https://jsdelivr.pai233.top/npm/instantsearch.js@4/dist/instantsearch.production.min.js',\n\n    // math\n    mathjax: 'https://jsdelivr.pai233.top/npm/mathjax@3/es5/tex-mml-chtml.js',\n    katex: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/katex.min.css',\n    katex_copytex: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/contrib/copy-tex.min.js',\n    katex_copytex_css: 'https://jsdelivr.pai233.top/npm/katex@latest/dist/contrib/copy-tex.css',\n    mermaid: 'https://jsdelivr.pai233.top/npm/mermaid/dist/mermaid.min.js',\n\n    // count\n    busuanzi: '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js',\n\n    // background effect\n    canvas_ribbon: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js',\n    canvas_fluttering_ribbon: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js',\n    canvas_nest: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/canvas-nest.min.js',\n\n    lazyload: 'https://jsdelivr.pai233.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js',\n    instantpage: 'https://jsdelivr.pai233.top/npm/instant.page/instantpage.min.js',\n    typed: 'https://jsdelivr.pai233.top/npm/typed.js/lib/typed.min.js',\n    pangu: 'https://jsdelivr.pai233.top/npm/pangu/dist/browser/pangu.min.js',\n\n    // photo\n    fancybox_css_v4: 'https://jsdelivr.pai233.top/npm/@fancyapps/ui/dist/fancybox.css',\n    fancybox_v4: 'https://jsdelivr.pai233.top/npm/@fancyapps/ui/dist/fancybox.umd.js',\n    medium_zoom: 'https://jsdelivr.pai233.top/npm/medium-zoom/dist/medium-zoom.min.js',\n\n    // snackbar\n    snackbar_css: 'https://jsdelivr.pai233.top/npm/node-snackbar/dist/snackbar.min.css',\n    snackbar: 'https://jsdelivr.pai233.top/npm/node-snackbar/dist/snackbar.min.js',\n\n    // effect\n    activate_power_mode: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js',\n    fireworks: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/fireworks.min.js',\n    click_heart: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/click-heart.min.js',\n    ClickShowText: 'https://jsdelivr.pai233.top/npm/butterfly-extsrc@1/dist/click-show-text.min.js',\n\n    // fontawesome\n    fontawesomeV6: 'https://jsdelivr.pai233.top/npm/@fortawesome/fontawesome-free@6/css/all.min.css',\n\n    // Conversion between Traditional and Simplified Chinese\n    translate: '/js/tw_cn.js',\n\n    // flickr-justified-gallery\n    flickr_justified_gallery_js: 'https://jsdelivr.pai233.top/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',\n    flickr_justified_gallery_css: 'https://jsdelivr.pai233.top/npm/flickr-justified-gallery@2/dist/fjGallery.min.css',\n\n    // aplayer\n    aplayer_css: 'https://jsdelivr.pai233.top/npm/aplayer/dist/APlayer.min.css',\n    aplayer_js: 'https://jsdelivr.pai233.top/npm/aplayer/dist/APlayer.min.js',\n    meting_js: 'https://jsdelivr.pai233.top/gh/metowolf/MetingJS@1.2/dist/Meting.min.js',\n\n    // Prism.js\n    prismjs_js: 'https://jsdelivr.pai233.top/npm/prismjs/prism.min.js',\n    prismjs_lineNumber_js: 'https://jsdelivr.pai233.top/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js',\n    prismjs_autoloader: 'https://jsdelivr.pai233.top/npm/prismjs/plugins/autoloader/prism-autoloader.min.js'\n  }\n\n  // delete null value\n  const deleteNullValue = obj =&gt; {\n    for (const i in obj) {\n      obj[i] === null &amp;&amp; delete obj[i]\n    }\n    return obj\n  }\n\n  themeConfig.CDN = Object.assign(defaultCDN, deleteNullValue(themeConfig.CDN))\n\n  /**\n   * Capitalize the first letter of comment name\n   */\n\n  let { use } = themeConfig.comments\n\n  if (!use) return\n\n  if (typeof use === 'string') {\n    use = use.split(',')\n  }\n\n  const newArray = use.map(item =&gt; item.toLowerCase().replace(/\\b[a-z]/g, s =&gt; s.toUpperCase()))\n\n  themeConfig.comments.use = newArray\n})</pre><p id=\"u864e6c01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">替换完后，运行</span></p><p id=\"ud38869b2\" class=\"ne-p\"><span class=\"ne-text\" style=\"background-color: rgb(243, 245, 249); color: rgb(10, 191, 91); font-size: 14px\">hexo cl &amp;&amp; hexo g -d</span></p><p id=\"u76620f2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">部署后，就成功切换到了你的反代源上。你也可以直接复制博主的成果进行使用~</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [cdn,jsDeliver,butterfly]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u7887d2a9\" id=\"u7887d2a9\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"ud5c320f8\" id=\"ud5c320f8\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br />最新版的Butterfly取消了原来设置在</span><span data-lake-id=\"u6f398a0a\" id=\"u6f398a0a\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">_config.yml</span><span data-lake-id=\"u914c746d\" id=\"u914c746d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">里的默认CDN，导致不能快速替换掉现在极不稳定的jsDelivr CDN。本文的默认Butterfly版本为</span><span data-lake-id=\"ubf2fe346\" id=\"ubf2fe346\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">4.1.0</span><span data-lake-id=\"ued31de0b\" id=\"ued31de0b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">。</span></p><h1 data-lake-id=\"t5oWZ\" id=\"t5oWZ\"><span data-lake-id=\"u9a7ed28f\" id=\"u9a7ed28f\" style=\"color: rgb(0, 0, 0)\">配置</span></h1><p data-lake-id=\"u93a1bdef\" id=\"u93a1bdef\"><span data-lake-id=\"uf84b96f7\" id=\"uf84b96f7\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">现在的默认CDN地址被放在了主题的</span><span data-lake-id=\"u4fcf7ec8\" id=\"u4fcf7ec8\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">/scripts/events/config.js</span><span data-lake-id=\"u8a073a04\" id=\"u8a073a04\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">中：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F**%5Cn%20*%20Butterfly%5Cn%20*%201.%20Merge%20CDN%5Cn%20*%202.%20Capitalize%20the%20first%20letter%20of%20comment%20name%5Cn%20*%2F%5Cn%5Cn'use%20strict'%5Cn%5Cnhexo.extend.filter.register('before_generate'%2C%20()%20%3D%3E%20%7B%5Cn%20%20const%20themeConfig%20%3D%20hexo.theme.config%5Cn%5Cn%20%20%2F**%5Cn%20%20%20*%20Merge%20CDN%5Cn%20%20%20*%2F%5Cn%5Cn%20%20const%20defaultCDN%20%3D%20%7B%5Cn%20%20%20%20main_css%3A%20'%2Fcss%2Findex.css'%2C%5Cn%20%20%20%20main%3A%20'%2Fjs%2Fmain.js'%2C%5Cn%20%20%20%20utils%3A%20'%2Fjs%2Futils.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20pjax%5Cn%20%20%20%20pjax%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fpjax%2Fpjax.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20comments%5Cn%20%20%20%20gitalk%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fgitalk%40latest%2Fdist%2Fgitalk.min.js'%2C%5Cn%20%20%20%20gitalk_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fgitalk%2Fdist%2Fgitalk.min.css'%2C%5Cn%20%20%20%20blueimp_md5%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fblueimp-md5%2Fjs%2Fmd5.min.js'%2C%5Cn%20%20%20%20valine%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fvaline%2Fdist%2FValine.min.js'%2C%5Cn%20%20%20%20disqusjs%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fdisqusjs%401%2Fdist%2Fdisqus.js'%2C%5Cn%20%20%20%20disqusjs_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fdisqusjs%401%2Fdist%2Fdisqusjs.css'%2C%5Cn%20%20%20%20utterances%3A%20'https%3A%2F%2Futteranc.es%2Fclient.js'%2C%5Cn%20%20%20%20twikoo%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Ftwikoo%2Fdist%2Ftwikoo.all.min.js'%2C%5Cn%20%20%20%20waline%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2F%40waline%2Fclient%2Fdist%2FWaline.min.js'%2C%5Cn%20%20%20%20giscus%3A%20'https%3A%2F%2Fgiscus.app%2Fclient.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20share%5Cn%20%20%20%20addtoany%3A%20'https%3A%2F%2Fstatic.addtoany.com%2Fmenu%2Fpage.js'%2C%5Cn%20%20%20%20sharejs%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fsocial-share.js%2Fdist%2Fjs%2Fsocial-share.min.js'%2C%5Cn%20%20%20%20sharejs_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fsocial-share.js%2Fdist%2Fcss%2Fshare.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20search%5Cn%20%20%20%20local_search%3A%20'%2Fjs%2Fsearch%2Flocal-search.js'%2C%5Cn%20%20%20%20algolia_js%3A%20'%2Fjs%2Fsearch%2Falgolia.js'%2C%5Cn%20%20%20%20algolia_search_v4%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Falgoliasearch%404%2Fdist%2Falgoliasearch-lite.umd.js'%2C%5Cn%20%20%20%20instantsearch_v4%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Finstantsearch.js%404%2Fdist%2Finstantsearch.production.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20math%5Cn%20%20%20%20mathjax%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fmathjax%403%2Fes5%2Ftex-mml-chtml.js'%2C%5Cn%20%20%20%20katex%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fkatex%40latest%2Fdist%2Fkatex.min.css'%2C%5Cn%20%20%20%20katex_copytex%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fkatex%40latest%2Fdist%2Fcontrib%2Fcopy-tex.min.js'%2C%5Cn%20%20%20%20katex_copytex_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fkatex%40latest%2Fdist%2Fcontrib%2Fcopy-tex.css'%2C%5Cn%20%20%20%20mermaid%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fmermaid%2Fdist%2Fmermaid.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20count%5Cn%20%20%20%20busuanzi%3A%20'%2F%2Fbusuanzi.ibruce.info%2Fbusuanzi%2F2.3%2Fbusuanzi.pure.mini.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20background%20effect%5Cn%20%20%20%20canvas_ribbon%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-ribbon.min.js'%2C%5Cn%20%20%20%20canvas_fluttering_ribbon%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-fluttering-ribbon.min.js'%2C%5Cn%20%20%20%20canvas_nest%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-nest.min.js'%2C%5Cn%5Cn%20%20%20%20lazyload%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fvanilla-lazyload%2Fdist%2Flazyload.iife.min.js'%2C%5Cn%20%20%20%20instantpage%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Finstant.page%2Finstantpage.min.js'%2C%5Cn%20%20%20%20typed%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Ftyped.js%2Flib%2Ftyped.min.js'%2C%5Cn%20%20%20%20pangu%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fpangu%2Fdist%2Fbrowser%2Fpangu.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20photo%5Cn%20%20%20%20fancybox_css_v4%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2F%40fancyapps%2Fui%2Fdist%2Ffancybox.css'%2C%5Cn%20%20%20%20fancybox_v4%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2F%40fancyapps%2Fui%2Fdist%2Ffancybox.umd.js'%2C%5Cn%20%20%20%20medium_zoom%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fmedium-zoom%2Fdist%2Fmedium-zoom.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20snackbar%5Cn%20%20%20%20snackbar_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fnode-snackbar%2Fdist%2Fsnackbar.min.css'%2C%5Cn%20%20%20%20snackbar%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fnode-snackbar%2Fdist%2Fsnackbar.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20effect%5Cn%20%20%20%20activate_power_mode%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Factivate-power-mode.min.js'%2C%5Cn%20%20%20%20fireworks%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Ffireworks.min.js'%2C%5Cn%20%20%20%20click_heart%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fclick-heart.min.js'%2C%5Cn%20%20%20%20ClickShowText%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fclick-show-text.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20fontawesome%5Cn%20%20%20%20fontawesomeV6%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2F%40fortawesome%2Ffontawesome-free%406%2Fcss%2Fall.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20Conversion%20between%20Traditional%20and%20Simplified%20Chinese%5Cn%20%20%20%20translate%3A%20'%2Fjs%2Ftw_cn.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20flickr-justified-gallery%5Cn%20%20%20%20flickr_justified_gallery_js%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fflickr-justified-gallery%402%2Fdist%2FfjGallery.min.js'%2C%5Cn%20%20%20%20flickr_justified_gallery_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fflickr-justified-gallery%402%2Fdist%2FfjGallery.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20aplayer%5Cn%20%20%20%20aplayer_css%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Faplayer%2Fdist%2FAPlayer.min.css'%2C%5Cn%20%20%20%20aplayer_js%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Faplayer%2Fdist%2FAPlayer.min.js'%2C%5Cn%20%20%20%20meting_js%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2Fmetowolf%2FMetingJS%401.2%2Fdist%2FMeting.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20Prism.js%5Cn%20%20%20%20prismjs_js%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fprismjs%2Fprism.min.js'%2C%5Cn%20%20%20%20prismjs_lineNumber_js%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fprismjs%2Fplugins%2Fline-numbers%2Fprism-line-numbers.min.js'%2C%5Cn%20%20%20%20prismjs_autoloader%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fprismjs%2Fplugins%2Fautoloader%2Fprism-autoloader.min.js'%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%20delete%20null%20value%5Cn%20%20const%20deleteNullValue%20%3D%20obj%20%3D%3E%20%7B%5Cn%20%20%20%20for%20(const%20i%20in%20obj)%20%7B%5Cn%20%20%20%20%20%20obj%5Bi%5D%20%3D%3D%3D%20null%20%26%26%20delete%20obj%5Bi%5D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20obj%5Cn%20%20%7D%5Cn%5Cn%20%20themeConfig.CDN%20%3D%20Object.assign(defaultCDN%2C%20deleteNullValue(themeConfig.CDN))%5Cn%5Cn%20%20%2F**%5Cn%20%20%20*%20Capitalize%20the%20first%20letter%20of%20comment%20name%5Cn%20%20%20*%2F%5Cn%5Cn%20%20let%20%7B%20use%20%7D%20%3D%20themeConfig.comments%5Cn%5Cn%20%20if%20(!use)%20return%5Cn%5Cn%20%20if%20(typeof%20use%20%3D%3D%3D%20'string')%20%7B%5Cn%20%20%20%20use%20%3D%20use.split('%2C')%5Cn%20%20%7D%5Cn%5Cn%20%20const%20newArray%20%3D%20use.map(item%20%3D%3E%20item.toLowerCase().replace(%2F%5C%5Cb%5Ba-z%5D%2Fg%2C%20s%20%3D%3E%20s.toUpperCase()))%5Cn%5Cn%20%20themeConfig.comments.use%20%3D%20newArray%5Cn%7D)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22NFeOB%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"udb435e96\" id=\"udb435e96\"><span data-lake-id=\"u84be96cf\" id=\"u84be96cf\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">所以只要快速替换掉这里的CDN，就可以切换到我们自建的CDN上。</span></p><h1 data-lake-id=\"cDbCq\" id=\"cDbCq\"><span data-lake-id=\"ud8d39dc9\" id=\"ud8d39dc9\" style=\"color: rgb(0, 0, 0)\">成果</span></h1><p data-lake-id=\"u14e45b84\" id=\"u14e45b84\"><span data-lake-id=\"ub066f0db\" id=\"ub066f0db\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">将</span><span data-lake-id=\"ua6ef5277\" id=\"ua6ef5277\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">cdn.jsdelivr.net</span><span data-lake-id=\"u3746927d\" id=\"u3746927d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">全部替换为自己的反代源后，成果就诞生了：</span></p><p data-lake-id=\"uc6072793\" id=\"uc6072793\"><strong><span data-lake-id=\"u6d81f6a8\" id=\"u6d81f6a8\" class=\"lake-fontsize-12\" style=\"color: #F759AB\">（以下2种任选一种即可）</span></strong></p><h2 data-lake-id=\"stGN1\" id=\"stGN1\"><span data-lake-id=\"u2dd58ef2\" id=\"u2dd58ef2\" style=\"color: rgb(51, 51, 51)\">【代理后的1 成果】</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F**%5Cn%20*%20Butterfly%5Cn%20*%201.%20Merge%20CDN%5Cn%20*%202.%20Capitalize%20the%20first%20letter%20of%20comment%20name%5Cn%20*%2F%5Cn%5Cn'use%20strict'%5Cn%5Cnhexo.extend.filter.register('before_generate'%2C%20()%20%3D%3E%20%7B%5Cn%20%20const%20themeConfig%20%3D%20hexo.theme.config%5Cn%5Cn%20%20%2F**%5Cn%20%20%20*%20Merge%20CDN%5Cn%20%20%20*%2F%5Cn%5Cn%20%20const%20defaultCDN%20%3D%20%7B%5Cn%20%20%20%20main_css%3A%20'%2Fcss%2Findex.css'%2C%5Cn%20%20%20%20main%3A%20'%2Fjs%2Fmain.js'%2C%5Cn%20%20%20%20utils%3A%20'%2Fjs%2Futils.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20pjax%5Cn%20%20%20%20pjax%3A%20'https%3A%2F%2Funpkg.com%2Fpjax%2Fpjax.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20comments%5Cn%20%20%20%20gitalk%3A%20'https%3A%2F%2Funpkg.com%2Fgitalk%40latest%2Fdist%2Fgitalk.min.js'%2C%5Cn%20%20%20%20gitalk_css%3A%20'https%3A%2F%2Funpkg.com%2Fgitalk%2Fdist%2Fgitalk.min.css'%2C%5Cn%20%20%20%20blueimp_md5%3A%20'https%3A%2F%2Funpkg.com%2Fblueimp-md5%2Fjs%2Fmd5.min.js'%2C%5Cn%20%20%20%20valine%3A%20'https%3A%2F%2Funpkg.com%2Fvaline%2Fdist%2FValine.min.js'%2C%5Cn%20%20%20%20disqusjs%3A%20'https%3A%2F%2Funpkg.com%2Fdisqusjs%401%2Fdist%2Fdisqus.js'%2C%5Cn%20%20%20%20disqusjs_css%3A%20'https%3A%2F%2Funpkg.com%2Fdisqusjs%401%2Fdist%2Fdisqusjs.css'%2C%5Cn%20%20%20%20utterances%3A%20'https%3A%2F%2Futteranc.es%2Fclient.js'%2C%5Cn%20%20%20%20twikoo%3A%20'https%3A%2F%2Funpkg.com%2Ftwikoo%2Fdist%2Ftwikoo.all.min.js'%2C%5Cn%20%20%20%20waline%3A%20'https%3A%2F%2Funpkg.com%2F%40waline%2Fclient%2Fdist%2FWaline.min.js'%2C%5Cn%20%20%20%20giscus%3A%20'https%3A%2F%2Fgiscus.app%2Fclient.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20share%5Cn%20%20%20%20addtoany%3A%20'https%3A%2F%2Fstatic.addtoany.com%2Fmenu%2Fpage.js'%2C%5Cn%20%20%20%20sharejs%3A%20'https%3A%2F%2Funpkg.com%2Fsocial-share.js%2Fdist%2Fjs%2Fsocial-share.min.js'%2C%5Cn%20%20%20%20sharejs_css%3A%20'https%3A%2F%2Funpkg.com%2Fsocial-share.js%2Fdist%2Fcss%2Fshare.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20search%5Cn%20%20%20%20local_search%3A%20'%2Fjs%2Fsearch%2Flocal-search.js'%2C%5Cn%20%20%20%20algolia_js%3A%20'%2Fjs%2Fsearch%2Falgolia.js'%2C%5Cn%20%20%20%20algolia_search_v4%3A%20'https%3A%2F%2Funpkg.com%2Falgoliasearch%404%2Fdist%2Falgoliasearch-lite.umd.js'%2C%5Cn%20%20%20%20instantsearch_v4%3A%20'https%3A%2F%2Funpkg.com%2Finstantsearch.js%404%2Fdist%2Finstantsearch.production.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20math%5Cn%20%20%20%20mathjax%3A%20'https%3A%2F%2Funpkg.com%2Fmathjax%403%2Fes5%2Ftex-mml-chtml.js'%2C%5Cn%20%20%20%20katex%3A%20'https%3A%2F%2Funpkg.com%2Fkatex%40latest%2Fdist%2Fkatex.min.css'%2C%5Cn%20%20%20%20katex_copytex%3A%20'https%3A%2F%2Funpkg.com%2Fkatex%40latest%2Fdist%2Fcontrib%2Fcopy-tex.min.js'%2C%5Cn%20%20%20%20katex_copytex_css%3A%20'https%3A%2F%2Funpkg.com%2Fkatex%40latest%2Fdist%2Fcontrib%2Fcopy-tex.css'%2C%5Cn%20%20%20%20mermaid%3A%20'https%3A%2F%2Funpkg.com%2Fmermaid%2Fdist%2Fmermaid.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20count%5Cn%20%20%20%20busuanzi%3A%20'%2F%2Fbusuanzi.ibruce.info%2Fbusuanzi%2F2.3%2Fbusuanzi.pure.mini.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20background%20effect%5Cn%20%20%20%20canvas_ribbon%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-ribbon.min.js'%2C%5Cn%20%20%20%20canvas_fluttering_ribbon%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-fluttering-ribbon.min.js'%2C%5Cn%20%20%20%20canvas_nest%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-nest.min.js'%2C%5Cn%5Cn%20%20%20%20lazyload%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fvanilla-lazyload%2Fdist%2Flazyload.iife.min.js'%2C%5Cn%20%20%20%20instantpage%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Finstant.page%2Finstantpage.min.js'%2C%5Cn%20%20%20%20typed%3A%20'https%3A%2F%2Funpkg.com%2Ftyped.js%2Flib%2Ftyped.min.js'%2C%5Cn%20%20%20%20pangu%3A%20'https%3A%2F%2Funpkg.com%2Fpangu%2Fdist%2Fbrowser%2Fpangu.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20photo%5Cn%20%20%20%20fancybox_css_v4%3A%20'https%3A%2F%2Funpkg.com%2F%40fancyapps%2Fui%2Fdist%2Ffancybox.css'%2C%5Cn%20%20%20%20fancybox_v4%3A%20'https%3A%2F%2Funpkg.com%2F%40fancyapps%2Fui%2Fdist%2Ffancybox.umd.js'%2C%5Cn%20%20%20%20medium_zoom%3A%20'https%3A%2F%2Funpkg.com%2Fmedium-zoom%2Fdist%2Fmedium-zoom.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20snackbar%5Cn%20%20%20%20snackbar_css%3A%20'https%3A%2F%2Funpkg.com%2Fnode-snackbar%2Fdist%2Fsnackbar.min.css'%2C%5Cn%20%20%20%20snackbar%3A%20'https%3A%2F%2Funpkg.com%2Fnode-snackbar%2Fdist%2Fsnackbar.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20effect%5Cn%20%20%20%20activate_power_mode%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Factivate-power-mode.min.js'%2C%5Cn%20%20%20%20fireworks%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Ffireworks.min.js'%2C%5Cn%20%20%20%20click_heart%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Fclick-heart.min.js'%2C%5Cn%20%20%20%20ClickShowText%3A%20'https%3A%2F%2Funpkg.com%2Fbutterfly-extsrc%401%2Fdist%2Fclick-show-text.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20fontawesome%5Cn%20%20%20%20fontawesomeV6%3A%20'https%3A%2F%2Funpkg.com%2F%40fortawesome%2Ffontawesome-free%406%2Fcss%2Fall.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20Conversion%20between%20Traditional%20and%20Simplified%20Chinese%5Cn%20%20%20%20translate%3A%20'%2Fjs%2Ftw_cn.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20flickr-justified-gallery%5Cn%20%20%20%20flickr_justified_gallery_js%3A%20'https%3A%2F%2Funpkg.com%2Fflickr-justified-gallery%402%2Fdist%2FfjGallery.min.js'%2C%5Cn%20%20%20%20flickr_justified_gallery_css%3A%20'https%3A%2F%2Funpkg.com%2Fflickr-justified-gallery%402%2Fdist%2FfjGallery.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20aplayer%5Cn%20%20%20%20aplayer_css%3A%20'https%3A%2F%2Funpkg.com%2Faplayer%2Fdist%2FAPlayer.min.css'%2C%5Cn%20%20%20%20aplayer_js%3A%20'https%3A%2F%2Funpkg.com%2Faplayer%2Fdist%2FAPlayer.min.js'%2C%5Cn%20%20%20%20meting_js%3A%20'https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2Fmetowolf%2FMetingJS%401.2%2Fdist%2FMeting.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20Prism.js%5Cn%20%20%20%20prismjs_js%3A%20'https%3A%2F%2Funpkg.com%2Fprismjs%2Fprism.min.js'%2C%5Cn%20%20%20%20prismjs_lineNumber_js%3A%20'https%3A%2F%2Funpkg.com%2Fprismjs%2Fplugins%2Fline-numbers%2Fprism-line-numbers.min.js'%2C%5Cn%20%20%20%20prismjs_autoloader%3A%20'https%3A%2F%2Funpkg.com%2Fprismjs%2Fplugins%2Fautoloader%2Fprism-autoloader.min.js'%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%20delete%20null%20value%5Cn%20%20const%20deleteNullValue%20%3D%20obj%20%3D%3E%20%7B%5Cn%20%20%20%20for%20(const%20i%20in%20obj)%20%7B%5Cn%20%20%20%20%20%20obj%5Bi%5D%20%3D%3D%3D%20null%20%26%26%20delete%20obj%5Bi%5D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20obj%5Cn%20%20%7D%5Cn%5Cn%20%20themeConfig.CDN%20%3D%20Object.assign(defaultCDN%2C%20deleteNullValue(themeConfig.CDN))%5Cn%5Cn%20%20%2F**%5Cn%20%20%20*%20Capitalize%20the%20first%20letter%20of%20comment%20name%5Cn%20%20%20*%2F%5Cn%5Cn%20%20let%20%7B%20use%20%7D%20%3D%20themeConfig.comments%5Cn%5Cn%20%20if%20(!use)%20return%5Cn%5Cn%20%20if%20(typeof%20use%20%3D%3D%3D%20'string')%20%7B%5Cn%20%20%20%20use%20%3D%20use.split('%2C')%5Cn%20%20%7D%5Cn%5Cn%20%20const%20newArray%20%3D%20use.map(item%20%3D%3E%20item.toLowerCase().replace(%2F%5C%5Cb%5Ba-z%5D%2Fg%2C%20s%20%3D%3E%20s.toUpperCase()))%5Cn%5Cn%20%20themeConfig.comments.use%20%3D%20newArray%5Cn%7D)%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VaHVp%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"j7hhZ\" id=\"j7hhZ\"><span data-lake-id=\"ue54f41a7\" id=\"ue54f41a7\" style=\"color: rgb(51, 51, 51)\">【代理后的2 成果】</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22%2F**%5Cn%20*%20Butterfly%5Cn%20*%201.%20Merge%20CDN%5Cn%20*%202.%20Capitalize%20the%20first%20letter%20of%20comment%20name%5Cn%20*%2F%5Cn%5Cn'use%20strict'%5Cn%5Cnhexo.extend.filter.register('before_generate'%2C%20()%20%3D%3E%20%7B%5Cn%20%20const%20themeConfig%20%3D%20hexo.theme.config%5Cn%5Cn%20%20%2F**%5Cn%20%20%20*%20Merge%20CDN%5Cn%20%20%20*%2F%5Cn%5Cn%20%20const%20defaultCDN%20%3D%20%7B%5Cn%20%20%20%20main_css%3A%20'%2Fcss%2Findex.css'%2C%5Cn%20%20%20%20main%3A%20'%2Fjs%2Fmain.js'%2C%5Cn%20%20%20%20utils%3A%20'%2Fjs%2Futils.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20pjax%5Cn%20%20%20%20pjax%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fpjax%2Fpjax.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20comments%5Cn%20%20%20%20gitalk%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fgitalk%40latest%2Fdist%2Fgitalk.min.js'%2C%5Cn%20%20%20%20gitalk_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fgitalk%2Fdist%2Fgitalk.min.css'%2C%5Cn%20%20%20%20blueimp_md5%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fblueimp-md5%2Fjs%2Fmd5.min.js'%2C%5Cn%20%20%20%20valine%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fvaline%2Fdist%2FValine.min.js'%2C%5Cn%20%20%20%20disqusjs%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fdisqusjs%401%2Fdist%2Fdisqus.js'%2C%5Cn%20%20%20%20disqusjs_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fdisqusjs%401%2Fdist%2Fdisqusjs.css'%2C%5Cn%20%20%20%20utterances%3A%20'https%3A%2F%2Futteranc.es%2Fclient.js'%2C%5Cn%20%20%20%20twikoo%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Ftwikoo%2Fdist%2Ftwikoo.all.min.js'%2C%5Cn%20%20%20%20waline%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2F%40waline%2Fclient%2Fdist%2FWaline.min.js'%2C%5Cn%20%20%20%20giscus%3A%20'https%3A%2F%2Fgiscus.app%2Fclient.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20share%5Cn%20%20%20%20addtoany%3A%20'https%3A%2F%2Fstatic.addtoany.com%2Fmenu%2Fpage.js'%2C%5Cn%20%20%20%20sharejs%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fsocial-share.js%2Fdist%2Fjs%2Fsocial-share.min.js'%2C%5Cn%20%20%20%20sharejs_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fsocial-share.js%2Fdist%2Fcss%2Fshare.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20search%5Cn%20%20%20%20local_search%3A%20'%2Fjs%2Fsearch%2Flocal-search.js'%2C%5Cn%20%20%20%20algolia_js%3A%20'%2Fjs%2Fsearch%2Falgolia.js'%2C%5Cn%20%20%20%20algolia_search_v4%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Falgoliasearch%404%2Fdist%2Falgoliasearch-lite.umd.js'%2C%5Cn%20%20%20%20instantsearch_v4%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Finstantsearch.js%404%2Fdist%2Finstantsearch.production.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20math%5Cn%20%20%20%20mathjax%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fmathjax%403%2Fes5%2Ftex-mml-chtml.js'%2C%5Cn%20%20%20%20katex%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fkatex%40latest%2Fdist%2Fkatex.min.css'%2C%5Cn%20%20%20%20katex_copytex%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fkatex%40latest%2Fdist%2Fcontrib%2Fcopy-tex.min.js'%2C%5Cn%20%20%20%20katex_copytex_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fkatex%40latest%2Fdist%2Fcontrib%2Fcopy-tex.css'%2C%5Cn%20%20%20%20mermaid%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fmermaid%2Fdist%2Fmermaid.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20count%5Cn%20%20%20%20busuanzi%3A%20'%2F%2Fbusuanzi.ibruce.info%2Fbusuanzi%2F2.3%2Fbusuanzi.pure.mini.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20background%20effect%5Cn%20%20%20%20canvas_ribbon%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-ribbon.min.js'%2C%5Cn%20%20%20%20canvas_fluttering_ribbon%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-fluttering-ribbon.min.js'%2C%5Cn%20%20%20%20canvas_nest%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fcanvas-nest.min.js'%2C%5Cn%5Cn%20%20%20%20lazyload%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fvanilla-lazyload%2Fdist%2Flazyload.iife.min.js'%2C%5Cn%20%20%20%20instantpage%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Finstant.page%2Finstantpage.min.js'%2C%5Cn%20%20%20%20typed%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Ftyped.js%2Flib%2Ftyped.min.js'%2C%5Cn%20%20%20%20pangu%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fpangu%2Fdist%2Fbrowser%2Fpangu.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20photo%5Cn%20%20%20%20fancybox_css_v4%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2F%40fancyapps%2Fui%2Fdist%2Ffancybox.css'%2C%5Cn%20%20%20%20fancybox_v4%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2F%40fancyapps%2Fui%2Fdist%2Ffancybox.umd.js'%2C%5Cn%20%20%20%20medium_zoom%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fmedium-zoom%2Fdist%2Fmedium-zoom.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20snackbar%5Cn%20%20%20%20snackbar_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fnode-snackbar%2Fdist%2Fsnackbar.min.css'%2C%5Cn%20%20%20%20snackbar%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fnode-snackbar%2Fdist%2Fsnackbar.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20effect%5Cn%20%20%20%20activate_power_mode%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Factivate-power-mode.min.js'%2C%5Cn%20%20%20%20fireworks%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Ffireworks.min.js'%2C%5Cn%20%20%20%20click_heart%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fclick-heart.min.js'%2C%5Cn%20%20%20%20ClickShowText%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fbutterfly-extsrc%401%2Fdist%2Fclick-show-text.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20fontawesome%5Cn%20%20%20%20fontawesomeV6%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2F%40fortawesome%2Ffontawesome-free%406%2Fcss%2Fall.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20Conversion%20between%20Traditional%20and%20Simplified%20Chinese%5Cn%20%20%20%20translate%3A%20'%2Fjs%2Ftw_cn.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20flickr-justified-gallery%5Cn%20%20%20%20flickr_justified_gallery_js%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fflickr-justified-gallery%402%2Fdist%2FfjGallery.min.js'%2C%5Cn%20%20%20%20flickr_justified_gallery_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fflickr-justified-gallery%402%2Fdist%2FfjGallery.min.css'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20aplayer%5Cn%20%20%20%20aplayer_css%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Faplayer%2Fdist%2FAPlayer.min.css'%2C%5Cn%20%20%20%20aplayer_js%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Faplayer%2Fdist%2FAPlayer.min.js'%2C%5Cn%20%20%20%20meting_js%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fgh%2Fmetowolf%2FMetingJS%401.2%2Fdist%2FMeting.min.js'%2C%5Cn%5Cn%20%20%20%20%2F%2F%20Prism.js%5Cn%20%20%20%20prismjs_js%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fprismjs%2Fprism.min.js'%2C%5Cn%20%20%20%20prismjs_lineNumber_js%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fprismjs%2Fplugins%2Fline-numbers%2Fprism-line-numbers.min.js'%2C%5Cn%20%20%20%20prismjs_autoloader%3A%20'https%3A%2F%2Fjsdelivr.pai233.top%2Fnpm%2Fprismjs%2Fplugins%2Fautoloader%2Fprism-autoloader.min.js'%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%20delete%20null%20value%5Cn%20%20const%20deleteNullValue%20%3D%20obj%20%3D%3E%20%7B%5Cn%20%20%20%20for%20(const%20i%20in%20obj)%20%7B%5Cn%20%20%20%20%20%20obj%5Bi%5D%20%3D%3D%3D%20null%20%26%26%20delete%20obj%5Bi%5D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20obj%5Cn%20%20%7D%5Cn%5Cn%20%20themeConfig.CDN%20%3D%20Object.assign(defaultCDN%2C%20deleteNullValue(themeConfig.CDN))%5Cn%5Cn%20%20%2F**%5Cn%20%20%20*%20Capitalize%20the%20first%20letter%20of%20comment%20name%5Cn%20%20%20*%2F%5Cn%5Cn%20%20let%20%7B%20use%20%7D%20%3D%20themeConfig.comments%5Cn%5Cn%20%20if%20(!use)%20return%5Cn%5Cn%20%20if%20(typeof%20use%20%3D%3D%3D%20'string')%20%7B%5Cn%20%20%20%20use%20%3D%20use.split('%2C')%5Cn%20%20%7D%5Cn%5Cn%20%20const%20newArray%20%3D%20use.map(item%20%3D%3E%20item.toLowerCase().replace(%2F%5C%5Cb%5Ba-z%5D%2Fg%2C%20s%20%3D%3E%20s.toUpperCase()))%5Cn%5Cn%20%20themeConfig.comments.use%20%3D%20newArray%5Cn%7D)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22m0bVB%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u864e6c01\" id=\"u864e6c01\"><span data-lake-id=\"u30612c6e\" id=\"u30612c6e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">替换完后，运行</span></p><p data-lake-id=\"ud38869b2\" id=\"ud38869b2\"><span data-lake-id=\"u30fecd29\" id=\"u30fecd29\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">hexo cl &amp;&amp; hexo g -d</span></p><p data-lake-id=\"u76620f2c\" id=\"u76620f2c\"><span data-lake-id=\"u6de7711d\" id=\"u6de7711d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">部署后，就成功切换到了你的反代源上。你也可以直接复制博主的成果进行使用~</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 966,
    "created_at": "2022-06-01T07:22:01.000Z",
    "updated_at": "2023-07-27T02:06:40.000Z",
    "content_updated_at": "2023-07-27T02:06:40.000Z",
    "published_at": "2022-06-01T07:28:59.000Z",
    "first_published_at": "2022-06-01T07:27:41.106Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1024911658,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 79225748,
    "type": "Doc",
    "slug": "tyruxy",
    "title": "数据库索引都有哪些，有哪些优缺点",
    "description": "tags: [mysql,索引]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:索引类型索引的类型有以下几种：普通索引唯一索引主键索引...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql,索引]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\">copyright_url: <br /></span><span class=\"ne-text\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"gruRV\"><span class=\"ne-text\">索引类型</span></h1><p id=\"udff72e20\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">索引的类型有以下几种：</span></p><ul class=\"ne-ul\"><li id=\"uf97f0db7\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\">普通索引</span></strong></li><li id=\"u39202b02\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\">唯一索引</span></strong></li><li id=\"u7adf53f4\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\">主键索引</span></strong></li><li id=\"ude2a61df\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\">聚集索引</span></strong></li><li id=\"u6b9ecbfc\" data-lake-index-type=\"0\"><strong><span class=\"ne-text\">全文索引</span></strong></li></ul><p id=\"udd7533aa\" class=\"ne-p\"><strong><span class=\"ne-text\">普通索引</span></strong><span class=\"ne-text\">：最基本的索引，没有任何约束限制</span></p><p id=\"u3e226ed9\" class=\"ne-p\"><strong><span class=\"ne-text\">唯一索引</span></strong><span class=\"ne-text\">：和普通索引差不多，但有唯一约束性，允许有null</span></p><p id=\"uf464ca22\" class=\"ne-p\"><strong><span class=\"ne-text\">主键索引</span></strong><span class=\"ne-text\">：特殊的唯一约束索引，不允许有null，一张表最多只有一个主键索引</span></p><p id=\"u696b5240\" class=\"ne-p\"><strong><span class=\"ne-text\">聚集索引</span></strong><span class=\"ne-text\">：表中行的物理排序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。</span></p><p id=\"u4841ab44\" class=\"ne-p\"><strong><span class=\"ne-text\">全文索引</span></strong><span class=\"ne-text\">：搜索数据表中的字段是不是包含我们搜索的字符串，就像搜索引擎中的模糊查询</span></p><h1 id=\"SWW9P\"><span class=\"ne-text\">索引的优点</span></h1><ul class=\"ne-ul\"><li id=\"u6d94ceb8\" data-lake-index-type=\"0\"><span class=\"ne-text\">提高数据的搜索速度</span></li><li id=\"udc61f201\" data-lake-index-type=\"0\"><span class=\"ne-text\">加快表与表之间的连接速度</span></li><li id=\"u5e147441\" data-lake-index-type=\"0\"><span class=\"ne-text\">在信息检索过程中，若使用分组及排序子句进行时，通过简历索引能有效的减少索引过程中所需的分组及排序时间，提高检索效率</span></li></ul><p id=\"u6c2a5206\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"vGcYT\"><span class=\"ne-text\">索引的缺点</span></h1><ul class=\"ne-ul\"><li id=\"ud3867545\" data-lake-index-type=\"0\"><span class=\"ne-text\">在我们建立数据库的时候，需要花费时间去建立和维护索引，而且随着数据的增加，需要维护它的时间也要增加</span></li><li id=\"u15ad5fe0\" data-lake-index-type=\"0\"><span class=\"ne-text\">在创建索引的时候会占用存储空间</span></li><li id=\"u03f9eff2\" data-lake-index-type=\"0\"><span class=\"ne-text\">在我们需要修改表的数据时，索引还需要进行动态的维护，所以对数据库的维护带来了一定的麻烦</span></li></ul><p id=\"u357e0554\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"EabX9\"><span class=\"ne-text\">Mysql怎样判断索引是否存在~</span></h1><p id=\"u30d89d29\" class=\"ne-p\"><span class=\"ne-text\">索引创建完成后，可以利用 SQL 语句查看已经存在的索引。在 MySQL 中，可以使用 SHOW INDEX 语句查看表中创建的索引。</span></p><p id=\"u31799d30\" class=\"ne-p\"><span class=\"ne-text\">查看索引的语法格式如下：</span></p><pre data-language=\"shell\" id=\"KCo8f\" class=\"ne-codeblock language-shell\"><code>SHOW INDEX FROM &lt;表名&gt; [ FROM &lt;数据库名&gt;]</code></pre><p id=\"ue51b0caf\" class=\"ne-p\"><span class=\"ne-text\">语法说明如下： </span></p><p id=\"u9872ca7e\" class=\"ne-p\"><span class=\"ne-text\">&lt;表名&gt;：指定需要查看索引的数据表名。</span></p><p id=\"u42e4493a\" class=\"ne-p\"><span class=\"ne-text\">&lt;数据库名&gt;：指定需要查看索引的数据表所在的数据库，可省略。比如，SHOW INDEX FROM student FROM test; 语句表示查看 test 数据库中 student 数据表的索引。</span></p><p id=\"u49beb4e2\" class=\"ne-p\"><span class=\"ne-text\">扩展知识：</span></p><p id=\"u0b30e9a8\" class=\"ne-p\"><span class=\"ne-text\">其中各主要参数说明如下：</span></p><ul class=\"ne-ul\"><li id=\"ubedcb804\" data-lake-index-type=\"0\"><span class=\"ne-text\">Table 表示创建索引的数据表名，这里是 tb_stu_info2 数据表。</span></li><li id=\"u39d25644\" data-lake-index-type=\"0\"><span class=\"ne-text\">Non_unique 表示该索引是否是唯一索引。若不是唯一索引，则该列的值为 1；若是唯一索引，则该列的值为 0。</span></li><li id=\"u341be93d\" data-lake-index-type=\"0\"><span class=\"ne-text\">Key_name 表示索引的名称。</span></li><li id=\"u883ff9de\" data-lake-index-type=\"0\"><span class=\"ne-text\">Seq_in_index 表示该列在索引中的位置，如果索引是单列的，则该列的值为 1；如果索引是组合索引，则该列的值为每列在索引定义中的顺序。</span></li><li id=\"u925a6be5\" data-lake-index-type=\"0\"><span class=\"ne-text\">Column_name 表示定义索引的列字段。</span></li><li id=\"ubd88238e\" data-lake-index-type=\"0\"><span class=\"ne-text\">Collation 表示列以何种顺序存储在索引中。在 MySQL 中，升序显示值“A”（升序），若显示为 NULL，则表示无分类。</span></li><li id=\"u45d1909d\" data-lake-index-type=\"0\"><span class=\"ne-text\">Cardinality 索引中唯一值数目的估计值。基数根据被存储为整数的统计数据计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL 使用该索引的机会就越大。</span></li><li id=\"u305d3355\" data-lake-index-type=\"0\"><span class=\"ne-text\">Sub_part 表示列中被编入索引的字符的数量。若列只是部分被编入索引，则该列的值为被编入索引的字符的数目；若整列被编入索引，则该列的值为 NULL。</span></li><li id=\"ubdc3fdce\" data-lake-index-type=\"0\"><span class=\"ne-text\">Packed 指示关键字如何被压缩。若没有被压缩，值为 NULL。</span></li><li id=\"ud5c4681d\" data-lake-index-type=\"0\"><span class=\"ne-text\">Null 用于显示索引列中是否包含 NULL。若列含有 NULL，该列的值为 YES。若没有，则该列的值为 NO。</span></li><li id=\"u80ca9033\" data-lake-index-type=\"0\"><span class=\"ne-text\">Index_type 显示索引使用的类型和方法（BTREE、FULLTEXT、HASH、RTREE）。</span></li><li id=\"ub8f761ae\" data-lake-index-type=\"0\"><span class=\"ne-text\">Comment 显示评注。</span></li></ul><p id=\"ua86b52e0\" class=\"ne-p\"><span class=\"ne-text\"> </span></p></div>",
    "body": "tags: [mysql,索引]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<a name=\"gruRV\"></a>\n# 索引类型\n<br />索引的类型有以下几种：\n\n- **普通索引**\n- **唯一索引**\n- **主键索引**\n- **聚集索引**\n- **全文索引**\n\n**普通索引**：最基本的索引，没有任何约束限制<br />**唯一索引**：和普通索引差不多，但有唯一约束性，允许有null<br />**主键索引**：特殊的唯一约束索引，不允许有null，一张表最多只有一个主键索引<br />**聚集索引**：表中行的物理排序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。<br />**全文索引**：搜索数据表中的字段是不是包含我们搜索的字符串，就像搜索引擎中的模糊查询\n<a name=\"SWW9P\"></a>\n# 索引的优点\n\n- 提高数据的搜索速度\n- 加快表与表之间的连接速度\n- 在信息检索过程中，若使用分组及排序子句进行时，通过简历索引能有效的减少索引过程中所需的分组及排序时间，提高检索效率\n\n<a name=\"vGcYT\"></a>\n# 索引的缺点\n\n- 在我们建立数据库的时候，需要花费时间去建立和维护索引，而且随着数据的增加，需要维护它的时间也要增加\n- 在创建索引的时候会占用存储空间\n- 在我们需要修改表的数据时，索引还需要进行动态的维护，所以对数据库的维护带来了一定的麻烦\n\n<a name=\"EabX9\"></a>\n# Mysql怎样判断索引是否存在~\n索引创建完成后，可以利用 SQL 语句查看已经存在的索引。在 MySQL 中，可以使用 SHOW INDEX 语句查看表中创建的索引。<br />查看索引的语法格式如下：\n```shell\nSHOW INDEX FROM <表名> [ FROM <数据库名>]\n```\n语法说明如下： <br /><表名>：指定需要查看索引的数据表名。<br /><数据库名>：指定需要查看索引的数据表所在的数据库，可省略。比如，SHOW INDEX FROM student FROM test; 语句表示查看 test 数据库中 student 数据表的索引。<br />扩展知识：<br />其中各主要参数说明如下：\n\n- Table 表示创建索引的数据表名，这里是 tb_stu_info2 数据表。\n- Non_unique 表示该索引是否是唯一索引。若不是唯一索引，则该列的值为 1；若是唯一索引，则该列的值为 0。\n- Key_name 表示索引的名称。\n- Seq_in_index 表示该列在索引中的位置，如果索引是单列的，则该列的值为 1；如果索引是组合索引，则该列的值为每列在索引定义中的顺序。\n- Column_name 表示定义索引的列字段。\n- Collation 表示列以何种顺序存储在索引中。在 MySQL 中，升序显示值“A”（升序），若显示为 NULL，则表示无分类。\n- Cardinality 索引中唯一值数目的估计值。基数根据被存储为整数的统计数据计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL 使用该索引的机会就越大。\n- Sub_part 表示列中被编入索引的字符的数量。若列只是部分被编入索引，则该列的值为被编入索引的字符的数目；若整列被编入索引，则该列的值为 NULL。\n- Packed 指示关键字如何被压缩。若没有被压缩，值为 NULL。\n- Null 用于显示索引列中是否包含 NULL。若列含有 NULL，该列的值为 YES。若没有，则该列的值为 NO。\n- Index_type 显示索引使用的类型和方法（BTREE、FULLTEXT、HASH、RTREE）。\n- Comment 显示评注。\n\n \n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql,索引]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\">copyright_url: <br /></span><span class=\"ne-text\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"gruRV\"><span class=\"ne-text\">索引类型</span></h1><p id=\"udff72e20\" class=\"ne-p\"><span class=\"ne-text\"><br />索引的类型有以下几种：</span></p><ul class=\"ne-ul\"><li id=\"uf97f0db7\"><strong><span class=\"ne-text\">普通索引</span></strong></li><li id=\"u39202b02\"><strong><span class=\"ne-text\">唯一索引</span></strong></li><li id=\"u7adf53f4\"><strong><span class=\"ne-text\">主键索引</span></strong></li><li id=\"ude2a61df\"><strong><span class=\"ne-text\">聚集索引</span></strong></li><li id=\"u6b9ecbfc\"><strong><span class=\"ne-text\">全文索引</span></strong></li></ul><p id=\"udd7533aa\" class=\"ne-p\"><strong><span class=\"ne-text\">普通索引</span></strong><span class=\"ne-text\">：最基本的索引，没有任何约束限制</span></p><p id=\"u3e226ed9\" class=\"ne-p\"><strong><span class=\"ne-text\">唯一索引</span></strong><span class=\"ne-text\">：和普通索引差不多，但有唯一约束性，允许有null</span></p><p id=\"uf464ca22\" class=\"ne-p\"><strong><span class=\"ne-text\">主键索引</span></strong><span class=\"ne-text\">：特殊的唯一约束索引，不允许有null，一张表最多只有一个主键索引</span></p><p id=\"u696b5240\" class=\"ne-p\"><strong><span class=\"ne-text\">聚集索引</span></strong><span class=\"ne-text\">：表中行的物理排序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。</span></p><p id=\"u4841ab44\" class=\"ne-p\"><strong><span class=\"ne-text\">全文索引</span></strong><span class=\"ne-text\">：搜索数据表中的字段是不是包含我们搜索的字符串，就像搜索引擎中的模糊查询</span></p><h1 id=\"SWW9P\"><span class=\"ne-text\">索引的优点</span></h1><ul class=\"ne-ul\"><li id=\"u6d94ceb8\"><span class=\"ne-text\">提高数据的搜索速度</span></li><li id=\"udc61f201\"><span class=\"ne-text\">加快表与表之间的连接速度</span></li><li id=\"u5e147441\"><span class=\"ne-text\">在信息检索过程中，若使用分组及排序子句进行时，通过简历索引能有效的减少索引过程中所需的分组及排序时间，提高检索效率</span></li></ul><p id=\"u6c2a5206\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"vGcYT\"><span class=\"ne-text\">索引的缺点</span></h1><ul class=\"ne-ul\"><li id=\"ud3867545\"><span class=\"ne-text\">在我们建立数据库的时候，需要花费时间去建立和维护索引，而且随着数据的增加，需要维护它的时间也要增加</span></li><li id=\"u15ad5fe0\"><span class=\"ne-text\">在创建索引的时候会占用存储空间</span></li><li id=\"u03f9eff2\"><span class=\"ne-text\">在我们需要修改表的数据时，索引还需要进行动态的维护，所以对数据库的维护带来了一定的麻烦</span></li></ul><p id=\"u357e0554\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"EabX9\"><span class=\"ne-text\">Mysql怎样判断索引是否存在~</span></h1><p id=\"u30d89d29\" class=\"ne-p\"><span class=\"ne-text\">索引创建完成后，可以利用 SQL 语句查看已经存在的索引。在 MySQL 中，可以使用 SHOW INDEX 语句查看表中创建的索引。</span></p><p id=\"u31799d30\" class=\"ne-p\"><span class=\"ne-text\">查看索引的语法格式如下：</span></p><pre data-language=\"shell\" id=\"KCo8f\" class=\"ne-codeblock language-shell\">SHOW INDEX FROM &lt;表名&gt; [ FROM &lt;数据库名&gt;]</pre><p id=\"ue51b0caf\" class=\"ne-p\"><span class=\"ne-text\">语法说明如下： </span></p><p id=\"u9872ca7e\" class=\"ne-p\"><span class=\"ne-text\">&lt;表名&gt;：指定需要查看索引的数据表名。</span></p><p id=\"u42e4493a\" class=\"ne-p\"><span class=\"ne-text\">&lt;数据库名&gt;：指定需要查看索引的数据表所在的数据库，可省略。比如，SHOW INDEX FROM student FROM test; 语句表示查看 test 数据库中 student 数据表的索引。</span></p><p id=\"u49beb4e2\" class=\"ne-p\"><span class=\"ne-text\">扩展知识：</span></p><p id=\"u0b30e9a8\" class=\"ne-p\"><span class=\"ne-text\">其中各主要参数说明如下：</span></p><ul class=\"ne-ul\"><li id=\"ubedcb804\"><span class=\"ne-text\">Table 表示创建索引的数据表名，这里是 tb_stu_info2 数据表。</span></li><li id=\"u39d25644\"><span class=\"ne-text\">Non_unique 表示该索引是否是唯一索引。若不是唯一索引，则该列的值为 1；若是唯一索引，则该列的值为 0。</span></li><li id=\"u341be93d\"><span class=\"ne-text\">Key_name 表示索引的名称。</span></li><li id=\"u883ff9de\"><span class=\"ne-text\">Seq_in_index 表示该列在索引中的位置，如果索引是单列的，则该列的值为 1；如果索引是组合索引，则该列的值为每列在索引定义中的顺序。</span></li><li id=\"u925a6be5\"><span class=\"ne-text\">Column_name 表示定义索引的列字段。</span></li><li id=\"ubd88238e\"><span class=\"ne-text\">Collation 表示列以何种顺序存储在索引中。在 MySQL 中，升序显示值“A”（升序），若显示为 NULL，则表示无分类。</span></li><li id=\"u45d1909d\"><span class=\"ne-text\">Cardinality 索引中唯一值数目的估计值。基数根据被存储为整数的统计数据计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL 使用该索引的机会就越大。</span></li><li id=\"u305d3355\"><span class=\"ne-text\">Sub_part 表示列中被编入索引的字符的数量。若列只是部分被编入索引，则该列的值为被编入索引的字符的数目；若整列被编入索引，则该列的值为 NULL。</span></li><li id=\"ubdc3fdce\"><span class=\"ne-text\">Packed 指示关键字如何被压缩。若没有被压缩，值为 NULL。</span></li><li id=\"ud5c4681d\"><span class=\"ne-text\">Null 用于显示索引列中是否包含 NULL。若列含有 NULL，该列的值为 YES。若没有，则该列的值为 NO。</span></li><li id=\"u80ca9033\"><span class=\"ne-text\">Index_type 显示索引使用的类型和方法（BTREE、FULLTEXT、HASH、RTREE）。</span></li><li id=\"ub8f761ae\"><span class=\"ne-text\">Comment 显示评注。</span></li></ul><p id=\"ua86b52e0\" class=\"ne-p\"><span class=\"ne-text\"> </span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [mysql,索引]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u2fa28704\" id=\"u2fa28704\">copyright_url: <br /></span><span data-lake-id=\"u072b69c9\" id=\"u072b69c9\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h1 data-lake-id=\"gruRV\" id=\"gruRV\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\">索引类型</span></h1><p data-lake-id=\"udff72e20\" id=\"udff72e20\"><span data-lake-id=\"u1d2242c9\" id=\"u1d2242c9\"><br />索引的类型有以下几种：</span></p><ul list=\"u38dea95b\"><li fid=\"ucc9cb5af\" data-lake-id=\"uf97f0db7\" id=\"uf97f0db7\"><strong><span data-lake-id=\"u96b5eb4d\" id=\"u96b5eb4d\">普通索引</span></strong></li><li fid=\"ucc9cb5af\" data-lake-id=\"u39202b02\" id=\"u39202b02\"><strong><span data-lake-id=\"ube1b3e07\" id=\"ube1b3e07\">唯一索引</span></strong></li><li fid=\"ucc9cb5af\" data-lake-id=\"u7adf53f4\" id=\"u7adf53f4\"><strong><span data-lake-id=\"u25826f7b\" id=\"u25826f7b\">主键索引</span></strong></li><li fid=\"ucc9cb5af\" data-lake-id=\"ude2a61df\" id=\"ude2a61df\"><strong><span data-lake-id=\"u6cb9d982\" id=\"u6cb9d982\">聚集索引</span></strong></li><li fid=\"ucc9cb5af\" data-lake-id=\"u6b9ecbfc\" id=\"u6b9ecbfc\"><strong><span data-lake-id=\"u6efe1bb6\" id=\"u6efe1bb6\">全文索引</span></strong></li></ul><p data-lake-id=\"udd7533aa\" id=\"udd7533aa\"><strong><span data-lake-id=\"u2a6e8554\" id=\"u2a6e8554\">普通索引</span></strong><span data-lake-id=\"u9f472de8\" id=\"u9f472de8\">：最基本的索引，没有任何约束限制</span></p><p data-lake-id=\"u3e226ed9\" id=\"u3e226ed9\"><strong><span data-lake-id=\"u6b928202\" id=\"u6b928202\">唯一索引</span></strong><span data-lake-id=\"u579d8578\" id=\"u579d8578\">：和普通索引差不多，但有唯一约束性，允许有null</span></p><p data-lake-id=\"uf464ca22\" id=\"uf464ca22\"><strong><span data-lake-id=\"ue732c2ad\" id=\"ue732c2ad\">主键索引</span></strong><span data-lake-id=\"uffa049ab\" id=\"uffa049ab\">：特殊的唯一约束索引，不允许有null，一张表最多只有一个主键索引</span></p><p data-lake-id=\"u696b5240\" id=\"u696b5240\"><strong><span data-lake-id=\"u083a2a5c\" id=\"u083a2a5c\">聚集索引</span></strong><span data-lake-id=\"u3696899c\" id=\"u3696899c\">：表中行的物理排序与键值的逻辑（索引）顺序相同。一个表只能包含一个聚集索引。与非聚集索引相比，聚集索引通常提供更快的数据访问速度。</span></p><p data-lake-id=\"u4841ab44\" id=\"u4841ab44\"><strong><span data-lake-id=\"ue7c35d60\" id=\"ue7c35d60\">全文索引</span></strong><span data-lake-id=\"u7a76e730\" id=\"u7a76e730\">：搜索数据表中的字段是不是包含我们搜索的字符串，就像搜索引擎中的模糊查询</span></p><h1 data-lake-id=\"SWW9P\" id=\"SWW9P\"><span data-lake-id=\"u4a14fd7c\" id=\"u4a14fd7c\">索引的优点</span></h1><ul list=\"u15868cac\"><li fid=\"ubd940ae1\" data-lake-id=\"u6d94ceb8\" id=\"u6d94ceb8\"><span data-lake-id=\"u0740b6a7\" id=\"u0740b6a7\">提高数据的搜索速度</span></li><li fid=\"ubd940ae1\" data-lake-id=\"udc61f201\" id=\"udc61f201\"><span data-lake-id=\"u4295d33a\" id=\"u4295d33a\">加快表与表之间的连接速度</span></li><li fid=\"ubd940ae1\" data-lake-id=\"u5e147441\" id=\"u5e147441\"><span data-lake-id=\"ua1cad669\" id=\"ua1cad669\">在信息检索过程中，若使用分组及排序子句进行时，通过简历索引能有效的减少索引过程中所需的分组及排序时间，提高检索效率</span></li></ul><p data-lake-id=\"u6c2a5206\" id=\"u6c2a5206\"><span data-lake-id=\"u666cadaf\" id=\"u666cadaf\">​</span><br></p><h1 data-lake-id=\"vGcYT\" id=\"vGcYT\"><span data-lake-id=\"ubba85ef7\" id=\"ubba85ef7\">索引的缺点</span></h1><ul list=\"ue1235a3b\"><li fid=\"u99344b5c\" data-lake-id=\"ud3867545\" id=\"ud3867545\"><span data-lake-id=\"u36ad2871\" id=\"u36ad2871\">在我们建立数据库的时候，需要花费时间去建立和维护索引，而且随着数据的增加，需要维护它的时间也要增加</span></li><li fid=\"u99344b5c\" data-lake-id=\"u15ad5fe0\" id=\"u15ad5fe0\"><span data-lake-id=\"u7173b3f5\" id=\"u7173b3f5\">在创建索引的时候会占用存储空间</span></li><li fid=\"u99344b5c\" data-lake-id=\"u03f9eff2\" id=\"u03f9eff2\"><span data-lake-id=\"uf8d4e4a0\" id=\"uf8d4e4a0\">在我们需要修改表的数据时，索引还需要进行动态的维护，所以对数据库的维护带来了一定的麻烦</span></li></ul><p data-lake-id=\"u357e0554\" id=\"u357e0554\"><span data-lake-id=\"uf18d5bb2\" id=\"uf18d5bb2\">​</span><br></p><h1 data-lake-id=\"EabX9\" id=\"EabX9\"><span data-lake-id=\"u507c7357\" id=\"u507c7357\">Mysql怎样判断索引是否存在~</span></h1><p data-lake-id=\"u30d89d29\" id=\"u30d89d29\"><span data-lake-id=\"ufa42f5a3\" id=\"ufa42f5a3\">索引创建完成后，可以利用 SQL 语句查看已经存在的索引。在 MySQL 中，可以使用 SHOW INDEX 语句查看表中创建的索引。</span></p><p data-lake-id=\"u31799d30\" id=\"u31799d30\"><span data-lake-id=\"u5a24e6a6\" id=\"u5a24e6a6\">查看索引的语法格式如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22SHOW%20INDEX%20FROM%20%3C%E8%A1%A8%E5%90%8D%3E%20%5B%20FROM%20%3C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%3E%5D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KCo8f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ue51b0caf\" id=\"ue51b0caf\"><span data-lake-id=\"u6ec5d85e\" id=\"u6ec5d85e\">语法说明如下： </span></p><p data-lake-id=\"u9872ca7e\" id=\"u9872ca7e\"><span data-lake-id=\"ud555a5fd\" id=\"ud555a5fd\">&lt;表名&gt;：指定需要查看索引的数据表名。</span></p><p data-lake-id=\"u42e4493a\" id=\"u42e4493a\"><span data-lake-id=\"u6d985e66\" id=\"u6d985e66\">&lt;数据库名&gt;：指定需要查看索引的数据表所在的数据库，可省略。比如，SHOW INDEX FROM student FROM test; 语句表示查看 test 数据库中 student 数据表的索引。</span></p><p data-lake-id=\"u49beb4e2\" id=\"u49beb4e2\"><span data-lake-id=\"u6fbb5ea2\" id=\"u6fbb5ea2\">扩展知识：</span></p><p data-lake-id=\"u0b30e9a8\" id=\"u0b30e9a8\"><span data-lake-id=\"uf0d46920\" id=\"uf0d46920\">其中各主要参数说明如下：</span></p><ul list=\"ud31c44c5\"><li fid=\"uc47df640\" data-lake-id=\"ubedcb804\" id=\"ubedcb804\"><span data-lake-id=\"ufd947601\" id=\"ufd947601\">Table 表示创建索引的数据表名，这里是 tb_stu_info2 数据表。</span></li><li fid=\"uc47df640\" data-lake-id=\"u39d25644\" id=\"u39d25644\"><span data-lake-id=\"u968e26f9\" id=\"u968e26f9\">Non_unique 表示该索引是否是唯一索引。若不是唯一索引，则该列的值为 1；若是唯一索引，则该列的值为 0。</span></li><li fid=\"uc47df640\" data-lake-id=\"u341be93d\" id=\"u341be93d\"><span data-lake-id=\"u5c1f40e7\" id=\"u5c1f40e7\">Key_name 表示索引的名称。</span></li><li fid=\"uc47df640\" data-lake-id=\"u883ff9de\" id=\"u883ff9de\"><span data-lake-id=\"ua08eef3d\" id=\"ua08eef3d\">Seq_in_index 表示该列在索引中的位置，如果索引是单列的，则该列的值为 1；如果索引是组合索引，则该列的值为每列在索引定义中的顺序。</span></li><li fid=\"uc47df640\" data-lake-id=\"u925a6be5\" id=\"u925a6be5\"><span data-lake-id=\"u429d2208\" id=\"u429d2208\">Column_name 表示定义索引的列字段。</span></li><li fid=\"uc47df640\" data-lake-id=\"ubd88238e\" id=\"ubd88238e\"><span data-lake-id=\"u029a8c7c\" id=\"u029a8c7c\">Collation 表示列以何种顺序存储在索引中。在 MySQL 中，升序显示值“A”（升序），若显示为 NULL，则表示无分类。</span></li><li fid=\"uc47df640\" data-lake-id=\"u45d1909d\" id=\"u45d1909d\"><span data-lake-id=\"ub43d8eee\" id=\"ub43d8eee\">Cardinality 索引中唯一值数目的估计值。基数根据被存储为整数的统计数据计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL 使用该索引的机会就越大。</span></li><li fid=\"uc47df640\" data-lake-id=\"u305d3355\" id=\"u305d3355\"><span data-lake-id=\"u7e4b4773\" id=\"u7e4b4773\">Sub_part 表示列中被编入索引的字符的数量。若列只是部分被编入索引，则该列的值为被编入索引的字符的数目；若整列被编入索引，则该列的值为 NULL。</span></li><li fid=\"uc47df640\" data-lake-id=\"ubdc3fdce\" id=\"ubdc3fdce\"><span data-lake-id=\"u425025fd\" id=\"u425025fd\">Packed 指示关键字如何被压缩。若没有被压缩，值为 NULL。</span></li><li fid=\"uc47df640\" data-lake-id=\"ud5c4681d\" id=\"ud5c4681d\"><span data-lake-id=\"ud890000d\" id=\"ud890000d\">Null 用于显示索引列中是否包含 NULL。若列含有 NULL，该列的值为 YES。若没有，则该列的值为 NO。</span></li><li fid=\"uc47df640\" data-lake-id=\"u80ca9033\" id=\"u80ca9033\"><span data-lake-id=\"u3cb65ea4\" id=\"u3cb65ea4\">Index_type 显示索引使用的类型和方法（BTREE、FULLTEXT、HASH、RTREE）。</span></li><li fid=\"uc47df640\" data-lake-id=\"ub8f761ae\" id=\"ub8f761ae\"><span data-lake-id=\"ucdbea7e9\" id=\"ucdbea7e9\">Comment 显示评注。</span></li></ul><p data-lake-id=\"ua86b52e0\" id=\"ua86b52e0\"><span data-lake-id=\"uccc15a2d\" id=\"uccc15a2d\"> </span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 1047,
    "created_at": "2022-06-01T03:31:25.000Z",
    "updated_at": "2023-07-27T02:06:45.000Z",
    "content_updated_at": "2023-07-27T02:06:45.000Z",
    "published_at": "2022-06-01T07:21:08.000Z",
    "first_published_at": "2022-06-01T03:49:57.471Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1024884116,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 78607914,
    "type": "Doc",
    "slug": "tre5aq",
    "title": "php-fpm优化方法 pm.min_spare_servers、pm.max_spare_servers 的真实意义",
    "description": "tags: [php,fpm,php-fpm]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url:  https://blog.csdn.net/a5816138/article/deta...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,fpm,php-fpm]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span class=\"ne-text\">https://blog.csdn.net/a5816138/article/details/53670597</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"f39EI\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">php-fpm 进程池优化方法</span></h1><p id=\"uf66ef965\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">php-fpm进程池</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">开启进程</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">有两种方式，一种是</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">static，</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">直接开启指定数量的php-fpm进程，不再增加或者减少；</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">另一种则是</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">dynamic，</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">开始时开启一定数量的php-fpm进程，当请求量变大时，动态的增加php-fpm进程数到上限，当空闲时自动释放空闲的进程数到一个下限。</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">这两种不同的执行方式，可以根据服务器的实际需求来进行调整。</span></p><p id=\"ueac81ddc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">要用到的一些参数，分别是pm、pm.max_children、pm.start_servers、pm.min_spare_servers和pm.max_spare_servers。</span></p><p id=\"u0dc2ee6e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm表示使用那种方式，有两个值可以选择，就是static（静态）或者dynamic（动态）。</span></p><p id=\"u9463a969\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">下面4个参数的意思分别为：</span></p><p id=\"uecf372f4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">（这里要注意pm.max_spare_servers的值只能小于等于pm.max_children）</span></p><div class=\"ne-quote\"><p id=\"ubfd539de\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.max_children</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：静态方式下开启的php-fpm进程数量，在动态方式下他限定php-fpm的最大进程数</span><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.start_servers</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：动态方式下的起始php-fpm进程数量。</span><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.min_spare_servers</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：动态方式空闲状态下的最小php-fpm进程数量。</span><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.max_spare_servers</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：动态方式空闲状态下的最大php-fpm进程数量。</span></p></div><p id=\"u3520fde4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">如果dm设置为static，那么其实只有pm.max_children这个参数生效。系统会开启</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">参数</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">设置数量的php-fpm进程。</span></p><p id=\"uc61418b0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">如果dm设置为dynamic，4个参数都生效。系统会在php-fpm运行开始时启动pm.start_servers个php-fpm进程，然后根据系统的需求动态在pm.min_spare_servers和pm.max_spare_servers之间调整php-fpm进程数。</span></p><h1 id=\"pLNUT\"><span class=\"ne-text\"></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">P.S</span></h1><p id=\"ue08d28a6\" class=\"ne-p\"><span class=\"ne-text\"> <br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm.min_spare_servers、</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm.max_spare_servers这2个参数一开始我以为是指空闲进程，但是后来服务器给我报了一个错误：</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm.start_servers(70) must not be less than pm.min_spare_servers(15) and not greater than pm.max_spare_servers(60)</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">要求pm.start_servers的值在pm.min_spare_servers和pm.max_spare_servers之间<br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">经过测试，得出上述结论。</span></p></div>",
    "body": "tags: [php,fpm,php-fpm]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url:  https://blog.csdn.net/a5816138/article/details/53670597<br />copyright_author: <br />cover:\n\n---\n\n<a name=\"f39EI\"></a>\n# php-fpm 进程池优化方法\nphp-fpm进程池开启进程有两种方式，一种是static，直接开启指定数量的php-fpm进程，不再增加或者减少；<br />另一种则是dynamic，开始时开启一定数量的php-fpm进程，当请求量变大时，动态的增加php-fpm进程数到上限，当空闲时自动释放空闲的进程数到一个下限。<br />这两种不同的执行方式，可以根据服务器的实际需求来进行调整。<br />要用到的一些参数，分别是pm、pm.max_children、pm.start_servers、pm.min_spare_servers和pm.max_spare_servers。<br />pm表示使用那种方式，有两个值可以选择，就是static（静态）或者dynamic（动态）。<br />下面4个参数的意思分别为：<br />（这里要注意pm.max_spare_servers的值只能小于等于pm.max_children）\n> **pm.max_children**：静态方式下开启的php-fpm进程数量，在动态方式下他限定php-fpm的最大进程数<br />**pm.start_servers**：动态方式下的起始php-fpm进程数量。<br />**pm.min_spare_servers**：动态方式空闲状态下的最小php-fpm进程数量。<br />**pm.max_spare_servers**：动态方式空闲状态下的最大php-fpm进程数量。\n\n如果dm设置为static，那么其实只有pm.max_children这个参数生效。系统会开启参数设置数量的php-fpm进程。<br />如果dm设置为dynamic，4个参数都生效。系统会在php-fpm运行开始时启动pm.start_servers个php-fpm进程，然后根据系统的需求动态在pm.min_spare_servers和pm.max_spare_servers之间调整php-fpm进程数。\n<a name=\"pLNUT\"></a>\n# P.S\n <br />pm.min_spare_servers、 pm.max_spare_servers这2个参数一开始我以为是指空闲进程，但是后来服务器给我报了一个错误：<br />pm.start_servers(70) must not be less than pm.min_spare_servers(15) and not greater than pm.max_spare_servers(60)<br />要求pm.start_servers的值在pm.min_spare_servers和pm.max_spare_servers之间<br />经过测试，得出上述结论。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,fpm,php-fpm]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span class=\"ne-text\">https://blog.csdn.net/a5816138/article/details/53670597</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"f39EI\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">php-fpm 进程池优化方法</span></h1><p id=\"uf66ef965\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">php-fpm进程池</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">开启进程</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">有两种方式，一种是</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">static，</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">直接开启指定数量的php-fpm进程，不再增加或者减少；</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">另一种则是</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">dynamic，</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">开始时开启一定数量的php-fpm进程，当请求量变大时，动态的增加php-fpm进程数到上限，当空闲时自动释放空闲的进程数到一个下限。</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">这两种不同的执行方式，可以根据服务器的实际需求来进行调整。</span></p><p id=\"ueac81ddc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">要用到的一些参数，分别是pm、pm.max_children、pm.start_servers、pm.min_spare_servers和pm.max_spare_servers。</span></p><p id=\"u0dc2ee6e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm表示使用那种方式，有两个值可以选择，就是static（静态）或者dynamic（动态）。</span></p><p id=\"u9463a969\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">下面4个参数的意思分别为：</span></p><p id=\"uecf372f4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">（这里要注意pm.max_spare_servers的值只能小于等于pm.max_children）</span></p><div class=\"ne-quote\"><p id=\"ubfd539de\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.max_children</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：静态方式下开启的php-fpm进程数量，在动态方式下他限定php-fpm的最大进程数</span><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.start_servers</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：动态方式下的起始php-fpm进程数量。</span><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.min_spare_servers</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：动态方式空闲状态下的最小php-fpm进程数量。</span><span class=\"ne-text\"><br /></span><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">pm.max_spare_servers</span></strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">：动态方式空闲状态下的最大php-fpm进程数量。</span></p></div><p id=\"u3520fde4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">如果dm设置为static，那么其实只有pm.max_children这个参数生效。系统会开启</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">参数</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">设置数量的php-fpm进程。</span></p><p id=\"uc61418b0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">如果dm设置为dynamic，4个参数都生效。系统会在php-fpm运行开始时启动pm.start_servers个php-fpm进程，然后根据系统的需求动态在pm.min_spare_servers和pm.max_spare_servers之间调整php-fpm进程数。</span></p><h1 id=\"pLNUT\"><span class=\"ne-text\"></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">P.S</span></h1><p id=\"ue08d28a6\" class=\"ne-p\"><span class=\"ne-text\"> <br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm.min_spare_servers、</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm.max_spare_servers这2个参数一开始我以为是指空闲进程，但是后来服务器给我报了一个错误：</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">pm.start_servers(70) must not be less than pm.min_spare_servers(15) and not greater than pm.max_spare_servers(60)</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">要求pm.start_servers的值在pm.min_spare_servers和pm.max_spare_servers之间<br /></span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 14px\">经过测试，得出上述结论。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,fpm,php-fpm]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u29aad956\" id=\"u29aad956\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span data-lake-id=\"u9fbd7883\" id=\"u9fbd7883\">https://blog.csdn.net/a5816138/article/details/53670597</span><span data-lake-id=\"u18fc239a\" id=\"u18fc239a\" style=\"color: rgb(38, 38, 38)\"><br /></span><span data-lake-id=\"u29661e91\" id=\"u29661e91\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h1 data-lake-id=\"f39EI\" id=\"f39EI\"><span data-lake-id=\"u5386505d\" id=\"u5386505d\" style=\"color: rgb(51, 51, 51)\">​</span><span data-lake-id=\"u626bd73f\" id=\"u626bd73f\" style=\"color: rgb(0, 0, 0)\">php-fpm 进程池优化方法</span></h1><p data-lake-id=\"uf66ef965\" id=\"uf66ef965\"><span data-lake-id=\"u5602920d\" id=\"u5602920d\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">php-fpm进程池</span><span data-lake-id=\"u2370fa0c\" id=\"u2370fa0c\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">开启进程</span><span data-lake-id=\"uafbea3e6\" id=\"uafbea3e6\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">有两种方式，一种是</span><span data-lake-id=\"u11f3fad1\" id=\"u11f3fad1\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">static，</span><span data-lake-id=\"u97768bd9\" id=\"u97768bd9\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">直接开启指定数量的php-fpm进程，不再增加或者减少；</span><span data-lake-id=\"u5ea4a83c\" id=\"u5ea4a83c\" class=\"lake-fontsize-11\" style=\"color: rgb(77, 77, 77)\"><br /></span><span data-lake-id=\"u98d0e08d\" id=\"u98d0e08d\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">另一种则是</span><span data-lake-id=\"u6d332652\" id=\"u6d332652\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">dynamic，</span><span data-lake-id=\"ub70ba89f\" id=\"ub70ba89f\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">开始时开启一定数量的php-fpm进程，当请求量变大时，动态的增加php-fpm进程数到上限，当空闲时自动释放空闲的进程数到一个下限。</span><span data-lake-id=\"uef234163\" id=\"uef234163\" class=\"lake-fontsize-11\" style=\"color: rgb(77, 77, 77)\"><br /></span><span data-lake-id=\"u2284f2aa\" id=\"u2284f2aa\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">这两种不同的执行方式，可以根据服务器的实际需求来进行调整。</span></p><p data-lake-id=\"ueac81ddc\" id=\"ueac81ddc\"><span data-lake-id=\"u88bad83c\" id=\"u88bad83c\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">要用到的一些参数，分别是pm、pm.max_children、pm.start_servers、pm.min_spare_servers和pm.max_spare_servers。</span></p><p data-lake-id=\"u0dc2ee6e\" id=\"u0dc2ee6e\"><span data-lake-id=\"u10e226b6\" id=\"u10e226b6\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">pm表示使用那种方式，有两个值可以选择，就是static（静态）或者dynamic（动态）。</span></p><p data-lake-id=\"u9463a969\" id=\"u9463a969\"><span data-lake-id=\"u11753a23\" id=\"u11753a23\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">下面4个参数的意思分别为：</span></p><p data-lake-id=\"uecf372f4\" id=\"uecf372f4\"><span data-lake-id=\"u25a1fc74\" id=\"u25a1fc74\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">（这里要注意pm.max_spare_servers的值只能小于等于pm.max_children）</span></p><blockquote data-lake-id=\"uebc47188\" id=\"uebc47188\"><p data-lake-id=\"ubfd539de\" id=\"ubfd539de\"><strong><span data-lake-id=\"ubed32aac\" id=\"ubed32aac\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">pm.max_children</span></strong><span data-lake-id=\"u5daf89d8\" id=\"u5daf89d8\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">：静态方式下开启的php-fpm进程数量，在动态方式下他限定php-fpm的最大进程数</span><span data-lake-id=\"u67567aeb\" id=\"u67567aeb\"><br /></span><strong><span data-lake-id=\"u3105efb1\" id=\"u3105efb1\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">pm.start_servers</span></strong><span data-lake-id=\"u016a7637\" id=\"u016a7637\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">：动态方式下的起始php-fpm进程数量。</span><span data-lake-id=\"u72173ee8\" id=\"u72173ee8\"><br /></span><strong><span data-lake-id=\"ube3154ad\" id=\"ube3154ad\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">pm.min_spare_servers</span></strong><span data-lake-id=\"u986b3de9\" id=\"u986b3de9\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">：动态方式空闲状态下的最小php-fpm进程数量。</span><span data-lake-id=\"u508e0fe7\" id=\"u508e0fe7\"><br /></span><strong><span data-lake-id=\"u6ccfc719\" id=\"u6ccfc719\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">pm.max_spare_servers</span></strong><span data-lake-id=\"u3318a4fc\" id=\"u3318a4fc\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">：动态方式空闲状态下的最大php-fpm进程数量。</span></p></blockquote><p data-lake-id=\"u3520fde4\" id=\"u3520fde4\"><span data-lake-id=\"uc82eb4a8\" id=\"uc82eb4a8\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">如果dm设置为static，那么其实只有pm.max_children这个参数生效。系统会开启</span><span data-lake-id=\"u9aae065f\" id=\"u9aae065f\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">参数</span><span data-lake-id=\"uc11d46b0\" id=\"uc11d46b0\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">设置数量的php-fpm进程。</span></p><p data-lake-id=\"uc61418b0\" id=\"uc61418b0\"><span data-lake-id=\"u5f829a85\" id=\"u5f829a85\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">如果dm设置为dynamic，4个参数都生效。系统会在php-fpm运行开始时启动pm.start_servers个php-fpm进程，然后根据系统的需求动态在pm.min_spare_servers和pm.max_spare_servers之间调整php-fpm进程数。</span></p><h1 data-lake-id=\"pLNUT\" id=\"pLNUT\"><span data-lake-id=\"uad0a68e8\" id=\"uad0a68e8\">​</span><span data-lake-id=\"uf44d815d\" id=\"uf44d815d\" style=\"color: rgb(0, 0, 0)\">P.S</span></h1><p data-lake-id=\"ue08d28a6\" id=\"ue08d28a6\"><span data-lake-id=\"u08a9c7a9\" id=\"u08a9c7a9\"> <br /></span><span data-lake-id=\"u6f8f42b9\" id=\"u6f8f42b9\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">pm.min_spare_servers、</span><span data-lake-id=\"u47924417\" id=\"u47924417\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u4f2626d9\" id=\"u4f2626d9\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">pm.max_spare_servers这2个参数一开始我以为是指空闲进程，但是后来服务器给我报了一个错误：</span><span data-lake-id=\"u1f5403be\" id=\"u1f5403be\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"udff0b350\" id=\"udff0b350\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">pm.start_servers(70) must not be less than pm.min_spare_servers(15) and not greater than pm.max_spare_servers(60)</span><span data-lake-id=\"uf37f7fa4\" id=\"uf37f7fa4\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u26757cdb\" id=\"u26757cdb\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">要求pm.start_servers的值在pm.min_spare_servers和pm.max_spare_servers之间<br /></span><span data-lake-id=\"u32e89e84\" id=\"u32e89e84\" class=\"lake-fontsize-11\" style=\"color: rgb(0, 0, 0)\">经过测试，得出上述结论。</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 1,
    "read_count": 3,
    "hits": 3,
    "comments_count": 0,
    "word_count": 496,
    "created_at": "2022-05-26T01:25:51.000Z",
    "updated_at": "2023-07-27T02:06:50.000Z",
    "content_updated_at": "2023-07-27T02:06:50.000Z",
    "published_at": "2022-05-26T03:22:44.000Z",
    "first_published_at": "2022-05-26T01:28:04.258Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1013377381,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 78447677,
    "type": "Doc",
    "slug": "brzo2t",
    "title": "Layui树形表格treetable的简单使用",
    "description": "tags: [treetable,layui,树形]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url: copyright_author: cover:<body class=\"pear...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [treetable,layui,树形]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><pre data-language=\"html\" id=\"gf3w3\" class=\"ne-codeblock language-html\"><code>&lt;body class=&quot;pear-container&quot;&gt;\n  &lt;div class=&quot;layui-card&quot;&gt;\n    &lt;div class=&quot;layui-card-body&quot;&gt;\n      &lt;table id=&quot;admin_table&quot; lay-filter=&quot;admin_table&quot;&gt;&lt;/table&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;script type=&quot;text/html&quot; id=&quot;add_toolbar&quot;&gt;\n  &lt;button class=&quot;pear-btn pear-btn-primary pear-btn-md {if !check_auth('{:__url('system/authrule/add')}')}layui-hide{/if}&quot;\n  data-open=&quot;{:__url('system/authrule/add')}&quot;\n  data-title=&quot;添加权限节点&quot;&gt;\n  &lt;i class=&quot;layui-icon layui-icon-add-1&quot;&gt;&lt;/i&gt;\n  添加权限节点\n    &lt;/button&gt;\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;isMenuTpl&quot;&gt;\n  {{#  if(d.is_menu =='1'){ }}\n  &lt;span class=&quot;layui-badge layui-bg-green&quot;&gt; 是 &lt;/span&gt;\n  {{#  } else { }}\n  &lt;span class=&quot;layui-badge layui-bg-danger&quot;&gt; 否 &lt;/span&gt;\n  {{#  } }}\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;statusTpl&quot;&gt;\n  {{#  if(d.status =='1'){ }}\n  &lt;span class=&quot;layui-badge layui-bg-green&quot;&gt; 是 &lt;/span&gt;\n  {{#  } else { }}\n  &lt;span class=&quot;layui-badge layui-bg-danger&quot;&gt; 否 &lt;/span&gt;\n  {{#  } }}\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;iconTpl&quot;&gt;\n  &lt;span class=&quot;huicmf_icon&quot;&gt;&lt;i class=&quot;layui-inline layui-icon {{d.icon}}&quot;&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;barDemo&quot;&gt;\n  &lt;button class=&quot;pear-btn pear-btn-primary pear-btn-sm&quot; title=&quot;编辑&quot;\n  data-open=&quot;{:__url('system/authrule/edit')}?id={{d.id}}&quot;\n  data-title=&quot;编辑&quot;&gt;\n  &lt;i class=&quot;layui-icon layui-icon-edit&quot;&gt;&lt;/i&gt;\n    &lt;/button&gt;\n    &lt;button class=&quot;pear-btn pear-btn-danger pear-btn-sm&quot; title=&quot;删除&quot;\n    data-delete=&quot;{:__url('system/authrule/delete')}?id={{d.id}}&quot;\n    data-title=&quot;您确定要删除吗？&quot; data-reload=&quot;2&quot;&gt;\n    &lt;i class=&quot;layui-icon layui-icon-delete&quot;&gt;&lt;/i&gt;\n    &lt;/button&gt;\n  &lt;/script&gt;\n  \n &lt;!-- 这里引用layui等数据 --&gt;\n  &lt;script&gt;\n    layui.use(['table', 'jquery','treetable'], function () {\n      var $ = layui.jquery;\n      var table = layui.table;\n      let treetable = layui.treetable;\n      var renderTable = function(){\n        layer.load(2);  //加载层\n        treetable.render({\n          treeColIndex: 1,\n          treeSpid: 0,\n          treeIdName: 'title',\n          treePidName: 'pid',\n          treeDefaultClose: false,\n          toolbar: '#add_toolbar',\n          defaultToolbar: [{\n            layEvent: 'refresh',\n            icon: 'layui-icon-refresh',\n            title: '刷新'\n          }, 'filter', 'exports'],\n          elem: '#admin_table',\n          url: &quot;{:__url('system/authrule/index')}&quot;,\n          id: 'testReload',\n          done: function () {\n            layer.closeAll('loading');\n          },\n          page: false,\n          cols: [\n            [\n              {field: 'id', title: 'ID', width: 60, align: 'center', sort: true}\n              , {field: 'title_tree', title: '节点名称',width:200}\n              , {field: 'node', title: '节点规则',width:300}\n              , {field: 'icon', title: '图标',width:80, templet: '#iconTpl', align: 'center'}\n              , {field: 'is_menu', title: '是否菜单', templet: '#isMenuTpl', align: 'center',width:90}\n              , {field: 'status', title: '状态', templet: '#statusTpl', align: 'center'}\n              , {field: 'create_time', title: '添加时间'}\n              , {fixed: 'right', title: '操作', toolbar: '#barDemo', align: 'center', width: 130}\n            ]\n          ]\n        });\n      }\n      renderTable();\n      \n      //监听行工具事件\n      table.on('toolbar(admin_table)', function (obj) {\n        if (obj.event === 'refresh') {\n          renderTable();\n        }\n      });\n      \n    });\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></div>",
    "body": "tags: [treetable,layui,树形]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n\n\n```html\n<body class=\"pear-container\">\n  <div class=\"layui-card\">\n    <div class=\"layui-card-body\">\n      <table id=\"admin_table\" lay-filter=\"admin_table\"></table>\n    </div>\n  </div>\n  <script type=\"text/html\" id=\"add_toolbar\">\n  <button class=\"pear-btn pear-btn-primary pear-btn-md {if !check_auth('{:__url('system/authrule/add')}')}layui-hide{/if}\"\n  data-open=\"{:__url('system/authrule/add')}\"\n  data-title=\"添加权限节点\">\n  <i class=\"layui-icon layui-icon-add-1\"></i>\n  添加权限节点\n    </button>\n  </script>\n  \n  <script type=\"text/html\" id=\"isMenuTpl\">\n  {{#  if(d.is_menu =='1'){ }}\n  <span class=\"layui-badge layui-bg-green\"> 是 </span>\n  {{#  } else { }}\n  <span class=\"layui-badge layui-bg-danger\"> 否 </span>\n  {{#  } }}\n  </script>\n  \n  <script type=\"text/html\" id=\"statusTpl\">\n  {{#  if(d.status =='1'){ }}\n  <span class=\"layui-badge layui-bg-green\"> 是 </span>\n  {{#  } else { }}\n  <span class=\"layui-badge layui-bg-danger\"> 否 </span>\n  {{#  } }}\n  </script>\n  \n  <script type=\"text/html\" id=\"iconTpl\">\n  <span class=\"huicmf_icon\"><i class=\"layui-inline layui-icon {{d.icon}}\"></i></span>\n  </script>\n  \n  <script type=\"text/html\" id=\"barDemo\">\n  <button class=\"pear-btn pear-btn-primary pear-btn-sm\" title=\"编辑\"\n  data-open=\"{:__url('system/authrule/edit')}?id={{d.id}}\"\n  data-title=\"编辑\">\n  <i class=\"layui-icon layui-icon-edit\"></i>\n    </button>\n    <button class=\"pear-btn pear-btn-danger pear-btn-sm\" title=\"删除\"\n    data-delete=\"{:__url('system/authrule/delete')}?id={{d.id}}\"\n    data-title=\"您确定要删除吗？\" data-reload=\"2\">\n    <i class=\"layui-icon layui-icon-delete\"></i>\n    </button>\n  </script>\n  \n <!-- 这里引用layui等数据 -->\n  <script>\n    layui.use(['table', 'jquery','treetable'], function () {\n      var $ = layui.jquery;\n      var table = layui.table;\n      let treetable = layui.treetable;\n      var renderTable = function(){\n        layer.load(2);  //加载层\n        treetable.render({\n          treeColIndex: 1,\n          treeSpid: 0,\n          treeIdName: 'title',\n          treePidName: 'pid',\n          treeDefaultClose: false,\n          toolbar: '#add_toolbar',\n          defaultToolbar: [{\n            layEvent: 'refresh',\n            icon: 'layui-icon-refresh',\n            title: '刷新'\n          }, 'filter', 'exports'],\n          elem: '#admin_table',\n          url: \"{:__url('system/authrule/index')}\",\n          id: 'testReload',\n          done: function () {\n            layer.closeAll('loading');\n          },\n          page: false,\n          cols: [\n            [\n              {field: 'id', title: 'ID', width: 60, align: 'center', sort: true}\n              , {field: 'title_tree', title: '节点名称',width:200}\n              , {field: 'node', title: '节点规则',width:300}\n              , {field: 'icon', title: '图标',width:80, templet: '#iconTpl', align: 'center'}\n              , {field: 'is_menu', title: '是否菜单', templet: '#isMenuTpl', align: 'center',width:90}\n              , {field: 'status', title: '状态', templet: '#statusTpl', align: 'center'}\n              , {field: 'create_time', title: '添加时间'}\n              , {fixed: 'right', title: '操作', toolbar: '#barDemo', align: 'center', width: 130}\n            ]\n          ]\n        });\n      }\n      renderTable();\n      \n      //监听行工具事件\n      table.on('toolbar(admin_table)', function (obj) {\n        if (obj.event === 'refresh') {\n          renderTable();\n        }\n      });\n      \n    });\n  </script>\n</body>\n</html>\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [treetable,layui,树形]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><p id=\"u30aad522\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"><br /></span></p><pre data-language=\"html\" id=\"gf3w3\" class=\"ne-codeblock language-html\">&lt;body class=&quot;pear-container&quot;&gt;\n  &lt;div class=&quot;layui-card&quot;&gt;\n    &lt;div class=&quot;layui-card-body&quot;&gt;\n      &lt;table id=&quot;admin_table&quot; lay-filter=&quot;admin_table&quot;&gt;&lt;/table&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;script type=&quot;text/html&quot; id=&quot;add_toolbar&quot;&gt;\n  &lt;button class=&quot;pear-btn pear-btn-primary pear-btn-md {if !check_auth('{:__url('system/authrule/add')}')}layui-hide{/if}&quot;\n  data-open=&quot;{:__url('system/authrule/add')}&quot;\n  data-title=&quot;添加权限节点&quot;&gt;\n  &lt;i class=&quot;layui-icon layui-icon-add-1&quot;&gt;&lt;/i&gt;\n  添加权限节点\n    &lt;/button&gt;\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;isMenuTpl&quot;&gt;\n  {{#  if(d.is_menu =='1'){ }}\n  &lt;span class=&quot;layui-badge layui-bg-green&quot;&gt; 是 &lt;/span&gt;\n  {{#  } else { }}\n  &lt;span class=&quot;layui-badge layui-bg-danger&quot;&gt; 否 &lt;/span&gt;\n  {{#  } }}\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;statusTpl&quot;&gt;\n  {{#  if(d.status =='1'){ }}\n  &lt;span class=&quot;layui-badge layui-bg-green&quot;&gt; 是 &lt;/span&gt;\n  {{#  } else { }}\n  &lt;span class=&quot;layui-badge layui-bg-danger&quot;&gt; 否 &lt;/span&gt;\n  {{#  } }}\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;iconTpl&quot;&gt;\n  &lt;span class=&quot;huicmf_icon&quot;&gt;&lt;i class=&quot;layui-inline layui-icon {{d.icon}}&quot;&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;/script&gt;\n  \n  &lt;script type=&quot;text/html&quot; id=&quot;barDemo&quot;&gt;\n  &lt;button class=&quot;pear-btn pear-btn-primary pear-btn-sm&quot; title=&quot;编辑&quot;\n  data-open=&quot;{:__url('system/authrule/edit')}?id={{d.id}}&quot;\n  data-title=&quot;编辑&quot;&gt;\n  &lt;i class=&quot;layui-icon layui-icon-edit&quot;&gt;&lt;/i&gt;\n    &lt;/button&gt;\n    &lt;button class=&quot;pear-btn pear-btn-danger pear-btn-sm&quot; title=&quot;删除&quot;\n    data-delete=&quot;{:__url('system/authrule/delete')}?id={{d.id}}&quot;\n    data-title=&quot;您确定要删除吗？&quot; data-reload=&quot;2&quot;&gt;\n    &lt;i class=&quot;layui-icon layui-icon-delete&quot;&gt;&lt;/i&gt;\n    &lt;/button&gt;\n  &lt;/script&gt;\n  \n &lt;!-- 这里引用layui等数据 --&gt;\n  &lt;script&gt;\n    layui.use(['table', 'jquery','treetable'], function () {\n      var $ = layui.jquery;\n      var table = layui.table;\n      let treetable = layui.treetable;\n      var renderTable = function(){\n        layer.load(2);  //加载层\n        treetable.render({\n          treeColIndex: 1,\n          treeSpid: 0,\n          treeIdName: 'title',\n          treePidName: 'pid',\n          treeDefaultClose: false,\n          toolbar: '#add_toolbar',\n          defaultToolbar: [{\n            layEvent: 'refresh',\n            icon: 'layui-icon-refresh',\n            title: '刷新'\n          }, 'filter', 'exports'],\n          elem: '#admin_table',\n          url: &quot;{:__url('system/authrule/index')}&quot;,\n          id: 'testReload',\n          done: function () {\n            layer.closeAll('loading');\n          },\n          page: false,\n          cols: [\n            [\n              {field: 'id', title: 'ID', width: 60, align: 'center', sort: true}\n              , {field: 'title_tree', title: '节点名称',width:200}\n              , {field: 'node', title: '节点规则',width:300}\n              , {field: 'icon', title: '图标',width:80, templet: '#iconTpl', align: 'center'}\n              , {field: 'is_menu', title: '是否菜单', templet: '#isMenuTpl', align: 'center',width:90}\n              , {field: 'status', title: '状态', templet: '#statusTpl', align: 'center'}\n              , {field: 'create_time', title: '添加时间'}\n              , {fixed: 'right', title: '操作', toolbar: '#barDemo', align: 'center', width: 130}\n            ]\n          ]\n        });\n      }\n      renderTable();\n      \n      //监听行工具事件\n      table.on('toolbar(admin_table)', function (obj) {\n        if (obj.event === 'refresh') {\n          renderTable();\n        }\n      });\n      \n    });\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [treetable,layui,树形]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u82e71250\" id=\"u82e71250\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"uf34eb14f\" id=\"uf34eb14f\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><p data-lake-id=\"u30aad522\" id=\"u30aad522\"><span data-lake-id=\"uf9f847dc\" id=\"uf9f847dc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"><br /><br /></span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22html%22%2C%22code%22%3A%22%3Cbody%20class%3D%5C%22pear-container%5C%22%3E%5Cn%20%20%3Cdiv%20class%3D%5C%22layui-card%5C%22%3E%5Cn%20%20%20%20%3Cdiv%20class%3D%5C%22layui-card-body%5C%22%3E%5Cn%20%20%20%20%20%20%3Ctable%20id%3D%5C%22admin_table%5C%22%20lay-filter%3D%5C%22admin_table%5C%22%3E%3C%2Ftable%3E%5Cn%20%20%20%20%3C%2Fdiv%3E%5Cn%20%20%3C%2Fdiv%3E%5Cn%20%20%3Cscript%20type%3D%5C%22text%2Fhtml%5C%22%20id%3D%5C%22add_toolbar%5C%22%3E%5Cn%20%20%3Cbutton%20class%3D%5C%22pear-btn%20pear-btn-primary%20pear-btn-md%20%7Bif%20!check_auth('%7B%3A__url('system%2Fauthrule%2Fadd')%7D')%7Dlayui-hide%7B%2Fif%7D%5C%22%5Cn%20%20data-open%3D%5C%22%7B%3A__url('system%2Fauthrule%2Fadd')%7D%5C%22%5Cn%20%20data-title%3D%5C%22%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90%E8%8A%82%E7%82%B9%5C%22%3E%5Cn%20%20%3Ci%20class%3D%5C%22layui-icon%20layui-icon-add-1%5C%22%3E%3C%2Fi%3E%5Cn%20%20%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90%E8%8A%82%E7%82%B9%5Cn%20%20%20%20%3C%2Fbutton%3E%5Cn%20%20%3C%2Fscript%3E%5Cn%20%20%5Cn%20%20%3Cscript%20type%3D%5C%22text%2Fhtml%5C%22%20id%3D%5C%22isMenuTpl%5C%22%3E%5Cn%20%20%7B%7B%23%20%20if(d.is_menu%20%3D%3D'1')%7B%20%7D%7D%5Cn%20%20%3Cspan%20class%3D%5C%22layui-badge%20layui-bg-green%5C%22%3E%20%E6%98%AF%20%3C%2Fspan%3E%5Cn%20%20%7B%7B%23%20%20%7D%20else%20%7B%20%7D%7D%5Cn%20%20%3Cspan%20class%3D%5C%22layui-badge%20layui-bg-danger%5C%22%3E%20%E5%90%A6%20%3C%2Fspan%3E%5Cn%20%20%7B%7B%23%20%20%7D%20%7D%7D%5Cn%20%20%3C%2Fscript%3E%5Cn%20%20%5Cn%20%20%3Cscript%20type%3D%5C%22text%2Fhtml%5C%22%20id%3D%5C%22statusTpl%5C%22%3E%5Cn%20%20%7B%7B%23%20%20if(d.status%20%3D%3D'1')%7B%20%7D%7D%5Cn%20%20%3Cspan%20class%3D%5C%22layui-badge%20layui-bg-green%5C%22%3E%20%E6%98%AF%20%3C%2Fspan%3E%5Cn%20%20%7B%7B%23%20%20%7D%20else%20%7B%20%7D%7D%5Cn%20%20%3Cspan%20class%3D%5C%22layui-badge%20layui-bg-danger%5C%22%3E%20%E5%90%A6%20%3C%2Fspan%3E%5Cn%20%20%7B%7B%23%20%20%7D%20%7D%7D%5Cn%20%20%3C%2Fscript%3E%5Cn%20%20%5Cn%20%20%3Cscript%20type%3D%5C%22text%2Fhtml%5C%22%20id%3D%5C%22iconTpl%5C%22%3E%5Cn%20%20%3Cspan%20class%3D%5C%22huicmf_icon%5C%22%3E%3Ci%20class%3D%5C%22layui-inline%20layui-icon%20%7B%7Bd.icon%7D%7D%5C%22%3E%3C%2Fi%3E%3C%2Fspan%3E%5Cn%20%20%3C%2Fscript%3E%5Cn%20%20%5Cn%20%20%3Cscript%20type%3D%5C%22text%2Fhtml%5C%22%20id%3D%5C%22barDemo%5C%22%3E%5Cn%20%20%3Cbutton%20class%3D%5C%22pear-btn%20pear-btn-primary%20pear-btn-sm%5C%22%20title%3D%5C%22%E7%BC%96%E8%BE%91%5C%22%5Cn%20%20data-open%3D%5C%22%7B%3A__url('system%2Fauthrule%2Fedit')%7D%3Fid%3D%7B%7Bd.id%7D%7D%5C%22%5Cn%20%20data-title%3D%5C%22%E7%BC%96%E8%BE%91%5C%22%3E%5Cn%20%20%3Ci%20class%3D%5C%22layui-icon%20layui-icon-edit%5C%22%3E%3C%2Fi%3E%5Cn%20%20%20%20%3C%2Fbutton%3E%5Cn%20%20%20%20%3Cbutton%20class%3D%5C%22pear-btn%20pear-btn-danger%20pear-btn-sm%5C%22%20title%3D%5C%22%E5%88%A0%E9%99%A4%5C%22%5Cn%20%20%20%20data-delete%3D%5C%22%7B%3A__url('system%2Fauthrule%2Fdelete')%7D%3Fid%3D%7B%7Bd.id%7D%7D%5C%22%5Cn%20%20%20%20data-title%3D%5C%22%E6%82%A8%E7%A1%AE%E5%AE%9A%E8%A6%81%E5%88%A0%E9%99%A4%E5%90%97%EF%BC%9F%5C%22%20data-reload%3D%5C%222%5C%22%3E%5Cn%20%20%20%20%3Ci%20class%3D%5C%22layui-icon%20layui-icon-delete%5C%22%3E%3C%2Fi%3E%5Cn%20%20%20%20%3C%2Fbutton%3E%5Cn%20%20%3C%2Fscript%3E%5Cn%20%20%5Cn%20%3C!--%20%E8%BF%99%E9%87%8C%E5%BC%95%E7%94%A8layui%E7%AD%89%E6%95%B0%E6%8D%AE%20--%3E%5Cn%20%20%3Cscript%3E%5Cn%20%20%20%20layui.use(%5B'table'%2C%20'jquery'%2C'treetable'%5D%2C%20function%20()%20%7B%5Cn%20%20%20%20%20%20var%20%24%20%3D%20layui.jquery%3B%5Cn%20%20%20%20%20%20var%20table%20%3D%20layui.table%3B%5Cn%20%20%20%20%20%20let%20treetable%20%3D%20layui.treetable%3B%5Cn%20%20%20%20%20%20var%20renderTable%20%3D%20function()%7B%5Cn%20%20%20%20%20%20%20%20layer.load(2)%3B%20%20%2F%2F%E5%8A%A0%E8%BD%BD%E5%B1%82%5Cn%20%20%20%20%20%20%20%20treetable.render(%7B%5Cn%20%20%20%20%20%20%20%20%20%20treeColIndex%3A%201%2C%5Cn%20%20%20%20%20%20%20%20%20%20treeSpid%3A%200%2C%5Cn%20%20%20%20%20%20%20%20%20%20treeIdName%3A%20'title'%2C%5Cn%20%20%20%20%20%20%20%20%20%20treePidName%3A%20'pid'%2C%5Cn%20%20%20%20%20%20%20%20%20%20treeDefaultClose%3A%20false%2C%5Cn%20%20%20%20%20%20%20%20%20%20toolbar%3A%20'%23add_toolbar'%2C%5Cn%20%20%20%20%20%20%20%20%20%20defaultToolbar%3A%20%5B%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20layEvent%3A%20'refresh'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20icon%3A%20'layui-icon-refresh'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20title%3A%20'%E5%88%B7%E6%96%B0'%5Cn%20%20%20%20%20%20%20%20%20%20%7D%2C%20'filter'%2C%20'exports'%5D%2C%5Cn%20%20%20%20%20%20%20%20%20%20elem%3A%20'%23admin_table'%2C%5Cn%20%20%20%20%20%20%20%20%20%20url%3A%20%5C%22%7B%3A__url('system%2Fauthrule%2Findex')%7D%5C%22%2C%5Cn%20%20%20%20%20%20%20%20%20%20id%3A%20'testReload'%2C%5Cn%20%20%20%20%20%20%20%20%20%20done%3A%20function%20()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20layer.closeAll('loading')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%7D%2C%5Cn%20%20%20%20%20%20%20%20%20%20page%3A%20false%2C%5Cn%20%20%20%20%20%20%20%20%20%20cols%3A%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bfield%3A%20'id'%2C%20title%3A%20'ID'%2C%20width%3A%2060%2C%20align%3A%20'center'%2C%20sort%3A%20true%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfield%3A%20'title_tree'%2C%20title%3A%20'%E8%8A%82%E7%82%B9%E5%90%8D%E7%A7%B0'%2Cwidth%3A200%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfield%3A%20'node'%2C%20title%3A%20'%E8%8A%82%E7%82%B9%E8%A7%84%E5%88%99'%2Cwidth%3A300%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfield%3A%20'icon'%2C%20title%3A%20'%E5%9B%BE%E6%A0%87'%2Cwidth%3A80%2C%20templet%3A%20'%23iconTpl'%2C%20align%3A%20'center'%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfield%3A%20'is_menu'%2C%20title%3A%20'%E6%98%AF%E5%90%A6%E8%8F%9C%E5%8D%95'%2C%20templet%3A%20'%23isMenuTpl'%2C%20align%3A%20'center'%2Cwidth%3A90%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfield%3A%20'status'%2C%20title%3A%20'%E7%8A%B6%E6%80%81'%2C%20templet%3A%20'%23statusTpl'%2C%20align%3A%20'center'%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfield%3A%20'create_time'%2C%20title%3A%20'%E6%B7%BB%E5%8A%A0%E6%97%B6%E9%97%B4'%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2C%20%7Bfixed%3A%20'right'%2C%20title%3A%20'%E6%93%8D%E4%BD%9C'%2C%20toolbar%3A%20'%23barDemo'%2C%20align%3A%20'center'%2C%20width%3A%20130%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%20%20%5D%5Cn%20%20%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20renderTable()%3B%5Cn%20%20%20%20%20%20%5Cn%20%20%20%20%20%20%2F%2F%E7%9B%91%E5%90%AC%E8%A1%8C%E5%B7%A5%E5%85%B7%E4%BA%8B%E4%BB%B6%5Cn%20%20%20%20%20%20table.on('toolbar(admin_table)'%2C%20function%20(obj)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(obj.event%20%3D%3D%3D%20'refresh')%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20renderTable()%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D)%3B%5Cn%20%20%20%20%20%20%5Cn%20%20%20%20%7D)%3B%5Cn%20%20%3C%2Fscript%3E%5Cn%3C%2Fbody%3E%5Cn%3C%2Fhtml%3E%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22gf3w3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 5,
    "hits": 5,
    "comments_count": 0,
    "word_count": 364,
    "created_at": "2022-05-24T10:01:18.000Z",
    "updated_at": "2023-07-27T02:06:56.000Z",
    "content_updated_at": "2023-07-27T02:06:56.000Z",
    "published_at": "2022-05-24T10:03:57.000Z",
    "first_published_at": "2022-05-24T10:03:57.114Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1010102044,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 77623635,
    "type": "Doc",
    "slug": "qkb5iu",
    "title": "【笔记】优麒麟安装宝塔后使用php无法访问网站的解决方案",
    "description": "tags: [linux,权限,宝塔]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cccopyright_url: copyright_author: cover:前言小灰灰把本地系统更换成了优麒麟Linux系统做...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1652753589393-7b0189ae-1965-4f0a-a3ff-55de5ab397a1.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [linux,权限,宝塔]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"a4iVU\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">前言</span></h1><div class=\"ne-quote\"><p id=\"u56b24e23\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">小灰灰把本地系统更换成了优麒麟Linux系统做开发PHP，安装宝塔后始终无法访问正确的站点。整理一下问题所在。</span></p></div><h1 id=\"iS9Av\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">问题整理</span></h1><h1 id=\"AO6hv\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">1、伪静态没有正常设置</span></h1><p id=\"u60000b83\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这种情况最为简单，设置好对应的伪静态即可。</span></p><h1 id=\"y0eX4\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">2、PHP版本没有设置正确</span></h1><p id=\"u252c8dca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">开发PHP的时候的版本对应设置好即可。</span></p><h1 id=\"qBLs6\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">3、无法找到路径</span></h1><p id=\"uca05e8ad\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这种情况很有可能是从其他地方迁移过来系统后路径不正确（原代码 的根目录里面有个 user.ini配置文件）。</span></p><p id=\"u745aaf4b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">解决方案：删除掉user.ini即可。</span></p><h1 id=\"Xo4n5\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">4、404</span></h1><p id=\"u1b730aa4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">明明各种都设置正确，可是访问之后会提示404。此时很有可能程序的目录文件夹没有权限。</span></p><p id=\"u67c1cf94\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">1、更改文件夹权限</span></p><p id=\"uaef2c0f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">2、查看nginx配置的用户设置，是否有权限：</span></p><p id=\"u573f4988\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652753589393-7b0189ae-1965-4f0a-a3ff-55de5ab397a1.png\" width=\"652\" id=\"u7921f036\" class=\"ne-image\"></p><h1 id=\"IZvv0\"><span class=\"ne-text\">5、能访问静态文件，无法访问php等文件</span></h1><p id=\"ud08a4712\" class=\"ne-p\"><span class=\"ne-text\">Nginx的user和php版本里面的php-fpm配置里面的user不同。</span></p><p id=\"u4575d53b\" class=\"ne-p\"><span class=\"ne-text\">更改：php设置的-fpm：</span></p><p id=\"uf5f4f073\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/jpeg/27022430/1652753705278-0d9bedfa-7315-41ef-885f-988ad09991f6.jpeg\" width=\"641\" id=\"ubced6250\" class=\"ne-image\"></p><p id=\"ubaddb72e\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div>",
    "body": "tags: [linux,权限,宝塔]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc<br />copyright_url: <br />copyright_author: <br />cover:\n\n---\n\n<a name=\"a4iVU\"></a>\n# <br />前言\n> 小灰灰把本地系统更换成了优麒麟Linux系统做开发PHP，安装宝塔后始终无法访问正确的站点。整理一下问题所在。\n\n<a name=\"iS9Av\"></a>\n# 问题整理\n<a name=\"AO6hv\"></a>\n# 1、伪静态没有正常设置\n这种情况最为简单，设置好对应的伪静态即可。\n<a name=\"y0eX4\"></a>\n# 2、PHP版本没有设置正确\n开发PHP的时候的版本对应设置好即可。\n<a name=\"qBLs6\"></a>\n# 3、无法找到路径\n这种情况很有可能是从其他地方迁移过来系统后路径不正确（原代码 的根目录里面有个 user.ini配置文件）。<br />解决方案：删除掉user.ini即可。\n<a name=\"Xo4n5\"></a>\n# 4、404\n明明各种都设置正确，可是访问之后会提示404。此时很有可能程序的目录文件夹没有权限。<br />1、更改文件夹权限<br />2、查看nginx配置的用户设置，是否有权限：<br />![微信截图_20220517101235.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652753589393-7b0189ae-1965-4f0a-a3ff-55de5ab397a1.png#averageHue=%23f8f6f6&clientId=u1bc814c1-c3b8-4&from=paste&height=600&id=u7921f036&originHeight=600&originWidth=652&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46853&status=done&style=none&taskId=ua1a113fb-56a2-4e46-b3b2-1c8d9550cfb&title=&width=652)\n<a name=\"IZvv0\"></a>\n# 5、能访问静态文件，无法访问php等文件\nNginx的user和php版本里面的php-fpm配置里面的user不同。<br />更改：php设置的-fpm：<br />![222.jpg](https://cdn.nlark.com/yuque/0/2022/jpeg/27022430/1652753705278-0d9bedfa-7315-41ef-885f-988ad09991f6.jpeg#averageHue=%23f4f3f3&clientId=u1bc814c1-c3b8-4&from=paste&height=589&id=ubced6250&originHeight=589&originWidth=641&originalType=binary&ratio=1&rotation=0&showTitle=false&size=42144&status=done&style=none&taskId=ub9443edf-2760-4891-8e6e-a1a16dc6dd3&title=&width=641)\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [linux,权限,宝塔]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ua0c50dec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p id=\"ud4e1d1fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">cover:</span></p><hr id=\"Q4x7J\" class=\"ne-hr\"><h1 id=\"a4iVU\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\"><br /></span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">前言</span></h1><div class=\"ne-quote\"><p id=\"u56b24e23\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">小灰灰把本地系统更换成了优麒麟Linux系统做开发PHP，安装宝塔后始终无法访问正确的站点。整理一下问题所在。</span></p></div><h1 id=\"iS9Av\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">问题整理</span></h1><h1 id=\"AO6hv\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">1、伪静态没有正常设置</span></h1><p id=\"u60000b83\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这种情况最为简单，设置好对应的伪静态即可。</span></p><h1 id=\"y0eX4\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">2、PHP版本没有设置正确</span></h1><p id=\"u252c8dca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">开发PHP的时候的版本对应设置好即可。</span></p><h1 id=\"qBLs6\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">3、无法找到路径</span></h1><p id=\"uca05e8ad\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这种情况很有可能是从其他地方迁移过来系统后路径不正确（原代码 的根目录里面有个 user.ini配置文件）。</span></p><p id=\"u745aaf4b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">解决方案：删除掉user.ini即可。</span></p><h1 id=\"Xo4n5\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">4、404</span></h1><p id=\"u1b730aa4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">明明各种都设置正确，可是访问之后会提示404。此时很有可能程序的目录文件夹没有权限。</span></p><p id=\"u67c1cf94\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">1、更改文件夹权限</span></p><p id=\"uaef2c0f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">2、查看nginx配置的用户设置，是否有权限：</span></p><p id=\"u573f4988\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652753589393-7b0189ae-1965-4f0a-a3ff-55de5ab397a1.png\" width=\"652\" id=\"u7921f036\" class=\"ne-image\"></p><h1 id=\"IZvv0\"><span class=\"ne-text\">5、能访问静态文件，无法访问php等文件</span></h1><p id=\"ud08a4712\" class=\"ne-p\"><span class=\"ne-text\">Nginx的user和php版本里面的php-fpm配置里面的user不同。</span></p><p id=\"u4575d53b\" class=\"ne-p\"><span class=\"ne-text\">更改：php设置的-fpm：</span></p><p id=\"uf5f4f073\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/jpeg/27022430/1652753705278-0d9bedfa-7315-41ef-885f-988ad09991f6.jpeg\" width=\"641\" id=\"ubced6250\" class=\"ne-image\"></p><p id=\"ubaddb72e\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [linux,权限,宝塔]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span><span data-lake-id=\"u43283e24\" id=\"u43283e24\" style=\"color: rgb(38, 38, 38)\">学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"ub9b18f73\" id=\"ub9b18f73\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p data-lake-id=\"ua0c50dec\" id=\"ua0c50dec\"><span data-lake-id=\"u6cc9d604\" id=\"u6cc9d604\" style=\"color: rgb(38, 38, 38)\">copyright_url: <br /></span><span data-lake-id=\"ub936ee2e\" id=\"ub936ee2e\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span></p><p data-lake-id=\"ud4e1d1fe\" id=\"ud4e1d1fe\"><span data-lake-id=\"u8793279d\" id=\"u8793279d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">cover:</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Q4x7J%22%7D\"></card><h1 data-lake-id=\"a4iVU\" id=\"a4iVU\"><span data-lake-id=\"uf2ed16b6\" id=\"uf2ed16b6\" style=\"color: rgb(51, 51, 51)\"><br /></span><span data-lake-id=\"u9a9d4f3c\" id=\"u9a9d4f3c\" style=\"color: rgb(51, 51, 51)\">前言</span></h1><blockquote data-lake-id=\"u8e3ec3a1\" id=\"u8e3ec3a1\"><p data-lake-id=\"u56b24e23\" id=\"u56b24e23\"><span data-lake-id=\"udd0cf462\" id=\"udd0cf462\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">小灰灰把本地系统更换成了优麒麟Linux系统做开发PHP，安装宝塔后始终无法访问正确的站点。整理一下问题所在。</span></p></blockquote><h1 data-lake-id=\"iS9Av\" id=\"iS9Av\"><span data-lake-id=\"u8cdcf21d\" id=\"u8cdcf21d\" style=\"color: rgb(51, 51, 51)\">问题整理</span></h1><h1 data-lake-id=\"AO6hv\" id=\"AO6hv\"><span data-lake-id=\"u6fb02c07\" id=\"u6fb02c07\" style=\"color: rgb(51, 51, 51)\">1、伪静态没有正常设置</span></h1><p data-lake-id=\"u60000b83\" id=\"u60000b83\"><span data-lake-id=\"u5e6e2c88\" id=\"u5e6e2c88\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">这种情况最为简单，设置好对应的伪静态即可。</span></p><h1 data-lake-id=\"y0eX4\" id=\"y0eX4\"><span data-lake-id=\"u7bfc2c96\" id=\"u7bfc2c96\" style=\"color: rgb(51, 51, 51)\">2、PHP版本没有设置正确</span></h1><p data-lake-id=\"u252c8dca\" id=\"u252c8dca\"><span data-lake-id=\"u2e39c825\" id=\"u2e39c825\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">开发PHP的时候的版本对应设置好即可。</span></p><h1 data-lake-id=\"qBLs6\" id=\"qBLs6\"><span data-lake-id=\"u55f5d27d\" id=\"u55f5d27d\" style=\"color: rgb(51, 51, 51)\">3、无法找到路径</span></h1><p data-lake-id=\"uca05e8ad\" id=\"uca05e8ad\"><span data-lake-id=\"u039803c7\" id=\"u039803c7\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">这种情况很有可能是从其他地方迁移过来系统后路径不正确（原代码 的根目录里面有个 user.ini配置文件）。</span></p><p data-lake-id=\"u745aaf4b\" id=\"u745aaf4b\"><span data-lake-id=\"u71542a5d\" id=\"u71542a5d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">解决方案：删除掉user.ini即可。</span></p><h1 data-lake-id=\"Xo4n5\" id=\"Xo4n5\"><span data-lake-id=\"uf4f49333\" id=\"uf4f49333\" style=\"color: rgb(51, 51, 51)\">4、404</span></h1><p data-lake-id=\"u1b730aa4\" id=\"u1b730aa4\"><span data-lake-id=\"uaa09c00e\" id=\"uaa09c00e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">明明各种都设置正确，可是访问之后会提示404。此时很有可能程序的目录文件夹没有权限。</span></p><p data-lake-id=\"u67c1cf94\" id=\"u67c1cf94\"><span data-lake-id=\"u24e1caac\" id=\"u24e1caac\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">1、更改文件夹权限</span></p><p data-lake-id=\"uaef2c0f9\" id=\"uaef2c0f9\"><span data-lake-id=\"u996c8524\" id=\"u996c8524\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">2、查看nginx配置的用户设置，是否有权限：</span></p><p data-lake-id=\"u573f4988\" id=\"u573f4988\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652753589393-7b0189ae-1965-4f0a-a3ff-55de5ab397a1.png%22%2C%22taskId%22%3A%22ua1a113fb-56a2-4e46-b3b2-1c8d9550cfb%22%2C%22clientId%22%3A%22u1bc814c1-c3b8-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A652%2C%22height%22%3A600%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220517101235.png%22%2C%22size%22%3A46853%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A652%2C%22originHeight%22%3A600%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22NGINX%20%E7%AE%A1%E7%90%86%20%E6%9C%8D%E5%8A%A1%20%E6%8F%90%E7%A4%BA%3ACTRL%2BF%20%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%2CCTRL%2BS%E4%BF%9D%E5%AD%98%2CCTRL%2BH%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2!%20HUI%20HUI%3B%20USER%20%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%202%20ER_PROCESSES%20AUTO%3B%20WOM%20FOR_LOG%20%2FWWW%2FWWWLOGS%2FNGINX_ERROR.LOG%20CRIT%3B%20%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC%20%2FWWW%2FSERVER%2FNGINX%2FLOGS%2FNGINX.PID%3B%20WORKER_RLIMIT_NOFILE%2051200%3B%20%E6%80%A7%E8%83%BD%E8%B0%83%E6%95%B4%20EVENTS%208%20J%20%E8%B4%9F%E8%BD%BD%E7%8A%B6%E6%80%81%20USE%20EPOLL%3B%2018%20WORKER_CONNECTIONS%2051200%3B%20%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%20MULTI_ACCEPT%20ON%3B%20%E4%BA%86%20HTTP%20MIME.TYPES%3B%20INCLUDE%20%20%23INCLUDE%20LUAWAF.CONF%3B%2017%2018%20INCLUDE%20PROXY.CONF%3B%2019%20%E4%BF%9D%E5%AD%98%20%E6%AD%A4%E5%A4%84%E4%B8%BANGINX%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%2C%E8%8B%A5%E6%82%A8%E4%B8%8D%E4%BA%86%E8%A7%A3%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%2C%E8%AF%B7%E5%8B%BF%E9%9A%8F%E6%84%8F%E4%BF%AE%E6%94%B9.%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A17.283546%2C%22y%22%3A8.186191%2C%22width%22%3A63.968204%2C%22height%22%3A15.753951%2C%22text%22%3A%22NGINX%20%E7%AE%A1%E7%90%86%22%7D%2C%7B%22x%22%3A16.776695%2C%22y%22%3A48.27168%2C%22width%22%3A25.945431000000003%2C%22height%22%3A13.794695999999995%2C%22text%22%3A%22%E6%9C%8D%E5%8A%A1%22%7D%2C%7B%22x%22%3A122.41275%2C%22y%22%3A51.15079%2C%22width%22%3A308.56967%2C%22height%22%3A15.226240000000004%2C%22text%22%3A%22%E6%8F%90%E7%A4%BA%3ACTRL%2BF%20%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%2CCTRL%2BS%E4%BF%9D%E5%AD%98%2CCTRL%2BH%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2!%22%7D%2C%7B%22x%22%3A200.76021%2C%22y%22%3A78.736824%2C%22width%22%3A49.728440000000006%2C%22height%22%3A11.865735999999998%2C%22text%22%3A%22HUI%20HUI%3B%22%7D%2C%7B%22x%22%3A167.08928%2C%22y%22%3A80.68112%2C%22width%22%3A24.350660000000005%2C%22height%22%3A9.273805999999993%2C%22text%22%3A%22USER%22%7D%2C%7B%22x%22%3A16.747332%2C%22y%22%3A88.732506%2C%22width%22%3A50.584968%2C%22height%22%3A14.305358999999996%2C%22text%22%3A%22%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%22%7D%2C%7B%22x%22%3A149.86247%2C%22y%22%3A95.81055%2C%22width%22%3A7.3792100000000005%2C%22height%22%3A15.28215999999999%2C%22text%22%3A%222%22%7D%2C%7B%22x%22%3A196.48871%2C%22y%22%3A97.20029%2C%22width%22%3A101.08041%2C%22height%22%3A11.83245500000001%2C%22text%22%3A%22ER_PROCESSES%20AUTO%3B%22%7D%2C%7B%22x%22%3A166.58858%2C%22y%22%3A99.091515%2C%22width%22%3A19.89403999999999%2C%22height%22%3A9.386595%2C%22text%22%3A%22WOM%22%7D%2C%7B%22x%22%3A183.34364%2C%22y%22%3A114.52657%2C%22width%22%3A38.77964%2C%22height%22%3A13.002444999999994%2C%22text%22%3A%22FOR_LOG%22%7D%2C%7B%22x%22%3A232.44923%2C%22y%22%3A114.60946%2C%22width%22%3A210.79824000000002%2C%22height%22%3A12.715980000000002%2C%22text%22%3A%22%2FWWW%2FWWWLOGS%2FNGINX_ERROR.LOG%20CRIT%3B%22%7D%2C%7B%22x%22%3A18.664312%2C%22y%22%3A128.77779%2C%22width%22%3A48.652088000000006%2C%22height%22%3A13.807490000000001%2C%22text%22%3A%22%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC%22%7D%2C%7B%22x%22%3A232.24817%2C%22y%22%3A132.49324%2C%22width%22%3A199.41806%2C%22height%22%3A13.227400000000017%2C%22text%22%3A%22%2FWWW%2FSERVER%2FNGINX%2FLOGS%2FNGINX.PID%3B%22%7D%2C%7B%22x%22%3A166.27165%2C%22y%22%3A150.18675%2C%22width%22%3A162.84221%2C%22height%22%3A13.649020000000007%2C%22text%22%3A%22WORKER_RLIMIT_NOFILE%2051200%3B%22%7D%2C%7B%22x%22%3A18.3711%2C%22y%22%3A168.61682%2C%22width%22%3A49.964690000000004%2C%22height%22%3A14.608810000000005%2C%22text%22%3A%22%E6%80%A7%E8%83%BD%E8%B0%83%E6%95%B4%22%7D%2C%7B%22x%22%3A165.69653%2C%22y%22%3A187.98053%2C%22width%22%3A37.66512%2C%22height%22%3A9.483400000000017%2C%22text%22%3A%22EVENTS%22%7D%2C%7B%22x%22%3A148.99466%2C%22y%22%3A202.43251%2C%22width%22%3A9.744609999999994%2C%22height%22%3A14.656739999999985%2C%22text%22%3A%228%22%7D%2C%7B%22x%22%3A188.69826%2C%22y%22%3A205.25142%2C%22width%22%3A9.676680000000005%2C%22height%22%3A12.505490000000009%2C%22text%22%3A%22J%22%7D%2C%7B%22x%22%3A18.402971%2C%22y%22%3A208.92647%2C%22width%22%3A49.418135%2C%22height%22%3A14.132130000000018%2C%22text%22%3A%22%E8%B4%9F%E8%BD%BD%E7%8A%B6%E6%80%81%22%7D%2C%7B%22x%22%3A215.17827%2C%22y%22%3A222.67693%2C%22width%22%3A58.87468000000001%2C%22height%22%3A12.029410000000013%2C%22text%22%3A%22USE%20EPOLL%3B%22%7D%2C%7B%22x%22%3A145.81223%2C%22y%22%3A239.98885%2C%22width%22%3A12.401900000000012%2C%22height%22%3A18.236220000000003%2C%22text%22%3A%2218%22%7D%2C%7B%22x%22%3A212.44295%2C%22y%22%3A240.72227%2C%22width%22%3A153.06105000000002%2C%22height%22%3A12.637820000000005%2C%22text%22%3A%22WORKER_CONNECTIONS%2051200%3B%22%7D%2C%7B%22x%22%3A18.232485%2C%22y%22%3A248.78265%2C%22width%22%3A49.87842500000001%2C%22height%22%3A14.87545%2C%22text%22%3A%22%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%22%7D%2C%7B%22x%22%3A212.77092%2C%22y%22%3A259.58737%2C%22width%22%3A98.52214000000004%2C%22height%22%3A11.754429999999957%2C%22text%22%3A%22MULTI_ACCEPT%20ON%3B%22%7D%2C%7B%22x%22%3A188.26762%2C%22y%22%3A275.86124%2C%22width%22%3A10.629960000000011%2C%22height%22%3A14.62218999999999%2C%22text%22%3A%22%E4%BA%86%22%7D%2C%7B%22x%22%3A165.83128%2C%22y%22%3A313.22397%2C%22width%22%3A25.148590000000013%2C%22height%22%3A11.028500000000008%2C%22text%22%3A%22HTTP%22%7D%2C%7B%22x%22%3A296.7677%2C%22y%22%3A348.79092%2C%22width%22%3A68.61990000000003%2C%22height%22%3A12.348329999999976%2C%22text%22%3A%22MIME.TYPES%3B%22%7D%2C%7B%22x%22%3A213.80913%2C%22y%22%3A349.114%2C%22width%22%3A44.27836999999997%2C%22height%22%3A11.564070000000015%2C%22text%22%3A%22INCLUDE%22%7D%2C%7B%22x%22%3A189.78743%2C%22y%22%3A365.6427%2C%22width%22%3A124.88212999999999%2C%22height%22%3A13.054200000000037%2C%22text%22%3A%22%20%23INCLUDE%20LUAWAF.CONF%3B%22%7D%2C%7B%22x%22%3A143.17216%2C%22y%22%3A366.08957%2C%22width%22%3A14.925730000000016%2C%22height%22%3A12.577060000000017%2C%22text%22%3A%2217%22%7D%2C%7B%22x%22%3A144.16826%2C%22y%22%3A385.33316%2C%22width%22%3A13.309509999999989%2C%22height%22%3A11.333439999999996%2C%22text%22%3A%2218%22%7D%2C%7B%22x%22%3A189.90773%2C%22y%22%3A402.6588%2C%22width%22%3A114.74271999999999%2C%22height%22%3A12.008160000000032%2C%22text%22%3A%22INCLUDE%20PROXY.CONF%3B%22%7D%2C%7B%22x%22%3A144.31393%2C%22y%22%3A402.82523%2C%22width%22%3A13.427019999999999%2C%22height%22%3A12.464110000000005%2C%22text%22%3A%2219%22%7D%2C%7B%22x%22%3A134.28842%2C%22y%22%3A442.1786%2C%22width%22%3A24.429460000000006%2C%22height%22%3A13.861699999999985%2C%22text%22%3A%22%E4%BF%9D%E5%AD%98%22%7D%2C%7B%22x%22%3A139.6624%2C%22y%22%3A483.2966%2C%22width%22%3A316.9361%2C%22height%22%3A15.635999999999967%2C%22text%22%3A%22%E6%AD%A4%E5%A4%84%E4%B8%BANGINX%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%2C%E8%8B%A5%E6%82%A8%E4%B8%8D%E4%BA%86%E8%A7%A3%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%2C%E8%AF%B7%E5%8B%BF%E9%9A%8F%E6%84%8F%E4%BF%AE%E6%94%B9.%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f8f6f6%22%2C%22id%22%3A%22u7921f036%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"IZvv0\" id=\"IZvv0\"><span data-lake-id=\"uf8313e94\" id=\"uf8313e94\">5、能访问静态文件，无法访问php等文件</span></h1><p data-lake-id=\"ud08a4712\" id=\"ud08a4712\"><span data-lake-id=\"u633570c7\" id=\"u633570c7\">Nginx的user和php版本里面的php-fpm配置里面的user不同。</span></p><p data-lake-id=\"u4575d53b\" id=\"u4575d53b\"><span data-lake-id=\"u5e9e3197\" id=\"u5e9e3197\">更改：php设置的-fpm：</span></p><p data-lake-id=\"uf5f4f073\" id=\"uf5f4f073\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fjpeg%2F27022430%2F1652753705278-0d9bedfa-7315-41ef-885f-988ad09991f6.jpeg%22%2C%22taskId%22%3A%22ub9443edf-2760-4891-8e6e-a1a16dc6dd3%22%2C%22clientId%22%3A%22u1bc814c1-c3b8-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A641%2C%22height%22%3A589%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22222.jpg%22%2C%22size%22%3A42144%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A641%2C%22originHeight%22%3A589%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22PHP-7.3%E7%AE%A1%E7%90%86%20%E6%9C%8D%E5%8A%A1%20%E6%8F%90%E7%A4%BA%3ACTRL%2BF%20%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%2CCTRL%2BS%E4%BF%9D%E5%AD%98%2CCTRL%2BH%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2!%20%5BGLOBAI%5D%20%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95%20PID%2FWWW%2FSERVER%2FPHP%2F73%2FVAR%2FRUN%2FPHP-FPM.PID%20ERROR_LOG%2FWWW%2FSERVER%2FPHP%2F73%2FVAR%2FLOG%2FPHP-FPM.LOG%20%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%20LOG%20LEVEL%20NOTICE%205%206%20WWW%5D%20%E4%B8%8A%E4%BC%A0%E9%99%90%E5%88%B6%20LISTEN%2FTMP%2FPHP-CGI-73.SOCK%20LISTEN.BACKLOG8192%20%E8%B6%85%E6%97%B6%E9%99%90%E5%88%B6%20LISTEN.ALLOWED%20CLIENTS127.0.0.1%2010%20LISTEN.OWNER%20WWW%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%2011%20LISTEN.GROUP%20WWW%2012%20LISTEN.MODE0666%20FPM%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%2013%20USER%20HUI%2014%20GROUP%20WWW%20%E7%A6%81%E7%94%A8%E5%87%BD%E6%95%B0%2015%20PM%20DYNAMIC%2016PMSTATUSPATHPHPFP%20STATUS%2017%20PM.MAX_CHILDREN%20200%20%E6%80%A7%E8%83%BD%E8%B0%83%E6%95%B4%2018%20PM.START_SERS%2015%2019%20PM.MIN_SPARE%20SERVERS%2015%20%E8%B4%9F%E8%BD%BD%E7%8A%B6%E6%80%81%20%E4%BF%9D%E5%AD%98%20SESSION%E9%85%8D%E7%BD%AE%20%E6%AD%A4%E5%A4%84%E4%B8%BAPHP-FPM%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%2C%E8%8B%A5%E6%82%A8%E4%B8%8D%E4%BA%86%E8%A7%A3%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%2C%E8%AF%B7%E5%8B%BF%E4%BF%AE%E6%94%B9!%20%E6%97%A5%E5%BF%97%20%E6%85%A2%E6%97%A5%E5%BF%97%20PHPINFO%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A15.071709%2C%22y%22%3A7.9233527%2C%22width%22%3A76.918441%2C%22height%22%3A15.1757743%2C%22text%22%3A%22PHP-7.3%E7%AE%A1%E7%90%86%22%7D%2C%7B%22x%22%3A13.97364%2C%22y%22%3A47.21922%2C%22width%22%3A25.672104%2C%22height%22%3A14.438963999999999%2C%22text%22%3A%22%E6%9C%8D%E5%8A%A1%22%7D%2C%7B%22x%22%3A119.186%2C%22y%22%3A50.545002%2C%22width%22%3A308.96540000000005%2C%22height%22%3A13.761858000000004%2C%22text%22%3A%22%E6%8F%90%E7%A4%BA%3ACTRL%2BF%20%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%2CCTRL%2BS%E4%BF%9D%E5%AD%98%2CCTRL%2BH%E6%9F%A5%E6%89%BE%E6%9B%BF%E6%8D%A2!%22%7D%2C%7B%22x%22%3A162.71349%2C%22y%22%3A77.08433%2C%22width%22%3A49.93338%2C%22height%22%3A13.820490000000007%2C%22text%22%3A%22%5BGLOBAI%5D%22%7D%2C%7B%22x%22%3A14.267743%2C%22y%22%3A87.77772%2C%22width%22%3A50.188247000000004%2C%22height%22%3A13.788979999999995%2C%22text%22%3A%22%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95%22%7D%2C%7B%22x%22%3A161.59593%2C%22y%22%3A93.81503%2C%22width%22%3A267.26297%2C%22height%22%3A15.913516000000001%2C%22text%22%3A%22PID%2FWWW%2FSERVER%2FPHP%2F73%2FVAR%2FRUN%2FPHP-FPM.PID%22%7D%2C%7B%22x%22%3A161.38223%2C%22y%22%3A111.42383%2C%22width%22%3A304.68939%2C%22height%22%3A16.48348%2C%22text%22%3A%22ERROR_LOG%2FWWW%2FSERVER%2FPHP%2F73%2FVAR%2FLOG%2FPHP-FPM.LOG%22%7D%2C%7B%22x%22%3A13.628666%2C%22y%22%3A127.74618%2C%22width%22%3A51.313054%2C%22height%22%3A14.701190000000011%2C%22text%22%3A%22%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%22%7D%2C%7B%22x%22%3A161.41003%2C%22y%22%3A131.0118%2C%22width%22%3A112.10206999999997%2C%22height%22%3A13.124870000000016%2C%22text%22%3A%22LOG%20LEVEL%20NOTICE%22%7D%2C%7B%22x%22%3A146.93591%2C%22y%22%3A147.92647%2C%22width%22%3A9.576830000000001%2C%22height%22%3A14.73657%2C%22text%22%3A%225%22%7D%2C%7B%22x%22%3A147.37305%2C%22y%22%3A167.02649%2C%22width%22%3A46.04915%2C%22height%22%3A12.94792000000001%2C%22text%22%3A%226%20WWW%5D%22%7D%2C%7B%22x%22%3A15.77071%2C%22y%22%3A168.65088%2C%22width%22%3A49.14293%2C%22height%22%3A13.822100000000006%2C%22text%22%3A%22%E4%B8%8A%E4%BC%A0%E9%99%90%E5%88%B6%22%7D%2C%7B%22x%22%3A162.97446%2C%22y%22%3A183.94402%2C%22width%22%3A177.69766%2C%22height%22%3A15.92398%2C%22text%22%3A%22LISTEN%2FTMP%2FPHP-CGI-73.SOCK%22%7D%2C%7B%22x%22%3A162.54932%2C%22y%22%3A203.13753%2C%22width%22%3A128.33682000000002%2C%22height%22%3A11.946010000000001%2C%22text%22%3A%22LISTEN.BACKLOG8192%22%7D%2C%7B%22x%22%3A15.029307%2C%22y%22%3A208.24371%2C%22width%22%3A49.453053%2C%22height%22%3A13.505250000000018%2C%22text%22%3A%22%E8%B6%85%E6%97%B6%E9%99%90%E5%88%B6%22%7D%2C%7B%22x%22%3A160.01631%2C%22y%22%3A220.21722%2C%22width%22%3A208.55971000000002%2C%22height%22%3A13.451099999999997%2C%22text%22%3A%22LISTEN.ALLOWED%20CLIENTS127.0.0.1%22%7D%2C%7B%22x%22%3A140.46434%2C%22y%22%3A239.10207%2C%22width%22%3A132.05498%2C%22height%22%3A12.88046%2C%22text%22%3A%2210%20LISTEN.OWNER%20WWW%22%7D%2C%7B%22x%22%3A14.7254095%2C%22y%22%3A248.46184%2C%22width%22%3A49.1485505%2C%22height%22%3A13.566360000000032%2C%22text%22%3A%22%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%22%7D%2C%7B%22x%22%3A143.66985%2C%22y%22%3A258.11813%2C%22width%22%3A125.69695000000002%2C%22height%22%3A11.840820000000008%2C%22text%22%3A%2211%20LISTEN.GROUP%20WWW%22%7D%2C%7B%22x%22%3A144.97614%2C%22y%22%3A276.57697%2C%22width%22%3A127.22338000000002%2C%22height%22%3A10.190830000000005%2C%22text%22%3A%2212%20LISTEN.MODE0666%22%7D%2C%7B%22x%22%3A14.915439%2C%22y%22%3A288.62668%2C%22width%22%3A73.90146100000001%2C%22height%22%3A12.585620000000006%2C%22text%22%3A%22FPM%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%22%7D%2C%7B%22x%22%3A141.6202%2C%22y%22%3A295.17023%2C%22width%22%3A82.79101%2C%22height%22%3A10.13339000000002%2C%22text%22%3A%2213%20USER%20HUI%22%7D%2C%7B%22x%22%3A141.85297%2C%22y%22%3A312.65677%2C%22width%22%3A89.87373%2C%22height%22%3A12.431879999999978%2C%22text%22%3A%2214%20GROUP%20WWW%22%7D%2C%7B%22x%22%3A15.053754%2C%22y%22%3A328.57556%2C%22width%22%3A49.249526%2C%22height%22%3A13.29674%2C%22text%22%3A%22%E7%A6%81%E7%94%A8%E5%87%BD%E6%95%B0%22%7D%2C%7B%22x%22%3A141.5127%2C%22y%22%3A329.62134%2C%22width%22%3A93.75800000000001%2C%22height%22%3A12.774380000000008%2C%22text%22%3A%2215%20PM%20DYNAMIC%22%7D%2C%7B%22x%22%3A141.40375%2C%22y%22%3A347.99533%2C%22width%22%3A163.68126999999998%2C%22height%22%3A13.250789999999995%2C%22text%22%3A%2216PMSTATUSPATHPHPFP%22%7D%2C%7B%22x%22%3A329.80615%2C%22y%22%3A348.31485%2C%22width%22%3A38.72071%2C%22height%22%3A10.973479999999995%2C%22text%22%3A%22STATUS%22%7D%2C%7B%22x%22%3A141.14883%2C%22y%22%3A365.82492%2C%22width%22%3A150.37737%2C%22height%22%3A13.455379999999991%2C%22text%22%3A%2217%20PM.MAX_CHILDREN%20200%22%7D%2C%7B%22x%22%3A14.575444%2C%22y%22%3A367.9141%2C%22width%22%3A50.175115999999996%2C%22height%22%3A13.7928%2C%22text%22%3A%22%E6%80%A7%E8%83%BD%E8%B0%83%E6%95%B4%22%7D%2C%7B%22x%22%3A140.6782%2C%22y%22%3A382.6078%2C%22width%22%3A150.54064%2C%22height%22%3A14.59960000000001%2C%22text%22%3A%2218%20PM.START_SERS%2015%22%7D%2C%7B%22x%22%3A140.60652%2C%22y%22%3A400.60388%2C%22width%22%3A14.714080000000024%2C%22height%22%3A13.27303999999998%2C%22text%22%3A%2219%22%7D%2C%7B%22x%22%3A161.15152%2C%22y%22%3A402.05368%2C%22width%22%3A153.68478%2C%22height%22%3A12.034580000000005%2C%22text%22%3A%22PM.MIN_SPARE%20SERVERS%2015%22%7D%2C%7B%22x%22%3A14.537501%2C%22y%22%3A406.8811%2C%22width%22%3A50.130759000000005%2C%22height%22%3A14.666499999999985%2C%22text%22%3A%22%E8%B4%9F%E8%BD%BD%E7%8A%B6%E6%80%81%22%7D%2C%7B%22x%22%3A131.05276%2C%22y%22%3A440.74722%2C%22width%22%3A24.353279999999984%2C%22height%22%3A14.359229999999968%2C%22text%22%3A%22%E4%BF%9D%E5%AD%98%22%7D%2C%7B%22x%22%3A15.443187%2C%22y%22%3A448.5637%2C%22width%22%3A67.74593300000001%2C%22height%22%3A12.912340000000029%2C%22text%22%3A%22SESSION%E9%85%8D%E7%BD%AE%22%7D%2C%7B%22x%22%3A136.58778%2C%22y%22%3A482.90768%2C%22width%22%3A314.46932%2C%22height%22%3A14.115539999999953%2C%22text%22%3A%22%E6%AD%A4%E5%A4%84%E4%B8%BAPHP-FPM%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%2C%E8%8B%A5%E6%82%A8%E4%B8%8D%E4%BA%86%E8%A7%A3%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%2C%E8%AF%B7%E5%8B%BF%E4%BF%AE%E6%94%B9!%22%7D%2C%7B%22x%22%3A15.809489%2C%22y%22%3A487.99814%2C%22width%22%3A25.379841%2C%22height%22%3A13.999330000000043%2C%22text%22%3A%22%E6%97%A5%E5%BF%97%22%7D%2C%7B%22x%22%3A15.332279%2C%22y%22%3A528.3884%2C%22width%22%3A37.481674%2C%22height%22%3A13.915300000000002%2C%22text%22%3A%22%E6%85%A2%E6%97%A5%E5%BF%97%22%7D%2C%7B%22x%22%3A14.3425665%2C%22y%22%3A568.9493%2C%22width%22%3A41.637166500000006%2C%22height%22%3A12.987039999999979%2C%22text%22%3A%22PHPINFO%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f4f3f3%22%2C%22id%22%3A%22ubced6250%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ubaddb72e\" id=\"ubaddb72e\"><span data-lake-id=\"ude2b7350\" id=\"ude2b7350\">​</span><br></p>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 317,
    "created_at": "2022-05-17T02:04:08.000Z",
    "updated_at": "2023-08-09T02:38:56.000Z",
    "content_updated_at": "2023-08-09T02:38:56.000Z",
    "published_at": "2023-08-09T02:38:56.000Z",
    "first_published_at": "2022-05-17T02:15:11.496Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913893677,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 77499946,
    "type": "Doc",
    "slug": "woprme",
    "title": "git命令行拉取代码-git入门",
    "description": "tags: [git,命令行,入门]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcopyright_url:  github.com/gafish/gafish.github.comcopyright_aut...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686498-4e6505ed-9ce6-4102-8c33-40c9b3e80ff9.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [git,命令行,入门]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"ub1c8b387\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span class=\"ne-text\">github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">/gafish/gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">.com</span></em></p><p id=\"u9bf78c17\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">gafish</span></p><hr id=\"B5MVm\" class=\"ne-hr\"><h2 id=\"znwpE\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">Git简介</span></strong></h2><h2 id=\"ZZ7Ze\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">Git 是一种</span><span class=\"ne-text\">分布式</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">版本控制系统，它可以不受网络连接的限制，</span><em><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">加上</span></em><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">其它众多优点，目前已经成为程序开发人员做项目版本管理时的首选，非开发人员也可以用 Git 来做自己的文档版本管理工具。</span></h2><p id=\"uc0bcc402\" class=\"ne-p\"><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">2013</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">年，淘宝前端团队开始全面采用 Git 来做项目管理，我也是那个时候开始接触和使用，从一开始的零接触到现在的重度依赖，真是感叹 Git 的强大。</span></p><p id=\"uf53bf210\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">Git 的api很多，但其实平时项目中90%的需求都只需要用到几个基本的功能即可，所以本文将从 实用主义 和 深入探索 2个方面去谈谈如何在项目中使用 Git，一般来说，看完 实用主义 这一节就可以开始在项目中动手用。</span></p><p id=\"uaf8a6507\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h3 id=\"nFiXQ\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">常用操作</span></strong></h3><p id=\"u51f4e4d1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">所谓实用主义，就是掌握了以下知识就可以玩转</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，轻松应对90%以上的需求。以下是实用主义型的Git命令列表，先大致看一下</span></p><ul class=\"ne-ul\"><li id=\"u557343f8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git clone</span></li><li id=\"u40f97fe5\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git config</span></li><li id=\"ue5bf1bd4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch</span></li><li id=\"u3e9de144\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout</span></li><li id=\"u97711571\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git status</span></li><li id=\"u68ef6514\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git add</span></li><li id=\"u01e946bf\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git commit</span></li><li id=\"u3dd3cca6\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git push</span></li><li id=\"u1a3d02f0\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git pull</span></li><li id=\"uc84416b1\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git log</span></li><li id=\"u043f3cfb\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git tag</span></li></ul><p id=\"ue4333e7f\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686498-4e6505ed-9ce6-4102-8c33-40c9b3e80ff9.png\" width=\"640\" id=\"u55561295\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686664-5fc180ee-3e8c-4b88-9462-ab42b30ad2cc.png\" width=\"458\" id=\"uca453c49\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686899-ade3969a-681e-4639-950b-a70514bfb16c.png\" width=\"640\" id=\"u616000cd\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686737-ab17c403-4dc4-4566-92cb-b183855f0497.png\" width=\"640\" id=\"u27f371ab\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686998-830421b9-cb6e-4d43-bf5b-2903e5a03401.png\" width=\"581\" id=\"u11a52d81\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671687435-20cff5e6-38a9-47c6-855b-7fb6754210a1.png\" width=\"254\" id=\"u876caa69\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671687671-da8a76e6-df6d-4cf3-9a51-218ac8ab1077.png\" width=\"432\" id=\"ude0dba81\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688072-682c9f07-f473-4ee4-a827-e5a4f0c28643.png\" width=\"1028\" id=\"u9579056c\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1652671688031-09984018-a557-44bb-82aa-e2839cfd72ef.gif\" width=\"639\" id=\"u34b59f79\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688362-d3137c8d-d944-43b5-bb0f-cfae811111ab.png\" width=\"640\" id=\"u3ebbaecf\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688436-f5282664-beec-4ec5-b12d-84aaec2c25a5.png\" width=\"640\" id=\"u7bc94f9e\" class=\"ne-image\"></p><p id=\"u013003c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">接下来，将通过对：https://github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/gafish/gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em></p><p id=\"ubb2e1548\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">仓库进行实例操作，讲解如何使用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">拉取代码到提交代码的整个流程。</span></p><h4 id=\"hU2bE\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git clone</span></strong></h4><p id=\"u669474be\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">从git服务器拉取代码</span></p><p id=\"u493143da\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">clone</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> https://github.com/gafish/gafish.github.com.git</span></p><p id=\"u6b106692\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">代码</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">下载</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">完成后在当前文件夹中会有一个</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的目录，通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">cd gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令进入目录。</span></p><h4 id=\"sr54C\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git config</span></strong></h4><p id=\"u04ef9d39\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">配置开发者用户名和邮箱</span></p><p id=\"u729cb0ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">config</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> user.name gafishgit </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">config</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> user.email gafish@qqqq.com</span></p><p id=\"uc7c0a3ab\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">每次代码提交的时候都会生成一条提交记录，其中会包含当前配置的用户名和邮箱。</span></p><h4 id=\"j8uyA\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git branch</span></strong></h4><p id=\"ub7d4de2b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">创建、重命名、查看、删除项目分支，通过</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">Git</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">做项目开发时，一般都是在开发分支中进行，开发完成后合并分支到主干。</span></p><p id=\"ud04e9d58\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch daily/0.0.0</span></p><p id=\"ud0f09cea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">创建一个名为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.0</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的日常开发分支，分支名只要不包括特殊字符即可。</span></p><p id=\"u9c34d415\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -m daily</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">/0.0.0 daily/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.1</span></p><p id=\"u44f2b6ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果觉得之前的分支名不合适，可以为新建的分支重命名，重命名分支名为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span></p><p id=\"u779f24ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch</span></p><p id=\"u4be67b27\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过不带参数的branch命令可以查看当前项目分支列表</span></p><p id=\"ufa7b08eb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -d daily/0.0.1</span></p><p id=\"uabc36e04\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果分支已经完成使命则可以通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-d</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数将分支删除，这里为了继续下一步操作，暂不执行删除操作</span></p><h4 id=\"Om94a\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git checkout</span></strong></h4><p id=\"uf1fc00d3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">切换分支</span></p><p id=\"u82bc5950\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout daily/0.0.1</span></p><p id=\"u86ef9f79\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">切换到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，后续的操作将在这个分支上进行</span></p><h4 id=\"bqIRH\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git status</span></strong></h4><p id=\"ue4bc180e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">查看文件变动状态</span></p><p id=\"u8827ac2b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过任何你喜欢的编辑器对项目中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">README.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件做一些改动，保存。</span></p><p id=\"u69b0d0c7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">status</span></p><p id=\"u4193a0de\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git status</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令可以看到文件当前状态</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Changes not staged for commit:</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">(</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">改动文件未提交到暂存区</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">)</span></p><pre data-language=\"plain\" id=\"ajgEE\" class=\"ne-codeblock language-plain\"><code>On branch daily/0.0.1Changes not staged for commit: (use &quot;git add ...&quot; to update what will be committed) (use &quot;git checkout -- ...&quot; to discard changes in working directory) modified: README.mdno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</code></pre><h4 id=\"XOHpf\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git add</span></strong></h4><p id=\"u3b892f64\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">添加文件变动到暂存区</span></p><div class=\"ne-quote\"><p id=\"u33dcde1e\" class=\"ne-p\"><span class=\"ne-text\">git add README.md</span></p></div><p id=\"u6fe99313\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过指定文件名 README.md可以将该文件添加到暂存区，如果想添加所有文件可用git add .命令，这时候可通过git status看到文件当前状态Changes to be committed:(</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件已提交到暂存区</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">)</span></p><pre data-language=\"plain\" id=\"fTNkL\" class=\"ne-codeblock language-plain\"><code>On branch daily/0.0.1Changes to be committed: (use &quot;git reset HEAD ...&quot; to unstage) modified: README.md</code></pre><h4 id=\"kYDQ6\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git commit</span></strong></h4><p id=\"ub127b611\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">提交文件变动到版本库</span></p><div class=\"ne-quote\"><p id=\"ube2d5997\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">m </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'这里写提交原因'</span></p></div><p id=\"u7154444c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-m</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数可直接在命令行里输入提交描述文本</span></p><h4 id=\"z13vY\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git push</span></strong></h4><p id=\"u05e02135\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将本地的代码改动推送到服务器</span></p><div class=\"ne-quote\"><p id=\"ud1f0598a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">push</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> origin daily/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span></p></div><p id=\"udc6d9774\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">origin</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指代的是当前的git服务器地址，这行命令的意思是把</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支推送到服务器，当看到命令行返回如下字符表示推送成功了。</span></p><p id=\"u469890ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Counting objects: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, done.Delta compression </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">using</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> up </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">to</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">8</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> threads.Compressing objects: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">100</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">%</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), done.Writing objects: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">100</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">%</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">267</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> bytes </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">|</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> bytes</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">s, done.Total </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (delta </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), reused </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (delta </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">)remote: Resolving deltas: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">100</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">%</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), completed </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">with</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">local</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> objects.To https:</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">github.com</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gafish</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gafish.github.com.git </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> [</span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">new</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> branch] daily</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">&gt;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> daily</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.1</span></p><p id=\"ub3291b54\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">现在我们回到Github网站的项目首页，点击</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Branch:master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">下拉按钮，就会看到刚才推送的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/00.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支了</span></p><h4 id=\"kiAyA\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git pull</span></strong></h4><p id=\"uc035e237\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将服务器上的最新代码拉取到本地</span></p><div class=\"ne-quote\"><p id=\"u5e6a5147\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git pull origin daily/0.0.1</span></p></div><p id=\"ud5abd41f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果其它项目成员对项目做了改动并推送到服务器，我们需要将最新的改动更新到本地，这里我们来模拟一下这种情况。</span></p><p id=\"u5e74cbb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">进入Github网站的项目首页，再进入</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，在线对</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">README.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件做一些修改并保存，然后在命令中执行以上命令，它将把刚才在线修改的部分拉取到本地，用编辑器打开</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">README.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，你会发现文件已经跟线上的内容同步了。</span></p><p id=\"u3e529d73\" class=\"ne-p\"><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果线上代码做了变动，而你本地的代码也有变动，拉取的代码就有可能会跟你本地的改动冲突，一般情况下</span></em><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">会自动处理这种冲突合并，但如果改动的是同一行，那就需要手动来合并代码，编辑文件，保存最新的改动，再通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add .</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git commit -m 'xxx'</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">来提交合并。</span></p><h4 id=\"cchU9\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git log</span></strong></h4><p id=\"u33053d39\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">查看版本提交记录</span></p><div class=\"ne-quote\"><p id=\"u33032517\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span></p></div><p id=\"u17a51880\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过以上命令，我们可以查看整个项目的版本提交记录，它里面包含了</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">提交人</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">日期</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">提交原因</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">等信息，得到的结果如下：</span></p><pre data-language=\"plain\" id=\"krVMK\" class=\"ne-codeblock language-plain\"><code>commit c334730f8dba5096c54c8ac04fdc2b31ede7107aAuthor: gafish qqqq.com&gt;Date: Wed Jan 11 09:44:13 2017 +0800 Update README.mdcommit ba6e3d21fcb1c87a718d2a73cdd11261eb672b2aAuthor: gafish qqqq.com&gt;Date: Wed Jan 11 09:31:33 2017 +0800 test.....</code></pre><p id=\"ub4240250\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">提交记录可能会非常多，按</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">J</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">键往下翻，按</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">K</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">键往上翻，按</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Q</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">键退出查看</span></p><h4 id=\"ij1Fw\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git tag</span></strong></h4><p id=\"u0af3dce5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">为项目标记里程碑</span></p><div class=\"ne-quote\"><p id=\"u50bdfe8c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git tag publish/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">push</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> origin publish/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span></p></div><p id=\"u0d4b289d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">当我们完成某个功能需求准备发布上线时，应该将此次完整的项目代码做个标记，并将这个标记好的版本发布到线上，这里我们以</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">publish/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为标记名并发布，当看到命令行返回如下内容则表示发布成功了</span></p><pre data-language=\"plain\" id=\"sdZlr\" class=\"ne-codeblock language-plain\"><code>Total 0 (delta 0), reused 0 (delta 0)To https://github.com/gafish/gafish.github.com.git * [new tag] publish/0.0.1 -&gt; publish/0.0.1</code></pre><h4 id=\"AaGyD\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">.gitignore</span></strong></h4><p id=\"u6f5d3f34\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">设置哪些内容不需要推送到服务器，这是一个配置文件</span></p><div class=\"ne-quote\"><p id=\"u75957f6f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">touch</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> .gitignore</span></p></div><p id=\"u16b37d28\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.gitignore</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">不是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令，而在项目中的一个文件，通过设置</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.gitignore</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的内容告诉</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">哪些文件应该被忽略不需要推送到服务器，通过以上命令可以创建一个</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.gitignore</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件，并在编辑器中打开文件，每一行代表一个要忽略的文件或目录，如：</span></p><p id=\"ud900ec4b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">demo.htmlbuild/</span></p><p id=\"ua92ae132\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">以上内容的意思是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将忽略</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">demo.html</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件 和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">build/</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">目录，这些内容不会被推送到服务器上</span></p><h4 id=\"OiJ4A\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">小结</span></strong></h4><p id=\"u05ff66c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过掌握以上这些基本命令就可以在项目中开始用起来了，如果追求实用，那关于</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的学习就可以到此结束了，偶尔遇到的问题也基本上通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Google</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">也能找到答案，如果想深入探索</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的高阶功能，那就继续往下看</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">深入探索</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">部分。</span></p><h2 id=\"cfGyn\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">深入探索</span></strong></h2><h3 id=\"X8AGF\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">基本概念</span></strong></h3><h4 id=\"lKJlL\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">工作区(Working Directory)</span></strong></h4><p id=\"u54ad0dd3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">就是你在电脑里能看到的目录，比如上文中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件夹就是一个工作区</span></p><h4 id=\"zkHCY\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">本地版本库(Local Repository)</span></strong></h4><p id=\"ub644b29a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">工作区有一个隐藏目录</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，这个不算工作区，而是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的版本库。</span></p><h4 id=\"Oyeyy\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">暂存区(stage)</span></strong></h4><p id=\"ub0b39d97\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">本地版本库里存了很多东西，其中最重要的就是称为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">stage</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">(或者叫index)的暂存区，还有</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为我们自动创建的第一个分支</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，以及指向</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的一个指针叫</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">。</span></p><h4 id=\"QYjtd\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">远程版本库(Remote Repository)</span></strong></h4><p id=\"uad0e3001\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">一般指的是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">服务器上所对应的仓库，本文的示例所在的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">github</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">仓库就是一个远程版本库</span></p><h4 id=\"Htx3L\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">以上概念之间的关系</span></strong></h4><p id=\"u38d6c2ff\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">暂存区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">本地版本库</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">远程版本库</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">之间几个常用的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作流程如下图所示：</span></p><h4 id=\"o2V71\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">分支(Branch)</span></strong></h4><p id=\"u7b286c2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支是为了将修改记录的整个流程分开存储，让分开的分支不受其它分支的影响，所以在同一个数据库里可以同时进行多个不同的修改</span></p><h4 id=\"VbFM2\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">主分支(Master)</span></strong></h4><p id=\"uced4288a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">前面提到过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为我们自动创建的第一个分支，也叫主分支，其它分支开发完成后都要合并到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span></p><h4 id=\"LgqU3\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">标签(Tag)</span></strong></h4><p id=\"u586c4ab9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">标签是用于标记特定的点或提交的历史，通常会用来标记发布版本的名称或版本号(如：</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">publish/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">)，虽然标签看起来有点像分支，但打上标签的提交是固定的，不能随意的改动，参见上图中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">1.0</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">2.0</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">3.0</span></p><h4 id=\"GVAy8\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">HEAD</span></strong></h4><p id=\"u406e8282\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指向的就是当前分支的最新提交</span></p><p id=\"u688f3f80\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">以上概念了解的差不多，那就可以继续往下看，下面将以具体的操作类型来讲解</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">Git</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">的高阶用法</span></p><h3 id=\"zrQBZ\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">操作文件</span></strong></h3><h4 id=\"u8iQW\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git add</span></strong></h4><p id=\"ue7a35db2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">添加文件到暂存区</span></p><p id=\"uc4872ebf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -i</span></p><p id=\"u224639a3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过此命令将打开交互式子命令系统，你将看到如下子命令</span></p><p id=\"u05731429\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Commands</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: status </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">update</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: revert </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">4</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> untracked </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">5</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: patch </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">6</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: diff </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">7</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: quit </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">8</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: help</span></p><p id=\"u96163500\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过输入序列号或首字母可以选择相应的功能，具体的功能解释如下：</span></p><ul class=\"ne-ul\"><li id=\"u5c7520d1\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">status</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：功能上和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -i</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">相似，没什么鸟用</span></li><li id=\"u4a396b34\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：详见下方</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -u</span></li><li id=\"u6f0f9dc9\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">revert</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：把已经添加到暂存区的文件从暂存区剔除，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似</span></li><li id=\"u9ff5d6fe\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">add untracked</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：可以把新增的文件添加到暂存区，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似</span></li><li id=\"uf3ddd677\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">patch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：详见下方</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -p</span></li><li id=\"uceeb5dd9\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">diff</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：比较暂存区文件和本地版本库的差异，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似</span></li><li id=\"ub1989fc7\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">quit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：退出</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -i</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令系统</span></li><li id=\"u49a30b9e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">help</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：查看帮助信息</span></li></ul><p id=\"ufbf2031d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -p</span></p><p id=\"u3b48c464\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">直接进入交互命令中最有用的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">patch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">模式</span></p><p id=\"u23025046\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">这是交互命令中最有用的模式，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似，选择后</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">会显示这些文件的当前内容与本地版本库中的差异，然后您可以自己决定是否添加这些修改到暂存区，在命令行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Stage deletion [y,n,q,a,d,/,?]?</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">后输入</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">y,n,q,a,d,/,?</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">其中一项选择操作方式，具体功能解释如下：</span></p><ul class=\"ne-ul\"><li id=\"u708cbd22\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">y：接受修改</span></li><li id=\"ue422ef97\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">n：忽略修改</span></li><li id=\"ucdafa2b8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">q：退出当前命令</span></li><li id=\"u9c27b4e8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">a：添加修改</span></li><li id=\"uef5c2434\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">d：放弃修改</span></li><li id=\"u9d562f64\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/：通过正则表达式匹配修改内容</span></li><li id=\"ue7e5bd19\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">?：查看帮助信息</span></li></ul><p id=\"ub0ef6e63\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -u</span></p><p id=\"ub2694136\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">直接进入交互命令中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">模式</span></p><p id=\"u04bfcb3d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">它会先列出工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">删除</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件列表，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">新增</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件不会被显示，在命令行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Update&gt;&gt;</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">后输入相应的列表序列号表示选中该项，回车继续选择，如果已选好，直接回车回到命令主界面</span></p><div class=\"ne-quote\"><p id=\"u634ca6c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--ignore-removal .</span></em></p></div><p id=\"u0adc6a34\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">添加工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">新增</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件列表，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">删除</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件不会被添加</span></p><h4 id=\"wUErY\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git commit</span></strong></h4><p id=\"u0a3e5f3d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">把暂存区的文件提交到本地版本库</span></p><div class=\"ne-quote\"><p id=\"u49ce2962\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">m </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'第一行提交原因'</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">m </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'第二行提交原因'</span></p></div><p id=\"u0dc43b76\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">不打开编辑器，直接在命令行中输入多行提交原因</span></p><div class=\"ne-quote\"><p id=\"u9b2690e3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">am </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'提交原因'</span></p></div><p id=\"ua18372b0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">删除</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件提交到本地版本库，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">新增</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件不会被提交</span></p><div class=\"ne-quote\"><p id=\"uf969fc69\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--amend -m '提交原因'</span></em></p></div><p id=\"ua01e34bd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改最新一条提交记录的提交原因</span></p><div class=\"ne-quote\"><p id=\"u7dbeede4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">C HEAD</span></p></div><p id=\"u73e06722\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将当前文件改动提交到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或当前分支的历史ID</span></p><h4 id=\"W0moe\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git mv</span></strong></h4><p id=\"ud05fe7fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">移动或重命名文件、目录</span></p><div class=\"ne-quote\"><p id=\"ub894e180\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git mv </span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">a</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.md</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">b</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.md</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -f</span></p></div><p id=\"u5b6dfddf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">a.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">重命名为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，同时添加变动到暂存区，加</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-f</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数可以强制重命名，相比用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">mv a.md b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令省去了</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作</span></p><h4 id=\"h2LDP\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git rm</span></strong></h4><p id=\"u2273f58a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">从工作区和暂存区移除文件</span></p><div class=\"ne-quote\"><p id=\"u35a7e783\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rm </span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">b</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.md</span></p></div><p id=\"u1ac08fa7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从工作区和暂存区移除文件</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，同时添加变动到暂存区，相比用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">rm b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令省去了</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作</span></p><div class=\"ne-quote\"><p id=\"u46b41ec7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rm </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">src</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">/ -r</span></p></div><p id=\"u4ce4471e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">允许从工作区和暂存区移除目录</span></p><h4 id=\"ZmENC\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git status</span></strong></h4><div class=\"ne-quote\"><p id=\"u37517192\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">status</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -s</span></p></div><p id=\"uc28a6e20\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">以简短方式查看工作区和暂存区文件状态，示例如下：</span></p><p id=\"u59a16462\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">M demo.html</span></p><p id=\"u54a193e6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">?? test.html</span></p><div class=\"ne-quote\"><p id=\"u0ab7f336\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">status</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--ignored</span></em></p></div><p id=\"u524e75f2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看工作区和暂存区文件状态，包括被忽略的文件</span></p><h3 id=\"wFWwx\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">操作分支</span></strong></h3><h4 id=\"In8Ll\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git branch</span></strong></h4><p id=\"u7da8d366\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">查看、创建、删除分支</span></p><div class=\"ne-quote\"><p id=\"u78c74458\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">a</span></p></div><p id=\"u8e1ef593\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看本地版本库和远程版本库上的分支列表</span></p><div class=\"ne-quote\"><p id=\"u2a0ca088\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -r</span></p></div><p id=\"ua12b816e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看远程版本库上的分支列表，</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">加上</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-d</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数可以删除远程版本库上的分支</span></p><div class=\"ne-quote\"><p id=\"uf6674e0a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -D</span></p></div><p id=\"u3b7f1d50\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支未提交到本地版本库前强制删除分支</span></p><div class=\"ne-quote\"><p id=\"u756dd566\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -vv</span></p></div><p id=\"u6e4807b9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看带有最后提交id、最近提交原因等信息的本地版本库分支列表</span></p><h4 id=\"qNKmF\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git merge</span></strong></h4><p id=\"ue5826302\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将其它分支合并到当前分支</span></p><div class=\"ne-quote\"><p id=\"u729e1bd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">merge</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--squash</span></em></p></div><p id=\"uc09f159f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将待合并分支上的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">commit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并成一个新的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">commit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">放入当前分支，适用于待合并分支的提交记录不需要保留的情况</span></p><div class=\"ne-quote\"><p id=\"ub361e875\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git merge --no-ff</span></p></div><p id=\"u45bf2beb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">默认情况下，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">执行&quot;</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">快进式合并</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">&quot;(fast-farward merge)，会直接将</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支指向</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Develop</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，使用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">--no-ff</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数后，会执行正常合并，在</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支上生成一个新节点，保证版本演进更清晰。</span></p><div class=\"ne-quote\"><p id=\"ufae39399\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">merge</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--no-edit</span></em></p></div><p id=\"ub829de51\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">在没有冲突的情况下合并，不想手动编辑提交原因，而是用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">自动生成的类似</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Merge branch 'test'</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文字直接提交</span></p><h4 id=\"SPORG\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git checkout</span></strong></h4><p id=\"u6a1d32c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">切换分支</span></p><div class=\"ne-quote\"><p id=\"ufb1bb3f1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">b</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> daily/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span></p></div><p id=\"ua1d05ec0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">创建</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，同时切换到这个新创建的分支</span></p><div class=\"ne-quote\"><p id=\"ub5ceda05\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout HEAD demo.html</span></p></div><p id=\"ufc2dfce9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从本地版本库的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">(也可以是提交ID、分支名、Tag名) 历史中检出</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">demo.html</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">覆盖当前工作区的文件，如果省略</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">则是从暂存区检出</span></p><div class=\"ne-quote\"><p id=\"ub1502298\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--orphan</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> new_branch</span></p></div><p id=\"uaf5f6b72\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">这个命令会创建一个全新的，完全没有历史记录的新分支，但当前源分支上所有的最新文件都还在，真是强迫症患者的福音，但这个新分支必须做一次</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git commit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作后才会真正成为一个新分支。</span></p><div class=\"ne-quote\"><p id=\"ud9f78b1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">p</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> other_branch</span></p></div><p id=\"u666f5621\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">这个命令主要用来比较两个分支间的差异内容，并提供交互式的界面来选择进一步的操作，这个命令不仅可以比较两个分支间的差异，还可以比较单个文件的差异。</span></p><h4 id=\"nxrwG\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git stash</span></strong></h4><p id=\"u37adffc1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">在</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">Git</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">的栈中保存当前修改或删除的工作进度，当你在一个分支里做某项功能开发时，接到通知把昨天已经测试完没问题的代码发布到线上，但这时你已经在这个分支里加入了其它未提交的代码，这个时候就可以把这些未提交的代码存到栈里。</span></p><div class=\"ne-quote\"><p id=\"u1adcb02e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash</span></p></div><p id=\"ud3fe4b65\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将未提交的文件保存到Git栈中</span></p><p id=\"ud7110919\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash list</span></p><p id=\"u60c1ebb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看栈中保存的列表</span></p><div class=\"ne-quote\"><p id=\"ua3737692\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash show </span><span class=\"ne-text\" style=\"color: rgb(64, 120, 242); font-size: 14px\">stash@</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}</span></p></div><p id=\"ua19681f8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示栈中其中一条记录</span></p><div class=\"ne-quote\"><p id=\"ud1bd1c92\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash drop </span><span class=\"ne-text\" style=\"color: rgb(64, 120, 242); font-size: 14px\">stash@</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}</span></p></div><p id=\"u201bfc57\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">移除栈中其中一条记录</span></p><div class=\"ne-quote\"><p id=\"ua1f6633f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">pop</span></p></div><p id=\"u862b3c26\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从Git栈中检出最新保存的一条记录，并将它从栈中移除</span></p><div class=\"ne-quote\"><p id=\"u0367e259\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash apply </span><span class=\"ne-text\" style=\"color: rgb(64, 120, 242); font-size: 14px\">stash@</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}</span></p></div><p id=\"u246c00ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从Git栈中检出其中一条记录，但不从栈中移除</span></p><div class=\"ne-quote\"><p id=\"u8ec825e4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash branch new_banch</span></p></div><p id=\"uc39a2733\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">把当前栈中最近一次记录检出并创建一个新分支</span></p><div class=\"ne-quote\"><p id=\"u300e9de6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">clear</span></p></div><p id=\"uba5b04cd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">清空栈里的所有记录</span></p><div class=\"ne-quote\"><p id=\"ue0adcd8c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">create</span></p></div><p id=\"uda445761\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为当前修改或删除的文件创建一个自定义的栈并返回一个ID，此时并未真正存储到栈里</span></p><div class=\"ne-quote\"><p id=\"u24ba3bd5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash store xxxxxx</span></p></div><p id=\"u2a79af0f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">create</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">方法里返回的ID放到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">store</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">后面，此时在栈里真正创建了一个记录，但当前修改或删除的文件并未从工作区移除</span></p><p id=\"uae498c65\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">$ </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash create09eb9a97ad632d0825be1ece361936d1d0bdb5c7</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">$ </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash store 09eb9a97ad632d0825be1ece361936d1d0bdb5c7</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">$ </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash liststash@{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}: Created via </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;git stash store&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span></p><h3 id=\"sn0tm\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">操作历史</span></strong></h3><h4 id=\"LR63L\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git log</span></strong></h4><p id=\"ud4f9bff2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">显示提交历史记录</span></p><p id=\"u37531f0a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">p</span></p><p id=\"u86d1eca5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示带提交差异对比的历史记录</span></p><p id=\"ua35699ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> demo.html</span></p><p id=\"u1990dcbd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">demo.html</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件的历史记录</span></p><p id=\"u124fa74a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> --since=</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;2 weeks ago&quot;</span></p><p id=\"u40716aa8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示2周前开始到现在的历史记录，其它时间可以类推</span></p><p id=\"uec1b7a02\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> --before=</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;2 weeks ago&quot;</span></p><p id=\"u9f472aea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示截止到2周前的历史记录，其它时间可以类推</span></p><p id=\"u2494fe36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">10</span></p><p id=\"u594425a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示最近10条历史记录</span></p><p id=\"u2bf2e15b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> f5f630a..HEAD</span></p><p id=\"uf465da1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示从提交ID</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">f5f6</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">30</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">a</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">之间的记录，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">可以为空或其它提交ID</span></p><p id=\"u057aea01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--pretty=oneline</span></em></p><p id=\"u9704b74d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">在一行中输出简短的历史记录</span></p><p id=\"u64f44981\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> --pretty=</span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">format</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">:</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;%h&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"u7eea6c5d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">格式化输出历史记录</span></p><p id=\"u1ed3a911\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">用各种</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">placeholder</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">来决定各种显示内容，我挑几个常用的显示如下：</span></p><ul class=\"ne-ul\"><li id=\"u8b557dfd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%H: commit hash</span></li><li id=\"u40112c96\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%h: 缩短的commit hash</span></li><li id=\"u5db80c75\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%T: tree hash</span></li><li id=\"u695af25a\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%t: 缩短的 tree hash</span></li><li id=\"uf3a9d801\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%P: parent hashes</span></li><li id=\"u6933418f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%p: 缩短的 parent hashes</span></li><li id=\"u1b3c4c8c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%an: 作者名字</span></li><li id=\"uf1dac694\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%aN: mailmap的作者名</span></li><li id=\"u3a4a9a0a\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ae: 作者邮箱</span></li><li id=\"ub5d62d1f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ad: 日期 (--date= 制定的格式)</span></li><li id=\"u1770269e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ar: 日期, 相对格式(1 day ago)</span></li><li id=\"u09641d5f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%cn: 提交者名字</span></li><li id=\"u4a263246\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ce: 提交者 email</span></li><li id=\"u4e465477\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%cd: 提交日期 (--date= 制定的格式)</span></li><li id=\"u2a67e353\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%cr: 提交日期, 相对格式(1 day ago)</span></li><li id=\"u8448afaa\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%d: ref名称</span></li><li id=\"u59e3c1f4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%s: commit信息标题</span></li><li id=\"uc74c154a\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%b: commit信息内容</span></li><li id=\"u3bd5dcd8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%n: 换行</span></li></ul><h4 id=\"RrKow\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git cherry-pick</span></strong></h4><p id=\"u70439507\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">合并分支的一条或几条提交记录到当前分支末梢</span></p><p id=\"u1511bd6f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git cherry-pick 170a305</span></p><p id=\"u1c11637b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并提交ID</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">170a</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">30</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">5</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">到当前分支末梢</span></p><h4 id=\"fioVx\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git reset</span></strong></h4><p id=\"u301e7d1d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将当前的分支重设(reset)到指定的</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">或者</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">HEAD</span></p><p id=\"u519965db\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git reset </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--mixed</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"u95b852eb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">--mixed</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">是不带参数时的默认参数，它退回到某个版本，保留文件内容，回退提交历史</span></p><p id=\"uf2618e3f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git reset </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--soft</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"uacea25f8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">暂存区和工作区中的内容不作任何改变，仅仅把</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指向</span></p><p id=\"ucce4b507\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git reset </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--hard</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"ua87e3e0b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">自从</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">以来在工作区中的任何改变都被丢弃，并把</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指向</span></p><h4 id=\"qqmG3\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git rebase</span></strong></h4><p id=\"ud3309f09\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">重新定义分支的版本库状态</span></p><p id=\"u9fd633ec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rebase branch_name</span></p><p id=\"u05dc2430\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并分支，这跟</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">merge</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">很像，但还是有本质区别，看下图：</span></p><p id=\"ua10fe777\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并过程中可能需要先解决冲突，然后执行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git rebase --continue</span></p><p id=\"udee0d5c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rebase -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">i</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> HEAD~~</span></p><p id=\"u61bac1ae\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">打开文本编辑器，将看到从</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD~~</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的提交如下</span></p><p id=\"u31cd2e1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">pick </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">9</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">a54fd4 添加</span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">的说明pick </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">d4a808 添加pull的说明# Rebase </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">326</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">fc9f.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">.0</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">d4a808 onto d286baa## Commands:# p, pick </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"># r, reword </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">, but edit the </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> message# e, edit </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">, but stop </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">for</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> amending# s, squash </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">, but meld </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">into</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> previous </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"># f, fixup </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">like</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> &quot;squash</span></p><p id=\"ud8974b43\" class=\"ne-p\"><br></p></div>",
    "body": "tags: [git,命令行,入门]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />copyright_url:  github_.com_/gafish/gafish.github_.com_<br />copyright_author: gafish\n\n---\n\n<a name=\"znwpE\"></a>\n## **Git简介**\n<a name=\"ZZ7Ze\"></a>\n## Git 是一种分布式版本控制系统，它可以不受网络连接的限制，_加上_其它众多优点，目前已经成为程序开发人员做项目版本管理时的首选，非开发人员也可以用 Git 来做自己的文档版本管理工具。\n_2013_年，淘宝前端团队开始全面采用 Git 来做项目管理，我也是那个时候开始接触和使用，从一开始的零接触到现在的重度依赖，真是感叹 Git 的强大。<br />Git 的api很多，但其实平时项目中90%的需求都只需要用到几个基本的功能即可，所以本文将从 实用主义 和 深入探索 2个方面去谈谈如何在项目中使用 Git，一般来说，看完 实用主义 这一节就可以开始在项目中动手用。\n\n<a name=\"nFiXQ\"></a>\n### **常用操作**\n所谓实用主义，就是掌握了以下知识就可以玩转 Git，轻松应对90%以上的需求。以下是实用主义型的Git命令列表，先大致看一下\n\n- git clone\n- git config\n- git branch\n- git checkout\n- git status\n- git add\n- git commit\n- git push\n- git pull\n- git log\n- git tag\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686498-4e6505ed-9ce6-4102-8c33-40c9b3e80ff9.png#clientId=u662062e3-6f1b-4&from=paste&id=u55561295&originHeight=324&originWidth=640&originalType=url&ratio=1&rotation=0&showTitle=false&size=78685&status=done&style=none&taskId=u6095db4b-82d4-4134-8552-88bb6dd497c&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686664-5fc180ee-3e8c-4b88-9462-ab42b30ad2cc.png#clientId=u662062e3-6f1b-4&from=paste&id=uca453c49&originHeight=234&originWidth=458&originalType=url&ratio=1&rotation=0&showTitle=false&size=53724&status=done&style=none&taskId=ufd323d13-311c-4805-9716-cbbe01f5292&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686899-ade3969a-681e-4639-950b-a70514bfb16c.png#clientId=u662062e3-6f1b-4&from=paste&id=u616000cd&originHeight=366&originWidth=640&originalType=url&ratio=1&rotation=0&showTitle=false&size=139904&status=done&style=none&taskId=u1aeedec3-b58d-464a-b0cd-80809cff186&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686737-ab17c403-4dc4-4566-92cb-b183855f0497.png#clientId=u662062e3-6f1b-4&from=paste&id=u27f371ab&originHeight=296&originWidth=640&originalType=url&ratio=1&rotation=0&showTitle=false&size=115706&status=done&style=none&taskId=u7cea7c86-582c-4e0c-a620-1d93d8f8300&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686998-830421b9-cb6e-4d43-bf5b-2903e5a03401.png#clientId=u662062e3-6f1b-4&from=paste&id=u11a52d81&originHeight=477&originWidth=581&originalType=url&ratio=1&rotation=0&showTitle=false&size=213056&status=done&style=none&taskId=ud5e38bc0-e1f4-4c40-8c39-86f94f42fd8&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671687435-20cff5e6-38a9-47c6-855b-7fb6754210a1.png#clientId=u662062e3-6f1b-4&from=paste&id=u876caa69&originHeight=378&originWidth=254&originalType=url&ratio=1&rotation=0&showTitle=false&size=63641&status=done&style=none&taskId=u293070ff-80bd-4e88-9d06-60245b24711&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671687671-da8a76e6-df6d-4cf3-9a51-218ac8ab1077.png#clientId=u662062e3-6f1b-4&from=paste&id=ude0dba81&originHeight=204&originWidth=432&originalType=url&ratio=1&rotation=0&showTitle=false&size=70599&status=done&style=none&taskId=u98e58b70-4989-4f53-99d8-bb84017955f&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688072-682c9f07-f473-4ee4-a827-e5a4f0c28643.png#clientId=u662062e3-6f1b-4&from=paste&id=u9579056c&originHeight=100&originWidth=1028&originalType=url&ratio=1&rotation=0&showTitle=false&size=209459&status=done&style=none&taskId=u5986454e-6dd2-41f2-94d0-bdb978e17e1&title=)![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1652671688031-09984018-a557-44bb-82aa-e2839cfd72ef.gif#clientId=u662062e3-6f1b-4&from=paste&id=u34b59f79&originHeight=348&originWidth=639&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u432f01eb-fdee-43fe-ad90-d601c453e54&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688362-d3137c8d-d944-43b5-bb0f-cfae811111ab.png#clientId=u662062e3-6f1b-4&from=paste&id=u3ebbaecf&originHeight=531&originWidth=640&originalType=url&ratio=1&rotation=0&showTitle=false&size=122944&status=done&style=none&taskId=uf582fb28-debe-4cfa-a357-76aa9df6a3d&title=)![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688436-f5282664-beec-4ec5-b12d-84aaec2c25a5.png#clientId=u662062e3-6f1b-4&from=paste&id=u7bc94f9e&originHeight=348&originWidth=640&originalType=url&ratio=1&rotation=0&showTitle=false&size=124894&status=done&style=none&taskId=ue17028fa-fe27-4ddd-861c-151af12588c&title=)<br />接下来，将通过对：https://github_.com_/gafish/gafish.github_.com_<br />仓库进行实例操作，讲解如何使用 Git拉取代码到提交代码的整个流程。\n<a name=\"hU2bE\"></a>\n#### **git clone**\n从git服务器拉取代码<br />git clone https://github.com/gafish/gafish.github.com.git<br />代码_下载_完成后在当前文件夹中会有一个 gafish.github_.com_的目录，通过cd gafish.github_.com_命令进入目录。\n<a name=\"sr54C\"></a>\n#### **git config**\n配置开发者用户名和邮箱<br />git config user.name gafishgit config user.email gafish@qqqq.com<br />每次代码提交的时候都会生成一条提交记录，其中会包含当前配置的用户名和邮箱。\n<a name=\"j8uyA\"></a>\n#### **git branch**\n创建、重命名、查看、删除项目分支，通过 Git做项目开发时，一般都是在开发分支中进行，开发完成后合并分支到主干。<br />git branch daily/0.0.0<br />创建一个名为 daily/0.0.0的日常开发分支，分支名只要不包括特殊字符即可。<br />git branch -m daily/0.0.0 daily/0.0.1<br />如果觉得之前的分支名不合适，可以为新建的分支重命名，重命名分支名为 daily/0.0.1<br />git branch<br />通过不带参数的branch命令可以查看当前项目分支列表<br />git branch -d daily/0.0.1<br />如果分支已经完成使命则可以通过 -d参数将分支删除，这里为了继续下一步操作，暂不执行删除操作\n<a name=\"Om94a\"></a>\n#### **git checkout**\n切换分支<br />git checkout daily/0.0.1<br />切换到 daily/0.0.1分支，后续的操作将在这个分支上进行\n<a name=\"bqIRH\"></a>\n#### **git status**\n查看文件变动状态<br />通过任何你喜欢的编辑器对项目中的 README.md文件做一些改动，保存。<br />git status<br />通过 git status命令可以看到文件当前状态Changes not staged for commit:(_改动文件未提交到暂存区_)\n```\nOn branch daily/0.0.1Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git checkout -- ...\" to discard changes in working directory) modified: README.mdno changes added to commit (use \"git add\" and/or \"git commit -a\")\n```\n<a name=\"XOHpf\"></a>\n#### **git add**\n添加文件变动到暂存区\n> git add README.md\n\n通过指定文件名 README.md可以将该文件添加到暂存区，如果想添加所有文件可用git add .命令，这时候可通过git status看到文件当前状态Changes to be committed:(_文件已提交到暂存区_)\n```\nOn branch daily/0.0.1Changes to be committed: (use \"git reset HEAD ...\" to unstage) modified: README.md\n```\n<a name=\"kYDQ6\"></a>\n#### **git commit**\n提交文件变动到版本库\n> git commit -m '这里写提交原因'\n\n通过 -m参数可直接在命令行里输入提交描述文本\n<a name=\"z13vY\"></a>\n#### **git push**\n将本地的代码改动推送到服务器\n> git push origin daily/0.0.1\n\norigin指代的是当前的git服务器地址，这行命令的意思是把daily/0.0.1分支推送到服务器，当看到命令行返回如下字符表示推送成功了。<br />Counting objects: 3, done.Delta compression using up to 8 threads.Compressing objects: 100% (2/2), done.Writing objects: 100% (3/3), 267 bytes | 0 bytes/s, done.Total 3 (delta 1), reused 0 (delta 0)remote: Resolving deltas: 100% (1/1), completed with 1 local objects.To https://github.com/gafish/gafish.github.com.git * [new branch] daily/0.0.1 -> daily/0.0.1<br />现在我们回到Github网站的项目首页，点击 Branch:master下拉按钮，就会看到刚才推送的daily/00.1分支了\n<a name=\"kiAyA\"></a>\n#### **git pull**\n将服务器上的最新代码拉取到本地\n> git pull origin daily/0.0.1\n\n如果其它项目成员对项目做了改动并推送到服务器，我们需要将最新的改动更新到本地，这里我们来模拟一下这种情况。<br />进入Github网站的项目首页，再进入 daily/0.0.1分支，在线对README.md文件做一些修改并保存，然后在命令中执行以上命令，它将把刚才在线修改的部分拉取到本地，用编辑器打开README.md，你会发现文件已经跟线上的内容同步了。<br />_如果线上代码做了变动，而你本地的代码也有变动，拉取的代码就有可能会跟你本地的改动冲突，一般情况下 _Git会自动处理这种冲突合并，但如果改动的是同一行，那就需要手动来合并代码，编辑文件，保存最新的改动，再通过git add .和git commit -m 'xxx'来提交合并。\n<a name=\"cchU9\"></a>\n#### **git log**\n查看版本提交记录\n> git log\n\n通过以上命令，我们可以查看整个项目的版本提交记录，它里面包含了提交人、日期、提交原因等信息，得到的结果如下：\n```\ncommit c334730f8dba5096c54c8ac04fdc2b31ede7107aAuthor: gafish qqqq.com>Date: Wed Jan 11 09:44:13 2017 +0800 Update README.mdcommit ba6e3d21fcb1c87a718d2a73cdd11261eb672b2aAuthor: gafish qqqq.com>Date: Wed Jan 11 09:31:33 2017 +0800 test.....\n```\n提交记录可能会非常多，按 J键往下翻，按K键往上翻，按Q键退出查看\n<a name=\"ij1Fw\"></a>\n#### **git tag**\n为项目标记里程碑\n> git tag publish/0.0.1git push origin publish/0.0.1\n\n当我们完成某个功能需求准备发布上线时，应该将此次完整的项目代码做个标记，并将这个标记好的版本发布到线上，这里我们以 publish/0.0.1为标记名并发布，当看到命令行返回如下内容则表示发布成功了\n```\nTotal 0 (delta 0), reused 0 (delta 0)To https://github.com/gafish/gafish.github.com.git * [new tag] publish/0.0.1 -> publish/0.0.1\n```\n<a name=\"AaGyD\"></a>\n#### **.gitignore**\n设置哪些内容不需要推送到服务器，这是一个配置文件\n> touch .gitignore\n\n.gitignore不是Git命令，而在项目中的一个文件，通过设置.gitignore的内容告诉Git哪些文件应该被忽略不需要推送到服务器，通过以上命令可以创建一个.gitignore文件，并在编辑器中打开文件，每一行代表一个要忽略的文件或目录，如：<br />demo.htmlbuild/<br />以上内容的意思是 Git将忽略demo.html文件 和build/目录，这些内容不会被推送到服务器上\n<a name=\"OiJ4A\"></a>\n#### **小结**\n通过掌握以上这些基本命令就可以在项目中开始用起来了，如果追求实用，那关于 Git的学习就可以到此结束了，偶尔遇到的问题也基本上通过Google也能找到答案，如果想深入探索Git的高阶功能，那就继续往下看深入探索部分。\n<a name=\"cfGyn\"></a>\n## **深入探索**\n<a name=\"X8AGF\"></a>\n### **基本概念**\n<a name=\"lKJlL\"></a>\n#### **工作区(Working Directory)**\n就是你在电脑里能看到的目录，比如上文中的 gafish.github_.com_文件夹就是一个工作区\n<a name=\"zkHCY\"></a>\n#### **本地版本库(Local Repository)**\n工作区有一个隐藏目录 .git，这个不算工作区，而是Git的版本库。\n<a name=\"Oyeyy\"></a>\n#### **暂存区(stage)**\n本地版本库里存了很多东西，其中最重要的就是称为 stage(或者叫index)的暂存区，还有Git为我们自动创建的第一个分支master，以及指向master的一个指针叫HEAD。\n<a name=\"QYjtd\"></a>\n#### **远程版本库(Remote Repository)**\n一般指的是 Git服务器上所对应的仓库，本文的示例所在的github仓库就是一个远程版本库\n<a name=\"Htx3L\"></a>\n#### **以上概念之间的关系**\n工作区、暂存区、本地版本库、远程版本库之间几个常用的Git操作流程如下图所示：\n<a name=\"o2V71\"></a>\n#### **分支(Branch)**\n分支是为了将修改记录的整个流程分开存储，让分开的分支不受其它分支的影响，所以在同一个数据库里可以同时进行多个不同的修改\n<a name=\"VbFM2\"></a>\n#### **主分支(Master)**\n前面提到过 master是Git为我们自动创建的第一个分支，也叫主分支，其它分支开发完成后都要合并到master\n<a name=\"LgqU3\"></a>\n#### **标签(Tag)**\n标签是用于标记特定的点或提交的历史，通常会用来标记发布版本的名称或版本号(如：publish/0.0.1)，虽然标签看起来有点像分支，但打上标签的提交是固定的，不能随意的改动，参见上图中的1.0/2.0/3.0\n<a name=\"GVAy8\"></a>\n#### **HEAD**\nHEAD指向的就是当前分支的最新提交<br />以上概念了解的差不多，那就可以继续往下看，下面将以具体的操作类型来讲解 Git的高阶用法\n<a name=\"zrQBZ\"></a>\n### **操作文件**\n<a name=\"u8iQW\"></a>\n#### **git add**\n添加文件到暂存区<br />git add -i<br />通过此命令将打开交互式子命令系统，你将看到如下子命令<br />***Commands*** 1: status 2: update 3: revert 4: add untracked 5: patch 6: diff 7: quit 8: help<br />通过输入序列号或首字母可以选择相应的功能，具体的功能解释如下：\n\n- status：功能上和git add -i相似，没什么鸟用\n- update：详见下方git add -u\n- revert：把已经添加到暂存区的文件从暂存区剔除，其操作方式和update类似\n- add untracked：可以把新增的文件添加到暂存区，其操作方式和update类似\n- patch：详见下方git add -p\n- diff：比较暂存区文件和本地版本库的差异，其操作方式和update类似\n- quit：退出git add -i命令系统\n- help：查看帮助信息\n\ngit add -p<br />直接进入交互命令中最有用的 patch模式<br />这是交互命令中最有用的模式，其操作方式和 update类似，选择后Git会显示这些文件的当前内容与本地版本库中的差异，然后您可以自己决定是否添加这些修改到暂存区，在命令行Stage deletion [y,n,q,a,d,/,?]?后输入y,n,q,a,d,/,?其中一项选择操作方式，具体功能解释如下：\n\n- y：接受修改\n- n：忽略修改\n- q：退出当前命令\n- a：添加修改\n- d：放弃修改\n- /：通过正则表达式匹配修改内容\n- ?：查看帮助信息\n\ngit add -u<br />直接进入交互命令中的 update模式<br />它会先列出工作区 修改或删除的文件列表，新增的文件不会被显示，在命令行Update>>后输入相应的列表序列号表示选中该项，回车继续选择，如果已选好，直接回车回到命令主界面\n> git add _--ignore-removal ._\n\n添加工作区 修改或新增的文件列表，删除的文件不会被添加\n<a name=\"wUErY\"></a>\n#### **git commit**\n把暂存区的文件提交到本地版本库\n> git commit -m '第一行提交原因' -m '第二行提交原因'\n\n不打开编辑器，直接在命令行中输入多行提交原因\n> git commit -am '提交原因'\n\n将工作区 修改或删除的文件提交到本地版本库，新增的文件不会被提交\n> git commit _--amend -m '提交原因'_\n\n修改最新一条提交记录的提交原因\n> git commit -C HEAD\n\n将当前文件改动提交到 HEAD或当前分支的历史ID\n<a name=\"W0moe\"></a>\n#### **git mv**\n移动或重命名文件、目录\n> git mv a.md b.md -f\n\n将 a.md重命名为b.md，同时添加变动到暂存区，加-f参数可以强制重命名，相比用mv a.md b.md命令省去了git add操作\n<a name=\"h2LDP\"></a>\n#### **git rm**\n从工作区和暂存区移除文件\n> git rm b.md\n\n从工作区和暂存区移除文件 b.md，同时添加变动到暂存区，相比用rm b.md命令省去了git add操作\n> git rm src/ -r\n\n允许从工作区和暂存区移除目录\n<a name=\"ZmENC\"></a>\n#### **git status**\n> git status -s\n\n以简短方式查看工作区和暂存区文件状态，示例如下：<br />M demo.html<br />?? test.html\n> git status _--ignored_\n\n查看工作区和暂存区文件状态，包括被忽略的文件\n<a name=\"wFWwx\"></a>\n### **操作分支**\n<a name=\"In8Ll\"></a>\n#### **git branch**\n查看、创建、删除分支\n> git branch -a\n\n查看本地版本库和远程版本库上的分支列表\n> git branch -r\n\n查看远程版本库上的分支列表，_加上_ -d参数可以删除远程版本库上的分支\n> git branch -D\n\n分支未提交到本地版本库前强制删除分支\n> git branch -vv\n\n查看带有最后提交id、最近提交原因等信息的本地版本库分支列表\n<a name=\"qNKmF\"></a>\n#### **git merge**\n将其它分支合并到当前分支\n> git merge _--squash_\n\n将待合并分支上的 commit合并成一个新的commit放入当前分支，适用于待合并分支的提交记录不需要保留的情况\n> git merge --no-ff\n\n默认情况下，Git执行\"快进式合并\"(fast-farward merge)，会直接将Master分支指向Develop分支，使用--no-ff参数后，会执行正常合并，在Master分支上生成一个新节点，保证版本演进更清晰。\n> git merge _--no-edit_\n\n在没有冲突的情况下合并，不想手动编辑提交原因，而是用 Git自动生成的类似Merge branch 'test'的文字直接提交\n<a name=\"SPORG\"></a>\n#### **git checkout**\n切换分支\n> git checkout -b daily/0.0.1\n\n创建 daily/0.0.1分支，同时切换到这个新创建的分支\n> git checkout HEAD demo.html\n\n从本地版本库的 HEAD(也可以是提交ID、分支名、Tag名) 历史中检出demo.html覆盖当前工作区的文件，如果省略HEAD则是从暂存区检出\n> git checkout --orphan new_branch\n\n这个命令会创建一个全新的，完全没有历史记录的新分支，但当前源分支上所有的最新文件都还在，真是强迫症患者的福音，但这个新分支必须做一次 git commit操作后才会真正成为一个新分支。\n> git checkout -p other_branch\n\n这个命令主要用来比较两个分支间的差异内容，并提供交互式的界面来选择进一步的操作，这个命令不仅可以比较两个分支间的差异，还可以比较单个文件的差异。\n<a name=\"nxrwG\"></a>\n#### **git stash**\n在 Git的栈中保存当前修改或删除的工作进度，当你在一个分支里做某项功能开发时，接到通知把昨天已经测试完没问题的代码发布到线上，但这时你已经在这个分支里加入了其它未提交的代码，这个时候就可以把这些未提交的代码存到栈里。\n> git stash\n\n将未提交的文件保存到Git栈中<br />git stash list<br />查看栈中保存的列表\n> git stash show stash@{0}\n\n显示栈中其中一条记录\n> git stash drop stash@{0}\n\n移除栈中其中一条记录\n> git stash pop\n\n从Git栈中检出最新保存的一条记录，并将它从栈中移除\n> git stash apply stash@{0}\n\n从Git栈中检出其中一条记录，但不从栈中移除\n> git stash branch new_banch\n\n把当前栈中最近一次记录检出并创建一个新分支\n> git stash clear\n\n清空栈里的所有记录\n> git stash create\n\n为当前修改或删除的文件创建一个自定义的栈并返回一个ID，此时并未真正存储到栈里\n> git stash store xxxxxx\n\n将 create方法里返回的ID放到store后面，此时在栈里真正创建了一个记录，但当前修改或删除的文件并未从工作区移除<br />$ git stash create09eb9a97ad632d0825be1ece361936d1d0bdb5c7$ git stash store 09eb9a97ad632d0825be1ece361936d1d0bdb5c7$ git stash liststash@{0}: Created via \"git stash store\".\n<a name=\"sn0tm\"></a>\n### **操作历史**\n<a name=\"LR63L\"></a>\n#### **git log**\n显示提交历史记录<br />git log -p<br />显示带提交差异对比的历史记录<br />git log demo.html<br />显示 demo.html文件的历史记录<br />git log --since=\"2 weeks ago\"<br />显示2周前开始到现在的历史记录，其它时间可以类推<br />git log --before=\"2 weeks ago\"<br />显示截止到2周前的历史记录，其它时间可以类推<br />git log -10<br />显示最近10条历史记录<br />git log f5f630a..HEAD<br />显示从提交ID f5f6_30_a到HEAD之间的记录，HEAD可以为空或其它提交ID<br />git log _--pretty=oneline_<br />在一行中输出简短的历史记录<br />git log --pretty=format:\"%h\" <br />格式化输出历史记录<br />Git用各种placeholder来决定各种显示内容，我挑几个常用的显示如下：\n\n- %H: commit hash\n- %h: 缩短的commit hash\n- %T: tree hash\n- %t: 缩短的 tree hash\n- %P: parent hashes\n- %p: 缩短的 parent hashes\n- %an: 作者名字\n- %aN: mailmap的作者名\n- %ae: 作者邮箱\n- %ad: 日期 (--date= 制定的格式)\n- %ar: 日期, 相对格式(1 day ago)\n- %cn: 提交者名字\n- %ce: 提交者 email\n- %cd: 提交日期 (--date= 制定的格式)\n- %cr: 提交日期, 相对格式(1 day ago)\n- %d: ref名称\n- %s: commit信息标题\n- %b: commit信息内容\n- %n: 换行\n<a name=\"RrKow\"></a>\n#### **git cherry-pick**\n合并分支的一条或几条提交记录到当前分支末梢<br />git cherry-pick 170a305<br />合并提交ID 170a_30_5到当前分支末梢\n<a name=\"fioVx\"></a>\n#### **git reset**\n将当前的分支重设(reset)到指定的 或者HEAD<br />git reset --mixed <br />--mixed是不带参数时的默认参数，它退回到某个版本，保留文件内容，回退提交历史<br />git reset --soft <br />暂存区和工作区中的内容不作任何改变，仅仅把 HEAD指向<br />git reset --hard <br />自从 以来在工作区中的任何改变都被丢弃，并把HEAD指向\n<a name=\"qqmG3\"></a>\n#### **git rebase**\n重新定义分支的版本库状态<br />git rebase branch_name<br />合并分支，这跟 merge很像，但还是有本质区别，看下图：<br />合并过程中可能需要先解决冲突，然后执行 git rebase --continue<br />git rebase -i HEAD~~<br />打开文本编辑器，将看到从 HEAD到HEAD~~的提交如下<br />pick 9a54fd4 添加commit的说明pick 0d4a808 添加pull的说明# Rebase 326fc9f..0d4a808 onto d286baa## Commands:# p, pick = use commit# r, reword = use commit, but edit the commit message# e, edit = use commit, but stop for amending# s, squash = use commit, but meld into previous commit# f, fixup = like \"squash\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u513517db\" class=\"ne-p\"><span class=\"ne-text\">tags: [git,命令行,入门]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"ub1c8b387\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span class=\"ne-text\">github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">/gafish/gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">.com</span></em></p><p id=\"u9bf78c17\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">gafish</span></p><hr id=\"B5MVm\" class=\"ne-hr\"><h2 id=\"znwpE\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">Git简介</span></strong></h2><h2 id=\"ZZ7Ze\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">Git 是一种</span><span class=\"ne-text\">分布式</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">版本控制系统，它可以不受网络连接的限制，</span><em><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">加上</span></em><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">其它众多优点，目前已经成为程序开发人员做项目版本管理时的首选，非开发人员也可以用 Git 来做自己的文档版本管理工具。</span></h2><p id=\"uc0bcc402\" class=\"ne-p\"><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">2013</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">年，淘宝前端团队开始全面采用 Git 来做项目管理，我也是那个时候开始接触和使用，从一开始的零接触到现在的重度依赖，真是感叹 Git 的强大。</span></p><p id=\"uf53bf210\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">Git 的api很多，但其实平时项目中90%的需求都只需要用到几个基本的功能即可，所以本文将从 实用主义 和 深入探索 2个方面去谈谈如何在项目中使用 Git，一般来说，看完 实用主义 这一节就可以开始在项目中动手用。</span></p><p id=\"uaf8a6507\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h3 id=\"nFiXQ\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">常用操作</span></strong></h3><p id=\"u51f4e4d1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">所谓实用主义，就是掌握了以下知识就可以玩转</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，轻松应对90%以上的需求。以下是实用主义型的Git命令列表，先大致看一下</span></p><ul class=\"ne-ul\"><li id=\"u557343f8\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git clone</span></li><li id=\"u40f97fe5\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git config</span></li><li id=\"ue5bf1bd4\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch</span></li><li id=\"u3e9de144\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout</span></li><li id=\"u97711571\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git status</span></li><li id=\"u68ef6514\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git add</span></li><li id=\"u01e946bf\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git commit</span></li><li id=\"u3dd3cca6\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git push</span></li><li id=\"u1a3d02f0\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git pull</span></li><li id=\"uc84416b1\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git log</span></li><li id=\"u043f3cfb\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git tag</span></li></ul><p id=\"ue4333e7f\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686498-4e6505ed-9ce6-4102-8c33-40c9b3e80ff9.png\" width=\"640\" id=\"u55561295\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686664-5fc180ee-3e8c-4b88-9462-ab42b30ad2cc.png\" width=\"458\" id=\"uca453c49\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686899-ade3969a-681e-4639-950b-a70514bfb16c.png\" width=\"640\" id=\"u616000cd\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686737-ab17c403-4dc4-4566-92cb-b183855f0497.png\" width=\"640\" id=\"u27f371ab\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671686998-830421b9-cb6e-4d43-bf5b-2903e5a03401.png\" width=\"581\" id=\"u11a52d81\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671687435-20cff5e6-38a9-47c6-855b-7fb6754210a1.png\" width=\"254\" id=\"u876caa69\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671687671-da8a76e6-df6d-4cf3-9a51-218ac8ab1077.png\" width=\"432\" id=\"ude0dba81\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688072-682c9f07-f473-4ee4-a827-e5a4f0c28643.png\" width=\"1028\" id=\"u9579056c\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1652671688031-09984018-a557-44bb-82aa-e2839cfd72ef.gif\" width=\"639\" id=\"u34b59f79\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688362-d3137c8d-d944-43b5-bb0f-cfae811111ab.png\" width=\"640\" id=\"u3ebbaecf\" class=\"ne-image\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1652671688436-f5282664-beec-4ec5-b12d-84aaec2c25a5.png\" width=\"640\" id=\"u7bc94f9e\" class=\"ne-image\"></p><p id=\"u013003c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">接下来，将通过对：https://github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/gafish/gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em></p><p id=\"ubb2e1548\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">仓库进行实例操作，讲解如何使用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">拉取代码到提交代码的整个流程。</span></p><h4 id=\"hU2bE\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git clone</span></strong></h4><p id=\"u669474be\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">从git服务器拉取代码</span></p><p id=\"u493143da\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">clone</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> https://github.com/gafish/gafish.github.com.git</span></p><p id=\"u6b106692\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">代码</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">下载</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">完成后在当前文件夹中会有一个</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的目录，通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">cd gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令进入目录。</span></p><h4 id=\"sr54C\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git config</span></strong></h4><p id=\"u04ef9d39\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">配置开发者用户名和邮箱</span></p><p id=\"u729cb0ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">config</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> user.name gafishgit </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">config</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> user.email gafish@qqqq.com</span></p><p id=\"uc7c0a3ab\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">每次代码提交的时候都会生成一条提交记录，其中会包含当前配置的用户名和邮箱。</span></p><h4 id=\"j8uyA\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git branch</span></strong></h4><p id=\"ub7d4de2b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">创建、重命名、查看、删除项目分支，通过</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">Git</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">做项目开发时，一般都是在开发分支中进行，开发完成后合并分支到主干。</span></p><p id=\"ud04e9d58\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch daily/0.0.0</span></p><p id=\"ud0f09cea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">创建一个名为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.0</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的日常开发分支，分支名只要不包括特殊字符即可。</span></p><p id=\"u9c34d415\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -m daily</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">/0.0.0 daily/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.1</span></p><p id=\"u44f2b6ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果觉得之前的分支名不合适，可以为新建的分支重命名，重命名分支名为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span></p><p id=\"u779f24ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch</span></p><p id=\"u4be67b27\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过不带参数的branch命令可以查看当前项目分支列表</span></p><p id=\"ufa7b08eb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -d daily/0.0.1</span></p><p id=\"uabc36e04\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果分支已经完成使命则可以通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-d</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数将分支删除，这里为了继续下一步操作，暂不执行删除操作</span></p><h4 id=\"Om94a\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git checkout</span></strong></h4><p id=\"uf1fc00d3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">切换分支</span></p><p id=\"u82bc5950\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout daily/0.0.1</span></p><p id=\"u86ef9f79\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">切换到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，后续的操作将在这个分支上进行</span></p><h4 id=\"bqIRH\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git status</span></strong></h4><p id=\"ue4bc180e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">查看文件变动状态</span></p><p id=\"u8827ac2b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过任何你喜欢的编辑器对项目中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">README.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件做一些改动，保存。</span></p><p id=\"u69b0d0c7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">status</span></p><p id=\"u4193a0de\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git status</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令可以看到文件当前状态</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Changes not staged for commit:</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">(</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">改动文件未提交到暂存区</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">)</span></p><pre data-language=\"plain\" id=\"ajgEE\" class=\"ne-codeblock language-plain\">On branch daily/0.0.1Changes not staged for commit: (use &quot;git add ...&quot; to update what will be committed) (use &quot;git checkout -- ...&quot; to discard changes in working directory) modified: README.mdno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</pre><h4 id=\"XOHpf\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git add</span></strong></h4><p id=\"u3b892f64\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">添加文件变动到暂存区</span></p><div class=\"ne-quote\"><p id=\"u33dcde1e\" class=\"ne-p\"><span class=\"ne-text\">git add README.md</span></p></div><p id=\"u6fe99313\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过指定文件名 README.md可以将该文件添加到暂存区，如果想添加所有文件可用git add .命令，这时候可通过git status看到文件当前状态Changes to be committed:(</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件已提交到暂存区</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">)</span></p><pre data-language=\"plain\" id=\"fTNkL\" class=\"ne-codeblock language-plain\">On branch daily/0.0.1Changes to be committed: (use &quot;git reset HEAD ...&quot; to unstage) modified: README.md</pre><h4 id=\"kYDQ6\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git commit</span></strong></h4><p id=\"ub127b611\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">提交文件变动到版本库</span></p><div class=\"ne-quote\"><p id=\"ube2d5997\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">m </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'这里写提交原因'</span></p></div><p id=\"u7154444c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-m</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数可直接在命令行里输入提交描述文本</span></p><h4 id=\"z13vY\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git push</span></strong></h4><p id=\"u05e02135\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将本地的代码改动推送到服务器</span></p><div class=\"ne-quote\"><p id=\"ud1f0598a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">push</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> origin daily/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span></p></div><p id=\"udc6d9774\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">origin</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指代的是当前的git服务器地址，这行命令的意思是把</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支推送到服务器，当看到命令行返回如下字符表示推送成功了。</span></p><p id=\"u469890ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Counting objects: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">, done.Delta compression </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">using</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> up </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">to</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">8</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> threads.Compressing objects: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">100</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">%</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), done.Writing objects: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">100</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">%</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">267</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> bytes </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">|</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> bytes</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">s, done.Total </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (delta </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), reused </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (delta </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">)remote: Resolving deltas: </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">100</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">%</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> (</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">), completed </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">with</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">local</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> objects.To https:</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">github.com</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gafish</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">gafish.github.com.git </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> [</span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">new</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> branch] daily</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">&gt;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> daily</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.1</span></p><p id=\"ub3291b54\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">现在我们回到Github网站的项目首页，点击</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Branch:master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">下拉按钮，就会看到刚才推送的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/00.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支了</span></p><h4 id=\"kiAyA\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git pull</span></strong></h4><p id=\"uc035e237\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将服务器上的最新代码拉取到本地</span></p><div class=\"ne-quote\"><p id=\"u5e6a5147\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git pull origin daily/0.0.1</span></p></div><p id=\"ud5abd41f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果其它项目成员对项目做了改动并推送到服务器，我们需要将最新的改动更新到本地，这里我们来模拟一下这种情况。</span></p><p id=\"u5e74cbb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">进入Github网站的项目首页，再进入</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，在线对</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">README.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件做一些修改并保存，然后在命令中执行以上命令，它将把刚才在线修改的部分拉取到本地，用编辑器打开</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">README.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，你会发现文件已经跟线上的内容同步了。</span></p><p id=\"u3e529d73\" class=\"ne-p\"><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">如果线上代码做了变动，而你本地的代码也有变动，拉取的代码就有可能会跟你本地的改动冲突，一般情况下</span></em><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">会自动处理这种冲突合并，但如果改动的是同一行，那就需要手动来合并代码，编辑文件，保存最新的改动，再通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add .</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git commit -m 'xxx'</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">来提交合并。</span></p><h4 id=\"cchU9\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git log</span></strong></h4><p id=\"u33053d39\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">查看版本提交记录</span></p><div class=\"ne-quote\"><p id=\"u33032517\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span></p></div><p id=\"u17a51880\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过以上命令，我们可以查看整个项目的版本提交记录，它里面包含了</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">提交人</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">日期</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">提交原因</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">等信息，得到的结果如下：</span></p><pre data-language=\"plain\" id=\"krVMK\" class=\"ne-codeblock language-plain\">commit c334730f8dba5096c54c8ac04fdc2b31ede7107aAuthor: gafish qqqq.com&gt;Date: Wed Jan 11 09:44:13 2017 +0800 Update README.mdcommit ba6e3d21fcb1c87a718d2a73cdd11261eb672b2aAuthor: gafish qqqq.com&gt;Date: Wed Jan 11 09:31:33 2017 +0800 test.....</pre><p id=\"ub4240250\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">提交记录可能会非常多，按</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">J</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">键往下翻，按</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">K</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">键往上翻，按</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Q</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">键退出查看</span></p><h4 id=\"ij1Fw\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git tag</span></strong></h4><p id=\"u0af3dce5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">为项目标记里程碑</span></p><div class=\"ne-quote\"><p id=\"u50bdfe8c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git tag publish/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">push</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> origin publish/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span></p></div><p id=\"u0d4b289d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">当我们完成某个功能需求准备发布上线时，应该将此次完整的项目代码做个标记，并将这个标记好的版本发布到线上，这里我们以</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">publish/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为标记名并发布，当看到命令行返回如下内容则表示发布成功了</span></p><pre data-language=\"plain\" id=\"sdZlr\" class=\"ne-codeblock language-plain\">Total 0 (delta 0), reused 0 (delta 0)To https://github.com/gafish/gafish.github.com.git * [new tag] publish/0.0.1 -&gt; publish/0.0.1</pre><h4 id=\"AaGyD\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">.gitignore</span></strong></h4><p id=\"u6f5d3f34\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">设置哪些内容不需要推送到服务器，这是一个配置文件</span></p><div class=\"ne-quote\"><p id=\"u75957f6f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">touch</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> .gitignore</span></p></div><p id=\"u16b37d28\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.gitignore</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">不是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令，而在项目中的一个文件，通过设置</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.gitignore</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的内容告诉</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">哪些文件应该被忽略不需要推送到服务器，通过以上命令可以创建一个</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.gitignore</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件，并在编辑器中打开文件，每一行代表一个要忽略的文件或目录，如：</span></p><p id=\"ud900ec4b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">demo.htmlbuild/</span></p><p id=\"ua92ae132\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">以上内容的意思是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将忽略</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">demo.html</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件 和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">build/</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">目录，这些内容不会被推送到服务器上</span></p><h4 id=\"OiJ4A\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">小结</span></strong></h4><p id=\"u05ff66c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过掌握以上这些基本命令就可以在项目中开始用起来了，如果追求实用，那关于</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的学习就可以到此结束了，偶尔遇到的问题也基本上通过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Google</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">也能找到答案，如果想深入探索</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的高阶功能，那就继续往下看</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">深入探索</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">部分。</span></p><h2 id=\"cfGyn\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">深入探索</span></strong></h2><h3 id=\"X8AGF\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">基本概念</span></strong></h3><h4 id=\"lKJlL\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">工作区(Working Directory)</span></strong></h4><p id=\"u54ad0dd3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">就是你在电脑里能看到的目录，比如上文中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">gafish.github</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.com</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件夹就是一个工作区</span></p><h4 id=\"zkHCY\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">本地版本库(Local Repository)</span></strong></h4><p id=\"ub644b29a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">工作区有一个隐藏目录</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">.git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，这个不算工作区，而是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的版本库。</span></p><h4 id=\"Oyeyy\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">暂存区(stage)</span></strong></h4><p id=\"ub0b39d97\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">本地版本库里存了很多东西，其中最重要的就是称为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">stage</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">(或者叫index)的暂存区，还有</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为我们自动创建的第一个分支</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，以及指向</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的一个指针叫</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">。</span></p><h4 id=\"QYjtd\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">远程版本库(Remote Repository)</span></strong></h4><p id=\"uad0e3001\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">一般指的是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">服务器上所对应的仓库，本文的示例所在的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">github</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">仓库就是一个远程版本库</span></p><h4 id=\"Htx3L\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">以上概念之间的关系</span></strong></h4><p id=\"u38d6c2ff\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">暂存区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">本地版本库</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">、</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">远程版本库</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">之间几个常用的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作流程如下图所示：</span></p><h4 id=\"o2V71\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">分支(Branch)</span></strong></h4><p id=\"u7b286c2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支是为了将修改记录的整个流程分开存储，让分开的分支不受其它分支的影响，所以在同一个数据库里可以同时进行多个不同的修改</span></p><h4 id=\"VbFM2\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">主分支(Master)</span></strong></h4><p id=\"uced4288a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">前面提到过</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为我们自动创建的第一个分支，也叫主分支，其它分支开发完成后都要合并到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">master</span></p><h4 id=\"LgqU3\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">标签(Tag)</span></strong></h4><p id=\"u586c4ab9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">标签是用于标记特定的点或提交的历史，通常会用来标记发布版本的名称或版本号(如：</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">publish/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">)，虽然标签看起来有点像分支，但打上标签的提交是固定的，不能随意的改动，参见上图中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">1.0</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">2.0</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">3.0</span></p><h4 id=\"GVAy8\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">HEAD</span></strong></h4><p id=\"u406e8282\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指向的就是当前分支的最新提交</span></p><p id=\"u688f3f80\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">以上概念了解的差不多，那就可以继续往下看，下面将以具体的操作类型来讲解</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">Git</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">的高阶用法</span></p><h3 id=\"zrQBZ\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">操作文件</span></strong></h3><h4 id=\"u8iQW\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git add</span></strong></h4><p id=\"ue7a35db2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">添加文件到暂存区</span></p><p id=\"uc4872ebf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -i</span></p><p id=\"u224639a3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过此命令将打开交互式子命令系统，你将看到如下子命令</span></p><p id=\"u05731429\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">Commands</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">*</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: status </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">2</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">update</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">3</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: revert </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">4</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> untracked </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">5</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: patch </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">6</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: diff </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">7</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: quit </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">8</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">: help</span></p><p id=\"u96163500\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">通过输入序列号或首字母可以选择相应的功能，具体的功能解释如下：</span></p><ul class=\"ne-ul\"><li id=\"u5c7520d1\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">status</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：功能上和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -i</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">相似，没什么鸟用</span></li><li id=\"u4a396b34\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：详见下方</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -u</span></li><li id=\"u6f0f9dc9\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">revert</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：把已经添加到暂存区的文件从暂存区剔除，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似</span></li><li id=\"u9ff5d6fe\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">add untracked</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：可以把新增的文件添加到暂存区，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似</span></li><li id=\"uf3ddd677\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">patch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：详见下方</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -p</span></li><li id=\"uceeb5dd9\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">diff</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：比较暂存区文件和本地版本库的差异，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似</span></li><li id=\"ub1989fc7\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">quit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：退出</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add -i</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令系统</span></li><li id=\"u49a30b9e\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">help</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">：查看帮助信息</span></li></ul><p id=\"ufbf2031d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -p</span></p><p id=\"u3b48c464\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">直接进入交互命令中最有用的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">patch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">模式</span></p><p id=\"u23025046\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">这是交互命令中最有用的模式，其操作方式和</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">类似，选择后</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">会显示这些文件的当前内容与本地版本库中的差异，然后您可以自己决定是否添加这些修改到暂存区，在命令行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Stage deletion [y,n,q,a,d,/,?]?</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">后输入</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">y,n,q,a,d,/,?</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">其中一项选择操作方式，具体功能解释如下：</span></p><ul class=\"ne-ul\"><li id=\"u708cbd22\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">y：接受修改</span></li><li id=\"ue422ef97\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">n：忽略修改</span></li><li id=\"ucdafa2b8\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">q：退出当前命令</span></li><li id=\"u9c27b4e8\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">a：添加修改</span></li><li id=\"uef5c2434\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">d：放弃修改</span></li><li id=\"u9d562f64\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">/：通过正则表达式匹配修改内容</span></li><li id=\"ue7e5bd19\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">?：查看帮助信息</span></li></ul><p id=\"ub0ef6e63\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -u</span></p><p id=\"ub2694136\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">直接进入交互命令中的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">update</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">模式</span></p><p id=\"u04bfcb3d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">它会先列出工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">删除</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件列表，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">新增</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件不会被显示，在命令行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Update&gt;&gt;</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">后输入相应的列表序列号表示选中该项，回车继续选择，如果已选好，直接回车回到命令主界面</span></p><div class=\"ne-quote\"><p id=\"u634ca6c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">add</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--ignore-removal .</span></em></p></div><p id=\"u0adc6a34\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">添加工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">新增</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件列表，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">删除</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件不会被添加</span></p><h4 id=\"wUErY\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git commit</span></strong></h4><p id=\"u0a3e5f3d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">把暂存区的文件提交到本地版本库</span></p><div class=\"ne-quote\"><p id=\"u49ce2962\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">m </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'第一行提交原因'</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">m </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'第二行提交原因'</span></p></div><p id=\"u0dc43b76\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">不打开编辑器，直接在命令行中输入多行提交原因</span></p><div class=\"ne-quote\"><p id=\"u9b2690e3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">am </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">'提交原因'</span></p></div><p id=\"ua18372b0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将工作区</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">删除</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件提交到本地版本库，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">新增</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文件不会被提交</span></p><div class=\"ne-quote\"><p id=\"uf969fc69\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--amend -m '提交原因'</span></em></p></div><p id=\"ua01e34bd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">修改最新一条提交记录的提交原因</span></p><div class=\"ne-quote\"><p id=\"u7dbeede4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">C HEAD</span></p></div><p id=\"u73e06722\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将当前文件改动提交到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">或当前分支的历史ID</span></p><h4 id=\"W0moe\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git mv</span></strong></h4><p id=\"ud05fe7fe\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">移动或重命名文件、目录</span></p><div class=\"ne-quote\"><p id=\"ub894e180\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git mv </span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">a</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.md</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">b</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.md</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -f</span></p></div><p id=\"u5b6dfddf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">a.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">重命名为</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，同时添加变动到暂存区，加</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-f</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数可以强制重命名，相比用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">mv a.md b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令省去了</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作</span></p><h4 id=\"h2LDP\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git rm</span></strong></h4><p id=\"u2273f58a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">从工作区和暂存区移除文件</span></p><div class=\"ne-quote\"><p id=\"u35a7e783\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rm </span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">b</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">.md</span></p></div><p id=\"u1ac08fa7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从工作区和暂存区移除文件</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">，同时添加变动到暂存区，相比用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">rm b.md</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">命令省去了</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git add</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作</span></p><div class=\"ne-quote\"><p id=\"u46b41ec7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rm </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">src</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">/ -r</span></p></div><p id=\"u4ce4471e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">允许从工作区和暂存区移除目录</span></p><h4 id=\"ZmENC\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git status</span></strong></h4><div class=\"ne-quote\"><p id=\"u37517192\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">status</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> -s</span></p></div><p id=\"uc28a6e20\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">以简短方式查看工作区和暂存区文件状态，示例如下：</span></p><p id=\"u59a16462\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">M demo.html</span></p><p id=\"u54a193e6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">?? test.html</span></p><div class=\"ne-quote\"><p id=\"u0ab7f336\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">status</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--ignored</span></em></p></div><p id=\"u524e75f2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看工作区和暂存区文件状态，包括被忽略的文件</span></p><h3 id=\"wFWwx\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">操作分支</span></strong></h3><h4 id=\"In8Ll\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git branch</span></strong></h4><p id=\"u7da8d366\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">查看、创建、删除分支</span></p><div class=\"ne-quote\"><p id=\"u78c74458\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">a</span></p></div><p id=\"u8e1ef593\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看本地版本库和远程版本库上的分支列表</span></p><div class=\"ne-quote\"><p id=\"u2a0ca088\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -r</span></p></div><p id=\"ua12b816e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看远程版本库上的分支列表，</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">加上</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">-d</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数可以删除远程版本库上的分支</span></p><div class=\"ne-quote\"><p id=\"uf6674e0a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -D</span></p></div><p id=\"u3b7f1d50\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支未提交到本地版本库前强制删除分支</span></p><div class=\"ne-quote\"><p id=\"u756dd566\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git branch -vv</span></p></div><p id=\"u6e4807b9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看带有最后提交id、最近提交原因等信息的本地版本库分支列表</span></p><h4 id=\"qNKmF\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git merge</span></strong></h4><p id=\"ue5826302\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将其它分支合并到当前分支</span></p><div class=\"ne-quote\"><p id=\"u729e1bd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">merge</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--squash</span></em></p></div><p id=\"uc09f159f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将待合并分支上的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">commit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并成一个新的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">commit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">放入当前分支，适用于待合并分支的提交记录不需要保留的情况</span></p><div class=\"ne-quote\"><p id=\"ub361e875\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git merge --no-ff</span></p></div><p id=\"u45bf2beb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">默认情况下，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">执行&quot;</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">快进式合并</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">&quot;(fast-farward merge)，会直接将</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支指向</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Develop</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，使用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">--no-ff</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">参数后，会执行正常合并，在</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Master</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支上生成一个新节点，保证版本演进更清晰。</span></p><div class=\"ne-quote\"><p id=\"ufae39399\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">merge</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--no-edit</span></em></p></div><p id=\"ub829de51\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">在没有冲突的情况下合并，不想手动编辑提交原因，而是用</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">自动生成的类似</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Merge branch 'test'</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的文字直接提交</span></p><h4 id=\"SPORG\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git checkout</span></strong></h4><p id=\"u6a1d32c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">切换分支</span></p><div class=\"ne-quote\"><p id=\"ufb1bb3f1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">b</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> daily/</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0.0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">1</span></p></div><p id=\"ua1d05ec0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">创建</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">daily/0.0.1</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">分支，同时切换到这个新创建的分支</span></p><div class=\"ne-quote\"><p id=\"ub5ceda05\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout HEAD demo.html</span></p></div><p id=\"ufc2dfce9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从本地版本库的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">(也可以是提交ID、分支名、Tag名) 历史中检出</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">demo.html</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">覆盖当前工作区的文件，如果省略</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">则是从暂存区检出</span></p><div class=\"ne-quote\"><p id=\"ub1502298\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--orphan</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> new_branch</span></p></div><p id=\"uaf5f6b72\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">这个命令会创建一个全新的，完全没有历史记录的新分支，但当前源分支上所有的最新文件都还在，真是强迫症患者的福音，但这个新分支必须做一次</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git commit</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">操作后才会真正成为一个新分支。</span></p><div class=\"ne-quote\"><p id=\"ud9f78b1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git checkout -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">p</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> other_branch</span></p></div><p id=\"u666f5621\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">这个命令主要用来比较两个分支间的差异内容，并提供交互式的界面来选择进一步的操作，这个命令不仅可以比较两个分支间的差异，还可以比较单个文件的差异。</span></p><h4 id=\"nxrwG\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git stash</span></strong></h4><p id=\"u37adffc1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">在</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">Git</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">的栈中保存当前修改或删除的工作进度，当你在一个分支里做某项功能开发时，接到通知把昨天已经测试完没问题的代码发布到线上，但这时你已经在这个分支里加入了其它未提交的代码，这个时候就可以把这些未提交的代码存到栈里。</span></p><div class=\"ne-quote\"><p id=\"u1adcb02e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash</span></p></div><p id=\"ud3fe4b65\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将未提交的文件保存到Git栈中</span></p><p id=\"ud7110919\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash list</span></p><p id=\"u60c1ebb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">查看栈中保存的列表</span></p><div class=\"ne-quote\"><p id=\"ua3737692\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash show </span><span class=\"ne-text\" style=\"color: rgb(64, 120, 242); font-size: 14px\">stash@</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}</span></p></div><p id=\"ua19681f8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示栈中其中一条记录</span></p><div class=\"ne-quote\"><p id=\"ud1bd1c92\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash drop </span><span class=\"ne-text\" style=\"color: rgb(64, 120, 242); font-size: 14px\">stash@</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}</span></p></div><p id=\"u201bfc57\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">移除栈中其中一条记录</span></p><div class=\"ne-quote\"><p id=\"ua1f6633f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">pop</span></p></div><p id=\"u862b3c26\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从Git栈中检出最新保存的一条记录，并将它从栈中移除</span></p><div class=\"ne-quote\"><p id=\"u0367e259\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash apply </span><span class=\"ne-text\" style=\"color: rgb(64, 120, 242); font-size: 14px\">stash@</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}</span></p></div><p id=\"u246c00ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">从Git栈中检出其中一条记录，但不从栈中移除</span></p><div class=\"ne-quote\"><p id=\"u8ec825e4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash branch new_banch</span></p></div><p id=\"uc39a2733\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">把当前栈中最近一次记录检出并创建一个新分支</span></p><div class=\"ne-quote\"><p id=\"u300e9de6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">clear</span></p></div><p id=\"uba5b04cd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">清空栈里的所有记录</span></p><div class=\"ne-quote\"><p id=\"ue0adcd8c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">create</span></p></div><p id=\"uda445761\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">为当前修改或删除的文件创建一个自定义的栈并返回一个ID，此时并未真正存储到栈里</span></p><div class=\"ne-quote\"><p id=\"u24ba3bd5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash store xxxxxx</span></p></div><p id=\"u2a79af0f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">将</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">create</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">方法里返回的ID放到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">store</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">后面，此时在栈里真正创建了一个记录，但当前修改或删除的文件并未从工作区移除</span></p><p id=\"uae498c65\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">$ </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash create09eb9a97ad632d0825be1ece361936d1d0bdb5c7</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">$ </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash store 09eb9a97ad632d0825be1ece361936d1d0bdb5c7</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">$ </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git stash liststash@{</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">}: Created via </span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;git stash store&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">.</span></p><h3 id=\"sn0tm\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">操作历史</span></strong></h3><h4 id=\"LR63L\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git log</span></strong></h4><p id=\"ud4f9bff2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">显示提交历史记录</span></p><p id=\"u37531f0a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">p</span></p><p id=\"u86d1eca5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示带提交差异对比的历史记录</span></p><p id=\"ua35699ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> demo.html</span></p><p id=\"u1990dcbd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">demo.html</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">文件的历史记录</span></p><p id=\"u124fa74a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> --since=</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;2 weeks ago&quot;</span></p><p id=\"u40716aa8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示2周前开始到现在的历史记录，其它时间可以类推</span></p><p id=\"uec1b7a02\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> --before=</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;2 weeks ago&quot;</span></p><p id=\"u9f472aea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示截止到2周前的历史记录，其它时间可以类推</span></p><p id=\"u2494fe36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">-</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">10</span></p><p id=\"u594425a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示最近10条历史记录</span></p><p id=\"u2bf2e15b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> f5f630a..HEAD</span></p><p id=\"uf465da1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">显示从提交ID</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">f5f6</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">30</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">a</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">之间的记录，</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">可以为空或其它提交ID</span></p><p id=\"u057aea01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(193, 132, 1); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span><em><span class=\"ne-text\" style=\"color: rgb(160, 161, 167); font-size: 14px\">--pretty=oneline</span></em></p><p id=\"u9704b74d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">在一行中输出简短的历史记录</span></p><p id=\"u64f44981\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">log</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> --pretty=</span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); font-size: 14px\">format</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">:</span><span class=\"ne-text\" style=\"color: rgb(80, 161, 79); font-size: 14px\">&quot;%h&quot;</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"u7eea6c5d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">格式化输出历史记录</span></p><p id=\"u1ed3a911\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">Git</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">用各种</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">placeholder</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">来决定各种显示内容，我挑几个常用的显示如下：</span></p><ul class=\"ne-ul\"><li id=\"u8b557dfd\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%H: commit hash</span></li><li id=\"u40112c96\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%h: 缩短的commit hash</span></li><li id=\"u5db80c75\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%T: tree hash</span></li><li id=\"u695af25a\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%t: 缩短的 tree hash</span></li><li id=\"uf3a9d801\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%P: parent hashes</span></li><li id=\"u6933418f\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%p: 缩短的 parent hashes</span></li><li id=\"u1b3c4c8c\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%an: 作者名字</span></li><li id=\"uf1dac694\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%aN: mailmap的作者名</span></li><li id=\"u3a4a9a0a\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ae: 作者邮箱</span></li><li id=\"ub5d62d1f\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ad: 日期 (--date= 制定的格式)</span></li><li id=\"u1770269e\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ar: 日期, 相对格式(1 day ago)</span></li><li id=\"u09641d5f\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%cn: 提交者名字</span></li><li id=\"u4a263246\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%ce: 提交者 email</span></li><li id=\"u4e465477\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%cd: 提交日期 (--date= 制定的格式)</span></li><li id=\"u2a67e353\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%cr: 提交日期, 相对格式(1 day ago)</span></li><li id=\"u8448afaa\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%d: ref名称</span></li><li id=\"u59e3c1f4\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%s: commit信息标题</span></li><li id=\"uc74c154a\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%b: commit信息内容</span></li><li id=\"u3bd5dcd8\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">%n: 换行</span></li></ul><h4 id=\"RrKow\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git cherry-pick</span></strong></h4><p id=\"u70439507\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">合并分支的一条或几条提交记录到当前分支末梢</span></p><p id=\"u1511bd6f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git cherry-pick 170a305</span></p><p id=\"u1c11637b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并提交ID</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">170a</span><em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">30</span></em><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">5</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">到当前分支末梢</span></p><h4 id=\"fioVx\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git reset</span></strong></h4><p id=\"u301e7d1d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">将当前的分支重设(reset)到指定的</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">或者</span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">HEAD</span></p><p id=\"u519965db\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git reset </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--mixed</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"u95b852eb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">--mixed</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">是不带参数时的默认参数，它退回到某个版本，保留文件内容，回退提交历史</span></p><p id=\"uf2618e3f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git reset </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--soft</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"uacea25f8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">暂存区和工作区中的内容不作任何改变，仅仅把</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指向</span></p><p id=\"ucce4b507\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git reset </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); font-size: 14px\">--hard</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> </span></p><p id=\"ua87e3e0b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">自从</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">以来在工作区中的任何改变都被丢弃，并把</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">指向</span></p><h4 id=\"qqmG3\"><strong><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">git rebase</span></strong></h4><p id=\"ud3309f09\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244); font-size: 16px\">重新定义分支的版本库状态</span></p><p id=\"u9fd633ec\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rebase branch_name</span></p><p id=\"u05dc2430\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并分支，这跟</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">merge</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">很像，但还是有本质区别，看下图：</span></p><p id=\"ua10fe777\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">合并过程中可能需要先解决冲突，然后执行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">git rebase --continue</span></p><p id=\"udee0d5c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\">git rebase -</span><span class=\"ne-text\" style=\"color: rgb(228, 86, 73); font-size: 14px\">i</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 16px\"> HEAD~~</span></p><p id=\"u61bac1ae\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">打开文本编辑器，将看到从</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">到</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">HEAD~~</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 19px\">的提交如下</span></p><p id=\"u31cd2e1a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">pick </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">9</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">a54fd4 添加</span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">的说明pick </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">0</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">d4a808 添加pull的说明# Rebase </span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">326</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">fc9f.</span><span class=\"ne-text\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250); font-size: 14px\">.0</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">d4a808 onto d286baa## Commands:# p, pick </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"># r, reword </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">, but edit the </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> message# e, edit </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">, but stop </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">for</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> amending# s, squash </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> use </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">, but meld </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">into</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> previous </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">commit</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"># f, fixup </span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\">=</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> </span><span class=\"ne-text\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250); font-size: 14px\">like</span><span class=\"ne-text\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); font-size: 14px\"> &quot;squash</span></p><p id=\"ud8974b43\" class=\"ne-p\"><br></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"paragraphSpacing\" content=\"relax\" /><p data-lake-id=\"u513517db\" id=\"u513517db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [git,命令行,入门]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"ub1c8b387\" id=\"ub1c8b387\"><span data-lake-id=\"u2ecd1ded\" id=\"u2ecd1ded\" style=\"color: rgb(38, 38, 38)\">copyright_url:  </span><span data-lake-id=\"u644314bf\" id=\"u644314bf\">github</span><em><span data-lake-id=\"ua651e103\" id=\"ua651e103\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">.com</span></em><span data-lake-id=\"ufb0936ac\" id=\"ufb0936ac\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">/gafish/gafish.github</span><em><span data-lake-id=\"u3aa0d87a\" id=\"u3aa0d87a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">.com</span></em></p><p data-lake-id=\"u9bf78c17\" id=\"u9bf78c17\"><span data-lake-id=\"u0790ae56\" id=\"u0790ae56\" style=\"color: rgb(38, 38, 38)\">copyright_author: </span><span data-lake-id=\"u0c4a65bc\" id=\"u0c4a65bc\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">gafish</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22B5MVm%22%7D\"></card><h2 data-lake-id=\"znwpE\" id=\"znwpE\"><strong><span data-lake-id=\"u43ddf3e6\" id=\"u43ddf3e6\" style=\"color: rgb(79, 79, 79)\">Git简介</span></strong></h2><h2 data-lake-id=\"ZZ7Ze\" id=\"ZZ7Ze\"><span data-lake-id=\"uee211510\" id=\"uee211510\" style=\"color: rgb(79, 79, 79)\">Git 是一种</span><span data-lake-id=\"uf2d77187\" id=\"uf2d77187\">分布式</span><span data-lake-id=\"u6481c1f3\" id=\"u6481c1f3\" style=\"color: rgb(79, 79, 79)\">版本控制系统，它可以不受网络连接的限制，</span><em><span data-lake-id=\"u09e9367e\" id=\"u09e9367e\" style=\"color: rgb(79, 79, 79)\">加上</span></em><span data-lake-id=\"u029e9ff1\" id=\"u029e9ff1\" style=\"color: rgb(79, 79, 79)\">其它众多优点，目前已经成为程序开发人员做项目版本管理时的首选，非开发人员也可以用 Git 来做自己的文档版本管理工具。</span></h2><p data-lake-id=\"uc0bcc402\" id=\"uc0bcc402\"><em><span data-lake-id=\"u51d494b5\" id=\"u51d494b5\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">2013</span></em><span data-lake-id=\"u3a28aff3\" id=\"u3a28aff3\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">年，淘宝前端团队开始全面采用 Git 来做项目管理，我也是那个时候开始接触和使用，从一开始的零接触到现在的重度依赖，真是感叹 Git 的强大。</span></p><p data-lake-id=\"uf53bf210\" id=\"uf53bf210\"><span data-lake-id=\"u44f801a3\" id=\"u44f801a3\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">Git 的api很多，但其实平时项目中90%的需求都只需要用到几个基本的功能即可，所以本文将从 实用主义 和 深入探索 2个方面去谈谈如何在项目中使用 Git，一般来说，看完 实用主义 这一节就可以开始在项目中动手用。</span></p><p data-lake-id=\"uaf8a6507\" id=\"uaf8a6507\"><span data-lake-id=\"u56a62fd5\" id=\"u56a62fd5\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><h3 data-lake-id=\"nFiXQ\" id=\"nFiXQ\"><strong><span data-lake-id=\"u2013c75c\" id=\"u2013c75c\" style=\"color: rgb(79, 79, 79)\">常用操作</span></strong></h3><p data-lake-id=\"u51f4e4d1\" id=\"u51f4e4d1\"><span data-lake-id=\"u442aa4ca\" id=\"u442aa4ca\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">所谓实用主义，就是掌握了以下知识就可以玩转</span><span data-lake-id=\"u02c9470f\" id=\"u02c9470f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ud81c160c\" id=\"ud81c160c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u169d99e2\" id=\"u169d99e2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">，轻松应对90%以上的需求。以下是实用主义型的Git命令列表，先大致看一下</span></p><ul list=\"u9aae730b\"><li fid=\"u816349e3\" data-lake-id=\"u557343f8\" id=\"u557343f8\"><span data-lake-id=\"ua7f41301\" id=\"ua7f41301\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git clone</span></li><li fid=\"u816349e3\" data-lake-id=\"u40f97fe5\" id=\"u40f97fe5\"><span data-lake-id=\"uc7a25e4b\" id=\"uc7a25e4b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git config</span></li><li fid=\"u816349e3\" data-lake-id=\"ue5bf1bd4\" id=\"ue5bf1bd4\"><span data-lake-id=\"uf95884b6\" id=\"uf95884b6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch</span></li><li fid=\"u816349e3\" data-lake-id=\"u3e9de144\" id=\"u3e9de144\"><span data-lake-id=\"u9bbf303b\" id=\"u9bbf303b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git checkout</span></li><li fid=\"u816349e3\" data-lake-id=\"u97711571\" id=\"u97711571\"><span data-lake-id=\"u0e0dca00\" id=\"u0e0dca00\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git status</span></li><li fid=\"u816349e3\" data-lake-id=\"u68ef6514\" id=\"u68ef6514\"><span data-lake-id=\"u66afaa1e\" id=\"u66afaa1e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git add</span></li><li fid=\"u816349e3\" data-lake-id=\"u01e946bf\" id=\"u01e946bf\"><span data-lake-id=\"uc67fb931\" id=\"uc67fb931\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git commit</span></li><li fid=\"u816349e3\" data-lake-id=\"u3dd3cca6\" id=\"u3dd3cca6\"><span data-lake-id=\"u57da3887\" id=\"u57da3887\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git push</span></li><li fid=\"u816349e3\" data-lake-id=\"u1a3d02f0\" id=\"u1a3d02f0\"><span data-lake-id=\"u7554124d\" id=\"u7554124d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git pull</span></li><li fid=\"u816349e3\" data-lake-id=\"uc84416b1\" id=\"uc84416b1\"><span data-lake-id=\"u3f2bc782\" id=\"u3f2bc782\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git log</span></li><li fid=\"u816349e3\" data-lake-id=\"u043f3cfb\" id=\"u043f3cfb\"><span data-lake-id=\"u8fe291d9\" id=\"u8fe291d9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git tag</span></li></ul><p data-lake-id=\"ue4333e7f\" id=\"ue4333e7f\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671686498-4e6505ed-9ce6-4102-8c33-40c9b3e80ff9.png%22%2C%22taskId%22%3A%22u6095db4b-82d4-4134-8552-88bb6dd497c%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A78685%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A640%2C%22originHeight%22%3A324%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22GAFISH.GITHUB.COM%20%E5%93%81%E5%93%81%20%E6%9C%AC%E5%93%81%20%E6%90%9C%E7%B4%A2%20_CONFIG.YML%20GITIGNORE%202019%20LAYOUTS%20IMAGES%20README.MD%20DEMO%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A224.3788%2C%22y%22%3A2.906952%2C%22width%22%3A119.86939999999998%2C%22height%22%3A15.130113999999999%2C%22text%22%3A%22GAFISH.GITHUB.COM%22%7D%2C%7B%22x%22%3A12.3048935%2C%22y%22%3A28.988165%2C%22width%22%3A19.371176499999997%2C%22height%22%3A14.578058000000002%2C%22text%22%3A%22%E5%93%81%E5%93%81%22%7D%2C%7B%22x%22%3A142.72435%2C%22y%22%3A29.339941%2C%22width%22%3A30.540350000000018%2C%22height%22%3A16.760763%2C%22text%22%3A%22%E6%9C%AC%E5%93%81%22%7D%2C%7B%22x%22%3A393.29224%2C%22y%22%3A29.333328%2C%22width%22%3A28.79115999999999%2C%22height%22%3A15.602632%2C%22text%22%3A%22%E6%90%9C%E7%B4%A2%22%7D%2C%7B%22x%22%3A31.697044%2C%22y%22%3A142.4865%2C%22width%22%3A69.64790599999999%2C%22height%22%3A15.454679999999996%2C%22text%22%3A%22_CONFIG.YML%22%7D%2C%7B%22x%22%3A393.3137%2C%22y%22%3A142.96892%2C%22width%22%3A58.961659999999995%2C%22height%22%3A16.13318000000001%2C%22text%22%3A%22GITIGNORE%22%7D%2C%7B%22x%22%3A524.01874%2C%22y%22%3A144.67357%2C%22width%22%3A31.125760000000014%2C%22height%22%3A12.000810000000001%2C%22text%22%3A%222019%22%7D%2C%7B%22x%22%3A160.80972%2C%22y%22%3A145.3422%2C%22width%22%3A48.48080999999999%2C%22height%22%3A12.842030000000022%2C%22text%22%3A%22LAYOUTS%22%7D%2C%7B%22x%22%3A159.96465%2C%22y%22%3A264.9232%2C%22width%22%3A46.677490000000006%2C%22height%22%3A14.41212999999999%2C%22text%22%3A%22IMAGES%22%7D%2C%7B%22x%22%3A263.02084%2C%22y%22%3A264.68115%2C%22width%22%3A79.76185999999996%2C%22height%22%3A13.924199999999985%2C%22text%22%3A%22README.MD%22%7D%2C%7B%22x%22%3A47.106537%2C%22y%22%3A266.08786%2C%22width%22%3A35.552977999999996%2C%22height%22%3A12.263670000000047%2C%22text%22%3A%22DEMO%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u55561295%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671686664-5fc180ee-3e8c-4b88-9462-ab42b30ad2cc.png%22%2C%22taskId%22%3A%22ufd323d13-311c-4805-9716-cbbe01f5292%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A53724%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A458%2C%22originHeight%22%3A234%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E5%B7%A5%E4%BD%9C%E5%8C%BA%20%E7%89%88%E6%9C%AC%E5%BA%93%20HEAD%20STAGE%20MASTER%20%E8%87%AA%E7%9B%AE%E7%9B%AE%E6%97%A5%20ADD%20%E7%9B%AE%E7%9B%AE%E7%9B%AE%E6%97%A5%E4%BA%A7%20%E7%A6%8F%20COMMIT%20%E5%9B%9B%E5%9B%9B%20%E5%9B%9B%E5%9B%9B%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A14.06364%2C%22y%22%3A-0.29260507%2C%22width%22%3A41.08747%2C%22height%22%3A13.14290807%2C%22text%22%3A%22%E5%B7%A5%E4%BD%9C%E5%8C%BA%22%7D%2C%7B%22x%22%3A163.6356%2C%22y%22%3A0.5796382%2C%22width%22%3A40.512849999999986%2C%22height%22%3A12.039241800000001%2C%22text%22%3A%22%E7%89%88%E6%9C%AC%E5%BA%93%22%7D%2C%7B%22x%22%3A273.8652%2C%22y%22%3A20.230286%2C%22width%22%3A36.22363999999999%2C%22height%22%3A12.620578000000002%2C%22text%22%3A%22HEAD%22%7D%2C%7B%22x%22%3A201.36375%2C%22y%22%3A52.243988%2C%22width%22%3A34.031530000000004%2C%22height%22%3A12.692331999999993%2C%22text%22%3A%22STAGE%22%7D%2C%7B%22x%22%3A361.32974%2C%22y%22%3A52.281998%2C%22width%22%3A40.87241%2C%22height%22%3A11.184252%2C%22text%22%3A%22MASTER%22%7D%2C%7B%22x%22%3A27.88733%2C%22y%22%3A54.470318%2C%22width%22%3A22.05829%2C%22height%22%3A111.11182200000002%2C%22text%22%3A%22%E8%87%AA%E7%9B%AE%E7%9B%AE%E6%97%A5%22%7D%2C%7B%22x%22%3A101.82983%2C%22y%22%3A55.44784%2C%22width%22%3A29.454809999999995%2C%22height%22%3A13.984944999999996%2C%22text%22%3A%22ADD%22%7D%2C%7B%22x%22%3A369.9482%2C%22y%22%3A89.15277%2C%22width%22%3A21.40780000000001%2C%22height%22%3A110.92195000000001%2C%22text%22%3A%22%E7%9B%AE%E7%9B%AE%E7%9B%AE%E6%97%A5%E4%BA%A7%22%7D%2C%7B%22x%22%3A208.77478%2C%22y%22%3A97.045235%2C%22width%22%3A33.019239999999996%2C%22height%22%3A60.009585%2C%22text%22%3A%22%E7%A6%8F%22%7D%2C%7B%22x%22%3A274.79007%2C%22y%22%3A100.724236%2C%22width%22%3A53.98079999999999%2C%22height%22%3A13.934483999999998%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A46.16397%2C%22y%22%3A121.554565%2C%22width%22%3A16.966462%2C%22height%22%3A47.94665499999999%2C%22text%22%3A%22%E5%9B%9B%E5%9B%9B%22%7D%2C%7B%22x%22%3A390.1274%2C%22y%22%3A160.10559%2C%22width%22%3A14.756019999999978%2C%22height%22%3A43.93537999999998%2C%22text%22%3A%22%E5%9B%9B%E5%9B%9B%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uca453c49%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671686899-ade3969a-681e-4639-950b-a70514bfb16c.png%22%2C%22taskId%22%3A%22u1aeedec3-b58d-464a-b0cd-80809cff186%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A139904%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A640%2C%22originHeight%22%3A366%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22GAFISH%2FGAFISH.GITHUB.COM%20FORK%20UNSTAR%20UNWATCH%20PROJECTS%20O%20PULL%20REQUESTS%20O%20INSIGHTSETTINGS%20%E7%85%A7WKI%20SECURITY%20ISSUES%200%20%3C%3ECODE%20I'M%20GAFISH%20HTTP%3A%2F%2FGAFISH.GITHUB.IO%20MANAGE%20TOPLCS%20320%20COMMITS%20U1BRANCH%20RELEASES%201%20ENVIRONMENT%20%26T%201%20CONTRIBUTOR%20FIND%20FILE%20UPLOAD%20FILES%20CREATE%20NEW%20FILE%20NEW%20PULL%20REQUEST%20BRANCH%3AMASTER%20CIONE%20OR%20DOWNLOAD%20LATEST%20COMMIT%20DC8DFBD%205%20HOURS%20AGO%20GAFISH%20%E6%B7%BB%E5%8A%A0%E9%93%BE%E6%8E%A5%20%E6%B7%BB%E5%8A%A0GIT%20%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%202019%205%20HOURS%20AGO%205%20DAYS%20AGO%20ADD%20JAYOUTS%2FDEMO%20LAYOUTS%205%20DAYS%20AGO%20ADD%20%20LAYOUTS%2FDEMO%20DEMO%205%20HOURS%20AGO%20%E6%B7%BB%E5%8A%A0GIT%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%20IMAGES%2024%20DAYS%20AGO%202019%2F5%2F30%20GITIGNORE%205%20HOURS%20AGO%20%E6%B7%BB%E5%8A%A0%E9%93%BE%E6%8E%A5%20README.MD%2024%20DAYS%20AGO%20W2019%2F5%2F30WM%20-CONFIG.YML%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A14.902516%2C%22y%22%3A7.530416%2C%22width%22%3A145.770734%2C%22height%22%3A13.674656000000002%2C%22text%22%3A%22GAFISH%2FGAFISH.GITHUB.COM%22%7D%2C%7B%22x%22%3A592.0616%2C%22y%22%3A9.716362%2C%22width%22%3A19.572739999999953%2C%22height%22%3A7.850950000000001%2C%22text%22%3A%22FORK%22%7D%2C%7B%22x%22%3A516.51965%2C%22y%22%3A10.553655%2C%22width%22%3A25.397550000000024%2C%22height%22%3A6.980273%2C%22text%22%3A%22UNSTAR%22%7D%2C%7B%22x%22%3A427.10892%2C%22y%22%3A10.010165%2C%22width%22%3A36.083339999999964%2C%22height%22%3A8.00694%2C%22text%22%3A%22UNWATCH%22%7D%2C%7B%22x%22%3A228.84016%2C%22y%22%3A40.33774%2C%22width%22%3A54.08779000000001%2C%22height%22%3A11.775300000000001%2C%22text%22%3A%22PROJECTS%20O%22%7D%2C%7B%22x%22%3A132.9238%2C%22y%22%3A40.787918%2C%22width%22%3A73.739%2C%22height%22%3A11.844799000000002%2C%22text%22%3A%22PULL%20REQUESTS%20O%22%7D%2C%7B%22x%22%3A409.9373%2C%22y%22%3A41.06664%2C%22width%22%3A110.19155000000006%2C%22height%22%3A12.154387%2C%22text%22%3A%22INSIGHTSETTINGS%22%7D%2C%7B%22x%22%3A301.13016%2C%22y%22%3A41.41264%2C%22width%22%3A32.40286000000003%2C%22height%22%3A10.010504999999995%2C%22text%22%3A%22%E7%85%A7WKI%22%7D%2C%7B%22x%22%3A351.6858%2C%22y%22%3A41.795048%2C%22width%22%3A43.46956%2C%22height%22%3A10.557719999999996%2C%22text%22%3A%22SECURITY%22%7D%2C%7B%22x%22%3A76.150276%2C%22y%22%3A41.902466%2C%22width%22%3A38.20004399999999%2C%22height%22%3A9.185314000000005%2C%22text%22%3A%22ISSUES%200%22%7D%2C%7B%22x%22%3A15.967092%2C%22y%22%3A42.19801%2C%22width%22%3A33.389933%2C%22height%22%3A8.582220000000007%2C%22text%22%3A%22%3C%3ECODE%22%7D%2C%7B%22x%22%3A5.3928933%2C%22y%22%3A76.51272%2C%22width%22%3A157.8093667%2C%22height%22%3A11.517250000000004%2C%22text%22%3A%22I'M%20GAFISH%20HTTP%3A%2F%2FGAFISH.GITHUB.IO%22%7D%2C%7B%22x%22%3A7.7280107%2C%22y%22%3A98.604095%2C%22width%22%3A54.8249493%2C%22height%22%3A8.336524999999995%2C%22text%22%3A%22MANAGE%20TOPLCS%22%7D%2C%7B%22x%22%3A36.597042%2C%22y%22%3A127.02585%2C%22width%22%3A68.702538%2C%22height%22%3A10.017880000000005%2C%22text%22%3A%22320%20COMMITS%22%7D%2C%7B%22x%22%3A173.98363%2C%22y%22%3A127.41699%2C%22width%22%3A44.74983%2C%22height%22%3A9.40943999999999%2C%22text%22%3A%22U1BRANCH%22%7D%2C%7B%22x%22%3A314.68564%2C%22y%22%3A127.98748%2C%22width%22%3A34.67431000000005%2C%22height%22%3A8.667219999999986%2C%22text%22%3A%22RELEASES%22%7D%2C%7B%22x%22%3A423.74814%2C%22y%22%3A128.31056%2C%22width%22%3A60.274320000000046%2C%22height%22%3A8.833339999999993%2C%22text%22%3A%221%20ENVIRONMENT%22%7D%2C%7B%22x%22%3A541.30426%2C%22y%22%3A129.18289%2C%22width%22%3A65.59094000000005%2C%22height%22%3A8.154890000000023%2C%22text%22%3A%22%26T%201%20CONTRIBUTOR%22%7D%2C%7B%22x%22%3A499.2999%2C%22y%22%3A165.32063%2C%22width%22%3A34.16037000000006%2C%22height%22%3A9.697670000000016%2C%22text%22%3A%22FIND%20FILE%22%7D%2C%7B%22x%22%3A440.8445%2C%22y%22%3A166.24341%2C%22width%22%3A47.519480000000044%2C%22height%22%3A9.047889999999995%2C%22text%22%3A%22UPLOAD%20FILES%22%7D%2C%7B%22x%22%3A371.99826%2C%22y%22%3A166.30943%2C%22width%22%3A58.63018999999997%2C%22height%22%3A8.88948000000002%2C%22text%22%3A%22CREATE%20NEW%20FILE%22%7D%2C%7B%22x%22%3A95.46157%2C%22y%22%3A166.63713%2C%22width%22%3A66.96722%2C%22height%22%3A8.611239999999981%2C%22text%22%3A%22NEW%20PULL%20REQUEST%22%7D%2C%7B%22x%22%3A13.467033%2C%22y%22%3A166.77226%2C%22width%22%3A61.915867000000006%2C%22height%22%3A7.413850000000025%2C%22text%22%3A%22BRANCH%3AMASTER%22%7D%2C%7B%22x%22%3A552.1112%2C%22y%22%3A166.85841%2C%22width%22%3A75.28519999999992%2C%22height%22%3A7.715190000000007%2C%22text%22%3A%22CIONE%20OR%20DOWNLOAD%22%7D%2C%7B%22x%22%3A490.60666%2C%22y%22%3A195.04237%2C%22width%22%3A140.50619%2C%22height%22%3A10.981979999999993%2C%22text%22%3A%22LATEST%20COMMIT%20DC8DFBD%205%20HOURS%20AGO%22%7D%2C%7B%22x%22%3A30.030664%2C%22y%22%3A194.3138%2C%22width%22%3A58.452551%2C%22height%22%3A10.034880000000015%2C%22text%22%3A%22GAFISH%20%E6%B7%BB%E5%8A%A0%E9%93%BE%E6%8E%A5%22%7D%2C%7B%22x%22%3A229.55186%2C%22y%22%3A217.83789%2C%22width%22%3A87.91936000000001%2C%22height%22%3A11.5094%2C%22text%22%3A%22%E6%B7%BB%E5%8A%A0GIT%20%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%22%7D%2C%7B%22x%22%3A25.473167%2C%22y%22%3A218.6119%2C%22width%22%3A22.404233%2C%22height%22%3A9.895129999999995%2C%22text%22%3A%222019%22%7D%2C%7B%22x%22%3A578.89703%2C%22y%22%3A218.79091%2C%22width%22%3A52.11997000000008%2C%22height%22%3A10.315670000000011%2C%22text%22%3A%225%20HOURS%20AGO%22%7D%2C%7B%22x%22%3A583.17413%2C%22y%22%3A239.58784%2C%22width%22%3A47.34757000000002%2C%22height%22%3A11.329559999999987%2C%22text%22%3A%225%20DAYS%20AGO%22%7D%2C%7B%22x%22%3A229.49611%2C%22y%22%3A239.67513%2C%22width%22%3A81.25224000000003%2C%22height%22%3A10.515100000000018%2C%22text%22%3A%22ADD%20JAYOUTS%2FDEMO%22%7D%2C%7B%22x%22%3A28.016851%2C%22y%22%3A240.57039%2C%22width%22%3A33.810496%2C%22height%22%3A9.48418000000001%2C%22text%22%3A%22LAYOUTS%22%7D%2C%7B%22x%22%3A582.9572%2C%22y%22%3A260.4746%2C%22width%22%3A47.62160000000006%2C%22height%22%3A11.497419999999977%2C%22text%22%3A%225%20DAYS%20AGO%22%7D%2C%7B%22x%22%3A229.41478%2C%22y%22%3A261.1702%2C%22width%22%3A80.76096999999999%2C%22height%22%3A9.76649999999995%2C%22text%22%3A%22ADD%20%20LAYOUTS%2FDEMO%22%7D%2C%7B%22x%22%3A26.895247%2C%22y%22%3A263.072%2C%22width%22%3A24.006742999999997%2C%22height%22%3A8.181080000000009%2C%22text%22%3A%22DEMO%22%7D%2C%7B%22x%22%3A578.9821%2C%22y%22%3A281.37628%2C%22width%22%3A51.861830000000054%2C%22height%22%3A11.356449999999995%2C%22text%22%3A%225%20HOURS%20AGO%22%7D%2C%7B%22x%22%3A229.83862%2C%22y%22%3A281.3837%2C%22width%22%3A86.58802000000003%2C%22height%22%3A10.75824%2C%22text%22%3A%22%E6%B7%BB%E5%8A%A0GIT%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%22%7D%2C%7B%22x%22%3A26.614471%2C%22y%22%3A284.07495%2C%22width%22%3A30.784546%2C%22height%22%3A8.585050000000024%2C%22text%22%3A%22IMAGES%22%7D%2C%7B%22x%22%3A577.1397%2C%22y%22%3A302.42886%2C%22width%22%3A53.74790000000007%2C%22height%22%3A11.277770000000032%2C%22text%22%3A%2224%20DAYS%20AGO%22%7D%2C%7B%22x%22%3A230.2408%2C%22y%22%3A303.26596%2C%22width%22%3A71.51680000000002%2C%22height%22%3A10.283079999999984%2C%22text%22%3A%222019%2F5%2F30%22%7D%2C%7B%22x%22%3A27.62237%2C%22y%22%3A304.6945%2C%22width%22%3A39.545559999999995%2C%22height%22%3A9.43907999999999%2C%22text%22%3A%22GITIGNORE%22%7D%2C%7B%22x%22%3A578.365%2C%22y%22%3A323.3466%2C%22width%22%3A52.64300000000003%2C%22height%22%3A12.453749999999957%2C%22text%22%3A%225%20HOURS%20AGO%22%7D%2C%7B%22x%22%3A229.45221%2C%22y%22%3A323.94455%2C%22width%22%3A39.072509999999994%2C%22height%22%3A10.422390000000007%2C%22text%22%3A%22%E6%B7%BB%E5%8A%A0%E9%93%BE%E6%8E%A5%22%7D%2C%7B%22x%22%3A25.898155%2C%22y%22%3A324.5292%2C%22width%22%3A54.256119%2C%22height%22%3A9.920230000000004%2C%22text%22%3A%22README.MD%22%7D%2C%7B%22x%22%3A577.51495%2C%22y%22%3A345.3545%2C%22width%22%3A53.43674999999996%2C%22height%22%3A11.56982000000005%2C%22text%22%3A%2224%20DAYS%20AGO%22%7D%2C%7B%22x%22%3A230.89983%2C%22y%22%3A346.10437%2C%22width%22%3A71.67001999999997%2C%22height%22%3A9.970789999999965%2C%22text%22%3A%22W2019%2F5%2F30WM%22%7D%2C%7B%22x%22%3A27.546196%2C%22y%22%3A346.34775%2C%22width%22%3A47.07071400000001%2C%22height%22%3A9.693649999999991%2C%22text%22%3A%22-CONFIG.YML%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u616000cd%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671686737-ab17c403-4dc4-4566-92cb-b183855f0497.png%22%2C%22taskId%22%3A%22u7cea7c86-582c-4e0c-a620-1d93d8f8300%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A115706%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A640%2C%22originHeight%22%3A296%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22GIT%20PULL%20-GIT%20FETCH%20GIT%20CHECKOUT.%20%E8%BF%9C%E7%A8%8B%E7%89%88%E6%9C%AC%E5%BA%93%20%E6%9A%82%E5%AD%98%E5%8C%BA%20%E6%9C%AC%E5%9C%B0%E7%89%88%E6%9C%AC%E5%BA%93%20GIT%20DIFF%20%E5%B7%A5%E4%BD%9C%E5%8C%BA%20GIT%20ADD%20GIT%20COMMIT%20GIT%20PUSH%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A292.84058%2C%22y%22%3A19.223412%2C%22width%22%3A39.294550000000015%2C%22height%22%3A11.443190999999999%2C%22text%22%3A%22GIT%20PULL%22%7D%2C%7B%22x%22%3A456.53464%2C%22y%22%3A87.20156%2C%22width%22%3A57.06410999999997%2C%22height%22%3A16.027910000000006%2C%22text%22%3A%22-GIT%20FETCH%22%7D%2C%7B%22x%22%3A86.543816%2C%22y%22%3A99.35108%2C%22width%22%3A74.80492399999999%2C%22height%22%3A14.25067%2C%22text%22%3A%22GIT%20CHECKOUT.%22%7D%2C%7B%22x%22%3A539.9144%2C%22y%22%3A161.22687%2C%22width%22%3A69.25827000000004%2C%22height%22%3A13.979659999999996%2C%22text%22%3A%22%E8%BF%9C%E7%A8%8B%E7%89%88%E6%9C%AC%E5%BA%93%22%7D%2C%7B%22x%22%3A179.58508%2C%22y%22%3A162.04692%2C%22width%22%3A40.91602%2C%22height%22%3A14.645340000000004%2C%22text%22%3A%22%E6%9A%82%E5%AD%98%E5%8C%BA%22%7D%2C%7B%22x%22%3A363.82126%2C%22y%22%3A162.47565%2C%22width%22%3A67.33917000000002%2C%22height%22%3A13.659909999999996%2C%22text%22%3A%22%E6%9C%AC%E5%9C%B0%E7%89%88%E6%9C%AC%E5%BA%93%22%7D%2C%7B%22x%22%3A101.858086%2C%22y%22%3A161.17662%2C%22width%22%3A43.674524000000005%2C%22height%22%3A15.871549999999985%2C%22text%22%3A%22GIT%20DIFF%22%7D%2C%7B%22x%22%3A26.83383%2C%22y%22%3A164.19447%2C%22width%22%3A39.54177000000001%2C%22height%22%3A14.488380000000006%2C%22text%22%3A%22%E5%B7%A5%E4%BD%9C%E5%8C%BA%22%7D%2C%7B%22x%22%3A102.73432%2C%22y%22%3A241.11583%2C%22width%22%3A43.54410999999999%2C%22height%22%3A13.185550000000006%2C%22text%22%3A%22GIT%20ADD%22%7D%2C%7B%22x%22%3A262.3984%2C%22y%22%3A248.86888%2C%22width%22%3A65.73572000000001%2C%22height%22%3A12.146960000000036%2C%22text%22%3A%22GIT%20COMMIT%22%7D%2C%7B%22x%22%3A461.72806%2C%22y%22%3A257.51187%2C%22width%22%3A48.23290999999995%2C%22height%22%3A13.14545000000004%2C%22text%22%3A%22GIT%20PUSH%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u27f371ab%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671686998-830421b9-cb6e-4d43-bf5b-2903e5a03401.png%22%2C%22taskId%22%3A%22ud5e38bc0-e1f4-4c40-8c39-86f94f42fd8%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A213056%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A581%2C%22originHeight%22%3A477%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%8A%9F%E8%83%BD%20%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%9B%98%E7%9A%84%E9%94%99%E8%AF%AF%E6%94%B9%E6%AD%A3%201011100%20%E6%B7%BB%E5%8A%A0%E4%BB%BB%E5%8A%A1%E6%A0%85%20%E9%81%B5%E5%85%A5%E5%90%84%E8%87%AA%E7%9A%84%E5%88%86%20%E6%94%AF%E5%90%88%E4%BD%93%E5%95%A6!%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A308.05026%2C%22y%22%3A19.18699%2C%22width%22%3A68.35407000000004%2C%22height%22%3A16.98789%2C%22text%22%3A%22%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%8A%9F%E8%83%BD%22%7D%2C%7B%22x%22%3A151.03215%2C%22y%22%3A106.00367%2C%22width%22%3A121.41869000000003%2C%22height%22%3A19.536789999999996%2C%22text%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%9B%98%E7%9A%84%E9%94%99%E8%AF%AF%E6%94%B9%E6%AD%A3%22%7D%2C%7B%22x%22%3A525.5289%2C%22y%22%3A267.16223%2C%22width%22%3A14.47115999999994%2C%22height%22%3A49.66654%2C%22text%22%3A%221011100%22%7D%2C%7B%22x%22%3A187.20422%2C%22y%22%3A364.09317%2C%22width%22%3A68.50310000000002%2C%22height%22%3A15.78290000000004%2C%22text%22%3A%22%E6%B7%BB%E5%8A%A0%E4%BB%BB%E5%8A%A1%E6%A0%85%22%7D%2C%7B%22x%22%3A422.4657%2C%22y%22%3A426.97165%2C%22width%22%3A79.49169999999998%2C%22height%22%3A15.445619999999963%2C%22text%22%3A%22%E9%81%B5%E5%85%A5%E5%90%84%E8%87%AA%E7%9A%84%E5%88%86%22%7D%2C%7B%22x%22%3A427.6361%2C%22y%22%3A441.94885%2C%22width%22%3A62.172619999999995%2C%22height%22%3A12.860749999999996%2C%22text%22%3A%22%E6%94%AF%E5%90%88%E4%BD%93%E5%95%A6!%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u11a52d81%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671687435-20cff5e6-38a9-47c6-855b-7fb6754210a1.png%22%2C%22taskId%22%3A%22u293070ff-80bd-4e88-9d06-60245b24711%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A63641%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A254%2C%22originHeight%22%3A378%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22MASTER%20DEVELOP%201.0%20%E4%B8%AA%E6%9C%88%E4%B8%8D%E5%8F%AA%E4%B8%8D%E5%8F%AA%E4%B8%8D%E6%96%AD%202.0%203.0%20%E5%BD%93%E5%89%8D%E5%BC%80%E5%8F%91%20%E8%BF%9B%E5%BA%A6%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A149.52153%2C%22y%22%3A0.9741497%2C%22width%22%3A33.8168%2C%22height%22%3A8.1906163%2C%22text%22%3A%22MASTER%22%7D%2C%7B%22x%22%3A76.16453%2C%22y%22%3A1.0059013%2C%22width%22%3A37.86098%2C%22height%22%3A8.1593047%2C%22text%22%3A%22DEVELOP%22%7D%2C%7B%22x%22%3A206.85823%2C%22y%22%3A61.22487%2C%22width%22%3A29.00725%2C%22height%22%3A17.86446%2C%22text%22%3A%221.0%22%7D%2C%7B%22x%22%3A78.436844%2C%22y%22%3A97.11312%2C%22width%22%3A28.383626000000007%2C%22height%22%3A241.11968000000002%2C%22text%22%3A%22%E4%B8%AA%E6%9C%88%E4%B8%8D%E5%8F%AA%E4%B8%8D%E5%8F%AA%E4%B8%8D%E6%96%AD%22%7D%2C%7B%22x%22%3A205.48889%2C%22y%22%3A229.87883%2C%22width%22%3A31.133669999999995%2C%22height%22%3A19.03006000000002%2C%22text%22%3A%222.0%22%7D%2C%7B%22x%22%3A204.71098%2C%22y%22%3A312.13553%2C%22width%22%3A31.087159999999983%2C%22height%22%3A17.807669999999973%2C%22text%22%3A%223.0%22%7D%2C%7B%22x%22%3A6.459307%2C%22y%22%3A332.16385%2C%22width%22%3A59.733808%2C%22height%22%3A16.639279999999985%2C%22text%22%3A%22%E5%BD%93%E5%89%8D%E5%BC%80%E5%8F%91%22%7D%2C%7B%22x%22%3A21.63469%2C%22y%22%3A349.7098%2C%22width%22%3A29.731901999999998%2C%22height%22%3A14.543770000000052%2C%22text%22%3A%22%E8%BF%9B%E5%BA%A6%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u876caa69%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671687671-da8a76e6-df6d-4cf3-9a51-218ac8ab1077.png%22%2C%22taskId%22%3A%22u98e58b70-4989-4f53-99d8-bb84017955f%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A70599%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A432%2C%22originHeight%22%3A204%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22CHECKOUT%3CCOMMIT-2%3E%20HEAD%20HEAD%20MASTER%20COMMIT%20COMMIT%20COMMIT%20COMMIT%202%203%201%204%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A66.47894%2C%22y%22%3A9.991931%2C%22width%22%3A184.32296%2C%22height%22%3A14.779521%2C%22text%22%3A%22CHECKOUT%3CCOMMIT-2%3E%22%7D%2C%7B%22x%22%3A356.0499%2C%22y%22%3A24.013992%2C%22width%22%3A40.396630000000016%2C%22height%22%3A12.644673000000001%2C%22text%22%3A%22HEAD%22%7D%2C%7B%22x%22%3A135.50832%2C%22y%22%3A41.40016%2C%22width%22%3A41.49392%2C%22height%22%3A14.296143999999998%2C%22text%22%3A%22HEAD%22%7D%2C%7B%22x%22%3A352.65%2C%22y%22%3A87.09844%2C%22width%22%3A50.49908000000005%2C%22height%22%3A10.897930000000002%2C%22text%22%3A%22MASTER%22%7D%2C%7B%22x%22%3A240.65894%2C%22y%22%3A147.68755%2C%22width%22%3A55.30936%2C%22height%22%3A13.023170000000022%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A14.951108%2C%22y%22%3A147.71819%2C%22width%22%3A56.035531999999996%2C%22height%22%3A13.156869999999998%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A130.08162%2C%22y%22%3A148.16078%2C%22width%22%3A56.39014%2C%22height%22%3A13.177460000000025%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A350.41373%2C%22y%22%3A148.62636%2C%22width%22%3A56.96273000000002%2C%22height%22%3A11.997129999999999%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A151.94154%2C%22y%22%3A168.55505%2C%22width%22%3A11.475310000000007%2C%22height%22%3A14.618490000000008%2C%22text%22%3A%222%22%7D%2C%7B%22x%22%3A262.71628%2C%22y%22%3A169.02415%2C%22width%22%3A8.909179999999992%2C%22height%22%3A14.175540000000012%2C%22text%22%3A%223%22%7D%2C%7B%22x%22%3A37.13407%2C%22y%22%3A169.03381%2C%22width%22%3A9.798209999999997%2C%22height%22%3A14.969900000000024%2C%22text%22%3A%221%22%7D%2C%7B%22x%22%3A374.0237%2C%22y%22%3A169.15065%2C%22width%22%3A10.017599999999959%2C%22height%22%3A12.63302999999999%2C%22text%22%3A%224%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ude0dba81%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671688072-682c9f07-f473-4ee4-a827-e5a4f0c28643.png%22%2C%22taskId%22%3A%22u5986454e-6dd2-41f2-94d0-bdb978e17e1%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A209459%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1028%2C%22originHeight%22%3A100%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22~%2FDESKTOP%2FDEMO%2FREADING-LIST(DAILY%2F0.0.1)%20GIT%20BRANCH%20YUANYINGEYYMAC%20-W%20*DAILY%2F0.0.1%202530D4B%20%5BORIGIN%2FDAILY%2F0.0.1%3AAHEAD%2016%5D16%5D1%20MV%20META%2022FF3CB%20%5BORIGIN%2FMASTER%5D%20UPDATE%20README.MD%20MASTER%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A225.4012%2C%22y%22%3A-0.07029918%2C%22width%22%3A573.9452%2C%22height%22%3A31.79783618%2C%22text%22%3A%22~%2FDESKTOP%2FDEMO%2FREADING-LIST(DAILY%2F0.0.1)%22%7D%2C%7B%22x%22%3A813.78503%2C%22y%22%3A1.8895361%2C%22width%22%3A148.06056999999998%2C%22height%22%3A30.0961969%2C%22text%22%3A%22GIT%20BRANCH%22%7D%2C%7B%22x%22%3A1.5854783%2C%22y%22%3A5.1496%2C%22width%22%3A205.6877417%2C%22height%22%3A26.6488%2C%22text%22%3A%22YUANYINGEYYMAC%22%7D%2C%7B%22x%22%3A964.93945%2C%22y%22%3A8.234026%2C%22width%22%3A49.202150000000074%2C%22height%22%3A19.434809%2C%22text%22%3A%22-W%22%7D%2C%7B%22x%22%3A23.05911%2C%22y%22%3A34.104008%2C%22width%22%3A711.5855399999999%2C%22height%22%3A30.961031999999996%2C%22text%22%3A%22*DAILY%2F0.0.1%202530D4B%20%5BORIGIN%2FDAILY%2F0.0.1%3AAHEAD%2016%5D16%5D1%22%7D%2C%7B%22x%22%3A741.3028%2C%22y%22%3A37.877598%2C%22width%22%3A36.441949999999906%2C%22height%22%3A22.655205000000002%2C%22text%22%3A%22MV%22%7D%2C%7B%22x%22%3A777.43726%2C%22y%22%3A65.11178%2C%22width%22%3A59.129639999999995%2C%22height%22%3A23.214920000000006%2C%22text%22%3A%22META%22%7D%2C%7B%22x%22%3A198.76927%2C%22y%22%3A68.3347%2C%22width%22%3A565.95383%2C%22height%22%3A27.09409000000001%2C%22text%22%3A%2222FF3CB%20%5BORIGIN%2FMASTER%5D%20UPDATE%20README.MD%22%7D%2C%7B%22x%22%3A30.52175%2C%22y%22%3A71.38186%2C%22width%22%3A86.89008%2C%22height%22%3A21.56586%2C%22text%22%3A%22MASTER%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u9579056c%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1652671688031-09984018-a557-44bb-82aa-e2839cfd72ef.gif%22%2C%22taskId%22%3A%22u432f01eb-fdee-43fe-ad90-d601c453e54%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A639%2C%22originHeight%22%3A348%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u34b59f79%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671688362-d3137c8d-d944-43b5-bb0f-cfae811111ab.png%22%2C%22taskId%22%3A%22uf582fb28-debe-4cfa-a357-76aa9df6a3d%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A122944%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A640%2C%22originHeight%22%3A531%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22MASTER%20MASTER%20FEATURE%20FEATURE%20MERGE%20COMMIT%20GIT%20MERGE%20--NO-FF%20GIT%20MERGE%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A433.72458%2C%22y%22%3A30.925623%2C%22width%22%3A83.20541999999995%2C%22height%22%3A18.303713000000002%2C%22text%22%3A%22MASTER%22%7D%2C%7B%22x%22%3A211.41547%2C%22y%22%3A30.27114%2C%22width%22%3A82.32723000000001%2C%22height%22%3A18.779860000000003%2C%22text%22%3A%22MASTER%22%7D%2C%7B%22x%22%3A565.7403%2C%22y%22%3A306.3029%2C%22width%22%3A70.51389999999992%2C%22height%22%3A18.890799999999956%2C%22text%22%3A%22FEATURE%22%7D%2C%7B%22x%22%3A2.6507118%2C%22y%22%3A308.86893%2C%22width%22%3A69.7207982%2C%22height%22%3A17.819870000000037%2C%22text%22%3A%22FEATURE%22%7D%2C%7B%22x%22%3A274.0345%2C%22y%22%3A401.1832%2C%22width%22%3A48.92012%2C%22height%22%3A12.283999999999992%2C%22text%22%3A%22MERGE%22%7D%2C%7B%22x%22%3A275.85095%2C%22y%22%3A418.949%2C%22width%22%3A56.29248000000001%2C%22height%22%3A11.6216%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A124.285675%2C%22y%22%3A495.58176%2C%22width%22%3A112.18653499999999%2C%22height%22%3A18.97064000000006%2C%22text%22%3A%22GIT%20MERGE%22%7D%2C%7B%22x%22%3A247.58748%2C%22y%22%3A495.72244%2C%22width%22%3A86.15666000000002%2C%22height%22%3A15.866559999999993%2C%22text%22%3A%22--NO-FF%22%7D%2C%7B%22x%22%3A417.2992%2C%22y%22%3A497.55765%2C%22width%22%3A113.63749999999999%2C%22height%22%3A20.688649999999996%2C%22text%22%3A%22GIT%20MERGE%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u3ebbaecf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1652671688436-f5282664-beec-4ec5-b12d-84aaec2c25a5.png%22%2C%22taskId%22%3A%22ue17028fa-fe27-4ddd-861c-151af12588c%22%2C%22clientId%22%3A%22u662062e3-6f1b-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A124894%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A640%2C%22originHeight%22%3A348%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22DEVELOP%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%20PULL%E4%B9%8B%E5%90%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B0%E5%A2%9E%E7%9A%84%E5%8A%9F%E8%83%BD%20%E4%BD%BF%E7%94%A8GITMERGE%20DSX%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD%20%E4%BD%BF%E7%94%A8GITREBASE%20%E4%BD%BF%E7%94%A8GITREBASE%E5%92%8CGIT%20GITMERGE%E7%9A%84%E5%8C%BA%E5%88%AB%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A140.6436%2C%22y%22%3A28.000488%2C%22width%22%3A135.36943000000002%2C%22height%22%3A19.915242000000003%2C%22text%22%3A%22DEVELOP%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%22%7D%2C%7B%22x%22%3A403.72787%2C%22y%22%3A56.34029%2C%22width%22%3A211.69529000000006%2C%22height%22%3A21.012669999999993%2C%22text%22%3A%22PULL%E4%B9%8B%E5%90%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B0%E5%A2%9E%E7%9A%84%E5%8A%9F%E8%83%BD%22%7D%2C%7B%22x%22%3A516.8773%2C%22y%22%3A152.73524%2C%22width%22%3A110.41210000000001%2C%22height%22%3A23.56962999999999%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8GITMERGE%22%7D%2C%7B%22x%22%3A135.46631%2C%22y%22%3A193.89699%2C%22width%22%3A98.69978%2C%22height%22%3A18.66276000000002%2C%22text%22%3A%22DSX%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD%22%7D%2C%7B%22x%22%3A436.3513%2C%22y%22%3A224.88188%2C%22width%22%3A110.19545%2C%22height%22%3A19.788039999999995%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8GITREBASE%22%7D%2C%7B%22x%22%3A145.6226%2C%22y%22%3A306.50998%2C%22width%22%3A159.85551999999998%2C%22height%22%3A20.177580000000034%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8GITREBASE%E5%92%8CGIT%22%7D%2C%7B%22x%22%3A287.59756%2C%22y%22%3A308.04846%2C%22width%22%3A129.72406%2C%22height%22%3A20.730590000000007%2C%22text%22%3A%22GITMERGE%E7%9A%84%E5%8C%BA%E5%88%AB%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u7bc94f9e%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u013003c4\" id=\"u013003c4\"><span data-lake-id=\"ud2992b7a\" id=\"ud2992b7a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">接下来，将通过对：https://github</span><em><span data-lake-id=\"u7bc29a53\" id=\"u7bc29a53\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.com</span></em><span data-lake-id=\"ue8437979\" id=\"ue8437979\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">/gafish/gafish.github</span><em><span data-lake-id=\"ude9dc136\" id=\"ude9dc136\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.com</span></em></p><p data-lake-id=\"ubb2e1548\" id=\"ubb2e1548\"><span data-lake-id=\"uf4c1665d\" id=\"uf4c1665d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">仓库进行实例操作，讲解如何使用</span><span data-lake-id=\"u930a0d4a\" id=\"u930a0d4a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u89e3bbce\" id=\"u89e3bbce\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u7890284c\" id=\"u7890284c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">拉取代码到提交代码的整个流程。</span></p><h4 data-lake-id=\"hU2bE\" id=\"hU2bE\"><strong><span data-lake-id=\"u1c2c492d\" id=\"u1c2c492d\" style=\"color: rgb(79, 79, 79)\">git clone</span></strong></h4><p data-lake-id=\"u669474be\" id=\"u669474be\"><span data-lake-id=\"u741b914a\" id=\"u741b914a\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">从git服务器拉取代码</span></p><p data-lake-id=\"u493143da\" id=\"u493143da\"><span data-lake-id=\"ub4c9ddc7\" id=\"ub4c9ddc7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u3943ada1\" id=\"u3943ada1\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">clone</span><span data-lake-id=\"u61a1148e\" id=\"u61a1148e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> https://github.com/gafish/gafish.github.com.git</span></p><p data-lake-id=\"u6b106692\" id=\"u6b106692\"><span data-lake-id=\"u05631d25\" id=\"u05631d25\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">代码</span><em><span data-lake-id=\"u3efbdbaf\" id=\"u3efbdbaf\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">下载</span></em><span data-lake-id=\"u332db695\" id=\"u332db695\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">完成后在当前文件夹中会有一个</span><span data-lake-id=\"u250f690c\" id=\"u250f690c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u204cdd5f\" id=\"u204cdd5f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">gafish.github</span><em><span data-lake-id=\"u4dd9c36a\" id=\"u4dd9c36a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.com</span></em><span data-lake-id=\"u28eccae7\" id=\"u28eccae7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的目录，通过</span><span data-lake-id=\"ucc6fbe17\" id=\"ucc6fbe17\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">cd gafish.github</span><em><span data-lake-id=\"ub96e46d0\" id=\"ub96e46d0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.com</span></em><span data-lake-id=\"ua50ef6bd\" id=\"ua50ef6bd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">命令进入目录。</span></p><h4 data-lake-id=\"sr54C\" id=\"sr54C\"><strong><span data-lake-id=\"u2639e691\" id=\"u2639e691\" style=\"color: rgb(79, 79, 79)\">git config</span></strong></h4><p data-lake-id=\"u04ef9d39\" id=\"u04ef9d39\"><span data-lake-id=\"ud5be8475\" id=\"ud5be8475\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">配置开发者用户名和邮箱</span></p><p data-lake-id=\"u729cb0ca\" id=\"u729cb0ca\"><span data-lake-id=\"u44744fc9\" id=\"u44744fc9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"uda433c61\" id=\"uda433c61\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">config</span><span data-lake-id=\"u397275c1\" id=\"u397275c1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> user.name gafishgit </span><span data-lake-id=\"u9cf8d9b0\" id=\"u9cf8d9b0\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">config</span><span data-lake-id=\"u73737d68\" id=\"u73737d68\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> user.email gafish@qqqq.com</span></p><p data-lake-id=\"uc7c0a3ab\" id=\"uc7c0a3ab\"><span data-lake-id=\"u463b0613\" id=\"u463b0613\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">每次代码提交的时候都会生成一条提交记录，其中会包含当前配置的用户名和邮箱。</span></p><h4 data-lake-id=\"j8uyA\" id=\"j8uyA\"><strong><span data-lake-id=\"ucc44b01d\" id=\"ucc44b01d\" style=\"color: rgb(79, 79, 79)\">git branch</span></strong></h4><p data-lake-id=\"ub7d4de2b\" id=\"ub7d4de2b\"><span data-lake-id=\"u831d337c\" id=\"u831d337c\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">创建、重命名、查看、删除项目分支，通过</span><span data-lake-id=\"uc8dcbf7a\" id=\"uc8dcbf7a\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\"> </span><span data-lake-id=\"ubbc9c0ed\" id=\"ubbc9c0ed\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">Git</span><span data-lake-id=\"u04d6dfc7\" id=\"u04d6dfc7\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">做项目开发时，一般都是在开发分支中进行，开发完成后合并分支到主干。</span></p><p data-lake-id=\"ud04e9d58\" id=\"ud04e9d58\"><span data-lake-id=\"u6d5fa99a\" id=\"u6d5fa99a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch daily/0.0.0</span></p><p data-lake-id=\"ud0f09cea\" id=\"ud0f09cea\"><span data-lake-id=\"u09151513\" id=\"u09151513\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">创建一个名为</span><span data-lake-id=\"u4466354b\" id=\"u4466354b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u2b04a670\" id=\"u2b04a670\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/0.0.0</span><span data-lake-id=\"ub634ccfb\" id=\"ub634ccfb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的日常开发分支，分支名只要不包括特殊字符即可。</span></p><p data-lake-id=\"u9c34d415\" id=\"u9c34d415\"><span data-lake-id=\"u14234786\" id=\"u14234786\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch -m daily</span><span data-lake-id=\"ubc831cad\" id=\"ubc831cad\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">/0.0.0 daily/</span><span data-lake-id=\"ucebf5658\" id=\"ucebf5658\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0.0</span><span data-lake-id=\"u73baaaa0\" id=\"u73baaaa0\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">.1</span></p><p data-lake-id=\"u44f2b6ea\" id=\"u44f2b6ea\"><span data-lake-id=\"u16096a88\" id=\"u16096a88\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">如果觉得之前的分支名不合适，可以为新建的分支重命名，重命名分支名为</span><span data-lake-id=\"u526fc829\" id=\"u526fc829\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u16f8b63a\" id=\"u16f8b63a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/0.0.1</span></p><p data-lake-id=\"u779f24ea\" id=\"u779f24ea\"><span data-lake-id=\"u3d5c8daf\" id=\"u3d5c8daf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch</span></p><p data-lake-id=\"u4be67b27\" id=\"u4be67b27\"><span data-lake-id=\"u12fd3cf8\" id=\"u12fd3cf8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过不带参数的branch命令可以查看当前项目分支列表</span></p><p data-lake-id=\"ufa7b08eb\" id=\"ufa7b08eb\"><span data-lake-id=\"u3c39ddfc\" id=\"u3c39ddfc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch -d daily/0.0.1</span></p><p data-lake-id=\"uabc36e04\" id=\"uabc36e04\"><span data-lake-id=\"u4ef3373e\" id=\"u4ef3373e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">如果分支已经完成使命则可以通过</span><span data-lake-id=\"u622aec00\" id=\"u622aec00\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u4dc2b521\" id=\"u4dc2b521\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">-d</span><span data-lake-id=\"uf4140278\" id=\"uf4140278\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">参数将分支删除，这里为了继续下一步操作，暂不执行删除操作</span></p><h4 data-lake-id=\"Om94a\" id=\"Om94a\"><strong><span data-lake-id=\"u01e3092a\" id=\"u01e3092a\" style=\"color: rgb(79, 79, 79)\">git checkout</span></strong></h4><p data-lake-id=\"uf1fc00d3\" id=\"uf1fc00d3\"><span data-lake-id=\"u6b2746d4\" id=\"u6b2746d4\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">切换分支</span></p><p data-lake-id=\"u82bc5950\" id=\"u82bc5950\"><span data-lake-id=\"uac828f8a\" id=\"uac828f8a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git checkout daily/0.0.1</span></p><p data-lake-id=\"u86ef9f79\" id=\"u86ef9f79\"><span data-lake-id=\"u2b2410ca\" id=\"u2b2410ca\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">切换到</span><span data-lake-id=\"u7dacc0b0\" id=\"u7dacc0b0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u787f1e8d\" id=\"u787f1e8d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/0.0.1</span><span data-lake-id=\"u5d00f859\" id=\"u5d00f859\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支，后续的操作将在这个分支上进行</span></p><h4 data-lake-id=\"bqIRH\" id=\"bqIRH\"><strong><span data-lake-id=\"u82c2ce61\" id=\"u82c2ce61\" style=\"color: rgb(79, 79, 79)\">git status</span></strong></h4><p data-lake-id=\"ue4bc180e\" id=\"ue4bc180e\"><span data-lake-id=\"u9bc6b5a8\" id=\"u9bc6b5a8\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">查看文件变动状态</span></p><p data-lake-id=\"u8827ac2b\" id=\"u8827ac2b\"><span data-lake-id=\"u00abfd12\" id=\"u00abfd12\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过任何你喜欢的编辑器对项目中的</span><span data-lake-id=\"uc4484141\" id=\"uc4484141\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u7f69c1d8\" id=\"u7f69c1d8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">README.md</span><span data-lake-id=\"u613308cd\" id=\"u613308cd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件做一些改动，保存。</span></p><p data-lake-id=\"u69b0d0c7\" id=\"u69b0d0c7\"><span data-lake-id=\"ua86af134\" id=\"ua86af134\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u5131320a\" id=\"u5131320a\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">status</span></p><p data-lake-id=\"u4193a0de\" id=\"u4193a0de\"><span data-lake-id=\"u9b74425b\" id=\"u9b74425b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过</span><span data-lake-id=\"uea4ada56\" id=\"uea4ada56\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u4d62e7f8\" id=\"u4d62e7f8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git status</span><span data-lake-id=\"ueba94f51\" id=\"ueba94f51\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">命令可以看到文件当前状态</span><span data-lake-id=\"u5cf6fbdd\" id=\"u5cf6fbdd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Changes not staged for commit:</span><span data-lake-id=\"u524d9af7\" id=\"u524d9af7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">(</span><em><span data-lake-id=\"uf1293e27\" id=\"uf1293e27\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">改动文件未提交到暂存区</span></em><span data-lake-id=\"u39230a57\" id=\"u39230a57\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">)</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22On%20branch%20daily%2F0.0.1Changes%20not%20staged%20for%20commit%3A%20(use%20%5C%22git%20add%20...%5C%22%20to%20update%20what%20will%20be%20committed)%20(use%20%5C%22git%20checkout%20--%20...%5C%22%20to%20discard%20changes%20in%20working%20directory)%20modified%3A%20README.mdno%20changes%20added%20to%20commit%20(use%20%5C%22git%20add%5C%22%20and%2For%20%5C%22git%20commit%20-a%5C%22)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ajgEE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"XOHpf\" id=\"XOHpf\"><strong><span data-lake-id=\"u8453e512\" id=\"u8453e512\" style=\"color: rgb(79, 79, 79)\">git add</span></strong></h4><p data-lake-id=\"u3b892f64\" id=\"u3b892f64\"><span data-lake-id=\"uae48f8e9\" id=\"uae48f8e9\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">添加文件变动到暂存区</span></p><blockquote data-lake-id=\"u4e696d2a\" id=\"u4e696d2a\"><p data-lake-id=\"u33dcde1e\" id=\"u33dcde1e\"><span data-lake-id=\"u0f04ebbf\" id=\"u0f04ebbf\">git add README.md</span></p></blockquote><p data-lake-id=\"u6fe99313\" id=\"u6fe99313\"><span data-lake-id=\"u5ed3ef10\" id=\"u5ed3ef10\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过指定文件名 README.md可以将该文件添加到暂存区，如果想添加所有文件可用git add .命令，这时候可通过git status看到文件当前状态Changes to be committed:(</span><em><span data-lake-id=\"ud943d6df\" id=\"ud943d6df\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件已提交到暂存区</span></em><span data-lake-id=\"u4aab11bb\" id=\"u4aab11bb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">)</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22On%20branch%20daily%2F0.0.1Changes%20to%20be%20committed%3A%20(use%20%5C%22git%20reset%20HEAD%20...%5C%22%20to%20unstage)%20modified%3A%20README.md%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22fTNkL%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"kYDQ6\" id=\"kYDQ6\"><strong><span data-lake-id=\"ua6bdfd22\" id=\"ua6bdfd22\" style=\"color: rgb(79, 79, 79)\">git commit</span></strong></h4><p data-lake-id=\"ub127b611\" id=\"ub127b611\"><span data-lake-id=\"uc8218f95\" id=\"uc8218f95\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">提交文件变动到版本库</span></p><blockquote data-lake-id=\"ud62818e9\" id=\"ud62818e9\"><p data-lake-id=\"ube2d5997\" id=\"ube2d5997\"><span data-lake-id=\"u827b6ed8\" id=\"u827b6ed8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"udf1a3c5e\" id=\"udf1a3c5e\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">commit</span><span data-lake-id=\"u943bd9eb\" id=\"u943bd9eb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ufdd885bb\" id=\"ufdd885bb\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u31574cb8\" id=\"u31574cb8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">m </span><span data-lake-id=\"uc65a5182\" id=\"uc65a5182\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">'这里写提交原因'</span></p></blockquote><p data-lake-id=\"u7154444c\" id=\"u7154444c\"><span data-lake-id=\"ub6adadd7\" id=\"ub6adadd7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过</span><span data-lake-id=\"u30717919\" id=\"u30717919\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u0f236275\" id=\"u0f236275\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">-m</span><span data-lake-id=\"uc04d9ecd\" id=\"uc04d9ecd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">参数可直接在命令行里输入提交描述文本</span></p><h4 data-lake-id=\"z13vY\" id=\"z13vY\"><strong><span data-lake-id=\"u2e40cad4\" id=\"u2e40cad4\" style=\"color: rgb(79, 79, 79)\">git push</span></strong></h4><p data-lake-id=\"u05e02135\" id=\"u05e02135\"><span data-lake-id=\"ud17e22ed\" id=\"ud17e22ed\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">将本地的代码改动推送到服务器</span></p><blockquote data-lake-id=\"u8a83c5b3\" id=\"u8a83c5b3\"><p data-lake-id=\"ud1f0598a\" id=\"ud1f0598a\"><span data-lake-id=\"u8029397b\" id=\"u8029397b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u10b67eea\" id=\"u10b67eea\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">push</span><span data-lake-id=\"u8c4b7ee0\" id=\"u8c4b7ee0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> origin daily/</span><span data-lake-id=\"ued4f5a5e\" id=\"ued4f5a5e\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"ubef99e63\" id=\"ubef99e63\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"u1660cd19\" id=\"u1660cd19\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"ubd261885\" id=\"ubd261885\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"u4098e194\" id=\"u4098e194\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span></p></blockquote><p data-lake-id=\"udc6d9774\" id=\"udc6d9774\"><span data-lake-id=\"u3d11c546\" id=\"u3d11c546\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">origin</span><span data-lake-id=\"uaf354b19\" id=\"uaf354b19\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">指代的是当前的git服务器地址，这行命令的意思是把</span><span data-lake-id=\"ub5547387\" id=\"ub5547387\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/0.0.1</span><span data-lake-id=\"u8cb75b25\" id=\"u8cb75b25\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支推送到服务器，当看到命令行返回如下字符表示推送成功了。</span></p><p data-lake-id=\"u469890ef\" id=\"u469890ef\"><span data-lake-id=\"u42f72b6b\" id=\"u42f72b6b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">Counting objects: </span><span data-lake-id=\"udc29dc50\" id=\"udc29dc50\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">3</span><span data-lake-id=\"ufac7bc19\" id=\"ufac7bc19\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">, done.Delta compression </span><span data-lake-id=\"u2c58d906\" id=\"u2c58d906\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">using</span><span data-lake-id=\"ue0792495\" id=\"ue0792495\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> up </span><span data-lake-id=\"u94eecf31\" id=\"u94eecf31\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">to</span><span data-lake-id=\"u9169a403\" id=\"u9169a403\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ub133af80\" id=\"ub133af80\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">8</span><span data-lake-id=\"u12c1cb86\" id=\"u12c1cb86\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> threads.Compressing objects: </span><span data-lake-id=\"u3082f241\" id=\"u3082f241\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">100</span><span data-lake-id=\"ucf9fe7d3\" id=\"ucf9fe7d3\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">%</span><span data-lake-id=\"u64e369b5\" id=\"u64e369b5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> (</span><span data-lake-id=\"uc8a8c6bd\" id=\"uc8a8c6bd\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">2</span><span data-lake-id=\"u28c55f27\" id=\"u28c55f27\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"uc4500ddc\" id=\"uc4500ddc\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">2</span><span data-lake-id=\"u9e8b0b94\" id=\"u9e8b0b94\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">), done.Writing objects: </span><span data-lake-id=\"u13c629e4\" id=\"u13c629e4\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">100</span><span data-lake-id=\"uef3905e1\" id=\"uef3905e1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">%</span><span data-lake-id=\"ua88cd15c\" id=\"ua88cd15c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> (</span><span data-lake-id=\"u0a91606f\" id=\"u0a91606f\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">3</span><span data-lake-id=\"udc8e9313\" id=\"udc8e9313\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"uc295200c\" id=\"uc295200c\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">3</span><span data-lake-id=\"u8d03d695\" id=\"u8d03d695\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">), </span><span data-lake-id=\"u42ab3b74\" id=\"u42ab3b74\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">267</span><span data-lake-id=\"u8e8b561a\" id=\"u8e8b561a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> bytes </span><span data-lake-id=\"uae2589a3\" id=\"uae2589a3\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">|</span><span data-lake-id=\"u336581f5\" id=\"u336581f5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u37053627\" id=\"u37053627\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"uf8b454a0\" id=\"uf8b454a0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> bytes</span><span data-lake-id=\"u08d772da\" id=\"u08d772da\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"u11be4f56\" id=\"u11be4f56\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">s, done.Total </span><span data-lake-id=\"u571acda4\" id=\"u571acda4\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">3</span><span data-lake-id=\"u9de62d92\" id=\"u9de62d92\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> (delta </span><span data-lake-id=\"uda438e71\" id=\"uda438e71\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span><span data-lake-id=\"ubc4f725c\" id=\"ubc4f725c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">), reused </span><span data-lake-id=\"u9ecb49b3\" id=\"u9ecb49b3\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u0089b18c\" id=\"u0089b18c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> (delta </span><span data-lake-id=\"u2b6653d4\" id=\"u2b6653d4\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u159bb0eb\" id=\"u159bb0eb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">)remote: Resolving deltas: </span><span data-lake-id=\"u1f036cb3\" id=\"u1f036cb3\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">100</span><span data-lake-id=\"uca9bdc16\" id=\"uca9bdc16\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">%</span><span data-lake-id=\"u4762d11a\" id=\"u4762d11a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> (</span><span data-lake-id=\"uf0c2d568\" id=\"uf0c2d568\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span><span data-lake-id=\"u7d72a4f0\" id=\"u7d72a4f0\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"ua498be6a\" id=\"ua498be6a\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span><span data-lake-id=\"u5cd98670\" id=\"u5cd98670\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">), completed </span><span data-lake-id=\"u60e9e0b0\" id=\"u60e9e0b0\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">with</span><span data-lake-id=\"u104891d0\" id=\"u104891d0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u1d8624b6\" id=\"u1d8624b6\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span><span data-lake-id=\"u38ccb5fc\" id=\"u38ccb5fc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ua71434c7\" id=\"ua71434c7\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">local</span><span data-lake-id=\"u4cf92b7d\" id=\"u4cf92b7d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> objects.To https:</span><span data-lake-id=\"ufb14d7c6\" id=\"ufb14d7c6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"u0808ca6d\" id=\"u0808ca6d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"ua9dc1f06\" id=\"ua9dc1f06\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">github.com</span><span data-lake-id=\"u831ea2be\" id=\"u831ea2be\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"uf9082624\" id=\"uf9082624\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gafish</span><span data-lake-id=\"u7335c383\" id=\"u7335c383\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"u4b4b0cee\" id=\"u4b4b0cee\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">gafish.github.com.git </span><span data-lake-id=\"u24ca0284\" id=\"u24ca0284\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"u53e43c60\" id=\"u53e43c60\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> [</span><span data-lake-id=\"u5b51deea\" id=\"u5b51deea\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">new</span><span data-lake-id=\"ud0767c85\" id=\"ud0767c85\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> branch] daily</span><span data-lake-id=\"u1c43455c\" id=\"u1c43455c\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"ufd14b48c\" id=\"ufd14b48c\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0.0</span><span data-lake-id=\"u676d2982\" id=\"u676d2982\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">.1</span><span data-lake-id=\"u76cfd3d2\" id=\"u76cfd3d2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u608fc486\" id=\"u608fc486\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u70041ade\" id=\"u70041ade\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">&gt;</span><span data-lake-id=\"u7e0dbd71\" id=\"u7e0dbd71\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> daily</span><span data-lake-id=\"uc81b772e\" id=\"uc81b772e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">/</span><span data-lake-id=\"u0ddd9b61\" id=\"u0ddd9b61\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0.0</span><span data-lake-id=\"u28c893dc\" id=\"u28c893dc\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">.1</span></p><p data-lake-id=\"ub3291b54\" id=\"ub3291b54\"><span data-lake-id=\"u65f31ea9\" id=\"u65f31ea9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">现在我们回到Github网站的项目首页，点击</span><span data-lake-id=\"u3eeed49a\" id=\"u3eeed49a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"uc1718001\" id=\"uc1718001\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Branch:master</span><span data-lake-id=\"u445e445e\" id=\"u445e445e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">下拉按钮，就会看到刚才推送的</span><span data-lake-id=\"u822305fa\" id=\"u822305fa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/00.1</span><span data-lake-id=\"uaa84353f\" id=\"uaa84353f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支了</span></p><h4 data-lake-id=\"kiAyA\" id=\"kiAyA\"><strong><span data-lake-id=\"u3993f00c\" id=\"u3993f00c\" style=\"color: rgb(79, 79, 79)\">git pull</span></strong></h4><p data-lake-id=\"uc035e237\" id=\"uc035e237\"><span data-lake-id=\"uc9c64d5b\" id=\"uc9c64d5b\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">将服务器上的最新代码拉取到本地</span></p><blockquote data-lake-id=\"u380d57e7\" id=\"u380d57e7\"><p data-lake-id=\"u5e6a5147\" id=\"u5e6a5147\"><span data-lake-id=\"uc10f9c20\" id=\"uc10f9c20\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git pull origin daily/0.0.1</span></p></blockquote><p data-lake-id=\"ud5abd41f\" id=\"ud5abd41f\"><span data-lake-id=\"u57ae65bf\" id=\"u57ae65bf\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">如果其它项目成员对项目做了改动并推送到服务器，我们需要将最新的改动更新到本地，这里我们来模拟一下这种情况。</span></p><p data-lake-id=\"u5e74cbb5\" id=\"u5e74cbb5\"><span data-lake-id=\"u0c084305\" id=\"u0c084305\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">进入Github网站的项目首页，再进入</span><span data-lake-id=\"u6fb3e1d1\" id=\"u6fb3e1d1\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u3606ee4e\" id=\"u3606ee4e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/0.0.1</span><span data-lake-id=\"u1f12aaca\" id=\"u1f12aaca\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支，在线对</span><span data-lake-id=\"u6e07a214\" id=\"u6e07a214\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">README.md</span><span data-lake-id=\"u70f457d0\" id=\"u70f457d0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件做一些修改并保存，然后在命令中执行以上命令，它将把刚才在线修改的部分拉取到本地，用编辑器打开</span><span data-lake-id=\"ud34bbd5c\" id=\"ud34bbd5c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">README.md</span><span data-lake-id=\"u10b06e6f\" id=\"u10b06e6f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">，你会发现文件已经跟线上的内容同步了。</span></p><p data-lake-id=\"u3e529d73\" id=\"u3e529d73\"><em><span data-lake-id=\"u13a9f16f\" id=\"u13a9f16f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">如果线上代码做了变动，而你本地的代码也有变动，拉取的代码就有可能会跟你本地的改动冲突，一般情况下</span></em><em><span data-lake-id=\"u07cd80f2\" id=\"u07cd80f2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span></em><span data-lake-id=\"u7e82bbd5\" id=\"u7e82bbd5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"ubc85dbf1\" id=\"ubc85dbf1\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">会自动处理这种冲突合并，但如果改动的是同一行，那就需要手动来合并代码，编辑文件，保存最新的改动，再通过</span><span data-lake-id=\"ufc1c230c\" id=\"ufc1c230c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add .</span><span data-lake-id=\"u15b842bd\" id=\"u15b842bd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">和</span><span data-lake-id=\"uf9bf4dcc\" id=\"uf9bf4dcc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git commit -m 'xxx'</span><span data-lake-id=\"u7d6a23a8\" id=\"u7d6a23a8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">来提交合并。</span></p><h4 data-lake-id=\"cchU9\" id=\"cchU9\"><strong><span data-lake-id=\"ud6f1cd3f\" id=\"ud6f1cd3f\" style=\"color: rgb(79, 79, 79)\">git log</span></strong></h4><p data-lake-id=\"u33053d39\" id=\"u33053d39\"><span data-lake-id=\"u00cf5063\" id=\"u00cf5063\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">查看版本提交记录</span></p><blockquote data-lake-id=\"uc0baab09\" id=\"uc0baab09\"><p data-lake-id=\"u33032517\" id=\"u33032517\"><span data-lake-id=\"ue94f2b58\" id=\"ue94f2b58\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u4b2ff3c1\" id=\"u4b2ff3c1\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">log</span></p></blockquote><p data-lake-id=\"u17a51880\" id=\"u17a51880\"><span data-lake-id=\"u1472e23a\" id=\"u1472e23a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过以上命令，我们可以查看整个项目的版本提交记录，它里面包含了</span><span data-lake-id=\"u9a65cf73\" id=\"u9a65cf73\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">提交人</span><span data-lake-id=\"u6149fc74\" id=\"u6149fc74\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">、</span><span data-lake-id=\"ud3d994bf\" id=\"ud3d994bf\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">日期</span><span data-lake-id=\"u77dcb1f4\" id=\"u77dcb1f4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">、</span><span data-lake-id=\"ua26978c0\" id=\"ua26978c0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">提交原因</span><span data-lake-id=\"ube749daa\" id=\"ube749daa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">等信息，得到的结果如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22commit%20c334730f8dba5096c54c8ac04fdc2b31ede7107aAuthor%3A%20gafish%20qqqq.com%3EDate%3A%20Wed%20Jan%2011%2009%3A44%3A13%202017%20%2B0800%20Update%20README.mdcommit%20ba6e3d21fcb1c87a718d2a73cdd11261eb672b2aAuthor%3A%20gafish%20qqqq.com%3EDate%3A%20Wed%20Jan%2011%2009%3A31%3A33%202017%20%2B0800%20test.....%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22krVMK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ub4240250\" id=\"ub4240250\"><span data-lake-id=\"ue923a28c\" id=\"ue923a28c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">提交记录可能会非常多，按</span><span data-lake-id=\"u78e2e3cc\" id=\"u78e2e3cc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u2a8916c4\" id=\"u2a8916c4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">J</span><span data-lake-id=\"u3dbf3a60\" id=\"u3dbf3a60\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">键往下翻，按</span><span data-lake-id=\"u6f821a20\" id=\"u6f821a20\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">K</span><span data-lake-id=\"ub8d2acad\" id=\"ub8d2acad\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">键往上翻，按</span><span data-lake-id=\"u918475d0\" id=\"u918475d0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Q</span><span data-lake-id=\"u486dde76\" id=\"u486dde76\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">键退出查看</span></p><h4 data-lake-id=\"ij1Fw\" id=\"ij1Fw\"><strong><span data-lake-id=\"u0dac457b\" id=\"u0dac457b\" style=\"color: rgb(79, 79, 79)\">git tag</span></strong></h4><p data-lake-id=\"u0af3dce5\" id=\"u0af3dce5\"><span data-lake-id=\"u67f7f7d3\" id=\"u67f7f7d3\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">为项目标记里程碑</span></p><blockquote data-lake-id=\"uf5be12ae\" id=\"uf5be12ae\"><p data-lake-id=\"u50bdfe8c\" id=\"u50bdfe8c\"><span data-lake-id=\"u67eaba64\" id=\"u67eaba64\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git tag publish/</span><span data-lake-id=\"u853b6658\" id=\"u853b6658\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u59867f04\" id=\"u59867f04\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"u22061de4\" id=\"u22061de4\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"uf09e4e5c\" id=\"uf09e4e5c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"u66a17816\" id=\"u66a17816\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span><span data-lake-id=\"ub799a618\" id=\"ub799a618\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u3b487bb9\" id=\"u3b487bb9\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">push</span><span data-lake-id=\"u3a6a2650\" id=\"u3a6a2650\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> origin publish/</span><span data-lake-id=\"udf37362c\" id=\"udf37362c\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u49ec0b0b\" id=\"u49ec0b0b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"uc7b21f4d\" id=\"uc7b21f4d\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u10ac7643\" id=\"u10ac7643\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"ubfbc87a8\" id=\"ubfbc87a8\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span></p></blockquote><p data-lake-id=\"u0d4b289d\" id=\"u0d4b289d\"><span data-lake-id=\"uf4f374ff\" id=\"uf4f374ff\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">当我们完成某个功能需求准备发布上线时，应该将此次完整的项目代码做个标记，并将这个标记好的版本发布到线上，这里我们以</span><span data-lake-id=\"ue1b1ae45\" id=\"ue1b1ae45\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u0d79613e\" id=\"u0d79613e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">publish/0.0.1</span><span data-lake-id=\"u3cf9b15f\" id=\"u3cf9b15f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">为标记名并发布，当看到命令行返回如下内容则表示发布成功了</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22Total%200%20(delta%200)%2C%20reused%200%20(delta%200)To%20https%3A%2F%2Fgithub.com%2Fgafish%2Fgafish.github.com.git%20*%20%5Bnew%20tag%5D%20publish%2F0.0.1%20-%3E%20publish%2F0.0.1%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22sdZlr%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"AaGyD\" id=\"AaGyD\"><strong><span data-lake-id=\"ue8fd4adb\" id=\"ue8fd4adb\" style=\"color: rgb(79, 79, 79)\">.gitignore</span></strong></h4><p data-lake-id=\"u6f5d3f34\" id=\"u6f5d3f34\"><span data-lake-id=\"u94a6565a\" id=\"u94a6565a\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">设置哪些内容不需要推送到服务器，这是一个配置文件</span></p><blockquote data-lake-id=\"uc4125d9f\" id=\"uc4125d9f\"><p data-lake-id=\"u75957f6f\" id=\"u75957f6f\"><span data-lake-id=\"u0f3a8e09\" id=\"u0f3a8e09\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">touch</span><span data-lake-id=\"uea944ec5\" id=\"uea944ec5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> .gitignore</span></p></blockquote><p data-lake-id=\"u16b37d28\" id=\"u16b37d28\"><span data-lake-id=\"ueb1ed2ec\" id=\"ueb1ed2ec\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.gitignore</span><span data-lake-id=\"u7a126a69\" id=\"u7a126a69\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">不是</span><span data-lake-id=\"uff3fd0e4\" id=\"uff3fd0e4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"udc13ad31\" id=\"udc13ad31\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">命令，而在项目中的一个文件，通过设置</span><span data-lake-id=\"u50b7d692\" id=\"u50b7d692\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.gitignore</span><span data-lake-id=\"u4294c56d\" id=\"u4294c56d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的内容告诉</span><span data-lake-id=\"u7f9bd25f\" id=\"u7f9bd25f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u3f283332\" id=\"u3f283332\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">哪些文件应该被忽略不需要推送到服务器，通过以上命令可以创建一个</span><span data-lake-id=\"ue6b62e0d\" id=\"ue6b62e0d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.gitignore</span><span data-lake-id=\"u8ad2abd9\" id=\"u8ad2abd9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件，并在编辑器中打开文件，每一行代表一个要忽略的文件或目录，如：</span></p><p data-lake-id=\"ud900ec4b\" id=\"ud900ec4b\"><span data-lake-id=\"u2bae4e40\" id=\"u2bae4e40\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">demo.htmlbuild/</span></p><p data-lake-id=\"ua92ae132\" id=\"ua92ae132\"><span data-lake-id=\"u921a4e3c\" id=\"u921a4e3c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">以上内容的意思是</span><span data-lake-id=\"u72a84bbc\" id=\"u72a84bbc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u5a35e1f8\" id=\"u5a35e1f8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"ucc48eca5\" id=\"ucc48eca5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将忽略</span><span data-lake-id=\"u349bd190\" id=\"u349bd190\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">demo.html</span><span data-lake-id=\"ua7f1e48f\" id=\"ua7f1e48f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件 和</span><span data-lake-id=\"u562ad0ab\" id=\"u562ad0ab\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">build/</span><span data-lake-id=\"ufdba76d0\" id=\"ufdba76d0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">目录，这些内容不会被推送到服务器上</span></p><h4 data-lake-id=\"OiJ4A\" id=\"OiJ4A\"><strong><span data-lake-id=\"u948e0a0e\" id=\"u948e0a0e\" style=\"color: rgb(79, 79, 79)\">小结</span></strong></h4><p data-lake-id=\"u05ff66c9\" id=\"u05ff66c9\"><span data-lake-id=\"u448bc8b4\" id=\"u448bc8b4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过掌握以上这些基本命令就可以在项目中开始用起来了，如果追求实用，那关于</span><span data-lake-id=\"u4cb3463e\" id=\"u4cb3463e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u30c62025\" id=\"u30c62025\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"uc6f7acdb\" id=\"uc6f7acdb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的学习就可以到此结束了，偶尔遇到的问题也基本上通过</span><span data-lake-id=\"u4d236939\" id=\"u4d236939\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Google</span><span data-lake-id=\"u6823de46\" id=\"u6823de46\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">也能找到答案，如果想深入探索</span><span data-lake-id=\"udd974ee4\" id=\"udd974ee4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u1d6d5b90\" id=\"u1d6d5b90\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的高阶功能，那就继续往下看</span><span data-lake-id=\"ue7d9fcd4\" id=\"ue7d9fcd4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">深入探索</span><span data-lake-id=\"uc458b013\" id=\"uc458b013\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">部分。</span></p><h2 data-lake-id=\"cfGyn\" id=\"cfGyn\"><strong><span data-lake-id=\"u0a37ed65\" id=\"u0a37ed65\" style=\"color: rgb(79, 79, 79)\">深入探索</span></strong></h2><h3 data-lake-id=\"X8AGF\" id=\"X8AGF\"><strong><span data-lake-id=\"ue48bdc97\" id=\"ue48bdc97\" style=\"color: rgb(79, 79, 79)\">基本概念</span></strong></h3><h4 data-lake-id=\"lKJlL\" id=\"lKJlL\"><strong><span data-lake-id=\"ub810dec9\" id=\"ub810dec9\" style=\"color: rgb(79, 79, 79)\">工作区(Working Directory)</span></strong></h4><p data-lake-id=\"u54ad0dd3\" id=\"u54ad0dd3\"><span data-lake-id=\"ubb56390a\" id=\"ubb56390a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">就是你在电脑里能看到的目录，比如上文中的</span><span data-lake-id=\"uc9f9a9a0\" id=\"uc9f9a9a0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u96634cdb\" id=\"u96634cdb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">gafish.github</span><em><span data-lake-id=\"u5b50c493\" id=\"u5b50c493\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.com</span></em><span data-lake-id=\"u662113d5\" id=\"u662113d5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件夹就是一个工作区</span></p><h4 data-lake-id=\"zkHCY\" id=\"zkHCY\"><strong><span data-lake-id=\"u2fa53843\" id=\"u2fa53843\" style=\"color: rgb(79, 79, 79)\">本地版本库(Local Repository)</span></strong></h4><p data-lake-id=\"ub644b29a\" id=\"ub644b29a\"><span data-lake-id=\"u06b8da2e\" id=\"u06b8da2e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">工作区有一个隐藏目录</span><span data-lake-id=\"u55bbadd0\" id=\"u55bbadd0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u830609d7\" id=\"u830609d7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">.git</span><span data-lake-id=\"u21365063\" id=\"u21365063\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">，这个不算工作区，而是</span><span data-lake-id=\"u5033a527\" id=\"u5033a527\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u2ebcef22\" id=\"u2ebcef22\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的版本库。</span></p><h4 data-lake-id=\"Oyeyy\" id=\"Oyeyy\"><strong><span data-lake-id=\"u840ec699\" id=\"u840ec699\" style=\"color: rgb(79, 79, 79)\">暂存区(stage)</span></strong></h4><p data-lake-id=\"ub0b39d97\" id=\"ub0b39d97\"><span data-lake-id=\"u6476c0be\" id=\"u6476c0be\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">本地版本库里存了很多东西，其中最重要的就是称为</span><span data-lake-id=\"u54b57105\" id=\"u54b57105\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ua388572c\" id=\"ua388572c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">stage</span><span data-lake-id=\"u3ce09266\" id=\"u3ce09266\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">(或者叫index)的暂存区，还有</span><span data-lake-id=\"u974face4\" id=\"u974face4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"ucb1a6435\" id=\"ucb1a6435\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">为我们自动创建的第一个分支</span><span data-lake-id=\"uab45a47c\" id=\"uab45a47c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">master</span><span data-lake-id=\"u9c94fd39\" id=\"u9c94fd39\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">，以及指向</span><span data-lake-id=\"u73b44379\" id=\"u73b44379\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">master</span><span data-lake-id=\"u4ea96c5f\" id=\"u4ea96c5f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的一个指针叫</span><span data-lake-id=\"uee406aa4\" id=\"uee406aa4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"uf40cd79e\" id=\"uf40cd79e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">。</span></p><h4 data-lake-id=\"QYjtd\" id=\"QYjtd\"><strong><span data-lake-id=\"ub8987786\" id=\"ub8987786\" style=\"color: rgb(79, 79, 79)\">远程版本库(Remote Repository)</span></strong></h4><p data-lake-id=\"uad0e3001\" id=\"uad0e3001\"><span data-lake-id=\"u40cb5e04\" id=\"u40cb5e04\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">一般指的是</span><span data-lake-id=\"u6ff962f2\" id=\"u6ff962f2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u410138a0\" id=\"u410138a0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"ucb0b7ecc\" id=\"ucb0b7ecc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">服务器上所对应的仓库，本文的示例所在的</span><span data-lake-id=\"u18e830cb\" id=\"u18e830cb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">github</span><span data-lake-id=\"u8298b750\" id=\"u8298b750\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">仓库就是一个远程版本库</span></p><h4 data-lake-id=\"Htx3L\" id=\"Htx3L\"><strong><span data-lake-id=\"ucbea8d72\" id=\"ucbea8d72\" style=\"color: rgb(79, 79, 79)\">以上概念之间的关系</span></strong></h4><p data-lake-id=\"u38d6c2ff\" id=\"u38d6c2ff\"><span data-lake-id=\"u26fd3a0a\" id=\"u26fd3a0a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">工作区</span><span data-lake-id=\"ucd71a177\" id=\"ucd71a177\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">、</span><span data-lake-id=\"u2101e747\" id=\"u2101e747\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">暂存区</span><span data-lake-id=\"u9a09e146\" id=\"u9a09e146\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">、</span><span data-lake-id=\"ud131ab44\" id=\"ud131ab44\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">本地版本库</span><span data-lake-id=\"u928aef1e\" id=\"u928aef1e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">、</span><span data-lake-id=\"u0bd72fa2\" id=\"u0bd72fa2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">远程版本库</span><span data-lake-id=\"u75869a89\" id=\"u75869a89\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">之间几个常用的</span><span data-lake-id=\"u6db73884\" id=\"u6db73884\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u93c3e61b\" id=\"u93c3e61b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">操作流程如下图所示：</span></p><h4 data-lake-id=\"o2V71\" id=\"o2V71\"><strong><span data-lake-id=\"ud3ed3c02\" id=\"ud3ed3c02\" style=\"color: rgb(79, 79, 79)\">分支(Branch)</span></strong></h4><p data-lake-id=\"u7b286c2c\" id=\"u7b286c2c\"><span data-lake-id=\"u3de0483b\" id=\"u3de0483b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支是为了将修改记录的整个流程分开存储，让分开的分支不受其它分支的影响，所以在同一个数据库里可以同时进行多个不同的修改</span></p><h4 data-lake-id=\"VbFM2\" id=\"VbFM2\"><strong><span data-lake-id=\"uc2d23aa0\" id=\"uc2d23aa0\" style=\"color: rgb(79, 79, 79)\">主分支(Master)</span></strong></h4><p data-lake-id=\"uced4288a\" id=\"uced4288a\"><span data-lake-id=\"u4e30e46d\" id=\"u4e30e46d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">前面提到过</span><span data-lake-id=\"u8c321f25\" id=\"u8c321f25\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u48e9d9af\" id=\"u48e9d9af\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">master</span><span data-lake-id=\"u4b63707e\" id=\"u4b63707e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">是</span><span data-lake-id=\"u1f28cf90\" id=\"u1f28cf90\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u579e28b7\" id=\"u579e28b7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">为我们自动创建的第一个分支，也叫主分支，其它分支开发完成后都要合并到</span><span data-lake-id=\"u0e3142ee\" id=\"u0e3142ee\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">master</span></p><h4 data-lake-id=\"LgqU3\" id=\"LgqU3\"><strong><span data-lake-id=\"ub8058ffb\" id=\"ub8058ffb\" style=\"color: rgb(79, 79, 79)\">标签(Tag)</span></strong></h4><p data-lake-id=\"u586c4ab9\" id=\"u586c4ab9\"><span data-lake-id=\"ue0ac06d2\" id=\"ue0ac06d2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">标签是用于标记特定的点或提交的历史，通常会用来标记发布版本的名称或版本号(如：</span><span data-lake-id=\"u396816e2\" id=\"u396816e2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">publish/0.0.1</span><span data-lake-id=\"u3042c7a0\" id=\"u3042c7a0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">)，虽然标签看起来有点像分支，但打上标签的提交是固定的，不能随意的改动，参见上图中的</span><span data-lake-id=\"ua6c9fed7\" id=\"ua6c9fed7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">1.0</span><span data-lake-id=\"u66e0b480\" id=\"u66e0b480\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">/</span><span data-lake-id=\"uf9d73526\" id=\"uf9d73526\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">2.0</span><span data-lake-id=\"u7162c8b0\" id=\"u7162c8b0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">/</span><span data-lake-id=\"u2661986a\" id=\"u2661986a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">3.0</span></p><h4 data-lake-id=\"GVAy8\" id=\"GVAy8\"><strong><span data-lake-id=\"u68617392\" id=\"u68617392\" style=\"color: rgb(79, 79, 79)\">HEAD</span></strong></h4><p data-lake-id=\"u406e8282\" id=\"u406e8282\"><span data-lake-id=\"ue9c2866b\" id=\"ue9c2866b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"u7e83d313\" id=\"u7e83d313\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">指向的就是当前分支的最新提交</span></p><p data-lake-id=\"u688f3f80\" id=\"u688f3f80\"><span data-lake-id=\"u6ed07d17\" id=\"u6ed07d17\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">以上概念了解的差不多，那就可以继续往下看，下面将以具体的操作类型来讲解</span><span data-lake-id=\"u50c8ee43\" id=\"u50c8ee43\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\"> </span><span data-lake-id=\"ueae57703\" id=\"ueae57703\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">Git</span><span data-lake-id=\"ubab0b005\" id=\"ubab0b005\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">的高阶用法</span></p><h3 data-lake-id=\"zrQBZ\" id=\"zrQBZ\"><strong><span data-lake-id=\"u0c54897e\" id=\"u0c54897e\" style=\"color: rgb(79, 79, 79)\">操作文件</span></strong></h3><h4 data-lake-id=\"u8iQW\" id=\"u8iQW\"><strong><span data-lake-id=\"ufc36f271\" id=\"ufc36f271\" style=\"color: rgb(79, 79, 79)\">git add</span></strong></h4><p data-lake-id=\"ue7a35db2\" id=\"ue7a35db2\"><span data-lake-id=\"u0974de54\" id=\"u0974de54\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">添加文件到暂存区</span></p><p data-lake-id=\"uc4872ebf\" id=\"uc4872ebf\"><span data-lake-id=\"u08b1537c\" id=\"u08b1537c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"ua0d4ce27\" id=\"ua0d4ce27\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">add</span><span data-lake-id=\"u055ac8fc\" id=\"u055ac8fc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> -i</span></p><p data-lake-id=\"u224639a3\" id=\"u224639a3\"><span data-lake-id=\"ub2b043c8\" id=\"ub2b043c8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过此命令将打开交互式子命令系统，你将看到如下子命令</span></p><p data-lake-id=\"u05731429\" id=\"u05731429\"><span data-lake-id=\"u55b72a52\" id=\"u55b72a52\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"ue5a3d3f9\" id=\"ue5a3d3f9\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"u55430eec\" id=\"u55430eec\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"u8207a9c5\" id=\"u8207a9c5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">Commands</span><span data-lake-id=\"u0238bd7b\" id=\"u0238bd7b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"u045e8d36\" id=\"u045e8d36\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"uc4d01e63\" id=\"uc4d01e63\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">*</span><span data-lake-id=\"u54c5ba52\" id=\"u54c5ba52\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u9b59305d\" id=\"u9b59305d\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span><span data-lake-id=\"u706a22dd\" id=\"u706a22dd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: status </span><span data-lake-id=\"u5537c582\" id=\"u5537c582\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">2</span><span data-lake-id=\"u134f3040\" id=\"u134f3040\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: </span><span data-lake-id=\"u1f9af7fe\" id=\"u1f9af7fe\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">update</span><span data-lake-id=\"u25240efa\" id=\"u25240efa\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ua830741b\" id=\"ua830741b\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">3</span><span data-lake-id=\"u014501c8\" id=\"u014501c8\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: revert </span><span data-lake-id=\"u19023ceb\" id=\"u19023ceb\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">4</span><span data-lake-id=\"ubf453e5b\" id=\"ubf453e5b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: </span><span data-lake-id=\"ua5dd77f3\" id=\"ua5dd77f3\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">add</span><span data-lake-id=\"u3a9f812e\" id=\"u3a9f812e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> untracked </span><span data-lake-id=\"ue1da67f1\" id=\"ue1da67f1\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">5</span><span data-lake-id=\"ub104aadc\" id=\"ub104aadc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: patch </span><span data-lake-id=\"u16a4ea4b\" id=\"u16a4ea4b\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">6</span><span data-lake-id=\"u3fe87567\" id=\"u3fe87567\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: diff </span><span data-lake-id=\"ud166910f\" id=\"ud166910f\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">7</span><span data-lake-id=\"ub9e57204\" id=\"ub9e57204\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: quit </span><span data-lake-id=\"u20f5efb4\" id=\"u20f5efb4\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">8</span><span data-lake-id=\"u8dbab488\" id=\"u8dbab488\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">: help</span></p><p data-lake-id=\"u96163500\" id=\"u96163500\"><span data-lake-id=\"u5a2d2d7b\" id=\"u5a2d2d7b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">通过输入序列号或首字母可以选择相应的功能，具体的功能解释如下：</span></p><ul list=\"u7bdc4292\"><li fid=\"u78e9b200\" data-lake-id=\"u5c7520d1\" id=\"u5c7520d1\"><span data-lake-id=\"u3b5ff1ab\" id=\"u3b5ff1ab\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">status</span><span data-lake-id=\"u5c20ea67\" id=\"u5c20ea67\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：功能上和</span><span data-lake-id=\"ua404855f\" id=\"ua404855f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add -i</span><span data-lake-id=\"ube75bacd\" id=\"ube75bacd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">相似，没什么鸟用</span></li><li fid=\"u78e9b200\" data-lake-id=\"u4a396b34\" id=\"u4a396b34\"><span data-lake-id=\"u1a45a458\" id=\"u1a45a458\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">update</span><span data-lake-id=\"u25f43488\" id=\"u25f43488\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：详见下方</span><span data-lake-id=\"ub5b8f824\" id=\"ub5b8f824\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add -u</span></li><li fid=\"u78e9b200\" data-lake-id=\"u6f0f9dc9\" id=\"u6f0f9dc9\"><span data-lake-id=\"uba57c247\" id=\"uba57c247\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">revert</span><span data-lake-id=\"u4dedfa32\" id=\"u4dedfa32\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：把已经添加到暂存区的文件从暂存区剔除，其操作方式和</span><span data-lake-id=\"u061071f0\" id=\"u061071f0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">update</span><span data-lake-id=\"u744f8278\" id=\"u744f8278\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">类似</span></li><li fid=\"u78e9b200\" data-lake-id=\"u9ff5d6fe\" id=\"u9ff5d6fe\"><span data-lake-id=\"u03042a32\" id=\"u03042a32\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">add untracked</span><span data-lake-id=\"u44c51fdd\" id=\"u44c51fdd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：可以把新增的文件添加到暂存区，其操作方式和</span><span data-lake-id=\"ude469008\" id=\"ude469008\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">update</span><span data-lake-id=\"uc9be8086\" id=\"uc9be8086\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">类似</span></li><li fid=\"u78e9b200\" data-lake-id=\"uf3ddd677\" id=\"uf3ddd677\"><span data-lake-id=\"u1ad1aa94\" id=\"u1ad1aa94\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">patch</span><span data-lake-id=\"u9c9e5f05\" id=\"u9c9e5f05\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：详见下方</span><span data-lake-id=\"u11827928\" id=\"u11827928\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add -p</span></li><li fid=\"u78e9b200\" data-lake-id=\"uceeb5dd9\" id=\"uceeb5dd9\"><span data-lake-id=\"u657ff9fa\" id=\"u657ff9fa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">diff</span><span data-lake-id=\"ufffd17dc\" id=\"ufffd17dc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：比较暂存区文件和本地版本库的差异，其操作方式和</span><span data-lake-id=\"u8e9c0a52\" id=\"u8e9c0a52\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">update</span><span data-lake-id=\"u21969a4a\" id=\"u21969a4a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">类似</span></li><li fid=\"u78e9b200\" data-lake-id=\"ub1989fc7\" id=\"ub1989fc7\"><span data-lake-id=\"u294f35b4\" id=\"u294f35b4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">quit</span><span data-lake-id=\"ufa1ba2d1\" id=\"ufa1ba2d1\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：退出</span><span data-lake-id=\"u9a9de1dc\" id=\"u9a9de1dc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add -i</span><span data-lake-id=\"u14f6f18b\" id=\"u14f6f18b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">命令系统</span></li><li fid=\"u78e9b200\" data-lake-id=\"u49a30b9e\" id=\"u49a30b9e\"><span data-lake-id=\"u95f6e4a1\" id=\"u95f6e4a1\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">help</span><span data-lake-id=\"u4b99722b\" id=\"u4b99722b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">：查看帮助信息</span></li></ul><p data-lake-id=\"ufbf2031d\" id=\"ufbf2031d\"><span data-lake-id=\"u60a41c19\" id=\"u60a41c19\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"ud0de2573\" id=\"ud0de2573\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">add</span><span data-lake-id=\"uef9190c9\" id=\"uef9190c9\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> -p</span></p><p data-lake-id=\"u3b48c464\" id=\"u3b48c464\"><span data-lake-id=\"uebf07f5f\" id=\"uebf07f5f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">直接进入交互命令中最有用的</span><span data-lake-id=\"u2b9da728\" id=\"u2b9da728\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u7a5ae08f\" id=\"u7a5ae08f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">patch</span><span data-lake-id=\"u6367f153\" id=\"u6367f153\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">模式</span></p><p data-lake-id=\"u23025046\" id=\"u23025046\"><span data-lake-id=\"u75e0a06c\" id=\"u75e0a06c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">这是交互命令中最有用的模式，其操作方式和</span><span data-lake-id=\"u4585ccb6\" id=\"u4585ccb6\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u3ca96c37\" id=\"u3ca96c37\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">update</span><span data-lake-id=\"uf1569987\" id=\"uf1569987\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">类似，选择后</span><span data-lake-id=\"ua661374b\" id=\"ua661374b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u90d9b722\" id=\"u90d9b722\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">会显示这些文件的当前内容与本地版本库中的差异，然后您可以自己决定是否添加这些修改到暂存区，在命令行</span><span data-lake-id=\"ue8ddab4d\" id=\"ue8ddab4d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Stage deletion [y,n,q,a,d,/,?]?</span><span data-lake-id=\"uaf562f02\" id=\"uaf562f02\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">后输入</span><span data-lake-id=\"udd517553\" id=\"udd517553\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">y,n,q,a,d,/,?</span><span data-lake-id=\"u5132d3aa\" id=\"u5132d3aa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">其中一项选择操作方式，具体功能解释如下：</span></p><ul list=\"ua5ceb748\"><li fid=\"uafdc3d71\" data-lake-id=\"u708cbd22\" id=\"u708cbd22\"><span data-lake-id=\"ud434924f\" id=\"ud434924f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">y：接受修改</span></li><li fid=\"uafdc3d71\" data-lake-id=\"ue422ef97\" id=\"ue422ef97\"><span data-lake-id=\"u73b5e0a5\" id=\"u73b5e0a5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">n：忽略修改</span></li><li fid=\"uafdc3d71\" data-lake-id=\"ucdafa2b8\" id=\"ucdafa2b8\"><span data-lake-id=\"u8da4f963\" id=\"u8da4f963\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">q：退出当前命令</span></li><li fid=\"uafdc3d71\" data-lake-id=\"u9c27b4e8\" id=\"u9c27b4e8\"><span data-lake-id=\"u076ad9c9\" id=\"u076ad9c9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">a：添加修改</span></li><li fid=\"uafdc3d71\" data-lake-id=\"uef5c2434\" id=\"uef5c2434\"><span data-lake-id=\"ub3b101ef\" id=\"ub3b101ef\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">d：放弃修改</span></li><li fid=\"uafdc3d71\" data-lake-id=\"u9d562f64\" id=\"u9d562f64\"><span data-lake-id=\"ua18d4273\" id=\"ua18d4273\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">/：通过正则表达式匹配修改内容</span></li><li fid=\"uafdc3d71\" data-lake-id=\"ue7e5bd19\" id=\"ue7e5bd19\"><span data-lake-id=\"u0b418a1e\" id=\"u0b418a1e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">?：查看帮助信息</span></li></ul><p data-lake-id=\"ub0ef6e63\" id=\"ub0ef6e63\"><span data-lake-id=\"u5c31b367\" id=\"u5c31b367\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"uc3b61d9b\" id=\"uc3b61d9b\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">add</span><span data-lake-id=\"ua3e020b5\" id=\"ua3e020b5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> -u</span></p><p data-lake-id=\"ub2694136\" id=\"ub2694136\"><span data-lake-id=\"u6649a3b5\" id=\"u6649a3b5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">直接进入交互命令中的</span><span data-lake-id=\"u55342e6a\" id=\"u55342e6a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ud08ac0c5\" id=\"ud08ac0c5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">update</span><span data-lake-id=\"ud1d5d6bf\" id=\"ud1d5d6bf\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">模式</span></p><p data-lake-id=\"u04bfcb3d\" id=\"u04bfcb3d\"><span data-lake-id=\"u7d6884df\" id=\"u7d6884df\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">它会先列出工作区</span><span data-lake-id=\"ue9e0786d\" id=\"ue9e0786d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u7cebffb3\" id=\"u7cebffb3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">修改</span><span data-lake-id=\"u969a3c8e\" id=\"u969a3c8e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">或</span><span data-lake-id=\"u05b85101\" id=\"u05b85101\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">删除</span><span data-lake-id=\"ubb006fb7\" id=\"ubb006fb7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文件列表，</span><span data-lake-id=\"u874a2d2c\" id=\"u874a2d2c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">新增</span><span data-lake-id=\"ua616f1db\" id=\"ua616f1db\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文件不会被显示，在命令行</span><span data-lake-id=\"u1dda15eb\" id=\"u1dda15eb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Update&gt;&gt;</span><span data-lake-id=\"u05574c39\" id=\"u05574c39\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">后输入相应的列表序列号表示选中该项，回车继续选择，如果已选好，直接回车回到命令主界面</span></p><blockquote data-lake-id=\"uc59617a9\" id=\"uc59617a9\"><p data-lake-id=\"u634ca6c1\" id=\"u634ca6c1\"><span data-lake-id=\"u0a6a2bbf\" id=\"u0a6a2bbf\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u87bb3581\" id=\"u87bb3581\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">add</span><span data-lake-id=\"u31d5c9bb\" id=\"u31d5c9bb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><em><span data-lake-id=\"udb6b9b18\" id=\"udb6b9b18\" class=\"lake-fontsize-11\" style=\"color: rgb(160, 161, 167)\">--ignore-removal .</span></em></p></blockquote><p data-lake-id=\"u0adc6a34\" id=\"u0adc6a34\"><span data-lake-id=\"u890866a4\" id=\"u890866a4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">添加工作区</span><span data-lake-id=\"ud7cb6bb5\" id=\"ud7cb6bb5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u06641c46\" id=\"u06641c46\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">修改</span><span data-lake-id=\"u31db18bb\" id=\"u31db18bb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">或</span><span data-lake-id=\"u49c5e598\" id=\"u49c5e598\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">新增</span><span data-lake-id=\"ud485773b\" id=\"ud485773b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文件列表，</span><span data-lake-id=\"u58c916b3\" id=\"u58c916b3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">删除</span><span data-lake-id=\"uc5f0b2d0\" id=\"uc5f0b2d0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文件不会被添加</span></p><h4 data-lake-id=\"wUErY\" id=\"wUErY\"><strong><span data-lake-id=\"u83361a09\" id=\"u83361a09\" style=\"color: rgb(79, 79, 79)\">git commit</span></strong></h4><p data-lake-id=\"u0a3e5f3d\" id=\"u0a3e5f3d\"><span data-lake-id=\"u9b7a61b3\" id=\"u9b7a61b3\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">把暂存区的文件提交到本地版本库</span></p><blockquote data-lake-id=\"u14903818\" id=\"u14903818\"><p data-lake-id=\"u49ce2962\" id=\"u49ce2962\"><span data-lake-id=\"uf7c45586\" id=\"uf7c45586\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u81f60371\" id=\"u81f60371\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">commit</span><span data-lake-id=\"u7355978b\" id=\"u7355978b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u79aaae87\" id=\"u79aaae87\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u299eedcd\" id=\"u299eedcd\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">m </span><span data-lake-id=\"u42fa73f6\" id=\"u42fa73f6\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">'第一行提交原因'</span><span data-lake-id=\"u24295a32\" id=\"u24295a32\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u88774fb1\" id=\"u88774fb1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u3a3ac2ab\" id=\"u3a3ac2ab\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">m </span><span data-lake-id=\"u02644a61\" id=\"u02644a61\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">'第二行提交原因'</span></p></blockquote><p data-lake-id=\"u0dc43b76\" id=\"u0dc43b76\"><span data-lake-id=\"ub0bcd9fc\" id=\"ub0bcd9fc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">不打开编辑器，直接在命令行中输入多行提交原因</span></p><blockquote data-lake-id=\"u4ff8f785\" id=\"u4ff8f785\"><p data-lake-id=\"u9b2690e3\" id=\"u9b2690e3\"><span data-lake-id=\"u203ab0b5\" id=\"u203ab0b5\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u523f76f5\" id=\"u523f76f5\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">commit</span><span data-lake-id=\"u4a7a830a\" id=\"u4a7a830a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ua445121a\" id=\"ua445121a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u0d8a4cfe\" id=\"u0d8a4cfe\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">am </span><span data-lake-id=\"u96f992e7\" id=\"u96f992e7\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">'提交原因'</span></p></blockquote><p data-lake-id=\"ua18372b0\" id=\"ua18372b0\"><span data-lake-id=\"ub414bf8f\" id=\"ub414bf8f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将工作区</span><span data-lake-id=\"u9c10d82a\" id=\"u9c10d82a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u30c48f81\" id=\"u30c48f81\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">修改</span><span data-lake-id=\"u911b7406\" id=\"u911b7406\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">或</span><span data-lake-id=\"u47a0b1eb\" id=\"u47a0b1eb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">删除</span><span data-lake-id=\"u3ee9fa44\" id=\"u3ee9fa44\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文件提交到本地版本库，</span><span data-lake-id=\"u655fcc92\" id=\"u655fcc92\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">新增</span><span data-lake-id=\"uf806b5f9\" id=\"uf806b5f9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文件不会被提交</span></p><blockquote data-lake-id=\"udf88cae7\" id=\"udf88cae7\"><p data-lake-id=\"uf969fc69\" id=\"uf969fc69\"><span data-lake-id=\"u19efff44\" id=\"u19efff44\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"ua39cdd55\" id=\"ua39cdd55\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">commit</span><span data-lake-id=\"u4ff1c963\" id=\"u4ff1c963\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><em><span data-lake-id=\"uf2700ba6\" id=\"uf2700ba6\" class=\"lake-fontsize-11\" style=\"color: rgb(160, 161, 167)\">--amend -m '提交原因'</span></em></p></blockquote><p data-lake-id=\"ua01e34bd\" id=\"ua01e34bd\"><span data-lake-id=\"uc9948e5f\" id=\"uc9948e5f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">修改最新一条提交记录的提交原因</span></p><blockquote data-lake-id=\"u2dabbd3e\" id=\"u2dabbd3e\"><p data-lake-id=\"u7dbeede4\" id=\"u7dbeede4\"><span data-lake-id=\"u03892d52\" id=\"u03892d52\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u0faec5b4\" id=\"u0faec5b4\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">commit</span><span data-lake-id=\"ub14c1f12\" id=\"ub14c1f12\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"ub62b859e\" id=\"ub62b859e\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u70720e61\" id=\"u70720e61\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">C HEAD</span></p></blockquote><p data-lake-id=\"u73e06722\" id=\"u73e06722\"><span data-lake-id=\"u2cbf510c\" id=\"u2cbf510c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将当前文件改动提交到</span><span data-lake-id=\"ue6195fab\" id=\"ue6195fab\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u15793f47\" id=\"u15793f47\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"u2112b45a\" id=\"u2112b45a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">或当前分支的历史ID</span></p><h4 data-lake-id=\"W0moe\" id=\"W0moe\"><strong><span data-lake-id=\"u2cb9b269\" id=\"u2cb9b269\" style=\"color: rgb(79, 79, 79)\">git mv</span></strong></h4><p data-lake-id=\"ud05fe7fe\" id=\"ud05fe7fe\"><span data-lake-id=\"ue765809a\" id=\"ue765809a\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">移动或重命名文件、目录</span></p><blockquote data-lake-id=\"uaf0423b1\" id=\"uaf0423b1\"><p data-lake-id=\"ub894e180\" id=\"ub894e180\"><span data-lake-id=\"uae1148fc\" id=\"uae1148fc\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git mv </span><span data-lake-id=\"ufece6ebb\" id=\"ufece6ebb\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">a</span><span data-lake-id=\"u04e9923d\" id=\"u04e9923d\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">.md</span><span data-lake-id=\"u14ce48c4\" id=\"u14ce48c4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u50af3e2a\" id=\"u50af3e2a\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">b</span><span data-lake-id=\"ub84dc694\" id=\"ub84dc694\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">.md</span><span data-lake-id=\"u218707a2\" id=\"u218707a2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> -f</span></p></blockquote><p data-lake-id=\"u5b6dfddf\" id=\"u5b6dfddf\"><span data-lake-id=\"u91a01f71\" id=\"u91a01f71\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将</span><span data-lake-id=\"ucb8975d5\" id=\"ucb8975d5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ufda77ebd\" id=\"ufda77ebd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">a.md</span><span data-lake-id=\"u370d2cf3\" id=\"u370d2cf3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">重命名为</span><span data-lake-id=\"u9faf27bc\" id=\"u9faf27bc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">b.md</span><span data-lake-id=\"u191bf9e2\" id=\"u191bf9e2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">，同时添加变动到暂存区，加</span><span data-lake-id=\"u0bdb8c7e\" id=\"u0bdb8c7e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">-f</span><span data-lake-id=\"udb228bd3\" id=\"udb228bd3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">参数可以强制重命名，相比用</span><span data-lake-id=\"u5046841c\" id=\"u5046841c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">mv a.md b.md</span><span data-lake-id=\"uf36a03d6\" id=\"uf36a03d6\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">命令省去了</span><span data-lake-id=\"ucfc41966\" id=\"ucfc41966\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add</span><span data-lake-id=\"u53c2746b\" id=\"u53c2746b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">操作</span></p><h4 data-lake-id=\"h2LDP\" id=\"h2LDP\"><strong><span data-lake-id=\"ua0092bc1\" id=\"ua0092bc1\" style=\"color: rgb(79, 79, 79)\">git rm</span></strong></h4><p data-lake-id=\"u2273f58a\" id=\"u2273f58a\"><span data-lake-id=\"u41b73aeb\" id=\"u41b73aeb\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">从工作区和暂存区移除文件</span></p><blockquote data-lake-id=\"uad0ce2ae\" id=\"uad0ce2ae\"><p data-lake-id=\"u35a7e783\" id=\"u35a7e783\"><span data-lake-id=\"uddd28cf4\" id=\"uddd28cf4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git rm </span><span data-lake-id=\"u6f8245bd\" id=\"u6f8245bd\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">b</span><span data-lake-id=\"u1d8cd8dc\" id=\"u1d8cd8dc\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">.md</span></p></blockquote><p data-lake-id=\"u1ac08fa7\" id=\"u1ac08fa7\"><span data-lake-id=\"ubdc7a4aa\" id=\"ubdc7a4aa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">从工作区和暂存区移除文件</span><span data-lake-id=\"u99379493\" id=\"u99379493\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u17680522\" id=\"u17680522\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">b.md</span><span data-lake-id=\"ufb0b1cbd\" id=\"ufb0b1cbd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">，同时添加变动到暂存区，相比用</span><span data-lake-id=\"u0f6d7a95\" id=\"u0f6d7a95\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">rm b.md</span><span data-lake-id=\"u3afdd293\" id=\"u3afdd293\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">命令省去了</span><span data-lake-id=\"uf1a7097a\" id=\"uf1a7097a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git add</span><span data-lake-id=\"u5b1b06f8\" id=\"u5b1b06f8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">操作</span></p><blockquote data-lake-id=\"u0111ddff\" id=\"u0111ddff\"><p data-lake-id=\"u46b41ec7\" id=\"u46b41ec7\"><span data-lake-id=\"u0b43998b\" id=\"u0b43998b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git rm </span><span data-lake-id=\"u72331d99\" id=\"u72331d99\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">src</span><span data-lake-id=\"ucc59aabe\" id=\"ucc59aabe\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">/ -r</span></p></blockquote><p data-lake-id=\"u4ce4471e\" id=\"u4ce4471e\"><span data-lake-id=\"uaed7c214\" id=\"uaed7c214\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">允许从工作区和暂存区移除目录</span></p><h4 data-lake-id=\"ZmENC\" id=\"ZmENC\"><strong><span data-lake-id=\"uf5e4342a\" id=\"uf5e4342a\" style=\"color: rgb(79, 79, 79)\">git status</span></strong></h4><blockquote data-lake-id=\"u7cbc94ce\" id=\"u7cbc94ce\"><p data-lake-id=\"u37517192\" id=\"u37517192\"><span data-lake-id=\"u6debfc75\" id=\"u6debfc75\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"uaba02a91\" id=\"uaba02a91\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">status</span><span data-lake-id=\"uf99fc36b\" id=\"uf99fc36b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> -s</span></p></blockquote><p data-lake-id=\"uc28a6e20\" id=\"uc28a6e20\"><span data-lake-id=\"u8234291b\" id=\"u8234291b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">以简短方式查看工作区和暂存区文件状态，示例如下：</span></p><p data-lake-id=\"u59a16462\" id=\"u59a16462\"><span data-lake-id=\"u285fc851\" id=\"u285fc851\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">M demo.html</span></p><p data-lake-id=\"u54a193e6\" id=\"u54a193e6\"><span data-lake-id=\"u63d062d8\" id=\"u63d062d8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">?? test.html</span></p><blockquote data-lake-id=\"u9d5508dc\" id=\"u9d5508dc\"><p data-lake-id=\"u0ab7f336\" id=\"u0ab7f336\"><span data-lake-id=\"u0f6a3172\" id=\"u0f6a3172\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"ua9e465fa\" id=\"ua9e465fa\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">status</span><span data-lake-id=\"u6c308505\" id=\"u6c308505\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><em><span data-lake-id=\"u94dbf4ed\" id=\"u94dbf4ed\" class=\"lake-fontsize-11\" style=\"color: rgb(160, 161, 167)\">--ignored</span></em></p></blockquote><p data-lake-id=\"u524e75f2\" id=\"u524e75f2\"><span data-lake-id=\"uc2c7f770\" id=\"uc2c7f770\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">查看工作区和暂存区文件状态，包括被忽略的文件</span></p><h3 data-lake-id=\"wFWwx\" id=\"wFWwx\"><strong><span data-lake-id=\"u0c626af4\" id=\"u0c626af4\" style=\"color: rgb(79, 79, 79)\">操作分支</span></strong></h3><h4 data-lake-id=\"In8Ll\" id=\"In8Ll\"><strong><span data-lake-id=\"ue68b2efb\" id=\"ue68b2efb\" style=\"color: rgb(79, 79, 79)\">git branch</span></strong></h4><p data-lake-id=\"u7da8d366\" id=\"u7da8d366\"><span data-lake-id=\"u1528adaa\" id=\"u1528adaa\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">查看、创建、删除分支</span></p><blockquote data-lake-id=\"u0282b5d0\" id=\"u0282b5d0\"><p data-lake-id=\"u78c74458\" id=\"u78c74458\"><span data-lake-id=\"u327549ec\" id=\"u327549ec\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch -</span><span data-lake-id=\"u9d4c3b59\" id=\"u9d4c3b59\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">a</span></p></blockquote><p data-lake-id=\"u8e1ef593\" id=\"u8e1ef593\"><span data-lake-id=\"ub11020a7\" id=\"ub11020a7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">查看本地版本库和远程版本库上的分支列表</span></p><blockquote data-lake-id=\"ub5336741\" id=\"ub5336741\"><p data-lake-id=\"u2a0ca088\" id=\"u2a0ca088\"><span data-lake-id=\"u4c81a8ba\" id=\"u4c81a8ba\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch -r</span></p></blockquote><p data-lake-id=\"ua12b816e\" id=\"ua12b816e\"><span data-lake-id=\"u196b155c\" id=\"u196b155c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">查看远程版本库上的分支列表，</span><em><span data-lake-id=\"u9d3adf71\" id=\"u9d3adf71\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">加上</span></em><span data-lake-id=\"u53f150e8\" id=\"u53f150e8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u9b2601c9\" id=\"u9b2601c9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">-d</span><span data-lake-id=\"uec8823d6\" id=\"uec8823d6\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">参数可以删除远程版本库上的分支</span></p><blockquote data-lake-id=\"ua76a98bf\" id=\"ua76a98bf\"><p data-lake-id=\"uf6674e0a\" id=\"uf6674e0a\"><span data-lake-id=\"u7a384cc3\" id=\"u7a384cc3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch -D</span></p></blockquote><p data-lake-id=\"u3b7f1d50\" id=\"u3b7f1d50\"><span data-lake-id=\"uaa99ff6a\" id=\"uaa99ff6a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支未提交到本地版本库前强制删除分支</span></p><blockquote data-lake-id=\"u4f94e282\" id=\"u4f94e282\"><p data-lake-id=\"u756dd566\" id=\"u756dd566\"><span data-lake-id=\"u4e3f8d4c\" id=\"u4e3f8d4c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git branch -vv</span></p></blockquote><p data-lake-id=\"u6e4807b9\" id=\"u6e4807b9\"><span data-lake-id=\"uae5446cf\" id=\"uae5446cf\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">查看带有最后提交id、最近提交原因等信息的本地版本库分支列表</span></p><h4 data-lake-id=\"qNKmF\" id=\"qNKmF\"><strong><span data-lake-id=\"u6cf1ab4e\" id=\"u6cf1ab4e\" style=\"color: rgb(79, 79, 79)\">git merge</span></strong></h4><p data-lake-id=\"ue5826302\" id=\"ue5826302\"><span data-lake-id=\"ub174158f\" id=\"ub174158f\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">将其它分支合并到当前分支</span></p><blockquote data-lake-id=\"u91748921\" id=\"u91748921\"><p data-lake-id=\"u729e1bd9\" id=\"u729e1bd9\"><span data-lake-id=\"ue4dbec03\" id=\"ue4dbec03\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u2d6420c8\" id=\"u2d6420c8\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">merge</span><span data-lake-id=\"ueb13824e\" id=\"ueb13824e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><em><span data-lake-id=\"u9c65df7e\" id=\"u9c65df7e\" class=\"lake-fontsize-11\" style=\"color: rgb(160, 161, 167)\">--squash</span></em></p></blockquote><p data-lake-id=\"uc09f159f\" id=\"uc09f159f\"><span data-lake-id=\"u16a67ba9\" id=\"u16a67ba9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将待合并分支上的</span><span data-lake-id=\"u921d656f\" id=\"u921d656f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u27a181d4\" id=\"u27a181d4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">commit</span><span data-lake-id=\"u0d9bb80b\" id=\"u0d9bb80b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">合并成一个新的</span><span data-lake-id=\"u0bbba504\" id=\"u0bbba504\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">commit</span><span data-lake-id=\"u42bf77be\" id=\"u42bf77be\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">放入当前分支，适用于待合并分支的提交记录不需要保留的情况</span></p><blockquote data-lake-id=\"u8168f83a\" id=\"u8168f83a\"><p data-lake-id=\"ub361e875\" id=\"ub361e875\"><span data-lake-id=\"u96dce829\" id=\"u96dce829\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git merge --no-ff</span></p></blockquote><p data-lake-id=\"u45bf2beb\" id=\"u45bf2beb\"><span data-lake-id=\"ud75b205c\" id=\"ud75b205c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">默认情况下，</span><span data-lake-id=\"u29b7e674\" id=\"u29b7e674\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u17329f20\" id=\"u17329f20\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">执行&quot;</span><span data-lake-id=\"u1df871dc\" id=\"u1df871dc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">快进式合并</span><span data-lake-id=\"ubb5bfd11\" id=\"ubb5bfd11\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">&quot;(fast-farward merge)，会直接将</span><span data-lake-id=\"uad899b88\" id=\"uad899b88\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Master</span><span data-lake-id=\"u068a946d\" id=\"u068a946d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支指向</span><span data-lake-id=\"ua491ed18\" id=\"ua491ed18\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Develop</span><span data-lake-id=\"u67216f63\" id=\"u67216f63\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支，使用</span><span data-lake-id=\"udd242e5b\" id=\"udd242e5b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">--no-ff</span><span data-lake-id=\"ua797ab43\" id=\"ua797ab43\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">参数后，会执行正常合并，在</span><span data-lake-id=\"u90012b1b\" id=\"u90012b1b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Master</span><span data-lake-id=\"uda0ae120\" id=\"uda0ae120\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支上生成一个新节点，保证版本演进更清晰。</span></p><blockquote data-lake-id=\"u5107949a\" id=\"u5107949a\"><p data-lake-id=\"ufae39399\" id=\"ufae39399\"><span data-lake-id=\"ub7306553\" id=\"ub7306553\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"ub61860df\" id=\"ub61860df\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">merge</span><span data-lake-id=\"u783f5e13\" id=\"u783f5e13\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><em><span data-lake-id=\"u3088d044\" id=\"u3088d044\" class=\"lake-fontsize-11\" style=\"color: rgb(160, 161, 167)\">--no-edit</span></em></p></blockquote><p data-lake-id=\"ub829de51\" id=\"ub829de51\"><span data-lake-id=\"u86d3b87b\" id=\"u86d3b87b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">在没有冲突的情况下合并，不想手动编辑提交原因，而是用</span><span data-lake-id=\"u07f86626\" id=\"u07f86626\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ub1ee9bca\" id=\"ub1ee9bca\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"ufa1614ff\" id=\"ufa1614ff\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">自动生成的类似</span><span data-lake-id=\"u7d80c563\" id=\"u7d80c563\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Merge branch 'test'</span><span data-lake-id=\"u81690101\" id=\"u81690101\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的文字直接提交</span></p><h4 data-lake-id=\"SPORG\" id=\"SPORG\"><strong><span data-lake-id=\"uaf00127c\" id=\"uaf00127c\" style=\"color: rgb(79, 79, 79)\">git checkout</span></strong></h4><p data-lake-id=\"u6a1d32c9\" id=\"u6a1d32c9\"><span data-lake-id=\"u5ccbe54a\" id=\"u5ccbe54a\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">切换分支</span></p><blockquote data-lake-id=\"u9c307890\" id=\"u9c307890\"><p data-lake-id=\"ufb1bb3f1\" id=\"ufb1bb3f1\"><span data-lake-id=\"u1e30f6b3\" id=\"u1e30f6b3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git checkout -</span><span data-lake-id=\"uc4ed6b65\" id=\"uc4ed6b65\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">b</span><span data-lake-id=\"u419d6f74\" id=\"u419d6f74\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> daily/</span><span data-lake-id=\"ub20ee128\" id=\"ub20ee128\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0.0</span><span data-lake-id=\"u54d3f81a\" id=\"u54d3f81a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span><span data-lake-id=\"uc457f90a\" id=\"uc457f90a\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">1</span></p></blockquote><p data-lake-id=\"ua1d05ec0\" id=\"ua1d05ec0\"><span data-lake-id=\"u4f52cc20\" id=\"u4f52cc20\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">创建</span><span data-lake-id=\"ud7d2ef85\" id=\"ud7d2ef85\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"uf8dbf252\" id=\"uf8dbf252\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">daily/0.0.1</span><span data-lake-id=\"u77d02792\" id=\"u77d02792\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">分支，同时切换到这个新创建的分支</span></p><blockquote data-lake-id=\"u6d266915\" id=\"u6d266915\"><p data-lake-id=\"ub5ceda05\" id=\"ub5ceda05\"><span data-lake-id=\"u5566e944\" id=\"u5566e944\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git checkout HEAD demo.html</span></p></blockquote><p data-lake-id=\"ufc2dfce9\" id=\"ufc2dfce9\"><span data-lake-id=\"u739abd30\" id=\"u739abd30\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">从本地版本库的</span><span data-lake-id=\"u7fade8c8\" id=\"u7fade8c8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u89703edf\" id=\"u89703edf\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"u3e769ef4\" id=\"u3e769ef4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">(也可以是提交ID、分支名、Tag名) 历史中检出</span><span data-lake-id=\"u0cd65c78\" id=\"u0cd65c78\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">demo.html</span><span data-lake-id=\"ub137b17f\" id=\"ub137b17f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">覆盖当前工作区的文件，如果省略</span><span data-lake-id=\"ua00442e6\" id=\"ua00442e6\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"u18a2a969\" id=\"u18a2a969\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">则是从暂存区检出</span></p><blockquote data-lake-id=\"uad4473c2\" id=\"uad4473c2\"><p data-lake-id=\"ub1502298\" id=\"ub1502298\"><span data-lake-id=\"ua5fe40b0\" id=\"ua5fe40b0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git checkout </span><span data-lake-id=\"u06a3067c\" id=\"u06a3067c\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">--orphan</span><span data-lake-id=\"ub827e311\" id=\"ub827e311\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> new_branch</span></p></blockquote><p data-lake-id=\"uaf5f6b72\" id=\"uaf5f6b72\"><span data-lake-id=\"ud5775d92\" id=\"ud5775d92\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">这个命令会创建一个全新的，完全没有历史记录的新分支，但当前源分支上所有的最新文件都还在，真是强迫症患者的福音，但这个新分支必须做一次</span><span data-lake-id=\"u0c7d7c1f\" id=\"u0c7d7c1f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u184fc97b\" id=\"u184fc97b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git commit</span><span data-lake-id=\"uda463c0b\" id=\"uda463c0b\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">操作后才会真正成为一个新分支。</span></p><blockquote data-lake-id=\"uec561dee\" id=\"uec561dee\"><p data-lake-id=\"ud9f78b1a\" id=\"ud9f78b1a\"><span data-lake-id=\"ub3230826\" id=\"ub3230826\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git checkout -</span><span data-lake-id=\"ua8998b6b\" id=\"ua8998b6b\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">p</span><span data-lake-id=\"u2bcff429\" id=\"u2bcff429\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> other_branch</span></p></blockquote><p data-lake-id=\"u666f5621\" id=\"u666f5621\"><span data-lake-id=\"uc92b9b3a\" id=\"uc92b9b3a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">这个命令主要用来比较两个分支间的差异内容，并提供交互式的界面来选择进一步的操作，这个命令不仅可以比较两个分支间的差异，还可以比较单个文件的差异。</span></p><h4 data-lake-id=\"nxrwG\" id=\"nxrwG\"><strong><span data-lake-id=\"u98832444\" id=\"u98832444\" style=\"color: rgb(79, 79, 79)\">git stash</span></strong></h4><p data-lake-id=\"u37adffc1\" id=\"u37adffc1\"><span data-lake-id=\"u956e41a7\" id=\"u956e41a7\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">在</span><span data-lake-id=\"uf88ddbb4\" id=\"uf88ddbb4\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\"> </span><span data-lake-id=\"u7a58c1de\" id=\"u7a58c1de\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">Git</span><span data-lake-id=\"u8bf83747\" id=\"u8bf83747\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">的栈中保存当前修改或删除的工作进度，当你在一个分支里做某项功能开发时，接到通知把昨天已经测试完没问题的代码发布到线上，但这时你已经在这个分支里加入了其它未提交的代码，这个时候就可以把这些未提交的代码存到栈里。</span></p><blockquote data-lake-id=\"u900f544d\" id=\"u900f544d\"><p data-lake-id=\"u1adcb02e\" id=\"u1adcb02e\"><span data-lake-id=\"u3eab1ae3\" id=\"u3eab1ae3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash</span></p></blockquote><p data-lake-id=\"ud3fe4b65\" id=\"ud3fe4b65\"><span data-lake-id=\"ua582129f\" id=\"ua582129f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将未提交的文件保存到Git栈中</span></p><p data-lake-id=\"ud7110919\" id=\"ud7110919\"><span data-lake-id=\"u727056db\" id=\"u727056db\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash list</span></p><p data-lake-id=\"u60c1ebb5\" id=\"u60c1ebb5\"><span data-lake-id=\"u826054fb\" id=\"u826054fb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">查看栈中保存的列表</span></p><blockquote data-lake-id=\"u1b1e192b\" id=\"u1b1e192b\"><p data-lake-id=\"ua3737692\" id=\"ua3737692\"><span data-lake-id=\"u3e996547\" id=\"u3e996547\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash show </span><span data-lake-id=\"u408e6290\" id=\"u408e6290\" class=\"lake-fontsize-11\" style=\"color: rgb(64, 120, 242)\">stash@</span><span data-lake-id=\"uf59b9702\" id=\"uf59b9702\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">{</span><span data-lake-id=\"uec423a86\" id=\"uec423a86\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u7207e87a\" id=\"u7207e87a\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">}</span></p></blockquote><p data-lake-id=\"ua19681f8\" id=\"ua19681f8\"><span data-lake-id=\"uc8bbe5d4\" id=\"uc8bbe5d4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示栈中其中一条记录</span></p><blockquote data-lake-id=\"u4e58c034\" id=\"u4e58c034\"><p data-lake-id=\"ud1bd1c92\" id=\"ud1bd1c92\"><span data-lake-id=\"u11e5f7a2\" id=\"u11e5f7a2\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash drop </span><span data-lake-id=\"ub75eada5\" id=\"ub75eada5\" class=\"lake-fontsize-11\" style=\"color: rgb(64, 120, 242)\">stash@</span><span data-lake-id=\"u6455451b\" id=\"u6455451b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">{</span><span data-lake-id=\"u23165bf1\" id=\"u23165bf1\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u40970c52\" id=\"u40970c52\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">}</span></p></blockquote><p data-lake-id=\"u201bfc57\" id=\"u201bfc57\"><span data-lake-id=\"uebfe3f00\" id=\"uebfe3f00\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">移除栈中其中一条记录</span></p><blockquote data-lake-id=\"u465ba604\" id=\"u465ba604\"><p data-lake-id=\"ua1f6633f\" id=\"ua1f6633f\"><span data-lake-id=\"udd175305\" id=\"udd175305\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash </span><span data-lake-id=\"ue440a90b\" id=\"ue440a90b\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">pop</span></p></blockquote><p data-lake-id=\"u862b3c26\" id=\"u862b3c26\"><span data-lake-id=\"u9d93b373\" id=\"u9d93b373\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">从Git栈中检出最新保存的一条记录，并将它从栈中移除</span></p><blockquote data-lake-id=\"u1c4103d2\" id=\"u1c4103d2\"><p data-lake-id=\"u0367e259\" id=\"u0367e259\"><span data-lake-id=\"u7ba63bda\" id=\"u7ba63bda\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash apply </span><span data-lake-id=\"u4973eb59\" id=\"u4973eb59\" class=\"lake-fontsize-11\" style=\"color: rgb(64, 120, 242)\">stash@</span><span data-lake-id=\"u4d7d5bb1\" id=\"u4d7d5bb1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">{</span><span data-lake-id=\"u68751fc6\" id=\"u68751fc6\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"u284b4866\" id=\"u284b4866\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">}</span></p></blockquote><p data-lake-id=\"u246c00ea\" id=\"u246c00ea\"><span data-lake-id=\"u567c515c\" id=\"u567c515c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">从Git栈中检出其中一条记录，但不从栈中移除</span></p><blockquote data-lake-id=\"ufbf98bf3\" id=\"ufbf98bf3\"><p data-lake-id=\"u8ec825e4\" id=\"u8ec825e4\"><span data-lake-id=\"u104b1a15\" id=\"u104b1a15\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash branch new_banch</span></p></blockquote><p data-lake-id=\"uc39a2733\" id=\"uc39a2733\"><span data-lake-id=\"uc6f489b3\" id=\"uc6f489b3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">把当前栈中最近一次记录检出并创建一个新分支</span></p><blockquote data-lake-id=\"u566e47fd\" id=\"u566e47fd\"><p data-lake-id=\"u300e9de6\" id=\"u300e9de6\"><span data-lake-id=\"u99a4bcc1\" id=\"u99a4bcc1\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash </span><span data-lake-id=\"u2e1e8369\" id=\"u2e1e8369\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">clear</span></p></blockquote><p data-lake-id=\"uba5b04cd\" id=\"uba5b04cd\"><span data-lake-id=\"u3e83ac2f\" id=\"u3e83ac2f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">清空栈里的所有记录</span></p><blockquote data-lake-id=\"u176d88a6\" id=\"u176d88a6\"><p data-lake-id=\"ue0adcd8c\" id=\"ue0adcd8c\"><span data-lake-id=\"uded9532e\" id=\"uded9532e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash </span><span data-lake-id=\"u4d25b02b\" id=\"u4d25b02b\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">create</span></p></blockquote><p data-lake-id=\"uda445761\" id=\"uda445761\"><span data-lake-id=\"uddc5e5a4\" id=\"uddc5e5a4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">为当前修改或删除的文件创建一个自定义的栈并返回一个ID，此时并未真正存储到栈里</span></p><blockquote data-lake-id=\"ua473c651\" id=\"ua473c651\"><p data-lake-id=\"u24ba3bd5\" id=\"u24ba3bd5\"><span data-lake-id=\"ueca791a0\" id=\"ueca791a0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash store xxxxxx</span></p></blockquote><p data-lake-id=\"u2a79af0f\" id=\"u2a79af0f\"><span data-lake-id=\"u3d09342e\" id=\"u3d09342e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">将</span><span data-lake-id=\"u4e4ba7ba\" id=\"u4e4ba7ba\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ua1d82111\" id=\"ua1d82111\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">create</span><span data-lake-id=\"udcbf28cd\" id=\"udcbf28cd\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">方法里返回的ID放到</span><span data-lake-id=\"u6d8e2b9f\" id=\"u6d8e2b9f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">store</span><span data-lake-id=\"ua863fb79\" id=\"ua863fb79\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">后面，此时在栈里真正创建了一个记录，但当前修改或删除的文件并未从工作区移除</span></p><p data-lake-id=\"uae498c65\" id=\"uae498c65\"><span data-lake-id=\"ufd8b4da9\" id=\"ufd8b4da9\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">$ </span><span data-lake-id=\"u56dbf553\" id=\"u56dbf553\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash create09eb9a97ad632d0825be1ece361936d1d0bdb5c7</span><span data-lake-id=\"u895006ec\" id=\"u895006ec\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">$ </span><span data-lake-id=\"u2cb1abec\" id=\"u2cb1abec\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash store 09eb9a97ad632d0825be1ece361936d1d0bdb5c7</span><span data-lake-id=\"u66aef08e\" id=\"u66aef08e\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">$ </span><span data-lake-id=\"u097067c3\" id=\"u097067c3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git stash liststash@{</span><span data-lake-id=\"ue6540396\" id=\"ue6540396\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">0</span><span data-lake-id=\"ub49e8d2b\" id=\"ub49e8d2b\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">}: Created via </span><span data-lake-id=\"u74d56047\" id=\"u74d56047\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">&quot;git stash store&quot;</span><span data-lake-id=\"u5e5433b6\" id=\"u5e5433b6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">.</span></p><h3 data-lake-id=\"sn0tm\" id=\"sn0tm\"><strong><span data-lake-id=\"u06bb0468\" id=\"u06bb0468\" style=\"color: rgb(79, 79, 79)\">操作历史</span></strong></h3><h4 data-lake-id=\"LR63L\" id=\"LR63L\"><strong><span data-lake-id=\"ubc14d998\" id=\"ubc14d998\" style=\"color: rgb(79, 79, 79)\">git log</span></strong></h4><p data-lake-id=\"ud4f9bff2\" id=\"ud4f9bff2\"><span data-lake-id=\"u02cda5bd\" id=\"u02cda5bd\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">显示提交历史记录</span></p><p data-lake-id=\"u37531f0a\" id=\"u37531f0a\"><span data-lake-id=\"u4550d505\" id=\"u4550d505\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u19636c89\" id=\"u19636c89\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">log</span><span data-lake-id=\"u43f6f421\" id=\"u43f6f421\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u4fad11f1\" id=\"u4fad11f1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u058daee7\" id=\"u058daee7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">p</span></p><p data-lake-id=\"u86d1eca5\" id=\"u86d1eca5\"><span data-lake-id=\"u6076f813\" id=\"u6076f813\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示带提交差异对比的历史记录</span></p><p data-lake-id=\"ua35699ef\" id=\"ua35699ef\"><span data-lake-id=\"u7343498c\" id=\"u7343498c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u99c3e8a2\" id=\"u99c3e8a2\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">log</span><span data-lake-id=\"u23b0d73e\" id=\"u23b0d73e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> demo.html</span></p><p data-lake-id=\"u1990dcbd\" id=\"u1990dcbd\"><span data-lake-id=\"u69b96ce2\" id=\"u69b96ce2\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示</span><span data-lake-id=\"uffbba213\" id=\"uffbba213\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u3a33bf32\" id=\"u3a33bf32\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">demo.html</span><span data-lake-id=\"ub585ffd4\" id=\"ub585ffd4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">文件的历史记录</span></p><p data-lake-id=\"u124fa74a\" id=\"u124fa74a\"><span data-lake-id=\"u6aaaadd0\" id=\"u6aaaadd0\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u5118101d\" id=\"u5118101d\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">log</span><span data-lake-id=\"udfd41ba7\" id=\"udfd41ba7\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> --since=</span><span data-lake-id=\"u0f332604\" id=\"u0f332604\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">&quot;2 weeks ago&quot;</span></p><p data-lake-id=\"u40716aa8\" id=\"u40716aa8\"><span data-lake-id=\"ubdbcbeb6\" id=\"ubdbcbeb6\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示2周前开始到现在的历史记录，其它时间可以类推</span></p><p data-lake-id=\"uec1b7a02\" id=\"uec1b7a02\"><span data-lake-id=\"u95767b44\" id=\"u95767b44\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"ue880e14d\" id=\"ue880e14d\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">log</span><span data-lake-id=\"uf671a2a6\" id=\"uf671a2a6\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> --before=</span><span data-lake-id=\"u340af3eb\" id=\"u340af3eb\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">&quot;2 weeks ago&quot;</span></p><p data-lake-id=\"u9f472aea\" id=\"u9f472aea\"><span data-lake-id=\"u0d837207\" id=\"u0d837207\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示截止到2周前的历史记录，其它时间可以类推</span></p><p data-lake-id=\"u2494fe36\" id=\"u2494fe36\"><span data-lake-id=\"uec293f05\" id=\"uec293f05\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u6e4320ff\" id=\"u6e4320ff\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">log</span><span data-lake-id=\"u80cbc403\" id=\"u80cbc403\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><span data-lake-id=\"u7dd10d3f\" id=\"u7dd10d3f\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">-</span><span data-lake-id=\"u5e530218\" id=\"u5e530218\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">10</span></p><p data-lake-id=\"u594425a6\" id=\"u594425a6\"><span data-lake-id=\"uf4ce739d\" id=\"uf4ce739d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示最近10条历史记录</span></p><p data-lake-id=\"u2bf2e15b\" id=\"u2bf2e15b\"><span data-lake-id=\"u02ad6232\" id=\"u02ad6232\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u25ed2560\" id=\"u25ed2560\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">log</span><span data-lake-id=\"ua2878784\" id=\"ua2878784\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> f5f630a..HEAD</span></p><p data-lake-id=\"uf465da1a\" id=\"uf465da1a\"><span data-lake-id=\"uef50420f\" id=\"uef50420f\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">显示从提交ID</span><span data-lake-id=\"u4923b592\" id=\"u4923b592\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u3f2e2488\" id=\"u3f2e2488\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">f5f6</span><em><span data-lake-id=\"u3c78c27c\" id=\"u3c78c27c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">30</span></em><span data-lake-id=\"u5be4cb47\" id=\"u5be4cb47\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">a</span><span data-lake-id=\"u3c9a4085\" id=\"u3c9a4085\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">到</span><span data-lake-id=\"u51460edc\" id=\"u51460edc\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"uacae36c0\" id=\"uacae36c0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">之间的记录，</span><span data-lake-id=\"u479eeb70\" id=\"u479eeb70\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"ubc94b4f9\" id=\"ubc94b4f9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">可以为空或其它提交ID</span></p><p data-lake-id=\"u057aea01\" id=\"u057aea01\"><span data-lake-id=\"u6291d10e\" id=\"u6291d10e\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u950c265c\" id=\"u950c265c\" class=\"lake-fontsize-11\" style=\"color: rgb(193, 132, 1)\">log</span><span data-lake-id=\"u9a7aac02\" id=\"u9a7aac02\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span><em><span data-lake-id=\"u80a9aa2a\" id=\"u80a9aa2a\" class=\"lake-fontsize-11\" style=\"color: rgb(160, 161, 167)\">--pretty=oneline</span></em></p><p data-lake-id=\"u9704b74d\" id=\"u9704b74d\"><span data-lake-id=\"uf380a3b3\" id=\"uf380a3b3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">在一行中输出简短的历史记录</span></p><p data-lake-id=\"u64f44981\" id=\"u64f44981\"><span data-lake-id=\"u4fa649d3\" id=\"u4fa649d3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git </span><span data-lake-id=\"u65b0107d\" id=\"u65b0107d\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">log</span><span data-lake-id=\"u8bb78dbb\" id=\"u8bb78dbb\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> --pretty=</span><span data-lake-id=\"uf62e2d81\" id=\"uf62e2d81\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164)\">format</span><span data-lake-id=\"u369636a4\" id=\"u369636a4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">:</span><span data-lake-id=\"ua9fcf198\" id=\"ua9fcf198\" class=\"lake-fontsize-11\" style=\"color: rgb(80, 161, 79)\">&quot;%h&quot;</span><span data-lake-id=\"uc02fc211\" id=\"uc02fc211\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span></p><p data-lake-id=\"u7eea6c5d\" id=\"u7eea6c5d\"><span data-lake-id=\"u1ccacf09\" id=\"u1ccacf09\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">格式化输出历史记录</span></p><p data-lake-id=\"u1ed3a911\" id=\"u1ed3a911\"><span data-lake-id=\"u75374244\" id=\"u75374244\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">Git</span><span data-lake-id=\"u096f48ce\" id=\"u096f48ce\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">用各种</span><span data-lake-id=\"ue1fa0268\" id=\"ue1fa0268\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">placeholder</span><span data-lake-id=\"u33629a8d\" id=\"u33629a8d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">来决定各种显示内容，我挑几个常用的显示如下：</span></p><ul list=\"u6a8db108\"><li fid=\"u20128917\" data-lake-id=\"u8b557dfd\" id=\"u8b557dfd\"><span data-lake-id=\"uc2afa941\" id=\"uc2afa941\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%H: commit hash</span></li><li fid=\"u20128917\" data-lake-id=\"u40112c96\" id=\"u40112c96\"><span data-lake-id=\"ue82b7c25\" id=\"ue82b7c25\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%h: 缩短的commit hash</span></li><li fid=\"u20128917\" data-lake-id=\"u5db80c75\" id=\"u5db80c75\"><span data-lake-id=\"u9f42af33\" id=\"u9f42af33\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%T: tree hash</span></li><li fid=\"u20128917\" data-lake-id=\"u695af25a\" id=\"u695af25a\"><span data-lake-id=\"u48aa8cf5\" id=\"u48aa8cf5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%t: 缩短的 tree hash</span></li><li fid=\"u20128917\" data-lake-id=\"uf3a9d801\" id=\"uf3a9d801\"><span data-lake-id=\"u7764dfaa\" id=\"u7764dfaa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%P: parent hashes</span></li><li fid=\"u20128917\" data-lake-id=\"u6933418f\" id=\"u6933418f\"><span data-lake-id=\"u944cf7b4\" id=\"u944cf7b4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%p: 缩短的 parent hashes</span></li><li fid=\"u20128917\" data-lake-id=\"u1b3c4c8c\" id=\"u1b3c4c8c\"><span data-lake-id=\"u560bfd19\" id=\"u560bfd19\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%an: 作者名字</span></li><li fid=\"u20128917\" data-lake-id=\"uf1dac694\" id=\"uf1dac694\"><span data-lake-id=\"ub1db4eda\" id=\"ub1db4eda\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%aN: mailmap的作者名</span></li><li fid=\"u20128917\" data-lake-id=\"u3a4a9a0a\" id=\"u3a4a9a0a\"><span data-lake-id=\"u4174d0a0\" id=\"u4174d0a0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%ae: 作者邮箱</span></li><li fid=\"u20128917\" data-lake-id=\"ub5d62d1f\" id=\"ub5d62d1f\"><span data-lake-id=\"u5a3e439a\" id=\"u5a3e439a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%ad: 日期 (--date= 制定的格式)</span></li><li fid=\"u20128917\" data-lake-id=\"u1770269e\" id=\"u1770269e\"><span data-lake-id=\"u87a3b5ed\" id=\"u87a3b5ed\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%ar: 日期, 相对格式(1 day ago)</span></li><li fid=\"u20128917\" data-lake-id=\"u09641d5f\" id=\"u09641d5f\"><span data-lake-id=\"u47a52cdb\" id=\"u47a52cdb\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%cn: 提交者名字</span></li><li fid=\"u20128917\" data-lake-id=\"u4a263246\" id=\"u4a263246\"><span data-lake-id=\"u64eda3ba\" id=\"u64eda3ba\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%ce: 提交者 email</span></li><li fid=\"u20128917\" data-lake-id=\"u4e465477\" id=\"u4e465477\"><span data-lake-id=\"u11d854fa\" id=\"u11d854fa\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%cd: 提交日期 (--date= 制定的格式)</span></li><li fid=\"u20128917\" data-lake-id=\"u2a67e353\" id=\"u2a67e353\"><span data-lake-id=\"uc72653e9\" id=\"uc72653e9\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%cr: 提交日期, 相对格式(1 day ago)</span></li><li fid=\"u20128917\" data-lake-id=\"u8448afaa\" id=\"u8448afaa\"><span data-lake-id=\"u721c1372\" id=\"u721c1372\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%d: ref名称</span></li><li fid=\"u20128917\" data-lake-id=\"u59e3c1f4\" id=\"u59e3c1f4\"><span data-lake-id=\"uea19e46c\" id=\"uea19e46c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%s: commit信息标题</span></li><li fid=\"u20128917\" data-lake-id=\"uc74c154a\" id=\"uc74c154a\"><span data-lake-id=\"u61c689e5\" id=\"u61c689e5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%b: commit信息内容</span></li><li fid=\"u20128917\" data-lake-id=\"u3bd5dcd8\" id=\"u3bd5dcd8\"><span data-lake-id=\"u38a4c6b0\" id=\"u38a4c6b0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">%n: 换行</span></li></ul><h4 data-lake-id=\"RrKow\" id=\"RrKow\"><strong><span data-lake-id=\"ufa7f1fdf\" id=\"ufa7f1fdf\" style=\"color: rgb(79, 79, 79)\">git cherry-pick</span></strong></h4><p data-lake-id=\"u70439507\" id=\"u70439507\"><span data-lake-id=\"u90923063\" id=\"u90923063\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">合并分支的一条或几条提交记录到当前分支末梢</span></p><p data-lake-id=\"u1511bd6f\" id=\"u1511bd6f\"><span data-lake-id=\"ua729ce66\" id=\"ua729ce66\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git cherry-pick 170a305</span></p><p data-lake-id=\"u1c11637b\" id=\"u1c11637b\"><span data-lake-id=\"ubc4114d8\" id=\"ubc4114d8\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">合并提交ID</span><span data-lake-id=\"u36397bae\" id=\"u36397bae\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u35b9b8c0\" id=\"u35b9b8c0\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">170a</span><em><span data-lake-id=\"uac31dc5a\" id=\"uac31dc5a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">30</span></em><span data-lake-id=\"ue379af9a\" id=\"ue379af9a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">5</span><span data-lake-id=\"u1c2930d7\" id=\"u1c2930d7\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">到当前分支末梢</span></p><h4 data-lake-id=\"fioVx\" id=\"fioVx\"><strong><span data-lake-id=\"u3f6b98c7\" id=\"u3f6b98c7\" style=\"color: rgb(79, 79, 79)\">git reset</span></strong></h4><p data-lake-id=\"u301e7d1d\" id=\"u301e7d1d\"><span data-lake-id=\"u316fdee2\" id=\"u316fdee2\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">将当前的分支重设(reset)到指定的</span><span data-lake-id=\"u6296c7b3\" id=\"u6296c7b3\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\"> </span><span data-lake-id=\"u5a2b1cb4\" id=\"u5a2b1cb4\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">或者</span><span data-lake-id=\"u4025a027\" id=\"u4025a027\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">HEAD</span></p><p data-lake-id=\"u519965db\" id=\"u519965db\"><span data-lake-id=\"u47626785\" id=\"u47626785\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git reset </span><span data-lake-id=\"ue6aa4e59\" id=\"ue6aa4e59\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">--mixed</span><span data-lake-id=\"ue675cb5d\" id=\"ue675cb5d\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span></p><p data-lake-id=\"u95b852eb\" id=\"u95b852eb\"><span data-lake-id=\"ub3c651fe\" id=\"ub3c651fe\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">--mixed</span><span data-lake-id=\"uaf557c6a\" id=\"uaf557c6a\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">是不带参数时的默认参数，它退回到某个版本，保留文件内容，回退提交历史</span></p><p data-lake-id=\"uf2618e3f\" id=\"uf2618e3f\"><span data-lake-id=\"u0f2d0bf4\" id=\"u0f2d0bf4\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git reset </span><span data-lake-id=\"u7f3d2fff\" id=\"u7f3d2fff\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">--soft</span><span data-lake-id=\"u95d148b3\" id=\"u95d148b3\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span></p><p data-lake-id=\"uacea25f8\" id=\"uacea25f8\"><span data-lake-id=\"ufdeb795e\" id=\"ufdeb795e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">暂存区和工作区中的内容不作任何改变，仅仅把</span><span data-lake-id=\"ub9c6aa0e\" id=\"ub9c6aa0e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u4ed5b74c\" id=\"u4ed5b74c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"ubfc59aff\" id=\"ubfc59aff\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">指向</span></p><p data-lake-id=\"ucce4b507\" id=\"ucce4b507\"><span data-lake-id=\"u125a4e5c\" id=\"u125a4e5c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git reset </span><span data-lake-id=\"u72ebae1a\" id=\"u72ebae1a\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1)\">--hard</span><span data-lake-id=\"u95de054c\" id=\"u95de054c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> </span></p><p data-lake-id=\"ua87e3e0b\" id=\"ua87e3e0b\"><span data-lake-id=\"ue7c6b567\" id=\"ue7c6b567\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">自从</span><span data-lake-id=\"u36f23529\" id=\"u36f23529\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"uac762a7c\" id=\"uac762a7c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">以来在工作区中的任何改变都被丢弃，并把</span><span data-lake-id=\"u814502d3\" id=\"u814502d3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"u4117d97d\" id=\"u4117d97d\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">指向</span></p><h4 data-lake-id=\"qqmG3\" id=\"qqmG3\"><strong><span data-lake-id=\"u9c8174f9\" id=\"u9c8174f9\" style=\"color: rgb(79, 79, 79)\">git rebase</span></strong></h4><p data-lake-id=\"ud3309f09\" id=\"ud3309f09\"><span data-lake-id=\"u0c1a19e8\" id=\"u0c1a19e8\" class=\"lake-fontsize-12\" style=\"color: rgb(79, 79, 79); background-color: rgb(238, 240, 244)\">重新定义分支的版本库状态</span></p><p data-lake-id=\"u9fd633ec\" id=\"u9fd633ec\"><span data-lake-id=\"u6f99c9ca\" id=\"u6f99c9ca\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git rebase branch_name</span></p><p data-lake-id=\"u05dc2430\" id=\"u05dc2430\"><span data-lake-id=\"u29350ee1\" id=\"u29350ee1\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">合并分支，这跟</span><span data-lake-id=\"u8dc82fea\" id=\"u8dc82fea\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u18ab035c\" id=\"u18ab035c\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">merge</span><span data-lake-id=\"u4c983e36\" id=\"u4c983e36\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">很像，但还是有本质区别，看下图：</span></p><p data-lake-id=\"ua10fe777\" id=\"ua10fe777\"><span data-lake-id=\"u2f4a54e5\" id=\"u2f4a54e5\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">合并过程中可能需要先解决冲突，然后执行</span><span data-lake-id=\"u006744c3\" id=\"u006744c3\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u6953ad20\" id=\"u6953ad20\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">git rebase --continue</span></p><p data-lake-id=\"udee0d5c9\" id=\"udee0d5c9\"><span data-lake-id=\"uaaf0866f\" id=\"uaaf0866f\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\">git rebase -</span><span data-lake-id=\"u769558dc\" id=\"u769558dc\" class=\"lake-fontsize-11\" style=\"color: rgb(228, 86, 73)\">i</span><span data-lake-id=\"uda7c6d9c\" id=\"uda7c6d9c\" class=\"lake-fontsize-12\" style=\"color: rgb(51, 51, 51)\"> HEAD~~</span></p><p data-lake-id=\"u61bac1ae\" id=\"u61bac1ae\"><span data-lake-id=\"u8359822e\" id=\"u8359822e\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">打开文本编辑器，将看到从</span><span data-lake-id=\"u4fe870f4\" id=\"u4fe870f4\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"ue3042904\" id=\"ue3042904\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD</span><span data-lake-id=\"u00f4bd70\" id=\"u00f4bd70\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">到</span><span data-lake-id=\"u83d806a1\" id=\"u83d806a1\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">HEAD~~</span><span data-lake-id=\"u82aff139\" id=\"u82aff139\" class=\"lake-fontsize-14\" style=\"color: rgb(77, 77, 77)\">的提交如下</span></p><p data-lake-id=\"u31cd2e1a\" id=\"u31cd2e1a\"><span data-lake-id=\"u017466ab\" id=\"u017466ab\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">pick </span><span data-lake-id=\"ud4779340\" id=\"ud4779340\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250)\">9</span><span data-lake-id=\"u98264ad1\" id=\"u98264ad1\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">a54fd4 添加</span><span data-lake-id=\"u34b26d49\" id=\"u34b26d49\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"ua1f06f50\" id=\"ua1f06f50\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">的说明pick </span><span data-lake-id=\"u96a0a921\" id=\"u96a0a921\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250)\">0</span><span data-lake-id=\"u5b0c2155\" id=\"u5b0c2155\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">d4a808 添加pull的说明# Rebase </span><span data-lake-id=\"ue2b87032\" id=\"ue2b87032\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250)\">326</span><span data-lake-id=\"u2da117ff\" id=\"u2da117ff\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">fc9f.</span><span data-lake-id=\"u963cc037\" id=\"u963cc037\" class=\"lake-fontsize-11\" style=\"color: rgb(152, 104, 1); background-color: rgb(250, 250, 250)\">.0</span><span data-lake-id=\"ueb3277f3\" id=\"ueb3277f3\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">d4a808 onto d286baa## Commands:# p, pick </span><span data-lake-id=\"u986d30f8\" id=\"u986d30f8\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">=</span><span data-lake-id=\"u177ad834\" id=\"u177ad834\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> use </span><span data-lake-id=\"u94680573\" id=\"u94680573\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"ud05dc70f\" id=\"ud05dc70f\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"># r, reword </span><span data-lake-id=\"u89d9cffa\" id=\"u89d9cffa\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">=</span><span data-lake-id=\"uefe7cbbe\" id=\"uefe7cbbe\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> use </span><span data-lake-id=\"u329fb390\" id=\"u329fb390\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"ud4474242\" id=\"ud4474242\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">, but edit the </span><span data-lake-id=\"ueca89455\" id=\"ueca89455\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"u0dfddac3\" id=\"u0dfddac3\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> message# e, edit </span><span data-lake-id=\"u03fce96a\" id=\"u03fce96a\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">=</span><span data-lake-id=\"ub243bde7\" id=\"ub243bde7\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> use </span><span data-lake-id=\"u1b596e1e\" id=\"u1b596e1e\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"ua6fdd621\" id=\"ua6fdd621\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">, but stop </span><span data-lake-id=\"u9ee35b7e\" id=\"u9ee35b7e\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">for</span><span data-lake-id=\"u4c1162ba\" id=\"u4c1162ba\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> amending# s, squash </span><span data-lake-id=\"u5913a687\" id=\"u5913a687\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">=</span><span data-lake-id=\"u27e46823\" id=\"u27e46823\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> use </span><span data-lake-id=\"u5bf2105d\" id=\"u5bf2105d\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"u1417da16\" id=\"u1417da16\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">, but meld </span><span data-lake-id=\"u3c9fbec5\" id=\"u3c9fbec5\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">into</span><span data-lake-id=\"u6d59b3fb\" id=\"u6d59b3fb\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> previous </span><span data-lake-id=\"uf364c975\" id=\"uf364c975\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">commit</span><span data-lake-id=\"uef9c7722\" id=\"uef9c7722\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"># f, fixup </span><span data-lake-id=\"u5c09ead4\" id=\"u5c09ead4\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\">=</span><span data-lake-id=\"u6725befc\" id=\"u6725befc\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> </span><span data-lake-id=\"u8e40c203\" id=\"u8e40c203\" class=\"lake-fontsize-11\" style=\"color: rgb(166, 38, 164); background-color: rgb(250, 250, 250)\">like</span><span data-lake-id=\"uf725df13\" id=\"uf725df13\" class=\"lake-fontsize-11\" style=\"color: rgb(56, 58, 66); background-color: rgb(250, 250, 250)\"> &quot;squash</span></p><p data-lake-id=\"ud8974b43\" id=\"ud8974b43\"><br></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 4955,
    "created_at": "2022-05-16T03:23:03.000Z",
    "updated_at": "2023-07-27T02:07:09.000Z",
    "content_updated_at": "2023-07-27T02:07:08.000Z",
    "published_at": "2022-05-16T03:44:24.000Z",
    "first_published_at": "2022-05-16T03:42:47.188Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 992965292,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 75204381,
    "type": "Doc",
    "slug": "zg638u",
    "title": "【类库】php-Env类库",
    "description": "tags: [php,类库,env]categories: 学无止境copyright_author_href: https://www.xiaohuihui.cc类库代码env环境变量：<?php /**  * Created by PhpStorm.  * User: 小灰灰  * Dat...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ub4a51081\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [php,类库,env]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"mXSrC\" class=\"ne-hr\"><h1 id=\"qvm1d\"><span class=\"ne-text\">类库代码</span></h1><p id=\"ub95515b6\" class=\"ne-p\"><span class=\"ne-text\">env环境变量：</span></p><pre data-language=\"php\" id=\"BuMak\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2022-04-26\n * Time: 21:53:40\n * Info:\n */\n\nnamespace support\\lib;\n\nEnv::load();\n\nclass Env\n{\n\n    /**\n     * 环境变量数据\n     * @var array\n     */\n    protected static $data = [];\n\n    /**\n     * 读取环境变量定义文件\n     * @access public\n     *\n     * @param string $file 环境变量定义文件\n     *\n     * @return void\n     */\n    public static function load($file = '.env')\n    {\n        if ( ! is_file($file)) {\n            return;\n        }\n        $env = parse_ini_file($file, true);\n        self::set($env);\n    }\n\n    /**\n     * 获取环境变量值\n     * @access public\n     *\n     * @param string $name    环境变量名\n     * @param mixed  $default 默认值\n     */\n    public static function get($name = null, $default = null)\n    {\n        if ($name == null) {\n            return self::$data;\n        }\n        $name = strtoupper($name);\n        $name = strtoupper(str_replace('.', '_', $name));\n        if (isset(self::$data[$name])) {\n            return self::$data[$name];\n        }\n\n        return $default;\n    }\n\n    /**\n     * 设置环境变量值\n     * @access public\n     *\n     * @param string|array $env   环境变量\n     * @param mixed        $value 值\n     *\n     * @return void\n     */\n    public static function set($env, $value = null)\n    {\n        if (is_array($env)) {\n            $env = array_change_key_case($env, CASE_UPPER);\n            foreach ($env as $key =&gt; $val) {\n                if (is_array($val)) {\n                    foreach ($val as $k =&gt; $v) {\n                        self::$data[$key.'_'.strtoupper($k)] = $v;\n                    }\n                } else {\n                    self::$data[$key] = $val;\n                }\n            }\n        } else {\n            $name              = strtoupper(str_replace('.', '_', $env));\n            self::$data[$name] = $value;\n        }\n    }\n}</code></pre><h1 id=\"jbVM1\"><span class=\"ne-text\">使用方法：</span></h1><p id=\"u21a64783\" class=\"ne-p\"><span class=\"ne-text\">.env文件在根目录</span></p><pre data-language=\"plain\" id=\"kATaW\" class=\"ne-codeblock language-plain\"><code>[SQL]\nDB_DEFAULT = mysql\nHOSTNAME = 127.0.0.1</code></pre><p id=\"u5a0a272f\" class=\"ne-p\"><span class=\"ne-text\">调用方法~~~</span></p><p id=\"uf58b140a\" class=\"ne-p\"><span class=\"ne-text\"></span></p><pre data-language=\"php\" id=\"ztk3l\" class=\"ne-codeblock language-php\"><code>Env::get('SQL.HOSTNAME', '127.0.0.1')</code></pre></div>",
    "body": "tags: [php,类库,env]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.cc\n\n---\n\n<a name=\"qvm1d\"></a>\n# 类库代码\nenv环境变量：\n```php\n<?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2022-04-26\n * Time: 21:53:40\n * Info:\n */\n\nnamespace support\\lib;\n\nEnv::load();\n\nclass Env\n{\n\n    /**\n     * 环境变量数据\n     * @var array\n     */\n    protected static $data = [];\n\n    /**\n     * 读取环境变量定义文件\n     * @access public\n     *\n     * @param string $file 环境变量定义文件\n     *\n     * @return void\n     */\n    public static function load($file = '.env')\n    {\n        if ( ! is_file($file)) {\n            return;\n        }\n        $env = parse_ini_file($file, true);\n        self::set($env);\n    }\n\n    /**\n     * 获取环境变量值\n     * @access public\n     *\n     * @param string $name    环境变量名\n     * @param mixed  $default 默认值\n     */\n    public static function get($name = null, $default = null)\n    {\n        if ($name == null) {\n            return self::$data;\n        }\n        $name = strtoupper($name);\n        $name = strtoupper(str_replace('.', '_', $name));\n        if (isset(self::$data[$name])) {\n            return self::$data[$name];\n        }\n\n        return $default;\n    }\n\n    /**\n     * 设置环境变量值\n     * @access public\n     *\n     * @param string|array $env   环境变量\n     * @param mixed        $value 值\n     *\n     * @return void\n     */\n    public static function set($env, $value = null)\n    {\n        if (is_array($env)) {\n            $env = array_change_key_case($env, CASE_UPPER);\n            foreach ($env as $key => $val) {\n                if (is_array($val)) {\n                    foreach ($val as $k => $v) {\n                        self::$data[$key.'_'.strtoupper($k)] = $v;\n                    }\n                } else {\n                    self::$data[$key] = $val;\n                }\n            }\n        } else {\n            $name              = strtoupper(str_replace('.', '_', $env));\n            self::$data[$name] = $value;\n        }\n    }\n}\n```\n<a name=\"jbVM1\"></a>\n# 使用方法：\n.env文件在根目录\n```\n[SQL]\nDB_DEFAULT = mysql\nHOSTNAME = 127.0.0.1\n```\n调用方法~~~\n\n```php\nEnv::get('SQL.HOSTNAME', '127.0.0.1')\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ub4a51081\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [php,类库,env]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"mXSrC\" class=\"ne-hr\"><h1 id=\"qvm1d\"><span class=\"ne-text\">类库代码</span></h1><p id=\"ub95515b6\" class=\"ne-p\"><span class=\"ne-text\">env环境变量：</span></p><pre data-language=\"php\" id=\"BuMak\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 小灰灰\n * Date: 2022-04-26\n * Time: 21:53:40\n * Info:\n */\n\nnamespace support\\lib;\n\nEnv::load();\n\nclass Env\n{\n\n    /**\n     * 环境变量数据\n     * @var array\n     */\n    protected static $data = [];\n\n    /**\n     * 读取环境变量定义文件\n     * @access public\n     *\n     * @param string $file 环境变量定义文件\n     *\n     * @return void\n     */\n    public static function load($file = '.env')\n    {\n        if ( ! is_file($file)) {\n            return;\n        }\n        $env = parse_ini_file($file, true);\n        self::set($env);\n    }\n\n    /**\n     * 获取环境变量值\n     * @access public\n     *\n     * @param string $name    环境变量名\n     * @param mixed  $default 默认值\n     */\n    public static function get($name = null, $default = null)\n    {\n        if ($name == null) {\n            return self::$data;\n        }\n        $name = strtoupper($name);\n        $name = strtoupper(str_replace('.', '_', $name));\n        if (isset(self::$data[$name])) {\n            return self::$data[$name];\n        }\n\n        return $default;\n    }\n\n    /**\n     * 设置环境变量值\n     * @access public\n     *\n     * @param string|array $env   环境变量\n     * @param mixed        $value 值\n     *\n     * @return void\n     */\n    public static function set($env, $value = null)\n    {\n        if (is_array($env)) {\n            $env = array_change_key_case($env, CASE_UPPER);\n            foreach ($env as $key =&gt; $val) {\n                if (is_array($val)) {\n                    foreach ($val as $k =&gt; $v) {\n                        self::$data[$key.'_'.strtoupper($k)] = $v;\n                    }\n                } else {\n                    self::$data[$key] = $val;\n                }\n            }\n        } else {\n            $name              = strtoupper(str_replace('.', '_', $env));\n            self::$data[$name] = $value;\n        }\n    }\n}</code></pre><h1 id=\"jbVM1\"><span class=\"ne-text\">使用方法：</span></h1><p id=\"u21a64783\" class=\"ne-p\"><span class=\"ne-text\">.env文件在根目录</span></p><pre data-language=\"plain\" id=\"kATaW\" class=\"ne-codeblock language-plain\"><code>[SQL]\nDB_DEFAULT = mysql\nHOSTNAME = 127.0.0.1</code></pre><p id=\"u5a0a272f\" class=\"ne-p\"><span class=\"ne-text\">调用方法~~~</span></p><p id=\"uf58b140a\" class=\"ne-p\"><span class=\"ne-text\"></span></p><pre data-language=\"php\" id=\"ztk3l\" class=\"ne-codeblock language-php\"><code>Env::get('SQL.HOSTNAME', '127.0.0.1')</code></pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><p data-lake-id=\"ub4a51081\" id=\"ub4a51081\" style=\"text-align: left\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,类库,env]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"u29531ad7\" id=\"u29531ad7\" style=\"color: rgb(38, 38, 38)\">cc</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22mXSrC%22%7D\"></card><h1 data-lake-id=\"qvm1d\" id=\"qvm1d\"><span data-lake-id=\"uf4e0afd5\" id=\"uf4e0afd5\">类库代码</span></h1><p data-lake-id=\"ub95515b6\" id=\"ub95515b6\"><span data-lake-id=\"uf1322073\" id=\"uf1322073\">env环境变量：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20User%3A%20%E5%B0%8F%E7%81%B0%E7%81%B0%5Cn%20*%20Date%3A%202022-04-26%5Cn%20*%20Time%3A%2021%3A53%3A40%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20support%5C%5Clib%3B%5Cn%5CnEnv%3A%3Aload()%3B%5Cn%5Cnclass%20Env%5Cn%7B%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20*%20%40var%20array%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20protected%20static%20%24data%20%3D%20%5B%5D%3B%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%5Cn%20%20%20%20%20*%20%40access%20public%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20string%20%24file%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20static%20function%20load(%24file%20%3D%20'.env')%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20is_file(%24file))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24env%20%3D%20parse_ini_file(%24file%2C%20true)%3B%5Cn%20%20%20%20%20%20%20%20self%3A%3Aset(%24env)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E8%8E%B7%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%80%BC%5Cn%20%20%20%20%20*%20%40access%20public%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20string%20%24name%20%20%20%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%90%8D%5Cn%20%20%20%20%20*%20%40param%20mixed%20%20%24default%20%E9%BB%98%E8%AE%A4%E5%80%BC%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20static%20function%20get(%24name%20%3D%20null%2C%20%24default%20%3D%20null)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(%24name%20%3D%3D%20null)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20self%3A%3A%24data%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24name%20%3D%20strtoupper(%24name)%3B%5Cn%20%20%20%20%20%20%20%20%24name%20%3D%20strtoupper(str_replace('.'%2C%20'_'%2C%20%24name))%3B%5Cn%20%20%20%20%20%20%20%20if%20(isset(self%3A%3A%24data%5B%24name%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20self%3A%3A%24data%5B%24name%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20return%20%24default%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%80%BC%5Cn%20%20%20%20%20*%20%40access%20public%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20string%7Carray%20%24env%20%20%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%5Cn%20%20%20%20%20*%20%40param%20mixed%20%20%20%20%20%20%20%20%24value%20%E5%80%BC%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20static%20function%20set(%24env%2C%20%24value%20%3D%20null)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(is_array(%24env))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24env%20%3D%20array_change_key_case(%24env%2C%20CASE_UPPER)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20foreach%20(%24env%20as%20%24key%20%3D%3E%20%24val)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(is_array(%24val))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20foreach%20(%24val%20as%20%24k%20%3D%3E%20%24v)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%3A%3A%24data%5B%24key.'_'.strtoupper(%24k)%5D%20%3D%20%24v%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20self%3A%3A%24data%5B%24key%5D%20%3D%20%24val%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24name%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20strtoupper(str_replace('.'%2C%20'_'%2C%20%24env))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20self%3A%3A%24data%5B%24name%5D%20%3D%20%24value%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BuMak%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"jbVM1\" id=\"jbVM1\"><span data-lake-id=\"u9055926c\" id=\"u9055926c\">使用方法：</span></h1><p data-lake-id=\"u21a64783\" id=\"u21a64783\"><span data-lake-id=\"u66319e57\" id=\"u66319e57\">.env文件在根目录</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5BSQL%5D%5CnDB_DEFAULT%20%3D%20mysql%5CnHOSTNAME%20%3D%20127.0.0.1%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kATaW%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u5a0a272f\" id=\"u5a0a272f\"><span data-lake-id=\"u639039bc\" id=\"u639039bc\">调用方法~~~</span></p><p data-lake-id=\"uf58b140a\" id=\"uf58b140a\"><span data-lake-id=\"u690e9be0\" id=\"u690e9be0\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22php%22%2C%22code%22%3A%22Env%3A%3Aget('SQL.HOSTNAME'%2C%20'127.0.0.1')%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ztk3l%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 5,
    "hits": 5,
    "comments_count": 0,
    "word_count": 299,
    "created_at": "2022-04-26T14:45:43.000Z",
    "updated_at": "2023-08-09T02:36:10.000Z",
    "content_updated_at": "2023-08-09T02:36:10.000Z",
    "published_at": "2023-08-09T02:36:10.000Z",
    "first_published_at": "2022-04-26T14:48:10.294Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913882006,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 75096519,
    "type": "Doc",
    "slug": "hommnm",
    "title": "【笔记】thinkphp5.1使用worker-gateway推送",
    "description": "tags: [thinkphp,think-worker,gateway]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net使用composer安装：composer require workerman/gatew...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u1225dd18\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [thinkphp,think-worker,gateway]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"xcbe6\" class=\"ne-hr\"><h1 id=\"IE5R3\"><span class=\"ne-text\">使用composer安装：</span></h1><pre data-language=\"shell\" id=\"UNg0I\" class=\"ne-codeblock language-shell\"><code>composer require workerman/gateway-worker\ncomposer require workerman/gatewayclient</code></pre><h1 id=\"Hqq7E\"><span class=\"ne-text\">开启端口号</span></h1><p id=\"u172494c6\" class=\"ne-p\"><span class=\"ne-text\">默认开启 1236 和 2348 端口</span></p><p id=\"u7844499b\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"zyE10\"><span class=\"ne-text\">创建控制器等文件</span></h1><h2 id=\"rVXFb\"><span class=\"ne-text\">1、\\application\\http\\Worker.php</span></h2><pre data-language=\"php\" id=\"zbRzV\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http;\n\nuse think\\facade\\Env;\nuse think\\worker\\Server;\n\nclass Worker extends Server\n{\n\n    protected $protocol = 'websocket';\n\n    protected $host = '0.0.0.0';\n\n    protected $port = '2120';\n\n    protected $socket = '';\n\n    public function onWorkerStart($worker)\n    {\n        echo &quot;Worker starting...\\n&quot;;\n    }\n\n    public function onMessage($connection, $data)\n    {\n        //halt($data);\n        $connection-&gt;send('receive success123');\n    }\n\n    public function onError($connection, $code, $msg)\n    {\n        echo &quot;error [ $code ] $msg\\n&quot;;\n    }\n\n}</code></pre><h2 id=\"A3cve\"><span class=\"ne-text\">2、\\application\\http\\Event.php</span></h2><pre data-language=\"php\" id=\"lh5ma\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http;\n\nuse think\\Db;\nuse GatewayWorker\\Lib\\Gateway;\n\nclass Event\n{\n\n    public static function onConnect($client_id)\n    {\n        Gateway::sendToClient($client_id, json_encode([\n            'type'      =&gt; 'init',//客户连接后向用户发送绑定uid请求（1）\n            'client_id' =&gt; $client_id\n        ]));\n    }\n\n    /**\n     * 当客户端发来消息时触发\n     *\n     * @param int   $client_id 连接id\n     * @param mixed $message   具体消息\n     */\n    public static function onMessage($client_id, $message)\n    {\n        $message_data = json_decode($message, true);\n        if ( ! $message_data) {\n            return;\n        }\n        $shop_id     = ! empty($message_data['shop_id']) ? $message_data['shop_id'] : 0;\n        $admin_id    = ! empty($message_data['admin_id']) ? $message_data['admin_id'] : 0;\n        $table_id    = ! empty($message_data['table_id']) ? $message_data['table_id'] : 0;\n        $client_type = ! empty($message_data['client_type']) ? $message_data['client_type'] : 0;\n        $line_num    = ! empty($message_data['line_num']) ? $message_data['line_num'] : 0;\n\n        //将client_id与uid进行绑定\n        $uid = $shop_id.'-'.$client_type.'-'.$admin_id.'-'.$table_id;\n\n        $from_id = $message_data['from_id'];\n        // 接收人ID\n        $to_id = isset($message_data['to_id']) ? $message_data['to_id'] : 0;\n\n        switch ($message_data['type']) {\n            case &quot;bind&quot;:\n                Gateway::bindUid($client_id, $uid);\n                $findClient = Db::name('socket_client')-&gt;where([\n                    'type'     =&gt; $client_type,\n                    'shop_id'  =&gt; $shop_id,\n                    'admin_id' =&gt; $admin_id,\n                    'table_id' =&gt; $table_id\n                ])-&gt;find();\n                if (empty($findClient)) {\n                    Db::name('socket_client')-&gt;insert([\n                        'shop_id'     =&gt; $shop_id,\n                        'admin_id'    =&gt; $admin_id,\n                        'table_id'    =&gt; $table_id,\n                        'client'      =&gt; $client_id,\n                        'type'        =&gt; $client_type,\n                        'create_time' =&gt; time()\n                    ]);\n                } else {\n                    Db::name('socket_client')-&gt;where([\n                        'type'     =&gt; $client_type,\n                        'shop_id'  =&gt; $shop_id,\n                        'admin_id' =&gt; $admin_id,\n                        'table_id' =&gt; $table_id\n                    ])-&gt;data(['client' =&gt; $client_id, 'update_time' =&gt; time()])-&gt;update();\n                }\n\n                break;\n            case &quot;online&quot;:\n                //判断接收人是否在线\n                $onlineStatusForFrom_id = Gateway::isUidOnline($uid);\n                Gateway::sendToUid($uid, json_encode(['type' =&gt; 'online', 'status' =&gt; $onlineStatusForFrom_id]));\n                break;\n            case &quot;say&quot;:\n                //发送文字\n                $text    = nl2br(htmlspecialchars($message_data['content']));\n                $sayData = [\n                    'type'     =&gt; 'say',\n                    'content'  =&gt; $text,\n                    'from_id'  =&gt; $from_id,\n                    'to_id'    =&gt; $to_id,\n                    'log_time' =&gt; time()\n                ];\n                if (Gateway::isUidOnline($to_id)) {\n                    $sayData['is_read'] = 1;\n                    Gateway::sendToUid($to_id, json_encode($sayData));\n                } else {\n                    $sayData['is_read'] = 0;\n                }\n                Gateway::sendToUid($from_id, json_encode($sayData));\n                /*$content = $message_data['content'];\n                Gateway::sendToAll(json_encode($content));*/\n                break;\n            case &quot;middleware&quot;:\n                //向中间件发送消息\n                $middleData = [\n                    'type'     =&gt; 'middleware',\n                    'shop_id'  =&gt; $shop_id,\n                    'admin_id' =&gt; $admin_id,\n                    'table_id' =&gt; $table_id,\n                    'line_num' =&gt; $line_num\n                ];\n                Gateway::sendToAll(json_encode($middleData));\n                break;\n            case &quot;pong&quot;:\n                return;//心跳检测\n                break;\n            default:\n                Gateway::sendToAll(json_encode(['content' =&gt; '发送所有数据']));\n        }\n    }\n\n    /**\n     * 当用户断开连接时触发\n     *\n     * @param int $client_id 连接id\n     */\n    public static function onClose($client_id)\n    {\n        // 向所有人发送\n        GateWay::sendToAll(&quot;$client_id logout\\r\\n&quot;);\n    }\n\n}\n</code></pre><h2 id=\"DCttk\"><span class=\"ne-text\">3、\\application\\http\\controller\\Index.php</span></h2><pre data-language=\"php\" id=\"s7r4I\" class=\"ne-codeblock language-php\"><code>&lt;?php\n\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http\\controller;\n\nuse GatewayWorker\\Lib\\Gateway;\nuse think\\Controller;\n\nclass Index extends Controller\n{\n\n    public function index()\n    {\n\n        $portalTitle  = 'hello socket';\n        $post_id      = 1;\n        $push_content = &quot;content&quot;;\n        self::pushAll($portalTitle, $post_id, $push_content = '');\n    }\n\n    public function pushAll($portalTitle, $post_id, $push_content = '')\n    {\n\n        \\GatewayClient\\Gateway::$registerAddress = '127.0.0.1:1236';\n        // 向任意uid的网站页面发送数据\n        Gateway::sendToAll(json_encode([\n            'type'       =&gt; 'say_all',\n            'code'       =&gt; 1,\n            'post_id'    =&gt; $post_id,\n            'post_title' =&gt; $portalTitle,\n            'content'    =&gt; $push_content\n        ]));\n\n        return true;\n\n    }\n\n}\n</code></pre><h1 id=\"LvaJm\"><span class=\"ne-text\">前端socket页面使用：</span></h1><pre data-language=\"html\" id=\"Fzz3b\" class=\"ne-codeblock language-html\"><code>&lt;!doctype html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot;\n          content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\nhello socket!\n&lt;script src=&quot;https://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;\n\n&lt;script&gt;\n  link();\n\n  function link() {\n    var url = 'ws://127.0.0.1:2348';\n    socket = new WebSocket(url);\n    socket.onopen = function () {\n      console.log('连接成功~~~~')\n    }\n    socket.onmessage = function (res) {\n      console.log(&quot;获取数据：&quot; + res.data);\n      let getRes = jQuery.parseJSON(res.data);\n      if (getRes.type == 'init') {\n        let getClientId = getRes.client_id;\n        sendBindClient(getClientId);\n      }\n    }\n    socket.onclose = function () {\n      console.log('断开连接')\n    }\n  }\n\n  //获取client_id并写入数据库\n  function sendBindClient(client_id) {\n    if (client_id != '') {\n      $.post(&quot;/api.php/notice/add_client&quot;, {\n        'shop_id': '10001',\n        'table_id': '25',\n        'client_id': client_id,\n        'type': '2'\n      }, function (res) {\n        console.log(res);\n      })\n    }\n  }\n\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n&lt;?php\n?&gt;\n</code></pre></div>",
    "body": "tags: [thinkphp,think-worker,gateway]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"IE5R3\"></a>\n# 使用composer安装：\n```shell\ncomposer require workerman/gateway-worker\ncomposer require workerman/gatewayclient\n```\n<a name=\"Hqq7E\"></a>\n# 开启端口号\n默认开启 1236 和 2348 端口\n\n<a name=\"zyE10\"></a>\n# 创建控制器等文件\n<a name=\"rVXFb\"></a>\n## 1、\\application\\http\\Worker.php\n```php\n<?php\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http;\n\nuse think\\facade\\Env;\nuse think\\worker\\Server;\n\nclass Worker extends Server\n{\n\n    protected $protocol = 'websocket';\n\n    protected $host = '0.0.0.0';\n\n    protected $port = '2120';\n\n    protected $socket = '';\n\n    public function onWorkerStart($worker)\n    {\n        echo \"Worker starting...\\n\";\n    }\n\n    public function onMessage($connection, $data)\n    {\n        //halt($data);\n        $connection->send('receive success123');\n    }\n\n    public function onError($connection, $code, $msg)\n    {\n        echo \"error [ $code ] $msg\\n\";\n    }\n\n}\n```\n<a name=\"A3cve\"></a>\n## 2、\\application\\http\\Event.php\n```php\n<?php\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http;\n\nuse think\\Db;\nuse GatewayWorker\\Lib\\Gateway;\n\nclass Event\n{\n\n    public static function onConnect($client_id)\n    {\n        Gateway::sendToClient($client_id, json_encode([\n            'type'      => 'init',//客户连接后向用户发送绑定uid请求（1）\n            'client_id' => $client_id\n        ]));\n    }\n\n    /**\n     * 当客户端发来消息时触发\n     *\n     * @param int   $client_id 连接id\n     * @param mixed $message   具体消息\n     */\n    public static function onMessage($client_id, $message)\n    {\n        $message_data = json_decode($message, true);\n        if ( ! $message_data) {\n            return;\n        }\n        $shop_id     = ! empty($message_data['shop_id']) ? $message_data['shop_id'] : 0;\n        $admin_id    = ! empty($message_data['admin_id']) ? $message_data['admin_id'] : 0;\n        $table_id    = ! empty($message_data['table_id']) ? $message_data['table_id'] : 0;\n        $client_type = ! empty($message_data['client_type']) ? $message_data['client_type'] : 0;\n        $line_num    = ! empty($message_data['line_num']) ? $message_data['line_num'] : 0;\n\n        //将client_id与uid进行绑定\n        $uid = $shop_id.'-'.$client_type.'-'.$admin_id.'-'.$table_id;\n\n        $from_id = $message_data['from_id'];\n        // 接收人ID\n        $to_id = isset($message_data['to_id']) ? $message_data['to_id'] : 0;\n\n        switch ($message_data['type']) {\n            case \"bind\":\n                Gateway::bindUid($client_id, $uid);\n                $findClient = Db::name('socket_client')->where([\n                    'type'     => $client_type,\n                    'shop_id'  => $shop_id,\n                    'admin_id' => $admin_id,\n                    'table_id' => $table_id\n                ])->find();\n                if (empty($findClient)) {\n                    Db::name('socket_client')->insert([\n                        'shop_id'     => $shop_id,\n                        'admin_id'    => $admin_id,\n                        'table_id'    => $table_id,\n                        'client'      => $client_id,\n                        'type'        => $client_type,\n                        'create_time' => time()\n                    ]);\n                } else {\n                    Db::name('socket_client')->where([\n                        'type'     => $client_type,\n                        'shop_id'  => $shop_id,\n                        'admin_id' => $admin_id,\n                        'table_id' => $table_id\n                    ])->data(['client' => $client_id, 'update_time' => time()])->update();\n                }\n\n                break;\n            case \"online\":\n                //判断接收人是否在线\n                $onlineStatusForFrom_id = Gateway::isUidOnline($uid);\n                Gateway::sendToUid($uid, json_encode(['type' => 'online', 'status' => $onlineStatusForFrom_id]));\n                break;\n            case \"say\":\n                //发送文字\n                $text    = nl2br(htmlspecialchars($message_data['content']));\n                $sayData = [\n                    'type'     => 'say',\n                    'content'  => $text,\n                    'from_id'  => $from_id,\n                    'to_id'    => $to_id,\n                    'log_time' => time()\n                ];\n                if (Gateway::isUidOnline($to_id)) {\n                    $sayData['is_read'] = 1;\n                    Gateway::sendToUid($to_id, json_encode($sayData));\n                } else {\n                    $sayData['is_read'] = 0;\n                }\n                Gateway::sendToUid($from_id, json_encode($sayData));\n                /*$content = $message_data['content'];\n                Gateway::sendToAll(json_encode($content));*/\n                break;\n            case \"middleware\":\n                //向中间件发送消息\n                $middleData = [\n                    'type'     => 'middleware',\n                    'shop_id'  => $shop_id,\n                    'admin_id' => $admin_id,\n                    'table_id' => $table_id,\n                    'line_num' => $line_num\n                ];\n                Gateway::sendToAll(json_encode($middleData));\n                break;\n            case \"pong\":\n                return;//心跳检测\n                break;\n            default:\n                Gateway::sendToAll(json_encode(['content' => '发送所有数据']));\n        }\n    }\n\n    /**\n     * 当用户断开连接时触发\n     *\n     * @param int $client_id 连接id\n     */\n    public static function onClose($client_id)\n    {\n        // 向所有人发送\n        GateWay::sendToAll(\"$client_id logout\\r\\n\");\n    }\n\n}\n\n```\n<a name=\"DCttk\"></a>\n## 3、\\application\\http\\controller\\Index.php\n```php\n<?php\n\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http\\controller;\n\nuse GatewayWorker\\Lib\\Gateway;\nuse think\\Controller;\n\nclass Index extends Controller\n{\n\n    public function index()\n    {\n\n        $portalTitle  = 'hello socket';\n        $post_id      = 1;\n        $push_content = \"content\";\n        self::pushAll($portalTitle, $post_id, $push_content = '');\n    }\n\n    public function pushAll($portalTitle, $post_id, $push_content = '')\n    {\n\n        \\GatewayClient\\Gateway::$registerAddress = '127.0.0.1:1236';\n        // 向任意uid的网站页面发送数据\n        Gateway::sendToAll(json_encode([\n            'type'       => 'say_all',\n            'code'       => 1,\n            'post_id'    => $post_id,\n            'post_title' => $portalTitle,\n            'content'    => $push_content\n        ]));\n\n        return true;\n\n    }\n\n}\n\n```\n<a name=\"LvaJm\"></a>\n# 前端socket页面使用：\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\"\n          content=\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n</head>\n<body>\nhello socket!\n<script src=\"https://libs.baidu.com/jquery/2.0.0/jquery.min.js\"></script>\n\n<script>\n  link();\n\n  function link() {\n    var url = 'ws://127.0.0.1:2348';\n    socket = new WebSocket(url);\n    socket.onopen = function () {\n      console.log('连接成功~~~~')\n    }\n    socket.onmessage = function (res) {\n      console.log(\"获取数据：\" + res.data);\n      let getRes = jQuery.parseJSON(res.data);\n      if (getRes.type == 'init') {\n        let getClientId = getRes.client_id;\n        sendBindClient(getClientId);\n      }\n    }\n    socket.onclose = function () {\n      console.log('断开连接')\n    }\n  }\n\n  //获取client_id并写入数据库\n  function sendBindClient(client_id) {\n    if (client_id != '') {\n      $.post(\"/api.php/notice/add_client\", {\n        'shop_id': '10001',\n        'table_id': '25',\n        'client_id': client_id,\n        'type': '2'\n      }, function (res) {\n        console.log(res);\n      })\n    }\n  }\n\n</script>\n</body>\n</html>\n\n<?php\n?>\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u1225dd18\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [thinkphp,think-worker,gateway]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"xcbe6\" class=\"ne-hr\"><h1 id=\"IE5R3\"><span class=\"ne-text\">使用composer安装：</span></h1><pre data-language=\"shell\" id=\"UNg0I\" class=\"ne-codeblock language-shell\">composer require workerman/gateway-worker\ncomposer require workerman/gatewayclient</pre><h1 id=\"Hqq7E\"><span class=\"ne-text\">开启端口号</span></h1><p id=\"u172494c6\" class=\"ne-p\"><span class=\"ne-text\">默认开启 1236 和 2348 端口</span></p><p id=\"u7844499b\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"zyE10\"><span class=\"ne-text\">创建控制器等文件</span></h1><h2 id=\"rVXFb\"><span class=\"ne-text\">1、\\application\\http\\Worker.php</span></h2><pre data-language=\"php\" id=\"zbRzV\" class=\"ne-codeblock language-php\">&lt;?php\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http;\n\nuse think\\facade\\Env;\nuse think\\worker\\Server;\n\nclass Worker extends Server\n{\n\n    protected $protocol = 'websocket';\n\n    protected $host = '0.0.0.0';\n\n    protected $port = '2120';\n\n    protected $socket = '';\n\n    public function onWorkerStart($worker)\n    {\n        echo &quot;Worker starting...\\n&quot;;\n    }\n\n    public function onMessage($connection, $data)\n    {\n        //halt($data);\n        $connection-&gt;send('receive success123');\n    }\n\n    public function onError($connection, $code, $msg)\n    {\n        echo &quot;error [ $code ] $msg\\n&quot;;\n    }\n\n}</pre><h2 id=\"A3cve\"><span class=\"ne-text\">2、\\application\\http\\Event.php</span></h2><pre data-language=\"php\" id=\"lh5ma\" class=\"ne-codeblock language-php\">&lt;?php\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http;\n\nuse think\\Db;\nuse GatewayWorker\\Lib\\Gateway;\n\nclass Event\n{\n\n    public static function onConnect($client_id)\n    {\n        Gateway::sendToClient($client_id, json_encode([\n            'type'      =&gt; 'init',//客户连接后向用户发送绑定uid请求（1）\n            'client_id' =&gt; $client_id\n        ]));\n    }\n\n    /**\n     * 当客户端发来消息时触发\n     *\n     * @param int   $client_id 连接id\n     * @param mixed $message   具体消息\n     */\n    public static function onMessage($client_id, $message)\n    {\n        $message_data = json_decode($message, true);\n        if ( ! $message_data) {\n            return;\n        }\n        $shop_id     = ! empty($message_data['shop_id']) ? $message_data['shop_id'] : 0;\n        $admin_id    = ! empty($message_data['admin_id']) ? $message_data['admin_id'] : 0;\n        $table_id    = ! empty($message_data['table_id']) ? $message_data['table_id'] : 0;\n        $client_type = ! empty($message_data['client_type']) ? $message_data['client_type'] : 0;\n        $line_num    = ! empty($message_data['line_num']) ? $message_data['line_num'] : 0;\n\n        //将client_id与uid进行绑定\n        $uid = $shop_id.'-'.$client_type.'-'.$admin_id.'-'.$table_id;\n\n        $from_id = $message_data['from_id'];\n        // 接收人ID\n        $to_id = isset($message_data['to_id']) ? $message_data['to_id'] : 0;\n\n        switch ($message_data['type']) {\n            case &quot;bind&quot;:\n                Gateway::bindUid($client_id, $uid);\n                $findClient = Db::name('socket_client')-&gt;where([\n                    'type'     =&gt; $client_type,\n                    'shop_id'  =&gt; $shop_id,\n                    'admin_id' =&gt; $admin_id,\n                    'table_id' =&gt; $table_id\n                ])-&gt;find();\n                if (empty($findClient)) {\n                    Db::name('socket_client')-&gt;insert([\n                        'shop_id'     =&gt; $shop_id,\n                        'admin_id'    =&gt; $admin_id,\n                        'table_id'    =&gt; $table_id,\n                        'client'      =&gt; $client_id,\n                        'type'        =&gt; $client_type,\n                        'create_time' =&gt; time()\n                    ]);\n                } else {\n                    Db::name('socket_client')-&gt;where([\n                        'type'     =&gt; $client_type,\n                        'shop_id'  =&gt; $shop_id,\n                        'admin_id' =&gt; $admin_id,\n                        'table_id' =&gt; $table_id\n                    ])-&gt;data(['client' =&gt; $client_id, 'update_time' =&gt; time()])-&gt;update();\n                }\n\n                break;\n            case &quot;online&quot;:\n                //判断接收人是否在线\n                $onlineStatusForFrom_id = Gateway::isUidOnline($uid);\n                Gateway::sendToUid($uid, json_encode(['type' =&gt; 'online', 'status' =&gt; $onlineStatusForFrom_id]));\n                break;\n            case &quot;say&quot;:\n                //发送文字\n                $text    = nl2br(htmlspecialchars($message_data['content']));\n                $sayData = [\n                    'type'     =&gt; 'say',\n                    'content'  =&gt; $text,\n                    'from_id'  =&gt; $from_id,\n                    'to_id'    =&gt; $to_id,\n                    'log_time' =&gt; time()\n                ];\n                if (Gateway::isUidOnline($to_id)) {\n                    $sayData['is_read'] = 1;\n                    Gateway::sendToUid($to_id, json_encode($sayData));\n                } else {\n                    $sayData['is_read'] = 0;\n                }\n                Gateway::sendToUid($from_id, json_encode($sayData));\n                /*$content = $message_data['content'];\n                Gateway::sendToAll(json_encode($content));*/\n                break;\n            case &quot;middleware&quot;:\n                //向中间件发送消息\n                $middleData = [\n                    'type'     =&gt; 'middleware',\n                    'shop_id'  =&gt; $shop_id,\n                    'admin_id' =&gt; $admin_id,\n                    'table_id' =&gt; $table_id,\n                    'line_num' =&gt; $line_num\n                ];\n                Gateway::sendToAll(json_encode($middleData));\n                break;\n            case &quot;pong&quot;:\n                return;//心跳检测\n                break;\n            default:\n                Gateway::sendToAll(json_encode(['content' =&gt; '发送所有数据']));\n        }\n    }\n\n    /**\n     * 当用户断开连接时触发\n     *\n     * @param int $client_id 连接id\n     */\n    public static function onClose($client_id)\n    {\n        // 向所有人发送\n        GateWay::sendToAll(&quot;$client_id logout\\r\\n&quot;);\n    }\n\n}\n</pre><h2 id=\"DCttk\"><span class=\"ne-text\">3、\\application\\http\\controller\\Index.php</span></h2><pre data-language=\"php\" id=\"s7r4I\" class=\"ne-codeblock language-php\">&lt;?php\n\n/**\n * Created by PhpStorm.\n * Info:\n */\n\nnamespace app\\http\\controller;\n\nuse GatewayWorker\\Lib\\Gateway;\nuse think\\Controller;\n\nclass Index extends Controller\n{\n\n    public function index()\n    {\n\n        $portalTitle  = 'hello socket';\n        $post_id      = 1;\n        $push_content = &quot;content&quot;;\n        self::pushAll($portalTitle, $post_id, $push_content = '');\n    }\n\n    public function pushAll($portalTitle, $post_id, $push_content = '')\n    {\n\n        \\GatewayClient\\Gateway::$registerAddress = '127.0.0.1:1236';\n        // 向任意uid的网站页面发送数据\n        Gateway::sendToAll(json_encode([\n            'type'       =&gt; 'say_all',\n            'code'       =&gt; 1,\n            'post_id'    =&gt; $post_id,\n            'post_title' =&gt; $portalTitle,\n            'content'    =&gt; $push_content\n        ]));\n\n        return true;\n\n    }\n\n}\n</pre><h1 id=\"LvaJm\"><span class=\"ne-text\">前端socket页面使用：</span></h1><pre data-language=\"html\" id=\"Fzz3b\" class=\"ne-codeblock language-html\">&lt;!doctype html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot;\n          content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\nhello socket!\n&lt;script src=&quot;https://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;\n\n&lt;script&gt;\n  link();\n\n  function link() {\n    var url = 'ws://127.0.0.1:2348';\n    socket = new WebSocket(url);\n    socket.onopen = function () {\n      console.log('连接成功~~~~')\n    }\n    socket.onmessage = function (res) {\n      console.log(&quot;获取数据：&quot; + res.data);\n      let getRes = jQuery.parseJSON(res.data);\n      if (getRes.type == 'init') {\n        let getClientId = getRes.client_id;\n        sendBindClient(getClientId);\n      }\n    }\n    socket.onclose = function () {\n      console.log('断开连接')\n    }\n  }\n\n  //获取client_id并写入数据库\n  function sendBindClient(client_id) {\n    if (client_id != '') {\n      $.post(&quot;/api.php/notice/add_client&quot;, {\n        'shop_id': '10001',\n        'table_id': '25',\n        'client_id': client_id,\n        'type': '2'\n      }, function (res) {\n        console.log(res);\n      })\n    }\n  }\n\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n&lt;?php\n?&gt;\n</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u1225dd18\" id=\"u1225dd18\" style=\"text-align: left\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [thinkphp,think-worker,gateway]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22xcbe6%22%7D\"></card><h1 data-lake-id=\"IE5R3\" id=\"IE5R3\"><span data-lake-id=\"u8f71585f\" id=\"u8f71585f\">使用composer安装：</span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20workerman%2Fgateway-worker%5Cncomposer%20require%20workerman%2Fgatewayclient%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UNg0I%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"Hqq7E\" id=\"Hqq7E\"><span data-lake-id=\"uc889e1f8\" id=\"uc889e1f8\">开启端口号</span></h1><p data-lake-id=\"u172494c6\" id=\"u172494c6\"><span data-lake-id=\"ub5122241\" id=\"ub5122241\">默认开启 1236 和 2348 端口</span></p><p data-lake-id=\"u7844499b\" id=\"u7844499b\"><span data-lake-id=\"u6c58db26\" id=\"u6c58db26\">​</span><br></p><h1 data-lake-id=\"zyE10\" id=\"zyE10\"><span data-lake-id=\"u09e2e3e5\" id=\"u09e2e3e5\">创建控制器等文件</span></h1><h2 data-lake-id=\"rVXFb\" id=\"rVXFb\"><span data-lake-id=\"ubad9246c\" id=\"ubad9246c\">1、\\application\\http\\Worker.php</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20app%5C%5Chttp%3B%5Cn%5Cnuse%20think%5C%5Cfacade%5C%5CEnv%3B%5Cnuse%20think%5C%5Cworker%5C%5CServer%3B%5Cn%5Cnclass%20Worker%20extends%20Server%5Cn%7B%5Cn%5Cn%20%20%20%20protected%20%24protocol%20%3D%20'websocket'%3B%5Cn%5Cn%20%20%20%20protected%20%24host%20%3D%20'0.0.0.0'%3B%5Cn%5Cn%20%20%20%20protected%20%24port%20%3D%20'2120'%3B%5Cn%5Cn%20%20%20%20protected%20%24socket%20%3D%20''%3B%5Cn%5Cn%20%20%20%20public%20function%20onWorkerStart(%24worker)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22Worker%20starting...%5C%5Cn%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20function%20onMessage(%24connection%2C%20%24data)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2Fhalt(%24data)%3B%5Cn%20%20%20%20%20%20%20%20%24connection-%3Esend('receive%20success123')%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20function%20onError(%24connection%2C%20%24code%2C%20%24msg)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22error%20%5B%20%24code%20%5D%20%24msg%5C%5Cn%5C%22%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zbRzV%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"A3cve\" id=\"A3cve\"><span data-lake-id=\"u76f293fa\" id=\"u76f293fa\">2、\\application\\http\\Event.php</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20app%5C%5Chttp%3B%5Cn%5Cnuse%20think%5C%5CDb%3B%5Cnuse%20GatewayWorker%5C%5CLib%5C%5CGateway%3B%5Cn%5Cnclass%20Event%5Cn%7B%5Cn%5Cn%20%20%20%20public%20static%20function%20onConnect(%24client_id)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20Gateway%3A%3AsendToClient(%24client_id%2C%20json_encode(%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%20%3D%3E%20'init'%2C%2F%2F%E5%AE%A2%E6%88%B7%E8%BF%9E%E6%8E%A5%E5%90%8E%E5%90%91%E7%94%A8%E6%88%B7%E5%8F%91%E9%80%81%E7%BB%91%E5%AE%9Auid%E8%AF%B7%E6%B1%82%EF%BC%881%EF%BC%89%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'client_id'%20%3D%3E%20%24client_id%5Cn%20%20%20%20%20%20%20%20%5D))%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%BD%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E6%9D%A5%E6%B6%88%E6%81%AF%E6%97%B6%E8%A7%A6%E5%8F%91%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20int%20%20%20%24client_id%20%E8%BF%9E%E6%8E%A5id%5Cn%20%20%20%20%20*%20%40param%20mixed%20%24message%20%20%20%E5%85%B7%E4%BD%93%E6%B6%88%E6%81%AF%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20static%20function%20onMessage(%24client_id%2C%20%24message)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24message_data%20%3D%20json_decode(%24message%2C%20true)%3B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20%24message_data)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24shop_id%20%20%20%20%20%3D%20!%20empty(%24message_data%5B'shop_id'%5D)%20%3F%20%24message_data%5B'shop_id'%5D%20%3A%200%3B%5Cn%20%20%20%20%20%20%20%20%24admin_id%20%20%20%20%3D%20!%20empty(%24message_data%5B'admin_id'%5D)%20%3F%20%24message_data%5B'admin_id'%5D%20%3A%200%3B%5Cn%20%20%20%20%20%20%20%20%24table_id%20%20%20%20%3D%20!%20empty(%24message_data%5B'table_id'%5D)%20%3F%20%24message_data%5B'table_id'%5D%20%3A%200%3B%5Cn%20%20%20%20%20%20%20%20%24client_type%20%3D%20!%20empty(%24message_data%5B'client_type'%5D)%20%3F%20%24message_data%5B'client_type'%5D%20%3A%200%3B%5Cn%20%20%20%20%20%20%20%20%24line_num%20%20%20%20%3D%20!%20empty(%24message_data%5B'line_num'%5D)%20%3F%20%24message_data%5B'line_num'%5D%20%3A%200%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%E5%B0%86client_id%E4%B8%8Euid%E8%BF%9B%E8%A1%8C%E7%BB%91%E5%AE%9A%5Cn%20%20%20%20%20%20%20%20%24uid%20%3D%20%24shop_id.'-'.%24client_type.'-'.%24admin_id.'-'.%24table_id%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24from_id%20%3D%20%24message_data%5B'from_id'%5D%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E6%8E%A5%E6%94%B6%E4%BA%BAID%5Cn%20%20%20%20%20%20%20%20%24to_id%20%3D%20isset(%24message_data%5B'to_id'%5D)%20%3F%20%24message_data%5B'to_id'%5D%20%3A%200%3B%5Cn%5Cn%20%20%20%20%20%20%20%20switch%20(%24message_data%5B'type'%5D)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20%5C%22bind%5C%22%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AbindUid(%24client_id%2C%20%24uid)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24findClient%20%3D%20Db%3A%3Aname('socket_client')-%3Ewhere(%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%3D%3E%20%24client_type%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'shop_id'%20%20%3D%3E%20%24shop_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'admin_id'%20%3D%3E%20%24admin_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'table_id'%20%3D%3E%20%24table_id%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D)-%3Efind()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(empty(%24findClient))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Db%3A%3Aname('socket_client')-%3Einsert(%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'shop_id'%20%20%20%20%20%3D%3E%20%24shop_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'admin_id'%20%20%20%20%3D%3E%20%24admin_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'table_id'%20%20%20%20%3D%3E%20%24table_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'client'%20%20%20%20%20%20%3D%3E%20%24client_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%20%20%20%3D%3E%20%24client_type%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'create_time'%20%3D%3E%20time()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Db%3A%3Aname('socket_client')-%3Ewhere(%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%3D%3E%20%24client_type%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'shop_id'%20%20%3D%3E%20%24shop_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'admin_id'%20%3D%3E%20%24admin_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'table_id'%20%3D%3E%20%24table_id%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D)-%3Edata(%5B'client'%20%3D%3E%20%24client_id%2C%20'update_time'%20%3D%3E%20time()%5D)-%3Eupdate()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20%5C%22online%5C%22%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E5%88%A4%E6%96%AD%E6%8E%A5%E6%94%B6%E4%BA%BA%E6%98%AF%E5%90%A6%E5%9C%A8%E7%BA%BF%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24onlineStatusForFrom_id%20%3D%20Gateway%3A%3AisUidOnline(%24uid)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AsendToUid(%24uid%2C%20json_encode(%5B'type'%20%3D%3E%20'online'%2C%20'status'%20%3D%3E%20%24onlineStatusForFrom_id%5D))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20%5C%22say%5C%22%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E5%8F%91%E9%80%81%E6%96%87%E5%AD%97%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24text%20%20%20%20%3D%20nl2br(htmlspecialchars(%24message_data%5B'content'%5D))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sayData%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%3D%3E%20'say'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'content'%20%20%3D%3E%20%24text%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'from_id'%20%20%3D%3E%20%24from_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'to_id'%20%20%20%20%3D%3E%20%24to_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'log_time'%20%3D%3E%20time()%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(Gateway%3A%3AisUidOnline(%24to_id))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sayData%5B'is_read'%5D%20%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AsendToUid(%24to_id%2C%20json_encode(%24sayData))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24sayData%5B'is_read'%5D%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AsendToUid(%24from_id%2C%20json_encode(%24sayData))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F*%24content%20%3D%20%24message_data%5B'content'%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AsendToAll(json_encode(%24content))%3B*%2F%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20%5C%22middleware%5C%22%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E5%90%91%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24middleData%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%3D%3E%20'middleware'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'shop_id'%20%20%3D%3E%20%24shop_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'admin_id'%20%3D%3E%20%24admin_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'table_id'%20%3D%3E%20%24table_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'line_num'%20%3D%3E%20%24line_num%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AsendToAll(json_encode(%24middleData))%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20%5C%22pong%5C%22%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%2F%2F%E5%BF%83%E8%B7%B3%E6%A3%80%E6%B5%8B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20default%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gateway%3A%3AsendToAll(json_encode(%5B'content'%20%3D%3E%20'%E5%8F%91%E9%80%81%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE'%5D))%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%BD%93%E7%94%A8%E6%88%B7%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E6%97%B6%E8%A7%A6%E5%8F%91%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20int%20%24client_id%20%E8%BF%9E%E6%8E%A5id%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20static%20function%20onClose(%24client_id)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%90%91%E6%89%80%E6%9C%89%E4%BA%BA%E5%8F%91%E9%80%81%5Cn%20%20%20%20%20%20%20%20GateWay%3A%3AsendToAll(%5C%22%24client_id%20logout%5C%5Cr%5C%5Cn%5C%22)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22lh5ma%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h2 data-lake-id=\"DCttk\" id=\"DCttk\"><span data-lake-id=\"u5a76659c\" id=\"u5a76659c\">3、\\application\\http\\controller\\Index.php</span></h2><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20app%5C%5Chttp%5C%5Ccontroller%3B%5Cn%5Cnuse%20GatewayWorker%5C%5CLib%5C%5CGateway%3B%5Cnuse%20think%5C%5CController%3B%5Cn%5Cnclass%20Index%20extends%20Controller%5Cn%7B%5Cn%5Cn%20%20%20%20public%20function%20index()%5Cn%20%20%20%20%7B%5Cn%5Cn%20%20%20%20%20%20%20%20%24portalTitle%20%20%3D%20'hello%20socket'%3B%5Cn%20%20%20%20%20%20%20%20%24post_id%20%20%20%20%20%20%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%24push_content%20%3D%20%5C%22content%5C%22%3B%5Cn%20%20%20%20%20%20%20%20self%3A%3ApushAll(%24portalTitle%2C%20%24post_id%2C%20%24push_content%20%3D%20'')%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20function%20pushAll(%24portalTitle%2C%20%24post_id%2C%20%24push_content%20%3D%20'')%5Cn%20%20%20%20%7B%5Cn%5Cn%20%20%20%20%20%20%20%20%5C%5CGatewayClient%5C%5CGateway%3A%3A%24registerAddress%20%3D%20'127.0.0.1%3A1236'%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%90%91%E4%BB%BB%E6%84%8Fuid%E7%9A%84%E7%BD%91%E7%AB%99%E9%A1%B5%E9%9D%A2%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20Gateway%3A%3AsendToAll(json_encode(%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'type'%20%20%20%20%20%20%20%3D%3E%20'say_all'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'code'%20%20%20%20%20%20%20%3D%3E%201%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'post_id'%20%20%20%20%3D%3E%20%24post_id%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'post_title'%20%3D%3E%20%24portalTitle%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20'content'%20%20%20%20%3D%3E%20%24push_content%5Cn%20%20%20%20%20%20%20%20%5D))%3B%5Cn%5Cn%20%20%20%20%20%20%20%20return%20true%3B%5Cn%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22s7r4I%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"LvaJm\" id=\"LvaJm\"><span data-lake-id=\"ub2324b1f\" id=\"ub2324b1f\">前端socket页面使用：</span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22html%22%2C%22code%22%3A%22%3C!doctype%20html%3E%5Cn%3Chtml%20lang%3D%5C%22en%5C%22%3E%5Cn%3Chead%3E%5Cn%20%20%20%20%3Cmeta%20charset%3D%5C%22UTF-8%5C%22%3E%5Cn%20%20%20%20%3Cmeta%20name%3D%5C%22viewport%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20content%3D%5C%22width%3Ddevice-width%2C%20user-scalable%3Dno%2C%20initial-scale%3D1.0%2C%20maximum-scale%3D1.0%2C%20minimum-scale%3D1.0%5C%22%3E%5Cn%20%20%20%20%3Cmeta%20http-equiv%3D%5C%22X-UA-Compatible%5C%22%20content%3D%5C%22ie%3Dedge%5C%22%3E%5Cn%20%20%20%20%3Ctitle%3EDocument%3C%2Ftitle%3E%5Cn%3C%2Fhead%3E%5Cn%3Cbody%3E%5Cnhello%20socket!%5Cn%3Cscript%20src%3D%5C%22https%3A%2F%2Flibs.baidu.com%2Fjquery%2F2.0.0%2Fjquery.min.js%5C%22%3E%3C%2Fscript%3E%5Cn%5Cn%3Cscript%3E%5Cn%20%20link()%3B%5Cn%5Cn%20%20function%20link()%20%7B%5Cn%20%20%20%20var%20url%20%3D%20'ws%3A%2F%2F127.0.0.1%3A2348'%3B%5Cn%20%20%20%20socket%20%3D%20new%20WebSocket(url)%3B%5Cn%20%20%20%20socket.onopen%20%3D%20function%20()%20%7B%5Cn%20%20%20%20%20%20console.log('%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F~~~~')%5Cn%20%20%20%20%7D%5Cn%20%20%20%20socket.onmessage%20%3D%20function%20(res)%20%7B%5Cn%20%20%20%20%20%20console.log(%5C%22%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%9A%5C%22%20%2B%20res.data)%3B%5Cn%20%20%20%20%20%20let%20getRes%20%3D%20jQuery.parseJSON(res.data)%3B%5Cn%20%20%20%20%20%20if%20(getRes.type%20%3D%3D%20'init')%20%7B%5Cn%20%20%20%20%20%20%20%20let%20getClientId%20%3D%20getRes.client_id%3B%5Cn%20%20%20%20%20%20%20%20sendBindClient(getClientId)%3B%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%20%20socket.onclose%20%3D%20function%20()%20%7B%5Cn%20%20%20%20%20%20console.log('%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5')%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20%2F%2F%E8%8E%B7%E5%8F%96client_id%E5%B9%B6%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%5Cn%20%20function%20sendBindClient(client_id)%20%7B%5Cn%20%20%20%20if%20(client_id%20!%3D%20'')%20%7B%5Cn%20%20%20%20%20%20%24.post(%5C%22%2Fapi.php%2Fnotice%2Fadd_client%5C%22%2C%20%7B%5Cn%20%20%20%20%20%20%20%20'shop_id'%3A%20'10001'%2C%5Cn%20%20%20%20%20%20%20%20'table_id'%3A%20'25'%2C%5Cn%20%20%20%20%20%20%20%20'client_id'%3A%20client_id%2C%5Cn%20%20%20%20%20%20%20%20'type'%3A%20'2'%5Cn%20%20%20%20%20%20%7D%2C%20function%20(res)%20%7B%5Cn%20%20%20%20%20%20%20%20console.log(res)%3B%5Cn%20%20%20%20%20%20%7D)%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%3C%2Fscript%3E%5Cn%3C%2Fbody%3E%5Cn%3C%2Fhtml%3E%5Cn%5Cn%3C%3Fphp%5Cn%3F%3E%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Fzz3b%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 3,
    "hits": 3,
    "comments_count": 0,
    "word_count": 745,
    "created_at": "2022-04-26T03:34:42.000Z",
    "updated_at": "2023-07-27T02:07:14.000Z",
    "content_updated_at": "2023-07-27T02:07:13.000Z",
    "published_at": "2022-04-26T03:41:14.000Z",
    "first_published_at": "2022-04-26T03:41:14.429Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 954252209,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 75095426,
    "type": "Doc",
    "slug": "auq975",
    "title": "【笔记】thinkphp开发：windows下运行think-worker下的gateway",
    "description": "tags: [thinkphp,think-worker,gateway]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net测试环境：win 10think-worker默认有命令php think worker:...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u95026591\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [thinkphp,think-worker,gateway]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"fDKhP\" class=\"ne-hr\"><h4 id=\"CqRHN\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">测试环境：win 10</span></h4><p id=\"uab2d361d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">think-worker默认有命令</span></p><pre data-language=\"shell\" id=\"WrVrE\" class=\"ne-codeblock language-shell\"><code>php think worker:gateway</code></pre><p id=\"u1d4ec622\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">但是如果在win下运行，会报错</span></p><div class=\"ne-quote\"><p id=\"udf9cfaa5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span><span class=\"ne-text\">GatewayWorker Not Support On Windows</span></p></div><p id=\"u4ce5545f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">但是这并不是说gatewa不能再windows上运行，而是gateway需要启动好几个</span><span class=\"ne-text\">命令行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">，windows下无法直接处理，所以如果想要使用think-worker下的gateway，还需要改造下。</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">新建command命令，例如新建workman</span></p><p id=\"u3b0abc59\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h4 id=\"pSCrZ\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">附：自定义TP命令行</span></h4><p id=\"u4538f3ac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">命令行文件 </span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">application\\common\\command\\Workerman.php</span></p><p id=\"u162d7eb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\"></span></p><pre data-language=\"php\" id=\"zzTbz\" class=\"ne-codeblock language-php\"><code>&lt;?php\n/**\n * Created by PhpStorm.\n * User: 投实科技\n * Date: 2021-07-26\n * Time: 11:20:11\n * Info:\n */\n\nnamespace app\\common\\command;\n\nuse GatewayWorker\\BusinessWorker;\nuse GatewayWorker\\Gateway;\nuse GatewayWorker\\Register;\nuse think\\console\\Command;\nuse think\\console\\Input;\nuse think\\console\\input\\Argument;\nuse think\\console\\input\\Option;\nuse think\\console\\Output;\nuse think\\facade\\Config;\nuse Workerman\\Worker;\n\n/**\n * Worker 命令行\n */\nclass Workerman extends Command\n{\n\n    protected function configure()\n    {\n        $this-&gt;setName('workerman')-&gt;addArgument('service', Argument::OPTIONAL,\n                'workerman service: gateway|register|businessworker', null)-&gt;addOption('host', 'H',\n                Option::VALUE_OPTIONAL, 'the host of workerman server', null)-&gt;addOption('port', 'P',\n                Option::VALUE_OPTIONAL, 'the port of workerman server', null)-&gt;addOption('daemon', 'd',\n                Option::VALUE_OPTIONAL,\n                'Run the workerman server in daemon mode.')-&gt;setDescription('workerman Server for ThinkPHP');\n    }\n\n    public function execute(Input $input, Output $output)\n    {\n        $service = $input-&gt;getArgument('service');\n\n        $option = Config::pull('gateway_worker');\n\n        if ($input-&gt;hasOption('host')) {\n            $host = $input-&gt;getOption('host');\n        } else {\n            $host = ! empty($option['host']) ? $option['host'] : '0.0.0.0';\n        }\n\n        if ($input-&gt;hasOption('port')) {\n            $port = $input-&gt;getOption('port');\n        } else {\n            $port = ! empty($option['port']) ? $option['port'] : '2347';\n        }\n\n        $registerAddress = ! empty($option['registerAddress']) ? $option['registerAddress'] : '127.0.0.1:1236';\n        switch ($service) {\n            case 'register':\n                $this-&gt;register($registerAddress);\n                break;\n            case 'businessworker':\n                $this-&gt;businessWorker($registerAddress,\n                    isset($option['businessWorker']) ? $option['businessWorker'] : []);\n                break;\n            case 'gateway':\n                $this-&gt;gateway($registerAddress, $host, $port, $option);\n                break;\n            default:\n                $output-&gt;writeln(&quot;&lt;error&gt;Invalid argument action:{$service}, Expected gateway|register|businessworker .&lt;/error&gt;&quot;);\n                exit(1);\n                break;\n        }\n\n        Worker::runAll();\n    }\n\n    /**\n     * 启动register\n     * @access public\n     *\n     * @param string $registerAddress\n     *\n     * @return void\n     */\n    public function register($registerAddress)\n    {\n        // 初始化register\n        new Register('text://'.$registerAddress);\n    }\n\n    /**\n     * 启动businessWorker\n     * @access public\n     *\n     * @param string $registerAddress registerAddress\n     * @param array  $option          参数\n     *\n     * @return void\n     */\n    public function businessWorker($registerAddress, $option = [])\n    {\n        // 初始化 bussinessWorker 进程\n        $worker = new BusinessWorker();\n\n        $this-&gt;option($worker, $option);\n\n        $worker-&gt;registerAddress = $registerAddress;\n    }\n\n    /**\n     * 启动gateway\n     * @access public\n     *\n     * @param string  $registerAddress registerAddress\n     * @param string  $host            服务地址\n     * @param integer $port            监听端口\n     * @param array   $option          参数\n     *\n     * @return void\n     */\n    public function gateway($registerAddress, $host, $port, $option = [])\n    {\n        // 初始化 gateway 进程\n        if ( ! empty($option['socket'])) {\n            $socket = $option['socket'];\n            unset($option['socket']);\n        } else {\n            $protocol = ! empty($option['protocol']) ? $option['protocol'] : 'websocket';\n            $socket   = $protocol.'://'.$host.':'.$port;\n            unset($option['host'], $option['port'], $option['protocol']);\n        }\n\n        $gateway = new Gateway($socket, isset($option['context']) ? $option['context'] : []);\n\n        // 以下设置参数都可以在配置文件中重新定义覆盖\n        $gateway-&gt;name                 = 'Gateway';\n        $gateway-&gt;count                = 4;\n        $gateway-&gt;lanIp                = '127.0.0.1';\n        $gateway-&gt;startPort            = 2000;\n        $gateway-&gt;pingInterval         = 30;\n        $gateway-&gt;pingNotResponseLimit = 0;\n        $gateway-&gt;pingData             = '{&quot;type&quot;:&quot;ping&quot;}';\n        $gateway-&gt;registerAddress      = $registerAddress;\n\n        // 全局静态属性设置\n        foreach ($option as $name =&gt; $val) {\n            if (in_array($name, ['stdoutFile', 'daemonize', 'pidFile', 'logFile'])) {\n                Worker::${$name} = $val;\n                unset($option[$name]);\n            }\n        }\n\n        $this-&gt;option($gateway, $option);\n    }\n\n    /**\n     * 设置参数\n     * @access protected\n     *\n     * @param Worker $worker Worker对象\n     * @param array  $option 参数\n     *\n     * @return void\n     */\n    protected function option($worker, array $option = [])\n    {\n        // 设置参数\n        if ( ! empty($option)) {\n            foreach ($option as $key =&gt; $val) {\n                $worker-&gt;$key = $val;\n            }\n        }\n    }\n}\n</code></pre><p id=\"u3a0cf55b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这个文件放哪里都无所谓，只要和对应的command参数配置对应就好了</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">application\\command.php</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">命令行参数配置文件中添加</span></p><pre data-language=\"php\" id=\"ka7yz\" class=\"ne-codeblock language-php\"><code>return [\n    'workerman' =&gt; '\\app\\common\\command\\Workerman',\n];\n</code></pre><p id=\"u7a649470\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">然后windows通过命令行启动gateway。</span></p><pre data-language=\"shell\" id=\"k27Tm\" class=\"ne-codeblock language-shell\"><code>php think workerman register\nphp think workerman businessworker\nphp think workerman gateway</code></pre><p id=\"u14a0d709\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">对应Workman.php设置的命令参数，如果需要重新命名，注意对应关系。</span></p><p id=\"ufddaec06\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h4 id=\"Hit27\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">进阶1</span></h4><p id=\"ub2f6ff3f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">每次都启动三个命令框，有点麻烦，所以调整了下，写了三个bat文件<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">register.bat</span></p><pre data-language=\"shell\" id=\"f32iL\" class=\"ne-codeblock language-shell\"><code>@echo off\nphp E:\\WWW\\tp6\\think workerman register</code></pre><p id=\"u1d0f0ae7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">business.bat</span></p><pre data-language=\"shell\" id=\"AAk1q\" class=\"ne-codeblock language-shell\"><code>@echo off\nphp E:\\WWW\\tp6\\think workerman businessworker</code></pre><p id=\"u94fd59e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">gateway.bat</span></p><pre data-language=\"shell\" id=\"W6pjQ\" class=\"ne-codeblock language-shell\"><code>@echo off\nphp E:\\WWW\\tp6\\think workerman gateway</code></pre><p id=\"u8f6f156f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(40, 44, 52); font-size: 16px\"></span></p><p id=\"u445a6462\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">又写了一个all.bat</span></p><pre data-language=\"shell\" id=\"urHo4\" class=\"ne-codeblock language-shell\"><code>@echo off\nstart call E:\\WWW\\tp6\\register.bat\nstart call E:\\WWW\\tp6\\business.bat\nstart call E:\\WWW\\tp6\\gateway.bat</code></pre><p id=\"ubdfb5eb2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这样一个bat就搞定了，但是每次都有3个弹窗也不好。</span></p><p id=\"ufba16bf4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h4 id=\"CubqG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">进阶2</span></h4><p id=\"u81731c2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">于是又写了一个all.vbs</span></p><pre data-language=\"shell\" id=\"Lh6ug\" class=\"ne-codeblock language-shell\"><code>set ws=WScript.CreateObject(&quot;WScript.Shell&quot;)\nws.Run &quot;E:\\WWW\\tp6\\register.bat&quot;,0\nws.Run &quot;E:\\WWW\\tp6\\business.bat&quot;,0\nws.Run &quot;E:\\WWW\\tp6\\gateway.bat&quot;,0</code></pre><p id=\"u105143fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这样就可以启动一个文件，而且没有弹窗。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">当然还可以放在开机启动文件夹里面，这样就能随着开机自启动，目录如下（该路径为win7下路径，其他系统未知）</span></p><div class=\"ne-quote\"><p id=\"u4df6d815\" class=\"ne-p\"><span class=\"ne-text\">C:\\Users\\用户名\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup</span></p><p id=\"ufdda52e7\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div></div>",
    "body": "tags: [thinkphp,think-worker,gateway]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"CqRHN\"></a>\n#### 测试环境：win 10\nthink-worker默认有命令\n```shell\nphp think worker:gateway\n```\n但是如果在win下运行，会报错\n> GatewayWorker Not Support On Windows\n\n但是这并不是说gatewa不能再windows上运行，而是gateway需要启动好几个命令行，windows下无法直接处理，所以如果想要使用think-worker下的gateway，还需要改造下。<br />新建command命令，例如新建workman\n\n<a name=\"pSCrZ\"></a>\n#### 附：自定义TP命令行\n命令行文件 application\\common\\command\\Workerman.php\n\n```php\n<?php\n/**\n * Created by PhpStorm.\n * User: 投实科技\n * Date: 2021-07-26\n * Time: 11:20:11\n * Info:\n */\n\nnamespace app\\common\\command;\n\nuse GatewayWorker\\BusinessWorker;\nuse GatewayWorker\\Gateway;\nuse GatewayWorker\\Register;\nuse think\\console\\Command;\nuse think\\console\\Input;\nuse think\\console\\input\\Argument;\nuse think\\console\\input\\Option;\nuse think\\console\\Output;\nuse think\\facade\\Config;\nuse Workerman\\Worker;\n\n/**\n * Worker 命令行\n */\nclass Workerman extends Command\n{\n\n    protected function configure()\n    {\n        $this->setName('workerman')->addArgument('service', Argument::OPTIONAL,\n                'workerman service: gateway|register|businessworker', null)->addOption('host', 'H',\n                Option::VALUE_OPTIONAL, 'the host of workerman server', null)->addOption('port', 'P',\n                Option::VALUE_OPTIONAL, 'the port of workerman server', null)->addOption('daemon', 'd',\n                Option::VALUE_OPTIONAL,\n                'Run the workerman server in daemon mode.')->setDescription('workerman Server for ThinkPHP');\n    }\n\n    public function execute(Input $input, Output $output)\n    {\n        $service = $input->getArgument('service');\n\n        $option = Config::pull('gateway_worker');\n\n        if ($input->hasOption('host')) {\n            $host = $input->getOption('host');\n        } else {\n            $host = ! empty($option['host']) ? $option['host'] : '0.0.0.0';\n        }\n\n        if ($input->hasOption('port')) {\n            $port = $input->getOption('port');\n        } else {\n            $port = ! empty($option['port']) ? $option['port'] : '2347';\n        }\n\n        $registerAddress = ! empty($option['registerAddress']) ? $option['registerAddress'] : '127.0.0.1:1236';\n        switch ($service) {\n            case 'register':\n                $this->register($registerAddress);\n                break;\n            case 'businessworker':\n                $this->businessWorker($registerAddress,\n                    isset($option['businessWorker']) ? $option['businessWorker'] : []);\n                break;\n            case 'gateway':\n                $this->gateway($registerAddress, $host, $port, $option);\n                break;\n            default:\n                $output->writeln(\"<error>Invalid argument action:{$service}, Expected gateway|register|businessworker .</error>\");\n                exit(1);\n                break;\n        }\n\n        Worker::runAll();\n    }\n\n    /**\n     * 启动register\n     * @access public\n     *\n     * @param string $registerAddress\n     *\n     * @return void\n     */\n    public function register($registerAddress)\n    {\n        // 初始化register\n        new Register('text://'.$registerAddress);\n    }\n\n    /**\n     * 启动businessWorker\n     * @access public\n     *\n     * @param string $registerAddress registerAddress\n     * @param array  $option          参数\n     *\n     * @return void\n     */\n    public function businessWorker($registerAddress, $option = [])\n    {\n        // 初始化 bussinessWorker 进程\n        $worker = new BusinessWorker();\n\n        $this->option($worker, $option);\n\n        $worker->registerAddress = $registerAddress;\n    }\n\n    /**\n     * 启动gateway\n     * @access public\n     *\n     * @param string  $registerAddress registerAddress\n     * @param string  $host            服务地址\n     * @param integer $port            监听端口\n     * @param array   $option          参数\n     *\n     * @return void\n     */\n    public function gateway($registerAddress, $host, $port, $option = [])\n    {\n        // 初始化 gateway 进程\n        if ( ! empty($option['socket'])) {\n            $socket = $option['socket'];\n            unset($option['socket']);\n        } else {\n            $protocol = ! empty($option['protocol']) ? $option['protocol'] : 'websocket';\n            $socket   = $protocol.'://'.$host.':'.$port;\n            unset($option['host'], $option['port'], $option['protocol']);\n        }\n\n        $gateway = new Gateway($socket, isset($option['context']) ? $option['context'] : []);\n\n        // 以下设置参数都可以在配置文件中重新定义覆盖\n        $gateway->name                 = 'Gateway';\n        $gateway->count                = 4;\n        $gateway->lanIp                = '127.0.0.1';\n        $gateway->startPort            = 2000;\n        $gateway->pingInterval         = 30;\n        $gateway->pingNotResponseLimit = 0;\n        $gateway->pingData             = '{\"type\":\"ping\"}';\n        $gateway->registerAddress      = $registerAddress;\n\n        // 全局静态属性设置\n        foreach ($option as $name => $val) {\n            if (in_array($name, ['stdoutFile', 'daemonize', 'pidFile', 'logFile'])) {\n                Worker::${$name} = $val;\n                unset($option[$name]);\n            }\n        }\n\n        $this->option($gateway, $option);\n    }\n\n    /**\n     * 设置参数\n     * @access protected\n     *\n     * @param Worker $worker Worker对象\n     * @param array  $option 参数\n     *\n     * @return void\n     */\n    protected function option($worker, array $option = [])\n    {\n        // 设置参数\n        if ( ! empty($option)) {\n            foreach ($option as $key => $val) {\n                $worker->$key = $val;\n            }\n        }\n    }\n}\n\n```\n这个文件放哪里都无所谓，只要和对应的command参数配置对应就好了<br />在application\\command.php命令行参数配置文件中添加\n```php\nreturn [\n    'workerman' => '\\app\\common\\command\\Workerman',\n];\n\n```\n然后windows通过命令行启动gateway。\n```shell\nphp think workerman register\nphp think workerman businessworker\nphp think workerman gateway\n```\n对应Workman.php设置的命令参数，如果需要重新命名，注意对应关系。\n\n<a name=\"Hit27\"></a>\n#### 进阶1\n每次都启动三个命令框，有点麻烦，所以调整了下，写了三个bat文件<br />register.bat\n```shell\n@echo off\nphp E:\\WWW\\tp6\\think workerman register\n```\nbusiness.bat\n```shell\n@echo off\nphp E:\\WWW\\tp6\\think workerman businessworker\n```\ngateway.bat\n```shell\n@echo off\nphp E:\\WWW\\tp6\\think workerman gateway\n```\n\n又写了一个all.bat\n```shell\n@echo off\nstart call E:\\WWW\\tp6\\register.bat\nstart call E:\\WWW\\tp6\\business.bat\nstart call E:\\WWW\\tp6\\gateway.bat\n```\n这样一个bat就搞定了，但是每次都有3个弹窗也不好。\n\n<a name=\"CubqG\"></a>\n#### 进阶2\n于是又写了一个all.vbs\n```shell\nset ws=WScript.CreateObject(\"WScript.Shell\")\nws.Run \"E:\\WWW\\tp6\\register.bat\",0\nws.Run \"E:\\WWW\\tp6\\business.bat\",0\nws.Run \"E:\\WWW\\tp6\\gateway.bat\",0\n```\n这样就可以启动一个文件，而且没有弹窗。<br />当然还可以放在开机启动文件夹里面，这样就能随着开机自启动，目录如下（该路径为win7下路径，其他系统未知）\n> C:\\Users\\用户名\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup\n> \n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u95026591\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [thinkphp,think-worker,gateway]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"fDKhP\" class=\"ne-hr\"><h4 id=\"CqRHN\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">测试环境：win 10</span></h4><p id=\"uab2d361d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">think-worker默认有命令</span></p><pre data-language=\"shell\" id=\"WrVrE\" class=\"ne-codeblock language-shell\">php think worker:gateway</pre><p id=\"u1d4ec622\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">但是如果在win下运行，会报错</span></p><div class=\"ne-quote\"><p id=\"udf9cfaa5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span><span class=\"ne-text\">GatewayWorker Not Support On Windows</span></p></div><p id=\"u4ce5545f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">但是这并不是说gatewa不能再windows上运行，而是gateway需要启动好几个</span><span class=\"ne-text\">命令行</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">，windows下无法直接处理，所以如果想要使用think-worker下的gateway，还需要改造下。</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">新建command命令，例如新建workman</span></p><p id=\"u3b0abc59\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h4 id=\"pSCrZ\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">附：自定义TP命令行</span></h4><p id=\"u4538f3ac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">命令行文件 </span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">application\\common\\command\\Workerman.php</span></p><p id=\"u162d7eb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\"></span></p><pre data-language=\"php\" id=\"zzTbz\" class=\"ne-codeblock language-php\">&lt;?php\n/**\n * Created by PhpStorm.\n * User: 投实科技\n * Date: 2021-07-26\n * Time: 11:20:11\n * Info:\n */\n\nnamespace app\\common\\command;\n\nuse GatewayWorker\\BusinessWorker;\nuse GatewayWorker\\Gateway;\nuse GatewayWorker\\Register;\nuse think\\console\\Command;\nuse think\\console\\Input;\nuse think\\console\\input\\Argument;\nuse think\\console\\input\\Option;\nuse think\\console\\Output;\nuse think\\facade\\Config;\nuse Workerman\\Worker;\n\n/**\n * Worker 命令行\n */\nclass Workerman extends Command\n{\n\n    protected function configure()\n    {\n        $this-&gt;setName('workerman')-&gt;addArgument('service', Argument::OPTIONAL,\n                'workerman service: gateway|register|businessworker', null)-&gt;addOption('host', 'H',\n                Option::VALUE_OPTIONAL, 'the host of workerman server', null)-&gt;addOption('port', 'P',\n                Option::VALUE_OPTIONAL, 'the port of workerman server', null)-&gt;addOption('daemon', 'd',\n                Option::VALUE_OPTIONAL,\n                'Run the workerman server in daemon mode.')-&gt;setDescription('workerman Server for ThinkPHP');\n    }\n\n    public function execute(Input $input, Output $output)\n    {\n        $service = $input-&gt;getArgument('service');\n\n        $option = Config::pull('gateway_worker');\n\n        if ($input-&gt;hasOption('host')) {\n            $host = $input-&gt;getOption('host');\n        } else {\n            $host = ! empty($option['host']) ? $option['host'] : '0.0.0.0';\n        }\n\n        if ($input-&gt;hasOption('port')) {\n            $port = $input-&gt;getOption('port');\n        } else {\n            $port = ! empty($option['port']) ? $option['port'] : '2347';\n        }\n\n        $registerAddress = ! empty($option['registerAddress']) ? $option['registerAddress'] : '127.0.0.1:1236';\n        switch ($service) {\n            case 'register':\n                $this-&gt;register($registerAddress);\n                break;\n            case 'businessworker':\n                $this-&gt;businessWorker($registerAddress,\n                    isset($option['businessWorker']) ? $option['businessWorker'] : []);\n                break;\n            case 'gateway':\n                $this-&gt;gateway($registerAddress, $host, $port, $option);\n                break;\n            default:\n                $output-&gt;writeln(&quot;&lt;error&gt;Invalid argument action:{$service}, Expected gateway|register|businessworker .&lt;/error&gt;&quot;);\n                exit(1);\n                break;\n        }\n\n        Worker::runAll();\n    }\n\n    /**\n     * 启动register\n     * @access public\n     *\n     * @param string $registerAddress\n     *\n     * @return void\n     */\n    public function register($registerAddress)\n    {\n        // 初始化register\n        new Register('text://'.$registerAddress);\n    }\n\n    /**\n     * 启动businessWorker\n     * @access public\n     *\n     * @param string $registerAddress registerAddress\n     * @param array  $option          参数\n     *\n     * @return void\n     */\n    public function businessWorker($registerAddress, $option = [])\n    {\n        // 初始化 bussinessWorker 进程\n        $worker = new BusinessWorker();\n\n        $this-&gt;option($worker, $option);\n\n        $worker-&gt;registerAddress = $registerAddress;\n    }\n\n    /**\n     * 启动gateway\n     * @access public\n     *\n     * @param string  $registerAddress registerAddress\n     * @param string  $host            服务地址\n     * @param integer $port            监听端口\n     * @param array   $option          参数\n     *\n     * @return void\n     */\n    public function gateway($registerAddress, $host, $port, $option = [])\n    {\n        // 初始化 gateway 进程\n        if ( ! empty($option['socket'])) {\n            $socket = $option['socket'];\n            unset($option['socket']);\n        } else {\n            $protocol = ! empty($option['protocol']) ? $option['protocol'] : 'websocket';\n            $socket   = $protocol.'://'.$host.':'.$port;\n            unset($option['host'], $option['port'], $option['protocol']);\n        }\n\n        $gateway = new Gateway($socket, isset($option['context']) ? $option['context'] : []);\n\n        // 以下设置参数都可以在配置文件中重新定义覆盖\n        $gateway-&gt;name                 = 'Gateway';\n        $gateway-&gt;count                = 4;\n        $gateway-&gt;lanIp                = '127.0.0.1';\n        $gateway-&gt;startPort            = 2000;\n        $gateway-&gt;pingInterval         = 30;\n        $gateway-&gt;pingNotResponseLimit = 0;\n        $gateway-&gt;pingData             = '{&quot;type&quot;:&quot;ping&quot;}';\n        $gateway-&gt;registerAddress      = $registerAddress;\n\n        // 全局静态属性设置\n        foreach ($option as $name =&gt; $val) {\n            if (in_array($name, ['stdoutFile', 'daemonize', 'pidFile', 'logFile'])) {\n                Worker::${$name} = $val;\n                unset($option[$name]);\n            }\n        }\n\n        $this-&gt;option($gateway, $option);\n    }\n\n    /**\n     * 设置参数\n     * @access protected\n     *\n     * @param Worker $worker Worker对象\n     * @param array  $option 参数\n     *\n     * @return void\n     */\n    protected function option($worker, array $option = [])\n    {\n        // 设置参数\n        if ( ! empty($option)) {\n            foreach ($option as $key =&gt; $val) {\n                $worker-&gt;$key = $val;\n            }\n        }\n    }\n}\n</pre><p id=\"u3a0cf55b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这个文件放哪里都无所谓，只要和对应的command参数配置对应就好了</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">application\\command.php</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">命令行参数配置文件中添加</span></p><pre data-language=\"php\" id=\"ka7yz\" class=\"ne-codeblock language-php\">return [\n    'workerman' =&gt; '\\app\\common\\command\\Workerman',\n];\n</pre><p id=\"u7a649470\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">然后windows通过命令行启动gateway。</span></p><pre data-language=\"shell\" id=\"k27Tm\" class=\"ne-codeblock language-shell\">php think workerman register\nphp think workerman businessworker\nphp think workerman gateway</pre><p id=\"u14a0d709\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">对应Workman.php设置的命令参数，如果需要重新命名，注意对应关系。</span></p><p id=\"ufddaec06\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h4 id=\"Hit27\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">进阶1</span></h4><p id=\"ub2f6ff3f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">每次都启动三个命令框，有点麻烦，所以调整了下，写了三个bat文件<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">register.bat</span></p><pre data-language=\"shell\" id=\"f32iL\" class=\"ne-codeblock language-shell\">@echo off\nphp E:\\WWW\\tp6\\think workerman register</pre><p id=\"u1d0f0ae7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">business.bat</span></p><pre data-language=\"shell\" id=\"AAk1q\" class=\"ne-codeblock language-shell\">@echo off\nphp E:\\WWW\\tp6\\think workerman businessworker</pre><p id=\"u94fd59e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">gateway.bat</span></p><pre data-language=\"shell\" id=\"W6pjQ\" class=\"ne-codeblock language-shell\">@echo off\nphp E:\\WWW\\tp6\\think workerman gateway</pre><p id=\"u8f6f156f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153); background-color: rgb(40, 44, 52); font-size: 16px\"></span></p><p id=\"u445a6462\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">又写了一个all.bat</span></p><pre data-language=\"shell\" id=\"urHo4\" class=\"ne-codeblock language-shell\">@echo off\nstart call E:\\WWW\\tp6\\register.bat\nstart call E:\\WWW\\tp6\\business.bat\nstart call E:\\WWW\\tp6\\gateway.bat</pre><p id=\"ubdfb5eb2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这样一个bat就搞定了，但是每次都有3个弹窗也不好。</span></p><p id=\"ufba16bf4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><h4 id=\"CubqG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">进阶2</span></h4><p id=\"u81731c2c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">于是又写了一个all.vbs</span></p><pre data-language=\"shell\" id=\"Lh6ug\" class=\"ne-codeblock language-shell\">set ws=WScript.CreateObject(&quot;WScript.Shell&quot;)\nws.Run &quot;E:\\WWW\\tp6\\register.bat&quot;,0\nws.Run &quot;E:\\WWW\\tp6\\business.bat&quot;,0\nws.Run &quot;E:\\WWW\\tp6\\gateway.bat&quot;,0</pre><p id=\"u105143fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">这样就可以启动一个文件，而且没有弹窗。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">当然还可以放在开机启动文件夹里面，这样就能随着开机自启动，目录如下（该路径为win7下路径，其他系统未知）</span></p><div class=\"ne-quote\"><p id=\"u4df6d815\" class=\"ne-p\"><span class=\"ne-text\">C:\\Users\\用户名\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup</span></p><p id=\"ufdda52e7\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u95026591\" id=\"u95026591\" style=\"text-align: left\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [thinkphp,think-worker,gateway]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22fDKhP%22%7D\"></card><h4 data-lake-id=\"CqRHN\" id=\"CqRHN\"><span data-lake-id=\"u21db040f\" id=\"u21db040f\" style=\"color: rgb(79, 79, 79)\">测试环境：win 10</span></h4><p data-lake-id=\"uab2d361d\" id=\"uab2d361d\"><span data-lake-id=\"u93030b97\" id=\"u93030b97\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">think-worker默认有命令</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22php%20think%20worker%3Agateway%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22WrVrE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u1d4ec622\" id=\"u1d4ec622\"><span data-lake-id=\"ucff545a3\" id=\"ucff545a3\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">但是如果在win下运行，会报错</span></p><blockquote data-lake-id=\"u4b88982c\" id=\"u4b88982c\"><p data-lake-id=\"udf9cfaa5\" id=\"udf9cfaa5\"><span data-lake-id=\"u2f2e911e\" id=\"u2f2e911e\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><span data-lake-id=\"u4961ecdb\" id=\"u4961ecdb\">GatewayWorker Not Support On Windows</span></p></blockquote><p data-lake-id=\"u4ce5545f\" id=\"u4ce5545f\"><span data-lake-id=\"uc3e05551\" id=\"uc3e05551\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">但是这并不是说gatewa不能再windows上运行，而是gateway需要启动好几个</span><span data-lake-id=\"u7a5cd817\" id=\"u7a5cd817\">命令行</span><span data-lake-id=\"uc966a0f1\" id=\"uc966a0f1\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">，windows下无法直接处理，所以如果想要使用think-worker下的gateway，还需要改造下。</span><span data-lake-id=\"uc7ee2911\" id=\"uc7ee2911\"><br /></span><span data-lake-id=\"u5b1c60bd\" id=\"u5b1c60bd\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">新建command命令，例如新建workman</span></p><p data-lake-id=\"u3b0abc59\" id=\"u3b0abc59\"><span data-lake-id=\"u57055871\" id=\"u57055871\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><h4 data-lake-id=\"pSCrZ\" id=\"pSCrZ\"><span data-lake-id=\"uadc5ea7d\" id=\"uadc5ea7d\" style=\"color: rgb(79, 79, 79)\">附：自定义TP命令行</span></h4><p data-lake-id=\"u4538f3ac\" id=\"u4538f3ac\"><span data-lake-id=\"u7b225646\" id=\"u7b225646\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">命令行文件 </span><span data-lake-id=\"u9e7aef57\" id=\"u9e7aef57\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">application\\common\\command\\Workerman.php</span></p><p data-lake-id=\"u162d7eb5\" id=\"u162d7eb5\"><span data-lake-id=\"ubcb33da6\" id=\"ubcb33da6\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cn%2F**%5Cn%20*%20Created%20by%20PhpStorm.%5Cn%20*%20User%3A%20%E6%8A%95%E5%AE%9E%E7%A7%91%E6%8A%80%5Cn%20*%20Date%3A%202021-07-26%5Cn%20*%20Time%3A%2011%3A20%3A11%5Cn%20*%20Info%3A%5Cn%20*%2F%5Cn%5Cnnamespace%20app%5C%5Ccommon%5C%5Ccommand%3B%5Cn%5Cnuse%20GatewayWorker%5C%5CBusinessWorker%3B%5Cnuse%20GatewayWorker%5C%5CGateway%3B%5Cnuse%20GatewayWorker%5C%5CRegister%3B%5Cnuse%20think%5C%5Cconsole%5C%5CCommand%3B%5Cnuse%20think%5C%5Cconsole%5C%5CInput%3B%5Cnuse%20think%5C%5Cconsole%5C%5Cinput%5C%5CArgument%3B%5Cnuse%20think%5C%5Cconsole%5C%5Cinput%5C%5COption%3B%5Cnuse%20think%5C%5Cconsole%5C%5COutput%3B%5Cnuse%20think%5C%5Cfacade%5C%5CConfig%3B%5Cnuse%20Workerman%5C%5CWorker%3B%5Cn%5Cn%2F**%5Cn%20*%20Worker%20%E5%91%BD%E4%BB%A4%E8%A1%8C%5Cn%20*%2F%5Cnclass%20Workerman%20extends%20Command%5Cn%7B%5Cn%5Cn%20%20%20%20protected%20function%20configure()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24this-%3EsetName('workerman')-%3EaddArgument('service'%2C%20Argument%3A%3AOPTIONAL%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'workerman%20service%3A%20gateway%7Cregister%7Cbusinessworker'%2C%20null)-%3EaddOption('host'%2C%20'H'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Option%3A%3AVALUE_OPTIONAL%2C%20'the%20host%20of%20workerman%20server'%2C%20null)-%3EaddOption('port'%2C%20'P'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Option%3A%3AVALUE_OPTIONAL%2C%20'the%20port%20of%20workerman%20server'%2C%20null)-%3EaddOption('daemon'%2C%20'd'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Option%3A%3AVALUE_OPTIONAL%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Run%20the%20workerman%20server%20in%20daemon%20mode.')-%3EsetDescription('workerman%20Server%20for%20ThinkPHP')%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20function%20execute(Input%20%24input%2C%20Output%20%24output)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24service%20%3D%20%24input-%3EgetArgument('service')%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24option%20%3D%20Config%3A%3Apull('gateway_worker')%3B%5Cn%5Cn%20%20%20%20%20%20%20%20if%20(%24input-%3EhasOption('host'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24host%20%3D%20%24input-%3EgetOption('host')%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24host%20%3D%20!%20empty(%24option%5B'host'%5D)%20%3F%20%24option%5B'host'%5D%20%3A%20'0.0.0.0'%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20if%20(%24input-%3EhasOption('port'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24port%20%3D%20%24input-%3EgetOption('port')%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24port%20%3D%20!%20empty(%24option%5B'port'%5D)%20%3F%20%24option%5B'port'%5D%20%3A%20'2347'%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%24registerAddress%20%3D%20!%20empty(%24option%5B'registerAddress'%5D)%20%3F%20%24option%5B'registerAddress'%5D%20%3A%20'127.0.0.1%3A1236'%3B%5Cn%20%20%20%20%20%20%20%20switch%20(%24service)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20'register'%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3Eregister(%24registerAddress)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20'businessworker'%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3EbusinessWorker(%24registerAddress%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isset(%24option%5B'businessWorker'%5D)%20%3F%20%24option%5B'businessWorker'%5D%20%3A%20%5B%5D)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20case%20'gateway'%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24this-%3Egateway(%24registerAddress%2C%20%24host%2C%20%24port%2C%20%24option)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20default%3A%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24output-%3Ewriteln(%5C%22%3Cerror%3EInvalid%20argument%20action%3A%7B%24service%7D%2C%20Expected%20gateway%7Cregister%7Cbusinessworker%20.%3C%2Ferror%3E%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exit(1)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20Worker%3A%3ArunAll()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%90%AF%E5%8A%A8register%5Cn%20%20%20%20%20*%20%40access%20public%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20string%20%24registerAddress%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20register(%24registerAddress)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96register%5Cn%20%20%20%20%20%20%20%20new%20Register('text%3A%2F%2F'.%24registerAddress)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%90%AF%E5%8A%A8businessWorker%5Cn%20%20%20%20%20*%20%40access%20public%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20string%20%24registerAddress%20registerAddress%5Cn%20%20%20%20%20*%20%40param%20array%20%20%24option%20%20%20%20%20%20%20%20%20%20%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20businessWorker(%24registerAddress%2C%20%24option%20%3D%20%5B%5D)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%20bussinessWorker%20%E8%BF%9B%E7%A8%8B%5Cn%20%20%20%20%20%20%20%20%24worker%20%3D%20new%20BusinessWorker()%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24this-%3Eoption(%24worker%2C%20%24option)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%24worker-%3EregisterAddress%20%3D%20%24registerAddress%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E5%90%AF%E5%8A%A8gateway%5Cn%20%20%20%20%20*%20%40access%20public%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20string%20%20%24registerAddress%20registerAddress%5Cn%20%20%20%20%20*%20%40param%20string%20%20%24host%20%20%20%20%20%20%20%20%20%20%20%20%E6%9C%8D%E5%8A%A1%E5%9C%B0%E5%9D%80%5Cn%20%20%20%20%20*%20%40param%20integer%20%24port%20%20%20%20%20%20%20%20%20%20%20%20%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3%5Cn%20%20%20%20%20*%20%40param%20array%20%20%20%24option%20%20%20%20%20%20%20%20%20%20%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20gateway(%24registerAddress%2C%20%24host%2C%20%24port%2C%20%24option%20%3D%20%5B%5D)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%20gateway%20%E8%BF%9B%E7%A8%8B%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20empty(%24option%5B'socket'%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24socket%20%3D%20%24option%5B'socket'%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unset(%24option%5B'socket'%5D)%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24protocol%20%3D%20!%20empty(%24option%5B'protocol'%5D)%20%3F%20%24option%5B'protocol'%5D%20%3A%20'websocket'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24socket%20%20%20%3D%20%24protocol.'%3A%2F%2F'.%24host.'%3A'.%24port%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20unset(%24option%5B'host'%5D%2C%20%24option%5B'port'%5D%2C%20%24option%5B'protocol'%5D)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%24gateway%20%3D%20new%20Gateway(%24socket%2C%20isset(%24option%5B'context'%5D)%20%3F%20%24option%5B'context'%5D%20%3A%20%5B%5D)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E4%BB%A5%E4%B8%8B%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0%E9%83%BD%E5%8F%AF%E4%BB%A5%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E8%A6%86%E7%9B%96%5Cn%20%20%20%20%20%20%20%20%24gateway-%3Ename%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20'Gateway'%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3Ecount%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%204%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3ElanIp%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20'127.0.0.1'%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3EstartPort%20%20%20%20%20%20%20%20%20%20%20%20%3D%202000%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3EpingInterval%20%20%20%20%20%20%20%20%20%3D%2030%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3EpingNotResponseLimit%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3EpingData%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20'%7B%5C%22type%5C%22%3A%5C%22ping%5C%22%7D'%3B%5Cn%20%20%20%20%20%20%20%20%24gateway-%3EregisterAddress%20%20%20%20%20%20%3D%20%24registerAddress%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%85%A8%E5%B1%80%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE%5Cn%20%20%20%20%20%20%20%20foreach%20(%24option%20as%20%24name%20%3D%3E%20%24val)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(in_array(%24name%2C%20%5B'stdoutFile'%2C%20'daemonize'%2C%20'pidFile'%2C%20'logFile'%5D))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Worker%3A%3A%24%7B%24name%7D%20%3D%20%24val%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unset(%24option%5B%24name%5D)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%24this-%3Eoption(%24gateway%2C%20%24option)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20*%20%40access%20protected%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40param%20Worker%20%24worker%20Worker%E5%AF%B9%E8%B1%A1%5Cn%20%20%20%20%20*%20%40param%20array%20%20%24option%20%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20*%5Cn%20%20%20%20%20*%20%40return%20void%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20protected%20function%20option(%24worker%2C%20array%20%24option%20%3D%20%5B%5D)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0%5Cn%20%20%20%20%20%20%20%20if%20(%20!%20empty(%24option))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20foreach%20(%24option%20as%20%24key%20%3D%3E%20%24val)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24worker-%3E%24key%20%3D%20%24val%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zzTbz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u3a0cf55b\" id=\"u3a0cf55b\"><span data-lake-id=\"u055f231e\" id=\"u055f231e\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">这个文件放哪里都无所谓，只要和对应的command参数配置对应就好了</span><span data-lake-id=\"u67540aac\" id=\"u67540aac\"><br /></span><span data-lake-id=\"u93622d6d\" id=\"u93622d6d\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">在</span><span data-lake-id=\"u13c0e40c\" id=\"u13c0e40c\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">application\\command.php</span><span data-lake-id=\"u46060e6e\" id=\"u46060e6e\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">命令行参数配置文件中添加</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22return%20%5B%5Cn%20%20%20%20'workerman'%20%3D%3E%20'%5C%5Capp%5C%5Ccommon%5C%5Ccommand%5C%5CWorkerman'%2C%5Cn%5D%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ka7yz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7a649470\" id=\"u7a649470\"><span data-lake-id=\"ufeddff4c\" id=\"ufeddff4c\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">然后windows通过命令行启动gateway。</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22php%20think%20workerman%20register%5Cnphp%20think%20workerman%20businessworker%5Cnphp%20think%20workerman%20gateway%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22k27Tm%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u14a0d709\" id=\"u14a0d709\"><span data-lake-id=\"u4d547c01\" id=\"u4d547c01\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">对应Workman.php设置的命令参数，如果需要重新命名，注意对应关系。</span></p><p data-lake-id=\"ufddaec06\" id=\"ufddaec06\"><span data-lake-id=\"uc1308429\" id=\"uc1308429\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><h4 data-lake-id=\"Hit27\" id=\"Hit27\"><span data-lake-id=\"udb551b96\" id=\"udb551b96\" style=\"color: rgb(79, 79, 79)\">进阶1</span></h4><p data-lake-id=\"ub2f6ff3f\" id=\"ub2f6ff3f\"><span data-lake-id=\"u09c45b22\" id=\"u09c45b22\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">每次都启动三个命令框，有点麻烦，所以调整了下，写了三个bat文件<br /></span><span data-lake-id=\"u0b106bb8\" id=\"u0b106bb8\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">register.bat</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%40echo%20off%5Cnphp%20E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cthink%20workerman%20register%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22f32iL%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u1d0f0ae7\" id=\"u1d0f0ae7\"><span data-lake-id=\"u94e639b4\" id=\"u94e639b4\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">business.bat</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%40echo%20off%5Cnphp%20E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cthink%20workerman%20businessworker%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22AAk1q%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u94fd59e1\" id=\"u94fd59e1\"><span data-lake-id=\"ufdf4a9df\" id=\"ufdf4a9df\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">gateway.bat</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%40echo%20off%5Cnphp%20E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cthink%20workerman%20gateway%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22W6pjQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8f6f156f\" id=\"u8f6f156f\"><span data-lake-id=\"u4f87829c\" id=\"u4f87829c\" class=\"lake-fontsize-12\" style=\"color: rgb(153, 153, 153); background-color: rgb(40, 44, 52)\">​</span><br></p><p data-lake-id=\"u445a6462\" id=\"u445a6462\"><span data-lake-id=\"u9c0a3164\" id=\"u9c0a3164\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">又写了一个all.bat</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%40echo%20off%5Cnstart%20call%20E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cregister.bat%5Cnstart%20call%20E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cbusiness.bat%5Cnstart%20call%20E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cgateway.bat%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22urHo4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ubdfb5eb2\" id=\"ubdfb5eb2\"><span data-lake-id=\"u1599fc42\" id=\"u1599fc42\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">这样一个bat就搞定了，但是每次都有3个弹窗也不好。</span></p><p data-lake-id=\"ufba16bf4\" id=\"ufba16bf4\"><span data-lake-id=\"ua494258e\" id=\"ua494258e\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><h4 data-lake-id=\"CubqG\" id=\"CubqG\"><span data-lake-id=\"u3f9178c1\" id=\"u3f9178c1\" style=\"color: rgb(79, 79, 79)\">进阶2</span></h4><p data-lake-id=\"u81731c2c\" id=\"u81731c2c\"><span data-lake-id=\"u22b3991d\" id=\"u22b3991d\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">于是又写了一个all.vbs</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22set%20ws%3DWScript.CreateObject(%5C%22WScript.Shell%5C%22)%5Cnws.Run%20%5C%22E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cregister.bat%5C%22%2C0%5Cnws.Run%20%5C%22E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cbusiness.bat%5C%22%2C0%5Cnws.Run%20%5C%22E%3A%5C%5CWWW%5C%5Ctp6%5C%5Cgateway.bat%5C%22%2C0%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Lh6ug%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u105143fa\" id=\"u105143fa\"><span data-lake-id=\"ua3939fb9\" id=\"ua3939fb9\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">这样就可以启动一个文件，而且没有弹窗。<br /></span><span data-lake-id=\"u92b2b529\" id=\"u92b2b529\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">当然还可以放在开机启动文件夹里面，这样就能随着开机自启动，目录如下（该路径为win7下路径，其他系统未知）</span></p><blockquote data-lake-id=\"u67558f1c\" id=\"u67558f1c\"><p data-lake-id=\"u4df6d815\" id=\"u4df6d815\"><span data-lake-id=\"u2791289e\" id=\"u2791289e\">C:\\Users\\用户名\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup</span></p><p data-lake-id=\"ufdda52e7\" id=\"ufdda52e7\"><span data-lake-id=\"u225f4bd3\" id=\"u225f4bd3\">​</span><br></p></blockquote>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 912,
    "created_at": "2022-04-26T03:28:23.000Z",
    "updated_at": "2023-07-27T02:07:19.000Z",
    "content_updated_at": "2023-07-27T02:07:19.000Z",
    "published_at": "2022-04-26T03:41:22.000Z",
    "first_published_at": "2022-04-26T03:34:11.871Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 954252646,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 74978854,
    "type": "Doc",
    "slug": "nufoqv",
    "title": "前后端分离和不分离的区别是什么",
    "description": "tags: [分离,前后端]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net区别：前后端不分离中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，即后端需要控制前端的展示，前端与后端的耦合度很高。前后端...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1650871464824-462304b8-4353-4b00-8840-0d3fba42a74c.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u25d76d9f\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [分离,前后端]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"MGGd6\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u741136d1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); font-size: 14px\">区别：前后端不分离中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，即后端需要控制前端的展示，前端与后端的耦合度很高。前后端分离中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果，前端与后端的耦合度相对较低。</span></p></div><p id=\"udff68e83\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1650871464824-462304b8-4353-4b00-8840-0d3fba42a74c.png\" width=\"800\" id=\"ue08c53c1\" class=\"ne-image\"></p><h1 id=\"w7WB9\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">一、前后端分离的概念</span></h1><h2 id=\"f0x6q\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">1、前后端分离</span></h2><ul class=\"ne-ul\"><li id=\"u54fe9b62\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">前后端分离是一种架构模式，说通俗点就是后端项目里面看不到页面</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（JSP | HTML）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，后端给前端提供接口，前端调用后端提供的 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">REST</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 风格接口就行，前端专注写页面</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（html|jsp）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">和渲染</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（JS|CSS|各种前端框架）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">；后端专注写代码就行。</span></li><li id=\"u5e662c5a\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">前后端分离的核心：</span><strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">后台提供数据，前端负责显示</span></strong></li></ul><h3 id=\"sNiNB\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">1、软件架构模式</span></h3><p id=\"u66006839\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">最熟悉</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">MVC</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">设计模式，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">Model—View-Controller</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 模型-视图-控制器</span></p><ul class=\"ne-ul\"><li id=\"u30610d9c\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">它是怎么工作的？通俗来说：你在页面输入一个网址</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（请求-Request）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，这个网址跑到哪里去了呢？就去调用接口<br /></span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（REST风格）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，这个接口其实就是访问后端的一段代码（方法），后端有很多方法。</span></li><li id=\"ub23bb573\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">如何确定访问的是哪个方法？就是接口定义好的，比如：</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">177.25.26.7/idp/user/login</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，这里面的</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">idp</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">就表示一<br /></span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">个服务(一个工程)，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">user</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">表示一个类，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">login</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">表示具体要调用的那个方法，你一旦回车，就直接调用了后端这个方法，后端这个方法就去数据库</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（MySQL|Oracle|其他）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">取数据，数据库表中每一行数据就表示一个对象，也就是一个</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">JavaBean</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，最终用</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">pojo</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">方式存到集合框架 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（List|Map|Set|等）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">中，方法把这个集合返回，那么调用这个接口的结果就是会响</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（Response）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">给你一个结果集，前端就拿到了这个数据，然后通过页面</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">（html|Jsp）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">展现出来，这个用户看到的就是</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">View</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">层做的事情。</span></li></ul><h2 id=\"mAjrX\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">2、前后端分离的原因</span></h2><p id=\"udcbe979e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在以前，听说 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">TDD (Test-driven development，测试驱动开发)</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 可以改善代码的质量，我们便实施了 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">TDD</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">；接着，听说 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">BDD (Behavior-driven development，行为驱动开发)</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 可以交付符合业务需求的软件，我们便实施了 BDD；后来，听说 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">DDD (Domain-driven design，领域驱动设计)</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 可以分离业务代码与基础代码，我们便实施了 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">DDD</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">。今天，听说了前后端分离很流行，于是我们就实施了前后端分离——这就是传说中的 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">HDD（Hype-driven Development，热闹驱动开发）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">。</span></p><p id=\"u6c133496\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">过程</span></strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">： </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">TDD -》 BDD -》 DDD =》 HDD</span></p><h2 id=\"j8DOg\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">3、前后端分离的优点</span></h2><p id=\"u9f24b236\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">前后端分离则可以很好的解决前后端分工不均的问题，将更多的交互逻辑分配给前端来处理，而后端则可以专注于其本职工作，比如提供</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">API</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">接口，进行权限控制以及进行运算工作。而前端开发人员则可以利用</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">nodejs</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">来搭建自己的本地服务器，直接在本地开发，然后通过一些插件来将</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">api</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">请求转发到后台，这样就可以完全模拟线上的场景，并且与后台解耦。前端可以独立完成与用户交互的整一个过程，两者都可以同时开工，不互相依赖，开发效率更快，而且分工比较均衡。</span></p><p id=\"u4377b845\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">总结优点如下：</span></strong></p><ul class=\"ne-ul\"><li id=\"ud6eaae5b\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">提升开发效率</span></li><li id=\"uaaa9ecc6\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">完美应对复杂多变的前端需求</span></li><li id=\"ubd1fc6c0\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">增强代码可维护性</span></li></ul><h1 id=\"vXkqg\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">二、前后端分离和前后端不分离的区别</span></h1><h2 id=\"I0PLn\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">1、前后端不分离</span></h2><ul class=\"ne-ul\"><li id=\"uc3286488\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。</span></li><li id=\"u755335f4\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">这种应用模式比较适合纯网页应用，但是当后端对接</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">时，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">可能并不需要后端返回一个</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">HTML</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">应用，为了对接</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">后端还需再开发一套接口。</span></li></ul><h2 id=\"WRJ9L\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">2、前后端分离</span></h2><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u3ef3f27f\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">HTML</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">页面，不再控制前端的效果。至于前端用户看到什么效果，从后端请求的数据如何加载到前端中，都由前端自己决定，网页有网页的处理方式，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">有</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">的处理方式，但无论哪种前端，所需的数据基本相同，后端仅需开发一套逻辑对外提供数据即可。</span></li><li id=\"u60e7ff3e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端分离的应用模式中 ，前端与后端的耦合度相对较低。</span></li><li id=\"u53c39692\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端分离的应用模式中，我们通常将后端开发的每个视图都称为一个接口，或者</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246); font-size: 12px\">API</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，前端通过访问接口来对数据进行增删改查。</span></li></ul></ul></div>",
    "body": "tags: [分离,前后端]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n> 区别：前后端不分离中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，即后端需要控制前端的展示，前端与后端的耦合度很高。前后端分离中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果，前端与后端的耦合度相对较低。\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1650871464824-462304b8-4353-4b00-8840-0d3fba42a74c.png#clientId=u030f04bb-aefb-4&from=paste&id=ue08c53c1&originHeight=320&originWidth=800&originalType=url&ratio=1&rotation=0&showTitle=false&size=78669&status=done&style=none&taskId=ufd5f35a7-b659-412c-85ba-d7c04c4bbac&title=)\n<a name=\"w7WB9\"></a>\n# 一、前后端分离的概念\n<a name=\"f0x6q\"></a>\n## 1、前后端分离\n\n- 前后端分离是一种架构模式，说通俗点就是后端项目里面看不到页面（JSP | HTML），后端给前端提供接口，前端调用后端提供的 REST 风格接口就行，前端专注写页面（html|jsp）和渲染（JS|CSS|各种前端框架）；后端专注写代码就行。\n- 前后端分离的核心：**后台提供数据，前端负责显示**\n<a name=\"sNiNB\"></a>\n### 1、软件架构模式\n最熟悉MVC设计模式，Model—View-Controller 模型-视图-控制器\n\n- 它是怎么工作的？通俗来说：你在页面输入一个网址（请求-Request），这个网址跑到哪里去了呢？就去调用接口<br />（REST风格），这个接口其实就是访问后端的一段代码（方法），后端有很多方法。\n- 如何确定访问的是哪个方法？就是接口定义好的，比如：177.25.26.7/idp/user/login，这里面的idp就表示一<br />个服务(一个工程)，user表示一个类，login表示具体要调用的那个方法，你一旦回车，就直接调用了后端这个方法，后端这个方法就去数据库（MySQL|Oracle|其他）取数据，数据库表中每一行数据就表示一个对象，也就是一个JavaBean，最终用pojo方式存到集合框架 （List|Map|Set|等）中，方法把这个集合返回，那么调用这个接口的结果就是会响（Response）给你一个结果集，前端就拿到了这个数据，然后通过页面（html|Jsp）展现出来，这个用户看到的就是View层做的事情。\n<a name=\"mAjrX\"></a>\n## 2、前后端分离的原因\n在以前，听说 TDD (Test-driven development，测试驱动开发) 可以改善代码的质量，我们便实施了 TDD；接着，听说 BDD (Behavior-driven development，行为驱动开发) 可以交付符合业务需求的软件，我们便实施了 BDD；后来，听说 DDD (Domain-driven design，领域驱动设计) 可以分离业务代码与基础代码，我们便实施了 DDD。今天，听说了前后端分离很流行，于是我们就实施了前后端分离——这就是传说中的 HDD（Hype-driven Development，热闹驱动开发）。<br />**过程**： TDD -》 BDD -》 DDD =》 HDD\n<a name=\"j8DOg\"></a>\n## 3、前后端分离的优点\n前后端分离则可以很好的解决前后端分工不均的问题，将更多的交互逻辑分配给前端来处理，而后端则可以专注于其本职工作，比如提供API接口，进行权限控制以及进行运算工作。而前端开发人员则可以利用nodejs来搭建自己的本地服务器，直接在本地开发，然后通过一些插件来将api请求转发到后台，这样就可以完全模拟线上的场景，并且与后台解耦。前端可以独立完成与用户交互的整一个过程，两者都可以同时开工，不互相依赖，开发效率更快，而且分工比较均衡。<br />**总结优点如下：**\n\n- 提升开发效率\n- 完美应对复杂多变的前端需求\n- 增强代码可维护性\n<a name=\"vXkqg\"></a>\n# 二、前后端分离和前后端不分离的区别\n<a name=\"I0PLn\"></a>\n## 1、前后端不分离\n\n- 在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。\n- 这种应用模式比较适合纯网页应用，但是当后端对接App时，App可能并不需要后端返回一个HTML网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端App应用，为了对接App后端还需再开发一套接口。\n<a name=\"WRJ9L\"></a>\n## 2、前后端分离\n\n   - 在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果。至于前端用户看到什么效果，从后端请求的数据如何加载到前端中，都由前端自己决定，网页有网页的处理方式，App有App的处理方式，但无论哪种前端，所需的数据基本相同，后端仅需开发一套逻辑对外提供数据即可。\n   - 在前后端分离的应用模式中 ，前端与后端的耦合度相对较低。\n   - 在前后端分离的应用模式中，我们通常将后端开发的每个视图都称为一个接口，或者API，前端通过访问接口来对数据进行增删改查。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u25d76d9f\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [分离,前后端]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"MGGd6\" class=\"ne-hr\"><div class=\"ne-quote\"><p id=\"u741136d1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(102, 102, 102); font-size: 14px\">区别：前后端不分离中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，即后端需要控制前端的展示，前端与后端的耦合度很高。前后端分离中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果，前端与后端的耦合度相对较低。</span></p></div><p id=\"udff68e83\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1650871464824-462304b8-4353-4b00-8840-0d3fba42a74c.png\" width=\"800\" id=\"ue08c53c1\" class=\"ne-image\"></p><h1 id=\"w7WB9\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">一、前后端分离的概念</span></h1><h2 id=\"f0x6q\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">1、前后端分离</span></h2><ul class=\"ne-ul\"><li id=\"u54fe9b62\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">前后端分离是一种架构模式，说通俗点就是后端项目里面看不到页面</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（JSP | HTML）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，后端给前端提供接口，前端调用后端提供的 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">REST</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 风格接口就行，前端专注写页面</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（html|jsp）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">和渲染</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（JS|CSS|各种前端框架）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">；后端专注写代码就行。</span></li><li id=\"u5e662c5a\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">前后端分离的核心：</span><strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">后台提供数据，前端负责显示</span></strong></li></ul><h3 id=\"sNiNB\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">1、软件架构模式</span></h3><p id=\"u66006839\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">最熟悉</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">MVC</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">设计模式，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">Model—View-Controller</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 模型-视图-控制器</span></p><ul class=\"ne-ul\"><li id=\"u30610d9c\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">它是怎么工作的？通俗来说：你在页面输入一个网址</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（请求-Request）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，这个网址跑到哪里去了呢？就去调用接口<br /></span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（REST风格）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，这个接口其实就是访问后端的一段代码（方法），后端有很多方法。</span></li><li id=\"ub23bb573\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">如何确定访问的是哪个方法？就是接口定义好的，比如：</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">177.25.26.7/idp/user/login</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，这里面的</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">idp</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">就表示一<br />个服务(一个工程)，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">user</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">表示一个类，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">login</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">表示具体要调用的那个方法，你一旦回车，就直接调用了后端这个方法，后端这个方法就去数据库</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（MySQL|Oracle|其他）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">取数据，数据库表中每一行数据就表示一个对象，也就是一个</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">JavaBean</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，最终用</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">pojo</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">方式存到集合框架 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（List|Map|Set|等）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">中，方法把这个集合返回，那么调用这个接口的结果就是会响</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（Response）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">给你一个结果集，前端就拿到了这个数据，然后通过页面</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">（html|Jsp）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">展现出来，这个用户看到的就是</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">View</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">层做的事情。</span></li></ul><h2 id=\"mAjrX\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">2、前后端分离的原因</span></h2><p id=\"udcbe979e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在以前，听说 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">TDD (Test-driven development，测试驱动开发)</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 可以改善代码的质量，我们便实施了 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">TDD</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">；接着，听说 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">BDD (Behavior-driven development，行为驱动开发)</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 可以交付符合业务需求的软件，我们便实施了 BDD；后来，听说 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">DDD (Domain-driven design，领域驱动设计)</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\"> 可以分离业务代码与基础代码，我们便实施了 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">DDD</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">。今天，听说了前后端分离很流行，于是我们就实施了前后端分离——这就是传说中的 </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">HDD（Hype-driven Development，热闹驱动开发）</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">。</span></p><p id=\"u6c133496\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">过程</span></strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">： </span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">TDD -》 BDD -》 DDD =》 HDD</span></p><h2 id=\"j8DOg\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">3、前后端分离的优点</span></h2><p id=\"u9f24b236\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">前后端分离则可以很好的解决前后端分工不均的问题，将更多的交互逻辑分配给前端来处理，而后端则可以专注于其本职工作，比如提供</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">API</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">接口，进行权限控制以及进行运算工作。而前端开发人员则可以利用</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">nodejs</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">来搭建自己的本地服务器，直接在本地开发，然后通过一些插件来将</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">api</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">请求转发到后台，这样就可以完全模拟线上的场景，并且与后台解耦。前端可以独立完成与用户交互的整一个过程，两者都可以同时开工，不互相依赖，开发效率更快，而且分工比较均衡。</span></p><p id=\"u4377b845\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">总结优点如下：</span></strong></p><ul class=\"ne-ul\"><li id=\"ud6eaae5b\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">提升开发效率</span></li><li id=\"uaaa9ecc6\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">完美应对复杂多变的前端需求</span></li><li id=\"ubd1fc6c0\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">增强代码可维护性</span></li></ul><h1 id=\"vXkqg\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">二、前后端分离和前后端不分离的区别</span></h1><h2 id=\"I0PLn\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">1、前后端不分离</span></h2><ul class=\"ne-ul\"><li id=\"uc3286488\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。</span></li><li id=\"u755335f4\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">这种应用模式比较适合纯网页应用，但是当后端对接</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">时，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">可能并不需要后端返回一个</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">HTML</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">应用，为了对接</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">后端还需再开发一套接口。</span></li></ul><h2 id=\"WRJ9L\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">2、前后端分离</span></h2><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u3ef3f27f\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">HTML</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">页面，不再控制前端的效果。至于前端用户看到什么效果，从后端请求的数据如何加载到前端中，都由前端自己决定，网页有网页的处理方式，</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">有</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">App</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">的处理方式，但无论哪种前端，所需的数据基本相同，后端仅需开发一套逻辑对外提供数据即可。</span></li><li id=\"u60e7ff3e\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端分离的应用模式中 ，前端与后端的耦合度相对较低。</span></li><li id=\"u53c39692\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">在前后端分离的应用模式中，我们通常将后端开发的每个视图都称为一个接口，或者</span><span class=\"ne-text\" style=\"color: rgb(232, 62, 140); font-size: 12px; background-color: rgb(246, 246, 246)\">API</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 14px\">，前端通过访问接口来对数据进行增删改查。</span></li></ul></ul></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u25d76d9f\" id=\"u25d76d9f\" style=\"text-align: left\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [分离,前后端]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22MGGd6%22%7D\"></card><blockquote data-lake-id=\"u65232044\" id=\"u65232044\"><p data-lake-id=\"u741136d1\" id=\"u741136d1\"><span data-lake-id=\"u8b2f70a9\" id=\"u8b2f70a9\" class=\"lake-fontsize-11\" style=\"color: rgb(102, 102, 102)\">区别：前后端不分离中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，即后端需要控制前端的展示，前端与后端的耦合度很高。前后端分离中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果，前端与后端的耦合度相对较低。</span></p></blockquote><p data-lake-id=\"udff68e83\" id=\"udff68e83\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1650871464824-462304b8-4353-4b00-8840-0d3fba42a74c.png%22%2C%22taskId%22%3A%22ufd5f35a7-b659-412c-85ba-d7c04c4bbac%22%2C%22clientId%22%3A%22u030f04bb-aefb-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A78669%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A800%2C%22originHeight%22%3A320%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%92%8C%E4%B8%8D%E5%88%86%E7%A6%BB%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%20%E4%BB%80%E4%B9%88%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A261.46017%2C%22y%22%3A108.968056%2C%22width%22%3A428.44419%2C%22height%22%3A35.450464%2C%22text%22%3A%22%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%92%8C%E4%B8%8D%E5%88%86%E7%A6%BB%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%22%7D%2C%7B%22x%22%3A258.87216%2C%22y%22%3A161.79604%2C%22width%22%3A67.96960999999999%2C%22height%22%3A33.404049999999984%2C%22text%22%3A%22%E4%BB%80%E4%B9%88%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ue08c53c1%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"w7WB9\" id=\"w7WB9\"><span data-lake-id=\"u79030b4a\" id=\"u79030b4a\" style=\"color: rgb(68, 68, 68)\">一、前后端分离的概念</span></h1><h2 data-lake-id=\"f0x6q\" id=\"f0x6q\"><span data-lake-id=\"u6d672838\" id=\"u6d672838\" style=\"color: rgb(68, 68, 68)\">1、前后端分离</span></h2><ul list=\"u9db90d81\"><li fid=\"u82185a41\" data-lake-id=\"u54fe9b62\" id=\"u54fe9b62\"><span data-lake-id=\"u94f85f31\" id=\"u94f85f31\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">前后端分离是一种架构模式，说通俗点就是后端项目里面看不到页面</span><span data-lake-id=\"uc25e630b\" id=\"uc25e630b\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（JSP | HTML）</span><span data-lake-id=\"u448e4cab\" id=\"u448e4cab\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">，后端给前端提供接口，前端调用后端提供的 </span><span data-lake-id=\"uee2f7aac\" id=\"uee2f7aac\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">REST</span><span data-lake-id=\"u78fc18e4\" id=\"u78fc18e4\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\"> 风格接口就行，前端专注写页面</span><span data-lake-id=\"u87bc652d\" id=\"u87bc652d\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（html|jsp）</span><span data-lake-id=\"u6149f282\" id=\"u6149f282\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">和渲染</span><span data-lake-id=\"u44fd1b32\" id=\"u44fd1b32\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（JS|CSS|各种前端框架）</span><span data-lake-id=\"ub0b3ab09\" id=\"ub0b3ab09\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">；后端专注写代码就行。</span></li><li fid=\"u82185a41\" data-lake-id=\"u5e662c5a\" id=\"u5e662c5a\"><span data-lake-id=\"ud9eb5b52\" id=\"ud9eb5b52\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">前后端分离的核心：</span><strong><span data-lake-id=\"u0bd13f18\" id=\"u0bd13f18\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">后台提供数据，前端负责显示</span></strong></li></ul><h3 data-lake-id=\"sNiNB\" id=\"sNiNB\"><span data-lake-id=\"u31514755\" id=\"u31514755\" style=\"color: rgb(68, 68, 68)\">1、软件架构模式</span></h3><p data-lake-id=\"u66006839\" id=\"u66006839\"><span data-lake-id=\"uf19ac3f0\" id=\"uf19ac3f0\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">最熟悉</span><span data-lake-id=\"ua2c01d49\" id=\"ua2c01d49\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">MVC</span><span data-lake-id=\"u926c2fb6\" id=\"u926c2fb6\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">设计模式，</span><span data-lake-id=\"ua6102fa7\" id=\"ua6102fa7\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">Model—View-Controller</span><span data-lake-id=\"uf985c69b\" id=\"uf985c69b\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\"> 模型-视图-控制器</span></p><ul list=\"ub9e91c61\"><li fid=\"u57434122\" data-lake-id=\"u30610d9c\" id=\"u30610d9c\"><span data-lake-id=\"u851e7dcd\" id=\"u851e7dcd\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">它是怎么工作的？通俗来说：你在页面输入一个网址</span><span data-lake-id=\"ub41070c1\" id=\"ub41070c1\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（请求-Request）</span><span data-lake-id=\"u7c6efbb7\" id=\"u7c6efbb7\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">，这个网址跑到哪里去了呢？就去调用接口<br /></span><span data-lake-id=\"udc6eaab8\" id=\"udc6eaab8\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（REST风格）</span><span data-lake-id=\"u2321de26\" id=\"u2321de26\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">，这个接口其实就是访问后端的一段代码（方法），后端有很多方法。</span></li><li fid=\"u57434122\" data-lake-id=\"ub23bb573\" id=\"ub23bb573\"><span data-lake-id=\"u8db2560e\" id=\"u8db2560e\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">如何确定访问的是哪个方法？就是接口定义好的，比如：</span><span data-lake-id=\"u85474a77\" id=\"u85474a77\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">177.25.26.7/idp/user/login</span><span data-lake-id=\"u0d9bead1\" id=\"u0d9bead1\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">，这里面的</span><span data-lake-id=\"u005b2987\" id=\"u005b2987\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">idp</span><span data-lake-id=\"u4acddf46\" id=\"u4acddf46\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">就表示一<br />个服务(一个工程)，</span><span data-lake-id=\"u9e68a242\" id=\"u9e68a242\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">user</span><span data-lake-id=\"ue1ff88fa\" id=\"ue1ff88fa\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">表示一个类，</span><span data-lake-id=\"ue33de96f\" id=\"ue33de96f\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">login</span><span data-lake-id=\"u9fdf340b\" id=\"u9fdf340b\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">表示具体要调用的那个方法，你一旦回车，就直接调用了后端这个方法，后端这个方法就去数据库</span><span data-lake-id=\"u46ba4827\" id=\"u46ba4827\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（MySQL|Oracle|其他）</span><span data-lake-id=\"u53d207e3\" id=\"u53d207e3\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">取数据，数据库表中每一行数据就表示一个对象，也就是一个</span><span data-lake-id=\"u8be6e33a\" id=\"u8be6e33a\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">JavaBean</span><span data-lake-id=\"uf6cfb143\" id=\"uf6cfb143\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">，最终用</span><span data-lake-id=\"uc8c1b58f\" id=\"uc8c1b58f\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">pojo</span><span data-lake-id=\"u15a66807\" id=\"u15a66807\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">方式存到集合框架 </span><span data-lake-id=\"u6ee09eaf\" id=\"u6ee09eaf\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（List|Map|Set|等）</span><span data-lake-id=\"u09532438\" id=\"u09532438\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">中，方法把这个集合返回，那么调用这个接口的结果就是会响</span><span data-lake-id=\"uccfd6e7b\" id=\"uccfd6e7b\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（Response）</span><span data-lake-id=\"u3ead60cb\" id=\"u3ead60cb\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">给你一个结果集，前端就拿到了这个数据，然后通过页面</span><span data-lake-id=\"uce392e59\" id=\"uce392e59\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">（html|Jsp）</span><span data-lake-id=\"u4553966e\" id=\"u4553966e\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">展现出来，这个用户看到的就是</span><span data-lake-id=\"ub41ae785\" id=\"ub41ae785\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">View</span><span data-lake-id=\"ud74c3ee6\" id=\"ud74c3ee6\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">层做的事情。</span></li></ul><h2 data-lake-id=\"mAjrX\" id=\"mAjrX\"><span data-lake-id=\"u7c988cd2\" id=\"u7c988cd2\" style=\"color: rgb(68, 68, 68)\">2、前后端分离的原因</span></h2><p data-lake-id=\"udcbe979e\" id=\"udcbe979e\"><span data-lake-id=\"u6d17caf9\" id=\"u6d17caf9\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">在以前，听说 </span><span data-lake-id=\"u2d4c614a\" id=\"u2d4c614a\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">TDD (Test-driven development，测试驱动开发)</span><span data-lake-id=\"u6f80cd4b\" id=\"u6f80cd4b\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\"> 可以改善代码的质量，我们便实施了 </span><span data-lake-id=\"u817ae067\" id=\"u817ae067\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">TDD</span><span data-lake-id=\"u46f735cb\" id=\"u46f735cb\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">；接着，听说 </span><span data-lake-id=\"u3daca2c3\" id=\"u3daca2c3\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">BDD (Behavior-driven development，行为驱动开发)</span><span data-lake-id=\"u2ee11b3e\" id=\"u2ee11b3e\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\"> 可以交付符合业务需求的软件，我们便实施了 BDD；后来，听说 </span><span data-lake-id=\"ue5490039\" id=\"ue5490039\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">DDD (Domain-driven design，领域驱动设计)</span><span data-lake-id=\"ubd653e02\" id=\"ubd653e02\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\"> 可以分离业务代码与基础代码，我们便实施了 </span><span data-lake-id=\"ueae6bb1c\" id=\"ueae6bb1c\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">DDD</span><span data-lake-id=\"u41c4d530\" id=\"u41c4d530\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">。今天，听说了前后端分离很流行，于是我们就实施了前后端分离——这就是传说中的 </span><span data-lake-id=\"u36db55ac\" id=\"u36db55ac\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">HDD（Hype-driven Development，热闹驱动开发）</span><span data-lake-id=\"u4ab2e997\" id=\"u4ab2e997\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">。</span></p><p data-lake-id=\"u6c133496\" id=\"u6c133496\"><strong><span data-lake-id=\"udf87c113\" id=\"udf87c113\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">过程</span></strong><span data-lake-id=\"uda2e3c37\" id=\"uda2e3c37\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">： </span><span data-lake-id=\"u9e7c9e09\" id=\"u9e7c9e09\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">TDD -》 BDD -》 DDD =》 HDD</span></p><h2 data-lake-id=\"j8DOg\" id=\"j8DOg\"><span data-lake-id=\"u3407dcd5\" id=\"u3407dcd5\" style=\"color: rgb(68, 68, 68)\">3、前后端分离的优点</span></h2><p data-lake-id=\"u9f24b236\" id=\"u9f24b236\"><span data-lake-id=\"u77884d87\" id=\"u77884d87\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">前后端分离则可以很好的解决前后端分工不均的问题，将更多的交互逻辑分配给前端来处理，而后端则可以专注于其本职工作，比如提供</span><span data-lake-id=\"u3bf07bce\" id=\"u3bf07bce\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">API</span><span data-lake-id=\"u5416abd8\" id=\"u5416abd8\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">接口，进行权限控制以及进行运算工作。而前端开发人员则可以利用</span><span data-lake-id=\"u38ef9e9b\" id=\"u38ef9e9b\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">nodejs</span><span data-lake-id=\"ub2f0cf28\" id=\"ub2f0cf28\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">来搭建自己的本地服务器，直接在本地开发，然后通过一些插件来将</span><span data-lake-id=\"ue8c4f475\" id=\"ue8c4f475\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">api</span><span data-lake-id=\"ueff88837\" id=\"ueff88837\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">请求转发到后台，这样就可以完全模拟线上的场景，并且与后台解耦。前端可以独立完成与用户交互的整一个过程，两者都可以同时开工，不互相依赖，开发效率更快，而且分工比较均衡。</span></p><p data-lake-id=\"u4377b845\" id=\"u4377b845\"><strong><span data-lake-id=\"u3f971631\" id=\"u3f971631\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">总结优点如下：</span></strong></p><ul list=\"u63e8470d\"><li fid=\"ub2d5cf9a\" data-lake-id=\"ud6eaae5b\" id=\"ud6eaae5b\"><span data-lake-id=\"u140b1cd3\" id=\"u140b1cd3\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">提升开发效率</span></li><li fid=\"ub2d5cf9a\" data-lake-id=\"uaaa9ecc6\" id=\"uaaa9ecc6\"><span data-lake-id=\"u5c8bac7f\" id=\"u5c8bac7f\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">完美应对复杂多变的前端需求</span></li><li fid=\"ub2d5cf9a\" data-lake-id=\"ubd1fc6c0\" id=\"ubd1fc6c0\"><span data-lake-id=\"ue5db1a4d\" id=\"ue5db1a4d\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">增强代码可维护性</span></li></ul><h1 data-lake-id=\"vXkqg\" id=\"vXkqg\"><span data-lake-id=\"uc37dbff8\" id=\"uc37dbff8\" style=\"color: rgb(68, 68, 68)\">二、前后端分离和前后端不分离的区别</span></h1><h2 data-lake-id=\"I0PLn\" id=\"I0PLn\"><span data-lake-id=\"u154d4f88\" id=\"u154d4f88\" style=\"color: rgb(68, 68, 68)\">1、前后端不分离</span></h2><ul list=\"u56dfe4bc\"><li fid=\"u83f25cd0\" data-lake-id=\"uc3286488\" id=\"uc3286488\"><span data-lake-id=\"ub3a0ddc5\" id=\"ub3a0ddc5\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">在前后端不分离的应用模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。</span></li><li fid=\"u83f25cd0\" data-lake-id=\"u755335f4\" id=\"u755335f4\"><span data-lake-id=\"udef20af8\" id=\"udef20af8\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">这种应用模式比较适合纯网页应用，但是当后端对接</span><span data-lake-id=\"u09480d83\" id=\"u09480d83\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">App</span><span data-lake-id=\"uec548cd0\" id=\"uec548cd0\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">时，</span><span data-lake-id=\"uf3c46604\" id=\"uf3c46604\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">App</span><span data-lake-id=\"ucc021d99\" id=\"ucc021d99\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">可能并不需要后端返回一个</span><span data-lake-id=\"u93c2d4a0\" id=\"u93c2d4a0\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">HTML</span><span data-lake-id=\"ue34a94ed\" id=\"ue34a94ed\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端</span><span data-lake-id=\"u9929a751\" id=\"u9929a751\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">App</span><span data-lake-id=\"u8f8da469\" id=\"u8f8da469\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">应用，为了对接</span><span data-lake-id=\"u485836e8\" id=\"u485836e8\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">App</span><span data-lake-id=\"u2cbedc59\" id=\"u2cbedc59\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">后端还需再开发一套接口。</span></li></ul><h2 data-lake-id=\"WRJ9L\" id=\"WRJ9L\"><span data-lake-id=\"u8f1e0783\" id=\"u8f1e0783\" style=\"color: rgb(68, 68, 68)\">2、前后端分离</span></h2><ul list=\"u21a680f7\" data-lake-indent=\"1\"><li fid=\"u56a0738b\" data-lake-id=\"u3ef3f27f\" id=\"u3ef3f27f\"><span data-lake-id=\"u49166d32\" id=\"u49166d32\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染</span><span data-lake-id=\"u5a9ec201\" id=\"u5a9ec201\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">HTML</span><span data-lake-id=\"ud95a4975\" id=\"ud95a4975\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">页面，不再控制前端的效果。至于前端用户看到什么效果，从后端请求的数据如何加载到前端中，都由前端自己决定，网页有网页的处理方式，</span><span data-lake-id=\"u5c944902\" id=\"u5c944902\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">App</span><span data-lake-id=\"uee72f977\" id=\"uee72f977\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">有</span><span data-lake-id=\"u48c5b4cf\" id=\"u48c5b4cf\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">App</span><span data-lake-id=\"u2216eef2\" id=\"u2216eef2\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">的处理方式，但无论哪种前端，所需的数据基本相同，后端仅需开发一套逻辑对外提供数据即可。</span></li><li fid=\"u56a0738b\" data-lake-id=\"u60e7ff3e\" id=\"u60e7ff3e\"><span data-lake-id=\"u2dcf8f44\" id=\"u2dcf8f44\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">在前后端分离的应用模式中 ，前端与后端的耦合度相对较低。</span></li><li fid=\"u56a0738b\" data-lake-id=\"u53c39692\" id=\"u53c39692\"><span data-lake-id=\"u3ccc80bf\" id=\"u3ccc80bf\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">在前后端分离的应用模式中，我们通常将后端开发的每个视图都称为一个接口，或者</span><span data-lake-id=\"ue8f3298e\" id=\"ue8f3298e\" class=\"lake-fontsize-9\" style=\"color: rgb(232, 62, 140); background-color: rgb(246, 246, 246)\">API</span><span data-lake-id=\"u040033a8\" id=\"u040033a8\" class=\"lake-fontsize-11\" style=\"color: rgb(68, 68, 68)\">，前端通过访问接口来对数据进行增删改查。</span></li></ul>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 1460,
    "created_at": "2022-04-25T07:22:30.000Z",
    "updated_at": "2023-07-27T02:07:26.000Z",
    "content_updated_at": "2023-07-27T02:07:26.000Z",
    "published_at": "2022-04-25T07:26:00.000Z",
    "first_published_at": "2022-04-25T07:26:00.451Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 952364413,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 74842237,
    "type": "Doc",
    "slug": "lnhoy6",
    "title": "webman使用Nginx代理",
    "description": "tags: [webman,nginx]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net当webman需要直接提供外网访问时，建议在webman前增加一个nginx代理，这样有以下好处。静态资源由nginx处理，...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"uc3cef24a\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [webman,nginx]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"LZ81j\" class=\"ne-hr\"><p id=\"ue3b992ee\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">当webman需要直接提供外网访问时，建议在webman前增加一个nginx代理，这样有以下好处。</span></p><ul class=\"ne-ul\"><li id=\"u5f5962fb\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">静态资源由nginx处理，让webman专注业务逻辑处理</span></li><li id=\"uf89c1715\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">让多个webman共用80、443端口，通过域名区分不同站点，实现单台服务器部署多个站点</span></li><li id=\"u4664331e\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">能够实现php-fpm与webman架构共存</span></li><li id=\"u7218a819\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">nginx代理ssl实现https，更加简单高效</span></li><li id=\"ue8ebf80d\" data-lake-index-type=\"0\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">能够严格过滤外网一些不合法请求</span></li></ul><p id=\"u3a11534d\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></span></p><p id=\"u41b517f8\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">Nginx示例代码：</span></p><pre data-language=\"nginx\" id=\"gqoUo\" class=\"ne-codeblock language-nginx\"><code>upstream webman {\n    server 127.0.0.1:8877;\n}\n\nserver {\n  server_name 站点域名;\n  listen 80;\n  root /your/webman/public;\n\n  location / {\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header Host $host;\n      if (!-f $request_filename){\n          proxy_pass http://webman; #你本地的webman地址，如：127.0.0.1:8787\n      }\n  }\n}</code></pre></div>",
    "body": "tags: [webman,nginx]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n当webman需要直接提供外网访问时，建议在webman前增加一个nginx代理，这样有以下好处。\n\n- 静态资源由nginx处理，让webman专注业务逻辑处理\n- 让多个webman共用80、443端口，通过域名区分不同站点，实现单台服务器部署多个站点\n- 能够实现php-fpm与webman架构共存\n- nginx代理ssl实现https，更加简单高效\n- 能够严格过滤外网一些不合法请求\n\nNginx示例代码：\n```nginx\nupstream webman {\n    server 127.0.0.1:8877;\n}\n\nserver {\n  server_name 站点域名;\n  listen 80;\n  root /your/webman/public;\n\n  location / {\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header Host $host;\n      if (!-f $request_filename){\n          proxy_pass http://webman; #你本地的webman地址，如：127.0.0.1:8787\n      }\n  }\n}\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"uc3cef24a\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [webman,nginx]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"LZ81j\" class=\"ne-hr\"><p id=\"ue3b992ee\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">当webman需要直接提供外网访问时，建议在webman前增加一个nginx代理，这样有以下好处。</span></p><ul class=\"ne-ul\"><li id=\"u5f5962fb\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">静态资源由nginx处理，让webman专注业务逻辑处理</span></li><li id=\"uf89c1715\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">让多个webman共用80、443端口，通过域名区分不同站点，实现单台服务器部署多个站点</span></li><li id=\"u4664331e\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">能够实现php-fpm与webman架构共存</span></li><li id=\"u7218a819\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">nginx代理ssl实现https，更加简单高效</span></li><li id=\"ue8ebf80d\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">能够严格过滤外网一些不合法请求</span></li></ul><p id=\"u3a11534d\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></span></p><p id=\"u41b517f8\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">Nginx示例代码：</span></p><pre data-language=\"nginx\" id=\"gqoUo\" class=\"ne-codeblock language-nginx\">upstream webman {\n    server 127.0.0.1:8877;\n}\n\nserver {\n  server_name 站点域名;\n  listen 80;\n  root /your/webman/public;\n\n  location / {\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header Host $host;\n      if (!-f $request_filename){\n          proxy_pass http://webman; #你本地的webman地址，如：127.0.0.1:8787\n      }\n  }\n}</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"uc3cef24a\" id=\"uc3cef24a\" style=\"text-align: left\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [webman,nginx]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22LZ81j%22%7D\"></card><p data-lake-id=\"ue3b992ee\" id=\"ue3b992ee\"><span data-lake-id=\"u9e67de5b\" id=\"u9e67de5b\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">当webman需要直接提供外网访问时，建议在webman前增加一个nginx代理，这样有以下好处。</span></p><ul list=\"ubee4c952\"><li fid=\"uab9d6245\" data-lake-id=\"u5f5962fb\" id=\"u5f5962fb\" style=\"text-align: left\"><span data-lake-id=\"uec4e8777\" id=\"uec4e8777\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">静态资源由nginx处理，让webman专注业务逻辑处理</span></li><li fid=\"uab9d6245\" data-lake-id=\"uf89c1715\" id=\"uf89c1715\" style=\"text-align: left\"><span data-lake-id=\"ubd5b84f6\" id=\"ubd5b84f6\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">让多个webman共用80、443端口，通过域名区分不同站点，实现单台服务器部署多个站点</span></li><li fid=\"uab9d6245\" data-lake-id=\"u4664331e\" id=\"u4664331e\" style=\"text-align: left\"><span data-lake-id=\"u2000da60\" id=\"u2000da60\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">能够实现php-fpm与webman架构共存</span></li><li fid=\"uab9d6245\" data-lake-id=\"u7218a819\" id=\"u7218a819\" style=\"text-align: left\"><span data-lake-id=\"u25054762\" id=\"u25054762\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">nginx代理ssl实现https，更加简单高效</span></li><li fid=\"uab9d6245\" data-lake-id=\"ue8ebf80d\" id=\"ue8ebf80d\" style=\"text-align: left\"><span data-lake-id=\"ub9695304\" id=\"ub9695304\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">能够严格过滤外网一些不合法请求</span></li></ul><p data-lake-id=\"u3a11534d\" id=\"u3a11534d\" style=\"text-align: left\"><span data-lake-id=\"ubf8bbcdc\" id=\"ubf8bbcdc\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">​</span><br></p><p data-lake-id=\"u41b517f8\" id=\"u41b517f8\" style=\"text-align: left\"><span data-lake-id=\"u33c6ff03\" id=\"u33c6ff03\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">Nginx示例代码：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22nginx%22%2C%22code%22%3A%22upstream%20webman%20%7B%5Cn%20%20%20%20server%20127.0.0.1%3A8877%3B%5Cn%7D%5Cn%5Cnserver%20%7B%5Cn%20%20server_name%20%E7%AB%99%E7%82%B9%E5%9F%9F%E5%90%8D%3B%5Cn%20%20listen%2080%3B%5Cn%20%20root%20%2Fyour%2Fwebman%2Fpublic%3B%5Cn%5Cn%20%20location%20%2F%20%7B%5Cn%20%20%20%20%20%20proxy_set_header%20X-Real-IP%20%24remote_addr%3B%5Cn%20%20%20%20%20%20proxy_set_header%20Host%20%24host%3B%5Cn%20%20%20%20%20%20if%20(!-f%20%24request_filename)%7B%5Cn%20%20%20%20%20%20%20%20%20%20proxy_pass%20http%3A%2F%2Fwebman%3B%20%23%E4%BD%A0%E6%9C%AC%E5%9C%B0%E7%9A%84webman%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%A6%82%EF%BC%9A127.0.0.1%3A8787%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22gqoUo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 192,
    "created_at": "2022-04-24T08:05:47.000Z",
    "updated_at": "2023-07-27T02:07:31.000Z",
    "content_updated_at": "2023-07-27T02:07:31.000Z",
    "published_at": "2022-04-27T01:28:37.000Z",
    "first_published_at": "2022-04-24T08:07:14.543Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 956244171,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 74390345,
    "type": "Doc",
    "slug": "xlk36w",
    "title": "webman使用笔记",
    "description": "tags: [webman]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net安装webman初始备注：不要使用php8.0及以上版本（除非不用think-cache缓存插件）think-cache无法友好的支持p...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u6c5358d7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [webman]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"aUxgO\" class=\"ne-hr\"><h1 id=\"N5C04\"><span class=\"ne-text\">安装webman</span></h1><div class=\"ne-quote\"><p id=\"u90ed1279\" class=\"ne-p\"><span class=\"ne-text\">初始备注：</span></p><p id=\"uffc41d8b\" class=\"ne-p\"><span class=\"ne-text\">不要使用php8.0及以上版本（除非不用think-cache缓存插件）think-cache无法友好的支持php8.0及以上版本。</span></p><h3 id=\"xnZyg\"><span class=\"ne-text\">目前使用php7.4</span></h3></div><h2 id=\"bqafp\"><span class=\"ne-text\">composer 安装</span></h2><p id=\"uc788df29\" class=\"ne-p\"><span class=\"ne-text\">1、创建项目</span></p><pre data-language=\"shell\" id=\"IVyGS\" class=\"ne-codeblock language-shell\"><code>composer create-project workerman/webman</code></pre><p id=\"u15b733c2\" class=\"ne-p\"><span class=\"ne-text\">2、运行</span></p><p id=\"u0577962c\" class=\"ne-p\"><span class=\"ne-text\">进入webman目录</span></p><p id=\"u6bf38141\" class=\"ne-p\"><span class=\"ne-text\">debug方式运行(用于开发调试)</span></p><pre data-language=\"shell\" id=\"uZOjx\" class=\"ne-codeblock language-shell\"><code>php start.php start</code></pre><p id=\"ua5073c70\" class=\"ne-p\"><span class=\"ne-text\">daemon方式运行(用于正式环境)</span></p><pre data-language=\"shell\" id=\"EQl3D\" class=\"ne-codeblock language-shell\"><code>php start.php start -d</code></pre><p id=\"u4f52b034\" class=\"ne-p\"><span class=\"ne-text\">注意</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\">webman从1.2.3版本开始专门为windows系统提供了启动脚本(需要为php配置好环境变量)，windows用户请双击windows.bat即可启动webman，或者运行 </span><span class=\"ne-text\">php windows.php</span><span class=\"ne-text\">启动webman。</span></p><p id=\"u59d9eb68\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"uc0f90e8a\" class=\"ne-p\"><span class=\"ne-text\">3、访问</span></p><p id=\"u07d95476\" class=\"ne-p\"><span class=\"ne-text\">浏览器访问 </span><span class=\"ne-text\">http://ip地址:8787</span></p><p id=\"u54e57c00\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"AX7yU\"><span class=\"ne-text\">基础功能</span></h1><h2 id=\"NMJpd\"><span class=\"ne-text\">需要安装的composer扩展（默认以熟悉的tp为主）</span></h2><h3 id=\"GdWYq\"><span class=\"ne-text\">安装think-template</span></h3><p id=\"u697564aa\" class=\"ne-p\"><span class=\"ne-text\">1、composer安装</span></p><pre data-language=\"shell\" id=\"Eh3L3\" class=\"ne-codeblock language-shell\"><code>composer require topthink/think-template</code></pre><p id=\"u7b4582b8\" class=\"ne-p\"><span class=\"ne-text\">2、修改配置</span><span class=\"ne-text\">config/view.php</span><span class=\"ne-text\">为</span></p><pre data-language=\"php\" id=\"VdQAo\" class=\"ne-codeblock language-php\"><code>&lt;?php\nuse support\\view\\ThinkPHP;\n\nreturn [\n    'handler' =&gt; ThinkPHP::class,\n];</code></pre><div class=\"ne-quote\"><p id=\"udc5ce02d\" class=\"ne-p\"><span class=\"ne-text\">提示</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\">其它配置选项通过options传入，例如</span></p></div><pre data-language=\"php\" id=\"UZ4CM\" class=\"ne-codeblock language-php\"><code>return [\n    'handler' =&gt; ThinkPHP::class,\n    'options' =&gt; [\n        'view_suffix' =&gt; 'html',\n        'tpl_begin' =&gt; '{',\n        'tpl_end' =&gt; '}'\n    ]\n];</code></pre><p id=\"uf6a8b6e7\" class=\"ne-p\"><span class=\"ne-text\">3、thinkphp模板的例子</span></p><p id=\"uef5fb54d\" class=\"ne-p\"><span class=\"ne-text\">修改配置</span><span class=\"ne-text\">config/view.php</span><span class=\"ne-text\">为</span></p><pre data-language=\"php\" id=\"UNSJD\" class=\"ne-codeblock language-php\"><code>&lt;?php\nuse support\\view\\ThinkPHP;\n\nreturn [\n    'handler' =&gt; ThinkPHP::class\n];</code></pre><p id=\"u1e55cf71\" class=\"ne-p\"><span class=\"ne-text\">app/controller/User.php 如下</span></p><pre data-language=\"php\" id=\"BEevI\" class=\"ne-codeblock language-php\"><code>&lt;?php\nnamespace app\\controller;\n\nuse support\\Request;\n\nclass User\n{\n    public function hello(Request $request)\n    {\n        return view('user/hello', ['name' =&gt; 'webman']);\n    }\n}</code></pre><p id=\"u8ee4f3a7\" class=\"ne-p\"><span class=\"ne-text\">文件 </span><span class=\"ne-text\">app/view/user/hello.html</span><span class=\"ne-text\"> 如下</span></p><pre data-language=\"php\" id=\"MIyQC\" class=\"ne-codeblock language-php\"><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;title&gt;webman&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\nhello {$name}\n&lt;/body&gt;\n&lt;/html&gt;</code></pre><p id=\"u8baf2b3f\" class=\"ne-p\"><span class=\"ne-text\">更多文档参考 </span><a href=\"https://www.kancloud.cn/manual/think-template/content\" data-href=\"https://www.kancloud.cn/manual/think-template/content\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">think-template</span></a></p><p id=\"uf23877c3\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"LC2Ne\"><span class=\"ne-text\">安装ThinkORM</span></h3><pre data-language=\"shell\" id=\"cz5iv\" class=\"ne-codeblock language-shell\"><code>composer -W require webman/think-orm</code></pre><p id=\"u8a3e5038\" class=\"ne-p\"><span class=\"ne-text\">经测试实际安装此扩展会报错，所以我们使用手动安装并配置think-orm。</span></p><p id=\"ud109e29c\" class=\"ne-p\"><a href=\"https://www.workerman.net/plugin/14\" data-href=\"https://www.workerman.net/plugin/14\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">webman/think-orm</span></a><span class=\"ne-text\"> 实际上是一个自动化安装toptink/think-orm 的插件，如果你的webman版本低于1.2无法使用插件请参考文章</span><a href=\"https://www.workerman.net/a/1289\" data-href=\"https://www.workerman.net/a/1289\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">手动安装并配置think-orm</span></a><span class=\"ne-text\">。</span></p><p id=\"u2662d901\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"MDMfP\"><span class=\"ne-text\">安装ThinkCache</span></h3><pre data-language=\"shell\" id=\"trS21\" class=\"ne-codeblock language-shell\"><code>composer -W require webman/think-cache</code></pre><p id=\"uf06c74c2\" class=\"ne-p\"><a href=\"https://www.workerman.net/plugin/15\" data-href=\"https://www.workerman.net/plugin/15\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">webman/think-cache</span></a><span class=\"ne-text\"> 实际上是一个自动化安装</span><span class=\"ne-text\">toptink/think-cache</span><span class=\"ne-text\"> 的插件。</span></p><p id=\"u89ad060e\" class=\"ne-p\"><span class=\"ne-text\">暂对php8.0及以上不友好，安装后使用会报错。</span></p><h4 id=\"JsjVw\"><span class=\"ne-text\">配置文件</span></h4><p id=\"udb00e65e\" class=\"ne-p\"><span class=\"ne-text\">配置文件为 </span><span class=\"ne-text\">config/thinkcache.php</span></p><h4 id=\"bhGKS\"><span class=\"ne-text\">使用</span></h4><pre data-language=\"php\" id=\"xUIum\" class=\"ne-codeblock language-php\"><code> &lt;?php\n  namespace app\\controller;\n\n  use support\\Request;\n  use think\\facade\\Cache;\n\n  class User\n  {\n      public function db(Request $request)\n      {\n          $key = 'test_key';\n          Cache::set($key, rand());\n          return response(Cache::get($key));\n      }\n  }</code></pre><h4 id=\"a9eFP\"><span class=\"ne-text\">Think-Cache使用文档</span></h4><p id=\"u2c2f459e\" class=\"ne-p\"><a href=\"https://github.com/top-think/think-cache\" data-href=\"https://github.com/top-think/think-cache\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ThinkCache文档地址</span></a></p><p id=\"u789a8548\" class=\"ne-p\"><br></p><h3 id=\"lzdQK\"><span class=\"ne-text\">安装redis组件</span></h3><p id=\"u2a9c3063\" class=\"ne-p\"><span class=\"ne-text\">webman的redis组件默认使用的是</span><a href=\"https://github.com/illuminate/redis\" data-href=\"https://github.com/illuminate/redis\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">illuminate/redis</span></a><span class=\"ne-text\">，也就是laravel的redis库，用法与laravel相同。</span></p><p id=\"ufac87fd0\" class=\"ne-p\"><span class=\"ne-text\">使用</span><span class=\"ne-text\">illuminate/redis</span><span class=\"ne-text\">之前必须先给</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">安装redis扩展。</span></p><div class=\"ne-quote\"><p id=\"ue225956c\" class=\"ne-p\"><span class=\"ne-text\">使用命令</span><span class=\"ne-text\">php -m | grep redis</span><span class=\"ne-text\">查看</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">是否装了redis扩展。注意：即使你在</span><span class=\"ne-text\">php-fpm</span><span class=\"ne-text\">安装了redis扩展，不代表你在</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">可以使用它，因为</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">和</span><span class=\"ne-text\">php-fpm</span><span class=\"ne-text\">是不同的应用程序，可能使用的是不同的</span><span class=\"ne-text\">php.ini</span><span class=\"ne-text\">配置。使用命令</span><span class=\"ne-text\">php --ini</span><span class=\"ne-text\">来查看你的</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">使用的是哪个</span><span class=\"ne-text\">php.ini</span><span class=\"ne-text\">配置文件。</span></p></div><h4 id=\"NnReV\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"mKfqg\" class=\"ne-codeblock language-shell\"><code>composer require -W illuminate/redis</code></pre><pre data-language=\"php\" id=\"Bzm2L\" class=\"ne-codeblock language-php\"><code>## 配置\nredis配置文件在`config/redis.php`\n```php\nreturn [\n    'default' =&gt; [\n        'host'     =&gt; '127.0.0.1',\n        'password' =&gt; null,\n        'port'     =&gt; 6379,\n        'database' =&gt; 0,\n    ]\n];</code></pre><h4 id=\"mrrSI\"><span class=\"ne-text\">示例</span></h4><pre data-language=\"php\" id=\"WyGaj\" class=\"ne-codeblock language-php\"><code>&lt;?php\nnamespace app\\controller;\n\nuse support\\Request;\nuse support\\Redis;\n\nclass User\n{\n    public function db(Request $request)\n    {\n        $key = 'test_key';\n        Redis::set($key, rand());\n        return response(Redis::get($key));\n    }\n}</code></pre><h4 id=\"CJpNM\"><span class=\"ne-text\">具体使用教程：</span></h4><p id=\"uc1cb24f3\" class=\"ne-p\"><a href=\"https://www.workerman.net/doc/webman/db/redis.html\" data-href=\"https://www.workerman.net/doc/webman/db/redis.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://www.workerman.net/doc/webman/db/redis.html</span></a></p><p id=\"u043053e2\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"ea18q\"><span class=\"ne-text\">安装think验证器</span></h3><h3 id=\"Abx37\"><span class=\"ne-text\">安装</span></h3><pre data-language=\"shell\" id=\"SVea7\" class=\"ne-codeblock language-shell\"><code>composer require topthink/think-validate</code></pre><div class=\"ne-quote\"><p id=\"u3ef7f08c\" class=\"ne-p\"><span class=\"ne-text\">验证器也不支持php8.0及以上，如果需要支持需要自行查找更多方案。</span></p></div><h4 id=\"KcPSC\"><span class=\"ne-text\">基本用法</span></h4><pre data-language=\"php\" id=\"X2j4T\" class=\"ne-codeblock language-php\"><code>&lt;?php\nnamespace app\\index\\validate;\n\nuse Tinywan\\Validate\\Validate;\n\nclass UserValidate extends Validate\n{\n    protected $rule =   [\n        'name'  =&gt; 'require|max:25',\n        'age'   =&gt; 'require|number|between:1,120',\n        'email' =&gt; 'require|email'\n    ];\n\n    protected $message  =   [\n        'name.require' =&gt; '名称必须',\n        'name.max'     =&gt; '名称最多不能超过25个字符',\n        'age.require'   =&gt; '年龄必须是数字',\n        'age.number'   =&gt; '年龄必须是数字',\n        'age.between'  =&gt; '年龄只能在1-120之间',\n        'email.require'        =&gt; '邮箱必须是数字',\n        'email.email'        =&gt; '邮箱格式错误'\n    ];\n}</code></pre><p id=\"ua8f19fee\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">验证器调用代码如下：</span></p><pre data-language=\"php\" id=\"uRHH6\" class=\"ne-codeblock language-php\"><code>$data = [\n    'name'  =&gt; 'Tinywan',\n    'age'  =&gt; 24,\n    'email' =&gt; 'Tinywan@163.com'\n];\n$validate = new \\app\\index\\validate\\UserValidate;\n\nif (!$validate-&gt;check($data)) {\n    var_dump($validate-&gt;getError());\n}</code></pre><p id=\"u89b218a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">更多用法可以参考6.0完全开发手册的</span><a href=\"https://www.kancloud.cn/manual/thinkphp6_0/1037623\" data-href=\"https://www.kancloud.cn/manual/thinkphp6_0/1037623\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">验证</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">章节</span></p><p id=\"u6b7e1a89\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></span></p><h3 id=\"rlWQf\"><span class=\"ne-text\">安装验证码</span></h3><h4 id=\"LR7LK\"><span class=\"ne-text\">gregwar/captcha</span></h4><p id=\"u3d71f017\" class=\"ne-p\"><span class=\"ne-text\">项目地址 </span><a href=\"https://github.com/Gregwar/Captcha\" data-href=\"https://github.com/Gregwar/Captcha\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/Gregwar/Captcha</span></a></p><h4 id=\"TfQcz\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"ppBCy\" class=\"ne-codeblock language-shell\"><code>composer require gregwar/captcha 1.*</code></pre><h4 id=\"zvZRk\"><span class=\"ne-text\">基本使用1</span></h4><p id=\"u829bf292\" class=\"ne-p\"><strong><span class=\"ne-text\">建立文件 app/controller/Login.php</span></strong></p><pre data-language=\"php\" id=\"Z281b\" class=\"ne-codeblock language-php\"><code>&lt;?php\nnamespace app\\controller;\n\nuse support\\Request;\nuse Gregwar\\Captcha\\CaptchaBuilder;\n\nclass Login\n{\n    /**\n     * 测试页面\n     */\n    public function index(Request $request)\n    {\n        return view('login/index');\n    }\n\n    /**\n     * 输出验证码图像\n     */\n    public function captcha(Request $request)\n    {\n        // 初始化验证码类\n        $builder = new CaptchaBuilder;\n        // 生成验证码\n        $builder-&gt;build();\n        // 将验证码的值存储到session中\n        $request-&gt;session()-&gt;set('captcha', strtolower($builder-&gt;getPhrase()));\n        // 获得验证码图片二进制数据\n        $img_content = $builder-&gt;get();\n        // 输出验证码二进制数据\n        return response($img_content, 200, ['Content-Type' =&gt; 'image/jpeg']);\n    }\n\n    /**\n     * 检查验证码\n     */\n    public function check(Request $request)\n    {\n        // 获取post请求中的captcha字段\n        $captcha = $request-&gt;post('captcha');\n        // 对比session中的captcha值\n        if (strtolower($captcha) !== $request-&gt;session()-&gt;get('captcha')) {\n            return json(['code' =&gt; 400, 'msg' =&gt; '输入的验证码不正确']);\n        }\n        return json(['code' =&gt; 0, 'msg' =&gt; 'ok']);\n    }\n\n}</code></pre><p id=\"uaa9b90d9\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(44, 62, 80) !important; font-size: 16px\">建立模版文件</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">app/view/login/index.html</span></strong></p><pre data-language=\"html\" id=\"Vo6r2\" class=\"ne-codeblock language-html\"><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;title&gt;验证码测试&lt;/title&gt;  \n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form method=&quot;post&quot; action=&quot;/login/check&quot;&gt;\n       &lt;img src=&quot;/login/captcha&quot; /&gt;&lt;br&gt;\n        &lt;input type=&quot;text&quot; name=&quot;captcha&quot; /&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre><h4 id=\"PFl5v\"><span class=\"ne-text\">基本使用2 （直接在控制器里使用并验证）</span></h4><pre data-language=\"php\" id=\"IVUvx\" class=\"ne-codeblock language-php\"><code>\n$this-&gt;validate = new \\think\\Validate();\n$param = $request-&gt;all();\n\n$this-&gt;validate-&gt;rule([\n    'captcha|验证码'   =&gt; 'require',\n    'uniqid|uniqid' =&gt; 'require',\n    'username|用户名'  =&gt; 'require',\n    'password|密码'   =&gt; 'require',\n]);\n$this-&gt;validate-&gt;message([\n    'captcha.require'  =&gt; '验证码不能为空',\n    'uniqid.require'   =&gt; 'uniqid不能为空',\n    'username.require' =&gt; '登录名不能为空',\n    'password.require' =&gt; '密码不能为空',\n]);\nif ( ! $this-&gt;validate-&gt;check($param)) {\n    return json($this-&gt;validate-&gt;getError());\n}</code></pre><h3 id=\"f0Slx\"></h3><p id=\"u7870fe8e\" class=\"ne-p\"><br></p><h3 id=\"J9rQA\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">webman/casbin权限控制插件</span></h3><h4 id=\"zORzd\"><span class=\"ne-text\">简介</span></h4><p id=\"u93fff3b8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">webman casbin 权限控制插件。它基于 </span><a href=\"https://github.com/php-casbin/php-casbin\" data-href=\"https://github.com/php-casbin/php-casbin\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">PHP-Casbin</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">, 一个强大的、高效的开源访问控制框架，支持基于</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">ACL</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">RBAC</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">ABAC</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">等访问控制模型。</span></p><h4 id=\"xk2uh\"><span class=\"ne-text\">依赖</span></h4><ul class=\"ne-ul\"><li id=\"ub7c3fdce\" data-lake-index-type=\"0\" style=\"text-align: left\"><a href=\"https://www.workerman.net/doc/webman/db/others.html\" data-href=\"https://www.workerman.net/doc/webman/db/others.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ThinkORM</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">（默认）</span></li><li id=\"u39fa47de\" data-lake-index-type=\"0\" style=\"text-align: left\"><a href=\"https://github.com/PHP-DI/PHP-DI\" data-href=\"https://github.com/PHP-DI/PHP-DI\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">PHP-DI</span></a></li><li id=\"ua4a224d6\" data-lake-index-type=\"0\" style=\"text-align: left\"><a href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" data-href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">illuminate/database</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">（可选）</span></li></ul><p id=\"u1051921b\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></span></p><h4 id=\"sVRFJ\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"prTIQ\" class=\"ne-codeblock language-shell\"><code>composer require casbin/webman-permission</code></pre><h4 id=\"uzenz\"><span class=\"ne-text\">使用</span></h4><ol class=\"ne-ol\"><li id=\"uda5fa183\" data-lake-index-type=\"0\"><span class=\"ne-text\">依赖注入配置<br /></span><span class=\"ne-text\">修改配置config/container.php，其最终内容如下：</span></li></ol><pre data-language=\"php\" id=\"W2M9q\" class=\"ne-codeblock language-php\"><code>$builder = new \\DI\\ContainerBuilder();\n$builder-&gt;addDefinitions(config('dependence', []));\n$builder-&gt;useAutowiring(true);\nreturn $builder-&gt;build();</code></pre><p id=\"ub3cefb28\" class=\"ne-p\"><br></p><p id=\"u46784286\" class=\"ne-p\"><span class=\"ne-text\">2. 数据库配置</span></p><div class=\"ne-quote\"><p id=\"uad0dd107\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">默认策略存储是使用的ThinkORM。 如使用 laravel的数据库 illuminate/database，请按照官方文档按照相应的依赖包：</span><a href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" data-href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://www.workerman.net/doc/webman/db/tutorial.html</span></a></p></div><div class=\"ne-quote\"></div><p id=\"ub9ce0c63\" class=\"ne-p\"><br></p><p id=\"uae812ddb\" class=\"ne-p\"><span class=\"ne-text\">🚀 (1) 模型配置<br /></span><span class=\"ne-text\">📒📒📒 使用ThinkORM（默认） 📒📒📒</span></p><p id=\"u319d96ab\" class=\"ne-p\"><br></p><p id=\"u4858bf40\" class=\"ne-p\"><span class=\"ne-text\">修改数据库 thinkorm.php 配置<br /></span><span class=\"ne-text\">📕📕📕 使用laravel数据库（可选） 📕📕📕</span></p><p id=\"ud9f12b1d\" class=\"ne-p\"><br></p><p id=\"u603c6803\" class=\"ne-p\"><span class=\"ne-text\">修改数据库 database.php 配置<br /></span><span class=\"ne-text\">修改数据库 permission.php 的adapter适配器为laravel适配器</span></p><p id=\"u5eece00b\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u047d2742\" class=\"ne-p\"><span class=\"ne-text\">(2) 创建 casbin_rule 数据表</span></p><pre data-language=\"sql\" id=\"psQw0\" class=\"ne-codeblock language-sql\"><code>CREATE TABLE `casbin_rule` (\n\t`id` BIGINT ( 20 ) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t`ptype` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v0` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v1` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v2` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v3` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v4` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v5` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\tPRIMARY KEY ( `id` ) USING BTREE,\n\tKEY `idx_ptype` ( `ptype` ) USING BTREE,\n\tKEY `idx_v0` ( `v0` ) USING BTREE,\n\tKEY `idx_v1` ( `v1` ) USING BTREE,\n\tKEY `idx_v2` ( `v2` ) USING BTREE,\n\tKEY `idx_v3` ( `v3` ) USING BTREE,\n\tKEY `idx_v4` ( `v4` ) USING BTREE,\n    KEY `idx_v5` ( `v5` ) USING BTREE \n) ENGINE = INNODB CHARSET = utf8mb4 COMMENT = '策略规则表';</code></pre><p id=\"u86ba4b5d\" class=\"ne-p\"><span class=\"ne-text\">(3) 配置 config/redis 配置</span></p><p id=\"u88319397\" class=\"ne-p\"><span class=\"ne-text\">重启webman</span></p><pre data-language=\"shell\" id=\"IrN1P\" class=\"ne-codeblock language-shell\"><code>php start.php restart</code></pre><p id=\"u152b2f46\" class=\"ne-p\"><span class=\"ne-text\">或者</span></p><pre data-language=\"shell\" id=\"vBQwi\" class=\"ne-codeblock language-shell\"><code>php start.php restart -d</code></pre><h4 id=\"wJI2f\"><span class=\"ne-text\">用法</span></h4><p id=\"u2e5494b1\" class=\"ne-p\"><span class=\"ne-text\">安装成功后，可以这样使用:</span></p><pre data-language=\"php\" id=\"FXsuH\" class=\"ne-codeblock language-php\"><code>use Tinywan\\Casbin\\Permission;\n\n// adds permissions to a user\nPermission::addPermissionForUser('eve', 'articles', 'read');\n// adds a role for a user.\nPermission::addRoleForUser('eve', 'writer');\n// adds permissions to a rule\nPermission::addPolicy('writer', 'articles','edit');</code></pre><p id=\"udc2550e9\" class=\"ne-p\"><span class=\"ne-text\">你可以检查一个用户是否拥有某个权限:</span></p><pre data-language=\"php\" id=\"ZvQFh\" class=\"ne-codeblock language-php\"><code>if (Permission::enforce(&quot;eve&quot;, &quot;articles&quot;, &quot;edit&quot;)) {\n    echo '恭喜你！通过权限认证';\n} else {\n    echo '对不起，您没有该资源访问权限';\n}</code></pre><h4 id=\"rtRl1\"><span class=\"ne-text\">具体教程：</span></h4><p id=\"u10f31d5c\" class=\"ne-p\"><a href=\"https://github.com/php-casbin/webman-permission\" data-href=\"https://github.com/php-casbin/webman-permission\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/php-casbin/webman-permission</span></a></p><p id=\"uf33518b8\" class=\"ne-p\"><span class=\"ne-text\">更多 API 参考 </span><a href=\"https://casbin.org/docs/en/management-api\" data-href=\"https://casbin.org/docs/en/management-api\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Casbin API</span></a><span class=\"ne-text\"> 。</span></p><p id=\"u660e87b0\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"tuBsI\"><span class=\"ne-text\">路由自动解析</span></h3><p id=\"u0168610e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">当app目录结构非常复杂，webman无法自动解析时可以安装webman的</span><a href=\"https://www.workerman.net/plugin/17\" data-href=\"https://www.workerman.net/plugin/17\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">自动路由插件</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">，它会自动检索所有的控制器并为其自动配置对应的路由，让其通过url可以访问。</span></p><h4 id=\"nH9pF\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"Hteq3\" class=\"ne-codeblock language-shell\"><code>composer require webman/auto-route</code></pre><div class=\"ne-quote\"><p id=\"ueec470e6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\">提示</span></strong><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\">你仍然可以在</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">config/route.php</span><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\">中手动设置某些路由，自动路由插件会优先使用</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">config/route.php</span><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\"> 里的配置。</span></p></div><p id=\"ue9341e87\" class=\"ne-p\"><br></p></div>",
    "body": "tags: [webman]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"N5C04\"></a>\n# 安装webman\n> 初始备注：\n> 不要使用php8.0及以上版本（除非不用think-cache缓存插件）think-cache无法友好的支持php8.0及以上版本。\n> <a name=\"xnZyg\"></a>\n### 目前使用php7.4\n\n<a name=\"bqafp\"></a>\n## composer 安装\n1、创建项目\n```shell\ncomposer create-project workerman/webman\n```\n2、运行<br />进入webman目录<br />debug方式运行(用于开发调试)\n```shell\nphp start.php start\n```\ndaemon方式运行(用于正式环境)\n```shell\nphp start.php start -d\n```\n注意<br />webman从1.2.3版本开始专门为windows系统提供了启动脚本(需要为php配置好环境变量)，windows用户请双击windows.bat即可启动webman，或者运行 php windows.php启动webman。\n\n3、访问<br />浏览器访问 http://ip地址:8787\n\n<a name=\"AX7yU\"></a>\n# 基础功能\n<a name=\"NMJpd\"></a>\n## 需要安装的composer扩展（默认以熟悉的tp为主）\n<a name=\"GdWYq\"></a>\n### 安装think-template\n1、composer安装\n```shell\ncomposer require topthink/think-template\n```\n2、修改配置config/view.php为\n```php\n<?php\nuse support\\view\\ThinkPHP;\n\nreturn [\n    'handler' => ThinkPHP::class,\n];\n```\n> 提示<br />其它配置选项通过options传入，例如\n\n```php\nreturn [\n    'handler' => ThinkPHP::class,\n    'options' => [\n        'view_suffix' => 'html',\n        'tpl_begin' => '{',\n        'tpl_end' => '}'\n    ]\n];\n```\n3、thinkphp模板的例子<br />修改配置config/view.php为\n```php\n<?php\nuse support\\view\\ThinkPHP;\n\nreturn [\n    'handler' => ThinkPHP::class\n];\n```\napp/controller/User.php 如下\n```php\n<?php\nnamespace app\\controller;\n\nuse support\\Request;\n\nclass User\n{\n    public function hello(Request $request)\n    {\n        return view('user/hello', ['name' => 'webman']);\n    }\n}\n```\n文件 app/view/user/hello.html 如下\n```php\n<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>webman</title>\n</head>\n<body>\nhello {$name}\n</body>\n</html>\n```\n更多文档参考 [think-template](https://www.kancloud.cn/manual/think-template/content)\n\n<a name=\"LC2Ne\"></a>\n### 安装ThinkORM\n```shell\ncomposer -W require webman/think-orm\n```\n经测试实际安装此扩展会报错，所以我们使用手动安装并配置think-orm。<br />[webman/think-orm](https://www.workerman.net/plugin/14) 实际上是一个自动化安装toptink/think-orm 的插件，如果你的webman版本低于1.2无法使用插件请参考文章[手动安装并配置think-orm](https://www.workerman.net/a/1289)。\n\n<a name=\"MDMfP\"></a>\n### 安装ThinkCache\n```shell\ncomposer -W require webman/think-cache\n```\n[webman/think-cache](https://www.workerman.net/plugin/15) 实际上是一个自动化安装toptink/think-cache 的插件。<br />暂对php8.0及以上不友好，安装后使用会报错。\n<a name=\"JsjVw\"></a>\n#### 配置文件\n配置文件为 config/thinkcache.php\n<a name=\"bhGKS\"></a>\n#### 使用\n```php\n <?php\n  namespace app\\controller;\n\n  use support\\Request;\n  use think\\facade\\Cache;\n\n  class User\n  {\n      public function db(Request $request)\n      {\n          $key = 'test_key';\n          Cache::set($key, rand());\n          return response(Cache::get($key));\n      }\n  }\n```\n<a name=\"a9eFP\"></a>\n#### Think-Cache使用文档\n[ThinkCache文档地址](https://github.com/top-think/think-cache)\n\n<a name=\"lzdQK\"></a>\n### 安装redis组件\nwebman的redis组件默认使用的是[illuminate/redis](https://github.com/illuminate/redis)，也就是laravel的redis库，用法与laravel相同。<br />使用illuminate/redis之前必须先给php-cli安装redis扩展。\n> 使用命令php -m | grep redis查看php-cli是否装了redis扩展。注意：即使你在php-fpm安装了redis扩展，不代表你在php-cli可以使用它，因为php-cli和php-fpm是不同的应用程序，可能使用的是不同的php.ini配置。使用命令php --ini来查看你的php-cli使用的是哪个php.ini配置文件。\n\n<a name=\"NnReV\"></a>\n#### 安装\n```shell\ncomposer require -W illuminate/redis\n```\n```php\n## 配置\nredis配置文件在`config/redis.php`\n```php\nreturn [\n    'default' => [\n        'host'     => '127.0.0.1',\n        'password' => null,\n        'port'     => 6379,\n        'database' => 0,\n    ]\n];\n```\n<a name=\"mrrSI\"></a>\n#### 示例\n```php\n<?php\nnamespace app\\controller;\n\nuse support\\Request;\nuse support\\Redis;\n\nclass User\n{\n    public function db(Request $request)\n    {\n        $key = 'test_key';\n        Redis::set($key, rand());\n        return response(Redis::get($key));\n    }\n}\n```\n<a name=\"CJpNM\"></a>\n#### 具体使用教程：\n[https://www.workerman.net/doc/webman/db/redis.html](https://www.workerman.net/doc/webman/db/redis.html)\n\n<a name=\"ea18q\"></a>\n### 安装think验证器\n<a name=\"Abx37\"></a>\n### 安装\n```shell\ncomposer require topthink/think-validate\n```\n> 验证器也不支持php8.0及以上，如果需要支持需要自行查找更多方案。\n\n<a name=\"KcPSC\"></a>\n#### 基本用法\n```php\n<?php\nnamespace app\\index\\validate;\n\nuse Tinywan\\Validate\\Validate;\n\nclass UserValidate extends Validate\n{\n    protected $rule =   [\n        'name'  => 'require|max:25',\n        'age'   => 'require|number|between:1,120',\n        'email' => 'require|email'\n    ];\n\n    protected $message  =   [\n        'name.require' => '名称必须',\n        'name.max'     => '名称最多不能超过25个字符',\n        'age.require'   => '年龄必须是数字',\n        'age.number'   => '年龄必须是数字',\n        'age.between'  => '年龄只能在1-120之间',\n        'email.require'        => '邮箱必须是数字',\n        'email.email'        => '邮箱格式错误'\n    ];\n}\n```\n验证器调用代码如下：\n```php\n$data = [\n    'name'  => 'Tinywan',\n    'age'  => 24,\n    'email' => 'Tinywan@163.com'\n];\n$validate = new \\app\\index\\validate\\UserValidate;\n\nif (!$validate->check($data)) {\n    var_dump($validate->getError());\n}\n```\n更多用法可以参考6.0完全开发手册的[验证](https://www.kancloud.cn/manual/thinkphp6_0/1037623)章节\n\n<a name=\"rlWQf\"></a>\n### 安装验证码\n<a name=\"LR7LK\"></a>\n#### gregwar/captcha\n项目地址 [https://github.com/Gregwar/Captcha](https://github.com/Gregwar/Captcha)\n<a name=\"TfQcz\"></a>\n#### 安装\n```shell\ncomposer require gregwar/captcha 1.*\n```\n<a name=\"zvZRk\"></a>\n#### 基本使用1\n**建立文件 app/controller/Login.php**\n```php\n<?php\nnamespace app\\controller;\n\nuse support\\Request;\nuse Gregwar\\Captcha\\CaptchaBuilder;\n\nclass Login\n{\n    /**\n     * 测试页面\n     */\n    public function index(Request $request)\n    {\n        return view('login/index');\n    }\n\n    /**\n     * 输出验证码图像\n     */\n    public function captcha(Request $request)\n    {\n        // 初始化验证码类\n        $builder = new CaptchaBuilder;\n        // 生成验证码\n        $builder->build();\n        // 将验证码的值存储到session中\n        $request->session()->set('captcha', strtolower($builder->getPhrase()));\n        // 获得验证码图片二进制数据\n        $img_content = $builder->get();\n        // 输出验证码二进制数据\n        return response($img_content, 200, ['Content-Type' => 'image/jpeg']);\n    }\n\n    /**\n     * 检查验证码\n     */\n    public function check(Request $request)\n    {\n        // 获取post请求中的captcha字段\n        $captcha = $request->post('captcha');\n        // 对比session中的captcha值\n        if (strtolower($captcha) !== $request->session()->get('captcha')) {\n            return json(['code' => 400, 'msg' => '输入的验证码不正确']);\n        }\n        return json(['code' => 0, 'msg' => 'ok']);\n    }\n\n}\n```\n**建立模版文件app/view/login/index.html**\n```html\n<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>验证码测试</title>  \n</head>\n<body>\n    <form method=\"post\" action=\"/login/check\">\n       <img src=\"/login/captcha\" /><br>\n        <input type=\"text\" name=\"captcha\" />\n        <input type=\"submit\" value=\"提交\" />\n    </form>\n</body>\n</html>\n```\n<a name=\"PFl5v\"></a>\n#### 基本使用2 （直接在控制器里使用并验证）\n```php\n\n$this->validate = new \\think\\Validate();\n$param = $request->all();\n\n$this->validate->rule([\n    'captcha|验证码'   => 'require',\n    'uniqid|uniqid' => 'require',\n    'username|用户名'  => 'require',\n    'password|密码'   => 'require',\n]);\n$this->validate->message([\n    'captcha.require'  => '验证码不能为空',\n    'uniqid.require'   => 'uniqid不能为空',\n    'username.require' => '登录名不能为空',\n    'password.require' => '密码不能为空',\n]);\nif ( ! $this->validate->check($param)) {\n    return json($this->validate->getError());\n}\n```\n<a name=\"f0Slx\"></a>\n### \n\n<a name=\"J9rQA\"></a>\n### webman/casbin权限控制插件\n<a name=\"zORzd\"></a>\n#### 简介\nwebman casbin 权限控制插件。它基于 [PHP-Casbin](https://github.com/php-casbin/php-casbin), 一个强大的、高效的开源访问控制框架，支持基于ACL, RBAC, ABAC等访问控制模型。\n<a name=\"xk2uh\"></a>\n#### 依赖\n\n- [ThinkORM](https://www.workerman.net/doc/webman/db/others.html)（默认）\n- [PHP-DI](https://github.com/PHP-DI/PHP-DI)\n- [illuminate/database](https://www.workerman.net/doc/webman/db/tutorial.html)（可选）\n\n<a name=\"sVRFJ\"></a>\n#### 安装\n```shell\ncomposer require casbin/webman-permission\n```\n<a name=\"uzenz\"></a>\n#### 使用\n\n1. 依赖注入配置<br />修改配置config/container.php，其最终内容如下：\n```php\n$builder = new \\DI\\ContainerBuilder();\n$builder->addDefinitions(config('dependence', []));\n$builder->useAutowiring(true);\nreturn $builder->build();\n```\n\n2. 数据库配置\n> <br />默认策略存储是使用的ThinkORM。 如使用 laravel的数据库 illuminate/database，请按照官方文档按照相应的依赖包：[https://www.workerman.net/doc/webman/db/tutorial.html](https://www.workerman.net/doc/webman/db/tutorial.html)\n\n\n\n🚀 (1) 模型配置<br />📒📒📒 使用ThinkORM（默认） 📒📒📒\n\n修改数据库 thinkorm.php 配置<br />📕📕📕 使用laravel数据库（可选） 📕📕📕\n\n修改数据库 database.php 配置<br />修改数据库 permission.php 的adapter适配器为laravel适配器\n\n(2) 创建 casbin_rule 数据表\n```sql\nCREATE TABLE `casbin_rule` (\n\t`id` BIGINT ( 20 ) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t`ptype` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v0` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v1` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v2` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v3` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v4` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v5` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\tPRIMARY KEY ( `id` ) USING BTREE,\n\tKEY `idx_ptype` ( `ptype` ) USING BTREE,\n\tKEY `idx_v0` ( `v0` ) USING BTREE,\n\tKEY `idx_v1` ( `v1` ) USING BTREE,\n\tKEY `idx_v2` ( `v2` ) USING BTREE,\n\tKEY `idx_v3` ( `v3` ) USING BTREE,\n\tKEY `idx_v4` ( `v4` ) USING BTREE,\n    KEY `idx_v5` ( `v5` ) USING BTREE \n) ENGINE = INNODB CHARSET = utf8mb4 COMMENT = '策略规则表';\n```\n(3) 配置 config/redis 配置<br />重启webman\n```shell\nphp start.php restart\n```\n或者\n```shell\nphp start.php restart -d\n```\n<a name=\"wJI2f\"></a>\n#### 用法\n安装成功后，可以这样使用:\n```php\nuse Tinywan\\Casbin\\Permission;\n\n// adds permissions to a user\nPermission::addPermissionForUser('eve', 'articles', 'read');\n// adds a role for a user.\nPermission::addRoleForUser('eve', 'writer');\n// adds permissions to a rule\nPermission::addPolicy('writer', 'articles','edit');\n```\n你可以检查一个用户是否拥有某个权限:\n```php\nif (Permission::enforce(\"eve\", \"articles\", \"edit\")) {\n    echo '恭喜你！通过权限认证';\n} else {\n    echo '对不起，您没有该资源访问权限';\n}\n```\n<a name=\"rtRl1\"></a>\n#### 具体教程：\n[https://github.com/php-casbin/webman-permission](https://github.com/php-casbin/webman-permission)<br />更多 API 参考 [Casbin API](https://casbin.org/docs/en/management-api) 。\n\n<a name=\"tuBsI\"></a>\n### 路由自动解析\n当app目录结构非常复杂，webman无法自动解析时可以安装webman的[自动路由插件](https://www.workerman.net/plugin/17)，它会自动检索所有的控制器并为其自动配置对应的路由，让其通过url可以访问。\n<a name=\"nH9pF\"></a>\n#### 安装\n```shell\ncomposer require webman/auto-route\n```\n> **提示**<br />你仍然可以在config/route.php中手动设置某些路由，自动路由插件会优先使用config/route.php 里的配置。\n\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u6c5358d7\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">tags: [webman]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"aUxgO\" class=\"ne-hr\"><h1 id=\"N5C04\"><span class=\"ne-text\">安装webman</span></h1><div class=\"ne-quote\"><p id=\"u90ed1279\" class=\"ne-p\"><span class=\"ne-text\">初始备注：</span></p><p id=\"uffc41d8b\" class=\"ne-p\"><span class=\"ne-text\">不要使用php8.0及以上版本（除非不用think-cache缓存插件）think-cache无法友好的支持php8.0及以上版本。</span></p><h3 id=\"xnZyg\"><span class=\"ne-text\">目前使用php7.4</span></h3></div><h2 id=\"bqafp\"><span class=\"ne-text\">composer 安装</span></h2><p id=\"uc788df29\" class=\"ne-p\"><span class=\"ne-text\">1、创建项目</span></p><pre data-language=\"shell\" id=\"IVyGS\" class=\"ne-codeblock language-shell\">composer create-project workerman/webman</pre><p id=\"u15b733c2\" class=\"ne-p\"><span class=\"ne-text\">2、运行</span></p><p id=\"u0577962c\" class=\"ne-p\"><span class=\"ne-text\">进入webman目录</span></p><p id=\"u6bf38141\" class=\"ne-p\"><span class=\"ne-text\">debug方式运行(用于开发调试)</span></p><pre data-language=\"shell\" id=\"uZOjx\" class=\"ne-codeblock language-shell\">php start.php start</pre><p id=\"ua5073c70\" class=\"ne-p\"><span class=\"ne-text\">daemon方式运行(用于正式环境)</span></p><pre data-language=\"shell\" id=\"EQl3D\" class=\"ne-codeblock language-shell\">php start.php start -d</pre><p id=\"u4f52b034\" class=\"ne-p\"><span class=\"ne-text\">注意</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\">webman从1.2.3版本开始专门为windows系统提供了启动脚本(需要为php配置好环境变量)，windows用户请双击windows.bat即可启动webman，或者运行 </span><span class=\"ne-text\">php windows.php</span><span class=\"ne-text\">启动webman。</span></p><p id=\"u59d9eb68\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"uc0f90e8a\" class=\"ne-p\"><span class=\"ne-text\">3、访问</span></p><p id=\"u07d95476\" class=\"ne-p\"><span class=\"ne-text\">浏览器访问 </span><span class=\"ne-text\">http://ip地址:8787</span></p><p id=\"u54e57c00\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"AX7yU\"><span class=\"ne-text\">基础功能</span></h1><h2 id=\"NMJpd\"><span class=\"ne-text\">需要安装的composer扩展（默认以熟悉的tp为主）</span></h2><h3 id=\"GdWYq\"><span class=\"ne-text\">安装think-template</span></h3><p id=\"u697564aa\" class=\"ne-p\"><span class=\"ne-text\">1、composer安装</span></p><pre data-language=\"shell\" id=\"Eh3L3\" class=\"ne-codeblock language-shell\">composer require topthink/think-template</pre><p id=\"u7b4582b8\" class=\"ne-p\"><span class=\"ne-text\">2、修改配置</span><span class=\"ne-text\">config/view.php</span><span class=\"ne-text\">为</span></p><pre data-language=\"php\" id=\"VdQAo\" class=\"ne-codeblock language-php\">&lt;?php\nuse support\\view\\ThinkPHP;\n\nreturn [\n    'handler' =&gt; ThinkPHP::class,\n];</pre><div class=\"ne-quote\"><p id=\"udc5ce02d\" class=\"ne-p\"><span class=\"ne-text\">提示</span><span class=\"ne-text\"><br /></span><span class=\"ne-text\">其它配置选项通过options传入，例如</span></p></div><pre data-language=\"php\" id=\"UZ4CM\" class=\"ne-codeblock language-php\">return [\n    'handler' =&gt; ThinkPHP::class,\n    'options' =&gt; [\n        'view_suffix' =&gt; 'html',\n        'tpl_begin' =&gt; '{',\n        'tpl_end' =&gt; '}'\n    ]\n];</pre><p id=\"uf6a8b6e7\" class=\"ne-p\"><span class=\"ne-text\">3、thinkphp模板的例子</span></p><p id=\"uef5fb54d\" class=\"ne-p\"><span class=\"ne-text\">修改配置</span><span class=\"ne-text\">config/view.php</span><span class=\"ne-text\">为</span></p><pre data-language=\"php\" id=\"UNSJD\" class=\"ne-codeblock language-php\">&lt;?php\nuse support\\view\\ThinkPHP;\n\nreturn [\n    'handler' =&gt; ThinkPHP::class\n];</pre><p id=\"u1e55cf71\" class=\"ne-p\"><span class=\"ne-text\">app/controller/User.php 如下</span></p><pre data-language=\"php\" id=\"BEevI\" class=\"ne-codeblock language-php\">&lt;?php\nnamespace app\\controller;\n\nuse support\\Request;\n\nclass User\n{\n    public function hello(Request $request)\n    {\n        return view('user/hello', ['name' =&gt; 'webman']);\n    }\n}</pre><p id=\"u8ee4f3a7\" class=\"ne-p\"><span class=\"ne-text\">文件 </span><span class=\"ne-text\">app/view/user/hello.html</span><span class=\"ne-text\"> 如下</span></p><pre data-language=\"php\" id=\"MIyQC\" class=\"ne-codeblock language-php\">&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;title&gt;webman&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\nhello {$name}\n&lt;/body&gt;\n&lt;/html&gt;</pre><p id=\"u8baf2b3f\" class=\"ne-p\"><span class=\"ne-text\">更多文档参考 </span><a href=\"https://www.kancloud.cn/manual/think-template/content\" data-href=\"https://www.kancloud.cn/manual/think-template/content\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">think-template</span></a></p><p id=\"uf23877c3\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"LC2Ne\"><span class=\"ne-text\">安装ThinkORM</span></h3><pre data-language=\"shell\" id=\"cz5iv\" class=\"ne-codeblock language-shell\">composer -W require webman/think-orm</pre><p id=\"u8a3e5038\" class=\"ne-p\"><span class=\"ne-text\">经测试实际安装此扩展会报错，所以我们使用手动安装并配置think-orm。</span></p><p id=\"ud109e29c\" class=\"ne-p\"><a href=\"https://www.workerman.net/plugin/14\" data-href=\"https://www.workerman.net/plugin/14\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">webman/think-orm</span></a><span class=\"ne-text\"> 实际上是一个自动化安装toptink/think-orm 的插件，如果你的webman版本低于1.2无法使用插件请参考文章</span><a href=\"https://www.workerman.net/a/1289\" data-href=\"https://www.workerman.net/a/1289\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">手动安装并配置think-orm</span></a><span class=\"ne-text\">。</span></p><p id=\"u2662d901\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"MDMfP\"><span class=\"ne-text\">安装ThinkCache</span></h3><pre data-language=\"shell\" id=\"trS21\" class=\"ne-codeblock language-shell\">composer -W require webman/think-cache</pre><p id=\"uf06c74c2\" class=\"ne-p\"><a href=\"https://www.workerman.net/plugin/15\" data-href=\"https://www.workerman.net/plugin/15\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">webman/think-cache</span></a><span class=\"ne-text\"> 实际上是一个自动化安装</span><span class=\"ne-text\">toptink/think-cache</span><span class=\"ne-text\"> 的插件。</span></p><p id=\"u89ad060e\" class=\"ne-p\"><span class=\"ne-text\">暂对php8.0及以上不友好，安装后使用会报错。</span></p><h4 id=\"JsjVw\"><span class=\"ne-text\">配置文件</span></h4><p id=\"udb00e65e\" class=\"ne-p\"><span class=\"ne-text\">配置文件为 </span><span class=\"ne-text\">config/thinkcache.php</span></p><h4 id=\"bhGKS\"><span class=\"ne-text\">使用</span></h4><pre data-language=\"php\" id=\"xUIum\" class=\"ne-codeblock language-php\"> &lt;?php\n  namespace app\\controller;\n\n  use support\\Request;\n  use think\\facade\\Cache;\n\n  class User\n  {\n      public function db(Request $request)\n      {\n          $key = 'test_key';\n          Cache::set($key, rand());\n          return response(Cache::get($key));\n      }\n  }</pre><h4 id=\"a9eFP\"><span class=\"ne-text\">Think-Cache使用文档</span></h4><p id=\"u2c2f459e\" class=\"ne-p\"><a href=\"https://github.com/top-think/think-cache\" data-href=\"https://github.com/top-think/think-cache\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ThinkCache文档地址</span></a></p><p id=\"u789a8548\" class=\"ne-p\"><br></p><h3 id=\"lzdQK\"><span class=\"ne-text\">安装redis组件</span></h3><p id=\"u2a9c3063\" class=\"ne-p\"><span class=\"ne-text\">webman的redis组件默认使用的是</span><a href=\"https://github.com/illuminate/redis\" data-href=\"https://github.com/illuminate/redis\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">illuminate/redis</span></a><span class=\"ne-text\">，也就是laravel的redis库，用法与laravel相同。</span></p><p id=\"ufac87fd0\" class=\"ne-p\"><span class=\"ne-text\">使用</span><span class=\"ne-text\">illuminate/redis</span><span class=\"ne-text\">之前必须先给</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">安装redis扩展。</span></p><div class=\"ne-quote\"><p id=\"ue225956c\" class=\"ne-p\"><span class=\"ne-text\">使用命令</span><span class=\"ne-text\">php -m | grep redis</span><span class=\"ne-text\">查看</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">是否装了redis扩展。注意：即使你在</span><span class=\"ne-text\">php-fpm</span><span class=\"ne-text\">安装了redis扩展，不代表你在</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">可以使用它，因为</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">和</span><span class=\"ne-text\">php-fpm</span><span class=\"ne-text\">是不同的应用程序，可能使用的是不同的</span><span class=\"ne-text\">php.ini</span><span class=\"ne-text\">配置。使用命令</span><span class=\"ne-text\">php --ini</span><span class=\"ne-text\">来查看你的</span><span class=\"ne-text\">php-cli</span><span class=\"ne-text\">使用的是哪个</span><span class=\"ne-text\">php.ini</span><span class=\"ne-text\">配置文件。</span></p></div><h4 id=\"NnReV\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"mKfqg\" class=\"ne-codeblock language-shell\">composer require -W illuminate/redis</pre><pre data-language=\"php\" id=\"Bzm2L\" class=\"ne-codeblock language-php\">## 配置\nredis配置文件在`config/redis.php`\n```php\nreturn [\n    'default' =&gt; [\n        'host'     =&gt; '127.0.0.1',\n        'password' =&gt; null,\n        'port'     =&gt; 6379,\n        'database' =&gt; 0,\n    ]\n];</pre><h4 id=\"mrrSI\"><span class=\"ne-text\">示例</span></h4><pre data-language=\"php\" id=\"WyGaj\" class=\"ne-codeblock language-php\">&lt;?php\nnamespace app\\controller;\n\nuse support\\Request;\nuse support\\Redis;\n\nclass User\n{\n    public function db(Request $request)\n    {\n        $key = 'test_key';\n        Redis::set($key, rand());\n        return response(Redis::get($key));\n    }\n}</pre><h4 id=\"CJpNM\"><span class=\"ne-text\">具体使用教程：</span></h4><p id=\"uc1cb24f3\" class=\"ne-p\"><a href=\"https://www.workerman.net/doc/webman/db/redis.html\" data-href=\"https://www.workerman.net/doc/webman/db/redis.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://www.workerman.net/doc/webman/db/redis.html</span></a></p><p id=\"u043053e2\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"ea18q\"><span class=\"ne-text\">安装think验证器</span></h3><h3 id=\"Abx37\"><span class=\"ne-text\">安装</span></h3><pre data-language=\"shell\" id=\"SVea7\" class=\"ne-codeblock language-shell\">composer require topthink/think-validate</pre><div class=\"ne-quote\"><p id=\"u3ef7f08c\" class=\"ne-p\"><span class=\"ne-text\">验证器也不支持php8.0及以上，如果需要支持需要自行查找更多方案。</span></p></div><h4 id=\"KcPSC\"><span class=\"ne-text\">基本用法</span></h4><pre data-language=\"php\" id=\"X2j4T\" class=\"ne-codeblock language-php\">&lt;?php\nnamespace app\\index\\validate;\n\nuse Tinywan\\Validate\\Validate;\n\nclass UserValidate extends Validate\n{\n    protected $rule =   [\n        'name'  =&gt; 'require|max:25',\n        'age'   =&gt; 'require|number|between:1,120',\n        'email' =&gt; 'require|email'\n    ];\n\n    protected $message  =   [\n        'name.require' =&gt; '名称必须',\n        'name.max'     =&gt; '名称最多不能超过25个字符',\n        'age.require'   =&gt; '年龄必须是数字',\n        'age.number'   =&gt; '年龄必须是数字',\n        'age.between'  =&gt; '年龄只能在1-120之间',\n        'email.require'        =&gt; '邮箱必须是数字',\n        'email.email'        =&gt; '邮箱格式错误'\n    ];\n}</pre><p id=\"ua8f19fee\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">验证器调用代码如下：</span></p><pre data-language=\"php\" id=\"uRHH6\" class=\"ne-codeblock language-php\">$data = [\n    'name'  =&gt; 'Tinywan',\n    'age'  =&gt; 24,\n    'email' =&gt; 'Tinywan@163.com'\n];\n$validate = new \\app\\index\\validate\\UserValidate;\n\nif (!$validate-&gt;check($data)) {\n    var_dump($validate-&gt;getError());\n}</pre><p id=\"u89b218a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">更多用法可以参考6.0完全开发手册的</span><a href=\"https://www.kancloud.cn/manual/thinkphp6_0/1037623\" data-href=\"https://www.kancloud.cn/manual/thinkphp6_0/1037623\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">验证</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">章节</span></p><p id=\"u6b7e1a89\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></span></p><h3 id=\"rlWQf\"><span class=\"ne-text\">安装验证码</span></h3><h4 id=\"LR7LK\"><span class=\"ne-text\">gregwar/captcha</span></h4><p id=\"u3d71f017\" class=\"ne-p\"><span class=\"ne-text\">项目地址 </span><a href=\"https://github.com/Gregwar/Captcha\" data-href=\"https://github.com/Gregwar/Captcha\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/Gregwar/Captcha</span></a></p><h4 id=\"TfQcz\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"ppBCy\" class=\"ne-codeblock language-shell\">composer require gregwar/captcha 1.*</pre><h4 id=\"zvZRk\"><span class=\"ne-text\">基本使用1</span></h4><p id=\"u829bf292\" class=\"ne-p\"><strong><span class=\"ne-text\">建立文件 app/controller/Login.php</span></strong></p><pre data-language=\"php\" id=\"Z281b\" class=\"ne-codeblock language-php\">&lt;?php\nnamespace app\\controller;\n\nuse support\\Request;\nuse Gregwar\\Captcha\\CaptchaBuilder;\n\nclass Login\n{\n    /**\n     * 测试页面\n     */\n    public function index(Request $request)\n    {\n        return view('login/index');\n    }\n\n    /**\n     * 输出验证码图像\n     */\n    public function captcha(Request $request)\n    {\n        // 初始化验证码类\n        $builder = new CaptchaBuilder;\n        // 生成验证码\n        $builder-&gt;build();\n        // 将验证码的值存储到session中\n        $request-&gt;session()-&gt;set('captcha', strtolower($builder-&gt;getPhrase()));\n        // 获得验证码图片二进制数据\n        $img_content = $builder-&gt;get();\n        // 输出验证码二进制数据\n        return response($img_content, 200, ['Content-Type' =&gt; 'image/jpeg']);\n    }\n\n    /**\n     * 检查验证码\n     */\n    public function check(Request $request)\n    {\n        // 获取post请求中的captcha字段\n        $captcha = $request-&gt;post('captcha');\n        // 对比session中的captcha值\n        if (strtolower($captcha) !== $request-&gt;session()-&gt;get('captcha')) {\n            return json(['code' =&gt; 400, 'msg' =&gt; '输入的验证码不正确']);\n        }\n        return json(['code' =&gt; 0, 'msg' =&gt; 'ok']);\n    }\n\n}</pre><p id=\"uaa9b90d9\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(44, 62, 80) !important; font-size: 16px\">建立模版文件</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0); font-size: 16px\">app/view/login/index.html</span></strong></p><pre data-language=\"html\" id=\"Vo6r2\" class=\"ne-codeblock language-html\">&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot;&gt;\n    &lt;title&gt;验证码测试&lt;/title&gt;  \n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form method=&quot;post&quot; action=&quot;/login/check&quot;&gt;\n       &lt;img src=&quot;/login/captcha&quot; /&gt;&lt;br&gt;\n        &lt;input type=&quot;text&quot; name=&quot;captcha&quot; /&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><h4 id=\"PFl5v\"><span class=\"ne-text\">基本使用2 （直接在控制器里使用并验证）</span></h4><pre data-language=\"php\" id=\"IVUvx\" class=\"ne-codeblock language-php\">\n$this-&gt;validate = new \\think\\Validate();\n$param = $request-&gt;all();\n\n$this-&gt;validate-&gt;rule([\n    'captcha|验证码'   =&gt; 'require',\n    'uniqid|uniqid' =&gt; 'require',\n    'username|用户名'  =&gt; 'require',\n    'password|密码'   =&gt; 'require',\n]);\n$this-&gt;validate-&gt;message([\n    'captcha.require'  =&gt; '验证码不能为空',\n    'uniqid.require'   =&gt; 'uniqid不能为空',\n    'username.require' =&gt; '登录名不能为空',\n    'password.require' =&gt; '密码不能为空',\n]);\nif ( ! $this-&gt;validate-&gt;check($param)) {\n    return json($this-&gt;validate-&gt;getError());\n}</pre><h3 id=\"f0Slx\"></h3><p id=\"u7870fe8e\" class=\"ne-p\"><br></p><h3 id=\"J9rQA\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">webman/casbin权限控制插件</span></h3><h4 id=\"zORzd\"><span class=\"ne-text\">简介</span></h4><p id=\"u93fff3b8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">webman casbin 权限控制插件。它基于 </span><a href=\"https://github.com/php-casbin/php-casbin\" data-href=\"https://github.com/php-casbin/php-casbin\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">PHP-Casbin</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">, 一个强大的、高效的开源访问控制框架，支持基于</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">ACL</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">RBAC</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">, </span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">ABAC</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">等访问控制模型。</span></p><h4 id=\"xk2uh\"><span class=\"ne-text\">依赖</span></h4><ul class=\"ne-ul\"><li id=\"ub7c3fdce\" style=\"text-align: left\"><a href=\"https://www.workerman.net/doc/webman/db/others.html\" data-href=\"https://www.workerman.net/doc/webman/db/others.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">ThinkORM</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">（默认）</span></li><li id=\"u39fa47de\" style=\"text-align: left\"><a href=\"https://github.com/PHP-DI/PHP-DI\" data-href=\"https://github.com/PHP-DI/PHP-DI\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">PHP-DI</span></a></li><li id=\"ua4a224d6\" style=\"text-align: left\"><a href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" data-href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">illuminate/database</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">（可选）</span></li></ul><p id=\"u1051921b\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></span></p><h4 id=\"sVRFJ\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"prTIQ\" class=\"ne-codeblock language-shell\">composer require casbin/webman-permission</pre><h4 id=\"uzenz\"><span class=\"ne-text\">使用</span></h4><ol class=\"ne-ol\"><li id=\"uda5fa183\"><span class=\"ne-text\">依赖注入配置<br /></span><span class=\"ne-text\">修改配置config/container.php，其最终内容如下：</span></li></ol><pre data-language=\"php\" id=\"W2M9q\" class=\"ne-codeblock language-php\">$builder = new \\DI\\ContainerBuilder();\n$builder-&gt;addDefinitions(config('dependence', []));\n$builder-&gt;useAutowiring(true);\nreturn $builder-&gt;build();</pre><p id=\"ub3cefb28\" class=\"ne-p\"><br></p><p id=\"u46784286\" class=\"ne-p\"><span class=\"ne-text\">2. 数据库配置</span></p><div class=\"ne-quote\"><p id=\"uad0dd107\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">默认策略存储是使用的ThinkORM。 如使用 laravel的数据库 illuminate/database，请按照官方文档按照相应的依赖包：</span><a href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" data-href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://www.workerman.net/doc/webman/db/tutorial.html</span></a></p></div><div class=\"ne-quote\"></div><p id=\"ub9ce0c63\" class=\"ne-p\"><br></p><p id=\"uae812ddb\" class=\"ne-p\"><span class=\"ne-text\">🚀 (1) 模型配置<br /></span><span class=\"ne-text\">📒📒📒 使用ThinkORM（默认） 📒📒📒</span></p><p id=\"u319d96ab\" class=\"ne-p\"><br></p><p id=\"u4858bf40\" class=\"ne-p\"><span class=\"ne-text\">修改数据库 thinkorm.php 配置<br /></span><span class=\"ne-text\">📕📕📕 使用laravel数据库（可选） 📕📕📕</span></p><p id=\"ud9f12b1d\" class=\"ne-p\"><br></p><p id=\"u603c6803\" class=\"ne-p\"><span class=\"ne-text\">修改数据库 database.php 配置<br /></span><span class=\"ne-text\">修改数据库 permission.php 的adapter适配器为laravel适配器</span></p><p id=\"u5eece00b\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u047d2742\" class=\"ne-p\"><span class=\"ne-text\">(2) 创建 casbin_rule 数据表</span></p><pre data-language=\"sql\" id=\"psQw0\" class=\"ne-codeblock language-sql\">CREATE TABLE `casbin_rule` (\n\t`id` BIGINT ( 20 ) UNSIGNED NOT NULL AUTO_INCREMENT,\n\t`ptype` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v0` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v1` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v2` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v3` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v4` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\t`v5` VARCHAR ( 128 ) NOT NULL DEFAULT '',\n\tPRIMARY KEY ( `id` ) USING BTREE,\n\tKEY `idx_ptype` ( `ptype` ) USING BTREE,\n\tKEY `idx_v0` ( `v0` ) USING BTREE,\n\tKEY `idx_v1` ( `v1` ) USING BTREE,\n\tKEY `idx_v2` ( `v2` ) USING BTREE,\n\tKEY `idx_v3` ( `v3` ) USING BTREE,\n\tKEY `idx_v4` ( `v4` ) USING BTREE,\n    KEY `idx_v5` ( `v5` ) USING BTREE \n) ENGINE = INNODB CHARSET = utf8mb4 COMMENT = '策略规则表';</pre><p id=\"u86ba4b5d\" class=\"ne-p\"><span class=\"ne-text\">(3) 配置 config/redis 配置</span></p><p id=\"u88319397\" class=\"ne-p\"><span class=\"ne-text\">重启webman</span></p><pre data-language=\"shell\" id=\"IrN1P\" class=\"ne-codeblock language-shell\">php start.php restart</pre><p id=\"u152b2f46\" class=\"ne-p\"><span class=\"ne-text\">或者</span></p><pre data-language=\"shell\" id=\"vBQwi\" class=\"ne-codeblock language-shell\">php start.php restart -d</pre><h4 id=\"wJI2f\"><span class=\"ne-text\">用法</span></h4><p id=\"u2e5494b1\" class=\"ne-p\"><span class=\"ne-text\">安装成功后，可以这样使用:</span></p><pre data-language=\"php\" id=\"FXsuH\" class=\"ne-codeblock language-php\">use Tinywan\\Casbin\\Permission;\n\n// adds permissions to a user\nPermission::addPermissionForUser('eve', 'articles', 'read');\n// adds a role for a user.\nPermission::addRoleForUser('eve', 'writer');\n// adds permissions to a rule\nPermission::addPolicy('writer', 'articles','edit');</pre><p id=\"udc2550e9\" class=\"ne-p\"><span class=\"ne-text\">你可以检查一个用户是否拥有某个权限:</span></p><pre data-language=\"php\" id=\"ZvQFh\" class=\"ne-codeblock language-php\">if (Permission::enforce(&quot;eve&quot;, &quot;articles&quot;, &quot;edit&quot;)) {\n    echo '恭喜你！通过权限认证';\n} else {\n    echo '对不起，您没有该资源访问权限';\n}</pre><h4 id=\"rtRl1\"><span class=\"ne-text\">具体教程：</span></h4><p id=\"u10f31d5c\" class=\"ne-p\"><a href=\"https://github.com/php-casbin/webman-permission\" data-href=\"https://github.com/php-casbin/webman-permission\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/php-casbin/webman-permission</span></a></p><p id=\"uf33518b8\" class=\"ne-p\"><span class=\"ne-text\">更多 API 参考 </span><a href=\"https://casbin.org/docs/en/management-api\" data-href=\"https://casbin.org/docs/en/management-api\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Casbin API</span></a><span class=\"ne-text\"> 。</span></p><p id=\"u660e87b0\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h3 id=\"tuBsI\"><span class=\"ne-text\">路由自动解析</span></h3><p id=\"u0168610e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">当app目录结构非常复杂，webman无法自动解析时可以安装webman的</span><a href=\"https://www.workerman.net/plugin/17\" data-href=\"https://www.workerman.net/plugin/17\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">自动路由插件</span></a><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">，它会自动检索所有的控制器并为其自动配置对应的路由，让其通过url可以访问。</span></p><h4 id=\"nH9pF\"><span class=\"ne-text\">安装</span></h4><pre data-language=\"shell\" id=\"Hteq3\" class=\"ne-codeblock language-shell\">composer require webman/auto-route</pre><div class=\"ne-quote\"><p id=\"ueec470e6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\">提示</span></strong><span class=\"ne-text\"><br /></span><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\">你仍然可以在</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">config/route.php</span><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\">中手动设置某些路由，自动路由插件会优先使用</span><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">config/route.php</span><span class=\"ne-text\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255); font-size: 16px\"> 里的配置。</span></p></div><p id=\"ue9341e87\" class=\"ne-p\"><br></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u6c5358d7\" id=\"u6c5358d7\" style=\"text-align: left\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [webman]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22aUxgO%22%7D\"></card><h1 data-lake-id=\"N5C04\" id=\"N5C04\"><span data-lake-id=\"ub04079ad\" id=\"ub04079ad\">安装webman</span></h1><blockquote data-lake-id=\"ubd530606\" id=\"ubd530606\"><p data-lake-id=\"u90ed1279\" id=\"u90ed1279\"><span data-lake-id=\"uc5838296\" id=\"uc5838296\">初始备注：</span></p><p data-lake-id=\"uffc41d8b\" id=\"uffc41d8b\"><span data-lake-id=\"u6e97408c\" id=\"u6e97408c\">不要使用php8.0及以上版本（除非不用think-cache缓存插件）think-cache无法友好的支持php8.0及以上版本。</span></p><h3 data-lake-id=\"xnZyg\" id=\"xnZyg\"><span data-lake-id=\"u78067c3c\" id=\"u78067c3c\">目前使用php7.4</span></h3></blockquote><h2 data-lake-id=\"bqafp\" id=\"bqafp\"><span data-lake-id=\"udc8377a1\" id=\"udc8377a1\">composer 安装</span></h2><p data-lake-id=\"uc788df29\" id=\"uc788df29\"><span data-lake-id=\"u16701278\" id=\"u16701278\">1、创建项目</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20create-project%20workerman%2Fwebman%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IVyGS%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u15b733c2\" id=\"u15b733c2\"><span data-lake-id=\"u4f269510\" id=\"u4f269510\">2、运行</span></p><p data-lake-id=\"u0577962c\" id=\"u0577962c\"><span data-lake-id=\"ue5810973\" id=\"ue5810973\">进入webman目录</span></p><p data-lake-id=\"u6bf38141\" id=\"u6bf38141\"><span data-lake-id=\"u226bab2b\" id=\"u226bab2b\">debug方式运行(用于开发调试)</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22php%20start.php%20start%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22uZOjx%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua5073c70\" id=\"ua5073c70\"><span data-lake-id=\"ube96da6f\" id=\"ube96da6f\">daemon方式运行(用于正式环境)</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22php%20start.php%20start%20-d%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22EQl3D%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4f52b034\" id=\"u4f52b034\"><span data-lake-id=\"u322d785e\" id=\"u322d785e\">注意</span><span data-lake-id=\"u6068ef3b\" id=\"u6068ef3b\"><br /></span><span data-lake-id=\"u08ac6b26\" id=\"u08ac6b26\">webman从1.2.3版本开始专门为windows系统提供了启动脚本(需要为php配置好环境变量)，windows用户请双击windows.bat即可启动webman，或者运行 </span><span data-lake-id=\"u62537667\" id=\"u62537667\">php windows.php</span><span data-lake-id=\"ubff77082\" id=\"ubff77082\">启动webman。</span></p><p data-lake-id=\"u59d9eb68\" id=\"u59d9eb68\"><span data-lake-id=\"ue4a3da97\" id=\"ue4a3da97\">​</span><br></p><p data-lake-id=\"uc0f90e8a\" id=\"uc0f90e8a\"><span data-lake-id=\"ueac660be\" id=\"ueac660be\">3、访问</span></p><p data-lake-id=\"u07d95476\" id=\"u07d95476\"><span data-lake-id=\"u4adcf74b\" id=\"u4adcf74b\">浏览器访问 </span><span data-lake-id=\"u6e8022ed\" id=\"u6e8022ed\">http://ip地址:8787</span></p><p data-lake-id=\"u54e57c00\" id=\"u54e57c00\"><span data-lake-id=\"u3419f55f\" id=\"u3419f55f\">​</span><br></p><h1 data-lake-id=\"AX7yU\" id=\"AX7yU\"><span data-lake-id=\"uc50abf61\" id=\"uc50abf61\">基础功能</span></h1><h2 data-lake-id=\"NMJpd\" id=\"NMJpd\"><span data-lake-id=\"u32c0069d\" id=\"u32c0069d\">需要安装的composer扩展（默认以熟悉的tp为主）</span></h2><h3 data-lake-id=\"GdWYq\" id=\"GdWYq\"><span data-lake-id=\"u067de080\" id=\"u067de080\">安装think-template</span></h3><p data-lake-id=\"u697564aa\" id=\"u697564aa\"><span data-lake-id=\"u7b8fd4df\" id=\"u7b8fd4df\">1、composer安装</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20topthink%2Fthink-template%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Eh3L3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7b4582b8\" id=\"u7b4582b8\"><span data-lake-id=\"u17ff5447\" id=\"u17ff5447\">2、修改配置</span><span data-lake-id=\"u00308e08\" id=\"u00308e08\">config/view.php</span><span data-lake-id=\"u89f8e3bf\" id=\"u89f8e3bf\">为</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnuse%20support%5C%5Cview%5C%5CThinkPHP%3B%5Cn%5Cnreturn%20%5B%5Cn%20%20%20%20'handler'%20%3D%3E%20ThinkPHP%3A%3Aclass%2C%5Cn%5D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VdQAo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u47953b95\" id=\"u47953b95\"><p data-lake-id=\"udc5ce02d\" id=\"udc5ce02d\"><span data-lake-id=\"u0f39502b\" id=\"u0f39502b\">提示</span><span data-lake-id=\"ue526ad48\" id=\"ue526ad48\"><br /></span><span data-lake-id=\"u67ddeb6c\" id=\"u67ddeb6c\">其它配置选项通过options传入，例如</span></p></blockquote><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22return%20%5B%5Cn%20%20%20%20'handler'%20%3D%3E%20ThinkPHP%3A%3Aclass%2C%5Cn%20%20%20%20'options'%20%3D%3E%20%5B%5Cn%20%20%20%20%20%20%20%20'view_suffix'%20%3D%3E%20'html'%2C%5Cn%20%20%20%20%20%20%20%20'tpl_begin'%20%3D%3E%20'%7B'%2C%5Cn%20%20%20%20%20%20%20%20'tpl_end'%20%3D%3E%20'%7D'%5Cn%20%20%20%20%5D%5Cn%5D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UZ4CM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf6a8b6e7\" id=\"uf6a8b6e7\"><span data-lake-id=\"ud78737c7\" id=\"ud78737c7\">3、thinkphp模板的例子</span></p><p data-lake-id=\"uef5fb54d\" id=\"uef5fb54d\"><span data-lake-id=\"ub0ca8c8c\" id=\"ub0ca8c8c\">修改配置</span><span data-lake-id=\"u252d6d13\" id=\"u252d6d13\">config/view.php</span><span data-lake-id=\"u3cd66182\" id=\"u3cd66182\">为</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnuse%20support%5C%5Cview%5C%5CThinkPHP%3B%5Cn%5Cnreturn%20%5B%5Cn%20%20%20%20'handler'%20%3D%3E%20ThinkPHP%3A%3Aclass%5Cn%5D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UNSJD%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u1e55cf71\" id=\"u1e55cf71\"><span data-lake-id=\"ud31c2575\" id=\"ud31c2575\">app/controller/User.php 如下</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnnamespace%20app%5C%5Ccontroller%3B%5Cn%5Cnuse%20support%5C%5CRequest%3B%5Cn%5Cnclass%20User%5Cn%7B%5Cn%20%20%20%20public%20function%20hello(Request%20%24request)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20return%20view('user%2Fhello'%2C%20%5B'name'%20%3D%3E%20'webman'%5D)%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BEevI%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8ee4f3a7\" id=\"u8ee4f3a7\"><span data-lake-id=\"u4e66e1c4\" id=\"u4e66e1c4\">文件 </span><span data-lake-id=\"u4c52e1e0\" id=\"u4c52e1e0\">app/view/user/hello.html</span><span data-lake-id=\"ua5724db1\" id=\"ua5724db1\"> 如下</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C!doctype%20html%3E%5Cn%3Chtml%3E%5Cn%3Chead%3E%5Cn%20%20%20%20%3Cmeta%20charset%3D%5C%22utf-8%5C%22%3E%5Cn%20%20%20%20%3Ctitle%3Ewebman%3C%2Ftitle%3E%5Cn%3C%2Fhead%3E%5Cn%3Cbody%3E%5Cnhello%20%7B%24name%7D%5Cn%3C%2Fbody%3E%5Cn%3C%2Fhtml%3E%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22MIyQC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8baf2b3f\" id=\"u8baf2b3f\"><span data-lake-id=\"u535fc15d\" id=\"u535fc15d\">更多文档参考 </span><a href=\"https://www.kancloud.cn/manual/think-template/content\" target=\"_blank\" data-lake-id=\"uc457ea2d\" id=\"uc457ea2d\"><span data-lake-id=\"uf5574ea4\" id=\"uf5574ea4\">think-template</span></a></p><p data-lake-id=\"uf23877c3\" id=\"uf23877c3\"><span data-lake-id=\"u2719ed3a\" id=\"u2719ed3a\">​</span><br></p><h3 data-lake-id=\"LC2Ne\" id=\"LC2Ne\"><span data-lake-id=\"u2e4e9fa4\" id=\"u2e4e9fa4\">安装ThinkORM</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20-W%20require%20webman%2Fthink-orm%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22cz5iv%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8a3e5038\" id=\"u8a3e5038\"><span data-lake-id=\"ueb9f649a\" id=\"ueb9f649a\">经测试实际安装此扩展会报错，所以我们使用手动安装并配置think-orm。</span></p><p data-lake-id=\"ud109e29c\" id=\"ud109e29c\"><a href=\"https://www.workerman.net/plugin/14\" target=\"_blank\" data-lake-id=\"u48897ff7\" id=\"u48897ff7\"><span data-lake-id=\"u933b07dc\" id=\"u933b07dc\">webman/think-orm</span></a><span data-lake-id=\"u857f6604\" id=\"u857f6604\"> 实际上是一个自动化安装toptink/think-orm 的插件，如果你的webman版本低于1.2无法使用插件请参考文章</span><a href=\"https://www.workerman.net/a/1289\" target=\"_blank\" data-lake-id=\"u22e565b3\" id=\"u22e565b3\"><span data-lake-id=\"uccdf3550\" id=\"uccdf3550\">手动安装并配置think-orm</span></a><span data-lake-id=\"u2407a6c7\" id=\"u2407a6c7\">。</span></p><p data-lake-id=\"u2662d901\" id=\"u2662d901\"><span data-lake-id=\"u011b34fb\" id=\"u011b34fb\">​</span><br></p><h3 data-lake-id=\"MDMfP\" id=\"MDMfP\"><span data-lake-id=\"ud91ba1fc\" id=\"ud91ba1fc\">安装ThinkCache</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20-W%20require%20webman%2Fthink-cache%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22trS21%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf06c74c2\" id=\"uf06c74c2\"><a href=\"https://www.workerman.net/plugin/15\" target=\"_blank\" data-lake-id=\"ua142855d\" id=\"ua142855d\"><span data-lake-id=\"ub8fbea50\" id=\"ub8fbea50\">webman/think-cache</span></a><span data-lake-id=\"uada59a37\" id=\"uada59a37\"> 实际上是一个自动化安装</span><span data-lake-id=\"u9cf9872f\" id=\"u9cf9872f\">toptink/think-cache</span><span data-lake-id=\"uc1a427c5\" id=\"uc1a427c5\"> 的插件。</span></p><p data-lake-id=\"u89ad060e\" id=\"u89ad060e\"><span data-lake-id=\"u00c56279\" id=\"u00c56279\">暂对php8.0及以上不友好，安装后使用会报错。</span></p><h4 data-lake-id=\"JsjVw\" id=\"JsjVw\"><span data-lake-id=\"u5b26b952\" id=\"u5b26b952\">配置文件</span></h4><p data-lake-id=\"udb00e65e\" id=\"udb00e65e\"><span data-lake-id=\"uf4b52c43\" id=\"uf4b52c43\">配置文件为 </span><span data-lake-id=\"u503315a5\" id=\"u503315a5\">config/thinkcache.php</span></p><h4 data-lake-id=\"bhGKS\" id=\"bhGKS\"><span data-lake-id=\"u20b9f245\" id=\"u20b9f245\">使用</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%20%3C%3Fphp%5Cn%20%20namespace%20app%5C%5Ccontroller%3B%5Cn%5Cn%20%20use%20support%5C%5CRequest%3B%5Cn%20%20use%20think%5C%5Cfacade%5C%5CCache%3B%5Cn%5Cn%20%20class%20User%5Cn%20%20%7B%5Cn%20%20%20%20%20%20public%20function%20db(Request%20%24request)%5Cn%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%24key%20%3D%20'test_key'%3B%5Cn%20%20%20%20%20%20%20%20%20%20Cache%3A%3Aset(%24key%2C%20rand())%3B%5Cn%20%20%20%20%20%20%20%20%20%20return%20response(Cache%3A%3Aget(%24key))%3B%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22xUIum%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"a9eFP\" id=\"a9eFP\"><span data-lake-id=\"u4beeec2c\" id=\"u4beeec2c\">Think-Cache使用文档</span></h4><p data-lake-id=\"u2c2f459e\" id=\"u2c2f459e\"><a href=\"https://github.com/top-think/think-cache\" target=\"_blank\" data-lake-id=\"u2c630c4b\" id=\"u2c630c4b\"><span data-lake-id=\"uac220216\" id=\"uac220216\">ThinkCache文档地址</span></a></p><p data-lake-id=\"u789a8548\" id=\"u789a8548\"><br></p><h3 data-lake-id=\"lzdQK\" id=\"lzdQK\"><span data-lake-id=\"u15ef8f0d\" id=\"u15ef8f0d\">安装redis组件</span></h3><p data-lake-id=\"u2a9c3063\" id=\"u2a9c3063\"><span data-lake-id=\"uca180602\" id=\"uca180602\">webman的redis组件默认使用的是</span><a href=\"https://github.com/illuminate/redis\" target=\"_blank\" data-lake-id=\"u4d74c935\" id=\"u4d74c935\"><span data-lake-id=\"ub53d0a1b\" id=\"ub53d0a1b\">illuminate/redis</span></a><span data-lake-id=\"u2b195a0b\" id=\"u2b195a0b\">，也就是laravel的redis库，用法与laravel相同。</span></p><p data-lake-id=\"ufac87fd0\" id=\"ufac87fd0\"><span data-lake-id=\"u8c6e818c\" id=\"u8c6e818c\">使用</span><span data-lake-id=\"ua3dcc2f2\" id=\"ua3dcc2f2\">illuminate/redis</span><span data-lake-id=\"ue6f26794\" id=\"ue6f26794\">之前必须先给</span><span data-lake-id=\"u488ac33a\" id=\"u488ac33a\">php-cli</span><span data-lake-id=\"u9d1d9756\" id=\"u9d1d9756\">安装redis扩展。</span></p><blockquote data-lake-id=\"u49fc5bce\" id=\"u49fc5bce\"><p data-lake-id=\"ue225956c\" id=\"ue225956c\"><span data-lake-id=\"u2c3e7b37\" id=\"u2c3e7b37\">使用命令</span><span data-lake-id=\"ubaf7a354\" id=\"ubaf7a354\">php -m | grep redis</span><span data-lake-id=\"u0283e6b4\" id=\"u0283e6b4\">查看</span><span data-lake-id=\"u82344e5f\" id=\"u82344e5f\">php-cli</span><span data-lake-id=\"ude7cf8a1\" id=\"ude7cf8a1\">是否装了redis扩展。注意：即使你在</span><span data-lake-id=\"ub75d6fd2\" id=\"ub75d6fd2\">php-fpm</span><span data-lake-id=\"u6cffdf02\" id=\"u6cffdf02\">安装了redis扩展，不代表你在</span><span data-lake-id=\"u68986973\" id=\"u68986973\">php-cli</span><span data-lake-id=\"u6d01c3d4\" id=\"u6d01c3d4\">可以使用它，因为</span><span data-lake-id=\"ucf4e9082\" id=\"ucf4e9082\">php-cli</span><span data-lake-id=\"ua49b89f4\" id=\"ua49b89f4\">和</span><span data-lake-id=\"u2feb4238\" id=\"u2feb4238\">php-fpm</span><span data-lake-id=\"ufe53b016\" id=\"ufe53b016\">是不同的应用程序，可能使用的是不同的</span><span data-lake-id=\"u1dedae1e\" id=\"u1dedae1e\">php.ini</span><span data-lake-id=\"uadf409d7\" id=\"uadf409d7\">配置。使用命令</span><span data-lake-id=\"u8fe083c0\" id=\"u8fe083c0\">php --ini</span><span data-lake-id=\"uc779d0d7\" id=\"uc779d0d7\">来查看你的</span><span data-lake-id=\"u145e3fbc\" id=\"u145e3fbc\">php-cli</span><span data-lake-id=\"u1eeb8ec2\" id=\"u1eeb8ec2\">使用的是哪个</span><span data-lake-id=\"u673dee7b\" id=\"u673dee7b\">php.ini</span><span data-lake-id=\"uec479a09\" id=\"uec479a09\">配置文件。</span></p></blockquote><h4 data-lake-id=\"NnReV\" id=\"NnReV\"><span data-lake-id=\"u4f7691e0\" id=\"u4f7691e0\">安装</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20-W%20illuminate%2Fredis%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mKfqg%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%23%23%20%E9%85%8D%E7%BD%AE%5Cnredis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%9C%A8%60config%2Fredis.php%60%5Cn%60%60%60php%5Cnreturn%20%5B%5Cn%20%20%20%20'default'%20%3D%3E%20%5B%5Cn%20%20%20%20%20%20%20%20'host'%20%20%20%20%20%3D%3E%20'127.0.0.1'%2C%5Cn%20%20%20%20%20%20%20%20'password'%20%3D%3E%20null%2C%5Cn%20%20%20%20%20%20%20%20'port'%20%20%20%20%20%3D%3E%206379%2C%5Cn%20%20%20%20%20%20%20%20'database'%20%3D%3E%200%2C%5Cn%20%20%20%20%5D%5Cn%5D%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Bzm2L%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"mrrSI\" id=\"mrrSI\"><span data-lake-id=\"ubadd434c\" id=\"ubadd434c\">示例</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnnamespace%20app%5C%5Ccontroller%3B%5Cn%5Cnuse%20support%5C%5CRequest%3B%5Cnuse%20support%5C%5CRedis%3B%5Cn%5Cnclass%20User%5Cn%7B%5Cn%20%20%20%20public%20function%20db(Request%20%24request)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24key%20%3D%20'test_key'%3B%5Cn%20%20%20%20%20%20%20%20Redis%3A%3Aset(%24key%2C%20rand())%3B%5Cn%20%20%20%20%20%20%20%20return%20response(Redis%3A%3Aget(%24key))%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22WyGaj%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"CJpNM\" id=\"CJpNM\"><span data-lake-id=\"ub66de365\" id=\"ub66de365\">具体使用教程：</span></h4><p data-lake-id=\"uc1cb24f3\" id=\"uc1cb24f3\"><a href=\"https://www.workerman.net/doc/webman/db/redis.html\" target=\"_blank\" data-lake-id=\"u8f12e151\" id=\"u8f12e151\"><span data-lake-id=\"u88f9d3b4\" id=\"u88f9d3b4\">https://www.workerman.net/doc/webman/db/redis.html</span></a></p><p data-lake-id=\"u043053e2\" id=\"u043053e2\"><span data-lake-id=\"ue4ab20e8\" id=\"ue4ab20e8\">​</span><br></p><h3 data-lake-id=\"ea18q\" id=\"ea18q\"><span data-lake-id=\"u70f17970\" id=\"u70f17970\">安装think验证器</span></h3><h3 data-lake-id=\"Abx37\" id=\"Abx37\"><span data-lake-id=\"ua82402d3\" id=\"ua82402d3\">安装</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20topthink%2Fthink-validate%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22SVea7%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u2fb1cb7b\" id=\"u2fb1cb7b\"><p data-lake-id=\"u3ef7f08c\" id=\"u3ef7f08c\"><span data-lake-id=\"uef6f4b3b\" id=\"uef6f4b3b\">验证器也不支持php8.0及以上，如果需要支持需要自行查找更多方案。</span></p></blockquote><h4 data-lake-id=\"KcPSC\" id=\"KcPSC\"><span data-lake-id=\"u0a6417cf\" id=\"u0a6417cf\">基本用法</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnnamespace%20app%5C%5Cindex%5C%5Cvalidate%3B%5Cn%5Cnuse%20Tinywan%5C%5CValidate%5C%5CValidate%3B%5Cn%5Cnclass%20UserValidate%20extends%20Validate%5Cn%7B%5Cn%20%20%20%20protected%20%24rule%20%3D%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20'name'%20%20%3D%3E%20'require%7Cmax%3A25'%2C%5Cn%20%20%20%20%20%20%20%20'age'%20%20%20%3D%3E%20'require%7Cnumber%7Cbetween%3A1%2C120'%2C%5Cn%20%20%20%20%20%20%20%20'email'%20%3D%3E%20'require%7Cemail'%5Cn%20%20%20%20%5D%3B%5Cn%5Cn%20%20%20%20protected%20%24message%20%20%3D%20%20%20%5B%5Cn%20%20%20%20%20%20%20%20'name.require'%20%3D%3E%20'%E5%90%8D%E7%A7%B0%E5%BF%85%E9%A1%BB'%2C%5Cn%20%20%20%20%20%20%20%20'name.max'%20%20%20%20%20%3D%3E%20'%E5%90%8D%E7%A7%B0%E6%9C%80%E5%A4%9A%E4%B8%8D%E8%83%BD%E8%B6%85%E8%BF%8725%E4%B8%AA%E5%AD%97%E7%AC%A6'%2C%5Cn%20%20%20%20%20%20%20%20'age.require'%20%20%20%3D%3E%20'%E5%B9%B4%E9%BE%84%E5%BF%85%E9%A1%BB%E6%98%AF%E6%95%B0%E5%AD%97'%2C%5Cn%20%20%20%20%20%20%20%20'age.number'%20%20%20%3D%3E%20'%E5%B9%B4%E9%BE%84%E5%BF%85%E9%A1%BB%E6%98%AF%E6%95%B0%E5%AD%97'%2C%5Cn%20%20%20%20%20%20%20%20'age.between'%20%20%3D%3E%20'%E5%B9%B4%E9%BE%84%E5%8F%AA%E8%83%BD%E5%9C%A81-120%E4%B9%8B%E9%97%B4'%2C%5Cn%20%20%20%20%20%20%20%20'email.require'%20%20%20%20%20%20%20%20%3D%3E%20'%E9%82%AE%E7%AE%B1%E5%BF%85%E9%A1%BB%E6%98%AF%E6%95%B0%E5%AD%97'%2C%5Cn%20%20%20%20%20%20%20%20'email.email'%20%20%20%20%20%20%20%20%3D%3E%20'%E9%82%AE%E7%AE%B1%E6%A0%BC%E5%BC%8F%E9%94%99%E8%AF%AF'%5Cn%20%20%20%20%5D%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22X2j4T%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua8f19fee\" id=\"ua8f19fee\"><span data-lake-id=\"u279cedbd\" id=\"u279cedbd\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">验证器调用代码如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24data%20%3D%20%5B%5Cn%20%20%20%20'name'%20%20%3D%3E%20'Tinywan'%2C%5Cn%20%20%20%20'age'%20%20%3D%3E%2024%2C%5Cn%20%20%20%20'email'%20%3D%3E%20'Tinywan%40163.com'%5Cn%5D%3B%5Cn%24validate%20%3D%20new%20%5C%5Capp%5C%5Cindex%5C%5Cvalidate%5C%5CUserValidate%3B%5Cn%5Cnif%20(!%24validate-%3Echeck(%24data))%20%7B%5Cn%20%20%20%20var_dump(%24validate-%3EgetError())%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22uRHH6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u89b218a6\" id=\"u89b218a6\"><span data-lake-id=\"ucebb21f0\" id=\"ucebb21f0\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">更多用法可以参考6.0完全开发手册的</span><a href=\"https://www.kancloud.cn/manual/thinkphp6_0/1037623\" target=\"_blank\" data-lake-id=\"u4bbfd8eb\" id=\"u4bbfd8eb\"><span data-lake-id=\"u3c7e734c\" id=\"u3c7e734c\">验证</span></a><span data-lake-id=\"uc56a9b64\" id=\"uc56a9b64\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">章节</span></p><p data-lake-id=\"u6b7e1a89\" id=\"u6b7e1a89\"><span data-lake-id=\"ufa3da8b3\" id=\"ufa3da8b3\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">​</span><br></p><h3 data-lake-id=\"rlWQf\" id=\"rlWQf\"><span data-lake-id=\"u6d3fd55b\" id=\"u6d3fd55b\">安装验证码</span></h3><h4 data-lake-id=\"LR7LK\" id=\"LR7LK\"><span data-lake-id=\"u91a17307\" id=\"u91a17307\">gregwar/captcha</span></h4><p data-lake-id=\"u3d71f017\" id=\"u3d71f017\"><span data-lake-id=\"udc95b5b7\" id=\"udc95b5b7\">项目地址 </span><a href=\"https://github.com/Gregwar/Captcha\" target=\"_blank\" data-lake-id=\"u00c44440\" id=\"u00c44440\"><span data-lake-id=\"u74b499a7\" id=\"u74b499a7\">https://github.com/Gregwar/Captcha</span></a></p><h4 data-lake-id=\"TfQcz\" id=\"TfQcz\"><span data-lake-id=\"u0f2c2f37\" id=\"u0f2c2f37\">安装</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20gregwar%2Fcaptcha%201.*%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ppBCy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"zvZRk\" id=\"zvZRk\"><span data-lake-id=\"u2eea1639\" id=\"u2eea1639\">基本使用1</span></h4><p data-lake-id=\"u829bf292\" id=\"u829bf292\"><strong><span data-lake-id=\"ubea31b29\" id=\"ubea31b29\">建立文件 app/controller/Login.php</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnnamespace%20app%5C%5Ccontroller%3B%5Cn%5Cnuse%20support%5C%5CRequest%3B%5Cnuse%20Gregwar%5C%5CCaptcha%5C%5CCaptchaBuilder%3B%5Cn%5Cnclass%20Login%5Cn%7B%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E6%B5%8B%E8%AF%95%E9%A1%B5%E9%9D%A2%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20index(Request%20%24request)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20return%20view('login%2Findex')%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E8%BE%93%E5%87%BA%E9%AA%8C%E8%AF%81%E7%A0%81%E5%9B%BE%E5%83%8F%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20captcha(Request%20%24request)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9D%E5%A7%8B%E5%8C%96%E9%AA%8C%E8%AF%81%E7%A0%81%E7%B1%BB%5Cn%20%20%20%20%20%20%20%20%24builder%20%3D%20new%20CaptchaBuilder%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E7%94%9F%E6%88%90%E9%AA%8C%E8%AF%81%E7%A0%81%5Cn%20%20%20%20%20%20%20%20%24builder-%3Ebuild()%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%B0%86%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E5%80%BC%E5%AD%98%E5%82%A8%E5%88%B0session%E4%B8%AD%5Cn%20%20%20%20%20%20%20%20%24request-%3Esession()-%3Eset('captcha'%2C%20strtolower(%24builder-%3EgetPhrase()))%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%BE%97%E9%AA%8C%E8%AF%81%E7%A0%81%E5%9B%BE%E7%89%87%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20%24img_content%20%3D%20%24builder-%3Eget()%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%BE%93%E5%87%BA%E9%AA%8C%E8%AF%81%E7%A0%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20return%20response(%24img_content%2C%20200%2C%20%5B'Content-Type'%20%3D%3E%20'image%2Fjpeg'%5D)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F**%5Cn%20%20%20%20%20*%20%E6%A3%80%E6%9F%A5%E9%AA%8C%E8%AF%81%E7%A0%81%5Cn%20%20%20%20%20*%2F%5Cn%20%20%20%20public%20function%20check(Request%20%24request)%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96post%E8%AF%B7%E6%B1%82%E4%B8%AD%E7%9A%84captcha%E5%AD%97%E6%AE%B5%5Cn%20%20%20%20%20%20%20%20%24captcha%20%3D%20%24request-%3Epost('captcha')%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%AF%B9%E6%AF%94session%E4%B8%AD%E7%9A%84captcha%E5%80%BC%5Cn%20%20%20%20%20%20%20%20if%20(strtolower(%24captcha)%20!%3D%3D%20%24request-%3Esession()-%3Eget('captcha'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20json(%5B'code'%20%3D%3E%20400%2C%20'msg'%20%3D%3E%20'%E8%BE%93%E5%85%A5%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%E4%B8%8D%E6%AD%A3%E7%A1%AE'%5D)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20json(%5B'code'%20%3D%3E%200%2C%20'msg'%20%3D%3E%20'ok'%5D)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Z281b%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uaa9b90d9\" id=\"uaa9b90d9\" style=\"text-align: left\"><strong><span data-lake-id=\"ub6f736fa\" id=\"ub6f736fa\" class=\"lake-fontsize-12\" style=\"color: rgb(44, 62, 80) !important\">建立模版文件</span></strong><strong><span data-lake-id=\"u483e1d8d\" id=\"u483e1d8d\" class=\"lake-fontsize-12\" style=\"color: rgb(0, 0, 0)\">app/view/login/index.html</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22html%22%2C%22code%22%3A%22%3C!doctype%20html%3E%5Cn%3Chtml%3E%5Cn%3Chead%3E%5Cn%20%20%20%20%3Cmeta%20charset%3D%5C%22utf-8%5C%22%3E%5Cn%20%20%20%20%3Ctitle%3E%E9%AA%8C%E8%AF%81%E7%A0%81%E6%B5%8B%E8%AF%95%3C%2Ftitle%3E%20%20%5Cn%3C%2Fhead%3E%5Cn%3Cbody%3E%5Cn%20%20%20%20%3Cform%20method%3D%5C%22post%5C%22%20action%3D%5C%22%2Flogin%2Fcheck%5C%22%3E%5Cn%20%20%20%20%20%20%20%3Cimg%20src%3D%5C%22%2Flogin%2Fcaptcha%5C%22%20%2F%3E%3Cbr%3E%5Cn%20%20%20%20%20%20%20%20%3Cinput%20type%3D%5C%22text%5C%22%20name%3D%5C%22captcha%5C%22%20%2F%3E%5Cn%20%20%20%20%20%20%20%20%3Cinput%20type%3D%5C%22submit%5C%22%20value%3D%5C%22%E6%8F%90%E4%BA%A4%5C%22%20%2F%3E%5Cn%20%20%20%20%3C%2Fform%3E%5Cn%3C%2Fbody%3E%5Cn%3C%2Fhtml%3E%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Vo6r2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"PFl5v\" id=\"PFl5v\"><span data-lake-id=\"u2e0536dd\" id=\"u2e0536dd\">基本使用2 （直接在控制器里使用并验证）</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%5Cn%24this-%3Evalidate%20%3D%20new%20%5C%5Cthink%5C%5CValidate()%3B%5Cn%24param%20%3D%20%24request-%3Eall()%3B%5Cn%5Cn%24this-%3Evalidate-%3Erule(%5B%5Cn%20%20%20%20'captcha%7C%E9%AA%8C%E8%AF%81%E7%A0%81'%20%20%20%3D%3E%20'require'%2C%5Cn%20%20%20%20'uniqid%7Cuniqid'%20%3D%3E%20'require'%2C%5Cn%20%20%20%20'username%7C%E7%94%A8%E6%88%B7%E5%90%8D'%20%20%3D%3E%20'require'%2C%5Cn%20%20%20%20'password%7C%E5%AF%86%E7%A0%81'%20%20%20%3D%3E%20'require'%2C%5Cn%5D)%3B%5Cn%24this-%3Evalidate-%3Emessage(%5B%5Cn%20%20%20%20'captcha.require'%20%20%3D%3E%20'%E9%AA%8C%E8%AF%81%E7%A0%81%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%2C%5Cn%20%20%20%20'uniqid.require'%20%20%20%3D%3E%20'uniqid%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%2C%5Cn%20%20%20%20'username.require'%20%3D%3E%20'%E7%99%BB%E5%BD%95%E5%90%8D%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%2C%5Cn%20%20%20%20'password.require'%20%3D%3E%20'%E5%AF%86%E7%A0%81%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA'%2C%5Cn%5D)%3B%5Cnif%20(%20!%20%24this-%3Evalidate-%3Echeck(%24param))%20%7B%5Cn%20%20%20%20return%20json(%24this-%3Evalidate-%3EgetError())%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IVUvx%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"f0Slx\" id=\"f0Slx\"><br></h3><p data-lake-id=\"u7870fe8e\" id=\"u7870fe8e\"><br></p><h3 data-lake-id=\"J9rQA\" id=\"J9rQA\"><span data-lake-id=\"ufc613bb4\" id=\"ufc613bb4\" style=\"color: rgb(33, 37, 41)\">webman/casbin权限控制插件</span></h3><h4 data-lake-id=\"zORzd\" id=\"zORzd\"><span data-lake-id=\"ud079c044\" id=\"ud079c044\">简介</span></h4><p data-lake-id=\"u93fff3b8\" id=\"u93fff3b8\"><span data-lake-id=\"u97da0ca9\" id=\"u97da0ca9\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">webman casbin 权限控制插件。它基于 </span><a href=\"https://github.com/php-casbin/php-casbin\" target=\"_blank\" data-lake-id=\"u66bc9c44\" id=\"u66bc9c44\"><span data-lake-id=\"u783f614f\" id=\"u783f614f\">PHP-Casbin</span></a><span data-lake-id=\"u1d2cdbfb\" id=\"u1d2cdbfb\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">, 一个强大的、高效的开源访问控制框架，支持基于</span><span data-lake-id=\"u873573aa\" id=\"u873573aa\" style=\"color: rgb(0, 0, 0)\">ACL</span><span data-lake-id=\"uef2ac13f\" id=\"uef2ac13f\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">, </span><span data-lake-id=\"ud99b4a6d\" id=\"ud99b4a6d\" style=\"color: rgb(0, 0, 0)\">RBAC</span><span data-lake-id=\"ued1be23f\" id=\"ued1be23f\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">, </span><span data-lake-id=\"u9a1ce53c\" id=\"u9a1ce53c\" style=\"color: rgb(0, 0, 0)\">ABAC</span><span data-lake-id=\"u73d2e752\" id=\"u73d2e752\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">等访问控制模型。</span></p><h4 data-lake-id=\"xk2uh\" id=\"xk2uh\"><span data-lake-id=\"u15f405f5\" id=\"u15f405f5\">依赖</span></h4><ul list=\"u9f8ad770\"><li fid=\"ufcff1b11\" data-lake-id=\"ub7c3fdce\" id=\"ub7c3fdce\" style=\"text-align: left\"><a href=\"https://www.workerman.net/doc/webman/db/others.html\" target=\"_blank\" data-lake-id=\"u42d80fc1\" id=\"u42d80fc1\"><span data-lake-id=\"u22715f73\" id=\"u22715f73\">ThinkORM</span></a><span data-lake-id=\"u7a631701\" id=\"u7a631701\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">（默认）</span></li><li fid=\"ufcff1b11\" data-lake-id=\"u39fa47de\" id=\"u39fa47de\" style=\"text-align: left\"><a href=\"https://github.com/PHP-DI/PHP-DI\" target=\"_blank\" data-lake-id=\"uad800eef\" id=\"uad800eef\"><span data-lake-id=\"u5a0fc1ad\" id=\"u5a0fc1ad\">PHP-DI</span></a></li><li fid=\"ufcff1b11\" data-lake-id=\"ua4a224d6\" id=\"ua4a224d6\" style=\"text-align: left\"><a href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" target=\"_blank\" data-lake-id=\"u313b3c4b\" id=\"u313b3c4b\"><span data-lake-id=\"ueba9b6b8\" id=\"ueba9b6b8\">illuminate/database</span></a><span data-lake-id=\"u1d0612c8\" id=\"u1d0612c8\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">（可选）</span></li></ul><p data-lake-id=\"u1051921b\" id=\"u1051921b\" style=\"text-align: left\"><span data-lake-id=\"u7929d999\" id=\"u7929d999\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">​</span><br></p><h4 data-lake-id=\"sVRFJ\" id=\"sVRFJ\"><span data-lake-id=\"u13a20a12\" id=\"u13a20a12\">安装</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20casbin%2Fwebman-permission%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22prTIQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"uzenz\" id=\"uzenz\"><span data-lake-id=\"u4d7fa5e0\" id=\"u4d7fa5e0\">使用</span></h4><ol list=\"u0c6620c2\"><li fid=\"ubd1da92c\" data-lake-id=\"uda5fa183\" id=\"uda5fa183\"><span data-lake-id=\"u5fc6e7eb\" id=\"u5fc6e7eb\">依赖注入配置<br /></span><span data-lake-id=\"u3a37d533\" id=\"u3a37d533\">修改配置config/container.php，其最终内容如下：</span></li></ol><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24builder%20%3D%20new%20%5C%5CDI%5C%5CContainerBuilder()%3B%5Cn%24builder-%3EaddDefinitions(config('dependence'%2C%20%5B%5D))%3B%5Cn%24builder-%3EuseAutowiring(true)%3B%5Cnreturn%20%24builder-%3Ebuild()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22W2M9q%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ub3cefb28\" id=\"ub3cefb28\"><br></p><p data-lake-id=\"u46784286\" id=\"u46784286\"><span data-lake-id=\"u109c6909\" id=\"u109c6909\">2. 数据库配置</span></p><blockquote data-lake-id=\"u8a03c41e\" id=\"u8a03c41e\"><p data-lake-id=\"uad0dd107\" id=\"uad0dd107\"><span data-lake-id=\"u69a25934\" id=\"u69a25934\"><br /></span><span data-lake-id=\"u36e9c683\" id=\"u36e9c683\">默认策略存储是使用的ThinkORM。 如使用 laravel的数据库 illuminate/database，请按照官方文档按照相应的依赖包：</span><a href=\"https://www.workerman.net/doc/webman/db/tutorial.html\" target=\"_blank\" data-lake-id=\"u78564a2f\" id=\"u78564a2f\"><span data-lake-id=\"ub87a8d2c\" id=\"ub87a8d2c\">https://www.workerman.net/doc/webman/db/tutorial.html</span></a></p></blockquote><blockquote data-lake-id=\"u8073b04a\" id=\"u8073b04a\"></blockquote><p data-lake-id=\"ub9ce0c63\" id=\"ub9ce0c63\"><br></p><p data-lake-id=\"uae812ddb\" id=\"uae812ddb\"><span data-lake-id=\"u71ff3395\" id=\"u71ff3395\">🚀 (1) 模型配置<br /></span><span data-lake-id=\"u9798c83a\" id=\"u9798c83a\">📒📒📒 使用ThinkORM（默认） 📒📒📒</span></p><p data-lake-id=\"u319d96ab\" id=\"u319d96ab\"><br></p><p data-lake-id=\"u4858bf40\" id=\"u4858bf40\"><span data-lake-id=\"ucbc3e3a9\" id=\"ucbc3e3a9\">修改数据库 thinkorm.php 配置<br /></span><span data-lake-id=\"u794599e3\" id=\"u794599e3\">📕📕📕 使用laravel数据库（可选） 📕📕📕</span></p><p data-lake-id=\"ud9f12b1d\" id=\"ud9f12b1d\"><br></p><p data-lake-id=\"u603c6803\" id=\"u603c6803\"><span data-lake-id=\"u4413fb6a\" id=\"u4413fb6a\">修改数据库 database.php 配置<br /></span><span data-lake-id=\"u6facabad\" id=\"u6facabad\">修改数据库 permission.php 的adapter适配器为laravel适配器</span></p><p data-lake-id=\"u5eece00b\" id=\"u5eece00b\"><span data-lake-id=\"ufb63b5b3\" id=\"ufb63b5b3\">​</span><br></p><p data-lake-id=\"u047d2742\" id=\"u047d2742\"><span data-lake-id=\"uf7b375c7\" id=\"uf7b375c7\">(2) 创建 casbin_rule 数据表</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22CREATE%20TABLE%20%60casbin_rule%60%20(%5Cn%5Ct%60id%60%20BIGINT%20(%2020%20)%20UNSIGNED%20NOT%20NULL%20AUTO_INCREMENT%2C%5Cn%5Ct%60ptype%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5Ct%60v0%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5Ct%60v1%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5Ct%60v2%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5Ct%60v3%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5Ct%60v4%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5Ct%60v5%60%20VARCHAR%20(%20128%20)%20NOT%20NULL%20DEFAULT%20''%2C%5Cn%5CtPRIMARY%20KEY%20(%20%60id%60%20)%20USING%20BTREE%2C%5Cn%5CtKEY%20%60idx_ptype%60%20(%20%60ptype%60%20)%20USING%20BTREE%2C%5Cn%5CtKEY%20%60idx_v0%60%20(%20%60v0%60%20)%20USING%20BTREE%2C%5Cn%5CtKEY%20%60idx_v1%60%20(%20%60v1%60%20)%20USING%20BTREE%2C%5Cn%5CtKEY%20%60idx_v2%60%20(%20%60v2%60%20)%20USING%20BTREE%2C%5Cn%5CtKEY%20%60idx_v3%60%20(%20%60v3%60%20)%20USING%20BTREE%2C%5Cn%5CtKEY%20%60idx_v4%60%20(%20%60v4%60%20)%20USING%20BTREE%2C%5Cn%20%20%20%20KEY%20%60idx_v5%60%20(%20%60v5%60%20)%20USING%20BTREE%20%5Cn)%20ENGINE%20%3D%20INNODB%20CHARSET%20%3D%20utf8mb4%20COMMENT%20%3D%20'%E7%AD%96%E7%95%A5%E8%A7%84%E5%88%99%E8%A1%A8'%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22psQw0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u86ba4b5d\" id=\"u86ba4b5d\"><span data-lake-id=\"u060f9050\" id=\"u060f9050\">(3) 配置 config/redis 配置</span></p><p data-lake-id=\"u88319397\" id=\"u88319397\"><span data-lake-id=\"ue6c7d539\" id=\"ue6c7d539\">重启webman</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22php%20start.php%20restart%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IrN1P%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u152b2f46\" id=\"u152b2f46\"><span data-lake-id=\"u92640bef\" id=\"u92640bef\">或者</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22php%20start.php%20restart%20-d%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22vBQwi%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"wJI2f\" id=\"wJI2f\"><span data-lake-id=\"u3512c43e\" id=\"u3512c43e\">用法</span></h4><p data-lake-id=\"u2e5494b1\" id=\"u2e5494b1\"><span data-lake-id=\"u0ed54eed\" id=\"u0ed54eed\">安装成功后，可以这样使用:</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22use%20Tinywan%5C%5CCasbin%5C%5CPermission%3B%5Cn%5Cn%2F%2F%20adds%20permissions%20to%20a%20user%5CnPermission%3A%3AaddPermissionForUser('eve'%2C%20'articles'%2C%20'read')%3B%5Cn%2F%2F%20adds%20a%20role%20for%20a%20user.%5CnPermission%3A%3AaddRoleForUser('eve'%2C%20'writer')%3B%5Cn%2F%2F%20adds%20permissions%20to%20a%20rule%5CnPermission%3A%3AaddPolicy('writer'%2C%20'articles'%2C'edit')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FXsuH%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"udc2550e9\" id=\"udc2550e9\"><span data-lake-id=\"u67cf80ae\" id=\"u67cf80ae\">你可以检查一个用户是否拥有某个权限:</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22if%20(Permission%3A%3Aenforce(%5C%22eve%5C%22%2C%20%5C%22articles%5C%22%2C%20%5C%22edit%5C%22))%20%7B%5Cn%20%20%20%20echo%20'%E6%81%AD%E5%96%9C%E4%BD%A0%EF%BC%81%E9%80%9A%E8%BF%87%E6%9D%83%E9%99%90%E8%AE%A4%E8%AF%81'%3B%5Cn%7D%20else%20%7B%5Cn%20%20%20%20echo%20'%E5%AF%B9%E4%B8%8D%E8%B5%B7%EF%BC%8C%E6%82%A8%E6%B2%A1%E6%9C%89%E8%AF%A5%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90'%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZvQFh%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h4 data-lake-id=\"rtRl1\" id=\"rtRl1\"><span data-lake-id=\"u69d01e4a\" id=\"u69d01e4a\">具体教程：</span></h4><p data-lake-id=\"u10f31d5c\" id=\"u10f31d5c\"><a href=\"https://github.com/php-casbin/webman-permission\" target=\"_blank\" data-lake-id=\"u53e36c57\" id=\"u53e36c57\"><span data-lake-id=\"uac009276\" id=\"uac009276\">https://github.com/php-casbin/webman-permission</span></a></p><p data-lake-id=\"uf33518b8\" id=\"uf33518b8\"><span data-lake-id=\"u5c52a9ae\" id=\"u5c52a9ae\">更多 API 参考 </span><a href=\"https://casbin.org/docs/en/management-api\" target=\"_blank\" data-lake-id=\"ud5675d45\" id=\"ud5675d45\"><span data-lake-id=\"u9914c2ad\" id=\"u9914c2ad\">Casbin API</span></a><span data-lake-id=\"u48553bfd\" id=\"u48553bfd\"> 。</span></p><p data-lake-id=\"u660e87b0\" id=\"u660e87b0\"><span data-lake-id=\"uf2443cb5\" id=\"uf2443cb5\">​</span><br></p><h3 data-lake-id=\"tuBsI\" id=\"tuBsI\"><span data-lake-id=\"u46f25b5a\" id=\"u46f25b5a\">路由自动解析</span></h3><p data-lake-id=\"u0168610e\" id=\"u0168610e\"><span data-lake-id=\"uc7632630\" id=\"uc7632630\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">当app目录结构非常复杂，webman无法自动解析时可以安装webman的</span><a href=\"https://www.workerman.net/plugin/17\" target=\"_blank\" data-lake-id=\"u5477a7a4\" id=\"u5477a7a4\"><span data-lake-id=\"uc1634ea3\" id=\"uc1634ea3\">自动路由插件</span></a><span data-lake-id=\"u1cd7ab86\" id=\"u1cd7ab86\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">，它会自动检索所有的控制器并为其自动配置对应的路由，让其通过url可以访问。</span></p><h4 data-lake-id=\"nH9pF\" id=\"nH9pF\"><span data-lake-id=\"uecf5b89f\" id=\"uecf5b89f\">安装</span></h4><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20webman%2Fauto-route%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Hteq3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"ue4b6d290\" id=\"ue4b6d290\"><p data-lake-id=\"ueec470e6\" id=\"ueec470e6\"><strong><span data-lake-id=\"ub743d829\" id=\"ub743d829\" class=\"lake-fontsize-12\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255)\">提示</span></strong><span data-lake-id=\"u4d9f91aa\" id=\"u4d9f91aa\"><br /></span><span data-lake-id=\"ua4cb2f8d\" id=\"ua4cb2f8d\" class=\"lake-fontsize-12\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255)\">你仍然可以在</span><span data-lake-id=\"uf169f384\" id=\"uf169f384\" style=\"color: rgb(0, 0, 0)\">config/route.php</span><span data-lake-id=\"u72c4819d\" id=\"u72c4819d\" class=\"lake-fontsize-12\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255)\">中手动设置某些路由，自动路由插件会优先使用</span><span data-lake-id=\"u1094b171\" id=\"u1094b171\" style=\"color: rgb(0, 0, 0)\">config/route.php</span><span data-lake-id=\"u911d2ad6\" id=\"u911d2ad6\" class=\"lake-fontsize-12\" style=\"color: rgb(44, 62, 80); background-color: rgb(243, 249, 255)\"> 里的配置。</span></p></blockquote><p data-lake-id=\"ue9341e87\" id=\"ue9341e87\"><br></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 6,
    "hits": 6,
    "comments_count": 0,
    "word_count": 1900,
    "created_at": "2022-04-21T01:15:40.000Z",
    "updated_at": "2023-07-27T02:07:39.000Z",
    "content_updated_at": "2023-07-27T02:07:39.000Z",
    "published_at": "2022-04-27T01:28:24.000Z",
    "first_published_at": "2022-04-21T09:59:32.090Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 956243626,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 74186000,
    "type": "Doc",
    "slug": "rkvcpo",
    "title": "10个提高开发效率的 VS Code 快捷键！",
    "description": "tags: [git,svn]categories: 学无止境copyright_author_href: https://segmentfault.com/u/minnanitkongcopyright_url: https://segmentfault.com/a/119000003986...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590137-513fcf0c-b29b-418a-bd18-0055fdc2a384.gif",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u015d60d0\" class=\"ne-p\"><span class=\"ne-text\">tags: [git,svn]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://segmentfault.com/u/minnanitkong</span></p><p id=\"u90c59306\" class=\"ne-p\"><span class=\"ne-text\">copyright_url: https://segmentfault.com/a/1190000039863001</span></p><p id=\"u7364e09e\" class=\"ne-p\"><span class=\"ne-text\">copyright_author: </span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">前端小智</span></p><hr id=\"WZFxG\" class=\"ne-hr\"><p id=\"u34a4e230\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">作者：Mariana Simon<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">译者：前端小智<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">来源：dev</span></p><p id=\"udd2c9581\" class=\"ne-p\"><br></p><p id=\"u0321c1c0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">下面列出了一些智米们都应该尽快学习的快捷键。我真希望一开始写代码就知道它们。它可以节省我们数小时的手动码字。</span></p><h4 id=\"fqM2b\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">1. Ctrl + P：显示搜索栏以搜索文件</span></h4><p id=\"uf4f0fc97\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + P)</span></p><p id=\"u23197d9f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">我们经常在多个文件进行切换，这个快捷键可以帮助我们快速找到我们想到的文件。</span></p><p id=\"ude2eb7f1\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590137-513fcf0c-b29b-418a-bd18-0055fdc2a384.gif\" width=\"880\" id=\"ufe9e00e8\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"zvDbo\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">2. Ctrl + Shift + P：显示命令面板</span></h4><p id=\"u22d00ee9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + P)</span></p><p id=\"u53a17003\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">这个快捷键显示可以在其中搜索操作的命令面板。</span></p><p id=\"u8a4d9f0d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590567-31183c15-4a57-4793-ae1d-91bd5a7006ef.gif\" width=\"880\" id=\"u00c6489f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"o7Uds\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3. Crtl + B：切换侧栏</span></h4><p id=\"u54994134\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + B)</span></p><p id=\"uc61d2b92\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">显示或隐藏侧栏。</span></p><p id=\"u72b0a9a7\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590050-350920c8-9bdc-4d66-968f-577e3fd03419.gif\" width=\"880\" id=\"ue15658b1\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"nAC9J\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">4. Ctrl + Shift + E：移到资源管理器窗口</span></h4><p id=\"ue355a57b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + E)</span></p><p id=\"u90d06b6b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">移动到资源管理器窗口，高亮显示我们文件所在的位置。</span></p><p id=\"u37e7e1ca\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590116-7f7209e7-254e-40a7-b73b-d6fcdb2b59b6.gif\" width=\"880\" id=\"uf7b29336\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"RWXXN\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">5. Ctrl + Shift + M：快速显示错误和警告</span></h4><p id=\"u9807b034\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + M)</span></p><p id=\"u75ba63c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">每个人都喜欢没有 but 的代码，这个快捷键可以帮助我们更好的查看错误原因。</span></p><p id=\"uc2e89194\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590135-f835e547-5ee1-47ff-a95d-8d38b2f28c75.gif\" width=\"880\" id=\"ubaea163f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"Z21pN\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">6. Ctrl + Shift + L：多光标选择</span></h4><p id=\"ua35be47d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + L)</span></p><p id=\"u606b9080\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">添加其他光标以编辑所有当前选中项，通常比进行搜索和替换全部操作更容易出错。</span></p><p id=\"u8dab931b\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590892-8c021990-b2a6-4f69-9b6d-ab91a2132083.gif\" width=\"574\" id=\"u736725b2\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"v5Vdw\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">7. Ctrl + D:逐个选择</span></h4><p id=\"u985a8688\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd+D)</span></p><p id=\"u2000b780\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">与上一个类似，但是如果要一个一个选中，可以使用</span><span class=\"ne-text\" style=\"color: rgb(214, 51, 132); font-size: 16px\">Ctrl +D</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">。</span></p><p id=\"ub0021766\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591156-8b288fde-6208-463c-aec5-5c6c5b09bf17.gif\" width=\"406\" id=\"u7f4479f9\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"WyIU8\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">8. Ctrl + /：切换行注释</span></h4><p id=\"u4e8456e8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd+/)</span></p><p id=\"u1a6f7fd7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">在注释和未注释行行为之间切换。</span></p><p id=\"udffd0378\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591086-9ae9cc01-001e-46f0-9a42-f81c55f1faed.gif\" width=\"778\" id=\"u38ffe670\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"GHHu6\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">9. Ctrl + Shift + I:格式化整个文件</span></h4><p id=\"ub97a9b7f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Shift + Option + F)</span></p><p id=\"udd9418c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Windows: Windows Shift + Alt + F)</span></p><p id=\"u3e3ebf21\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">格式化整个活动文件或提示你安装Formatter 扩展名，我使用</span><span class=\"ne-text\" style=\"color: rgb(214, 51, 132); font-size: 16px\">Prettier</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">插件来格式化JS代码。</span></p><p id=\"u1488e613\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591138-41f09000-64ce-48fa-a8fb-b6085f44a4ff.gif\" width=\"778\" id=\"u2413748f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"tA5eL\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">10. Alt +向上或 Alt +向下：移动行</span></h4><p id=\"u4ae5cfbd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Opt+Down or Opt+Up)</span></p><p id=\"u36a3cc45\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">非常简单，上下移动行。</span></p><p id=\"ub48c4372\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591093-6bc6dce8-c0c9-4e1a-bcee-0afbcee1564a.gif\" width=\"880\" id=\"u1d16b436\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"Jr2bm\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">彩蛋</span></h4><p id=\"u5ba1e662\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">Ctrl +Space ：显示提示</span></p><p id=\"u9f875650\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591657-93c97ccb-41d2-47c4-9cd4-3a461bc41ff5.gif\" width=\"785\" id=\"ueb8ba1be\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h2 id=\"R3qxY\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\"></span></h2><p id=\"uf496ab92\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">代码部署后可能存在的BUG没法实时知道，事后为了解决这些BUG，花了大量的时间进行log 调试，这边顺便给大家推荐一个好用的BUG监控工具</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"> </span></strong><a href=\"https://link.segmentfault.com/?enc=CLWU1etdq0lFLRGtjMp4Bg%3D%3D.NqTkakjHO%2F%2Fd6y8t0Ymbd93RFBDyWEAz0epGR0%2BAa%2FaduKnUJ1JN4Gx6e9YAnzps\" data-href=\"https://link.segmentfault.com/?enc=CLWU1etdq0lFLRGtjMp4Bg%3D%3D.NqTkakjHO%2F%2Fd6y8t0Ymbd93RFBDyWEAz0epGR0%2BAa%2FaduKnUJ1JN4Gx6e9YAnzps\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Fundebug</span></a><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">。</span></strong></p><p id=\"u5af52960\" class=\"ne-p\"><a href=\"https://link.segmentfault.com/?enc=cdNbXkdwDJCZYSrcdz%2FrMQ%3D%3D.IwRLQqYmqw7w%2B9ZO3g6y3n5q9Ce75JFpWF1B3%2FsJQDiPvHWBWRvmY80ZDxzMdqBBscuCRG27NVB13DgTSEPFhMtKCp9xFFPHipAXLmtC60o%3D\" data-href=\"https://link.segmentfault.com/?enc=cdNbXkdwDJCZYSrcdz%2FrMQ%3D%3D.IwRLQqYmqw7w%2B9ZO3g6y3n5q9Ce75JFpWF1B3%2FsJQDiPvHWBWRvmY80ZDxzMdqBBscuCRG27NVB13DgTSEPFhMtKCp9xFFPHipAXLmtC60o%3D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\"><br /></span></a></p></div>",
    "body": "tags: [git,svn]<br />categories: 学无止境<br />copyright_author_href: https://segmentfault.com/u/minnanitkong<br />copyright_url: https://segmentfault.com/a/1190000039863001<br />copyright_author: 前端小智\n\n---\n\n作者：Mariana Simon<br />译者：前端小智<br />来源：dev\n\n下面列出了一些智米们都应该尽快学习的快捷键。我真希望一开始写代码就知道它们。它可以节省我们数小时的手动码字。\n<a name=\"fqM2b\"></a>\n#### 1. Ctrl + P：显示搜索栏以搜索文件\n(Mac: Cmd + P)<br />我们经常在多个文件进行切换，这个快捷键可以帮助我们快速找到我们想到的文件。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590137-513fcf0c-b29b-418a-bd18-0055fdc2a384.gif#clientId=u86b9cea9-f828-4&from=paste&id=ufe9e00e8&originHeight=495&originWidth=880&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc8effea9-385f-4dc4-9709-2d5a575d00e&title=)\n<a name=\"zvDbo\"></a>\n#### 2. Ctrl + Shift + P：显示命令面板\n(Mac: Cmd + Shift + P)<br />这个快捷键显示可以在其中搜索操作的命令面板。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590567-31183c15-4a57-4793-ae1d-91bd5a7006ef.gif#clientId=u86b9cea9-f828-4&from=paste&id=u00c6489f&originHeight=485&originWidth=880&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub24d27f9-1c74-4735-bb56-b93fc89a58c&title=)\n<a name=\"o7Uds\"></a>\n#### 3. Crtl + B：切换侧栏\n(Mac: Cmd + B)<br />显示或隐藏侧栏。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590050-350920c8-9bdc-4d66-968f-577e3fd03419.gif#clientId=u86b9cea9-f828-4&from=paste&id=ue15658b1&originHeight=657&originWidth=880&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u0a07929a-ec30-45fa-9094-334aaa35fb2&title=)\n<a name=\"nAC9J\"></a>\n#### 4. Ctrl + Shift + E：移到资源管理器窗口\n(Mac: Cmd + Shift + E)<br />移动到资源管理器窗口，高亮显示我们文件所在的位置。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590116-7f7209e7-254e-40a7-b73b-d6fcdb2b59b6.gif#clientId=u86b9cea9-f828-4&from=paste&id=uf7b29336&originHeight=513&originWidth=880&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u39ce558b-1ed3-442c-be41-0af5cec8702&title=)\n<a name=\"RWXXN\"></a>\n#### 5. Ctrl + Shift + M：快速显示错误和警告\n(Mac: Cmd + Shift + M)<br />每个人都喜欢没有 but 的代码，这个快捷键可以帮助我们更好的查看错误原因。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590135-f835e547-5ee1-47ff-a95d-8d38b2f28c75.gif#clientId=u86b9cea9-f828-4&from=paste&id=ubaea163f&originHeight=495&originWidth=880&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u040e7b56-0262-4075-8fe8-72eb66021c4&title=)\n<a name=\"Z21pN\"></a>\n#### 6. Ctrl + Shift + L：多光标选择\n(Mac: Cmd + Shift + L)<br />添加其他光标以编辑所有当前选中项，通常比进行搜索和替换全部操作更容易出错。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590892-8c021990-b2a6-4f69-9b6d-ab91a2132083.gif#clientId=u86b9cea9-f828-4&from=paste&id=u736725b2&originHeight=338&originWidth=574&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u45867b5e-ecba-42d2-ae7b-4511c5bb863&title=)\n<a name=\"v5Vdw\"></a>\n#### 7. Ctrl + D:逐个选择\n(Mac: Cmd+D)<br />与上一个类似，但是如果要一个一个选中，可以使用Ctrl +D。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591156-8b288fde-6208-463c-aec5-5c6c5b09bf17.gif#clientId=u86b9cea9-f828-4&from=paste&id=u7f4479f9&originHeight=156&originWidth=406&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u00af636d-36ac-4e6d-8c54-0ef3ea97baf&title=)\n<a name=\"WyIU8\"></a>\n#### 8. Ctrl + /：切换行注释\n(Mac: Cmd+/)<br />在注释和未注释行行为之间切换。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591086-9ae9cc01-001e-46f0-9a42-f81c55f1faed.gif#clientId=u86b9cea9-f828-4&from=paste&id=u38ffe670&originHeight=531&originWidth=778&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u5a5101d4-79a0-4d2a-b9c3-24ebf750b81&title=)\n<a name=\"GHHu6\"></a>\n#### 9. Ctrl + Shift + I:格式化整个文件\n(Mac: Shift + Option + F)<br />(Windows: Windows Shift + Alt + F)<br />格式化整个活动文件或提示你安装Formatter 扩展名，我使用Prettier 插件来格式化JS代码。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591138-41f09000-64ce-48fa-a8fb-b6085f44a4ff.gif#clientId=u86b9cea9-f828-4&from=paste&id=u2413748f&originHeight=531&originWidth=778&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uc59d2a25-a55e-436f-ad1e-c9ec1e0af40&title=)\n<a name=\"tA5eL\"></a>\n#### 10. Alt +向上或 Alt +向下：移动行\n(Mac: Opt+Down or Opt+Up)<br />非常简单，上下移动行。<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591093-6bc6dce8-c0c9-4e1a-bcee-0afbcee1564a.gif#clientId=u86b9cea9-f828-4&from=paste&id=u1d16b436&originHeight=849&originWidth=880&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ub475be97-2174-49db-948d-77c2e6ee16f&title=)\n<a name=\"Jr2bm\"></a>\n#### 彩蛋\nCtrl +Space ：显示提示<br />![](https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591657-93c97ccb-41d2-47c4-9cd4-3a461bc41ff5.gif#clientId=u86b9cea9-f828-4&from=paste&id=ueb8ba1be&originHeight=307&originWidth=785&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u4cd4c378-5123-4885-b615-1482e5c552b&title=)\n<a name=\"R3qxY\"></a>\n## <br />\n**代码部署后可能存在的BUG没法实时知道，事后为了解决这些BUG，花了大量的时间进行log 调试，这边顺便给大家推荐一个好用的BUG监控工具 **[Fundebug](https://link.segmentfault.com/?enc=CLWU1etdq0lFLRGtjMp4Bg%3D%3D.NqTkakjHO%2F%2Fd6y8t0Ymbd93RFBDyWEAz0epGR0%2BAa%2FaduKnUJ1JN4Gx6e9YAnzps)**。**<br />[<br />](https://link.segmentfault.com/?enc=cdNbXkdwDJCZYSrcdz%2FrMQ%3D%3D.IwRLQqYmqw7w%2B9ZO3g6y3n5q9Ce75JFpWF1B3%2FsJQDiPvHWBWRvmY80ZDxzMdqBBscuCRG27NVB13DgTSEPFhMtKCp9xFFPHipAXLmtC60o%3D)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u015d60d0\" class=\"ne-p\"><span class=\"ne-text\">tags: [git,svn]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://segmentfault.com/u/minnanitkong</span></p><p id=\"u90c59306\" class=\"ne-p\"><span class=\"ne-text\">copyright_url: https://segmentfault.com/a/1190000039863001</span></p><p id=\"u7364e09e\" class=\"ne-p\"><span class=\"ne-text\">copyright_author: </span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">前端小智</span></p><hr id=\"WZFxG\" class=\"ne-hr\"><p id=\"u34a4e230\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">作者：Mariana Simon<br />译者：前端小智<br />来源：dev</span></p><p id=\"udd2c9581\" class=\"ne-p\"><br></p><p id=\"u0321c1c0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">下面列出了一些智米们都应该尽快学习的快捷键。我真希望一开始写代码就知道它们。它可以节省我们数小时的手动码字。</span></p><h4 id=\"fqM2b\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">1. Ctrl + P：显示搜索栏以搜索文件</span></h4><p id=\"uf4f0fc97\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + P)</span></p><p id=\"u23197d9f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">我们经常在多个文件进行切换，这个快捷键可以帮助我们快速找到我们想到的文件。</span></p><p id=\"ude2eb7f1\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590137-513fcf0c-b29b-418a-bd18-0055fdc2a384.gif\" width=\"880\" id=\"ufe9e00e8\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"zvDbo\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">2. Ctrl + Shift + P：显示命令面板</span></h4><p id=\"u22d00ee9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + P)</span></p><p id=\"u53a17003\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">这个快捷键显示可以在其中搜索操作的命令面板。</span></p><p id=\"u8a4d9f0d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590567-31183c15-4a57-4793-ae1d-91bd5a7006ef.gif\" width=\"880\" id=\"u00c6489f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"o7Uds\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3. Crtl + B：切换侧栏</span></h4><p id=\"u54994134\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + B)</span></p><p id=\"uc61d2b92\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">显示或隐藏侧栏。</span></p><p id=\"u72b0a9a7\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590050-350920c8-9bdc-4d66-968f-577e3fd03419.gif\" width=\"880\" id=\"ue15658b1\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"nAC9J\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">4. Ctrl + Shift + E：移到资源管理器窗口</span></h4><p id=\"ue355a57b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + E)</span></p><p id=\"u90d06b6b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">移动到资源管理器窗口，高亮显示我们文件所在的位置。</span></p><p id=\"u37e7e1ca\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590116-7f7209e7-254e-40a7-b73b-d6fcdb2b59b6.gif\" width=\"880\" id=\"uf7b29336\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"RWXXN\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">5. Ctrl + Shift + M：快速显示错误和警告</span></h4><p id=\"u9807b034\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + M)</span></p><p id=\"u75ba63c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">每个人都喜欢没有 but 的代码，这个快捷键可以帮助我们更好的查看错误原因。</span></p><p id=\"uc2e89194\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590135-f835e547-5ee1-47ff-a95d-8d38b2f28c75.gif\" width=\"880\" id=\"ubaea163f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"Z21pN\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">6. Ctrl + Shift + L：多光标选择</span></h4><p id=\"ua35be47d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd + Shift + L)</span></p><p id=\"u606b9080\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">添加其他光标以编辑所有当前选中项，通常比进行搜索和替换全部操作更容易出错。</span></p><p id=\"u8dab931b\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363590892-8c021990-b2a6-4f69-9b6d-ab91a2132083.gif\" width=\"574\" id=\"u736725b2\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"v5Vdw\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">7. Ctrl + D:逐个选择</span></h4><p id=\"u985a8688\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd+D)</span></p><p id=\"u2000b780\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">与上一个类似，但是如果要一个一个选中，可以使用</span><span class=\"ne-text\" style=\"color: rgb(214, 51, 132); font-size: 16px\">Ctrl +D</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">。</span></p><p id=\"ub0021766\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591156-8b288fde-6208-463c-aec5-5c6c5b09bf17.gif\" width=\"406\" id=\"u7f4479f9\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"WyIU8\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">8. Ctrl + /：切换行注释</span></h4><p id=\"u4e8456e8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Cmd+/)</span></p><p id=\"u1a6f7fd7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">在注释和未注释行行为之间切换。</span></p><p id=\"udffd0378\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591086-9ae9cc01-001e-46f0-9a42-f81c55f1faed.gif\" width=\"778\" id=\"u38ffe670\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"GHHu6\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">9. Ctrl + Shift + I:格式化整个文件</span></h4><p id=\"ub97a9b7f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Shift + Option + F)</span></p><p id=\"udd9418c9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Windows: Windows Shift + Alt + F)</span></p><p id=\"u3e3ebf21\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">格式化整个活动文件或提示你安装Formatter 扩展名，我使用</span><span class=\"ne-text\" style=\"color: rgb(214, 51, 132); font-size: 16px\">Prettier</span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">插件来格式化JS代码。</span></p><p id=\"u1488e613\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591138-41f09000-64ce-48fa-a8fb-b6085f44a4ff.gif\" width=\"778\" id=\"u2413748f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"tA5eL\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">10. Alt +向上或 Alt +向下：移动行</span></h4><p id=\"u4ae5cfbd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">(Mac: Opt+Down or Opt+Up)</span></p><p id=\"u36a3cc45\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">非常简单，上下移动行。</span></p><p id=\"ub48c4372\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591093-6bc6dce8-c0c9-4e1a-bcee-0afbcee1564a.gif\" width=\"880\" id=\"u1d16b436\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h4 id=\"Jr2bm\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">彩蛋</span></h4><p id=\"u5ba1e662\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">Ctrl +Space ：显示提示</span></p><p id=\"u9f875650\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/gif/27022430/1650363591657-93c97ccb-41d2-47c4-9cd4-3a461bc41ff5.gif\" width=\"785\" id=\"ueb8ba1be\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><h2 id=\"R3qxY\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\"></span></h2><p id=\"uf496ab92\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">代码部署后可能存在的BUG没法实时知道，事后为了解决这些BUG，花了大量的时间进行log 调试，这边顺便给大家推荐一个好用的BUG监控工具</span></strong><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"> </span></strong><a href=\"https://link.segmentfault.com/?enc=CLWU1etdq0lFLRGtjMp4Bg%3D%3D.NqTkakjHO%2F%2Fd6y8t0Ymbd93RFBDyWEAz0epGR0%2BAa%2FaduKnUJ1JN4Gx6e9YAnzps\" data-href=\"https://link.segmentfault.com/?enc=CLWU1etdq0lFLRGtjMp4Bg%3D%3D.NqTkakjHO%2F%2Fd6y8t0Ymbd93RFBDyWEAz0epGR0%2BAa%2FaduKnUJ1JN4Gx6e9YAnzps\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Fundebug</span></a><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">。</span></strong></p><p id=\"u5af52960\" class=\"ne-p\"><a href=\"https://link.segmentfault.com/?enc=cdNbXkdwDJCZYSrcdz%2FrMQ%3D%3D.IwRLQqYmqw7w%2B9ZO3g6y3n5q9Ce75JFpWF1B3%2FsJQDiPvHWBWRvmY80ZDxzMdqBBscuCRG27NVB13DgTSEPFhMtKCp9xFFPHipAXLmtC60o%3D\" data-href=\"https://link.segmentfault.com/?enc=cdNbXkdwDJCZYSrcdz%2FrMQ%3D%3D.IwRLQqYmqw7w%2B9ZO3g6y3n5q9Ce75JFpWF1B3%2FsJQDiPvHWBWRvmY80ZDxzMdqBBscuCRG27NVB13DgTSEPFhMtKCp9xFFPHipAXLmtC60o%3D\" target=\"_blank\" class=\"ne-link\"></a></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u015d60d0\" id=\"u015d60d0\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [git,svn]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://segmentfault.com/u/minnanitkong</span></p><p data-lake-id=\"u90c59306\" id=\"u90c59306\"><span data-lake-id=\"ub8c9e295\" id=\"ub8c9e295\">copyright_url: https://segmentfault.com/a/1190000039863001</span></p><p data-lake-id=\"u7364e09e\" id=\"u7364e09e\"><span data-lake-id=\"u47600aaa\" id=\"u47600aaa\">copyright_author: </span><span data-lake-id=\"ubaa02e4d\" id=\"ubaa02e4d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">前端小智</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22WZFxG%22%7D\"></card><p data-lake-id=\"u34a4e230\" id=\"u34a4e230\"><span data-lake-id=\"ue48992b7\" id=\"ue48992b7\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">作者：Mariana Simon<br />译者：前端小智<br />来源：dev</span></p><p data-lake-id=\"udd2c9581\" id=\"udd2c9581\"><br></p><p data-lake-id=\"u0321c1c0\" id=\"u0321c1c0\"><span data-lake-id=\"uf42d214e\" id=\"uf42d214e\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">下面列出了一些智米们都应该尽快学习的快捷键。我真希望一开始写代码就知道它们。它可以节省我们数小时的手动码字。</span></p><h4 data-lake-id=\"fqM2b\" id=\"fqM2b\"><span data-lake-id=\"u2f2ceaca\" id=\"u2f2ceaca\" style=\"color: rgb(33, 37, 41)\">1. Ctrl + P：显示搜索栏以搜索文件</span></h4><p data-lake-id=\"uf4f0fc97\" id=\"uf4f0fc97\"><span data-lake-id=\"ubbb1186a\" id=\"ubbb1186a\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd + P)</span></p><p data-lake-id=\"u23197d9f\" id=\"u23197d9f\"><span data-lake-id=\"u92a1b717\" id=\"u92a1b717\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">我们经常在多个文件进行切换，这个快捷键可以帮助我们快速找到我们想到的文件。</span></p><p data-lake-id=\"ude2eb7f1\" id=\"ude2eb7f1\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363590137-513fcf0c-b29b-418a-bd18-0055fdc2a384.gif%22%2C%22taskId%22%3A%22uc8effea9-385f-4dc4-9709-2d5a575d00e%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A880%2C%22originHeight%22%3A495%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ufe9e00e8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"zvDbo\" id=\"zvDbo\"><span data-lake-id=\"ua70e34e6\" id=\"ua70e34e6\" style=\"color: rgb(33, 37, 41)\">2. Ctrl + Shift + P：显示命令面板</span></h4><p data-lake-id=\"u22d00ee9\" id=\"u22d00ee9\"><span data-lake-id=\"u1c393b36\" id=\"u1c393b36\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd + Shift + P)</span></p><p data-lake-id=\"u53a17003\" id=\"u53a17003\"><span data-lake-id=\"u767ebb57\" id=\"u767ebb57\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">这个快捷键显示可以在其中搜索操作的命令面板。</span></p><p data-lake-id=\"u8a4d9f0d\" id=\"u8a4d9f0d\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363590567-31183c15-4a57-4793-ae1d-91bd5a7006ef.gif%22%2C%22taskId%22%3A%22ub24d27f9-1c74-4735-bb56-b93fc89a58c%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A880%2C%22originHeight%22%3A485%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u00c6489f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"o7Uds\" id=\"o7Uds\"><span data-lake-id=\"uf4fb2ab7\" id=\"uf4fb2ab7\" style=\"color: rgb(33, 37, 41)\">3. Crtl + B：切换侧栏</span></h4><p data-lake-id=\"u54994134\" id=\"u54994134\"><span data-lake-id=\"ube49854d\" id=\"ube49854d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd + B)</span></p><p data-lake-id=\"uc61d2b92\" id=\"uc61d2b92\"><span data-lake-id=\"u76e82262\" id=\"u76e82262\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">显示或隐藏侧栏。</span></p><p data-lake-id=\"u72b0a9a7\" id=\"u72b0a9a7\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363590050-350920c8-9bdc-4d66-968f-577e3fd03419.gif%22%2C%22taskId%22%3A%22u0a07929a-ec30-45fa-9094-334aaa35fb2%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A880%2C%22originHeight%22%3A657%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ue15658b1%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"nAC9J\" id=\"nAC9J\"><span data-lake-id=\"u37fca048\" id=\"u37fca048\" style=\"color: rgb(33, 37, 41)\">4. Ctrl + Shift + E：移到资源管理器窗口</span></h4><p data-lake-id=\"ue355a57b\" id=\"ue355a57b\"><span data-lake-id=\"u3d71c57f\" id=\"u3d71c57f\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd + Shift + E)</span></p><p data-lake-id=\"u90d06b6b\" id=\"u90d06b6b\"><span data-lake-id=\"u90e6e193\" id=\"u90e6e193\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">移动到资源管理器窗口，高亮显示我们文件所在的位置。</span></p><p data-lake-id=\"u37e7e1ca\" id=\"u37e7e1ca\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363590116-7f7209e7-254e-40a7-b73b-d6fcdb2b59b6.gif%22%2C%22taskId%22%3A%22u39ce558b-1ed3-442c-be41-0af5cec8702%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A880%2C%22originHeight%22%3A513%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uf7b29336%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"RWXXN\" id=\"RWXXN\"><span data-lake-id=\"u47e488e6\" id=\"u47e488e6\" style=\"color: rgb(33, 37, 41)\">5. Ctrl + Shift + M：快速显示错误和警告</span></h4><p data-lake-id=\"u9807b034\" id=\"u9807b034\"><span data-lake-id=\"u14323513\" id=\"u14323513\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd + Shift + M)</span></p><p data-lake-id=\"u75ba63c4\" id=\"u75ba63c4\"><span data-lake-id=\"u1316d950\" id=\"u1316d950\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">每个人都喜欢没有 but 的代码，这个快捷键可以帮助我们更好的查看错误原因。</span></p><p data-lake-id=\"uc2e89194\" id=\"uc2e89194\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363590135-f835e547-5ee1-47ff-a95d-8d38b2f28c75.gif%22%2C%22taskId%22%3A%22u040e7b56-0262-4075-8fe8-72eb66021c4%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A880%2C%22originHeight%22%3A495%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ubaea163f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"Z21pN\" id=\"Z21pN\"><span data-lake-id=\"u196e14b6\" id=\"u196e14b6\" style=\"color: rgb(33, 37, 41)\">6. Ctrl + Shift + L：多光标选择</span></h4><p data-lake-id=\"ua35be47d\" id=\"ua35be47d\"><span data-lake-id=\"u5d2df689\" id=\"u5d2df689\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd + Shift + L)</span></p><p data-lake-id=\"u606b9080\" id=\"u606b9080\"><span data-lake-id=\"u8d16c4e0\" id=\"u8d16c4e0\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">添加其他光标以编辑所有当前选中项，通常比进行搜索和替换全部操作更容易出错。</span></p><p data-lake-id=\"u8dab931b\" id=\"u8dab931b\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363590892-8c021990-b2a6-4f69-9b6d-ab91a2132083.gif%22%2C%22taskId%22%3A%22u45867b5e-ecba-42d2-ae7b-4511c5bb863%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A574%2C%22originHeight%22%3A338%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u736725b2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"v5Vdw\" id=\"v5Vdw\"><span data-lake-id=\"ud6aaa4ca\" id=\"ud6aaa4ca\" style=\"color: rgb(33, 37, 41)\">7. Ctrl + D:逐个选择</span></h4><p data-lake-id=\"u985a8688\" id=\"u985a8688\"><span data-lake-id=\"u4cf757c7\" id=\"u4cf757c7\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd+D)</span></p><p data-lake-id=\"u2000b780\" id=\"u2000b780\"><span data-lake-id=\"u37a5fe58\" id=\"u37a5fe58\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">与上一个类似，但是如果要一个一个选中，可以使用</span><span data-lake-id=\"uf02b4396\" id=\"uf02b4396\" class=\"lake-fontsize-12\" style=\"color: rgb(214, 51, 132)\">Ctrl +D</span><span data-lake-id=\"ufdbb308b\" id=\"ufdbb308b\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">。</span></p><p data-lake-id=\"ub0021766\" id=\"ub0021766\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363591156-8b288fde-6208-463c-aec5-5c6c5b09bf17.gif%22%2C%22taskId%22%3A%22u00af636d-36ac-4e6d-8c54-0ef3ea97baf%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A406%2C%22originHeight%22%3A156%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u7f4479f9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"WyIU8\" id=\"WyIU8\"><span data-lake-id=\"u0552f9a9\" id=\"u0552f9a9\" style=\"color: rgb(33, 37, 41)\">8. Ctrl + /：切换行注释</span></h4><p data-lake-id=\"u4e8456e8\" id=\"u4e8456e8\"><span data-lake-id=\"u8e1cd241\" id=\"u8e1cd241\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Cmd+/)</span></p><p data-lake-id=\"u1a6f7fd7\" id=\"u1a6f7fd7\"><span data-lake-id=\"u71c8f36e\" id=\"u71c8f36e\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">在注释和未注释行行为之间切换。</span></p><p data-lake-id=\"udffd0378\" id=\"udffd0378\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363591086-9ae9cc01-001e-46f0-9a42-f81c55f1faed.gif%22%2C%22taskId%22%3A%22u5a5101d4-79a0-4d2a-b9c3-24ebf750b81%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A778%2C%22originHeight%22%3A531%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u38ffe670%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"GHHu6\" id=\"GHHu6\"><span data-lake-id=\"udf2a5ba0\" id=\"udf2a5ba0\" style=\"color: rgb(33, 37, 41)\">9. Ctrl + Shift + I:格式化整个文件</span></h4><p data-lake-id=\"ub97a9b7f\" id=\"ub97a9b7f\"><span data-lake-id=\"u9f5d23d8\" id=\"u9f5d23d8\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Shift + Option + F)</span></p><p data-lake-id=\"udd9418c9\" id=\"udd9418c9\"><span data-lake-id=\"u6042c643\" id=\"u6042c643\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Windows: Windows Shift + Alt + F)</span></p><p data-lake-id=\"u3e3ebf21\" id=\"u3e3ebf21\"><span data-lake-id=\"u05168a8a\" id=\"u05168a8a\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">格式化整个活动文件或提示你安装Formatter 扩展名，我使用</span><span data-lake-id=\"u06ff76d1\" id=\"u06ff76d1\" class=\"lake-fontsize-12\" style=\"color: rgb(214, 51, 132)\">Prettier</span><span data-lake-id=\"ua17afa31\" id=\"ua17afa31\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"> </span><span data-lake-id=\"ueb020b87\" id=\"ueb020b87\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">插件来格式化JS代码。</span></p><p data-lake-id=\"u1488e613\" id=\"u1488e613\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363591138-41f09000-64ce-48fa-a8fb-b6085f44a4ff.gif%22%2C%22taskId%22%3A%22uc59d2a25-a55e-436f-ad1e-c9ec1e0af40%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A778%2C%22originHeight%22%3A531%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u2413748f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"tA5eL\" id=\"tA5eL\"><span data-lake-id=\"u1e099114\" id=\"u1e099114\" style=\"color: rgb(33, 37, 41)\">10. Alt +向上或 Alt +向下：移动行</span></h4><p data-lake-id=\"u4ae5cfbd\" id=\"u4ae5cfbd\"><span data-lake-id=\"u13dfc2c9\" id=\"u13dfc2c9\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">(Mac: Opt+Down or Opt+Up)</span></p><p data-lake-id=\"u36a3cc45\" id=\"u36a3cc45\"><span data-lake-id=\"u35f8f67f\" id=\"u35f8f67f\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">非常简单，上下移动行。</span></p><p data-lake-id=\"ub48c4372\" id=\"ub48c4372\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363591093-6bc6dce8-c0c9-4e1a-bcee-0afbcee1564a.gif%22%2C%22taskId%22%3A%22ub475be97-2174-49db-948d-77c2e6ee16f%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A880%2C%22originHeight%22%3A849%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u1d16b436%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h4 data-lake-id=\"Jr2bm\" id=\"Jr2bm\"><span data-lake-id=\"ua91fc3fa\" id=\"ua91fc3fa\" style=\"color: rgb(33, 37, 41)\">彩蛋</span></h4><p data-lake-id=\"u5ba1e662\" id=\"u5ba1e662\"><span data-lake-id=\"u26aa9c44\" id=\"u26aa9c44\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">Ctrl +Space ：显示提示</span></p><p data-lake-id=\"u9f875650\" id=\"u9f875650\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fgif%2F27022430%2F1650363591657-93c97ccb-41d2-47c4-9cd4-3a461bc41ff5.gif%22%2C%22taskId%22%3A%22u4cd4c378-5123-4885-b615-1482e5c552b%22%2C%22clientId%22%3A%22u86b9cea9-f828-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A785%2C%22originHeight%22%3A307%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ueb8ba1be%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><h2 data-lake-id=\"R3qxY\" id=\"R3qxY\"><span data-lake-id=\"uc8526204\" id=\"uc8526204\" style=\"color: rgb(33, 37, 41)\">​</span><br></h2><p data-lake-id=\"uf496ab92\" id=\"uf496ab92\"><strong><span data-lake-id=\"uf9d00755\" id=\"uf9d00755\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">代码部署后可能存在的BUG没法实时知道，事后为了解决这些BUG，花了大量的时间进行log 调试，这边顺便给大家推荐一个好用的BUG监控工具</span></strong><strong><span data-lake-id=\"u40978cfc\" id=\"u40978cfc\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"> </span></strong><a href=\"https://link.segmentfault.com/?enc=CLWU1etdq0lFLRGtjMp4Bg%3D%3D.NqTkakjHO%2F%2Fd6y8t0Ymbd93RFBDyWEAz0epGR0%2BAa%2FaduKnUJ1JN4Gx6e9YAnzps\" target=\"_blank\" data-lake-id=\"uda98df57\" id=\"uda98df57\"><span data-lake-id=\"ube5c4ba5\" id=\"ube5c4ba5\">Fundebug</span></a><strong><span data-lake-id=\"u8229223d\" id=\"u8229223d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">。</span></strong></p><p data-lake-id=\"u5af52960\" id=\"u5af52960\"><a href=\"https://link.segmentfault.com/?enc=cdNbXkdwDJCZYSrcdz%2FrMQ%3D%3D.IwRLQqYmqw7w%2B9ZO3g6y3n5q9Ce75JFpWF1B3%2FsJQDiPvHWBWRvmY80ZDxzMdqBBscuCRG27NVB13DgTSEPFhMtKCp9xFFPHipAXLmtC60o%3D\" target=\"_blank\" data-lake-id=\"ub9070d78\" id=\"ub9070d78\"><br></a></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 585,
    "created_at": "2022-04-19T10:19:34.000Z",
    "updated_at": "2023-07-27T02:07:44.000Z",
    "content_updated_at": "2023-07-27T02:07:44.000Z",
    "published_at": "2022-04-19T10:23:49.000Z",
    "first_published_at": "2022-04-19T10:21:21.739Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 939621416,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 74184281,
    "type": "Doc",
    "slug": "leb0vw",
    "title": "一篇搞懂Git 和 SVN 的区别【原理篇】",
    "description": "tags: [git,svn]categories: 学无止境copyright_author_href: https://segmentfault.com/u/huolang_5a14e07d2f2ffcopyright_url: https://segmentfault.com/a/119...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1650362992187-7a03197b-6c8e-4a6e-a3c5-e1f3c71e5423.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u030236bf\" class=\"ne-p\"><span class=\"ne-text\">tags: [git,svn]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://segmentfault.com/u/huolang_5a14e07d2f2ff</span></p><p id=\"u90c59306\" class=\"ne-p\"><span class=\"ne-text\">copyright_url: https://segmentfault.com/a/1190000039978493</span></p><p id=\"u7364e09e\" class=\"ne-p\"><span class=\"ne-text\">copyright_author: 火狼</span></p><hr id=\"xvqVZ\" class=\"ne-hr\"><h2 id=\"FjMUj\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">前言</span></h2><p id=\"u68854e9d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">Git和SVN都是版本管理系统，但是他们<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">命令区别后面会简单进行一个对比，我们先从原理的角度分析</span></p><h2 id=\"fJo9c\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">4.git和svn命令</span></h2><p id=\"u9a523fa4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">先来复习哈命令</span></p><table id=\"AQ4L5\" class=\"ne-table\" style=\"width: 750px\"><tbody><tr style=\"height: 33px\"><td width=\"250\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"u1b4517cc\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">作用</span></strong></p></td><td width=\"250\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"u879c524d\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git</span></strong></p></td><td width=\"250\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"uaac39aa7\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u8e5816e4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">版本库初始化</span></p></td><td width=\"250\"><p id=\"u415b9429\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git init</span></p></td><td width=\"250\"><p id=\"ucdfc3d8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn create</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u643c2fcf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">clone</span></p></td><td width=\"250\"><p id=\"u8430a74e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git clone</span></p></td><td width=\"250\"><p id=\"ub32af9c2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn co（checkout）</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u3c60a0ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">add</span></p></td><td width=\"250\"><p id=\"ubac0fbb9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git add （.除去.gitignore，*所有的文件）</span></p></td><td width=\"250\"><p id=\"u1807a1cd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn add</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"uef4ff045\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">commit</span></p></td><td width=\"250\"><p id=\"ue423d07f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git commit</span></p></td><td width=\"250\"><p id=\"u2a4df3c3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn commit</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u7875c6b4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pull</span></p></td><td width=\"250\"><p id=\"u9b02305a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git pull</span></p></td><td width=\"250\"><p id=\"u3cecc893\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn update</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u8e82713d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">push</span></p></td><td width=\"250\"><p id=\"uca3136a1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git push</span></p></td><td width=\"250\"><p id=\"u873e6ae9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">-</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u90ba2116\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">查看工作状态</span></p></td><td width=\"250\"><p id=\"u8081d23c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git status</span></p></td><td width=\"250\"><p id=\"u05311949\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn status</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u3f61572b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">创建分支</span></p></td><td width=\"250\"><p id=\"u97bf6bcf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git branch &lt;分支名&gt;</span></p></td><td width=\"250\"><p id=\"u7ed543ed\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn cp &lt;分支名&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u2db553c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">删除分支</span></p></td><td width=\"250\"><p id=\"u0b9538b5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git branch -d &lt;分支名&gt;</span></p></td><td width=\"250\"><p id=\"u9b60742f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn rm &lt;分支名&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"uaf6275d0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">分支合并</span></p></td><td width=\"250\"><p id=\"u6739f440\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git merge &lt;分支名&gt;</span></p></td><td width=\"250\"><p id=\"uf28ce050\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn merge &lt;分支名&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u23eccbeb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">工作区差异</span></p></td><td width=\"250\"><p id=\"ubfe87c69\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git differ （-cached / head）</span></p></td><td width=\"250\"><p id=\"uf48b09f8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn diff</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"ub4b9f0f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">更新至历史版本</span></p></td><td width=\"250\"><p id=\"u4698a673\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout &lt;commit&gt;</span></p></td><td width=\"250\"><p id=\"u8daabbc6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn update -r &lt;rev&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u881c30ce\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">切换tag</span></p></td><td width=\"250\"><p id=\"uf61e46ae\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout &lt;tag&gt;</span></p></td><td width=\"250\"><p id=\"ufdc1535d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn switch &lt;tag&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u5cc5083a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">切换分支</span></p></td><td width=\"250\"><p id=\"u6d979d02\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout branch</span></p></td><td width=\"250\"><p id=\"u0eedc666\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn switch branch</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u0d782bf4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">还原文件</span></p></td><td width=\"250\"><p id=\"ue7df935f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout - path</span></p></td><td width=\"250\"><p id=\"uc12c82e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn revert path</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u161854c0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">删除文件</span></p></td><td width=\"250\"><p id=\"u26072ed7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git rm path</span></p></td><td width=\"250\"><p id=\"ue54c4726\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn rm path</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u3eb732a9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">移动文件</span></p></td><td width=\"250\"><p id=\"ua5e4355e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git mv path</span></p></td><td width=\"250\"><p id=\"u1bbdff8a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git mv path</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"ud0a1768b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">清除未追踪文件</span></p></td><td width=\"250\"><p id=\"u39a2f2d3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git clean</span></p></td><td width=\"250\"><p id=\"u5adb45ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn status sed -e</span></p></td></tr></tbody></table><h2 id=\"dgV9B\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">1.存贮区别</span></h2><p id=\"ube903dc4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">大家想想为什么我们代码管理为什么一般用git，原型图和高保真管理一般用SVN?</span></p><p id=\"ub42d0a00\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.git是分布式的，有本地和远程两个版本库，SVN是集中式，只有一个远程版本库；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.git的内容是按元数据方式存贮，所有控制文件在.git中，svn是按文件处理，所有资源控制文件在.svn中；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.svn的分支是一个目录，git不是；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">4.git没有一个全局的版本号，svn有；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">5.git内容存贮是使用SHA-1哈希算法，能确保代码完整性;<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">6.git 有工作区，暂存区，远程仓库，git add将代码提交到暂存区， commit提交到本地版本库，push推送到远程版本库。svn是add 提交到暂存，commit是提交到远程版本库。</span></p><p id=\"u45835d04\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1650362992187-7a03197b-6c8e-4a6e-a3c5-e1f3c71e5423.png\" width=\"732\" id=\"u9bf41b5f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><p id=\"u4ebe99ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">所以可以很清楚的看出因为原型图和高保真都是以单个文件为单位，所以适合用SVN管理，而我们代码时以行数为单位，适合Git</span></p><h2 id=\"uXddJ\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">2.文件.svn和.git区别</span></h2><p id=\"u13247c97\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1..svn目录</span></p><p id=\"u6aadd7d6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">随便打开一个.svn的目录可以看到结构：<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">如果无法查看.svn，window电脑-点击查看-勾选隐藏文件；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">mac直接shift + command + .</span></p><pre data-language=\"git\" id=\"gURh5\" class=\"ne-codeblock language-git\"><code>├── pristine 各个版本纪录，这个文件一般较大\n├── tmp \n├── entries 当前版本号\n├── format 文本文件， 放了一个整数，当前版本号\n├── wc.db 二进制文件\n├── wc.db-journal 二进制文件</code></pre><p id=\"uf4d467fa\" class=\"ne-p\"><br></p><p id=\"u581ea012\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2..git 目录结构</span></p><p id=\"u26143cd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">你可能对这些目录结构很陌生，没关系，直接在终端输入 git help gitrepository-layout回车，你会发现浏览器会打开一个html文件，实际上就会打开安装git下面的一个html文档</span></p><pre data-language=\"git\" id=\"Cp6Wy\" class=\"ne-codeblock language-git\"><code>├── hooks 钩子文件\n│   ├── applypatch-msg.sample\n│   ├── commit-msg.sample\n│   ├── fsmonitor-watchman.sample\n│   ├── fsmonitor-watchman.sample\n│   ├── pre-applypatch.sample\n│   ├── pre-commit.sample commit时会触发这个钩子\n│   ├── pre-push.sample push触发\n│   ├── pre-rebase.sample\n│   ├── pre-receive.sample\n│   ├── prepare-commit-msg.sample\n│   ├── update.sample update触发\n├── info\n│   ├── exclude 忽略的文件\n├── object git数据对象，包括commit，trees，二进制对象，标签等\n├── COMMIT_EDITMSG 上一次提交的注释信息\n├── log 各个refs的历史信息\n├── refs 每个分支指向那个提交\n├── config 本项目配置信息，包括仓库地址，分支，用户账号等\n├── description 项目描述\n├── HEAD 当前分支的最后一次提交\n├── index 索引文件，存贮git add把要添加的项\n├── packed-refs 分支标识文件</code></pre><p id=\"u475d5cfb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">所以可以看出git在处理代码方面功能比svn要强大一些</span></p><h2 id=\"I0vrp\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3..git文件动态分析</span></h2><h3 id=\"BNTq8\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.1 add阶段</span></h3><p id=\"u679905e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.执行git init会生成一个初始化的.git,会发现上面有些目录文件没有，因为有些文件是指定的命令后才会生成</span></p><p id=\"u4cfdfe1f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.新建一个test.txt,随便写点内容，执行git status</span></p><pre data-language=\"git\" id=\"ODefI\" class=\"ne-codeblock language-git\"><code>On branch master  // 默认一个master 分支\n\nNo commits yet\n\nUntracked files: // 未提交的文件\n  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)\n\n    test.txt\n\nnothing added to commit but untracked files present (use &quot;git add&quot; to track)</code></pre><p id=\"u938c8bbf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">运行 find . -type f</span></p><pre data-language=\"git\" id=\"QpjMN\" class=\"ne-codeblock language-git\"><code>./config\n./HEAD\n./info/exclude\n./description\n./hooks/commit-msg.sample\n./hooks/pre-rebase.sample\n./hooks/pre-commit.sample\n./hooks/applypatch-msg.sample\n./hooks/fsmonitor-watchman.sample\n./hooks/pre-receive.sample\n./hooks/prepare-commit-msg.sample\n./hooks/post-update.sample\n./hooks/pre-applypatch.sample\n./hooks/pre-push.sample\n./hooks/update.sample\n./index</code></pre><p id=\"u5c380f31\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.执行 git add text.txt,显示</span></p><pre data-language=\"git\" id=\"NnVJR\" class=\"ne-codeblock language-git\"><code>On branch master\n\nNo commits yet\n\nChanges to be committed:\n  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)\n\n    new file:   test.txt</code></pre><p id=\"u285def08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">运行find . -type f</span></p><pre data-language=\"git\" id=\"dfCyj\" class=\"ne-codeblock language-git\"><code>./config\n./objects/61/de0edff4ebeeff225da34006cbe6427638fadc  # 比之前多了一个文件\n./HEAD\n./info/exclude\n./description\n./hooks/commit-msg.sample\n./hooks/pre-rebase.sample\n./hooks/pre-commit.sample\n./hooks/applypatch-msg.sample\n./hooks/fsmonitor-watchman.sample\n./hooks/pre-receive.sample\n./hooks/prepare-commit-msg.sample\n./hooks/post-update.sample\n./hooks/pre-applypatch.sample\n./hooks/pre-push.sample\n./hooks/update.sample\n./index</code></pre><p id=\"u87467bd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">4.总结：可以看出git add后test.txt 被标记为staged 状态，而且object多了一个61/de0edff 文件，所以object 可以存贮git仓库内容，以二进制方式存贮。</span></p><p id=\"u351f7970\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">5.我们可以查看下文件来源</span></p><pre data-language=\"git\" id=\"e5d2C\" class=\"ne-codeblock language-git\"><code>git cat-file -p 61de0edf\n打印 test</code></pre><p id=\"u82e4f4d2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">6.git如何管理和归档文件<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">我们常见的文件系统(NTFS、FAT、FAT32)是基于地址方式检索文件，即先给具体的地址，然后从地址编号对应的存储单元读取文件内容，而git是基于内容检索，是对整个内容检索，得到一个真实的存储位置，类似哈希映射。</span></p><h3 id=\"VBx0G\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.2 commit阶段</span></h3><p id=\"u0c399b36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.执行 git commit -m 'add test'</span></p><pre data-language=\"git\" id=\"LMBbd\" class=\"ne-codeblock language-git\"><code>1 file changed, 1 insertion(+)\ncreate mode 100644 test.txt</code></pre><p id=\"u73ccaed2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.运行 find . -type f</span></p><pre data-language=\"git\" id=\"n3M8D\" class=\"ne-codeblock language-git\"><code>./test.txt\n./.git/config\n./.git/objects/61/de0edff4ebeeff225da34006cbe6427638fadc\n./.git/objects/ed/fd7e903f8f622f9a52542adfa077552608202d\n./.git/objects/26/ef8e81bc27b4a67f251145a4f83782364fa9fa\n./.git/HEAD\n./.git/info/exclude\n./.git/logs/HEAD\n./.git/logs/refs/heads/master\n./.git/description\n./.git/hooks/commit-msg.sample\n./.git/hooks/pre-rebase.sample\n./.git/hooks/pre-commit.sample\n./.git/hooks/applypatch-msg.sample\n./.git/hooks/fsmonitor-watchman.sample\n./.git/hooks/pre-receive.sample\n./.git/hooks/prepare-commit-msg.sample\n./.git/hooks/post-update.sample\n./.git/hooks/pre-applypatch.sample\n./.git/hooks/pre-push.sample\n./.git/hooks/update.sample\n./.git/refs/heads/master\n./.git/index\n./.git/COMMIT_EDITMSG</code></pre><p id=\"uf18e258d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">可以看出commit 后在add 的基础上object多了两个文件ed/fd7e90和26/ef8e8，从文件的归档路径和命名可以看出git使用SHA-1算法对文件内容进行了校验</span></p><p id=\"u8b3cd669\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">还多了一个COMMIT_EDITMSG ，里面是上一次提交的注释信息</span></p><p id=\"u923c6129\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.使用git cat-file 查看来源</span></p><pre data-language=\"git\" id=\"ECylr\" class=\"ne-codeblock language-git\"><code>git cat-file -t edfd7e90\n// 终端输出tree\n\ngit cat-file -t 26ef8e8\n// 终端输出commit\n\ngit cat-file -p edfd7e90\n// 终端输出 100644 blob 61de0edff4ebeeff225da34006cbe6427638fadc    test.txt\n\ngit cat-file -p 26ef8e8\n// 终端输出 tree edfd7e903f8f622f9a52542adfa077552608202d\nauthor 信息  1612668900 +0800\ncommitter author 信息  1612668900 +0800</code></pre><p id=\"u0d36489f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">ed/fd7e90 是一个commit 对象，tree属性指向了26/ef8e8，纪录了文件操作，作者，提交者信息；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">26/ef8e8 是一个tree 对象，blob 属性指向了blob对象61/de0edf，纪录了文件名；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">61/de0edf 是一个blob 对象，纪录了文件内容。</span></p><p id=\"ubf18b0b5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">三个文件关系：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/jpeg/27022430/1650362992194-a4905996-c53d-4ff4-a58f-9052a6f76764.jpeg\" width=\"732\" id=\"uba2d9c63\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"><br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">所以现在知道为什么object文件会很大的吧</span></p><h3 id=\"eaZe8\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.3 branch</span></h3><p id=\"ue3ea8e3f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git branch 获取分支列表<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">列表保存到refs/heads/master 下面</span></p><h3 id=\"XqdQm\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.4 git对象模型</span></h3><p id=\"u4323f395\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">通过上面3.2的分析知道，在git系统中有四种尅性的对象：<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.commit：指向一个tree，纪录了文件操作，作者，提交者信息；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.tree：对象关系树，管理tree和blob的关系；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.blob：保存文件内容；<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">4.tag：标记提交。</span></p><h3 id=\"vgR07\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.5 git生命周期钩子</span></h3><p id=\"uca08e264\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.钩子初始化：<br /></span><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">上面说到的hooks 下面都是生命周期脚本，初始化仓库（git init）或 git clone 都会初始化.git文件；</span></p><p id=\"u462ce509\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.钩子是本地的，因为不会提交到代码仓库，只不过clone的时候会初始化；</span></p><p id=\"u9970183d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.钩子分类：</span></p><table id=\"lYGXN\" class=\"ne-table\" style=\"width: 749px\"><tbody><tr style=\"height: 33px\"><td width=\"375\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"uc0e1d958\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">钩子名</span></strong></p></td><td width=\"374\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"u9480b408\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">作用</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u4f1927e7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-commit</span></p></td><td width=\"374\"><p id=\"u9b0b5490\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">每次git commit之前会触发，很常见的应用就是在package.json结合husky和lint-staged做代码eslint校验</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ub48f6b94\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">prepare-commit-msg</span></p></td><td width=\"374\"><p id=\"uaa0c334a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">在pre-commit在文本编辑器生成提交信息被调用，方便的修改自动生成的squash和merage提交</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u75df2953\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">commit-msg</span></p></td><td width=\"374\"><p id=\"uf49d9a5e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">用户输入提交信息被调用，就是commit -m 后面那个提交信息，可以用来规范提交信息</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u41e18c26\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">post-commit</span></p></td><td width=\"374\"><p id=\"u557c4421\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">commit-msg后执行，通知git commit的结果</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u579a6c4f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">post-checkout</span></p></td><td width=\"374\"><p id=\"u287c48ad\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout被调用</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ub803b9b2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-rebase</span></p></td><td width=\"374\"><p id=\"u2b0b0dcc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git rebase 更改之前运行</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ufd5726e3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-receive</span></p></td><td width=\"374\"><p id=\"u009e8eb6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git push后执行，存在于远程仓库中，服务端远程钩子</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ua49cb6a5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">update</span></p></td><td width=\"374\"><p id=\"u997bbbb6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-receive 后调用</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"uadf4a96d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">post-receive</span></p></td><td width=\"374\"><p id=\"uffdac8fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">push 推送成功后被调用，通知push的用户</span></p></td></tr></tbody></table><h2 id=\"ILfgA\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">结语</span></h2><p id=\"ud923c737\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">看到这里git和svn很多迷惑都解开了吧， 原创码字不易，欢迎star！</span></p></div>",
    "body": "tags: [git,svn]<br />categories: 学无止境<br />copyright_author_href: https://segmentfault.com/u/huolang_5a14e07d2f2ff<br />copyright_url: https://segmentfault.com/a/1190000039978493<br />copyright_author: 火狼\n\n---\n\n<a name=\"FjMUj\"></a>\n## 前言\nGit和SVN都是版本管理系统，但是他们<br />命令区别后面会简单进行一个对比，我们先从原理的角度分析\n<a name=\"fJo9c\"></a>\n## 4.git和svn命令\n先来复习哈命令\n\n| **作用** | **git** | **svn** |\n| --- | --- | --- |\n| 版本库初始化 | git init | svn create |\n| clone | git clone | svn co（checkout） |\n| add | git add （.除去.gitignore，*所有的文件） | svn add |\n| commit | git commit | svn commit |\n| pull | git pull | svn update |\n| push | git push | - |\n| 查看工作状态 | git status | svn status |\n| 创建分支 | git branch <分支名> | svn cp <分支名> |\n| 删除分支 | git branch -d <分支名> | svn rm <分支名> |\n| 分支合并 | git merge <分支名> | svn merge <分支名> |\n| 工作区差异 | git differ （-cached / head） | svn diff |\n| 更新至历史版本 | git checkout <commit> | svn update -r <rev> |\n| 切换tag | git checkout <tag> | svn switch <tag> |\n| 切换分支 | git checkout branch | svn switch branch |\n| 还原文件 | git checkout - path | svn revert path |\n| 删除文件 | git rm path | svn rm path |\n| 移动文件 | git mv path | git mv path |\n| 清除未追踪文件 | git clean | svn status sed -e |\n\n<a name=\"dgV9B\"></a>\n## 1.存贮区别\n大家想想为什么我们代码管理为什么一般用git，原型图和高保真管理一般用SVN?<br />1.git是分布式的，有本地和远程两个版本库，SVN是集中式，只有一个远程版本库；<br />2.git的内容是按元数据方式存贮，所有控制文件在.git中，svn是按文件处理，所有资源控制文件在.svn中；<br />3.svn的分支是一个目录，git不是；<br />4.git没有一个全局的版本号，svn有；<br />5.git内容存贮是使用SHA-1哈希算法，能确保代码完整性;<br />6.git 有工作区，暂存区，远程仓库，git add将代码提交到暂存区， commit提交到本地版本库，push推送到远程版本库。svn是add 提交到暂存，commit是提交到远程版本库。<br />![](https://cdn.nlark.com/yuque/0/2022/png/27022430/1650362992187-7a03197b-6c8e-4a6e-a3c5-e1f3c71e5423.png#clientId=u628dacaa-ae7d-4&from=paste&id=u9bf41b5f&originHeight=261&originWidth=732&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u16605eef-3685-427f-9af3-30ce347df4a&title=)<br />所以可以很清楚的看出因为原型图和高保真都是以单个文件为单位，所以适合用SVN管理，而我们代码时以行数为单位，适合Git\n<a name=\"uXddJ\"></a>\n## 2.文件.svn和.git区别\n1..svn目录<br />随便打开一个.svn的目录可以看到结构：<br />如果无法查看.svn，window电脑-点击查看-勾选隐藏文件；<br />mac直接shift + command + .\n```git\n├── pristine 各个版本纪录，这个文件一般较大\n├── tmp \n├── entries 当前版本号\n├── format 文本文件， 放了一个整数，当前版本号\n├── wc.db 二进制文件\n├── wc.db-journal 二进制文件\n```\n\n2..git 目录结构<br />你可能对这些目录结构很陌生，没关系，直接在终端输入 git help gitrepository-layout回车，你会发现浏览器会打开一个html文件，实际上就会打开安装git下面的一个html文档\n```git\n├── hooks 钩子文件\n│   ├── applypatch-msg.sample\n│   ├── commit-msg.sample\n│   ├── fsmonitor-watchman.sample\n│   ├── fsmonitor-watchman.sample\n│   ├── pre-applypatch.sample\n│   ├── pre-commit.sample commit时会触发这个钩子\n│   ├── pre-push.sample push触发\n│   ├── pre-rebase.sample\n│   ├── pre-receive.sample\n│   ├── prepare-commit-msg.sample\n│   ├── update.sample update触发\n├── info\n│   ├── exclude 忽略的文件\n├── object git数据对象，包括commit，trees，二进制对象，标签等\n├── COMMIT_EDITMSG 上一次提交的注释信息\n├── log 各个refs的历史信息\n├── refs 每个分支指向那个提交\n├── config 本项目配置信息，包括仓库地址，分支，用户账号等\n├── description 项目描述\n├── HEAD 当前分支的最后一次提交\n├── index 索引文件，存贮git add把要添加的项\n├── packed-refs 分支标识文件\n```\n所以可以看出git在处理代码方面功能比svn要强大一些\n<a name=\"I0vrp\"></a>\n## 3..git文件动态分析\n<a name=\"BNTq8\"></a>\n### 3.1 add阶段\n1.执行git init会生成一个初始化的.git,会发现上面有些目录文件没有，因为有些文件是指定的命令后才会生成<br />2.新建一个test.txt,随便写点内容，执行git status\n```git\nOn branch master  // 默认一个master 分支\n\nNo commits yet\n\nUntracked files: // 未提交的文件\n  (use \"git add <file>...\" to include in what will be committed)\n\n    test.txt\n\nnothing added to commit but untracked files present (use \"git add\" to track)\n```\n运行 find . -type f\n```git\n./config\n./HEAD\n./info/exclude\n./description\n./hooks/commit-msg.sample\n./hooks/pre-rebase.sample\n./hooks/pre-commit.sample\n./hooks/applypatch-msg.sample\n./hooks/fsmonitor-watchman.sample\n./hooks/pre-receive.sample\n./hooks/prepare-commit-msg.sample\n./hooks/post-update.sample\n./hooks/pre-applypatch.sample\n./hooks/pre-push.sample\n./hooks/update.sample\n./index\n```\n3.执行 git add text.txt,显示\n```git\nOn branch master\n\nNo commits yet\n\nChanges to be committed:\n  (use \"git rm --cached <file>...\" to unstage)\n\n    new file:   test.txt\n```\n运行find . -type f\n```git\n./config\n./objects/61/de0edff4ebeeff225da34006cbe6427638fadc  # 比之前多了一个文件\n./HEAD\n./info/exclude\n./description\n./hooks/commit-msg.sample\n./hooks/pre-rebase.sample\n./hooks/pre-commit.sample\n./hooks/applypatch-msg.sample\n./hooks/fsmonitor-watchman.sample\n./hooks/pre-receive.sample\n./hooks/prepare-commit-msg.sample\n./hooks/post-update.sample\n./hooks/pre-applypatch.sample\n./hooks/pre-push.sample\n./hooks/update.sample\n./index\n```\n4.总结：可以看出git add后test.txt 被标记为staged 状态，而且object多了一个61/de0edff 文件，所以object 可以存贮git仓库内容，以二进制方式存贮。<br />5.我们可以查看下文件来源\n```git\ngit cat-file -p 61de0edf\n打印 test\n```\n6.git如何管理和归档文件<br />我们常见的文件系统(NTFS、FAT、FAT32)是基于地址方式检索文件，即先给具体的地址，然后从地址编号对应的存储单元读取文件内容，而git是基于内容检索，是对整个内容检索，得到一个真实的存储位置，类似哈希映射。\n<a name=\"VBx0G\"></a>\n### 3.2 commit阶段\n1.执行 git commit -m 'add test'\n```git\n1 file changed, 1 insertion(+)\ncreate mode 100644 test.txt\n```\n2.运行 find . -type f\n```git\n./test.txt\n./.git/config\n./.git/objects/61/de0edff4ebeeff225da34006cbe6427638fadc\n./.git/objects/ed/fd7e903f8f622f9a52542adfa077552608202d\n./.git/objects/26/ef8e81bc27b4a67f251145a4f83782364fa9fa\n./.git/HEAD\n./.git/info/exclude\n./.git/logs/HEAD\n./.git/logs/refs/heads/master\n./.git/description\n./.git/hooks/commit-msg.sample\n./.git/hooks/pre-rebase.sample\n./.git/hooks/pre-commit.sample\n./.git/hooks/applypatch-msg.sample\n./.git/hooks/fsmonitor-watchman.sample\n./.git/hooks/pre-receive.sample\n./.git/hooks/prepare-commit-msg.sample\n./.git/hooks/post-update.sample\n./.git/hooks/pre-applypatch.sample\n./.git/hooks/pre-push.sample\n./.git/hooks/update.sample\n./.git/refs/heads/master\n./.git/index\n./.git/COMMIT_EDITMSG\n```\n可以看出commit 后在add 的基础上object多了两个文件ed/fd7e90和26/ef8e8，从文件的归档路径和命名可以看出git使用SHA-1算法对文件内容进行了校验<br />还多了一个COMMIT_EDITMSG ，里面是上一次提交的注释信息<br />3.使用git cat-file 查看来源\n```git\ngit cat-file -t edfd7e90\n// 终端输出tree\n\ngit cat-file -t 26ef8e8\n// 终端输出commit\n\ngit cat-file -p edfd7e90\n// 终端输出 100644 blob 61de0edff4ebeeff225da34006cbe6427638fadc    test.txt\n\ngit cat-file -p 26ef8e8\n// 终端输出 tree edfd7e903f8f622f9a52542adfa077552608202d\nauthor 信息  1612668900 +0800\ncommitter author 信息  1612668900 +0800\n```\ned/fd7e90 是一个commit 对象，tree属性指向了26/ef8e8，纪录了文件操作，作者，提交者信息；<br />26/ef8e8 是一个tree 对象，blob 属性指向了blob对象61/de0edf，纪录了文件名；<br />61/de0edf 是一个blob 对象，纪录了文件内容。<br />三个文件关系：<br />![](https://cdn.nlark.com/yuque/0/2022/jpeg/27022430/1650362992194-a4905996-c53d-4ff4-a58f-9052a6f76764.jpeg#clientId=u628dacaa-ae7d-4&from=paste&id=uba2d9c63&originHeight=142&originWidth=732&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u9a9a7836-6925-41ce-8dd0-adfa2f12349&title=)<br />所以现在知道为什么object文件会很大的吧\n<a name=\"eaZe8\"></a>\n### 3.3 branch\ngit branch 获取分支列表<br />列表保存到refs/heads/master 下面\n<a name=\"XqdQm\"></a>\n### 3.4 git对象模型\n通过上面3.2的分析知道，在git系统中有四种尅性的对象：<br />1.commit：指向一个tree，纪录了文件操作，作者，提交者信息；<br />2.tree：对象关系树，管理tree和blob的关系；<br />3.blob：保存文件内容；<br />4.tag：标记提交。\n<a name=\"vgR07\"></a>\n### 3.5 git生命周期钩子\n1.钩子初始化：<br />上面说到的hooks 下面都是生命周期脚本，初始化仓库（git init）或 git clone 都会初始化.git文件；<br />2.钩子是本地的，因为不会提交到代码仓库，只不过clone的时候会初始化；<br />3.钩子分类：\n\n| **钩子名** | **作用** |\n| --- | --- |\n| pre-commit | 每次git commit之前会触发，很常见的应用就是在package.json结合husky和lint-staged做代码eslint校验 |\n| prepare-commit-msg | 在pre-commit在文本编辑器生成提交信息被调用，方便的修改自动生成的squash和merage提交 |\n| commit-msg | 用户输入提交信息被调用，就是commit -m 后面那个提交信息，可以用来规范提交信息 |\n| post-commit | commit-msg后执行，通知git commit的结果 |\n| post-checkout | git checkout被调用 |\n| pre-rebase | git rebase 更改之前运行 |\n| pre-receive | git push后执行，存在于远程仓库中，服务端远程钩子 |\n| update | pre-receive 后调用 |\n| post-receive | push 推送成功后被调用，通知push的用户 |\n\n<a name=\"ILfgA\"></a>\n## 结语\n看到这里git和svn很多迷惑都解开了吧， 原创码字不易，欢迎star！\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u030236bf\" class=\"ne-p\"><span class=\"ne-text\">tags: [git,svn]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://segmentfault.com/u/huolang_5a14e07d2f2ff</span></p><p id=\"u90c59306\" class=\"ne-p\"><span class=\"ne-text\">copyright_url: https://segmentfault.com/a/1190000039978493</span></p><p id=\"u7364e09e\" class=\"ne-p\"><span class=\"ne-text\">copyright_author: 火狼</span></p><hr id=\"xvqVZ\" class=\"ne-hr\"><h2 id=\"FjMUj\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">前言</span></h2><p id=\"u68854e9d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">Git和SVN都是版本管理系统，但是他们<br />命令区别后面会简单进行一个对比，我们先从原理的角度分析</span></p><h2 id=\"fJo9c\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">4.git和svn命令</span></h2><p id=\"u9a523fa4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">先来复习哈命令</span></p><table id=\"AQ4L5\" class=\"ne-table\" style=\"width: 750px\"><tbody><tr style=\"height: 33px\"><td width=\"250\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"u1b4517cc\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">作用</span></strong></p></td><td width=\"250\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"u879c524d\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git</span></strong></p></td><td width=\"250\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"uaac39aa7\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u8e5816e4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">版本库初始化</span></p></td><td width=\"250\"><p id=\"u415b9429\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git init</span></p></td><td width=\"250\"><p id=\"ucdfc3d8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn create</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u643c2fcf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">clone</span></p></td><td width=\"250\"><p id=\"u8430a74e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git clone</span></p></td><td width=\"250\"><p id=\"ub32af9c2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn co（checkout）</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u3c60a0ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">add</span></p></td><td width=\"250\"><p id=\"ubac0fbb9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git add （.除去.gitignore，*所有的文件）</span></p></td><td width=\"250\"><p id=\"u1807a1cd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn add</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"uef4ff045\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">commit</span></p></td><td width=\"250\"><p id=\"ue423d07f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git commit</span></p></td><td width=\"250\"><p id=\"u2a4df3c3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn commit</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u7875c6b4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pull</span></p></td><td width=\"250\"><p id=\"u9b02305a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git pull</span></p></td><td width=\"250\"><p id=\"u3cecc893\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn update</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u8e82713d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">push</span></p></td><td width=\"250\"><p id=\"uca3136a1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git push</span></p></td><td width=\"250\"><p id=\"u873e6ae9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">-</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u90ba2116\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">查看工作状态</span></p></td><td width=\"250\"><p id=\"u8081d23c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git status</span></p></td><td width=\"250\"><p id=\"u05311949\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn status</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u3f61572b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">创建分支</span></p></td><td width=\"250\"><p id=\"u97bf6bcf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git branch &lt;分支名&gt;</span></p></td><td width=\"250\"><p id=\"u7ed543ed\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn cp &lt;分支名&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u2db553c1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">删除分支</span></p></td><td width=\"250\"><p id=\"u0b9538b5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git branch -d &lt;分支名&gt;</span></p></td><td width=\"250\"><p id=\"u9b60742f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn rm &lt;分支名&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"uaf6275d0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">分支合并</span></p></td><td width=\"250\"><p id=\"u6739f440\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git merge &lt;分支名&gt;</span></p></td><td width=\"250\"><p id=\"uf28ce050\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn merge &lt;分支名&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u23eccbeb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">工作区差异</span></p></td><td width=\"250\"><p id=\"ubfe87c69\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git differ （-cached / head）</span></p></td><td width=\"250\"><p id=\"uf48b09f8\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn diff</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"ub4b9f0f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">更新至历史版本</span></p></td><td width=\"250\"><p id=\"u4698a673\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout &lt;commit&gt;</span></p></td><td width=\"250\"><p id=\"u8daabbc6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn update -r &lt;rev&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u881c30ce\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">切换tag</span></p></td><td width=\"250\"><p id=\"uf61e46ae\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout &lt;tag&gt;</span></p></td><td width=\"250\"><p id=\"ufdc1535d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn switch &lt;tag&gt;</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u5cc5083a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">切换分支</span></p></td><td width=\"250\"><p id=\"u6d979d02\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout branch</span></p></td><td width=\"250\"><p id=\"u0eedc666\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn switch branch</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u0d782bf4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">还原文件</span></p></td><td width=\"250\"><p id=\"ue7df935f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout - path</span></p></td><td width=\"250\"><p id=\"uc12c82e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn revert path</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u161854c0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">删除文件</span></p></td><td width=\"250\"><p id=\"u26072ed7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git rm path</span></p></td><td width=\"250\"><p id=\"ue54c4726\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn rm path</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u3eb732a9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">移动文件</span></p></td><td width=\"250\"><p id=\"ua5e4355e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git mv path</span></p></td><td width=\"250\"><p id=\"u1bbdff8a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git mv path</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"ud0a1768b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">清除未追踪文件</span></p></td><td width=\"250\"><p id=\"u39a2f2d3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git clean</span></p></td><td width=\"250\"><p id=\"u5adb45ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">svn status sed -e</span></p></td></tr></tbody></table><h2 id=\"dgV9B\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">1.存贮区别</span></h2><p id=\"ube903dc4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">大家想想为什么我们代码管理为什么一般用git，原型图和高保真管理一般用SVN?</span></p><p id=\"ub42d0a00\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.git是分布式的，有本地和远程两个版本库，SVN是集中式，只有一个远程版本库；<br />2.git的内容是按元数据方式存贮，所有控制文件在.git中，svn是按文件处理，所有资源控制文件在.svn中；<br />3.svn的分支是一个目录，git不是；<br />4.git没有一个全局的版本号，svn有；<br />5.git内容存贮是使用SHA-1哈希算法，能确保代码完整性;<br />6.git 有工作区，暂存区，远程仓库，git add将代码提交到暂存区， commit提交到本地版本库，push推送到远程版本库。svn是add 提交到暂存，commit是提交到远程版本库。</span></p><p id=\"u45835d04\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1650362992187-7a03197b-6c8e-4a6e-a3c5-e1f3c71e5423.png\" width=\"732\" id=\"u9bf41b5f\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"></p><p id=\"u4ebe99ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">所以可以很清楚的看出因为原型图和高保真都是以单个文件为单位，所以适合用SVN管理，而我们代码时以行数为单位，适合Git</span></p><h2 id=\"uXddJ\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">2.文件.svn和.git区别</span></h2><p id=\"u13247c97\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1..svn目录</span></p><p id=\"u6aadd7d6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">随便打开一个.svn的目录可以看到结构：<br />如果无法查看.svn，window电脑-点击查看-勾选隐藏文件；<br />mac直接shift + command + .</span></p><pre data-language=\"git\" id=\"gURh5\" class=\"ne-codeblock language-git\">├── pristine 各个版本纪录，这个文件一般较大\n├── tmp \n├── entries 当前版本号\n├── format 文本文件， 放了一个整数，当前版本号\n├── wc.db 二进制文件\n├── wc.db-journal 二进制文件</pre><p id=\"uf4d467fa\" class=\"ne-p\"><br></p><p id=\"u581ea012\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2..git 目录结构</span></p><p id=\"u26143cd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">你可能对这些目录结构很陌生，没关系，直接在终端输入 git help gitrepository-layout回车，你会发现浏览器会打开一个html文件，实际上就会打开安装git下面的一个html文档</span></p><pre data-language=\"git\" id=\"Cp6Wy\" class=\"ne-codeblock language-git\">├── hooks 钩子文件\n│   ├── applypatch-msg.sample\n│   ├── commit-msg.sample\n│   ├── fsmonitor-watchman.sample\n│   ├── fsmonitor-watchman.sample\n│   ├── pre-applypatch.sample\n│   ├── pre-commit.sample commit时会触发这个钩子\n│   ├── pre-push.sample push触发\n│   ├── pre-rebase.sample\n│   ├── pre-receive.sample\n│   ├── prepare-commit-msg.sample\n│   ├── update.sample update触发\n├── info\n│   ├── exclude 忽略的文件\n├── object git数据对象，包括commit，trees，二进制对象，标签等\n├── COMMIT_EDITMSG 上一次提交的注释信息\n├── log 各个refs的历史信息\n├── refs 每个分支指向那个提交\n├── config 本项目配置信息，包括仓库地址，分支，用户账号等\n├── description 项目描述\n├── HEAD 当前分支的最后一次提交\n├── index 索引文件，存贮git add把要添加的项\n├── packed-refs 分支标识文件</pre><p id=\"u475d5cfb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">所以可以看出git在处理代码方面功能比svn要强大一些</span></p><h2 id=\"I0vrp\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3..git文件动态分析</span></h2><h3 id=\"BNTq8\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.1 add阶段</span></h3><p id=\"u679905e1\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.执行git init会生成一个初始化的.git,会发现上面有些目录文件没有，因为有些文件是指定的命令后才会生成</span></p><p id=\"u4cfdfe1f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.新建一个test.txt,随便写点内容，执行git status</span></p><pre data-language=\"git\" id=\"ODefI\" class=\"ne-codeblock language-git\">On branch master  // 默认一个master 分支\n\nNo commits yet\n\nUntracked files: // 未提交的文件\n  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)\n\n    test.txt\n\nnothing added to commit but untracked files present (use &quot;git add&quot; to track)</pre><p id=\"u938c8bbf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">运行 find . -type f</span></p><pre data-language=\"git\" id=\"QpjMN\" class=\"ne-codeblock language-git\">./config\n./HEAD\n./info/exclude\n./description\n./hooks/commit-msg.sample\n./hooks/pre-rebase.sample\n./hooks/pre-commit.sample\n./hooks/applypatch-msg.sample\n./hooks/fsmonitor-watchman.sample\n./hooks/pre-receive.sample\n./hooks/prepare-commit-msg.sample\n./hooks/post-update.sample\n./hooks/pre-applypatch.sample\n./hooks/pre-push.sample\n./hooks/update.sample\n./index</pre><p id=\"u5c380f31\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.执行 git add text.txt,显示</span></p><pre data-language=\"git\" id=\"NnVJR\" class=\"ne-codeblock language-git\">On branch master\n\nNo commits yet\n\nChanges to be committed:\n  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)\n\n    new file:   test.txt</pre><p id=\"u285def08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">运行find . -type f</span></p><pre data-language=\"git\" id=\"dfCyj\" class=\"ne-codeblock language-git\">./config\n./objects/61/de0edff4ebeeff225da34006cbe6427638fadc  # 比之前多了一个文件\n./HEAD\n./info/exclude\n./description\n./hooks/commit-msg.sample\n./hooks/pre-rebase.sample\n./hooks/pre-commit.sample\n./hooks/applypatch-msg.sample\n./hooks/fsmonitor-watchman.sample\n./hooks/pre-receive.sample\n./hooks/prepare-commit-msg.sample\n./hooks/post-update.sample\n./hooks/pre-applypatch.sample\n./hooks/pre-push.sample\n./hooks/update.sample\n./index</pre><p id=\"u87467bd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">4.总结：可以看出git add后test.txt 被标记为staged 状态，而且object多了一个61/de0edff 文件，所以object 可以存贮git仓库内容，以二进制方式存贮。</span></p><p id=\"u351f7970\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">5.我们可以查看下文件来源</span></p><pre data-language=\"git\" id=\"e5d2C\" class=\"ne-codeblock language-git\">git cat-file -p 61de0edf\n打印 test</pre><p id=\"u82e4f4d2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">6.git如何管理和归档文件<br />我们常见的文件系统(NTFS、FAT、FAT32)是基于地址方式检索文件，即先给具体的地址，然后从地址编号对应的存储单元读取文件内容，而git是基于内容检索，是对整个内容检索，得到一个真实的存储位置，类似哈希映射。</span></p><h3 id=\"VBx0G\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.2 commit阶段</span></h3><p id=\"u0c399b36\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.执行 git commit -m 'add test'</span></p><pre data-language=\"git\" id=\"LMBbd\" class=\"ne-codeblock language-git\">1 file changed, 1 insertion(+)\ncreate mode 100644 test.txt</pre><p id=\"u73ccaed2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.运行 find . -type f</span></p><pre data-language=\"git\" id=\"n3M8D\" class=\"ne-codeblock language-git\">./test.txt\n./.git/config\n./.git/objects/61/de0edff4ebeeff225da34006cbe6427638fadc\n./.git/objects/ed/fd7e903f8f622f9a52542adfa077552608202d\n./.git/objects/26/ef8e81bc27b4a67f251145a4f83782364fa9fa\n./.git/HEAD\n./.git/info/exclude\n./.git/logs/HEAD\n./.git/logs/refs/heads/master\n./.git/description\n./.git/hooks/commit-msg.sample\n./.git/hooks/pre-rebase.sample\n./.git/hooks/pre-commit.sample\n./.git/hooks/applypatch-msg.sample\n./.git/hooks/fsmonitor-watchman.sample\n./.git/hooks/pre-receive.sample\n./.git/hooks/prepare-commit-msg.sample\n./.git/hooks/post-update.sample\n./.git/hooks/pre-applypatch.sample\n./.git/hooks/pre-push.sample\n./.git/hooks/update.sample\n./.git/refs/heads/master\n./.git/index\n./.git/COMMIT_EDITMSG</pre><p id=\"uf18e258d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">可以看出commit 后在add 的基础上object多了两个文件ed/fd7e90和26/ef8e8，从文件的归档路径和命名可以看出git使用SHA-1算法对文件内容进行了校验</span></p><p id=\"u8b3cd669\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">还多了一个COMMIT_EDITMSG ，里面是上一次提交的注释信息</span></p><p id=\"u923c6129\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.使用git cat-file 查看来源</span></p><pre data-language=\"git\" id=\"ECylr\" class=\"ne-codeblock language-git\">git cat-file -t edfd7e90\n// 终端输出tree\n\ngit cat-file -t 26ef8e8\n// 终端输出commit\n\ngit cat-file -p edfd7e90\n// 终端输出 100644 blob 61de0edff4ebeeff225da34006cbe6427638fadc    test.txt\n\ngit cat-file -p 26ef8e8\n// 终端输出 tree edfd7e903f8f622f9a52542adfa077552608202d\nauthor 信息  1612668900 +0800\ncommitter author 信息  1612668900 +0800</pre><p id=\"u0d36489f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">ed/fd7e90 是一个commit 对象，tree属性指向了26/ef8e8，纪录了文件操作，作者，提交者信息；<br />26/ef8e8 是一个tree 对象，blob 属性指向了blob对象61/de0edf，纪录了文件名；<br />61/de0edf 是一个blob 对象，纪录了文件内容。</span></p><p id=\"ubf18b0b5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">三个文件关系：<br /></span><img src=\"https://cdn.nlark.com/yuque/0/2022/jpeg/27022430/1650362992194-a4905996-c53d-4ff4-a58f-9052a6f76764.jpeg\" width=\"732\" id=\"uba2d9c63\" class=\"ne-image\" style=\"color: rgb(33, 37, 41); font-size: 16px\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\"><br />所以现在知道为什么object文件会很大的吧</span></p><h3 id=\"eaZe8\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.3 branch</span></h3><p id=\"ue3ea8e3f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git branch 获取分支列表<br />列表保存到refs/heads/master 下面</span></p><h3 id=\"XqdQm\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.4 git对象模型</span></h3><p id=\"u4323f395\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">通过上面3.2的分析知道，在git系统中有四种尅性的对象：<br />1.commit：指向一个tree，纪录了文件操作，作者，提交者信息；<br />2.tree：对象关系树，管理tree和blob的关系；<br />3.blob：保存文件内容；<br />4.tag：标记提交。</span></p><h3 id=\"vgR07\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">3.5 git生命周期钩子</span></h3><p id=\"uca08e264\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">1.钩子初始化：<br />上面说到的hooks 下面都是生命周期脚本，初始化仓库（git init）或 git clone 都会初始化.git文件；</span></p><p id=\"u462ce509\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">2.钩子是本地的，因为不会提交到代码仓库，只不过clone的时候会初始化；</span></p><p id=\"u9970183d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">3.钩子分类：</span></p><table id=\"lYGXN\" class=\"ne-table\" style=\"width: 749px\"><tbody><tr style=\"height: 33px\"><td width=\"375\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"uc0e1d958\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">钩子名</span></strong></p></td><td width=\"374\" style=\"background-color: rgb(233, 236, 239)\"><p id=\"u9480b408\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">作用</span></strong></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u4f1927e7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-commit</span></p></td><td width=\"374\"><p id=\"u9b0b5490\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">每次git commit之前会触发，很常见的应用就是在package.json结合husky和lint-staged做代码eslint校验</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ub48f6b94\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">prepare-commit-msg</span></p></td><td width=\"374\"><p id=\"uaa0c334a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">在pre-commit在文本编辑器生成提交信息被调用，方便的修改自动生成的squash和merage提交</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u75df2953\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">commit-msg</span></p></td><td width=\"374\"><p id=\"uf49d9a5e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">用户输入提交信息被调用，就是commit -m 后面那个提交信息，可以用来规范提交信息</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u41e18c26\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">post-commit</span></p></td><td width=\"374\"><p id=\"u557c4421\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">commit-msg后执行，通知git commit的结果</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"u579a6c4f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">post-checkout</span></p></td><td width=\"374\"><p id=\"u287c48ad\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git checkout被调用</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ub803b9b2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-rebase</span></p></td><td width=\"374\"><p id=\"u2b0b0dcc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git rebase 更改之前运行</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ufd5726e3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-receive</span></p></td><td width=\"374\"><p id=\"u009e8eb6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">git push后执行，存在于远程仓库中，服务端远程钩子</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"ua49cb6a5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">update</span></p></td><td width=\"374\"><p id=\"u997bbbb6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">pre-receive 后调用</span></p></td></tr><tr style=\"height: 33px\"><td width=\"375\"><p id=\"uadf4a96d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">post-receive</span></p></td><td width=\"374\"><p id=\"uffdac8fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">push 推送成功后被调用，通知push的用户</span></p></td></tr></tbody></table><h2 id=\"ILfgA\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41)\">结语</span></h2><p id=\"ud923c737\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(33, 37, 41); font-size: 16px\">看到这里git和svn很多迷惑都解开了吧， 原创码字不易，欢迎star！</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u030236bf\" id=\"u030236bf\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [git,svn]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://segmentfault.com/u/huolang_5a14e07d2f2ff</span></p><p data-lake-id=\"u90c59306\" id=\"u90c59306\"><span data-lake-id=\"ub8c9e295\" id=\"ub8c9e295\">copyright_url: https://segmentfault.com/a/1190000039978493</span></p><p data-lake-id=\"u7364e09e\" id=\"u7364e09e\"><span data-lake-id=\"u47600aaa\" id=\"u47600aaa\">copyright_author: 火狼</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22xvqVZ%22%7D\"></card><h2 data-lake-id=\"FjMUj\" id=\"FjMUj\"><span data-lake-id=\"u2a7f73d2\" id=\"u2a7f73d2\" style=\"color: rgb(33, 37, 41)\">前言</span></h2><p data-lake-id=\"u68854e9d\" id=\"u68854e9d\"><span data-lake-id=\"ub2ed6ab3\" id=\"ub2ed6ab3\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">Git和SVN都是版本管理系统，但是他们<br />命令区别后面会简单进行一个对比，我们先从原理的角度分析</span></p><h2 data-lake-id=\"fJo9c\" id=\"fJo9c\"><span data-lake-id=\"udd8a5569\" id=\"udd8a5569\" style=\"color: rgb(33, 37, 41)\">4.git和svn命令</span></h2><p data-lake-id=\"u9a523fa4\" id=\"u9a523fa4\"><span data-lake-id=\"uaf6bc2ab\" id=\"uaf6bc2ab\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">先来复习哈命令</span></p><card type=\"block\" name=\"table\" value=\"data:%7B%22id%22%3A%22AQ4L5%22%2C%22rows%22%3A19%2C%22cols%22%3A3%2C%22html%22%3A%22%3Ctable%20data-lake-id%3D%5C%22AQ4L5%5C%22%20id%3D%5C%22AQ4L5%5C%22%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20750px%5C%22%3E%3Ccolgroup%3E%3Ccol%20width%3D%5C%22250%5C%22%3E%3Ccol%20width%3D%5C%22250%5C%22%3E%3Ccol%20width%3D%5C%22250%5C%22%3E%3C%2Fcolgroup%3E%3Ctbody%3E%3Ctr%20data-lake-id%3D%5C%22u6e9c9670%5C%22%20id%3D%5C%22u6e9c9670%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u260659d8%5C%22%20id%3D%5C%22u260659d8%5C%22%20style%3D%5C%22background-color%3A%20rgb(233%2C%20236%2C%20239)%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u1b4517cc%5C%22%20id%3D%5C%22u1b4517cc%5C%22%3E%3Cstrong%3E%3Cspan%20data-lake-id%3D%5C%22u9f3a53dd%5C%22%20id%3D%5C%22u9f3a53dd%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E4%BD%9C%E7%94%A8%3C%2Fspan%3E%3C%2Fstrong%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ua35710d7%5C%22%20id%3D%5C%22ua35710d7%5C%22%20style%3D%5C%22background-color%3A%20rgb(233%2C%20236%2C%20239)%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u879c524d%5C%22%20id%3D%5C%22u879c524d%5C%22%3E%3Cstrong%3E%3Cspan%20data-lake-id%3D%5C%22u113be3fa%5C%22%20id%3D%5C%22u113be3fa%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%3C%2Fspan%3E%3C%2Fstrong%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u96d84955%5C%22%20id%3D%5C%22u96d84955%5C%22%20style%3D%5C%22background-color%3A%20rgb(233%2C%20236%2C%20239)%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uaac39aa7%5C%22%20id%3D%5C%22uaac39aa7%5C%22%3E%3Cstrong%3E%3Cspan%20data-lake-id%3D%5C%22uecc1293b%5C%22%20id%3D%5C%22uecc1293b%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%3C%2Fspan%3E%3C%2Fstrong%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u454b9eec%5C%22%20id%3D%5C%22u454b9eec%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ubfc68638%5C%22%20id%3D%5C%22ubfc68638%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u8e5816e4%5C%22%20id%3D%5C%22u8e5816e4%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u730bbed4%5C%22%20id%3D%5C%22u730bbed4%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E7%89%88%E6%9C%AC%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u172cda08%5C%22%20id%3D%5C%22u172cda08%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u415b9429%5C%22%20id%3D%5C%22u415b9429%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22udac9033a%5C%22%20id%3D%5C%22udac9033a%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20init%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u1c0de63e%5C%22%20id%3D%5C%22u1c0de63e%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ucdfc3d8e%5C%22%20id%3D%5C%22ucdfc3d8e%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u9459b194%5C%22%20id%3D%5C%22u9459b194%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20create%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22ue3dccc8c%5C%22%20id%3D%5C%22ue3dccc8c%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u1bfcb0f8%5C%22%20id%3D%5C%22u1bfcb0f8%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u643c2fcf%5C%22%20id%3D%5C%22u643c2fcf%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u40433ee7%5C%22%20id%3D%5C%22u40433ee7%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Eclone%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uf6a6cc54%5C%22%20id%3D%5C%22uf6a6cc54%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u8430a74e%5C%22%20id%3D%5C%22u8430a74e%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u04074ea8%5C%22%20id%3D%5C%22u04074ea8%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20clone%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u7f4ec0a0%5C%22%20id%3D%5C%22u7f4ec0a0%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ub32af9c2%5C%22%20id%3D%5C%22ub32af9c2%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u7db837ab%5C%22%20id%3D%5C%22u7db837ab%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20co%EF%BC%88checkout%EF%BC%89%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u32fc4597%5C%22%20id%3D%5C%22u32fc4597%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u525d29cc%5C%22%20id%3D%5C%22u525d29cc%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u3c60a0ef%5C%22%20id%3D%5C%22u3c60a0ef%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u8b76f453%5C%22%20id%3D%5C%22u8b76f453%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Eadd%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uc47ba1bd%5C%22%20id%3D%5C%22uc47ba1bd%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ubac0fbb9%5C%22%20id%3D%5C%22ubac0fbb9%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u907143dd%5C%22%20id%3D%5C%22u907143dd%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20add%20%EF%BC%88.%E9%99%A4%E5%8E%BB.gitignore%EF%BC%8C*%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%89%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ucd8ee006%5C%22%20id%3D%5C%22ucd8ee006%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u1807a1cd%5C%22%20id%3D%5C%22u1807a1cd%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u67de7e02%5C%22%20id%3D%5C%22u67de7e02%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20add%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u97705ede%5C%22%20id%3D%5C%22u97705ede%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ubf47ec6e%5C%22%20id%3D%5C%22ubf47ec6e%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uef4ff045%5C%22%20id%3D%5C%22uef4ff045%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u3c8faa8d%5C%22%20id%3D%5C%22u3c8faa8d%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Ecommit%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u0583b114%5C%22%20id%3D%5C%22u0583b114%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ue423d07f%5C%22%20id%3D%5C%22ue423d07f%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u96ad7a20%5C%22%20id%3D%5C%22u96ad7a20%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20commit%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u2191d786%5C%22%20id%3D%5C%22u2191d786%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u2a4df3c3%5C%22%20id%3D%5C%22u2a4df3c3%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ue67f43d1%5C%22%20id%3D%5C%22ue67f43d1%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20commit%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u4db0f842%5C%22%20id%3D%5C%22u4db0f842%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22udc3a3549%5C%22%20id%3D%5C%22udc3a3549%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u7875c6b4%5C%22%20id%3D%5C%22u7875c6b4%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u97271f40%5C%22%20id%3D%5C%22u97271f40%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epull%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u20266ffc%5C%22%20id%3D%5C%22u20266ffc%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u9b02305a%5C%22%20id%3D%5C%22u9b02305a%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ua798ef00%5C%22%20id%3D%5C%22ua798ef00%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20pull%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u5df1336b%5C%22%20id%3D%5C%22u5df1336b%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u3cecc893%5C%22%20id%3D%5C%22u3cecc893%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u09015f76%5C%22%20id%3D%5C%22u09015f76%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20update%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22ud989a288%5C%22%20id%3D%5C%22ud989a288%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u8b8d7f76%5C%22%20id%3D%5C%22u8b8d7f76%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u8e82713d%5C%22%20id%3D%5C%22u8e82713d%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf6a8972f%5C%22%20id%3D%5C%22uf6a8972f%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epush%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u9428e673%5C%22%20id%3D%5C%22u9428e673%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uca3136a1%5C%22%20id%3D%5C%22uca3136a1%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ueb2a9aaa%5C%22%20id%3D%5C%22ueb2a9aaa%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20push%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ud9b6718f%5C%22%20id%3D%5C%22ud9b6718f%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u873e6ae9%5C%22%20id%3D%5C%22u873e6ae9%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u3f1d52f6%5C%22%20id%3D%5C%22u3f1d52f6%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E-%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22uc5d9675c%5C%22%20id%3D%5C%22uc5d9675c%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22uf33e79b1%5C%22%20id%3D%5C%22uf33e79b1%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u90ba2116%5C%22%20id%3D%5C%22u90ba2116%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u9326e2c8%5C%22%20id%3D%5C%22u9326e2c8%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E6%9F%A5%E7%9C%8B%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u3572f7bf%5C%22%20id%3D%5C%22u3572f7bf%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u8081d23c%5C%22%20id%3D%5C%22u8081d23c%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uefcb63c9%5C%22%20id%3D%5C%22uefcb63c9%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20status%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u3f00d430%5C%22%20id%3D%5C%22u3f00d430%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u05311949%5C%22%20id%3D%5C%22u05311949%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u0bb693b0%5C%22%20id%3D%5C%22u0bb693b0%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20status%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22ud96b7032%5C%22%20id%3D%5C%22ud96b7032%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22uf53c0cc7%5C%22%20id%3D%5C%22uf53c0cc7%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u3f61572b%5C%22%20id%3D%5C%22u3f61572b%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u9c7d1185%5C%22%20id%3D%5C%22u9c7d1185%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u0438738e%5C%22%20id%3D%5C%22u0438738e%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u97bf6bcf%5C%22%20id%3D%5C%22u97bf6bcf%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf2fd86ae%5C%22%20id%3D%5C%22uf2fd86ae%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20branch%20%26lt%3B%E5%88%86%E6%94%AF%E5%90%8D%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u2ce39603%5C%22%20id%3D%5C%22u2ce39603%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u7ed543ed%5C%22%20id%3D%5C%22u7ed543ed%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uc8809942%5C%22%20id%3D%5C%22uc8809942%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20cp%20%26lt%3B%E5%88%86%E6%94%AF%E5%90%8D%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u963c5614%5C%22%20id%3D%5C%22u963c5614%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ud4ad112a%5C%22%20id%3D%5C%22ud4ad112a%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u2db553c1%5C%22%20id%3D%5C%22u2db553c1%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u581507d8%5C%22%20id%3D%5C%22u581507d8%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u2f411ba7%5C%22%20id%3D%5C%22u2f411ba7%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u0b9538b5%5C%22%20id%3D%5C%22u0b9538b5%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ucbd5a12d%5C%22%20id%3D%5C%22ucbd5a12d%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20branch%20-d%20%26lt%3B%E5%88%86%E6%94%AF%E5%90%8D%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u9b20002f%5C%22%20id%3D%5C%22u9b20002f%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u9b60742f%5C%22%20id%3D%5C%22u9b60742f%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u0d9642e5%5C%22%20id%3D%5C%22u0d9642e5%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20rm%20%26lt%3B%E5%88%86%E6%94%AF%E5%90%8D%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22ub4da22a1%5C%22%20id%3D%5C%22ub4da22a1%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22udf6ac149%5C%22%20id%3D%5C%22udf6ac149%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uaf6275d0%5C%22%20id%3D%5C%22uaf6275d0%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ucd7cbea7%5C%22%20id%3D%5C%22ucd7cbea7%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u3d8a7281%5C%22%20id%3D%5C%22u3d8a7281%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u6739f440%5C%22%20id%3D%5C%22u6739f440%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ue652f75e%5C%22%20id%3D%5C%22ue652f75e%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20merge%20%26lt%3B%E5%88%86%E6%94%AF%E5%90%8D%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ubef5320d%5C%22%20id%3D%5C%22ubef5320d%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uf28ce050%5C%22%20id%3D%5C%22uf28ce050%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf4950e7b%5C%22%20id%3D%5C%22uf4950e7b%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20merge%20%26lt%3B%E5%88%86%E6%94%AF%E5%90%8D%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u5c950398%5C%22%20id%3D%5C%22u5c950398%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u63a81c3d%5C%22%20id%3D%5C%22u63a81c3d%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u23eccbeb%5C%22%20id%3D%5C%22u23eccbeb%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf1ec03b5%5C%22%20id%3D%5C%22uf1ec03b5%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%B7%AE%E5%BC%82%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ua9b8dfd9%5C%22%20id%3D%5C%22ua9b8dfd9%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ubfe87c69%5C%22%20id%3D%5C%22ubfe87c69%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uc00c6a33%5C%22%20id%3D%5C%22uc00c6a33%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20differ%20%EF%BC%88-cached%20%2F%20head%EF%BC%89%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u9b6c9d8d%5C%22%20id%3D%5C%22u9b6c9d8d%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uf48b09f8%5C%22%20id%3D%5C%22uf48b09f8%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u1825b6b8%5C%22%20id%3D%5C%22u1825b6b8%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20diff%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u9245c9bf%5C%22%20id%3D%5C%22u9245c9bf%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u85e9e770%5C%22%20id%3D%5C%22u85e9e770%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ub4b9f0f9%5C%22%20id%3D%5C%22ub4b9f0f9%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf02f1ce2%5C%22%20id%3D%5C%22uf02f1ce2%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E6%9B%B4%E6%96%B0%E8%87%B3%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u1a6d776b%5C%22%20id%3D%5C%22u1a6d776b%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u4698a673%5C%22%20id%3D%5C%22u4698a673%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22udbd14d14%5C%22%20id%3D%5C%22udbd14d14%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20checkout%20%26lt%3Bcommit%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u224693b2%5C%22%20id%3D%5C%22u224693b2%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u8daabbc6%5C%22%20id%3D%5C%22u8daabbc6%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u57942e35%5C%22%20id%3D%5C%22u57942e35%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20update%20-r%20%26lt%3Brev%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22uf87e418f%5C%22%20id%3D%5C%22uf87e418f%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u1abd1653%5C%22%20id%3D%5C%22u1abd1653%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u881c30ce%5C%22%20id%3D%5C%22u881c30ce%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf25102fb%5C%22%20id%3D%5C%22uf25102fb%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%88%87%E6%8D%A2tag%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uc520e5d2%5C%22%20id%3D%5C%22uc520e5d2%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uf61e46ae%5C%22%20id%3D%5C%22uf61e46ae%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u7b8bd528%5C%22%20id%3D%5C%22u7b8bd528%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20checkout%20%26lt%3Btag%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u298e3b31%5C%22%20id%3D%5C%22u298e3b31%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ufdc1535d%5C%22%20id%3D%5C%22ufdc1535d%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u1311d34c%5C%22%20id%3D%5C%22u1311d34c%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20switch%20%26lt%3Btag%26gt%3B%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u6201db77%5C%22%20id%3D%5C%22u6201db77%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u0e1145a5%5C%22%20id%3D%5C%22u0e1145a5%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u5cc5083a%5C%22%20id%3D%5C%22u5cc5083a%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ub316c4de%5C%22%20id%3D%5C%22ub316c4de%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u0bb83570%5C%22%20id%3D%5C%22u0bb83570%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u6d979d02%5C%22%20id%3D%5C%22u6d979d02%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u970d7635%5C%22%20id%3D%5C%22u970d7635%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20checkout%20branch%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ua17f5f66%5C%22%20id%3D%5C%22ua17f5f66%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u0eedc666%5C%22%20id%3D%5C%22u0eedc666%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u5262654a%5C%22%20id%3D%5C%22u5262654a%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20switch%20branch%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u42b24a8c%5C%22%20id%3D%5C%22u42b24a8c%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u72396e29%5C%22%20id%3D%5C%22u72396e29%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u0d782bf4%5C%22%20id%3D%5C%22u0d782bf4%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ud05d3d91%5C%22%20id%3D%5C%22ud05d3d91%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E8%BF%98%E5%8E%9F%E6%96%87%E4%BB%B6%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ue91e503c%5C%22%20id%3D%5C%22ue91e503c%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ue7df935f%5C%22%20id%3D%5C%22ue7df935f%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ua435bef3%5C%22%20id%3D%5C%22ua435bef3%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20checkout%20-%20path%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uf7c578a6%5C%22%20id%3D%5C%22uf7c578a6%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uc12c82e1%5C%22%20id%3D%5C%22uc12c82e1%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uaf6d1b2a%5C%22%20id%3D%5C%22uaf6d1b2a%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20revert%20path%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u13382eb0%5C%22%20id%3D%5C%22u13382eb0%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u957da9e3%5C%22%20id%3D%5C%22u957da9e3%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u161854c0%5C%22%20id%3D%5C%22u161854c0%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u978201f2%5C%22%20id%3D%5C%22u978201f2%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uc2b8038f%5C%22%20id%3D%5C%22uc2b8038f%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u26072ed7%5C%22%20id%3D%5C%22u26072ed7%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uf1a12b5e%5C%22%20id%3D%5C%22uf1a12b5e%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20rm%20path%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ue63cc2c0%5C%22%20id%3D%5C%22ue63cc2c0%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ue54c4726%5C%22%20id%3D%5C%22ue54c4726%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u8bb850b9%5C%22%20id%3D%5C%22u8bb850b9%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20rm%20path%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22uf3bbe263%5C%22%20id%3D%5C%22uf3bbe263%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ufd0f00d2%5C%22%20id%3D%5C%22ufd0f00d2%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u3eb732a9%5C%22%20id%3D%5C%22u3eb732a9%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u3a3c054c%5C%22%20id%3D%5C%22u3a3c054c%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E7%A7%BB%E5%8A%A8%E6%96%87%E4%BB%B6%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u2732bcbb%5C%22%20id%3D%5C%22u2732bcbb%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ua5e4355e%5C%22%20id%3D%5C%22ua5e4355e%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u69692477%5C%22%20id%3D%5C%22u69692477%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20mv%20path%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uc81300c0%5C%22%20id%3D%5C%22uc81300c0%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u1bbdff8a%5C%22%20id%3D%5C%22u1bbdff8a%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u1265f02c%5C%22%20id%3D%5C%22u1265f02c%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20mv%20path%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u77e78cd1%5C%22%20id%3D%5C%22u77e78cd1%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u69ec7d22%5C%22%20id%3D%5C%22u69ec7d22%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ud0a1768b%5C%22%20id%3D%5C%22ud0a1768b%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u1e1dade8%5C%22%20id%3D%5C%22u1e1dade8%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E6%B8%85%E9%99%A4%E6%9C%AA%E8%BF%BD%E8%B8%AA%E6%96%87%E4%BB%B6%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ua0779b8f%5C%22%20id%3D%5C%22ua0779b8f%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u39a2f2d3%5C%22%20id%3D%5C%22u39a2f2d3%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u730128ba%5C%22%20id%3D%5C%22u730128ba%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20clean%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22uab53159b%5C%22%20id%3D%5C%22uab53159b%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u5adb45ca%5C%22%20id%3D%5C%22u5adb45ca%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u1cc341c9%5C%22%20id%3D%5C%22u1cc341c9%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Esvn%20status%20sed%20-e%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Atrue%7D\"></card><h2 data-lake-id=\"dgV9B\" id=\"dgV9B\"><span data-lake-id=\"u8561160e\" id=\"u8561160e\" style=\"color: rgb(33, 37, 41)\">1.存贮区别</span></h2><p data-lake-id=\"ube903dc4\" id=\"ube903dc4\"><span data-lake-id=\"udb1f217d\" id=\"udb1f217d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">大家想想为什么我们代码管理为什么一般用git，原型图和高保真管理一般用SVN?</span></p><p data-lake-id=\"ub42d0a00\" id=\"ub42d0a00\"><span data-lake-id=\"ub49fdb3e\" id=\"ub49fdb3e\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">1.git是分布式的，有本地和远程两个版本库，SVN是集中式，只有一个远程版本库；<br />2.git的内容是按元数据方式存贮，所有控制文件在.git中，svn是按文件处理，所有资源控制文件在.svn中；<br />3.svn的分支是一个目录，git不是；<br />4.git没有一个全局的版本号，svn有；<br />5.git内容存贮是使用SHA-1哈希算法，能确保代码完整性;<br />6.git 有工作区，暂存区，远程仓库，git add将代码提交到暂存区， commit提交到本地版本库，push推送到远程版本库。svn是add 提交到暂存，commit是提交到远程版本库。</span></p><p data-lake-id=\"u45835d04\" id=\"u45835d04\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1650362992187-7a03197b-6c8e-4a6e-a3c5-e1f3c71e5423.png%22%2C%22taskId%22%3A%22u16605eef-3685-427f-9af3-30ce347df4a%22%2C%22clientId%22%3A%22u628dacaa-ae7d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A732%2C%22originHeight%22%3A261%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u9bf41b5f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card></p><p data-lake-id=\"u4ebe99ca\" id=\"u4ebe99ca\"><span data-lake-id=\"uedf12bdb\" id=\"uedf12bdb\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">所以可以很清楚的看出因为原型图和高保真都是以单个文件为单位，所以适合用SVN管理，而我们代码时以行数为单位，适合Git</span></p><h2 data-lake-id=\"uXddJ\" id=\"uXddJ\"><span data-lake-id=\"u4ba93b3e\" id=\"u4ba93b3e\" style=\"color: rgb(33, 37, 41)\">2.文件.svn和.git区别</span></h2><p data-lake-id=\"u13247c97\" id=\"u13247c97\"><span data-lake-id=\"u9aa35917\" id=\"u9aa35917\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">1..svn目录</span></p><p data-lake-id=\"u6aadd7d6\" id=\"u6aadd7d6\"><span data-lake-id=\"u9a09a6ef\" id=\"u9a09a6ef\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">随便打开一个.svn的目录可以看到结构：<br />如果无法查看.svn，window电脑-点击查看-勾选隐藏文件；<br />mac直接shift + command + .</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22%E2%94%9C%E2%94%80%E2%94%80%20pristine%20%E5%90%84%E4%B8%AA%E7%89%88%E6%9C%AC%E7%BA%AA%E5%BD%95%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%80%E8%88%AC%E8%BE%83%E5%A4%A7%5Cn%E2%94%9C%E2%94%80%E2%94%80%20tmp%20%5Cn%E2%94%9C%E2%94%80%E2%94%80%20entries%20%E5%BD%93%E5%89%8D%E7%89%88%E6%9C%AC%E5%8F%B7%5Cn%E2%94%9C%E2%94%80%E2%94%80%20format%20%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%EF%BC%8C%20%E6%94%BE%E4%BA%86%E4%B8%80%E4%B8%AA%E6%95%B4%E6%95%B0%EF%BC%8C%E5%BD%93%E5%89%8D%E7%89%88%E6%9C%AC%E5%8F%B7%5Cn%E2%94%9C%E2%94%80%E2%94%80%20wc.db%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%5Cn%E2%94%9C%E2%94%80%E2%94%80%20wc.db-journal%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22gURh5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf4d467fa\" id=\"uf4d467fa\"><br></p><p data-lake-id=\"u581ea012\" id=\"u581ea012\"><span data-lake-id=\"ue631abc7\" id=\"ue631abc7\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">2..git 目录结构</span></p><p data-lake-id=\"u26143cd9\" id=\"u26143cd9\"><span data-lake-id=\"uc2af7c2c\" id=\"uc2af7c2c\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">你可能对这些目录结构很陌生，没关系，直接在终端输入 git help gitrepository-layout回车，你会发现浏览器会打开一个html文件，实际上就会打开安装git下面的一个html文档</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22%E2%94%9C%E2%94%80%E2%94%80%20hooks%20%E9%92%A9%E5%AD%90%E6%96%87%E4%BB%B6%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20applypatch-msg.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20commit-msg.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20fsmonitor-watchman.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20fsmonitor-watchman.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20pre-applypatch.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20pre-commit.sample%20commit%E6%97%B6%E4%BC%9A%E8%A7%A6%E5%8F%91%E8%BF%99%E4%B8%AA%E9%92%A9%E5%AD%90%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20pre-push.sample%20push%E8%A7%A6%E5%8F%91%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20pre-rebase.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20pre-receive.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20prepare-commit-msg.sample%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20update.sample%20update%E8%A7%A6%E5%8F%91%5Cn%E2%94%9C%E2%94%80%E2%94%80%20info%5Cn%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20exclude%20%E5%BF%BD%E7%95%A5%E7%9A%84%E6%96%87%E4%BB%B6%5Cn%E2%94%9C%E2%94%80%E2%94%80%20object%20git%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8C%85%E6%8B%ACcommit%EF%BC%8Ctrees%EF%BC%8C%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%A0%87%E7%AD%BE%E7%AD%89%5Cn%E2%94%9C%E2%94%80%E2%94%80%20COMMIT_EDITMSG%20%E4%B8%8A%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4%E7%9A%84%E6%B3%A8%E9%87%8A%E4%BF%A1%E6%81%AF%5Cn%E2%94%9C%E2%94%80%E2%94%80%20log%20%E5%90%84%E4%B8%AArefs%E7%9A%84%E5%8E%86%E5%8F%B2%E4%BF%A1%E6%81%AF%5Cn%E2%94%9C%E2%94%80%E2%94%80%20refs%20%E6%AF%8F%E4%B8%AA%E5%88%86%E6%94%AF%E6%8C%87%E5%90%91%E9%82%A3%E4%B8%AA%E6%8F%90%E4%BA%A4%5Cn%E2%94%9C%E2%94%80%E2%94%80%20config%20%E6%9C%AC%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8C%85%E6%8B%AC%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%88%86%E6%94%AF%EF%BC%8C%E7%94%A8%E6%88%B7%E8%B4%A6%E5%8F%B7%E7%AD%89%5Cn%E2%94%9C%E2%94%80%E2%94%80%20description%20%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0%5Cn%E2%94%9C%E2%94%80%E2%94%80%20HEAD%20%E5%BD%93%E5%89%8D%E5%88%86%E6%94%AF%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4%5Cn%E2%94%9C%E2%94%80%E2%94%80%20index%20%E7%B4%A2%E5%BC%95%E6%96%87%E4%BB%B6%EF%BC%8C%E5%AD%98%E8%B4%AEgit%20add%E6%8A%8A%E8%A6%81%E6%B7%BB%E5%8A%A0%E7%9A%84%E9%A1%B9%5Cn%E2%94%9C%E2%94%80%E2%94%80%20packed-refs%20%E5%88%86%E6%94%AF%E6%A0%87%E8%AF%86%E6%96%87%E4%BB%B6%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Cp6Wy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u475d5cfb\" id=\"u475d5cfb\"><span data-lake-id=\"ue7ab6345\" id=\"ue7ab6345\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">所以可以看出git在处理代码方面功能比svn要强大一些</span></p><h2 data-lake-id=\"I0vrp\" id=\"I0vrp\"><span data-lake-id=\"uf2b11b64\" id=\"uf2b11b64\" style=\"color: rgb(33, 37, 41)\">3..git文件动态分析</span></h2><h3 data-lake-id=\"BNTq8\" id=\"BNTq8\"><span data-lake-id=\"u4607ada1\" id=\"u4607ada1\" style=\"color: rgb(33, 37, 41)\">3.1 add阶段</span></h3><p data-lake-id=\"u679905e1\" id=\"u679905e1\"><span data-lake-id=\"ua0f62771\" id=\"ua0f62771\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">1.执行git init会生成一个初始化的.git,会发现上面有些目录文件没有，因为有些文件是指定的命令后才会生成</span></p><p data-lake-id=\"u4cfdfe1f\" id=\"u4cfdfe1f\"><span data-lake-id=\"u7fda23dc\" id=\"u7fda23dc\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">2.新建一个test.txt,随便写点内容，执行git status</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22On%20branch%20master%20%20%2F%2F%20%E9%BB%98%E8%AE%A4%E4%B8%80%E4%B8%AAmaster%20%E5%88%86%E6%94%AF%5Cn%5CnNo%20commits%20yet%5Cn%5CnUntracked%20files%3A%20%2F%2F%20%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E6%96%87%E4%BB%B6%5Cn%20%20(use%20%5C%22git%20add%20%3Cfile%3E...%5C%22%20to%20include%20in%20what%20will%20be%20committed)%5Cn%5Cn%20%20%20%20test.txt%5Cn%5Cnnothing%20added%20to%20commit%20but%20untracked%20files%20present%20(use%20%5C%22git%20add%5C%22%20to%20track)%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ODefI%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u938c8bbf\" id=\"u938c8bbf\"><span data-lake-id=\"u94c49683\" id=\"u94c49683\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">运行 find . -type f</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22.%2Fconfig%5Cn.%2FHEAD%5Cn.%2Finfo%2Fexclude%5Cn.%2Fdescription%5Cn.%2Fhooks%2Fcommit-msg.sample%5Cn.%2Fhooks%2Fpre-rebase.sample%5Cn.%2Fhooks%2Fpre-commit.sample%5Cn.%2Fhooks%2Fapplypatch-msg.sample%5Cn.%2Fhooks%2Ffsmonitor-watchman.sample%5Cn.%2Fhooks%2Fpre-receive.sample%5Cn.%2Fhooks%2Fprepare-commit-msg.sample%5Cn.%2Fhooks%2Fpost-update.sample%5Cn.%2Fhooks%2Fpre-applypatch.sample%5Cn.%2Fhooks%2Fpre-push.sample%5Cn.%2Fhooks%2Fupdate.sample%5Cn.%2Findex%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22QpjMN%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u5c380f31\" id=\"u5c380f31\"><span data-lake-id=\"u0e39ebbe\" id=\"u0e39ebbe\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">3.执行 git add text.txt,显示</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22On%20branch%20master%5Cn%5CnNo%20commits%20yet%5Cn%5CnChanges%20to%20be%20committed%3A%5Cn%20%20(use%20%5C%22git%20rm%20--cached%20%3Cfile%3E...%5C%22%20to%20unstage)%5Cn%5Cn%20%20%20%20new%20file%3A%20%20%20test.txt%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22NnVJR%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u285def08\" id=\"u285def08\"><span data-lake-id=\"udd941921\" id=\"udd941921\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">运行find . -type f</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22.%2Fconfig%5Cn.%2Fobjects%2F61%2Fde0edff4ebeeff225da34006cbe6427638fadc%20%20%23%20%E6%AF%94%E4%B9%8B%E5%89%8D%E5%A4%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%5Cn.%2FHEAD%5Cn.%2Finfo%2Fexclude%5Cn.%2Fdescription%5Cn.%2Fhooks%2Fcommit-msg.sample%5Cn.%2Fhooks%2Fpre-rebase.sample%5Cn.%2Fhooks%2Fpre-commit.sample%5Cn.%2Fhooks%2Fapplypatch-msg.sample%5Cn.%2Fhooks%2Ffsmonitor-watchman.sample%5Cn.%2Fhooks%2Fpre-receive.sample%5Cn.%2Fhooks%2Fprepare-commit-msg.sample%5Cn.%2Fhooks%2Fpost-update.sample%5Cn.%2Fhooks%2Fpre-applypatch.sample%5Cn.%2Fhooks%2Fpre-push.sample%5Cn.%2Fhooks%2Fupdate.sample%5Cn.%2Findex%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22dfCyj%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u87467bd9\" id=\"u87467bd9\"><span data-lake-id=\"u0289f5e7\" id=\"u0289f5e7\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">4.总结：可以看出git add后test.txt 被标记为staged 状态，而且object多了一个61/de0edff 文件，所以object 可以存贮git仓库内容，以二进制方式存贮。</span></p><p data-lake-id=\"u351f7970\" id=\"u351f7970\"><span data-lake-id=\"u84ae5488\" id=\"u84ae5488\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">5.我们可以查看下文件来源</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20cat-file%20-p%2061de0edf%5Cn%E6%89%93%E5%8D%B0%20test%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22e5d2C%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u82e4f4d2\" id=\"u82e4f4d2\"><span data-lake-id=\"ua6f9f983\" id=\"ua6f9f983\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">6.git如何管理和归档文件<br />我们常见的文件系统(NTFS、FAT、FAT32)是基于地址方式检索文件，即先给具体的地址，然后从地址编号对应的存储单元读取文件内容，而git是基于内容检索，是对整个内容检索，得到一个真实的存储位置，类似哈希映射。</span></p><h3 data-lake-id=\"VBx0G\" id=\"VBx0G\"><span data-lake-id=\"u161878ec\" id=\"u161878ec\" style=\"color: rgb(33, 37, 41)\">3.2 commit阶段</span></h3><p data-lake-id=\"u0c399b36\" id=\"u0c399b36\"><span data-lake-id=\"uce2a5ebf\" id=\"uce2a5ebf\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">1.执行 git commit -m 'add test'</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%221%20file%20changed%2C%201%20insertion(%2B)%5Cncreate%20mode%20100644%20test.txt%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22LMBbd%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u73ccaed2\" id=\"u73ccaed2\"><span data-lake-id=\"ubb9bcfaf\" id=\"ubb9bcfaf\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">2.运行 find . -type f</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22.%2Ftest.txt%5Cn.%2F.git%2Fconfig%5Cn.%2F.git%2Fobjects%2F61%2Fde0edff4ebeeff225da34006cbe6427638fadc%5Cn.%2F.git%2Fobjects%2Fed%2Ffd7e903f8f622f9a52542adfa077552608202d%5Cn.%2F.git%2Fobjects%2F26%2Fef8e81bc27b4a67f251145a4f83782364fa9fa%5Cn.%2F.git%2FHEAD%5Cn.%2F.git%2Finfo%2Fexclude%5Cn.%2F.git%2Flogs%2FHEAD%5Cn.%2F.git%2Flogs%2Frefs%2Fheads%2Fmaster%5Cn.%2F.git%2Fdescription%5Cn.%2F.git%2Fhooks%2Fcommit-msg.sample%5Cn.%2F.git%2Fhooks%2Fpre-rebase.sample%5Cn.%2F.git%2Fhooks%2Fpre-commit.sample%5Cn.%2F.git%2Fhooks%2Fapplypatch-msg.sample%5Cn.%2F.git%2Fhooks%2Ffsmonitor-watchman.sample%5Cn.%2F.git%2Fhooks%2Fpre-receive.sample%5Cn.%2F.git%2Fhooks%2Fprepare-commit-msg.sample%5Cn.%2F.git%2Fhooks%2Fpost-update.sample%5Cn.%2F.git%2Fhooks%2Fpre-applypatch.sample%5Cn.%2F.git%2Fhooks%2Fpre-push.sample%5Cn.%2F.git%2Fhooks%2Fupdate.sample%5Cn.%2F.git%2Frefs%2Fheads%2Fmaster%5Cn.%2F.git%2Findex%5Cn.%2F.git%2FCOMMIT_EDITMSG%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22n3M8D%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf18e258d\" id=\"uf18e258d\"><span data-lake-id=\"u26b7ea7b\" id=\"u26b7ea7b\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">可以看出commit 后在add 的基础上object多了两个文件ed/fd7e90和26/ef8e8，从文件的归档路径和命名可以看出git使用SHA-1算法对文件内容进行了校验</span></p><p data-lake-id=\"u8b3cd669\" id=\"u8b3cd669\"><span data-lake-id=\"u21a64894\" id=\"u21a64894\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">还多了一个COMMIT_EDITMSG ，里面是上一次提交的注释信息</span></p><p data-lake-id=\"u923c6129\" id=\"u923c6129\"><span data-lake-id=\"ue5650e9b\" id=\"ue5650e9b\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">3.使用git cat-file 查看来源</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20cat-file%20-t%20edfd7e90%5Cn%2F%2F%20%E7%BB%88%E7%AB%AF%E8%BE%93%E5%87%BAtree%5Cn%5Cngit%20cat-file%20-t%2026ef8e8%5Cn%2F%2F%20%E7%BB%88%E7%AB%AF%E8%BE%93%E5%87%BAcommit%5Cn%5Cngit%20cat-file%20-p%20edfd7e90%5Cn%2F%2F%20%E7%BB%88%E7%AB%AF%E8%BE%93%E5%87%BA%20100644%20blob%2061de0edff4ebeeff225da34006cbe6427638fadc%20%20%20%20test.txt%5Cn%5Cngit%20cat-file%20-p%2026ef8e8%5Cn%2F%2F%20%E7%BB%88%E7%AB%AF%E8%BE%93%E5%87%BA%20tree%20edfd7e903f8f622f9a52542adfa077552608202d%5Cnauthor%20%E4%BF%A1%E6%81%AF%20%201612668900%20%2B0800%5Cncommitter%20author%20%E4%BF%A1%E6%81%AF%20%201612668900%20%2B0800%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ECylr%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u0d36489f\" id=\"u0d36489f\"><span data-lake-id=\"u524404a3\" id=\"u524404a3\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">ed/fd7e90 是一个commit 对象，tree属性指向了26/ef8e8，纪录了文件操作，作者，提交者信息；<br />26/ef8e8 是一个tree 对象，blob 属性指向了blob对象61/de0edf，纪录了文件名；<br />61/de0edf 是一个blob 对象，纪录了文件内容。</span></p><p data-lake-id=\"ubf18b0b5\" id=\"ubf18b0b5\"><span data-lake-id=\"u2518e82a\" id=\"u2518e82a\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">三个文件关系：<br /></span><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fjpeg%2F27022430%2F1650362992194-a4905996-c53d-4ff4-a58f-9052a6f76764.jpeg%22%2C%22taskId%22%3A%22u9a9a7836-6925-41ce-8dd0-adfa2f12349%22%2C%22clientId%22%3A%22u628dacaa-ae7d-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A732%2C%22originHeight%22%3A142%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uba2d9c63%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"></card><span data-lake-id=\"uab4862cb\" id=\"uab4862cb\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\"><br />所以现在知道为什么object文件会很大的吧</span></p><h3 data-lake-id=\"eaZe8\" id=\"eaZe8\"><span data-lake-id=\"u30bee5e3\" id=\"u30bee5e3\" style=\"color: rgb(33, 37, 41)\">3.3 branch</span></h3><p data-lake-id=\"ue3ea8e3f\" id=\"ue3ea8e3f\"><span data-lake-id=\"u95fb852c\" id=\"u95fb852c\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">git branch 获取分支列表<br />列表保存到refs/heads/master 下面</span></p><h3 data-lake-id=\"XqdQm\" id=\"XqdQm\"><span data-lake-id=\"u27e1d98d\" id=\"u27e1d98d\" style=\"color: rgb(33, 37, 41)\">3.4 git对象模型</span></h3><p data-lake-id=\"u4323f395\" id=\"u4323f395\"><span data-lake-id=\"u0bf0ec7c\" id=\"u0bf0ec7c\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">通过上面3.2的分析知道，在git系统中有四种尅性的对象：<br />1.commit：指向一个tree，纪录了文件操作，作者，提交者信息；<br />2.tree：对象关系树，管理tree和blob的关系；<br />3.blob：保存文件内容；<br />4.tag：标记提交。</span></p><h3 data-lake-id=\"vgR07\" id=\"vgR07\"><span data-lake-id=\"ue706c316\" id=\"ue706c316\" style=\"color: rgb(33, 37, 41)\">3.5 git生命周期钩子</span></h3><p data-lake-id=\"uca08e264\" id=\"uca08e264\"><span data-lake-id=\"u2d31fe68\" id=\"u2d31fe68\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">1.钩子初始化：<br />上面说到的hooks 下面都是生命周期脚本，初始化仓库（git init）或 git clone 都会初始化.git文件；</span></p><p data-lake-id=\"u462ce509\" id=\"u462ce509\"><span data-lake-id=\"u7f737cad\" id=\"u7f737cad\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">2.钩子是本地的，因为不会提交到代码仓库，只不过clone的时候会初始化；</span></p><p data-lake-id=\"u9970183d\" id=\"u9970183d\"><span data-lake-id=\"u4425b84d\" id=\"u4425b84d\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">3.钩子分类：</span></p><card type=\"block\" name=\"table\" value=\"data:%7B%22id%22%3A%22lYGXN%22%2C%22rows%22%3A10%2C%22cols%22%3A2%2C%22html%22%3A%22%3Ctable%20data-lake-id%3D%5C%22lYGXN%5C%22%20id%3D%5C%22lYGXN%5C%22%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20749px%5C%22%3E%3Ccolgroup%3E%3Ccol%20width%3D%5C%22375%5C%22%3E%3Ccol%20width%3D%5C%22374%5C%22%3E%3C%2Fcolgroup%3E%3Ctbody%3E%3Ctr%20data-lake-id%3D%5C%22uf7bf9772%5C%22%20id%3D%5C%22uf7bf9772%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u8b3262a1%5C%22%20id%3D%5C%22u8b3262a1%5C%22%20style%3D%5C%22background-color%3A%20rgb(233%2C%20236%2C%20239)%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uc0e1d958%5C%22%20id%3D%5C%22uc0e1d958%5C%22%3E%3Cstrong%3E%3Cspan%20data-lake-id%3D%5C%22u50ef5abf%5C%22%20id%3D%5C%22u50ef5abf%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E9%92%A9%E5%AD%90%E5%90%8D%3C%2Fspan%3E%3C%2Fstrong%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u23cc6605%5C%22%20id%3D%5C%22u23cc6605%5C%22%20style%3D%5C%22background-color%3A%20rgb(233%2C%20236%2C%20239)%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u9480b408%5C%22%20id%3D%5C%22u9480b408%5C%22%3E%3Cstrong%3E%3Cspan%20data-lake-id%3D%5C%22u049eb08b%5C%22%20id%3D%5C%22u049eb08b%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E4%BD%9C%E7%94%A8%3C%2Fspan%3E%3C%2Fstrong%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u94a06c8c%5C%22%20id%3D%5C%22u94a06c8c%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ua9436f79%5C%22%20id%3D%5C%22ua9436f79%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u4f1927e7%5C%22%20id%3D%5C%22u4f1927e7%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u506b3c4b%5C%22%20id%3D%5C%22u506b3c4b%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epre-commit%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u643f0654%5C%22%20id%3D%5C%22u643f0654%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u9b0b5490%5C%22%20id%3D%5C%22u9b0b5490%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u7ab7ea08%5C%22%20id%3D%5C%22u7ab7ea08%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E6%AF%8F%E6%AC%A1git%20commit%E4%B9%8B%E5%89%8D%E4%BC%9A%E8%A7%A6%E5%8F%91%EF%BC%8C%E5%BE%88%E5%B8%B8%E8%A7%81%E7%9A%84%E5%BA%94%E7%94%A8%E5%B0%B1%E6%98%AF%E5%9C%A8package.json%E7%BB%93%E5%90%88husky%E5%92%8Clint-staged%E5%81%9A%E4%BB%A3%E7%A0%81eslint%E6%A0%A1%E9%AA%8C%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u1968d586%5C%22%20id%3D%5C%22u1968d586%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u7f12b666%5C%22%20id%3D%5C%22u7f12b666%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ub48f6b94%5C%22%20id%3D%5C%22ub48f6b94%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uc7498631%5C%22%20id%3D%5C%22uc7498631%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Eprepare-commit-msg%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u8d6ee9c5%5C%22%20id%3D%5C%22u8d6ee9c5%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uaa0c334a%5C%22%20id%3D%5C%22uaa0c334a%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u00efbb6d%5C%22%20id%3D%5C%22u00efbb6d%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E5%9C%A8pre-commit%E5%9C%A8%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E7%94%9F%E6%88%90%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E6%96%B9%E4%BE%BF%E7%9A%84%E4%BF%AE%E6%94%B9%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E7%9A%84squash%E5%92%8Cmerage%E6%8F%90%E4%BA%A4%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u118a07b5%5C%22%20id%3D%5C%22u118a07b5%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ub191ea9e%5C%22%20id%3D%5C%22ub191ea9e%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u75df2953%5C%22%20id%3D%5C%22u75df2953%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u039e6373%5C%22%20id%3D%5C%22u039e6373%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Ecommit-msg%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ue354696d%5C%22%20id%3D%5C%22ue354696d%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uf49d9a5e%5C%22%20id%3D%5C%22uf49d9a5e%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ub678fe99%5C%22%20id%3D%5C%22ub678fe99%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3E%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E5%B0%B1%E6%98%AFcommit%20-m%20%E5%90%8E%E9%9D%A2%E9%82%A3%E4%B8%AA%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u16b891e1%5C%22%20id%3D%5C%22u16b891e1%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u53e26501%5C%22%20id%3D%5C%22u53e26501%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u41e18c26%5C%22%20id%3D%5C%22u41e18c26%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u41510df1%5C%22%20id%3D%5C%22u41510df1%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epost-commit%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u76396e26%5C%22%20id%3D%5C%22u76396e26%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u557c4421%5C%22%20id%3D%5C%22u557c4421%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u399f87ac%5C%22%20id%3D%5C%22u399f87ac%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Ecommit-msg%E5%90%8E%E6%89%A7%E8%A1%8C%EF%BC%8C%E9%80%9A%E7%9F%A5git%20commit%E7%9A%84%E7%BB%93%E6%9E%9C%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u7717c1cd%5C%22%20id%3D%5C%22u7717c1cd%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22uda39f47a%5C%22%20id%3D%5C%22uda39f47a%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u579a6c4f%5C%22%20id%3D%5C%22u579a6c4f%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22udaa53429%5C%22%20id%3D%5C%22udaa53429%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epost-checkout%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u17a2161c%5C%22%20id%3D%5C%22u17a2161c%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u287c48ad%5C%22%20id%3D%5C%22u287c48ad%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u74a476fb%5C%22%20id%3D%5C%22u74a476fb%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20checkout%E8%A2%AB%E8%B0%83%E7%94%A8%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u9f6c0044%5C%22%20id%3D%5C%22u9f6c0044%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ue96bc6d8%5C%22%20id%3D%5C%22ue96bc6d8%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ub803b9b2%5C%22%20id%3D%5C%22ub803b9b2%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22uc222fa82%5C%22%20id%3D%5C%22uc222fa82%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epre-rebase%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u6b982aa4%5C%22%20id%3D%5C%22u6b982aa4%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u2b0b0dcc%5C%22%20id%3D%5C%22u2b0b0dcc%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ud9583739%5C%22%20id%3D%5C%22ud9583739%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20rebase%20%E6%9B%B4%E6%94%B9%E4%B9%8B%E5%89%8D%E8%BF%90%E8%A1%8C%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u5718448f%5C%22%20id%3D%5C%22u5718448f%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u914eaaa4%5C%22%20id%3D%5C%22u914eaaa4%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ufd5726e3%5C%22%20id%3D%5C%22ufd5726e3%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u81f169ef%5C%22%20id%3D%5C%22u81f169ef%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epre-receive%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22u17c49ebb%5C%22%20id%3D%5C%22u17c49ebb%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u009e8eb6%5C%22%20id%3D%5C%22u009e8eb6%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u51a26a36%5C%22%20id%3D%5C%22u51a26a36%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Egit%20push%E5%90%8E%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%AD%98%E5%9C%A8%E4%BA%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E4%B8%AD%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%BF%9C%E7%A8%8B%E9%92%A9%E5%AD%90%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u9508b0a6%5C%22%20id%3D%5C%22u9508b0a6%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22ucdbe4b5c%5C%22%20id%3D%5C%22ucdbe4b5c%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ua49cb6a5%5C%22%20id%3D%5C%22ua49cb6a5%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u9e3b583d%5C%22%20id%3D%5C%22u9e3b583d%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Eupdate%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ufcc2521e%5C%22%20id%3D%5C%22ufcc2521e%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u997bbbb6%5C%22%20id%3D%5C%22u997bbbb6%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u579324cd%5C%22%20id%3D%5C%22u579324cd%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epre-receive%20%E5%90%8E%E8%B0%83%E7%94%A8%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22ue4e1f653%5C%22%20id%3D%5C%22ue4e1f653%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u337e0d51%5C%22%20id%3D%5C%22u337e0d51%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uadf4a96d%5C%22%20id%3D%5C%22uadf4a96d%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u02c8826f%5C%22%20id%3D%5C%22u02c8826f%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epost-receive%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ua6b27ec2%5C%22%20id%3D%5C%22ua6b27ec2%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uffdac8fa%5C%22%20id%3D%5C%22uffdac8fa%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ue648a286%5C%22%20id%3D%5C%22ue648a286%5C%22%20class%3D%5C%22lake-fontsize-12%5C%22%20style%3D%5C%22color%3A%20rgb(33%2C%2037%2C%2041)%5C%22%3Epush%20%E6%8E%A8%E9%80%81%E6%88%90%E5%8A%9F%E5%90%8E%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%E9%80%9A%E7%9F%A5push%E7%9A%84%E7%94%A8%E6%88%B7%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Atrue%7D\"></card><h2 data-lake-id=\"ILfgA\" id=\"ILfgA\"><span data-lake-id=\"u7b1f49e4\" id=\"u7b1f49e4\" style=\"color: rgb(33, 37, 41)\">结语</span></h2><p data-lake-id=\"ud923c737\" id=\"ud923c737\"><span data-lake-id=\"u7333e086\" id=\"u7333e086\" class=\"lake-fontsize-12\" style=\"color: rgb(33, 37, 41)\">看到这里git和svn很多迷惑都解开了吧， 原创码字不易，欢迎star！</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 4,
    "hits": 4,
    "comments_count": 0,
    "word_count": 2112,
    "created_at": "2022-04-19T10:05:51.000Z",
    "updated_at": "2023-07-27T02:07:49.000Z",
    "content_updated_at": "2023-07-27T02:07:49.000Z",
    "published_at": "2022-04-19T10:14:17.000Z",
    "first_published_at": "2022-04-19T10:14:17.000Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 939599528,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73661228,
    "type": "Doc",
    "slug": "nkr3gz",
    "title": "PHP Faker 教程",
    "description": "tags: [php,faker]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net什么是PHP FakerFaker 是一个生成假数据的 PHP 库，Faka 数据通常用于测试或用一些伪数据填充数据库，Faker...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1650013870646-a6ba9653-b5ac-4919-b345-5745aed19374.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ucc0b98db\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,faker]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"C87L0\" class=\"ne-hr\"><h1 id=\"iZwXI\"><span class=\"ne-text\">什么是</span><span class=\"ne-text\">PHP Faker</span></h1><p id=\"u9370ef4a\" class=\"ne-p\"><span class=\"ne-text\">Faker 是一个生成假数据的 PHP 库，Faka 数据通常用于测试或用一些伪数据填充数据库，Faker 受到 Perl 的 Data :: Faker 和 </span><span class=\"ne-text\">Ruby</span><span class=\"ne-text\"> 的 Faker 的极大启发。</span></p><p id=\"u328aa65e\" class=\"ne-p\"><span class=\"ne-text\">说白了就是：</span></p><div class=\"ne-quote\"><p id=\"ud6dbac09\" class=\"ne-p\"><span class=\"ne-text\">我们在创建完数据表格后往往需要做一些假数据，而Faker就是这样的工具。安装Faker</span></p></div><h1 id=\"LzdtU\"><span class=\"ne-text\">安装Faker</span></h1><p id=\"u3fb9665d\" class=\"ne-p\"><span class=\"ne-text\">在项目所在的文件夹中打开</span><span class=\"ne-text\">命令行</span><span class=\"ne-text\">输入以下命令：</span></p><pre data-language=\"shell\" id=\"iefFj\" class=\"ne-codeblock language-shell\"><code>composer require fzaninotto/faker</code></pre><p id=\"uc7e57015\" class=\"ne-p\"><span class=\"ne-text\">运行以后会在vendor文件夹下生成：</span></p><p id=\"u4c9b8430\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1650013870646-a6ba9653-b5ac-4919-b345-5745aed19374.png\" width=\"507\" id=\"u7c034536\" class=\"ne-image\"></p><h1 id=\"WcOmG\"><span class=\"ne-text\">实际使用</span></h1><p id=\"udfabd346\" class=\"ne-p\"><span class=\"ne-text\">在项目中的实际使用方法（以Thinkphp为例）：</span></p><pre data-language=\"php\" id=\"aV8WT\" class=\"ne-codeblock language-php\"><code>&lt;?php\nnamespace MyFaker;\n//use会调用类注册, 前提是你得先导入相应的类注册方法 (autoload.php)\nuse Faker\\Factory;\nclass FakerData\n{\n    //使用faker生成假数据\n    public static function createInfo()\n    {\n        $faker = Factory::create('zh_CN');//选择中文\n        $data = [\n            $faker-&gt;name,//随机姓名\n            $faker-&gt;address,//随机地址\n            $faker-&gt;email,//随机邮箱\n            $faker-&gt;numberBetween(20,60),//年龄随机在20-60之间\n            $faker-&gt;randomElement(['农民','工人','程序员'])//随机职业\n        ];\n        //调试工具\n         dump($data);\n    }\n    public function insertInfo(){\n      $faker = Factory::create('zh_CN');\n        $data = [];\n        //创建数据\n        for ($i = 0; $i &lt; 3; $i++){\n            $data[$i]['title'] = $faker-&gt;name();\n            $data[$i]['version'] = '1.0';\n            $data[$i]['status'] = $faker-&gt;numberBetween(0,1);\n            $data[$i]['user_id'] = 1;\n            $data[$i]['description'] = $faker-&gt;realText(10, 2);\n            $data[$i]['coll_num'] = 0;\n            $data[$i]['create_time'] = $faker-&gt;date('Y-m-d H:i:s','now');\n            $data[$i]['update_time'] = $faker-&gt;date('Y-m-d H:i:s','now');\n            $data[$i]['appid'] = $faker-&gt;md5();\n            $data[$i]['appsecret'] = $faker-&gt;md5();\n            $data[$i]['code'] = $faker-&gt;md5();\n        }\n        $table = $this-&gt;table('hbb_item');\n        $table-&gt;insert($data)-&gt;save();\n    }\n  \n}\n</code></pre><p id=\"u4a9af566\" class=\"ne-p\"><span class=\"ne-text\">createInfo </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">输出：</span></p><div class=\"ne-quote\"><p id=\"u57dab221\" class=\"ne-p\"><span class=\"ne-text\">array:5 [</span></p><p id=\"uad8d1c83\" class=\"ne-p\"><span class=\"ne-text\">  0 =&gt; &quot;景畅&quot;</span></p><p id=\"ud5c3ebb6\" class=\"ne-p\"><span class=\"ne-text\">  1 =&gt; &quot;重庆白云区&quot;</span></p><p id=\"u38ca554a\" class=\"ne-p\"><span class=\"ne-text\">  2 =&gt; &quot;adipisci.dignissimos@sohu.com&quot;</span></p><p id=\"uf1ff4077\" class=\"ne-p\"><span class=\"ne-text\">  3 =&gt; 55</span></p><p id=\"u8108fefc\" class=\"ne-p\"><span class=\"ne-text\">  4 =&gt; &quot;工人&quot;</span></p><p id=\"u76fb1055\" class=\"ne-p\"><span class=\"ne-text\">]</span></p><p id=\"u13296e7e\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div><h1 id=\"DdeSJ\"><span class=\"ne-text\">github地址</span></h1><p id=\"uf1de1790\" class=\"ne-p\"><a href=\"https://github.com/fzaninotto/Faker\" data-href=\"https://github.com/fzaninotto/Faker\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/fzaninotto/Faker</span></a></p></div>",
    "body": "tags: [php,faker]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"iZwXI\"></a>\n# 什么是PHP Faker\nFaker 是一个生成假数据的 PHP 库，Faka 数据通常用于测试或用一些伪数据填充数据库，Faker 受到 Perl 的 Data :: Faker 和 Ruby 的 Faker 的极大启发。<br />说白了就是：\n> 我们在创建完数据表格后往往需要做一些假数据，而Faker就是这样的工具。安装Faker\n\n<a name=\"LzdtU\"></a>\n# 安装Faker\n在项目所在的文件夹中打开命令行输入以下命令：\n```shell\ncomposer require fzaninotto/faker\n```\n运行以后会在vendor文件夹下生成：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1650013870646-a6ba9653-b5ac-4919-b345-5745aed19374.png#clientId=u7ddbe57f-a192-4&from=paste&id=u7c034536&originHeight=184&originWidth=507&originalType=url&ratio=1&rotation=0&showTitle=false&size=12116&status=done&style=none&taskId=ud741bed8-b7a5-470a-8cfb-f31e12aff33&title=)\n<a name=\"WcOmG\"></a>\n# 实际使用\n在项目中的实际使用方法（以Thinkphp为例）：\n```php\n<?php\nnamespace MyFaker;\n//use会调用类注册, 前提是你得先导入相应的类注册方法 (autoload.php)\nuse Faker\\Factory;\nclass FakerData\n{\n    //使用faker生成假数据\n    public static function createInfo()\n    {\n        $faker = Factory::create('zh_CN');//选择中文\n        $data = [\n            $faker->name,//随机姓名\n            $faker->address,//随机地址\n            $faker->email,//随机邮箱\n            $faker->numberBetween(20,60),//年龄随机在20-60之间\n            $faker->randomElement(['农民','工人','程序员'])//随机职业\n        ];\n        //调试工具\n         dump($data);\n    }\n    public function insertInfo(){\n      $faker = Factory::create('zh_CN');\n        $data = [];\n        //创建数据\n        for ($i = 0; $i < 3; $i++){\n            $data[$i]['title'] = $faker->name();\n            $data[$i]['version'] = '1.0';\n            $data[$i]['status'] = $faker->numberBetween(0,1);\n            $data[$i]['user_id'] = 1;\n            $data[$i]['description'] = $faker->realText(10, 2);\n            $data[$i]['coll_num'] = 0;\n            $data[$i]['create_time'] = $faker->date('Y-m-d H:i:s','now');\n            $data[$i]['update_time'] = $faker->date('Y-m-d H:i:s','now');\n            $data[$i]['appid'] = $faker->md5();\n            $data[$i]['appsecret'] = $faker->md5();\n            $data[$i]['code'] = $faker->md5();\n        }\n        $table = $this->table('hbb_item');\n        $table->insert($data)->save();\n    }\n  \n}\n\n```\ncreateInfo 输出：\n> array:5 [\n>   0 => \"景畅\"\n>   1 => \"重庆白云区\"\n>   2 => \"adipisci.dignissimos@sohu.com\"\n>   3 => 55\n>   4 => \"工人\"\n> ]\n> \n\n<a name=\"DdeSJ\"></a>\n# github地址\n[https://github.com/fzaninotto/Faker](https://github.com/fzaninotto/Faker)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ucc0b98db\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,faker]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"C87L0\" class=\"ne-hr\"><h1 id=\"iZwXI\"><span class=\"ne-text\">什么是</span><span class=\"ne-text\">PHP Faker</span></h1><p id=\"u9370ef4a\" class=\"ne-p\"><span class=\"ne-text\">Faker 是一个生成假数据的 PHP 库，Faka 数据通常用于测试或用一些伪数据填充数据库，Faker 受到 Perl 的 Data :: Faker 和 </span><span class=\"ne-text\">Ruby</span><span class=\"ne-text\"> 的 Faker 的极大启发。</span></p><p id=\"u328aa65e\" class=\"ne-p\"><span class=\"ne-text\">说白了就是：</span></p><div class=\"ne-quote\"><p id=\"ud6dbac09\" class=\"ne-p\"><span class=\"ne-text\">我们在创建完数据表格后往往需要做一些假数据，而Faker就是这样的工具。安装Faker</span></p></div><h1 id=\"LzdtU\"><span class=\"ne-text\">安装Faker</span></h1><p id=\"u3fb9665d\" class=\"ne-p\"><span class=\"ne-text\">在项目所在的文件夹中打开</span><span class=\"ne-text\">命令行</span><span class=\"ne-text\">输入以下命令：</span></p><pre data-language=\"shell\" id=\"iefFj\" class=\"ne-codeblock language-shell\">composer require fzaninotto/faker</pre><p id=\"uc7e57015\" class=\"ne-p\"><span class=\"ne-text\">运行以后会在vendor文件夹下生成：</span></p><p id=\"u4c9b8430\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1650013870646-a6ba9653-b5ac-4919-b345-5745aed19374.png\" width=\"507\" id=\"u7c034536\" class=\"ne-image\"></p><h1 id=\"WcOmG\"><span class=\"ne-text\">实际使用</span></h1><p id=\"udfabd346\" class=\"ne-p\"><span class=\"ne-text\">在项目中的实际使用方法（以Thinkphp为例）：</span></p><pre data-language=\"php\" id=\"aV8WT\" class=\"ne-codeblock language-php\">&lt;?php\nnamespace MyFaker;\n//use会调用类注册, 前提是你得先导入相应的类注册方法 (autoload.php)\nuse Faker\\Factory;\nclass FakerData\n{\n    //使用faker生成假数据\n    public static function createInfo()\n    {\n        $faker = Factory::create('zh_CN');//选择中文\n        $data = [\n            $faker-&gt;name,//随机姓名\n            $faker-&gt;address,//随机地址\n            $faker-&gt;email,//随机邮箱\n            $faker-&gt;numberBetween(20,60),//年龄随机在20-60之间\n            $faker-&gt;randomElement(['农民','工人','程序员'])//随机职业\n        ];\n        //调试工具\n         dump($data);\n    }\n    public function insertInfo(){\n      $faker = Factory::create('zh_CN');\n        $data = [];\n        //创建数据\n        for ($i = 0; $i &lt; 3; $i++){\n            $data[$i]['title'] = $faker-&gt;name();\n            $data[$i]['version'] = '1.0';\n            $data[$i]['status'] = $faker-&gt;numberBetween(0,1);\n            $data[$i]['user_id'] = 1;\n            $data[$i]['description'] = $faker-&gt;realText(10, 2);\n            $data[$i]['coll_num'] = 0;\n            $data[$i]['create_time'] = $faker-&gt;date('Y-m-d H:i:s','now');\n            $data[$i]['update_time'] = $faker-&gt;date('Y-m-d H:i:s','now');\n            $data[$i]['appid'] = $faker-&gt;md5();\n            $data[$i]['appsecret'] = $faker-&gt;md5();\n            $data[$i]['code'] = $faker-&gt;md5();\n        }\n        $table = $this-&gt;table('hbb_item');\n        $table-&gt;insert($data)-&gt;save();\n    }\n  \n}\n</pre><p id=\"u4a9af566\" class=\"ne-p\"><span class=\"ne-text\">createInfo </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">输出：</span></p><div class=\"ne-quote\"><p id=\"u57dab221\" class=\"ne-p\"><span class=\"ne-text\">array:5 [</span></p><p id=\"uad8d1c83\" class=\"ne-p\"><span class=\"ne-text\">  0 =&gt; &quot;景畅&quot;</span></p><p id=\"ud5c3ebb6\" class=\"ne-p\"><span class=\"ne-text\">  1 =&gt; &quot;重庆白云区&quot;</span></p><p id=\"u38ca554a\" class=\"ne-p\"><span class=\"ne-text\">  2 =&gt; &quot;adipisci.dignissimos@sohu.com&quot;</span></p><p id=\"uf1ff4077\" class=\"ne-p\"><span class=\"ne-text\">  3 =&gt; 55</span></p><p id=\"u8108fefc\" class=\"ne-p\"><span class=\"ne-text\">  4 =&gt; &quot;工人&quot;</span></p><p id=\"u76fb1055\" class=\"ne-p\"><span class=\"ne-text\">]</span></p><p id=\"u13296e7e\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div><h1 id=\"DdeSJ\"><span class=\"ne-text\">github地址</span></h1><p id=\"uf1de1790\" class=\"ne-p\"><a href=\"https://github.com/fzaninotto/Faker\" data-href=\"https://github.com/fzaninotto/Faker\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.com/fzaninotto/Faker</span></a></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"ucc0b98db\" id=\"ucc0b98db\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,faker]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22C87L0%22%7D\"></card><h1 data-lake-id=\"iZwXI\" id=\"iZwXI\"><span data-lake-id=\"u3aa6947c\" id=\"u3aa6947c\">什么是</span><span data-lake-id=\"u20aa144d\" id=\"u20aa144d\">PHP Faker</span></h1><p data-lake-id=\"u9370ef4a\" id=\"u9370ef4a\"><span data-lake-id=\"u9d60a16c\" id=\"u9d60a16c\">Faker 是一个生成假数据的 PHP 库，Faka 数据通常用于测试或用一些伪数据填充数据库，Faker 受到 Perl 的 Data :: Faker 和 </span><span data-lake-id=\"u61dfef15\" id=\"u61dfef15\">Ruby</span><span data-lake-id=\"uecafc5d5\" id=\"uecafc5d5\"> 的 Faker 的极大启发。</span></p><p data-lake-id=\"u328aa65e\" id=\"u328aa65e\"><span data-lake-id=\"u525bca2b\" id=\"u525bca2b\">说白了就是：</span></p><blockquote data-lake-id=\"ubdff0586\" id=\"ubdff0586\"><p data-lake-id=\"ud6dbac09\" id=\"ud6dbac09\"><span data-lake-id=\"uc954f3b8\" id=\"uc954f3b8\">我们在创建完数据表格后往往需要做一些假数据，而Faker就是这样的工具。安装Faker</span></p></blockquote><h1 data-lake-id=\"LzdtU\" id=\"LzdtU\"><span data-lake-id=\"u1a1a0c08\" id=\"u1a1a0c08\">安装Faker</span></h1><p data-lake-id=\"u3fb9665d\" id=\"u3fb9665d\"><span data-lake-id=\"ua65ee294\" id=\"ua65ee294\">在项目所在的文件夹中打开</span><span data-lake-id=\"u674d92a8\" id=\"u674d92a8\">命令行</span><span data-lake-id=\"u493ee646\" id=\"u493ee646\">输入以下命令：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22composer%20require%20fzaninotto%2Ffaker%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B0%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iefFj%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uc7e57015\" id=\"uc7e57015\"><span data-lake-id=\"u0746f81d\" id=\"u0746f81d\">运行以后会在vendor文件夹下生成：</span></p><p data-lake-id=\"u4c9b8430\" id=\"u4c9b8430\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1650013870646-a6ba9653-b5ac-4919-b345-5745aed19374.png%22%2C%22taskId%22%3A%22ud741bed8-b7a5-470a-8cfb-f31e12aff33%22%2C%22clientId%22%3A%22u7ddbe57f-a192-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A12116%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A507%2C%22originHeight%22%3A184%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22FZANINOTTO%20FAKER%20.GITHUB%20.TRAVIS%20SRC%20CHANGELOGMD%20%E5%93%81%200%20COMPOSER.JSON%20LICENSE%20NO%20README.MD%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A77.92841%2C%22y%22%3A3.6119335%2C%22width%22%3A71.63341999999999%2C%22height%22%3A11.300504499999999%2C%22text%22%3A%22FZANINOTTO%22%7D%2C%7B%22x%22%3A97.6506%2C%22y%22%3A23.580748%2C%22width%22%3A35.212909999999994%2C%22height%22%3A10.541151999999997%2C%22text%22%3A%22FAKER%22%7D%2C%7B%22x%22%3A119.07285%2C%22y%22%3A43.447968%2C%22width%22%3A48.579539999999994%2C%22height%22%3A12.407612%2C%22text%22%3A%22.GITHUB%22%7D%2C%7B%22x%22%3A121.13947%2C%22y%22%3A62.0618%2C%22width%22%3A46.69633%2C%22height%22%3A12.597100000000005%2C%22text%22%3A%22.TRAVIS%22%7D%2C%7B%22x%22%3A118.04943%2C%22y%22%3A85.174995%2C%22width%22%3A21.498009999999994%2C%22height%22%3A8.943685000000002%2C%22text%22%3A%22SRC%22%7D%2C%7B%22x%22%3A117.66412%2C%22y%22%3A102.953285%2C%22width%22%3A85.15281999999999%2C%22height%22%3A10.73409500000001%2C%22text%22%3A%22CHANGELOGMD%22%7D%2C%7B%22x%22%3A99.68283%2C%22y%22%3A103.68664%2C%22width%22%3A17.067239999999998%2C%22height%22%3A13.833044000000001%2C%22text%22%3A%22%E5%93%81%22%7D%2C%7B%22x%22%3A100.83801%2C%22y%22%3A120.31869%2C%22width%22%3A109.61531%2C%22height%22%3A17.889579999999995%2C%22text%22%3A%220%20COMPOSER.JSON%22%7D%2C%7B%22x%22%3A101.333%2C%22y%22%3A140.83026%2C%22width%22%3A67.09737000000001%2C%22height%22%3A14.869749999999982%2C%22text%22%3A%22LICENSE%22%7D%2C%7B%22x%22%3A99.291725%2C%22y%22%3A158.69252%2C%22width%22%3A82.99662500000001%2C%22height%22%3A18.203579999999988%2C%22text%22%3A%22NO%20README.MD%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u7c034536%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"WcOmG\" id=\"WcOmG\"><span data-lake-id=\"u38379b56\" id=\"u38379b56\">实际使用</span></h1><p data-lake-id=\"udfabd346\" id=\"udfabd346\"><span data-lake-id=\"u22b1e460\" id=\"u22b1e460\">在项目中的实际使用方法（以Thinkphp为例）：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnnamespace%20MyFaker%3B%5Cn%2F%2Fuse%E4%BC%9A%E8%B0%83%E7%94%A8%E7%B1%BB%E6%B3%A8%E5%86%8C%2C%20%E5%89%8D%E6%8F%90%E6%98%AF%E4%BD%A0%E5%BE%97%E5%85%88%E5%AF%BC%E5%85%A5%E7%9B%B8%E5%BA%94%E7%9A%84%E7%B1%BB%E6%B3%A8%E5%86%8C%E6%96%B9%E6%B3%95%20(autoload.php)%5Cnuse%20Faker%5C%5CFactory%3B%5Cnclass%20FakerData%5Cn%7B%5Cn%20%20%20%20%2F%2F%E4%BD%BF%E7%94%A8faker%E7%94%9F%E6%88%90%E5%81%87%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20public%20static%20function%20createInfo()%5Cn%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20%24faker%20%3D%20Factory%3A%3Acreate('zh_CN')%3B%2F%2F%E9%80%89%E6%8B%A9%E4%B8%AD%E6%96%87%5Cn%20%20%20%20%20%20%20%20%24data%20%3D%20%5B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24faker-%3Ename%2C%2F%2F%E9%9A%8F%E6%9C%BA%E5%A7%93%E5%90%8D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24faker-%3Eaddress%2C%2F%2F%E9%9A%8F%E6%9C%BA%E5%9C%B0%E5%9D%80%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24faker-%3Eemail%2C%2F%2F%E9%9A%8F%E6%9C%BA%E9%82%AE%E7%AE%B1%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24faker-%3EnumberBetween(20%2C60)%2C%2F%2F%E5%B9%B4%E9%BE%84%E9%9A%8F%E6%9C%BA%E5%9C%A820-60%E4%B9%8B%E9%97%B4%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24faker-%3ErandomElement(%5B'%E5%86%9C%E6%B0%91'%2C'%E5%B7%A5%E4%BA%BA'%2C'%E7%A8%8B%E5%BA%8F%E5%91%98'%5D)%2F%2F%E9%9A%8F%E6%9C%BA%E8%81%8C%E4%B8%9A%5Cn%20%20%20%20%20%20%20%20%5D%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%5Cn%20%20%20%20%20%20%20%20%20dump(%24data)%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20public%20function%20insertInfo()%7B%5Cn%20%20%20%20%20%20%24faker%20%3D%20Factory%3A%3Acreate('zh_CN')%3B%5Cn%20%20%20%20%20%20%20%20%24data%20%3D%20%5B%5D%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%5Cn%20%20%20%20%20%20%20%20for%20(%24i%20%3D%200%3B%20%24i%20%3C%203%3B%20%24i%2B%2B)%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'title'%5D%20%3D%20%24faker-%3Ename()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'version'%5D%20%3D%20'1.0'%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'status'%5D%20%3D%20%24faker-%3EnumberBetween(0%2C1)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'user_id'%5D%20%3D%201%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'description'%5D%20%3D%20%24faker-%3ErealText(10%2C%202)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'coll_num'%5D%20%3D%200%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'create_time'%5D%20%3D%20%24faker-%3Edate('Y-m-d%20H%3Ai%3As'%2C'now')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'update_time'%5D%20%3D%20%24faker-%3Edate('Y-m-d%20H%3Ai%3As'%2C'now')%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'appid'%5D%20%3D%20%24faker-%3Emd5()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'appsecret'%5D%20%3D%20%24faker-%3Emd5()%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24data%5B%24i%5D%5B'code'%5D%20%3D%20%24faker-%3Emd5()%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%24table%20%3D%20%24this-%3Etable('hbb_item')%3B%5Cn%20%20%20%20%20%20%20%20%24table-%3Einsert(%24data)-%3Esave()%3B%5Cn%20%20%20%20%7D%5Cn%20%20%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22aV8WT%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4a9af566\" id=\"u4a9af566\"><span data-lake-id=\"u0c96ca02\" id=\"u0c96ca02\">createInfo </span><span data-lake-id=\"u625a8b92\" id=\"u625a8b92\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">输出：</span></p><blockquote data-lake-id=\"u74f31781\" id=\"u74f31781\"><p data-lake-id=\"u57dab221\" id=\"u57dab221\"><span data-lake-id=\"u95369cf2\" id=\"u95369cf2\">array:5 [</span></p><p data-lake-id=\"uad8d1c83\" id=\"uad8d1c83\"><span data-lake-id=\"ucee74a08\" id=\"ucee74a08\">  0 =&gt; &quot;景畅&quot;</span></p><p data-lake-id=\"ud5c3ebb6\" id=\"ud5c3ebb6\"><span data-lake-id=\"u4e16853a\" id=\"u4e16853a\">  1 =&gt; &quot;重庆白云区&quot;</span></p><p data-lake-id=\"u38ca554a\" id=\"u38ca554a\"><span data-lake-id=\"u98d52fe7\" id=\"u98d52fe7\">  2 =&gt; &quot;adipisci.dignissimos@sohu.com&quot;</span></p><p data-lake-id=\"uf1ff4077\" id=\"uf1ff4077\"><span data-lake-id=\"u612eaa51\" id=\"u612eaa51\">  3 =&gt; 55</span></p><p data-lake-id=\"u8108fefc\" id=\"u8108fefc\"><span data-lake-id=\"u88f26dab\" id=\"u88f26dab\">  4 =&gt; &quot;工人&quot;</span></p><p data-lake-id=\"u76fb1055\" id=\"u76fb1055\"><span data-lake-id=\"u9404854d\" id=\"u9404854d\">]</span></p><p data-lake-id=\"u13296e7e\" id=\"u13296e7e\"><span data-lake-id=\"u5a411340\" id=\"u5a411340\">​</span><br></p></blockquote><h1 data-lake-id=\"DdeSJ\" id=\"DdeSJ\"><span data-lake-id=\"uc1070ed7\" id=\"uc1070ed7\">github地址</span></h1><p data-lake-id=\"uf1de1790\" id=\"uf1de1790\"><a href=\"https://github.com/fzaninotto/Faker\" target=\"_blank\" data-lake-id=\"u4fe55018\" id=\"u4fe55018\"><span data-lake-id=\"u203e925c\" id=\"u203e925c\">https://github.com/fzaninotto/Faker</span></a></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 379,
    "created_at": "2022-04-15T09:07:00.000Z",
    "updated_at": "2023-07-27T02:07:53.000Z",
    "content_updated_at": "2023-07-27T02:07:53.000Z",
    "published_at": "2022-04-15T09:19:24.000Z",
    "first_published_at": "2022-04-15T09:19:24.221Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 931753946,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73483647,
    "type": "Doc",
    "slug": "wwsg5w",
    "title": "宝塔使用webhook更新服务器代码",
    "description": "tags: [webhook,宝塔]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net安装gityum install git安装webhook插件添加shell脚本，如上图，点击添加，数据名称 和 执行脚本(此处...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"uc4212d97\" class=\"ne-p\"><span class=\"ne-text\">tags: [webhook,宝塔]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"ZSseL\" class=\"ne-hr\"><h1 id=\"kKpX0\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">安装git</span></h1><pre data-language=\"git\" id=\"zdyBf\" class=\"ne-codeblock language-git\"><code>yum install git</code></pre><h1 id=\"vx0HQ\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">安装webhook插件</span></h1><p id=\"u506ce319\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">添加shell脚本，如上图，点击添加，数据名称 和 执行脚本(此处执行脚本框中 直接输入shell脚本可能会被过滤，所以可以先随便添加点东西，然后再重新添加shell脚本)，shell脚本如下</span></p><pre data-language=\"shell\" id=\"HMTVY\" class=\"ne-codeblock language-shell\"><code>#!/bin/bash\necho &quot;&quot;\n#输出当前时间\ndate --date='0 days ago' &quot;+%Y-%m-%d %H:%M:%S&quot;\necho &quot;Start&quot;\n#判断宝塔WebHook参数是否存在\nif [ ! -n &quot;$1&quot; ]; then\n                echo &quot;param参数错误&quot;\n        echo &quot;End&quot;\n        exit\nfi\n#git项目路径\ngitPath=&quot;/www/wwwroot/$1&quot;\n#git 网址\ngitHttp=&quot;https://gitee.com/xianrenqh/huicmf_tp6&quot;\n\necho &quot;Web站点路径：$gitPath&quot;\n\n#判断项目路径是否存在\n\nif [ -d &quot;$gitPath&quot; ]; then\n        cd $gitPath\n        #判断是否存在git目录\n        if [ ! -d &quot;.git&quot; ]; then\n                echo &quot;在该目录下克隆 git&quot;\n                git clone $gitHttp gittemp\n                mv gittemp/.git .\nrm -rf gittemp\n        fi\n        #拉取最新的项目文件\n        #git reset --hard origin/2.0\n        git pull\n        #设置目录权限\n        #chown -R www:www $gitPath\n        echo &quot;End&quot;\n        exit\nelse\n        echo &quot;该项目路径不存在&quot;\n        echo &quot;End&quot;\n        exit\nfi\n</code></pre><p id=\"u65bab051\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">点击查看密钥</span></p><div class=\"ne-quote\"><p id=\"u312f59cf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">获取地址：http://面板/hook?...</span></p></div><h1 id=\"gcS8d\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">添加公钥</span></h1><p id=\"u7c30715c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">如何生成public key</span></p><pre data-language=\"git\" id=\"Hyq9z\" class=\"ne-codeblock language-git\"><code>cd root/.ssh\ncat id\\_rsa.pub\nssh-keygen\ncat id\\_rsa.pub</code></pre><p id=\"u862d4355\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">**</span></p><p id=\"udfd67afa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">第一步，检查本机是否存在 SSH key</span></p><p id=\"u7cafc68c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">如下图调出Git Bash 窗口，输入下面的命令  ls -al ~/.ssh ，如果有文件</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); background-color: rgb(247, 247, 247)\">id_rsa.pub</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"> 或 </span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); background-color: rgb(247, 247, 247)\">id_dsa.pub</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">，则直接进入步骤3将SSH key添加到GitHub中，否则进入第二步生成SSH key</span></p><p id=\"uf237cefa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"></span></p><p id=\"u02feb21b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">第二步：<br /></span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在命令行中输入ssh-keygen -t rsa -C</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"> </span><a href=\"mailto:%22your_emial@examle.com\" data-href=\"mailto:%22your_emial@examle.com\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">&quot;your_emial@examle.com</span></a><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">&quot;</span></p><p id=\"ud52fe525\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">默认会在相应路径下（/c/Users/Administrator/.ssh/id_rsa）生成id_rsa和id_rsa.pub 、known_hosts三个文件，如下面代码所示</span></p><pre data-language=\"shell\" id=\"LHq7M\" class=\"ne-codeblock language-shell\"><code>$ ssh-keygen -t rsa -C &quot;your_emial@examle.com&quot;\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa):\n/c/Users/Administrator/.ssh/id_rsa already exists.\nOverwrite (y/n)? y\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /c/Users/Administrator/.ssh/id_rsa.\nYour public key has been saved in /c/Users/Administrator/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:X.........................oo your_emial@examle.com\nThe key's randomart image is:\n+---[RSA 2048]----+\n|                 |\n|       o .       |\n|      = +        |\n|     . * o       |\n|  o o = S .      |\n| = = = + .       |\n|o B = + o        |\n|o= = =B=.*       |\n|E.o ++=@O.o      |\n+----[SHA256]-----+</code></pre><p id=\"u4ef08869\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在码云中进行对应操作，找到对应项目，在'Webhooks设置'右侧点击添加，然后输入地址，默认选中Push，密码为空，提交。</span></p><p id=\"uf5a82c12\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"></span></p><p id=\"u196e3a01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"></span></p><p id=\"u5b2af592\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在登录服务器相关目录（wwwroot）用git命令 克隆一般码云中的代码：</span></p><pre data-language=\"git\" id=\"mUsTy\" class=\"ne-codeblock language-git\"><code>git clone https://gitee.com/xianrenqh/huicmf_tp6</code></pre><p id=\"u034a08bc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">拉取项目代码测试一下（首次需要执行前两行命令）master为分支名称</span></p><pre data-language=\"git\" id=\"tyxrK\" class=\"ne-codeblock language-git\"><code>git init\ngit remote add origin &quot;你的码云或coding项目地址（ssh或https）&quot;\ngit pull origin master</code></pre><p id=\"udb233eb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">解决每次都需要输入密码的问题：（进行一次push or pull,输入一次密码以后就可以保存凭证了。）</span></p><pre data-language=\"git\" id=\"TRGdz\" class=\"ne-codeblock language-git\"><code>git config --global credential.helper store</code></pre></div>",
    "body": "tags: [webhook,宝塔]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"kKpX0\"></a>\n# 安装git\n```git\nyum install git\n```\n<a name=\"vx0HQ\"></a>\n# 安装webhook插件\n添加shell脚本，如上图，点击添加，数据名称 和 执行脚本(此处执行脚本框中 直接输入shell脚本可能会被过滤，所以可以先随便添加点东西，然后再重新添加shell脚本)，shell脚本如下\n```shell\n#!/bin/bash\necho \"\"\n#输出当前时间\ndate --date='0 days ago' \"+%Y-%m-%d %H:%M:%S\"\necho \"Start\"\n#判断宝塔WebHook参数是否存在\nif [ ! -n \"$1\" ]; then\n                echo \"param参数错误\"\n        echo \"End\"\n        exit\nfi\n#git项目路径\ngitPath=\"/www/wwwroot/$1\"\n#git 网址\ngitHttp=\"https://gitee.com/xianrenqh/huicmf_tp6\"\n\necho \"Web站点路径：$gitPath\"\n\n#判断项目路径是否存在\n\nif [ -d \"$gitPath\" ]; then\n        cd $gitPath\n        #判断是否存在git目录\n        if [ ! -d \".git\" ]; then\n                echo \"在该目录下克隆 git\"\n                git clone $gitHttp gittemp\n                mv gittemp/.git .\nrm -rf gittemp\n        fi\n        #拉取最新的项目文件\n        #git reset --hard origin/2.0\n        git pull\n        #设置目录权限\n        #chown -R www:www $gitPath\n        echo \"End\"\n        exit\nelse\n        echo \"该项目路径不存在\"\n        echo \"End\"\n        exit\nfi\n\n```\n点击查看密钥\n> 获取地址：http://面板/hook?...\n\n<a name=\"gcS8d\"></a>\n# 添加公钥\n如何生成public key\n```git\ncd root/.ssh\ncat id\\_rsa.pub\nssh-keygen\ncat id\\_rsa.pub\n```\n**<br />第一步，检查本机是否存在 SSH key<br />如下图调出Git Bash 窗口，输入下面的命令  ls -al ~/.ssh ，如果有文件id_rsa.pub 或 id_dsa.pub，则直接进入步骤3将SSH key添加到GitHub中，否则进入第二步生成SSH key\n\n第二步：<br />在命令行中输入ssh-keygen -t rsa -C [\"your_emial@examle.com](mailto:%22your_emial@examle.com)\"<br />默认会在相应路径下（/c/Users/Administrator/.ssh/id_rsa）生成id_rsa和id_rsa.pub 、known_hosts三个文件，如下面代码所示\n```shell\n$ ssh-keygen -t rsa -C \"your_emial@examle.com\"\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa):\n/c/Users/Administrator/.ssh/id_rsa already exists.\nOverwrite (y/n)? y\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /c/Users/Administrator/.ssh/id_rsa.\nYour public key has been saved in /c/Users/Administrator/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:X.........................oo your_emial@examle.com\nThe key's randomart image is:\n+---[RSA 2048]----+\n|                 |\n|       o .       |\n|      = +        |\n|     . * o       |\n|  o o = S .      |\n| = = = + .       |\n|o B = + o        |\n|o= = =B=.*       |\n|E.o ++=@O.o      |\n+----[SHA256]-----+\n```\n在码云中进行对应操作，找到对应项目，在'Webhooks设置'右侧点击添加，然后输入地址，默认选中Push，密码为空，提交。\n\n\n在登录服务器相关目录（wwwroot）用git命令 克隆一般码云中的代码：\n```git\ngit clone https://gitee.com/xianrenqh/huicmf_tp6\n```\n拉取项目代码测试一下（首次需要执行前两行命令）master为分支名称\n```git\ngit init\ngit remote add origin \"你的码云或coding项目地址（ssh或https）\"\ngit pull origin master\n```\n解决每次都需要输入密码的问题：（进行一次push or pull,输入一次密码以后就可以保存凭证了。）\n```git\ngit config --global credential.helper store\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"uc4212d97\" class=\"ne-p\"><span class=\"ne-text\">tags: [webhook,宝塔]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"ZSseL\" class=\"ne-hr\"><h1 id=\"kKpX0\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">安装git</span></h1><pre data-language=\"git\" id=\"zdyBf\" class=\"ne-codeblock language-git\">yum install git</pre><h1 id=\"vx0HQ\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">安装webhook插件</span></h1><p id=\"u506ce319\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">添加shell脚本，如上图，点击添加，数据名称 和 执行脚本(此处执行脚本框中 直接输入shell脚本可能会被过滤，所以可以先随便添加点东西，然后再重新添加shell脚本)，shell脚本如下</span></p><pre data-language=\"shell\" id=\"HMTVY\" class=\"ne-codeblock language-shell\">#!/bin/bash\necho &quot;&quot;\n#输出当前时间\ndate --date='0 days ago' &quot;+%Y-%m-%d %H:%M:%S&quot;\necho &quot;Start&quot;\n#判断宝塔WebHook参数是否存在\nif [ ! -n &quot;$1&quot; ]; then\n                echo &quot;param参数错误&quot;\n        echo &quot;End&quot;\n        exit\nfi\n#git项目路径\ngitPath=&quot;/www/wwwroot/$1&quot;\n#git 网址\ngitHttp=&quot;https://gitee.com/xianrenqh/huicmf_tp6&quot;\n\necho &quot;Web站点路径：$gitPath&quot;\n\n#判断项目路径是否存在\n\nif [ -d &quot;$gitPath&quot; ]; then\n        cd $gitPath\n        #判断是否存在git目录\n        if [ ! -d &quot;.git&quot; ]; then\n                echo &quot;在该目录下克隆 git&quot;\n                git clone $gitHttp gittemp\n                mv gittemp/.git .\nrm -rf gittemp\n        fi\n        #拉取最新的项目文件\n        #git reset --hard origin/2.0\n        git pull\n        #设置目录权限\n        #chown -R www:www $gitPath\n        echo &quot;End&quot;\n        exit\nelse\n        echo &quot;该项目路径不存在&quot;\n        echo &quot;End&quot;\n        exit\nfi\n</pre><p id=\"u65bab051\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">点击查看密钥</span></p><div class=\"ne-quote\"><p id=\"u312f59cf\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">获取地址：http://面板/hook?...</span></p></div><h1 id=\"gcS8d\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">添加公钥</span></h1><p id=\"u7c30715c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">如何生成public key</span></p><pre data-language=\"git\" id=\"Hyq9z\" class=\"ne-codeblock language-git\">cd root/.ssh\ncat id\\_rsa.pub\nssh-keygen\ncat id\\_rsa.pub</pre><p id=\"u862d4355\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">**</span></p><p id=\"udfd67afa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">第一步，检查本机是否存在 SSH key</span></p><p id=\"u7cafc68c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">如下图调出Git Bash 窗口，输入下面的命令  ls -al ~/.ssh ，如果有文件</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); background-color: rgb(247, 247, 247)\">id_rsa.pub</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"> 或 </span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); background-color: rgb(247, 247, 247)\">id_dsa.pub</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">，则直接进入步骤3将SSH key添加到GitHub中，否则进入第二步生成SSH key</span></p><p id=\"uf237cefa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"></span></p><p id=\"u02feb21b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">第二步：<br />在命令行中输入ssh-keygen -t rsa -C</span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"> </span><a href=\"mailto:%22your_emial@examle.com\" data-href=\"mailto:%22your_emial@examle.com\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">&quot;your_emial@examle.com</span></a><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">&quot;</span></p><p id=\"ud52fe525\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">默认会在相应路径下（/c/Users/Administrator/.ssh/id_rsa）生成id_rsa和id_rsa.pub 、known_hosts三个文件，如下面代码所示</span></p><pre data-language=\"shell\" id=\"LHq7M\" class=\"ne-codeblock language-shell\">$ ssh-keygen -t rsa -C &quot;your_emial@examle.com&quot;\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa):\n/c/Users/Administrator/.ssh/id_rsa already exists.\nOverwrite (y/n)? y\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /c/Users/Administrator/.ssh/id_rsa.\nYour public key has been saved in /c/Users/Administrator/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:X.........................oo your_emial@examle.com\nThe key's randomart image is:\n+---[RSA 2048]----+\n|                 |\n|       o .       |\n|      = +        |\n|     . * o       |\n|  o o = S .      |\n| = = = + .       |\n|o B = + o        |\n|o= = =B=.*       |\n|E.o ++=@O.o      |\n+----[SHA256]-----+</pre><p id=\"u4ef08869\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在码云中进行对应操作，找到对应项目，在'Webhooks设置'右侧点击添加，然后输入地址，默认选中Push，密码为空，提交。</span></p><p id=\"uf5a82c12\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"></span></p><p id=\"u196e3a01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\"></span></p><p id=\"u5b2af592\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在登录服务器相关目录（wwwroot）用git命令 克隆一般码云中的代码：</span></p><pre data-language=\"git\" id=\"mUsTy\" class=\"ne-codeblock language-git\">git clone https://gitee.com/xianrenqh/huicmf_tp6</pre><p id=\"u034a08bc\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">拉取项目代码测试一下（首次需要执行前两行命令）master为分支名称</span></p><pre data-language=\"git\" id=\"tyxrK\" class=\"ne-codeblock language-git\">git init\ngit remote add origin &quot;你的码云或coding项目地址（ssh或https）&quot;\ngit pull origin master</pre><p id=\"udb233eb5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">解决每次都需要输入密码的问题：（进行一次push or pull,输入一次密码以后就可以保存凭证了。）</span></p><pre data-language=\"git\" id=\"TRGdz\" class=\"ne-codeblock language-git\">git config --global credential.helper store</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"uc4212d97\" id=\"uc4212d97\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [webhook,宝塔]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22ZSseL%22%7D\"></card><h1 data-lake-id=\"kKpX0\" id=\"kKpX0\"><span data-lake-id=\"u23d664a2\" id=\"u23d664a2\" style=\"color: rgb(82, 82, 82)\">安装git</span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22yum%20install%20git%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zdyBf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"vx0HQ\" id=\"vx0HQ\"><span data-lake-id=\"ufc555247\" id=\"ufc555247\" style=\"color: rgb(82, 82, 82)\">安装webhook插件</span></h1><p data-lake-id=\"u506ce319\" id=\"u506ce319\"><span data-lake-id=\"u7d41ae43\" id=\"u7d41ae43\" style=\"color: rgb(82, 82, 82)\">添加shell脚本，如上图，点击添加，数据名称 和 执行脚本(此处执行脚本框中 直接输入shell脚本可能会被过滤，所以可以先随便添加点东西，然后再重新添加shell脚本)，shell脚本如下</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%23!%2Fbin%2Fbash%5Cnecho%20%5C%22%5C%22%5Cn%23%E8%BE%93%E5%87%BA%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%5Cndate%20--date%3D'0%20days%20ago'%20%5C%22%2B%25Y-%25m-%25d%20%25H%3A%25M%3A%25S%5C%22%5Cnecho%20%5C%22Start%5C%22%5Cn%23%E5%88%A4%E6%96%AD%E5%AE%9D%E5%A1%94WebHook%E5%8F%82%E6%95%B0%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cnif%20%5B%20!%20-n%20%5C%22%241%5C%22%20%5D%3B%20then%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%5C%22param%E5%8F%82%E6%95%B0%E9%94%99%E8%AF%AF%5C%22%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22End%5C%22%5Cn%20%20%20%20%20%20%20%20exit%5Cnfi%5Cn%23git%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%5CngitPath%3D%5C%22%2Fwww%2Fwwwroot%2F%241%5C%22%5Cn%23git%20%E7%BD%91%E5%9D%80%5CngitHttp%3D%5C%22https%3A%2F%2Fgitee.com%2Fxianrenqh%2Fhuicmf_tp6%5C%22%5Cn%5Cnecho%20%5C%22Web%E7%AB%99%E7%82%B9%E8%B7%AF%E5%BE%84%EF%BC%9A%24gitPath%5C%22%5Cn%5Cn%23%E5%88%A4%E6%96%AD%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cn%5Cnif%20%5B%20-d%20%5C%22%24gitPath%5C%22%20%5D%3B%20then%5Cn%20%20%20%20%20%20%20%20cd%20%24gitPath%5Cn%20%20%20%20%20%20%20%20%23%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8git%E7%9B%AE%E5%BD%95%5Cn%20%20%20%20%20%20%20%20if%20%5B%20!%20-d%20%5C%22.git%5C%22%20%5D%3B%20then%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%5C%22%E5%9C%A8%E8%AF%A5%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%85%8B%E9%9A%86%20git%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20git%20clone%20%24gitHttp%20gittemp%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mv%20gittemp%2F.git%20.%5Cnrm%20-rf%20gittemp%5Cn%20%20%20%20%20%20%20%20fi%5Cn%20%20%20%20%20%20%20%20%23%E6%8B%89%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%5Cn%20%20%20%20%20%20%20%20%23git%20reset%20--hard%20origin%2F2.0%5Cn%20%20%20%20%20%20%20%20git%20pull%5Cn%20%20%20%20%20%20%20%20%23%E8%AE%BE%E7%BD%AE%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90%5Cn%20%20%20%20%20%20%20%20%23chown%20-R%20www%3Awww%20%24gitPath%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22End%5C%22%5Cn%20%20%20%20%20%20%20%20exit%5Cnelse%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22%E8%AF%A5%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%E4%B8%8D%E5%AD%98%E5%9C%A8%5C%22%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22End%5C%22%5Cn%20%20%20%20%20%20%20%20exit%5Cnfi%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22HMTVY%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u65bab051\" id=\"u65bab051\"><span data-lake-id=\"u73a0a97f\" id=\"u73a0a97f\" style=\"color: rgb(82, 82, 82)\">点击查看密钥</span></p><blockquote data-lake-id=\"ub1b58afa\" id=\"ub1b58afa\"><p data-lake-id=\"u312f59cf\" id=\"u312f59cf\"><span data-lake-id=\"u9d07e98e\" id=\"u9d07e98e\" style=\"color: rgb(82, 82, 82)\">获取地址：http://面板/hook?...</span></p></blockquote><h1 data-lake-id=\"gcS8d\" id=\"gcS8d\"><span data-lake-id=\"u160cfe6d\" id=\"u160cfe6d\" style=\"color: rgb(82, 82, 82)\">添加公钥</span></h1><p data-lake-id=\"u7c30715c\" id=\"u7c30715c\"><span data-lake-id=\"ud80cee70\" id=\"ud80cee70\" style=\"color: rgb(82, 82, 82)\">如何生成public key</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22cd%20root%2F.ssh%5Cncat%20id%5C%5C_rsa.pub%5Cnssh-keygen%5Cncat%20id%5C%5C_rsa.pub%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Hyq9z%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u862d4355\" id=\"u862d4355\"><span data-lake-id=\"udd988399\" id=\"udd988399\" style=\"color: rgb(82, 82, 82)\">**</span></p><p data-lake-id=\"udfd67afa\" id=\"udfd67afa\"><span data-lake-id=\"u6a8c98c8\" id=\"u6a8c98c8\" style=\"color: rgb(82, 82, 82)\">第一步，检查本机是否存在 SSH key</span></p><p data-lake-id=\"u7cafc68c\" id=\"u7cafc68c\"><span data-lake-id=\"u145fac64\" id=\"u145fac64\" style=\"color: rgb(82, 82, 82)\">如下图调出Git Bash 窗口，输入下面的命令  ls -al ~/.ssh ，如果有文件</span><span data-lake-id=\"u01c9dd4c\" id=\"u01c9dd4c\" style=\"color: rgb(82, 82, 82); background-color: rgb(247, 247, 247)\">id_rsa.pub</span><span data-lake-id=\"ub8cb09c1\" id=\"ub8cb09c1\" style=\"color: rgb(82, 82, 82)\"> 或 </span><span data-lake-id=\"u55960666\" id=\"u55960666\" style=\"color: rgb(82, 82, 82); background-color: rgb(247, 247, 247)\">id_dsa.pub</span><span data-lake-id=\"u3d81aab4\" id=\"u3d81aab4\" style=\"color: rgb(82, 82, 82)\">，则直接进入步骤3将SSH key添加到GitHub中，否则进入第二步生成SSH key</span></p><p data-lake-id=\"uf237cefa\" id=\"uf237cefa\"><span data-lake-id=\"ud2082446\" id=\"ud2082446\" style=\"color: rgb(82, 82, 82)\">​</span><br></p><p data-lake-id=\"u02feb21b\" id=\"u02feb21b\"><span data-lake-id=\"uc13bb636\" id=\"uc13bb636\" style=\"color: rgb(82, 82, 82)\">第二步：<br />在命令行中输入ssh-keygen -t rsa -C</span><span data-lake-id=\"u0befe9a9\" id=\"u0befe9a9\" style=\"color: rgb(82, 82, 82)\"> </span><a href=\"mailto:%22your_emial@examle.com\" target=\"_blank\" data-lake-id=\"u8ac1c5cd\" id=\"u8ac1c5cd\"><span data-lake-id=\"u62780cdc\" id=\"u62780cdc\">&quot;your_emial@examle.com</span></a><span data-lake-id=\"u3e3063b3\" id=\"u3e3063b3\" style=\"color: rgb(82, 82, 82)\">&quot;</span></p><p data-lake-id=\"ud52fe525\" id=\"ud52fe525\"><span data-lake-id=\"u8fdbd144\" id=\"u8fdbd144\" style=\"color: rgb(82, 82, 82)\">默认会在相应路径下（/c/Users/Administrator/.ssh/id_rsa）生成id_rsa和id_rsa.pub 、known_hosts三个文件，如下面代码所示</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%24%20ssh-keygen%20-t%20rsa%20-C%20%5C%22your_emial%40examle.com%5C%22%5CnGenerating%20public%2Fprivate%20rsa%20key%20pair.%5CnEnter%20file%20in%20which%20to%20save%20the%20key%20(%2Fc%2FUsers%2FAdministrator%2F.ssh%2Fid_rsa)%3A%5Cn%2Fc%2FUsers%2FAdministrator%2F.ssh%2Fid_rsa%20already%20exists.%5CnOverwrite%20(y%2Fn)%3F%20y%5CnEnter%20passphrase%20(empty%20for%20no%20passphrase)%3A%5CnEnter%20same%20passphrase%20again%3A%5CnYour%20identification%20has%20been%20saved%20in%20%2Fc%2FUsers%2FAdministrator%2F.ssh%2Fid_rsa.%5CnYour%20public%20key%20has%20been%20saved%20in%20%2Fc%2FUsers%2FAdministrator%2F.ssh%2Fid_rsa.pub.%5CnThe%20key%20fingerprint%20is%3A%5CnSHA256%3AX.........................oo%20your_emial%40examle.com%5CnThe%20key's%20randomart%20image%20is%3A%5Cn%2B---%5BRSA%202048%5D----%2B%5Cn%7C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%5Cn%7C%20%20%20%20%20%20%20o%20.%20%20%20%20%20%20%20%7C%5Cn%7C%20%20%20%20%20%20%3D%20%2B%20%20%20%20%20%20%20%20%7C%5Cn%7C%20%20%20%20%20.%20*%20o%20%20%20%20%20%20%20%7C%5Cn%7C%20%20o%20o%20%3D%20S%20.%20%20%20%20%20%20%7C%5Cn%7C%20%3D%20%3D%20%3D%20%2B%20.%20%20%20%20%20%20%20%7C%5Cn%7Co%20B%20%3D%20%2B%20o%20%20%20%20%20%20%20%20%7C%5Cn%7Co%3D%20%3D%20%3DB%3D.*%20%20%20%20%20%20%20%7C%5Cn%7CE.o%20%2B%2B%3D%40O.o%20%20%20%20%20%20%7C%5Cn%2B----%5BSHA256%5D-----%2B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22LHq7M%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u4ef08869\" id=\"u4ef08869\"><span data-lake-id=\"uee3f8b51\" id=\"uee3f8b51\" style=\"color: rgb(82, 82, 82)\">在码云中进行对应操作，找到对应项目，在'Webhooks设置'右侧点击添加，然后输入地址，默认选中Push，密码为空，提交。</span></p><p data-lake-id=\"uf5a82c12\" id=\"uf5a82c12\"><span data-lake-id=\"u4aeaceb0\" id=\"u4aeaceb0\" style=\"color: rgb(82, 82, 82)\">​</span><br></p><p data-lake-id=\"u196e3a01\" id=\"u196e3a01\"><span data-lake-id=\"uf6eba276\" id=\"uf6eba276\" style=\"color: rgb(82, 82, 82)\">​</span><br></p><p data-lake-id=\"u5b2af592\" id=\"u5b2af592\"><span data-lake-id=\"u36996787\" id=\"u36996787\" style=\"color: rgb(82, 82, 82)\">在登录服务器相关目录（wwwroot）用git命令 克隆一般码云中的代码：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20clone%20https%3A%2F%2Fgitee.com%2Fxianrenqh%2Fhuicmf_tp6%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mUsTy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u034a08bc\" id=\"u034a08bc\"><span data-lake-id=\"u51d54c31\" id=\"u51d54c31\" style=\"color: rgb(82, 82, 82)\">拉取项目代码测试一下（首次需要执行前两行命令）master为分支名称</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20init%5Cngit%20remote%20add%20origin%20%5C%22%E4%BD%A0%E7%9A%84%E7%A0%81%E4%BA%91%E6%88%96coding%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80%EF%BC%88ssh%E6%88%96https%EF%BC%89%5C%22%5Cngit%20pull%20origin%20master%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22tyxrK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"udb233eb5\" id=\"udb233eb5\"><span data-lake-id=\"u512dd5ab\" id=\"u512dd5ab\" style=\"color: rgb(82, 82, 82)\">解决每次都需要输入密码的问题：（进行一次push or pull,输入一次密码以后就可以保存凭证了。）</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20config%20--global%20credential.helper%20store%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22TRGdz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 17,
    "hits": 17,
    "comments_count": 0,
    "word_count": 720,
    "created_at": "2022-04-14T06:34:00.000Z",
    "updated_at": "2023-07-27T02:08:00.000Z",
    "content_updated_at": "2023-07-27T02:08:00.000Z",
    "published_at": "2022-04-14T06:38:58.000Z",
    "first_published_at": "2022-04-14T06:38:57.576Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 928637879,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73438880,
    "type": "Doc",
    "slug": "iuvpm5",
    "title": "Git基础知识",
    "description": "tags: [git]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5c...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u5ff0c6f6\" class=\"ne-p\"><span class=\"ne-text\">tags: [git]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.cc</span></p><p id=\"u27314635\" class=\"ne-p\"><span class=\"ne-text\">cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png#clientId=ueab694e8-573a-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=uc0c2e85d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=600&amp;originWidth=900&amp;originalType=url%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=86685&amp;status=done&amp;style=none&amp;taskId=ufbff039f-63f5-41a3-9b92-38d4e0c7f8b&amp;title=</span></p><hr id=\"tn0Md\" class=\"ne-hr\"><p id=\"u38fadb24\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png\" width=\"900\" id=\"uc0c2e85d\" class=\"ne-image\"></p><h1 id=\"hBGDO\"><span class=\"ne-text\">什么是Git</span></h1><p id=\"ucbf58242\" class=\"ne-p\"><span class=\"ne-text\">从一般开发者的角度来看，Git 有以下功能：</span></p><ol class=\"ne-ol\"><li id=\"u6811ceb0\" data-lake-index-type=\"0\"><span class=\"ne-text\">从服务器上克隆数据库（包括代码和版本信息）到单机上。</span></li><li id=\"u7d211eb1\" data-lake-index-type=\"0\"><span class=\"ne-text\">在自己的机器上创建分支，修改代码。</span></li><li id=\"u08f6524b\" data-lake-index-type=\"0\"><span class=\"ne-text\">在单机上自己创建的分支上提交代码。</span></li><li id=\"u117a0847\" data-lake-index-type=\"0\"><span class=\"ne-text\">在单机上合并分支。</span></li><li id=\"u5701c181\" data-lake-index-type=\"0\"><span class=\"ne-text\">新建一个分支，把服务器上最新版的代码 fetch 下来，然后跟自己的主分支合并。</span></li><li id=\"u26ffd9d7\" data-lake-index-type=\"0\"><span class=\"ne-text\">生成补丁（patch），把补丁发送给主开发者。</span></li><li id=\"ubfa75945\" data-lake-index-type=\"0\"><span class=\"ne-text\">看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。</span></li><li id=\"u35067990\" data-lake-index-type=\"0\"><span class=\"ne-text\">一般开发者之间解决冲突的方法，开发者之间可以使用 pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。</span></li></ol><p id=\"ufc275411\" class=\"ne-p\"><span class=\"ne-text\">从主开发者的角度（假设主开发者不用开发代码）看，Git 有以下功能：</span></p><ol class=\"ne-ol\"><li id=\"u063ceba8\" data-lake-index-type=\"0\"><span class=\"ne-text\">查看邮件或者通过其它方式查看一般开发者的提交状态。</span></li><li id=\"ud374260c\" data-lake-index-type=\"0\"><span class=\"ne-text\">打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。</span></li><li id=\"ubccd8943\" data-lake-index-type=\"0\"><span class=\"ne-text\">向公共服务器提交结果，然后通知所有开发人员。</span></li></ol><p id=\"udfb91b6b\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"srPns\"><span class=\"ne-text\">Git 初入</span></h1><p id=\"ud8fbfcc6\" class=\"ne-p\"><span class=\"ne-text\">如果是第一次使用 Git，你需要设置署名和邮箱：</span></p><pre data-language=\"git\" id=\"jYgok\" class=\"ne-codeblock language-git\"><code>git config --global user.name &quot;用户名&quot;\ngit config --global user.email &quot;电子邮箱&quot;</code></pre><p id=\"ufea5d8d8\" class=\"ne-p\"><span class=\"ne-text\">将代码仓库 clone 到本地，其实就是将代码复制到你的机器里，并交由 Git 来管理：</span></p><pre data-language=\"git\" id=\"kAFHq\" class=\"ne-codeblock language-git\"><code>git clone git@github.com:someone/symfony-docs-chs.git</code></pre><p id=\"ufde24219\" class=\"ne-p\"><span class=\"ne-text\">你可以修改复制到本地的代码了（symfony-docs-chs 项目里都是 rst 格式的文档）。当你觉得完成了一定的工作量，想做个阶段性的提交：</span></p><p id=\"ue9a8def1\" class=\"ne-p\"><span class=\"ne-text\">向这个本地的代码仓库添加当前目录的所有改动：</span></p><pre data-language=\"git\" id=\"VdVy8\" class=\"ne-codeblock language-git\"><code>git add .</code></pre><p id=\"u33d058ea\" class=\"ne-p\"><span class=\"ne-text\">或者只是添加某个文件：</span></p><pre data-language=\"git\" id=\"X5HtW\" class=\"ne-codeblock language-git\"><code>git add -p</code></pre><p id=\"u942f2270\" class=\"ne-p\"><span class=\"ne-text\">我们可以输入</span></p><pre data-language=\"git\" id=\"HgcF6\" class=\"ne-codeblock language-git\"><code>git status</code></pre><p id=\"udb931bb7\" class=\"ne-p\"><span class=\"ne-text\">来看现在的状态，如下图是添加之前的：</span></p><p id=\"ub97cc052\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900978641-272da7c2-b01b-4f6a-b5a9-4070fb738057.png\" width=\"1082\" id=\"u26c9e243\" class=\"ne-image\"></p><p id=\"u5a2e484c\" class=\"ne-p\"><span class=\"ne-text\">下面是添加之后 的</span></p><p id=\"u4ed9a3be\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900992662-de020754-c112-42e2-a2e8-ceabaa234271.png\" width=\"1244\" id=\"u7c4df1b6\" class=\"ne-image\"></p><p id=\"u4930bb00\" class=\"ne-p\"><br></p><p id=\"u10de1612\" class=\"ne-p\"><span class=\"ne-text\">可以看到状态的变化是从黄色到绿色，即 unstage 到 add。</span></p><p id=\"u1c31cdd2\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"eNtlD\"><span class=\"ne-text\">GitHub 与 Git</span></h1><div class=\"ne-quote\"><p id=\"u35d74694\" class=\"ne-p\"><span class=\"ne-text\">Git是一个分布式的版本控制系统，最初由Linus Torvalds编写，用作Linux内核代码的管理。在推出后，Git在其它项目中也取得了很大成功，尤其是在Ruby社区中。目前，包括Rubinius、Merb和Bitcoin在内的很多知名项目都使用了Git。Git同样可以被诸如Capistrano和Vlad the Deployer这样的部署工具所使用。</span></p><p id=\"u94fb1a7d\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div><div class=\"ne-quote\"><p id=\"u2207c5cb\" class=\"ne-p\"><span class=\"ne-text\">GitHub可以托管各种git库，并提供一个web界面，但与其它像 SourceForge或Google Code这样的服务不同，GitHub的独特卖点在于从另外一个项目进行分支的简易性。为一个项目贡献代码非常简单：首先点击项目站点的“fork”的按钮，然后将代码检出并将修改加入到刚才分出的代码库中，最后通过内建的“pull request”机制向项目负责人申请代码合并。已经有人将GitHub称为代码玩家的MySpace。</span></p><p id=\"ube0fe173\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div><h1 id=\"lJWia\"><span class=\"ne-text\">Git 提交信息及几种不同的规范</span></h1><p id=\"u52cc3c08\" class=\"ne-p\"><span class=\"ne-text\">在团队协作中，使用版本管理工具 Git、SVN 几乎都是这个行业的标准。当我们提交代码的时候，需要编写提交信息（commit message）。</span></p><p id=\"u3624c7df\" class=\"ne-p\"><span class=\"ne-text\">而提交信息的主要用途是：</span><span class=\"ne-text\">告诉这个项目的人，这次代码提交里做了些什么</span><span class=\"ne-text\">。如，我更新了 React Native Elements 的版本，那么它就可以是：</span><span class=\"ne-text\">[T] upgrade react native elements</span><span class=\"ne-text\">。对应的我修改的代码就是：</span><span class=\"ne-text\">package.json</span><span class=\"ne-text\"> </span><span class=\"ne-text\">和</span><span class=\"ne-text\"> </span><span class=\"ne-text\">yarn.lock</span><span class=\"ne-text\"> </span><span class=\"ne-text\">中的文件。一般来说，建议</span><span class=\"ne-text\">小步提交</span><span class=\"ne-text\">，即按自己的 Tasking 步骤来的提交，每一小步都有对应的提交信息。这样做的主要目的是：</span><span class=\"ne-text\">防止一次修改中，修改过多的文件，导致后期修改、维护、撤销等等困难</span><span class=\"ne-text\">。</span></p><p id=\"u8e279cf9\" class=\"ne-p\"><span class=\"ne-text\">而对于不同的团队来说，都会遵循一定的规范，本文主要会介绍以下几种写法：</span></p><ul class=\"ne-ul\"><li id=\"u5f5b78a8\" data-lake-index-type=\"0\"><span class=\"ne-text\">工作写法</span></li><li id=\"u6761e973\" data-lake-index-type=\"0\"><span class=\"ne-text\">常规写法</span></li><li id=\"u76038cc6\" data-lake-index-type=\"0\"><span class=\"ne-text\">开源库写法</span></li></ul><h1 id=\"Zj1La\"><span class=\"ne-text\">Git工具推荐</span></h1><h2 id=\"r5lD6\"><span class=\"ne-text\">SourceTree：</span></h2><p id=\"ufdabc51c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(52, 73, 94)\">SourceTree 方便用来查看一些项目，寻找其中的一些问题。</span></p><p id=\"ufa2ff146\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(52, 73, 94)\">gitflow 分支合并、查看</span></p><p id=\"u92f0ff38\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649903156572-5d9828a7-61df-404e-8ae8-cb35c44c70f0.png\" width=\"1023\" id=\"ue6bd8f05\" class=\"ne-image\"></p><p id=\"u83300d5a\" class=\"ne-p\"><br></p><p id=\"u8429c2f5\" class=\"ne-p\"><span class=\"ne-text\">来源：《GitHub漫游指南》</span></p><p id=\"u1987a241\" class=\"ne-p\"><a href=\"https://github.phodal.com/\" data-href=\"https://github.phodal.com/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.phodal.com/</span></a></p></div>",
    "body": "tags: [git]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net<br />cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png#clientId=ueab694e8-573a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uc0c2e85d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=900&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=86685&status=done&style=none&taskId=ufbff039f-63f5-41a3-9b92-38d4e0c7f8b&title=\n\n---\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png#clientId=ueab694e8-573a-4&from=paste&id=uc0c2e85d&originHeight=600&originWidth=900&originalType=url&ratio=1&rotation=0&showTitle=false&size=86685&status=done&style=none&taskId=ufbff039f-63f5-41a3-9b92-38d4e0c7f8b&title=)\n<a name=\"hBGDO\"></a>\n# 什么是Git\n从一般开发者的角度来看，Git 有以下功能：\n\n1. 从服务器上克隆数据库（包括代码和版本信息）到单机上。\n2. 在自己的机器上创建分支，修改代码。\n3. 在单机上自己创建的分支上提交代码。\n4. 在单机上合并分支。\n5. 新建一个分支，把服务器上最新版的代码 fetch 下来，然后跟自己的主分支合并。\n6. 生成补丁（patch），把补丁发送给主开发者。\n7. 看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。\n8. 一般开发者之间解决冲突的方法，开发者之间可以使用 pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。\n\n从主开发者的角度（假设主开发者不用开发代码）看，Git 有以下功能：\n\n1. 查看邮件或者通过其它方式查看一般开发者的提交状态。\n2. 打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。\n3. 向公共服务器提交结果，然后通知所有开发人员。\n\n<a name=\"srPns\"></a>\n# Git 初入\n如果是第一次使用 Git，你需要设置署名和邮箱：\n```git\ngit config --global user.name \"用户名\"\ngit config --global user.email \"电子邮箱\"\n```\n将代码仓库 clone 到本地，其实就是将代码复制到你的机器里，并交由 Git 来管理：\n```git\ngit clone git@github.com:someone/symfony-docs-chs.git\n```\n你可以修改复制到本地的代码了（symfony-docs-chs 项目里都是 rst 格式的文档）。当你觉得完成了一定的工作量，想做个阶段性的提交：<br />向这个本地的代码仓库添加当前目录的所有改动：\n```git\ngit add .\n```\n或者只是添加某个文件：\n```git\ngit add -p\n```\n我们可以输入\n```git\ngit status\n```\n来看现在的状态，如下图是添加之前的：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900978641-272da7c2-b01b-4f6a-b5a9-4070fb738057.png#clientId=ueab694e8-573a-4&from=paste&id=u26c9e243&originHeight=470&originWidth=1082&originalType=url&ratio=1&rotation=0&showTitle=false&size=111634&status=done&style=none&taskId=ufa7ab167-5193-4489-84f7-d42e10ceda1&title=)<br />下面是添加之后 的<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900992662-de020754-c112-42e2-a2e8-ceabaa234271.png#clientId=ueab694e8-573a-4&from=paste&id=u7c4df1b6&originHeight=406&originWidth=1244&originalType=url&ratio=1&rotation=0&showTitle=false&size=94662&status=done&style=none&taskId=u8b110088-73b0-4ed7-8bcb-52b0ed37169&title=)\n\n可以看到状态的变化是从黄色到绿色，即 unstage 到 add。\n\n<a name=\"eNtlD\"></a>\n# GitHub 与 Git\n> Git是一个分布式的版本控制系统，最初由Linus Torvalds编写，用作Linux内核代码的管理。在推出后，Git在其它项目中也取得了很大成功，尤其是在Ruby社区中。目前，包括Rubinius、Merb和Bitcoin在内的很多知名项目都使用了Git。Git同样可以被诸如Capistrano和Vlad the Deployer这样的部署工具所使用。\n> \n\n> GitHub可以托管各种git库，并提供一个web界面，但与其它像 SourceForge或Google Code这样的服务不同，GitHub的独特卖点在于从另外一个项目进行分支的简易性。为一个项目贡献代码非常简单：首先点击项目站点的“fork”的按钮，然后将代码检出并将修改加入到刚才分出的代码库中，最后通过内建的“pull request”机制向项目负责人申请代码合并。已经有人将GitHub称为代码玩家的MySpace。\n> \n\n<a name=\"lJWia\"></a>\n# Git 提交信息及几种不同的规范\n在团队协作中，使用版本管理工具 Git、SVN 几乎都是这个行业的标准。当我们提交代码的时候，需要编写提交信息（commit message）。<br />而提交信息的主要用途是：告诉这个项目的人，这次代码提交里做了些什么。如，我更新了 React Native Elements 的版本，那么它就可以是：[T] upgrade react native elements。对应的我修改的代码就是：package.json 和 yarn.lock 中的文件。一般来说，建议小步提交，即按自己的 Tasking 步骤来的提交，每一小步都有对应的提交信息。这样做的主要目的是：防止一次修改中，修改过多的文件，导致后期修改、维护、撤销等等困难。<br />而对于不同的团队来说，都会遵循一定的规范，本文主要会介绍以下几种写法：\n\n- 工作写法\n- 常规写法\n- 开源库写法\n<a name=\"Zj1La\"></a>\n# Git工具推荐\n<a name=\"r5lD6\"></a>\n## SourceTree：\nSourceTree 方便用来查看一些项目，寻找其中的一些问题。<br />gitflow 分支合并、查看<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649903156572-5d9828a7-61df-404e-8ae8-cb35c44c70f0.png#clientId=u2837663f-9cd5-4&from=paste&id=ue6bd8f05&originHeight=681&originWidth=1023&originalType=url&ratio=1&rotation=0&showTitle=false&size=503264&status=done&style=none&taskId=u89ff8403-c63e-4fb3-9d0e-2ead9efe57a&title=)\n\n来源：《GitHub漫游指南》<br />[https://github.phodal.com/](https://github.phodal.com/)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u5ff0c6f6\" class=\"ne-p\"><span class=\"ne-text\">tags: [git]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"u27314635\" class=\"ne-p\"><span class=\"ne-text\">cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png#clientId=ueab694e8-573a-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=uc0c2e85d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=600&amp;originWidth=900&amp;originalType=url%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=86685&amp;status=done&amp;style=none&amp;taskId=ufbff039f-63f5-41a3-9b92-38d4e0c7f8b&amp;title=</span></p><hr id=\"tn0Md\" class=\"ne-hr\"><p id=\"u38fadb24\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png\" width=\"900\" id=\"uc0c2e85d\" class=\"ne-image\"></p><h1 id=\"hBGDO\"><span class=\"ne-text\">什么是Git</span></h1><p id=\"ucbf58242\" class=\"ne-p\"><span class=\"ne-text\">从一般开发者的角度来看，Git 有以下功能：</span></p><ol class=\"ne-ol\"><li id=\"u6811ceb0\"><span class=\"ne-text\">从服务器上克隆数据库（包括代码和版本信息）到单机上。</span></li><li id=\"u7d211eb1\"><span class=\"ne-text\">在自己的机器上创建分支，修改代码。</span></li><li id=\"u08f6524b\"><span class=\"ne-text\">在单机上自己创建的分支上提交代码。</span></li><li id=\"u117a0847\"><span class=\"ne-text\">在单机上合并分支。</span></li><li id=\"u5701c181\"><span class=\"ne-text\">新建一个分支，把服务器上最新版的代码 fetch 下来，然后跟自己的主分支合并。</span></li><li id=\"u26ffd9d7\"><span class=\"ne-text\">生成补丁（patch），把补丁发送给主开发者。</span></li><li id=\"ubfa75945\"><span class=\"ne-text\">看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。</span></li><li id=\"u35067990\"><span class=\"ne-text\">一般开发者之间解决冲突的方法，开发者之间可以使用 pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。</span></li></ol><p id=\"ufc275411\" class=\"ne-p\"><span class=\"ne-text\">从主开发者的角度（假设主开发者不用开发代码）看，Git 有以下功能：</span></p><ol class=\"ne-ol\"><li id=\"u063ceba8\"><span class=\"ne-text\">查看邮件或者通过其它方式查看一般开发者的提交状态。</span></li><li id=\"ud374260c\"><span class=\"ne-text\">打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。</span></li><li id=\"ubccd8943\"><span class=\"ne-text\">向公共服务器提交结果，然后通知所有开发人员。</span></li></ol><p id=\"udfb91b6b\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"srPns\"><span class=\"ne-text\">Git 初入</span></h1><p id=\"ud8fbfcc6\" class=\"ne-p\"><span class=\"ne-text\">如果是第一次使用 Git，你需要设置署名和邮箱：</span></p><pre data-language=\"git\" id=\"jYgok\" class=\"ne-codeblock language-git\">git config --global user.name &quot;用户名&quot;\ngit config --global user.email &quot;电子邮箱&quot;</pre><p id=\"ufea5d8d8\" class=\"ne-p\"><span class=\"ne-text\">将代码仓库 clone 到本地，其实就是将代码复制到你的机器里，并交由 Git 来管理：</span></p><pre data-language=\"git\" id=\"kAFHq\" class=\"ne-codeblock language-git\">git clone git@github.com:someone/symfony-docs-chs.git</pre><p id=\"ufde24219\" class=\"ne-p\"><span class=\"ne-text\">你可以修改复制到本地的代码了（symfony-docs-chs 项目里都是 rst 格式的文档）。当你觉得完成了一定的工作量，想做个阶段性的提交：</span></p><p id=\"ue9a8def1\" class=\"ne-p\"><span class=\"ne-text\">向这个本地的代码仓库添加当前目录的所有改动：</span></p><pre data-language=\"git\" id=\"VdVy8\" class=\"ne-codeblock language-git\">git add .</pre><p id=\"u33d058ea\" class=\"ne-p\"><span class=\"ne-text\">或者只是添加某个文件：</span></p><pre data-language=\"git\" id=\"X5HtW\" class=\"ne-codeblock language-git\">git add -p</pre><p id=\"u942f2270\" class=\"ne-p\"><span class=\"ne-text\">我们可以输入</span></p><pre data-language=\"git\" id=\"HgcF6\" class=\"ne-codeblock language-git\">git status</pre><p id=\"udb931bb7\" class=\"ne-p\"><span class=\"ne-text\">来看现在的状态，如下图是添加之前的：</span></p><p id=\"ub97cc052\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900978641-272da7c2-b01b-4f6a-b5a9-4070fb738057.png\" width=\"1082\" id=\"u26c9e243\" class=\"ne-image\"></p><p id=\"u5a2e484c\" class=\"ne-p\"><span class=\"ne-text\">下面是添加之后 的</span></p><p id=\"u4ed9a3be\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900992662-de020754-c112-42e2-a2e8-ceabaa234271.png\" width=\"1244\" id=\"u7c4df1b6\" class=\"ne-image\"></p><p id=\"u4930bb00\" class=\"ne-p\"><br></p><p id=\"u10de1612\" class=\"ne-p\"><span class=\"ne-text\">可以看到状态的变化是从黄色到绿色，即 unstage 到 add。</span></p><p id=\"u1c31cdd2\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"eNtlD\"><span class=\"ne-text\">GitHub 与 Git</span></h1><div class=\"ne-quote\"><p id=\"u35d74694\" class=\"ne-p\"><span class=\"ne-text\">Git是一个分布式的版本控制系统，最初由Linus Torvalds编写，用作Linux内核代码的管理。在推出后，Git在其它项目中也取得了很大成功，尤其是在Ruby社区中。目前，包括Rubinius、Merb和Bitcoin在内的很多知名项目都使用了Git。Git同样可以被诸如Capistrano和Vlad the Deployer这样的部署工具所使用。</span></p><p id=\"u94fb1a7d\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div><div class=\"ne-quote\"><p id=\"u2207c5cb\" class=\"ne-p\"><span class=\"ne-text\">GitHub可以托管各种git库，并提供一个web界面，但与其它像 SourceForge或Google Code这样的服务不同，GitHub的独特卖点在于从另外一个项目进行分支的简易性。为一个项目贡献代码非常简单：首先点击项目站点的“fork”的按钮，然后将代码检出并将修改加入到刚才分出的代码库中，最后通过内建的“pull request”机制向项目负责人申请代码合并。已经有人将GitHub称为代码玩家的MySpace。</span></p><p id=\"ube0fe173\" class=\"ne-p\"><span class=\"ne-text\"></span></p></div><h1 id=\"lJWia\"><span class=\"ne-text\">Git 提交信息及几种不同的规范</span></h1><p id=\"u52cc3c08\" class=\"ne-p\"><span class=\"ne-text\">在团队协作中，使用版本管理工具 Git、SVN 几乎都是这个行业的标准。当我们提交代码的时候，需要编写提交信息（commit message）。</span></p><p id=\"u3624c7df\" class=\"ne-p\"><span class=\"ne-text\">而提交信息的主要用途是：</span><span class=\"ne-text\">告诉这个项目的人，这次代码提交里做了些什么</span><span class=\"ne-text\">。如，我更新了 React Native Elements 的版本，那么它就可以是：</span><span class=\"ne-text\">[T] upgrade react native elements</span><span class=\"ne-text\">。对应的我修改的代码就是：</span><span class=\"ne-text\">package.json</span><span class=\"ne-text\"> </span><span class=\"ne-text\">和</span><span class=\"ne-text\"> </span><span class=\"ne-text\">yarn.lock</span><span class=\"ne-text\"> </span><span class=\"ne-text\">中的文件。一般来说，建议</span><span class=\"ne-text\">小步提交</span><span class=\"ne-text\">，即按自己的 Tasking 步骤来的提交，每一小步都有对应的提交信息。这样做的主要目的是：</span><span class=\"ne-text\">防止一次修改中，修改过多的文件，导致后期修改、维护、撤销等等困难</span><span class=\"ne-text\">。</span></p><p id=\"u8e279cf9\" class=\"ne-p\"><span class=\"ne-text\">而对于不同的团队来说，都会遵循一定的规范，本文主要会介绍以下几种写法：</span></p><ul class=\"ne-ul\"><li id=\"u5f5b78a8\"><span class=\"ne-text\">工作写法</span></li><li id=\"u6761e973\"><span class=\"ne-text\">常规写法</span></li><li id=\"u76038cc6\"><span class=\"ne-text\">开源库写法</span></li></ul><h1 id=\"Zj1La\"><span class=\"ne-text\">Git工具推荐</span></h1><h2 id=\"r5lD6\"><span class=\"ne-text\">SourceTree：</span></h2><p id=\"ufdabc51c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(52, 73, 94)\">SourceTree 方便用来查看一些项目，寻找其中的一些问题。</span></p><p id=\"ufa2ff146\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(52, 73, 94)\">gitflow 分支合并、查看</span></p><p id=\"u92f0ff38\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649903156572-5d9828a7-61df-404e-8ae8-cb35c44c70f0.png\" width=\"1023\" id=\"ue6bd8f05\" class=\"ne-image\"></p><p id=\"u83300d5a\" class=\"ne-p\"><br></p><p id=\"u8429c2f5\" class=\"ne-p\"><span class=\"ne-text\">来源：《GitHub漫游指南》</span></p><p id=\"u1987a241\" class=\"ne-p\"><a href=\"https://github.phodal.com/\" data-href=\"https://github.phodal.com/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://github.phodal.com/</span></a></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u5ff0c6f6\" id=\"u5ff0c6f6\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [git]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"u27314635\" id=\"u27314635\"><span data-lake-id=\"uc1e97cb3\" id=\"uc1e97cb3\">cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png#clientId=ueab694e8-573a-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=uc0c2e85d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=600&amp;originWidth=900&amp;originalType=url%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=86685&amp;status=done&amp;style=none&amp;taskId=ufbff039f-63f5-41a3-9b92-38d4e0c7f8b&amp;title=</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22tn0Md%22%7D\"></card><p data-lake-id=\"u38fadb24\" id=\"u38fadb24\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649900825959-5cd5db54-330c-4de3-9808-ca353657f745.png%22%2C%22taskId%22%3A%22ufbff039f-63f5-41a3-9b92-38d4e0c7f8b%22%2C%22clientId%22%3A%22ueab694e8-573a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A86685%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A900%2C%22originHeight%22%3A600%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22GIT%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A488.65546%2C%22y%22%3A193.06055%2C%22width%22%3A273.39644000000004%2C%22height%22%3A217.57512999999997%2C%22text%22%3A%22GIT%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22uc0c2e85d%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h1 data-lake-id=\"hBGDO\" id=\"hBGDO\"><span data-lake-id=\"ucc87a33c\" id=\"ucc87a33c\">什么是Git</span></h1><p data-lake-id=\"ucbf58242\" id=\"ucbf58242\"><span data-lake-id=\"ucc73f3bf\" id=\"ucc73f3bf\">从一般开发者的角度来看，Git 有以下功能：</span></p><ol list=\"u157a5d83\"><li fid=\"u0890cf0e\" data-lake-id=\"u6811ceb0\" id=\"u6811ceb0\"><span data-lake-id=\"ua012e77b\" id=\"ua012e77b\">从服务器上克隆数据库（包括代码和版本信息）到单机上。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"u7d211eb1\" id=\"u7d211eb1\"><span data-lake-id=\"u1aea92a9\" id=\"u1aea92a9\">在自己的机器上创建分支，修改代码。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"u08f6524b\" id=\"u08f6524b\"><span data-lake-id=\"u3c1feecc\" id=\"u3c1feecc\">在单机上自己创建的分支上提交代码。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"u117a0847\" id=\"u117a0847\"><span data-lake-id=\"uddf181a6\" id=\"uddf181a6\">在单机上合并分支。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"u5701c181\" id=\"u5701c181\"><span data-lake-id=\"u4afb1adf\" id=\"u4afb1adf\">新建一个分支，把服务器上最新版的代码 fetch 下来，然后跟自己的主分支合并。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"u26ffd9d7\" id=\"u26ffd9d7\"><span data-lake-id=\"u78dde39d\" id=\"u78dde39d\">生成补丁（patch），把补丁发送给主开发者。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"ubfa75945\" id=\"ubfa75945\"><span data-lake-id=\"ube01391b\" id=\"ube01391b\">看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。</span></li><li fid=\"u0890cf0e\" data-lake-id=\"u35067990\" id=\"u35067990\"><span data-lake-id=\"u84755627\" id=\"u84755627\">一般开发者之间解决冲突的方法，开发者之间可以使用 pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。</span></li></ol><p data-lake-id=\"ufc275411\" id=\"ufc275411\"><span data-lake-id=\"uc78bf1aa\" id=\"uc78bf1aa\">从主开发者的角度（假设主开发者不用开发代码）看，Git 有以下功能：</span></p><ol list=\"u0ea7d055\"><li fid=\"u483004f1\" data-lake-id=\"u063ceba8\" id=\"u063ceba8\"><span data-lake-id=\"u40be97ee\" id=\"u40be97ee\">查看邮件或者通过其它方式查看一般开发者的提交状态。</span></li><li fid=\"u483004f1\" data-lake-id=\"ud374260c\" id=\"ud374260c\"><span data-lake-id=\"u6b3b52be\" id=\"u6b3b52be\">打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。</span></li><li fid=\"u483004f1\" data-lake-id=\"ubccd8943\" id=\"ubccd8943\"><span data-lake-id=\"uf0b93a44\" id=\"uf0b93a44\">向公共服务器提交结果，然后通知所有开发人员。</span></li></ol><p data-lake-id=\"udfb91b6b\" id=\"udfb91b6b\"><span data-lake-id=\"u1da54645\" id=\"u1da54645\">​</span><br></p><h1 data-lake-id=\"srPns\" id=\"srPns\"><span data-lake-id=\"u59d2557d\" id=\"u59d2557d\">Git 初入</span></h1><p data-lake-id=\"ud8fbfcc6\" id=\"ud8fbfcc6\"><span data-lake-id=\"u26a15751\" id=\"u26a15751\">如果是第一次使用 Git，你需要设置署名和邮箱：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20config%20--global%20user.name%20%5C%22%E7%94%A8%E6%88%B7%E5%90%8D%5C%22%5Cngit%20config%20--global%20user.email%20%5C%22%E7%94%B5%E5%AD%90%E9%82%AE%E7%AE%B1%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jYgok%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufea5d8d8\" id=\"ufea5d8d8\"><span data-lake-id=\"ua8b549d8\" id=\"ua8b549d8\">将代码仓库 clone 到本地，其实就是将代码复制到你的机器里，并交由 Git 来管理：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20clone%20git%40github.com%3Asomeone%2Fsymfony-docs-chs.git%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kAFHq%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufde24219\" id=\"ufde24219\"><span data-lake-id=\"u1c4d0c2e\" id=\"u1c4d0c2e\">你可以修改复制到本地的代码了（symfony-docs-chs 项目里都是 rst 格式的文档）。当你觉得完成了一定的工作量，想做个阶段性的提交：</span></p><p data-lake-id=\"ue9a8def1\" id=\"ue9a8def1\"><span data-lake-id=\"uf035282e\" id=\"uf035282e\">向这个本地的代码仓库添加当前目录的所有改动：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20add%20.%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VdVy8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u33d058ea\" id=\"u33d058ea\"><span data-lake-id=\"ua7842bef\" id=\"ua7842bef\">或者只是添加某个文件：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20add%20-p%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22X5HtW%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u942f2270\" id=\"u942f2270\"><span data-lake-id=\"u3276e181\" id=\"u3276e181\">我们可以输入</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20status%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22HgcF6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"udb931bb7\" id=\"udb931bb7\"><span data-lake-id=\"u534008dd\" id=\"u534008dd\">来看现在的状态，如下图是添加之前的：</span></p><p data-lake-id=\"ub97cc052\" id=\"ub97cc052\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649900978641-272da7c2-b01b-4f6a-b5a9-4070fb738057.png%22%2C%22taskId%22%3A%22ufa7ab167-5193-4489-84f7-d42e10ceda1%22%2C%22clientId%22%3A%22ueab694e8-573a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A111634%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1082%2C%22originHeight%22%3A470%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22~%2FLEARING%2FGITHUB-ROAM%20ETEST%20FDHUANG%20GIT%20ST%20GH-PAGES%2012%20ON%20BRANCH%20GH-PAGES%20IS%20AHEAD%20OF%20'ORIGIN%2FGH-PAGES'%20BY%202%20COMMITS.%20YOUR%20BRANCH%20COMMITS)%20(USE%5C%22GIT%20PUSH%5C%22%20TO%20PUBLISH%20YOUR%20LOCAL%20CHANGES%20NOT%20STAGED%20FOR%20E%20COMMIT%20(USE%20%5C%22GIT%20ADD%20%3CFILE%3E...%5C%22%20TO%20UPDATE%20WHAT%20WILL%20BE%20COMMITTED)%20%3CFILE%3E....%5C%22%20TO%20DISCARD%20CHANGES%20IN%20WORKING%20DIRECTORY)%20(USE%20%5C%22GIT%20CHECKOUT%20MODIFIED%3A%20CHAPTERS%2F01-INTRODUCTION.MD%20CHAPTERS%2F02-GITHUB-FUNDAMENTALS.MD%20MODIFIED%3A%20MODIFIED%3A%20GI%20THUB-ROAM.MD%20INDEX.HTML%20MODIFIED%3A%20ADD%5C%22%20CHANGES%20ADDED%20%5C%22GIT%20COMMIT%20TO%20(USE)%20AND%2FOR%20COMMIT%20NO%20~%2FLEARING%2FGITHUB-ROAM%20FDHUANG%20%E4%B8%AA2%20GH-PAGES%20TEST%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A519.2663%2C%22y%22%3A16.169703%2C%22width%22%3A291.65060000000005%2C%22height%22%3A23.843018999999998%2C%22text%22%3A%22~%2FLEARING%2FGITHUB-ROAM%22%7D%2C%7B%22x%22%3A167.21222%2C%22y%22%3A16.433731%2C%22width%22%3A81.64604%2C%22height%22%3A22.593852999999996%2C%22text%22%3A%22ETEST%22%7D%2C%7B%22x%22%3A23.123793%2C%22y%22%3A17.467932%2C%22width%22%3A101.72288700000001%2C%22height%22%3A22.074251%2C%22text%22%3A%22FDHUANG%22%7D%2C%7B%22x%22%3A848.51807%2C%22y%22%3A17.828981%2C%22width%22%3A84.84680000000003%2C%22height%22%3A21.714199%2C%22text%22%3A%22GIT%20ST%22%7D%2C%7B%22x%22%3A315.8204%2C%22y%22%3A17.043602%2C%22width%22%3A157.92111999999997%2C%22height%22%3A24.990074%2C%22text%22%3A%22GH-PAGES%2012%22%7D%2C%7B%22x%22%3A11.361753%2C%22y%22%3A48.07433%2C%22width%22%3A124.27949700000002%2C%22height%22%3A19.654129999999995%2C%22text%22%3A%22ON%20BRANCH%22%7D%2C%7B%22x%22%3A155.49287%2C%22y%22%3A50.644627%2C%22width%22%3A105.35781%2C%22height%22%3A18.634012999999996%2C%22text%22%3A%22GH-PAGES%22%7D%2C%7B%22x%22%3A177.17107%2C%22y%22%3A71.41393%2C%22width%22%3A600.37073%2C%22height%22%3A35.01964000000001%2C%22text%22%3A%22IS%20AHEAD%20OF%20'ORIGIN%2FGH-PAGES'%20BY%202%20COMMITS.%22%7D%2C%7B%22x%22%3A12.56342%2C%22y%22%3A77.715576%2C%22width%22%3A151.56892%2C%22height%22%3A19.401168999999996%2C%22text%22%3A%22YOUR%20BRANCH%22%7D%2C%7B%22x%22%3A569.05133%2C%22y%22%3A106.91442%2C%22width%22%3A111.15746999999999%2C%22height%22%3A24.296989999999994%2C%22text%22%3A%22COMMITS)%22%7D%2C%7B%22x%22%3A42.396427%2C%22y%22%3A108.57093%2C%22width%22%3A121.03271299999999%2C%22height%22%3A21.793679999999995%2C%22text%22%3A%22(USE%5C%22GIT%22%7D%2C%7B%22x%22%3A176.73973%2C%22y%22%3A105.165535%2C%22width%22%3A380.33521999999994%2C%22height%22%3A30.067225000000008%2C%22text%22%3A%22PUSH%5C%22%20TO%20PUBLISH%20YOUR%20LOCAL%22%7D%2C%7B%22x%22%3A7.513576%2C%22y%22%3A135.90538%2C%22width%22%3A316.270024%2C%22height%22%3A25.56138999999999%2C%22text%22%3A%22CHANGES%20NOT%20STAGED%20FOR%20E%22%7D%2C%7B%22x%22%3A327.884%2C%22y%22%3A139.09642%2C%22width%22%3A77.40449999999998%2C%22height%22%3A19.590779999999995%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A38.672096%2C%22y%22%3A163.05226%2C%22width%22%3A809.602404%2C%22height%22%3A29.07399000000001%2C%22text%22%3A%22(USE%20%5C%22GIT%20ADD%20%3CFILE%3E...%5C%22%20TO%20UPDATE%20WHAT%20WILL%20BE%20COMMITTED)%22%7D%2C%7B%22x%22%3A345.5693%2C%22y%22%3A191.9093%2C%22width%22%3A715.1764999999999%2C%22height%22%3A36.91744%2C%22text%22%3A%22%3CFILE%3E....%5C%22%20TO%20DISCARD%20CHANGES%20IN%20WORKING%20DIRECTORY)%22%7D%2C%7B%22x%22%3A40.13253%2C%22y%22%3A196.4807%2C%22width%22%3A255.22977%2C%22height%22%3A23.299149999999997%2C%22text%22%3A%22(USE%20%5C%22GIT%20CHECKOUT%22%7D%2C%7B%22x%22%3A119.015755%2C%22y%22%3A256.3964%2C%22width%22%3A124.769705%2C%22height%22%3A22.72307999999998%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A297.54337%2C%22y%22%3A258.72025%2C%22width%22%3A370.12543000000005%2C%22height%22%3A20.779380000000003%2C%22text%22%3A%22CHAPTERS%2F01-INTRODUCTION.MD%22%7D%2C%7B%22x%22%3A288.48056%2C%22y%22%3A286.7362%2C%22width%22%3A478.20577999999995%2C%22height%22%3A24.624239999999986%2C%22text%22%3A%22CHAPTERS%2F02-GITHUB-FUNDAMENTALS.MD%22%7D%2C%7B%22x%22%3A119.764755%2C%22y%22%3A287.5198%2C%22width%22%3A122.28343500000001%2C%22height%22%3A20.786800000000028%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A120.13475%2C%22y%22%3A315.33316%2C%22width%22%3A120.27211%2C%22height%22%3A22.33753999999999%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A288.1106%2C%22y%22%3A316.12885%2C%22width%22%3A198.9545%2C%22height%22%3A24.995650000000012%2C%22text%22%3A%22GI%20THUB-ROAM.MD%22%7D%2C%7B%22x%22%3A291.30612%2C%22y%22%3A347.5297%2C%22width%22%3A137.98785999999996%2C%22height%22%3A20.20944000000003%2C%22text%22%3A%22INDEX.HTML%22%7D%2C%7B%22x%22%3A120.00703%2C%22y%22%3A346.89883%2C%22width%22%3A124.12410000000001%2C%22height%22%3A23.04615000000001%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A525.8853%2C%22y%22%3A406.39792%2C%22width%22%3A56.48285999999996%2C%22height%22%3A21.86835000000002%2C%22text%22%3A%22ADD%5C%22%22%7D%2C%7B%22x%22%3A47.665886%2C%22y%22%3A404.4991%2C%22width%22%3A190.593664%2C%22height%22%3A27.89915000000002%2C%22text%22%3A%22CHANGES%20ADDED%22%7D%2C%7B%22x%22%3A705.03815%2C%22y%22%3A407.2917%2C%22width%22%3A144.65789000000007%2C%22height%22%3A21.414350000000013%2C%22text%22%3A%22%5C%22GIT%20COMMIT%22%7D%2C%7B%22x%22%3A250.23315%2C%22y%22%3A408.3556%2C%22width%22%3A25.333380000000005%2C%22height%22%3A20.446860000000015%2C%22text%22%3A%22TO%22%7D%2C%7B%22x%22%3A393.7414%2C%22y%22%3A408.6283%2C%22width%22%3A48.469749999999976%2C%22height%22%3A19.449059999999974%2C%22text%22%3A%22(USE)%22%7D%2C%7B%22x%22%3A596.25024%2C%22y%22%3A409.38837%2C%22width%22%3A84.67426%2C%22height%22%3A19.883080000000007%2C%22text%22%3A%22AND%2FOR%22%7D%2C%7B%22x%22%3A288.55347%2C%22y%22%3A407.1281%2C%22width%22%3A85.45001000000002%2C%22height%22%3A22.936139999999966%2C%22text%22%3A%22COMMIT%22%7D%2C%7B%22x%22%3A8.651147%2C%22y%22%3A410.37665%2C%22width%22%3A27.372611%2C%22height%22%3A17.393220000000042%2C%22text%22%3A%22NO%22%7D%2C%7B%22x%22%3A527.2189%2C%22y%22%3A435.3624%2C%22width%22%3A281.72995000000003%2C%22height%22%3A25.932060000000035%2C%22text%22%3A%22~%2FLEARING%2FGITHUB-ROAM%22%7D%2C%7B%22x%22%3A24.629122%2C%22y%22%3A435.6735%2C%22width%22%3A99.267168%2C%22height%22%3A24.72890000000001%2C%22text%22%3A%22FDHUANG%22%7D%2C%7B%22x%22%3A443.98303%2C%22y%22%3A437.47433%2C%22width%22%3A29.32035000000002%2C%22height%22%3A21.005989999999997%2C%22text%22%3A%22%E4%B8%AA2%22%7D%2C%7B%22x%22%3A317.8748%2C%22y%22%3A438.54166%2C%22width%22%3A112.37203%2C%22height%22%3A19.68951000000004%2C%22text%22%3A%22GH-PAGES%22%7D%2C%7B%22x%22%3A192.13722%2C%22y%22%3A438.4287%2C%22width%22%3A55.926319999999976%2C%22height%22%3A18.857860000000016%2C%22text%22%3A%22TEST%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u26c9e243%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u5a2e484c\" id=\"u5a2e484c\"><span data-lake-id=\"u8bcf0b29\" id=\"u8bcf0b29\">下面是添加之后 的</span></p><p data-lake-id=\"u4ed9a3be\" id=\"u4ed9a3be\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649900992662-de020754-c112-42e2-a2e8-ceabaa234271.png%22%2C%22taskId%22%3A%22u8b110088-73b0-4ed7-8bcb-52b0ed37169%22%2C%22clientId%22%3A%22ueab694e8-573a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A94662%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1244%2C%22originHeight%22%3A406%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22~%2FLEARING%2FGITHUB-ROAM%20FDHUANG%20GH-PAGES%2012%20TEST%20GIT%20ON%20BRANCH%20GH-PAGES%20YOUR%20BRANCH%20IS%20AHEAD%20OF%20'ORIGIN%2FGH-PAGES'%20BY%202%20COMMITS.%20(USE%20%5C%22GIT%20PU%20C%20PUSH%5C%22%20TO%20PUBLISH%20YOUR%20LOCAL%20COMMITS)%20TO%20BE%20COMMITTED%3A%20CHANGES%20ET%20HEAD%20%3CFILE%3E....%5C%22%20TO%20UNSTAGE)%20%5C%22GIT%20(USE%20RESET%20MODIFIED%3A%20CHAPTERS%2F01-INTRODUCTION.MD%20CHAPTERS%2F01-INTRODUCTION.MD%20-%3E%20CHAPTERS%2F02-GITHUB-FUNDAMENTALS.MD%20COPIED%3A%20MODIFIED%3A%20GITHUB-ROAM.MD%20MODIFIED%3A%20INDEX.HTML%2012%20%20%20%2FLEARING%2FGITHUB-ROAM%20FDHUANG%20GH-PAGES%2012%20TEST%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A510.2954%2C%22y%22%3A10.5248%2C%22width%22%3A294.96504000000004%2C%22height%22%3A22.871715000000002%2C%22text%22%3A%22~%2FLEARING%2FGITHUB-ROAM%22%7D%2C%7B%22x%22%3A17.5776%2C%22y%22%3A10.966201%2C%22width%22%3A100.51420499999999%2C%22height%22%3A22.800477%2C%22text%22%3A%22FDHUANG%22%7D%2C%7B%22x%22%3A310.96863%2C%22y%22%3A11.902348%2C%22width%22%3A156.20409999999998%2C%22height%22%3A23.497359999999997%2C%22text%22%3A%22GH-PAGES%2012%22%7D%2C%7B%22x%22%3A189.3594%2C%22y%22%3A12.740311%2C%22width%22%3A52.81388000000001%2C%22height%22%3A18.552326%2C%22text%22%3A%22TEST%22%7D%2C%7B%22x%22%3A842.06024%2C%22y%22%3A11.21975%2C%22width%22%3A47.02265999999997%2C%22height%22%3A23.636592%2C%22text%22%3A%22GIT%22%7D%2C%7B%22x%22%3A2.658917%2C%22y%22%3A42.250767%2C%22width%22%3A129.943303%2C%22height%22%3A20.249266999999996%2C%22text%22%3A%22ON%20BRANCH%22%7D%2C%7B%22x%22%3A142.94495%2C%22y%22%3A43.964634%2C%22width%22%3A111.01945%2C%22height%22%3A20.189442000000007%2C%22text%22%3A%22GH-PAGES%22%7D%2C%7B%22x%22%3A3.397498%2C%22y%22%3A69.36657%2C%22width%22%3A760.996852%2C%22height%22%3A26.46441%2C%22text%22%3A%22YOUR%20BRANCH%20IS%20AHEAD%20OF%20'ORIGIN%2FGH-PAGES'%20BY%202%20COMMITS.%22%7D%2C%7B%22x%22%3A37.47717%2C%22y%22%3A100.50132%2C%22width%22%3A149.15061%2C%22height%22%3A23.160399999999996%2C%22text%22%3A%22(USE%20%5C%22GIT%20PU%22%7D%2C%7B%22x%22%3A162.65201%2C%22y%22%3A101.12271%2C%22width%22%3A510.12265%2C%22height%22%3A23.433496000000005%2C%22text%22%3A%22C%20PUSH%5C%22%20TO%20PUBLISH%20YOUR%20LOCAL%20COMMITS)%22%7D%2C%7B%22x%22%3A115.06722%2C%22y%22%3A129.7006%2C%22width%22%3A71.67172000000001%2C%22height%22%3A22.659750000000003%2C%22text%22%3A%22TO%20BE%22%7D%2C%7B%22x%22%3A198.64615%2C%22y%22%3A131.14542%2C%22width%22%3A137.05121%2C%22height%22%3A23.145459999999986%2C%22text%22%3A%22COMMITTED%3A%22%7D%2C%7B%22x%22%3A3.010651%2C%22y%22%3A132.5978%2C%22width%22%3A93.77933900000001%2C%22height%22%3A19.825709999999987%2C%22text%22%3A%22CHANGES%22%7D%2C%7B%22x%22%3A233.6955%2C%22y%22%3A159.26149%2C%22width%22%3A397.98119999999994%2C%22height%22%3A26.16576999999998%2C%22text%22%3A%22ET%20HEAD%20%3CFILE%3E....%5C%22%20TO%20UNSTAGE)%22%7D%2C%7B%22x%22%3A106.78227%2C%22y%22%3A159.39659%2C%22width%22%3A50.16277000000001%2C%22height%22%3A23.961929999999995%2C%22text%22%3A%22%5C%22GIT%22%7D%2C%7B%22x%22%3A36.334988%2C%22y%22%3A162.5799%2C%22width%22%3A52.790912%2C%22height%22%3A19.985539999999986%2C%22text%22%3A%22(USE%22%7D%2C%7B%22x%22%3A167.34029%2C%22y%22%3A163.14622%2C%22width%22%3A83.53242%2C%22height%22%3A20.524849999999986%2C%22text%22%3A%22RESET%22%7D%2C%7B%22x%22%3A112.93609%2C%22y%22%3A220.37692%2C%22width%22%3A125.23476000000001%2C%22height%22%3A21.60257999999999%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A279.8347%2C%22y%22%3A218.3974%2C%22width%22%3A382.1856%2C%22height%22%3A26.30153999999999%2C%22text%22%3A%22CHAPTERS%2F01-INTRODUCTION.MD%22%7D%2C%7B%22x%22%3A287.87073%2C%22y%22%3A248.69557%2C%22width%22%3A904.40577%2C%22height%22%3A25.448380000000014%2C%22text%22%3A%22CHAPTERS%2F01-INTRODUCTION.MD%20-%3E%20CHAPTERS%2F02-GITHUB-FUNDAMENTALS.MD%22%7D%2C%7B%22x%22%3A114.30507%2C%22y%22%3A250.43945%2C%22width%22%3A94.97702000000001%2C%22height%22%3A22.052249999999987%2C%22text%22%3A%22COPIED%3A%22%7D%2C%7B%22x%22%3A113.34017%2C%22y%22%3A279.88306%2C%22width%22%3A125.38423%2C%22height%22%3A24.988839999999982%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A286.61496%2C%22y%22%3A282.11362%2C%22width%22%3A187.69134000000003%2C%22height%22%3A21.378409999999974%2C%22text%22%3A%22GITHUB-ROAM.MD%22%7D%2C%7B%22x%22%3A113.15763%2C%22y%22%3A309.4408%2C%22width%22%3A125.89637%2C%22height%22%3A24.660799999999995%2C%22text%22%3A%22MODIFIED%3A%22%7D%2C%7B%22x%22%3A283.66962%2C%22y%22%3A311.0009%2C%22width%22%3A138.43349999999998%2C%22height%22%3A21.105759999999975%2C%22text%22%3A%22INDEX.HTML%22%7D%2C%7B%22x%22%3A443.13055%2C%22y%22%3A365.08853%2C%22width%22%3A361.4697499999999%2C%22height%22%3A31.449310000000025%2C%22text%22%3A%2212%20%20%20%2FLEARING%2FGITHUB-ROAM%22%7D%2C%7B%22x%22%3A20.80487%2C%22y%22%3A371.3539%2C%22width%22%3A98.24374%2C%22height%22%3A22.778759999999977%2C%22text%22%3A%22FDHUANG%22%7D%2C%7B%22x%22%3A309.27478%2C%22y%22%3A371.13055%2C%22width%22%3A162.77351999999996%2C%22height%22%3A25.087249999999983%2C%22text%22%3A%22GH-PAGES%2012%22%7D%2C%7B%22x%22%3A185.67822%2C%22y%22%3A373.39767%2C%22width%22%3A55.17695999999998%2C%22height%22%3A18.72172999999998%2C%22text%22%3A%22TEST%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u7c4df1b6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u4930bb00\" id=\"u4930bb00\"><br></p><p data-lake-id=\"u10de1612\" id=\"u10de1612\"><span data-lake-id=\"u13a57817\" id=\"u13a57817\">可以看到状态的变化是从黄色到绿色，即 unstage 到 add。</span></p><p data-lake-id=\"u1c31cdd2\" id=\"u1c31cdd2\"><span data-lake-id=\"u4d248a7f\" id=\"u4d248a7f\">​</span><br></p><h1 data-lake-id=\"eNtlD\" id=\"eNtlD\"><span data-lake-id=\"ua58e8535\" id=\"ua58e8535\">GitHub 与 Git</span></h1><blockquote data-lake-id=\"u5ed309c5\" id=\"u5ed309c5\"><p data-lake-id=\"u35d74694\" id=\"u35d74694\"><span data-lake-id=\"u870497ad\" id=\"u870497ad\">Git是一个分布式的版本控制系统，最初由Linus Torvalds编写，用作Linux内核代码的管理。在推出后，Git在其它项目中也取得了很大成功，尤其是在Ruby社区中。目前，包括Rubinius、Merb和Bitcoin在内的很多知名项目都使用了Git。Git同样可以被诸如Capistrano和Vlad the Deployer这样的部署工具所使用。</span></p><p data-lake-id=\"u94fb1a7d\" id=\"u94fb1a7d\"><span data-lake-id=\"udd9e0acd\" id=\"udd9e0acd\">​</span><br></p></blockquote><blockquote data-lake-id=\"u0ac0be82\" id=\"u0ac0be82\"><p data-lake-id=\"u2207c5cb\" id=\"u2207c5cb\"><span data-lake-id=\"ua9ee1f4c\" id=\"ua9ee1f4c\">GitHub可以托管各种git库，并提供一个web界面，但与其它像 SourceForge或Google Code这样的服务不同，GitHub的独特卖点在于从另外一个项目进行分支的简易性。为一个项目贡献代码非常简单：首先点击项目站点的“fork”的按钮，然后将代码检出并将修改加入到刚才分出的代码库中，最后通过内建的“pull request”机制向项目负责人申请代码合并。已经有人将GitHub称为代码玩家的MySpace。</span></p><p data-lake-id=\"ube0fe173\" id=\"ube0fe173\"><span data-lake-id=\"ub3616e69\" id=\"ub3616e69\">​</span><br></p></blockquote><h1 data-lake-id=\"lJWia\" id=\"lJWia\"><span data-lake-id=\"u48e58a85\" id=\"u48e58a85\">Git 提交信息及几种不同的规范</span></h1><p data-lake-id=\"u52cc3c08\" id=\"u52cc3c08\"><span data-lake-id=\"u9ada3eee\" id=\"u9ada3eee\">在团队协作中，使用版本管理工具 Git、SVN 几乎都是这个行业的标准。当我们提交代码的时候，需要编写提交信息（commit message）。</span></p><p data-lake-id=\"u3624c7df\" id=\"u3624c7df\"><span data-lake-id=\"ubcd438ef\" id=\"ubcd438ef\">而提交信息的主要用途是：</span><span data-lake-id=\"u072c376a\" id=\"u072c376a\">告诉这个项目的人，这次代码提交里做了些什么</span><span data-lake-id=\"u6b261baf\" id=\"u6b261baf\">。如，我更新了 React Native Elements 的版本，那么它就可以是：</span><span data-lake-id=\"u1f13fd79\" id=\"u1f13fd79\">[T] upgrade react native elements</span><span data-lake-id=\"u3de696ca\" id=\"u3de696ca\">。对应的我修改的代码就是：</span><span data-lake-id=\"u01c2c298\" id=\"u01c2c298\">package.json</span><span data-lake-id=\"uf51c7716\" id=\"uf51c7716\"> </span><span data-lake-id=\"u5bcdf201\" id=\"u5bcdf201\">和</span><span data-lake-id=\"uced78b24\" id=\"uced78b24\"> </span><span data-lake-id=\"u4f353e39\" id=\"u4f353e39\">yarn.lock</span><span data-lake-id=\"ud11c48f6\" id=\"ud11c48f6\"> </span><span data-lake-id=\"u6784b370\" id=\"u6784b370\">中的文件。一般来说，建议</span><span data-lake-id=\"ud4c33342\" id=\"ud4c33342\">小步提交</span><span data-lake-id=\"u997d3b09\" id=\"u997d3b09\">，即按自己的 Tasking 步骤来的提交，每一小步都有对应的提交信息。这样做的主要目的是：</span><span data-lake-id=\"udbe40f3a\" id=\"udbe40f3a\">防止一次修改中，修改过多的文件，导致后期修改、维护、撤销等等困难</span><span data-lake-id=\"uf59e50ff\" id=\"uf59e50ff\">。</span></p><p data-lake-id=\"u8e279cf9\" id=\"u8e279cf9\"><span data-lake-id=\"u1f2337d5\" id=\"u1f2337d5\">而对于不同的团队来说，都会遵循一定的规范，本文主要会介绍以下几种写法：</span></p><ul list=\"ua8216ed3\"><li fid=\"u54afee25\" data-lake-id=\"u5f5b78a8\" id=\"u5f5b78a8\"><span data-lake-id=\"uf005b9eb\" id=\"uf005b9eb\">工作写法</span></li><li fid=\"u54afee25\" data-lake-id=\"u6761e973\" id=\"u6761e973\"><span data-lake-id=\"u453d8cde\" id=\"u453d8cde\">常规写法</span></li><li fid=\"u54afee25\" data-lake-id=\"u76038cc6\" id=\"u76038cc6\"><span data-lake-id=\"u87ba97c9\" id=\"u87ba97c9\">开源库写法</span></li></ul><h1 data-lake-id=\"Zj1La\" id=\"Zj1La\"><span data-lake-id=\"u580b5c8e\" id=\"u580b5c8e\">Git工具推荐</span></h1><h2 data-lake-id=\"r5lD6\" id=\"r5lD6\"><span data-lake-id=\"u2c83139e\" id=\"u2c83139e\">SourceTree：</span></h2><p data-lake-id=\"ufdabc51c\" id=\"ufdabc51c\"><span data-lake-id=\"u4e8ee99e\" id=\"u4e8ee99e\" style=\"color: rgb(52, 73, 94)\">SourceTree 方便用来查看一些项目，寻找其中的一些问题。</span></p><p data-lake-id=\"ufa2ff146\" id=\"ufa2ff146\"><span data-lake-id=\"ueb566b29\" id=\"ueb566b29\" style=\"color: rgb(52, 73, 94)\">gitflow 分支合并、查看</span></p><p data-lake-id=\"u92f0ff38\" id=\"u92f0ff38\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649903156572-5d9828a7-61df-404e-8ae8-cb35c44c70f0.png%22%2C%22taskId%22%3A%22u89ff8403-c63e-4fb3-9d0e-2ead9efe57a%22%2C%22clientId%22%3A%22u2837663f-9cd5-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A503264%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1023%2C%22originHeight%22%3A681%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%2FUSERS%2FFDHUANG%2FWRITE%2FFE(GIT)%20SI%20%E5%9C%A8FINDER%20%E4%B8%AD%E6%98%BE%E7%A4%BA%20%E5%88%86%E6%94%AF%20%20%20%E5%90%88%E5%B9%B6%20%E6%8F%90%E4%BA%A4%20%E6%8A%93%E5%8F%96%20%E7%BB%88%E7%AB%AF%20%E8%AE%BE%E7%BD%AE%20%E6%8E%A8%E9%80%81%20%E6%8B%89%E5%8F%96%20%E6%9A%82%E5%AD%98%20%E5%B1%82%E7%BA%A7%E9%A1%BA%E5%BA%8F%20%E6%98%BE%E7%A4%BA%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%20%E6%89%80%E6%9C%89%E5%88%86%E6%94%AF%20%E8%B7%B3%E8%BD%AC%E5%88%B0%3A%20WORKSPACE%20%E6%8F%90%E4%BA%A4%20%E4%BD%9C%E8%80%85%20%E6%97%A5%E6%9C%9F%20%E5%9B%BE%E8%A1%A8%20%E6%8F%8F%E8%BF%B0%20%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%20PHODAL%20HUANG%3CH%40PHODAL.COM%3E%20%202017%E5%B9%B48%E6%9C%884%E6%97%A5%20%20%E4%B8%8A...%20503B642%20T%20ORIGIN%2FMASTER%20LY%20MASTER%20%E5%8E%86%E5%8F%B2%20MERGE%20PULL%20REQUEST%20%2316%20FRO...B8AD868%20PHODAL%20HUANG%3CH%40PHODAL.COM%3E%202017%E5%B9%B48%E6%9C%884%E6%97%A5%E4%B8%8A...%20%E6%90%9C%E7%B4%A2%20MODITY%20PIAOYIDAGE%3CLONGYIXIAOGE%40GMAIL...2017%E5%B9%B48%E6%9C%884%E6%97%A5%20%E4%B8%8A...%20E138D0B%20UPDATE%20ALL.JSON%20045FA19%20PHODAL%20HUANG%3CH%40PHODAL.COM%3E%202017%E5%B9%B47%E6%9C%8821%E6%97%A5...%20%E5%88%86%E6%94%AF%20%5BT%5D%20FIX%20TYPO%20PHODAL%20HUANG%3CH%40PHODAL.COM%3E%202017%E5%B9%B47%E6%9C%8820%E6%97%A5...%20E2F8BA2%20MERGE%20PULL%20REQUEST%20%2315%20FRO...%203954DOD%20PHODAL%20HUANG%3CH%40PHODAL.COM%3E%202017%E5%B9%B47%E6%9C%8820%E6%97%A5...%20%E6%A0%87%E7%AD%BE%20FIX%20TYPO%20SONG%20LI%3CBOLTOMLI%40USERS.NOREPLY...2017%E5%B9%B47%E6%9C%8820%E6%97%A5...%201D0611D%20%E4%B8%8D%E7%83%A6%E5%8D%95%E7%94%A8%E4%B8%8D%E7%94%9A%E5%A6%A5%E5%BD%93%20SONG%20LI%3CBOLTOMLI%40USERS.NOREPLY....2017%E5%B9%B47%E6%9C%8820%E6%97%A5...%20AC18129%20%E8%BF%9C%E7%AB%AF%20MERGE%20PULL%20REQUEST%20%2314%20FRO...%207E2C2AA%20PHODAL%20HUANG%3CH%40PHODAL.COM%3E%202017%E5%B9%B47%E6%9C%8820%E6%97%A5...%20SONG%20LI%3CBOLTOMLI%40USERS.NOREPLY....2017%E5%B9%B47%E6%9C%8820%E6%97%A5...%20FIX%20A%20FEW%20TYPOS%20AND%20GRAM...%20ODFE90D%20%E5%B7%B2%E8%B4%AE%E8%97%8F%20TAALUNNDATA%20HUDLA%20%E5%B7%B2%E4%BE%9D%E7%85%A7%E8%B7%AF%E5%BE%84%E6%8E%92%E5%BA%8F%20%E6%90%9C%E7%B4%A2%20%E5%AD%90%E6%A8%A1%E5%9D%97%20EBOOK.MD%20EBOOK.MD%20%E5%AD%90%E6%A0%91%20INDEX.HTML%20%E5%9D%971%3A%E8%A1%8C432-438%20%E5%9B%9E%E6%BB%9A%E5%8C%BA%E5%9D%97%20432%20432%20%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E4%B8%80%E8%A7%88%20433433%20434%20434%20-%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E5%89%8D%E5%A7%86%E6%9E%A2%E6%9E%B6%E4%B8%96%E7%95%8C%E9%87%8C%2C%E6%88%91%E4%B8%8D%E8%B4%A5%E8%87%AA%E8%B5%96%E6%98%AF%E6%9C%89%E4%B8%B0%E9%AB%98%E7%9A%84%E6%8D%B7%E5%88%A9%E7%BB%8F%E9%AA%8C%2C%E6%88%91%E5%8F%AA%E8%83%BD%E5%8E%BB%E5%88%86%E4%BA%AB%E6%88%91%E7%94%A8%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E6%A4%8D%E6%9E%B6%2C%E8%AF%BB%E8%80%85%E4%BB%AC%E5%86%8D%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8A%A5%E6%9E%B6%E6%9D%A5%20435%20%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E8%91%A1%E8%90%84%E6%9E%A2%E6%9E%B6%E4%B8%96%E7%95%8C%E9%87%8C%2C%E6%88%91%E4%B8%8D%E6%94%B6%E8%87%AA%E7%A7%B0%E6%98%AF%E6%9C%89%E4%B8%B0%E9%AB%98%E7%9A%84%E9%80%89%E5%9E%8B%E7%BB%8F%E9%AA%8C.%E6%88%91%E5%8F%AA%E8%83%BD%E5%8E%BB%E5%88%86%E4%BA%AB%E6%88%91%E7%94%A8%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E6%A1%86%E6%9E%B6%2C%E8%AF%BB%E8%80%85%E4%BB%AC%E5%86%8D%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E4%B8%8D%E5%90%8C%E7%9A%84%E6%A1%86%E6%9E%B6%E6%9D%A5%20435%20436%20436%20%23%23JQUERY%2C%E4%BD%BF%E7%94%A8%E7%94%9F%E6%80%81%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%20437%20%20437%20438%20438%20%5BT%5DFIX%20TYPO%20503B6%20%E6%8F%90%E4%BA%A4%3A%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A432.52097%2C%22y%22%3A25.247463%2C%22width%22%3A177.33573000000007%2C%22height%22%3A14.781071%2C%22text%22%3A%22%2FUSERS%2FFDHUANG%2FWRITE%2FFE(GIT)%22%7D%2C%7B%22x%22%3A279.22903%2C%22y%22%3A51.09322%2C%22width%22%3A61.627999999999986%2C%22height%22%3A23.573086000000004%2C%22text%22%3A%22SI%22%7D%2C%7B%22x%22%3A825.8361%2C%22y%22%3A80.276855%2C%22width%22%3A87.83929999999998%2C%22height%22%3A14.179654999999997%2C%22text%22%3A%22%E5%9C%A8FINDER%20%E4%B8%AD%E6%98%BE%E7%A4%BA%22%7D%2C%7B%22x%22%3A278.2592%2C%22y%22%3A80.47471%2C%22width%22%3A64.53467999999998%2C%22height%22%3A14.200779999999995%2C%22text%22%3A%22%E5%88%86%E6%94%AF%20%20%20%E5%90%88%E5%B9%B6%22%7D%2C%7B%22x%22%3A36.370735%2C%22y%22%3A80.544075%2C%22width%22%3A26.271134999999994%2C%22height%22%3A13.727050999999989%2C%22text%22%3A%22%E6%8F%90%E4%BA%A4%22%7D%2C%7B%22x%22%3A198.58223%2C%22y%22%3A80.882484%2C%22width%22%3A23.94211999999999%2C%22height%22%3A13.194575999999998%2C%22text%22%3A%22%E6%8A%93%E5%8F%96%22%7D%2C%7B%22x%22%3A924.2731%2C%22y%22%3A80.74538%2C%22width%22%3A25.655369999999948%2C%22height%22%3A13.109036000000003%2C%22text%22%3A%22%E7%BB%88%E7%AB%AF%22%7D%2C%7B%22x%22%3A965.3623%2C%22y%22%3A80.765274%2C%22width%22%3A23.533450000000016%2C%22height%22%3A12.968086%2C%22text%22%3A%22%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A151.73463%2C%22y%22%3A81.14631%2C%22width%22%3A30.91932%2C%22height%22%3A12.676299999999998%2C%22text%22%3A%22%E6%8E%A8%E9%80%81%22%7D%2C%7B%22x%22%3A117.5694%2C%22y%22%3A81.31177%2C%22width%22%3A25.20419000000001%2C%22height%22%3A12.66998000000001%2C%22text%22%3A%22%E6%8B%89%E5%8F%96%22%7D%2C%7B%22x%22%3A400.36957%2C%22y%22%3A81.85088%2C%22width%22%3A23.61782999999997%2C%22height%22%3A11.80677%2C%22text%22%3A%22%E6%9A%82%E5%AD%98%22%7D%2C%7B%22x%22%3A381.71432%2C%22y%22%3A103.85108%2C%22width%22%3A46.02543000000003%2C%22height%22%3A12.884600000000006%2C%22text%22%3A%22%E5%B1%82%E7%BA%A7%E9%A1%BA%E5%BA%8F%22%7D%2C%7B%22x%22%3A272.66675%2C%22y%22%3A103.973694%2C%22width%22%3A69.49925000000002%2C%22height%22%3A13.022186000000005%2C%22text%22%3A%22%E6%98%BE%E7%A4%BA%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%22%7D%2C%7B%22x%22%3A180.0782%2C%22y%22%3A103.975044%2C%22width%22%3A47.387069999999994%2C%22height%22%3A12.832451000000006%2C%22text%22%3A%22%E6%89%80%E6%9C%89%E5%88%86%E6%94%AF%22%7D%2C%7B%22x%22%3A844.33014%2C%22y%22%3A104.29245%2C%22width%22%3A39.37261999999998%2C%22height%22%3A11.968474999999998%2C%22text%22%3A%22%E8%B7%B3%E8%BD%AC%E5%88%B0%3A%22%7D%2C%7B%22x%22%3A62.407314%2C%22y%22%3A110.60053%2C%22width%22%3A72.10231599999999%2C%22height%22%3A12.526699999999991%2C%22text%22%3A%22WORKSPACE%22%7D%2C%7B%22x%22%3A630.9903%2C%22y%22%3A127.17616%2C%22width%22%3A29.449949999999944%2C%22height%22%3A14.326360000000008%2C%22text%22%3A%22%E6%8F%90%E4%BA%A4%22%7D%2C%7B%22x%22%3A699.5195%2C%22y%22%3A127.300804%2C%22width%22%3A24.769999999999982%2C%22height%22%3A14.097985999999992%2C%22text%22%3A%22%E4%BD%9C%E8%80%85%22%7D%2C%7B%22x%22%3A895.2215%2C%22y%22%3A127.45692%2C%22width%22%3A23.204830000000015%2C%22height%22%3A12.417550000000006%2C%22text%22%3A%22%E6%97%A5%E6%9C%9F%22%7D%2C%7B%22x%22%3A169.72821%2C%22y%22%3A128.17072%2C%22width%22%3A24.01167000000001%2C%22height%22%3A13.232490000000013%2C%22text%22%3A%22%E5%9B%BE%E8%A1%A8%22%7D%2C%7B%22x%22%3A473.5654%2C%22y%22%3A128.40132%2C%22width%22%3A24.23199999999997%2C%22height%22%3A12.55277000000001%2C%22text%22%3A%22%E6%8F%8F%E8%BF%B0%22%7D%2C%7B%22x%22%3A62.817905%2C%22y%22%3A136.29947%2C%22width%22%3A45.97533099999999%2C%22height%22%3A12.80847%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%22%7D%2C%7B%22x%22%3A698.693%2C%22y%22%3A146.78249%2C%22width%22%3A297.88146000000006%2C%22height%22%3A15.867930000000001%2C%22text%22%3A%22PHODAL%20HUANG%3CH%40PHODAL.COM%3E%20%202017%E5%B9%B48%E6%9C%884%E6%97%A5%20%20%E4%B8%8A...%22%7D%2C%7B%22x%22%3A629.66675%2C%22y%22%3A148.51791%2C%22width%22%3A55.54875000000004%2C%22height%22%3A12.506460000000004%2C%22text%22%3A%22503B642%22%7D%2C%7B%22x%22%3A535.7403%2C%22y%22%3A149.40166%2C%22width%22%3A79.57169999999996%2C%22height%22%3A12.093850000000003%2C%22text%22%3A%22T%20ORIGIN%2FMASTER%22%7D%2C%7B%22x%22%3A481.72452%2C%22y%22%3A149.8184%2C%22width%22%3A44.361279999999965%2C%22height%22%3A11.238650000000007%2C%22text%22%3A%22LY%20MASTER%22%7D%2C%7B%22x%22%3A62.37074%2C%22y%22%3A159.75073%2C%22width%22%3A23.410650000000004%2C%22height%22%3A12.971789999999999%2C%22text%22%3A%22%E5%8E%86%E5%8F%B2%22%7D%2C%7B%22x%22%3A471.28647%2C%22y%22%3A167.44534%2C%22width%22%3A210.68808%2C%22height%22%3A12.72284000000002%2C%22text%22%3A%22MERGE%20PULL%20REQUEST%20%2316%20FRO...B8AD868%22%7D%2C%7B%22x%22%3A698.2496%2C%22y%22%3A168.29369%2C%22width%22%3A168.52616%2C%22height%22%3A12.80301%2C%22text%22%3A%22PHODAL%20HUANG%3CH%40PHODAL.COM%3E%22%7D%2C%7B%22x%22%3A884.44684%2C%22y%22%3A168.96011%2C%22width%22%3A111.98856%2C%22height%22%3A13.076270000000022%2C%22text%22%3A%222017%E5%B9%B48%E6%9C%884%E6%97%A5%E4%B8%8A...%22%7D%2C%7B%22x%22%3A62.80835%2C%22y%22%3A183.57976%2C%22width%22%3A23.802979999999998%2C%22height%22%3A12.189220000000006%2C%22text%22%3A%22%E6%90%9C%E7%B4%A2%22%7D%2C%7B%22x%22%3A472.29312%2C%22y%22%3A186.92152%2C%22width%22%3A36.569920000000025%2C%22height%22%3A11.22663%2C%22text%22%3A%22MODITY%22%7D%2C%7B%22x%22%3A698.12225%2C%22y%22%3A187.91544%2C%22width%22%3A297.23215000000005%2C%22height%22%3A12.76982000000001%2C%22text%22%3A%22PIAOYIDAGE%3CLONGYIXIAOGE%40GMAIL...2017%E5%B9%B48%E6%9C%884%E6%97%A5%20%E4%B8%8A...%22%7D%2C%7B%22x%22%3A629.5394%2C%22y%22%3A188.01337%2C%22width%22%3A49.707899999999995%2C%22height%22%3A11.39058%2C%22text%22%3A%22E138D0B%22%7D%2C%7B%22x%22%3A472.28003%2C%22y%22%3A206.30815%2C%22width%22%3A81.66597000000002%2C%22height%22%3A10.949539999999985%2C%22text%22%3A%22UPDATE%20ALL.JSON%22%7D%2C%7B%22x%22%3A629.9641%2C%22y%22%3A206.32849%2C%22width%22%3A45.873359999999934%2C%22height%22%3A11.197690000000023%2C%22text%22%3A%22045FA19%22%7D%2C%7B%22x%22%3A697.8829%2C%22y%22%3A206.86926%2C%22width%22%3A173.00060000000008%2C%22height%22%3A12.51545999999999%2C%22text%22%3A%22PHODAL%20HUANG%3CH%40PHODAL.COM%3E%22%7D%2C%7B%22x%22%3A889.89856%2C%22y%22%3A207.52263%2C%22width%22%3A91.28654000000006%2C%22height%22%3A11.277749999999997%2C%22text%22%3A%222017%E5%B9%B47%E6%9C%8821%E6%97%A5...%22%7D%2C%7B%22x%22%3A59.652054%2C%22y%22%3A216.14854%2C%22width%22%3A27.581095999999995%2C%22height%22%3A14.300479999999993%2C%22text%22%3A%22%E5%88%86%E6%94%AF%22%7D%2C%7B%22x%22%3A472.49963%2C%22y%22%3A224.42717%2C%22width%22%3A60.39107000000001%2C%22height%22%3A12.121020000000016%2C%22text%22%3A%22%5BT%5D%20FIX%20TYPO%22%7D%2C%7B%22x%22%3A698.33826%2C%22y%22%3A225.73572%2C%22width%22%3A172.45133999999996%2C%22height%22%3A12.393830000000008%2C%22text%22%3A%22PHODAL%20HUANG%3CH%40PHODAL.COM%3E%22%7D%2C%7B%22x%22%3A892.82196%2C%22y%22%3A226.14047%2C%22width%22%3A90.68420000000003%2C%22height%22%3A11.99066000000002%2C%22text%22%3A%222017%E5%B9%B47%E6%9C%8820%E6%97%A5...%22%7D%2C%7B%22x%22%3A628.95%2C%22y%22%3A226.41615%2C%22width%22%3A47.6037%2C%22height%22%3A10.997410000000002%2C%22text%22%3A%22E2F8BA2%22%7D%2C%7B%22x%22%3A471.97946%2C%22y%22%3A243.83882%2C%22width%22%3A209.84144000000003%2C%22height%22%3A12.912860000000023%2C%22text%22%3A%22MERGE%20PULL%20REQUEST%20%2315%20FRO...%203954DOD%22%7D%2C%7B%22x%22%3A697.44574%2C%22y%22%3A245.04218%2C%22width%22%3A171.14405999999997%2C%22height%22%3A13.197050000000019%2C%22text%22%3A%22PHODAL%20HUANG%3CH%40PHODAL.COM%3E%22%7D%2C%7B%22x%22%3A893.5099%2C%22y%22%3A245.47945%2C%22width%22%3A89.92869999999994%2C%22height%22%3A11.434089999999998%2C%22text%22%3A%222017%E5%B9%B47%E6%9C%8820%E6%97%A5...%22%7D%2C%7B%22x%22%3A62.190308%2C%22y%22%3A254.21034%2C%22width%22%3A25.155647000000002%2C%22height%22%3A12.704579999999993%2C%22text%22%3A%22%E6%A0%87%E7%AD%BE%22%7D%2C%7B%22x%22%3A472.2692%2C%22y%22%3A264.0102%2C%22width%22%3A45.34426000000002%2C%22height%22%3A11.242419999999981%2C%22text%22%3A%22FIX%20TYPO%22%7D%2C%7B%22x%22%3A698.4805%2C%22y%22%3A264.58554%2C%22width%22%3A285.30100000000004%2C%22height%22%3A12.456600000000037%2C%22text%22%3A%22SONG%20LI%3CBOLTOMLI%40USERS.NOREPLY...2017%E5%B9%B47%E6%9C%8820%E6%97%A5...%22%7D%2C%7B%22x%22%3A627.94635%2C%22y%22%3A264.73767%2C%22width%22%3A48.258789999999976%2C%22height%22%3A11.208010000000002%2C%22text%22%3A%221D0611D%22%7D%2C%7B%22x%22%3A472.33154%2C%22y%22%3A280.96396%2C%22width%22%3A92.63235999999995%2C%22height%22%3A12.358609999999999%2C%22text%22%3A%22%E4%B8%8D%E7%83%A6%E5%8D%95%E7%94%A8%E4%B8%8D%E7%94%9A%E5%A6%A5%E5%BD%93%22%7D%2C%7B%22x%22%3A697.87054%2C%22y%22%3A282.88205%2C%22width%22%3A286.32172%2C%22height%22%3A12.901549999999986%2C%22text%22%3A%22SONG%20LI%3CBOLTOMLI%40USERS.NOREPLY....2017%E5%B9%B47%E6%9C%8820%E6%97%A5...%22%7D%2C%7B%22x%22%3A629.25714%2C%22y%22%3A283.25153%2C%22width%22%3A47.25469999999996%2C%22height%22%3A11.967649999999992%2C%22text%22%3A%22AC18129%22%7D%2C%7B%22x%22%3A62.33905%2C%22y%22%3A291.71478%2C%22width%22%3A24.211280000000002%2C%22height%22%3A11.988339999999994%2C%22text%22%3A%22%E8%BF%9C%E7%AB%AF%22%7D%2C%7B%22x%22%3A472.5327%2C%22y%22%3A301.09927%2C%22width%22%3A205.1531%2C%22height%22%3A13.706430000000012%2C%22text%22%3A%22MERGE%20PULL%20REQUEST%20%2314%20FRO...%207E2C2AA%22%7D%2C%7B%22x%22%3A698.4077%2C%22y%22%3A302.59363%2C%22width%22%3A172.14200000000005%2C%22height%22%3A11.712739999999997%2C%22text%22%3A%22PHODAL%20HUANG%3CH%40PHODAL.COM%3E%22%7D%2C%7B%22x%22%3A889.8919%2C%22y%22%3A302.96838%2C%22width%22%3A93.25007000000005%2C%22height%22%3A12.125819999999976%2C%22text%22%3A%222017%E5%B9%B47%E6%9C%8820%E6%97%A5...%22%7D%2C%7B%22x%22%3A698.00525%2C%22y%22%3A321.33334%2C%22width%22%3A285.1575499999999%2C%22height%22%3A13.466529999999977%2C%22text%22%3A%22SONG%20LI%3CBOLTOMLI%40USERS.NOREPLY....2017%E5%B9%B47%E6%9C%8820%E6%97%A5...%22%7D%2C%7B%22x%22%3A473.6297%2C%22y%22%3A321.49286%2C%22width%22%3A203.78722999999997%2C%22height%22%3A12.405640000000005%2C%22text%22%3A%22FIX%20A%20FEW%20TYPOS%20AND%20GRAM...%20ODFE90D%22%7D%2C%7B%22x%22%3A62.60316%2C%22y%22%3A329.767%2C%22width%22%3A35.18921999999999%2C%22height%22%3A12.116420000000005%2C%22text%22%3A%22%E5%B7%B2%E8%B4%AE%E8%97%8F%22%7D%2C%7B%22x%22%3A473.25632%2C%22y%22%3A338.692%2C%22width%22%3A97.11737999999997%2C%22height%22%3A9.397400000000005%2C%22text%22%3A%22TAALUNNDATA%20HUDLA%22%7D%2C%7B%22x%22%3A178.95651%2C%22y%22%3A352.11307%2C%22width%22%3A81.73603%2C%22height%22%3A12.902710000000013%2C%22text%22%3A%22%E5%B7%B2%E4%BE%9D%E7%85%A7%E8%B7%AF%E5%BE%84%E6%8E%92%E5%BA%8F%22%7D%2C%7B%22x%22%3A856.4389%2C%22y%22%3A354.3042%2C%22width%22%3A24.10360000000003%2C%22height%22%3A12.175400000000025%2C%22text%22%3A%22%E6%90%9C%E7%B4%A2%22%7D%2C%7B%22x%22%3A62.90688%2C%22y%22%3A366.2131%2C%22width%22%3A35.004940000000005%2C%22height%22%3A12.72284000000002%2C%22text%22%3A%22%E5%AD%90%E6%A8%A1%E5%9D%97%22%7D%2C%7B%22x%22%3A193.03938%2C%22y%22%3A379.14157%2C%22width%22%3A55.100390000000004%2C%22height%22%3A12.815249999999992%2C%22text%22%3A%22EBOOK.MD%22%7D%2C%7B%22x%22%3A360.11795%2C%22y%22%3A390.78595%2C%22width%22%3A57.2756%2C%22height%22%3A12.553799999999967%2C%22text%22%3A%22EBOOK.MD%22%7D%2C%7B%22x%22%3A62.12148%2C%22y%22%3A404.24643%2C%22width%22%3A24.769460000000002%2C%22height%22%3A13.082730000000026%2C%22text%22%3A%22%E5%AD%90%E6%A0%91%22%7D%2C%7B%22x%22%3A192.24069%2C%22y%22%3A406.47824%2C%22width%22%3A58.332629999999995%2C%22height%22%3A12.789559999999994%2C%22text%22%3A%22INDEX.HTML%22%7D%2C%7B%22x%22%3A398.74466%2C%22y%22%3A421.56668%2C%22width%22%3A110.92554000000001%2C%22height%22%3A13.506019999999978%2C%22text%22%3A%22%E5%9D%971%3A%E8%A1%8C432-438%22%7D%2C%7B%22x%22%3A934.66046%2C%22y%22%3A422.724%2C%22width%22%3A48.95819000000006%2C%22height%22%3A11.38348000000002%2C%22text%22%3A%22%E5%9B%9E%E6%BB%9A%E5%8C%BA%E5%9D%97%22%7D%2C%7B%22x%22%3A337.2306%2C%22y%22%3A443.25415%2C%22width%22%3A49.52820000000003%2C%22height%22%3A11.903020000000026%2C%22text%22%3A%22432%20432%22%7D%2C%7B%22x%22%3A405.78253%2C%22y%22%3A443.52026%2C%22width%22%3A61.941989999999976%2C%22height%22%3A12.208680000000015%2C%22text%22%3A%22%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E4%B8%80%E8%A7%88%22%7D%2C%7B%22x%22%3A337.9686%2C%22y%22%3A458.7604%2C%22width%22%3A48.97064%2C%22height%22%3A11.831500000000005%2C%22text%22%3A%22433433%22%7D%2C%7B%22x%22%3A338.1257%2C%22y%22%3A474.22638%2C%22width%22%3A48.176300000000026%2C%22height%22%3A11.945249999999987%2C%22text%22%3A%22434%20434%22%7D%2C%7B%22x%22%3A405.67834%2C%22y%22%3A486.81992%2C%22width%22%3A589.4919600000001%2C%22height%22%3A16.09129999999999%2C%22text%22%3A%22-%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E5%89%8D%E5%A7%86%E6%9E%A2%E6%9E%B6%E4%B8%96%E7%95%8C%E9%87%8C%2C%E6%88%91%E4%B8%8D%E8%B4%A5%E8%87%AA%E8%B5%96%E6%98%AF%E6%9C%89%E4%B8%B0%E9%AB%98%E7%9A%84%E6%8D%B7%E5%88%A9%E7%BB%8F%E9%AA%8C%2C%E6%88%91%E5%8F%AA%E8%83%BD%E5%8E%BB%E5%88%86%E4%BA%AB%E6%88%91%E7%94%A8%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E6%A4%8D%E6%9E%B6%2C%E8%AF%BB%E8%80%85%E4%BB%AC%E5%86%8D%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8A%A5%E6%9E%B6%E6%9D%A5%22%7D%2C%7B%22x%22%3A338.8959%2C%22y%22%3A490.2705%2C%22width%22%3A22.647530000000017%2C%22height%22%3A9.68164999999999%2C%22text%22%3A%22435%22%7D%2C%7B%22x%22%3A405.1557%2C%22y%22%3A502.27167%2C%22width%22%3A590.6456999999999%2C%22height%22%3A15.749570000000062%2C%22text%22%3A%22%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E8%91%A1%E8%90%84%E6%9E%A2%E6%9E%B6%E4%B8%96%E7%95%8C%E9%87%8C%2C%E6%88%91%E4%B8%8D%E6%94%B6%E8%87%AA%E7%A7%B0%E6%98%AF%E6%9C%89%E4%B8%B0%E9%AB%98%E7%9A%84%E9%80%89%E5%9E%8B%E7%BB%8F%E9%AA%8C.%E6%88%91%E5%8F%AA%E8%83%BD%E5%8E%BB%E5%88%86%E4%BA%AB%E6%88%91%E7%94%A8%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E6%A1%86%E6%9E%B6%2C%E8%AF%BB%E8%80%85%E4%BB%AC%E5%86%8D%E7%BB%93%E5%90%88%E5%85%B6%E4%BB%96%E4%B8%8D%E5%90%8C%E7%9A%84%E6%A1%86%E6%9E%B6%E6%9D%A5%22%7D%2C%7B%22x%22%3A364.2363%2C%22y%22%3A504.66034%2C%22width%22%3A22.510069999999985%2C%22height%22%3A10.88769000000002%2C%22text%22%3A%22435%22%7D%2C%7B%22x%22%3A338.28012%2C%22y%22%3A519.45135%2C%22width%22%3A50.16278%2C%22height%22%3A12.321949999999902%2C%22text%22%3A%22436%20436%22%7D%2C%7B%22x%22%3A405.07733%2C%22y%22%3A533.9111%2C%22width%22%3A156.95171999999997%2C%22height%22%3A12.750900000000001%2C%22text%22%3A%22%23%23JQUERY%2C%E4%BD%BF%E7%94%A8%E7%94%9F%E6%80%81%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%22%7D%2C%7B%22x%22%3A338.62918%2C%22y%22%3A534.2009%2C%22width%22%3A49.928679999999986%2C%22height%22%3A12.77329999999995%2C%22text%22%3A%22437%20%20437%22%7D%2C%7B%22x%22%3A338.24564%2C%22y%22%3A550.0106%2C%22width%22%3A49.54671999999999%2C%22height%22%3A11.101500000000101%2C%22text%22%3A%22438%20438%22%7D%2C%7B%22x%22%3A227.87366%2C%22y%22%3A575.2174%2C%22width%22%3A60.51678000000001%2C%22height%22%3A14.03589999999997%2C%22text%22%3A%22%5BT%5DFIX%20TYPO%22%7D%2C%7B%22x%22%3A284.95502%2C%22y%22%3A634.711%2C%22width%22%3A41.502440000000036%2C%22height%22%3A15.228399999999965%2C%22text%22%3A%22503B6%22%7D%2C%7B%22x%22%3A237.65358%2C%22y%22%3A636.1446%2C%22width%22%3A35.04369%2C%22height%22%3A15.17730000000006%2C%22text%22%3A%22%E6%8F%90%E4%BA%A4%3A%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ue6bd8f05%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u83300d5a\" id=\"u83300d5a\"><br></p><p data-lake-id=\"u8429c2f5\" id=\"u8429c2f5\"><span data-lake-id=\"u8fbf3c69\" id=\"u8fbf3c69\">来源：《GitHub漫游指南》</span></p><p data-lake-id=\"u1987a241\" id=\"u1987a241\"><a href=\"https://github.phodal.com/\" target=\"_blank\" data-lake-id=\"u3fb6808d\" id=\"u3fb6808d\"><span data-lake-id=\"u547d3e05\" id=\"u547d3e05\">https://github.phodal.com/</span></a></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 1266,
    "created_at": "2022-04-14T01:46:47.000Z",
    "updated_at": "2023-07-27T02:09:41.000Z",
    "content_updated_at": "2023-07-27T02:09:41.000Z",
    "published_at": "2022-04-14T02:32:17.000Z",
    "first_published_at": "2022-04-14T02:06:47.183Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 927989171,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73437547,
    "type": "Doc",
    "slug": "qeueqt",
    "title": "使用nodejs 打包网址为exe端",
    "description": "tags: [nodejs,打包,exe]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net安装npm install nativefier -g使用设置 npm 源为npm config set registry...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u9ba7467b\" class=\"ne-p\"><span class=\"ne-text\">tags: [nodejs,打包,exe]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"hhAo6\" class=\"ne-hr\"><h1 id=\"p1frl\"><span class=\"ne-text\">安装<br /></span></h1><pre data-language=\"shell\" id=\"sO2Y4\" class=\"ne-codeblock language-shell\"><code>npm install nativefier -g</code></pre><h1 id=\"qPi5U\"><span class=\"ne-text\">使用</span></h1><p id=\"u3b74421c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">设置 npm 源为</span></p><pre data-language=\"shell\" id=\"T6Lwl\" class=\"ne-codeblock language-shell\"><code>npm config set registry https://registry.npm.taobao.org/</code></pre><p id=\"u57306d60\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在 nativefier 后加上需要转换的网站地址, 比如:</span></p><pre data-language=\"shell\" id=\"I9o1y\" class=\"ne-codeblock language-shell\"><code> nativefier &quot;https://www.zhihu.com/&quot;</code></pre><p id=\"u74186992\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">第一次打包需要下载 Eletron 框架, 很慢, 要有耐心......</span></p><pre data-language=\"shell\" id=\"OUvZs\" class=\"ne-codeblock language-shell\"><code>nativefier --name &quot;恒星C端&quot; &quot;https://www.toushivip.com/tshxs&quot;\nnativefier --name &quot;恒星C端&quot; &quot;C:\\Users\\Administrator\\Desktop\\icon.ico&quot;</code></pre><pre data-language=\"shell\" id=\"XdhCs\" class=\"ne-codeblock language-shell\"><code>nativefier –name “blog” “https://www.leixuesong.cn/”\n\nnativefier –icon &lt;path&gt;：设置图标\nicon参数 \nWindows环境下为.ico文件\nLinux下为.png\nMac下 icon参数可以是a .icns或.png文件\n\n--app-copyright ：应用的版权信息\n\n-p, --platform &lt;value&gt;：指定输出不同系统的应用，可选参数linux、windows、osx。\n\n-m, –show-menu-bar：指定是否应该显示菜单栏。\n\n--disable-context-menu：禁用上下文菜单\n\n--disable-dev-tools:停用Chrome开发者工具\n\n--clear-cache:防止应用程序在两次启动之间保留缓存。\n\n--tray:托盘,防止用户点击右上角关闭按钮后直接关闭程序，而是缩小到右下角的托盘中。\n\n--always-on-top：总是在最前面显示。\n\n--maximize：开始的时候最大化。\n\n--full-screen：使打包的应用全屏启动。\n\n--app-version &lt;value&gt;：应用程序的发行版本。\n\n–width &lt;value&gt;：打包应用程序的宽度，默认为1280px。\n\n–height &lt;value&gt;：打包应用程序的高度，默认为800px。\n\n–min-width &lt;value&gt;：打包应用程序的最小宽度，默认为0。\n\n–min-height &lt;value&gt;：打包应用程序的最小高度，默认为0。\n\n–max-width &lt;value&gt;：打包应用程序的最大宽度，默认为无限制。\n\n–max-height &lt;value&gt;：打包应用程序的最大高度，默认为无限制。\n\n–x &lt;value&gt;：打包的应用程序窗口的X位置。\n\n–y &lt;value&gt;：打包的应用程序窗口的Y位置。\n\n-a, --arch &lt;value&gt; 处理器架构\n\n示例：\n\n nativefier  \n\t--arch &quot;x64&quot; \n\t--platform &quot;windows&quot; \n\t--icon D:\\temp\\favicon.ico //一定要有图片，不然会报错\n\t--name &quot;weixin&quot; \n\t&quot;https://mp.weixin.qq.com/&quot; //网站地址\n\t--maximize\t//开始最大化\n\t--always-on-top //最前端显示\n\t--clear-cache  //防止缓存\n\t--app-copyright &quot;在这里填自己的就行了，也没找到在哪里显示&quot;\n\t--app-version 1  //这里好像只能填数字，不过也没啥用，没找到在哪里显示\n\t--show-menu-bar //英文的，感觉没啥用，还挺丑\n\t--disable-dev-tools\n\t--tray //比较有用的\n\tD:\\temp\\  //最后指定文件的输出目录\n\t\n\tcmd不能换行执行一句，会出错...\n\t\n\tnativefier --arch &quot;x64&quot; --platform &quot;windows&quot; --icon D:\\temp\\favicon.ico --name &quot;weixin&quot; &quot;https://mp.weixin.qq.com/&quot; --maximize --app-copyright &quot;微信公众号&quot; --app-version 1 --show-menu-bar --disable-dev-tools --tray D:\\temp\\\n\n</code></pre></div>",
    "body": "tags: [nodejs,打包,exe]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"p1frl\"></a>\n# 安装<br /><br />\n```shell\nnpm install nativefier -g\n```\n<a name=\"qPi5U\"></a>\n# 使用\n设置 npm 源为\n```shell\nnpm config set registry https://registry.npm.taobao.org/\n```\n在 nativefier 后加上需要转换的网站地址, 比如:\n```shell\n nativefier \"https://www.zhihu.com/\"\n```\n第一次打包需要下载 Eletron 框架, 很慢, 要有耐心......\n```shell\nnativefier --name \"恒星C端\" \"https://www.toushivip.com/tshxs\"\nnativefier --name \"恒星C端\" \"C:\\Users\\Administrator\\Desktop\\icon.ico\"\n```\n```shell\nnativefier –name “blog” “https://www.leixuesong.cn/”\n\nnativefier –icon <path>：设置图标\nicon参数 \nWindows环境下为.ico文件\nLinux下为.png\nMac下 icon参数可以是a .icns或.png文件\n\n--app-copyright ：应用的版权信息\n\n-p, --platform <value>：指定输出不同系统的应用，可选参数linux、windows、osx。\n\n-m, –show-menu-bar：指定是否应该显示菜单栏。\n\n--disable-context-menu：禁用上下文菜单\n\n--disable-dev-tools:停用Chrome开发者工具\n\n--clear-cache:防止应用程序在两次启动之间保留缓存。\n\n--tray:托盘,防止用户点击右上角关闭按钮后直接关闭程序，而是缩小到右下角的托盘中。\n\n--always-on-top：总是在最前面显示。\n\n--maximize：开始的时候最大化。\n\n--full-screen：使打包的应用全屏启动。\n\n--app-version <value>：应用程序的发行版本。\n\n–width <value>：打包应用程序的宽度，默认为1280px。\n\n–height <value>：打包应用程序的高度，默认为800px。\n\n–min-width <value>：打包应用程序的最小宽度，默认为0。\n\n–min-height <value>：打包应用程序的最小高度，默认为0。\n\n–max-width <value>：打包应用程序的最大宽度，默认为无限制。\n\n–max-height <value>：打包应用程序的最大高度，默认为无限制。\n\n–x <value>：打包的应用程序窗口的X位置。\n\n–y <value>：打包的应用程序窗口的Y位置。\n\n-a, --arch <value> 处理器架构\n\n示例：\n\n nativefier  \n\t--arch \"x64\" \n\t--platform \"windows\" \n\t--icon D:\\temp\\favicon.ico //一定要有图片，不然会报错\n\t--name \"weixin\" \n\t\"https://mp.weixin.qq.com/\" //网站地址\n\t--maximize\t//开始最大化\n\t--always-on-top //最前端显示\n\t--clear-cache  //防止缓存\n\t--app-copyright \"在这里填自己的就行了，也没找到在哪里显示\"\n\t--app-version 1  //这里好像只能填数字，不过也没啥用，没找到在哪里显示\n\t--show-menu-bar //英文的，感觉没啥用，还挺丑\n\t--disable-dev-tools\n\t--tray //比较有用的\n\tD:\\temp\\  //最后指定文件的输出目录\n\t\n\tcmd不能换行执行一句，会出错...\n\t\n\tnativefier --arch \"x64\" --platform \"windows\" --icon D:\\temp\\favicon.ico --name \"weixin\" \"https://mp.weixin.qq.com/\" --maximize --app-copyright \"微信公众号\" --app-version 1 --show-menu-bar --disable-dev-tools --tray D:\\temp\\\n\n\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u9ba7467b\" class=\"ne-p\"><span class=\"ne-text\">tags: [nodejs,打包,exe]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"hhAo6\" class=\"ne-hr\"><h1 id=\"p1frl\"><span class=\"ne-text\">安装<br /></span></h1><pre data-language=\"shell\" id=\"sO2Y4\" class=\"ne-codeblock language-shell\">npm install nativefier -g</pre><h1 id=\"qPi5U\"><span class=\"ne-text\">使用</span></h1><p id=\"u3b74421c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">设置 npm 源为</span></p><pre data-language=\"shell\" id=\"T6Lwl\" class=\"ne-codeblock language-shell\">npm config set registry https://registry.npm.taobao.org/</pre><p id=\"u57306d60\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在 nativefier 后加上需要转换的网站地址, 比如:</span></p><pre data-language=\"shell\" id=\"I9o1y\" class=\"ne-codeblock language-shell\"> nativefier &quot;https://www.zhihu.com/&quot;</pre><p id=\"u74186992\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">第一次打包需要下载 Eletron 框架, 很慢, 要有耐心......</span></p><pre data-language=\"shell\" id=\"OUvZs\" class=\"ne-codeblock language-shell\">nativefier --name &quot;恒星C端&quot; &quot;https://www.toushivip.com/tshxs&quot;\nnativefier --name &quot;恒星C端&quot; &quot;C:\\Users\\Administrator\\Desktop\\icon.ico&quot;</pre><pre data-language=\"shell\" id=\"XdhCs\" class=\"ne-codeblock language-shell\">nativefier –name “blog” “https://www.leixuesong.cn/”\n\nnativefier –icon &lt;path&gt;：设置图标\nicon参数 \nWindows环境下为.ico文件\nLinux下为.png\nMac下 icon参数可以是a .icns或.png文件\n\n--app-copyright ：应用的版权信息\n\n-p, --platform &lt;value&gt;：指定输出不同系统的应用，可选参数linux、windows、osx。\n\n-m, –show-menu-bar：指定是否应该显示菜单栏。\n\n--disable-context-menu：禁用上下文菜单\n\n--disable-dev-tools:停用Chrome开发者工具\n\n--clear-cache:防止应用程序在两次启动之间保留缓存。\n\n--tray:托盘,防止用户点击右上角关闭按钮后直接关闭程序，而是缩小到右下角的托盘中。\n\n--always-on-top：总是在最前面显示。\n\n--maximize：开始的时候最大化。\n\n--full-screen：使打包的应用全屏启动。\n\n--app-version &lt;value&gt;：应用程序的发行版本。\n\n–width &lt;value&gt;：打包应用程序的宽度，默认为1280px。\n\n–height &lt;value&gt;：打包应用程序的高度，默认为800px。\n\n–min-width &lt;value&gt;：打包应用程序的最小宽度，默认为0。\n\n–min-height &lt;value&gt;：打包应用程序的最小高度，默认为0。\n\n–max-width &lt;value&gt;：打包应用程序的最大宽度，默认为无限制。\n\n–max-height &lt;value&gt;：打包应用程序的最大高度，默认为无限制。\n\n–x &lt;value&gt;：打包的应用程序窗口的X位置。\n\n–y &lt;value&gt;：打包的应用程序窗口的Y位置。\n\n-a, --arch &lt;value&gt; 处理器架构\n\n示例：\n\n nativefier  \n\t--arch &quot;x64&quot; \n\t--platform &quot;windows&quot; \n\t--icon D:\\temp\\favicon.ico //一定要有图片，不然会报错\n\t--name &quot;weixin&quot; \n\t&quot;https://mp.weixin.qq.com/&quot; //网站地址\n\t--maximize\t//开始最大化\n\t--always-on-top //最前端显示\n\t--clear-cache  //防止缓存\n\t--app-copyright &quot;在这里填自己的就行了，也没找到在哪里显示&quot;\n\t--app-version 1  //这里好像只能填数字，不过也没啥用，没找到在哪里显示\n\t--show-menu-bar //英文的，感觉没啥用，还挺丑\n\t--disable-dev-tools\n\t--tray //比较有用的\n\tD:\\temp\\  //最后指定文件的输出目录\n\t\n\tcmd不能换行执行一句，会出错...\n\t\n\tnativefier --arch &quot;x64&quot; --platform &quot;windows&quot; --icon D:\\temp\\favicon.ico --name &quot;weixin&quot; &quot;https://mp.weixin.qq.com/&quot; --maximize --app-copyright &quot;微信公众号&quot; --app-version 1 --show-menu-bar --disable-dev-tools --tray D:\\temp\\\n\n</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u9ba7467b\" id=\"u9ba7467b\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [nodejs,打包,exe]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22hhAo6%22%7D\"></card><h1 data-lake-id=\"p1frl\" id=\"p1frl\"><span data-lake-id=\"uf24bcc5b\" id=\"uf24bcc5b\">安装<br /><br /></span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22npm%20install%20nativefier%20-g%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22sO2Y4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"qPi5U\" id=\"qPi5U\"><span data-lake-id=\"u22ea1924\" id=\"u22ea1924\">使用</span></h1><p data-lake-id=\"u3b74421c\" id=\"u3b74421c\"><span data-lake-id=\"u01b2ac7e\" id=\"u01b2ac7e\" style=\"color: rgb(82, 82, 82)\">设置 npm 源为</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22npm%20config%20set%20registry%20https%3A%2F%2Fregistry.npm.taobao.org%2F%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22T6Lwl%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u57306d60\" id=\"u57306d60\"><span data-lake-id=\"u239f3f44\" id=\"u239f3f44\" style=\"color: rgb(82, 82, 82)\">在 nativefier 后加上需要转换的网站地址, 比如:</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22%20nativefier%20%5C%22https%3A%2F%2Fwww.zhihu.com%2F%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22I9o1y%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u74186992\" id=\"u74186992\"><span data-lake-id=\"ue758d0e1\" id=\"ue758d0e1\" style=\"color: rgb(82, 82, 82)\">第一次打包需要下载 Eletron 框架, 很慢, 要有耐心......</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22nativefier%20--name%20%5C%22%E6%81%92%E6%98%9FC%E7%AB%AF%5C%22%20%5C%22https%3A%2F%2Fwww.toushivip.com%2Ftshxs%5C%22%5Cnnativefier%20--name%20%5C%22%E6%81%92%E6%98%9FC%E7%AB%AF%5C%22%20%5C%22C%3A%5C%5CUsers%5C%5CAdministrator%5C%5CDesktop%5C%5Cicon.ico%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OUvZs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22shell%22%2C%22code%22%3A%22nativefier%20%E2%80%93name%20%E2%80%9Cblog%E2%80%9D%20%E2%80%9Chttps%3A%2F%2Fwww.leixuesong.cn%2F%E2%80%9D%5Cn%5Cnnativefier%20%E2%80%93icon%20%3Cpath%3E%EF%BC%9A%E8%AE%BE%E7%BD%AE%E5%9B%BE%E6%A0%87%5Cnicon%E5%8F%82%E6%95%B0%20%5CnWindows%E7%8E%AF%E5%A2%83%E4%B8%8B%E4%B8%BA.ico%E6%96%87%E4%BB%B6%5CnLinux%E4%B8%8B%E4%B8%BA.png%5CnMac%E4%B8%8B%20icon%E5%8F%82%E6%95%B0%E5%8F%AF%E4%BB%A5%E6%98%AFa%20.icns%E6%88%96.png%E6%96%87%E4%BB%B6%5Cn%5Cn--app-copyright%20%EF%BC%9A%E5%BA%94%E7%94%A8%E7%9A%84%E7%89%88%E6%9D%83%E4%BF%A1%E6%81%AF%5Cn%5Cn-p%2C%20--platform%20%3Cvalue%3E%EF%BC%9A%E6%8C%87%E5%AE%9A%E8%BE%93%E5%87%BA%E4%B8%8D%E5%90%8C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%8C%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0linux%E3%80%81windows%E3%80%81osx%E3%80%82%5Cn%5Cn-m%2C%20%E2%80%93show-menu-bar%EF%BC%9A%E6%8C%87%E5%AE%9A%E6%98%AF%E5%90%A6%E5%BA%94%E8%AF%A5%E6%98%BE%E7%A4%BA%E8%8F%9C%E5%8D%95%E6%A0%8F%E3%80%82%5Cn%5Cn--disable-context-menu%EF%BC%9A%E7%A6%81%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E8%8F%9C%E5%8D%95%5Cn%5Cn--disable-dev-tools%3A%E5%81%9C%E7%94%A8Chrome%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7%5Cn%5Cn--clear-cache%3A%E9%98%B2%E6%AD%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%9C%A8%E4%B8%A4%E6%AC%A1%E5%90%AF%E5%8A%A8%E4%B9%8B%E9%97%B4%E4%BF%9D%E7%95%99%E7%BC%93%E5%AD%98%E3%80%82%5Cn%5Cn--tray%3A%E6%89%98%E7%9B%98%2C%E9%98%B2%E6%AD%A2%E7%94%A8%E6%88%B7%E7%82%B9%E5%87%BB%E5%8F%B3%E4%B8%8A%E8%A7%92%E5%85%B3%E9%97%AD%E6%8C%89%E9%92%AE%E5%90%8E%E7%9B%B4%E6%8E%A5%E5%85%B3%E9%97%AD%E7%A8%8B%E5%BA%8F%EF%BC%8C%E8%80%8C%E6%98%AF%E7%BC%A9%E5%B0%8F%E5%88%B0%E5%8F%B3%E4%B8%8B%E8%A7%92%E7%9A%84%E6%89%98%E7%9B%98%E4%B8%AD%E3%80%82%5Cn%5Cn--always-on-top%EF%BC%9A%E6%80%BB%E6%98%AF%E5%9C%A8%E6%9C%80%E5%89%8D%E9%9D%A2%E6%98%BE%E7%A4%BA%E3%80%82%5Cn%5Cn--maximize%EF%BC%9A%E5%BC%80%E5%A7%8B%E7%9A%84%E6%97%B6%E5%80%99%E6%9C%80%E5%A4%A7%E5%8C%96%E3%80%82%5Cn%5Cn--full-screen%EF%BC%9A%E4%BD%BF%E6%89%93%E5%8C%85%E7%9A%84%E5%BA%94%E7%94%A8%E5%85%A8%E5%B1%8F%E5%90%AF%E5%8A%A8%E3%80%82%5Cn%5Cn--app-version%20%3Cvalue%3E%EF%BC%9A%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC%E3%80%82%5Cn%5Cn%E2%80%93width%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%BD%E5%BA%A6%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA1280px%E3%80%82%5Cn%5Cn%E2%80%93height%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%AB%98%E5%BA%A6%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA800px%E3%80%82%5Cn%5Cn%E2%80%93min-width%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%80%E5%B0%8F%E5%AE%BD%E5%BA%A6%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA0%E3%80%82%5Cn%5Cn%E2%80%93min-height%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%80%E5%B0%8F%E9%AB%98%E5%BA%A6%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA0%E3%80%82%5Cn%5Cn%E2%80%93max-width%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%80%E5%A4%A7%E5%AE%BD%E5%BA%A6%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA%E6%97%A0%E9%99%90%E5%88%B6%E3%80%82%5Cn%5Cn%E2%80%93max-height%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%80%E5%A4%A7%E9%AB%98%E5%BA%A6%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA%E6%97%A0%E9%99%90%E5%88%B6%E3%80%82%5Cn%5Cn%E2%80%93x%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%AA%97%E5%8F%A3%E7%9A%84X%E4%BD%8D%E7%BD%AE%E3%80%82%5Cn%5Cn%E2%80%93y%20%3Cvalue%3E%EF%BC%9A%E6%89%93%E5%8C%85%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%AA%97%E5%8F%A3%E7%9A%84Y%E4%BD%8D%E7%BD%AE%E3%80%82%5Cn%5Cn-a%2C%20--arch%20%3Cvalue%3E%20%E5%A4%84%E7%90%86%E5%99%A8%E6%9E%B6%E6%9E%84%5Cn%5Cn%E7%A4%BA%E4%BE%8B%EF%BC%9A%5Cn%5Cn%20nativefier%20%20%5Cn%5Ct--arch%20%5C%22x64%5C%22%20%5Cn%5Ct--platform%20%5C%22windows%5C%22%20%5Cn%5Ct--icon%20D%3A%5C%5Ctemp%5C%5Cfavicon.ico%20%2F%2F%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9C%89%E5%9B%BE%E7%89%87%EF%BC%8C%E4%B8%8D%E7%84%B6%E4%BC%9A%E6%8A%A5%E9%94%99%5Cn%5Ct--name%20%5C%22weixin%5C%22%20%5Cn%5Ct%5C%22https%3A%2F%2Fmp.weixin.qq.com%2F%5C%22%20%2F%2F%E7%BD%91%E7%AB%99%E5%9C%B0%E5%9D%80%5Cn%5Ct--maximize%5Ct%2F%2F%E5%BC%80%E5%A7%8B%E6%9C%80%E5%A4%A7%E5%8C%96%5Cn%5Ct--always-on-top%20%2F%2F%E6%9C%80%E5%89%8D%E7%AB%AF%E6%98%BE%E7%A4%BA%5Cn%5Ct--clear-cache%20%20%2F%2F%E9%98%B2%E6%AD%A2%E7%BC%93%E5%AD%98%5Cn%5Ct--app-copyright%20%5C%22%E5%9C%A8%E8%BF%99%E9%87%8C%E5%A1%AB%E8%87%AA%E5%B7%B1%E7%9A%84%E5%B0%B1%E8%A1%8C%E4%BA%86%EF%BC%8C%E4%B9%9F%E6%B2%A1%E6%89%BE%E5%88%B0%E5%9C%A8%E5%93%AA%E9%87%8C%E6%98%BE%E7%A4%BA%5C%22%5Cn%5Ct--app-version%201%20%20%2F%2F%E8%BF%99%E9%87%8C%E5%A5%BD%E5%83%8F%E5%8F%AA%E8%83%BD%E5%A1%AB%E6%95%B0%E5%AD%97%EF%BC%8C%E4%B8%8D%E8%BF%87%E4%B9%9F%E6%B2%A1%E5%95%A5%E7%94%A8%EF%BC%8C%E6%B2%A1%E6%89%BE%E5%88%B0%E5%9C%A8%E5%93%AA%E9%87%8C%E6%98%BE%E7%A4%BA%5Cn%5Ct--show-menu-bar%20%2F%2F%E8%8B%B1%E6%96%87%E7%9A%84%EF%BC%8C%E6%84%9F%E8%A7%89%E6%B2%A1%E5%95%A5%E7%94%A8%EF%BC%8C%E8%BF%98%E6%8C%BA%E4%B8%91%5Cn%5Ct--disable-dev-tools%5Cn%5Ct--tray%20%2F%2F%E6%AF%94%E8%BE%83%E6%9C%89%E7%94%A8%E7%9A%84%5Cn%5CtD%3A%5C%5Ctemp%5C%5C%20%20%2F%2F%E6%9C%80%E5%90%8E%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E7%9A%84%E8%BE%93%E5%87%BA%E7%9B%AE%E5%BD%95%5Cn%5Ct%5Cn%5Ctcmd%E4%B8%8D%E8%83%BD%E6%8D%A2%E8%A1%8C%E6%89%A7%E8%A1%8C%E4%B8%80%E5%8F%A5%EF%BC%8C%E4%BC%9A%E5%87%BA%E9%94%99...%5Cn%5Ct%5Cn%5Ctnativefier%20--arch%20%5C%22x64%5C%22%20--platform%20%5C%22windows%5C%22%20--icon%20D%3A%5C%5Ctemp%5C%5Cfavicon.ico%20--name%20%5C%22weixin%5C%22%20%5C%22https%3A%2F%2Fmp.weixin.qq.com%2F%5C%22%20--maximize%20--app-copyright%20%5C%22%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%5C%22%20--app-version%201%20--show-menu-bar%20--disable-dev-tools%20--tray%20D%3A%5C%5Ctemp%5C%5C%5Cn%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22XdhCs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 692,
    "created_at": "2022-04-14T01:38:43.000Z",
    "updated_at": "2023-07-27T02:09:53.000Z",
    "content_updated_at": "2023-07-27T02:09:53.000Z",
    "published_at": "2022-04-14T01:42:13.000Z",
    "first_published_at": "2022-04-14T01:42:12.891Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 927816274,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73331033,
    "type": "Doc",
    "slug": "qgm2lr",
    "title": "mysql实现group by后取各分组的最新一条",
    "description": "tags: [mysql,分组]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net两种实现方式先order by之后再分组：SELECT * FROM (SELECT * from tb_dept ORDER BY...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ue191ae01\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql,分组]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"Dlr5i\" class=\"ne-hr\"><h3 id=\"heXXh\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">两种实现方式</span></h3><p id=\"u3512187e\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">先order by之后再分组：</span></strong></p><div class=\"ne-quote\"><p id=\"u4f90b6df\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\">SELECT * FROM (SELECT * from tb_dept ORDER BY id descLIMIT 10000) a GROUP BY parent_id;</span></p></div><p id=\"u4e2de4d9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">不加</span><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">LIMIT</span></strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">可能会无效，由于mysql的版本问题。但是总觉得这种写法不太正经，因为如果数据量大于 Limit 的值后，结果就不准确了。所以就有了第二种写法。</span></p><div class=\"ne-quote\"><p id=\"u194d0c29\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\">SELECT * FROM tb_dept td,(SELECT max(id) id FROM tb_dept GROUP BY parent_id) md  where </span><a href=\"http://td.id/\" data-href=\"http://td.id/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">td.id</span></a><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\"> = </span><a href=\"http://md.id/\" data-href=\"http://md.id/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">md.id</span></a><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\">;</span></p></div><p id=\"uc0121801\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">开发过程中真实sql语句举例：</span></p><pre data-language=\"sql\" id=\"bAS6v\" class=\"ne-codeblock language-sql\"><code>select  * from (select * from guangnian_distribution order by id desc LIMIT 10000) m group by m.guangnian_id,m.user_id order by id desc</code></pre></div>",
    "body": "tags: [mysql,分组]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"heXXh\"></a>\n### 两种实现方式\n**先order by之后再分组：**\n> SELECT * FROM (SELECT * from tb_dept ORDER BY id descLIMIT 10000) a GROUP BY parent_id;\n\n不加**LIMIT**可能会无效，由于mysql的版本问题。但是总觉得这种写法不太正经，因为如果数据量大于 Limit 的值后，结果就不准确了。所以就有了第二种写法。\n> SELECT * FROM tb_dept td,(SELECT max(id) id FROM tb_dept GROUP BY parent_id) md  where [td.id](http://td.id/) = [md.id](http://md.id/);\n\n开发过程中真实sql语句举例：\n```sql\nselect  * from (select * from guangnian_distribution order by id desc LIMIT 10000) m group by m.guangnian_id,m.user_id order by id desc\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ue191ae01\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql,分组]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"Dlr5i\" class=\"ne-hr\"><h3 id=\"heXXh\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">两种实现方式</span></h3><p id=\"u3512187e\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">先order by之后再分组：</span></strong></p><div class=\"ne-quote\"><p id=\"u4f90b6df\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\">SELECT * FROM (SELECT * from tb_dept ORDER BY id descLIMIT 10000) a GROUP BY parent_id;</span></p></div><p id=\"u4e2de4d9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">不加</span><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">LIMIT</span></strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">可能会无效，由于mysql的版本问题。但是总觉得这种写法不太正经，因为如果数据量大于 Limit 的值后，结果就不准确了。所以就有了第二种写法。</span></p><div class=\"ne-quote\"><p id=\"u194d0c29\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\">SELECT * FROM tb_dept td,(SELECT max(id) id FROM tb_dept GROUP BY parent_id) md  where </span><a href=\"http://td.id/\" data-href=\"http://td.id/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">td.id</span></a><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\"> = </span><a href=\"http://md.id/\" data-href=\"http://md.id/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">md.id</span></a><span class=\"ne-text\" style=\"color: rgb(119, 119, 119)\">;</span></p></div><p id=\"uc0121801\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">开发过程中真实sql语句举例：</span></p><pre data-language=\"sql\" id=\"bAS6v\" class=\"ne-codeblock language-sql\">select  * from (select * from guangnian_distribution order by id desc LIMIT 10000) m group by m.guangnian_id,m.user_id order by id desc</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"ue191ae01\" id=\"ue191ae01\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [mysql,分组]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Dlr5i%22%7D\"></card><h3 data-lake-id=\"heXXh\" id=\"heXXh\"><span data-lake-id=\"u3938f2a8\" id=\"u3938f2a8\" style=\"color: rgb(82, 82, 82)\">两种实现方式</span></h3><p data-lake-id=\"u3512187e\" id=\"u3512187e\"><strong><span data-lake-id=\"uec69332a\" id=\"uec69332a\" style=\"color: rgb(82, 82, 82)\">先order by之后再分组：</span></strong></p><blockquote data-lake-id=\"u753ff4ea\" id=\"u753ff4ea\"><p data-lake-id=\"u4f90b6df\" id=\"u4f90b6df\"><span data-lake-id=\"ue149f909\" id=\"ue149f909\" style=\"color: rgb(119, 119, 119)\">SELECT * FROM (SELECT * from tb_dept ORDER BY id descLIMIT 10000) a GROUP BY parent_id;</span></p></blockquote><p data-lake-id=\"u4e2de4d9\" id=\"u4e2de4d9\"><span data-lake-id=\"u5dd8c11b\" id=\"u5dd8c11b\" style=\"color: rgb(82, 82, 82)\">不加</span><strong><span data-lake-id=\"u82a923e7\" id=\"u82a923e7\" style=\"color: rgb(82, 82, 82)\">LIMIT</span></strong><span data-lake-id=\"u03fa7007\" id=\"u03fa7007\" style=\"color: rgb(82, 82, 82)\">可能会无效，由于mysql的版本问题。但是总觉得这种写法不太正经，因为如果数据量大于 Limit 的值后，结果就不准确了。所以就有了第二种写法。</span></p><blockquote data-lake-id=\"u6e5ed19d\" id=\"u6e5ed19d\"><p data-lake-id=\"u194d0c29\" id=\"u194d0c29\"><span data-lake-id=\"uc6cb028f\" id=\"uc6cb028f\" style=\"color: rgb(119, 119, 119)\">SELECT * FROM tb_dept td,(SELECT max(id) id FROM tb_dept GROUP BY parent_id) md  where </span><a href=\"http://td.id/\" target=\"_blank\" data-lake-id=\"ua3e958b0\" id=\"ua3e958b0\"><span data-lake-id=\"u1f56ce2a\" id=\"u1f56ce2a\">td.id</span></a><span data-lake-id=\"ue66848fb\" id=\"ue66848fb\" style=\"color: rgb(119, 119, 119)\"> = </span><a href=\"http://md.id/\" target=\"_blank\" data-lake-id=\"u6c7f5bc5\" id=\"u6c7f5bc5\"><span data-lake-id=\"u4a9af711\" id=\"u4a9af711\">md.id</span></a><span data-lake-id=\"ue23516a5\" id=\"ue23516a5\" style=\"color: rgb(119, 119, 119)\">;</span></p></blockquote><p data-lake-id=\"uc0121801\" id=\"uc0121801\"><span data-lake-id=\"udb3c0e48\" id=\"udb3c0e48\" style=\"color: rgb(82, 82, 82)\">开发过程中真实sql语句举例：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20%20*%20from%20(select%20*%20from%20guangnian_distribution%20order%20by%20id%20desc%20LIMIT%2010000)%20m%20group%20by%20m.guangnian_id%2Cm.user_id%20order%20by%20id%20desc%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bAS6v%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 4,
    "hits": 4,
    "comments_count": 0,
    "word_count": 160,
    "created_at": "2022-04-13T06:12:28.000Z",
    "updated_at": "2023-07-27T02:10:01.000Z",
    "content_updated_at": "2023-07-27T02:10:01.000Z",
    "published_at": "2022-04-13T06:14:48.000Z",
    "first_published_at": "2022-04-13T06:13:19.792Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 926058038,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73330776,
    "type": "Doc",
    "slug": "wgsilf",
    "title": "关于lnmp mysql的一个坑记录一下",
    "description": "tags: [mysql]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netMysql5.7及以上 only_full_group_by以及其他关于sql_mode原因报错详细解决方案经过我们一番百度之后，获取的结...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u660fcc4d\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"DOFEV\" class=\"ne-hr\"><p id=\"u4dd534d6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); font-size: 19px\">Mysql5.7及以上 only_full_group_by以及其他关于sql_mode原因报错详细解决方案</span></strong></p><p id=\"u5659e510\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); font-size: 19px\"></span></strong></p><p id=\"ue19d6c08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">经过我们一番百度之后，获取的结果是关于 only_full_group_by ，但是按照教程所说，只要修改了my.cnf，</span></p><p id=\"uf9308778\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在my.cnf添加如下配置<br /></span><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">（或者在my.ini里配置新增）</span></p><pre data-language=\"sql\" id=\"M7ksZ\" class=\"ne-codeblock language-sql\"><code>sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</code></pre></div>",
    "body": "tags: [mysql]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n**Mysql5.7及以上 only_full_group_by以及其他关于sql_mode原因报错详细解决方案**\n\n经过我们一番百度之后，获取的结果是关于 only_full_group_by ，但是按照教程所说，只要修改了my.cnf，<br />在my.cnf添加如下配置<br />（或者在my.ini里配置新增）\n```sql\nsql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u660fcc4d\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"DOFEV\" class=\"ne-hr\"><p id=\"u4dd534d6\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); font-size: 19px\">Mysql5.7及以上 only_full_group_by以及其他关于sql_mode原因报错详细解决方案</span></strong></p><p id=\"u5659e510\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(82, 82, 82); font-size: 19px\"></span></strong></p><p id=\"ue19d6c08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">经过我们一番百度之后，获取的结果是关于 only_full_group_by ，但是按照教程所说，只要修改了my.cnf，</span></p><p id=\"uf9308778\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">在my.cnf添加如下配置<br />（或者在my.ini里配置新增）</span></p><pre data-language=\"sql\" id=\"M7ksZ\" class=\"ne-codeblock language-sql\">sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u660fcc4d\" id=\"u660fcc4d\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [mysql]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22DOFEV%22%7D\"></card><p data-lake-id=\"u4dd534d6\" id=\"u4dd534d6\"><strong><span data-lake-id=\"u04ca9efb\" id=\"u04ca9efb\" class=\"lake-fontsize-14\" style=\"color: rgb(82, 82, 82)\">Mysql5.7及以上 only_full_group_by以及其他关于sql_mode原因报错详细解决方案</span></strong></p><p data-lake-id=\"u5659e510\" id=\"u5659e510\"><strong><span data-lake-id=\"uaa65a065\" id=\"uaa65a065\" class=\"lake-fontsize-14\" style=\"color: rgb(82, 82, 82)\">​</span></strong><br></p><p data-lake-id=\"ue19d6c08\" id=\"ue19d6c08\"><span data-lake-id=\"u8f4b7068\" id=\"u8f4b7068\" style=\"color: rgb(82, 82, 82)\">经过我们一番百度之后，获取的结果是关于 only_full_group_by ，但是按照教程所说，只要修改了my.cnf，</span></p><p data-lake-id=\"uf9308778\" id=\"uf9308778\"><span data-lake-id=\"udfeb37c0\" id=\"udfeb37c0\" style=\"color: rgb(82, 82, 82)\">在my.cnf添加如下配置<br />（或者在my.ini里配置新增）</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22sql_mode%3DSTRICT_TRANS_TABLES%2CNO_ZERO_IN_DATE%2CNO_ZERO_DATE%2CERROR_FOR_DIVISION_BY_ZERO%2CNO_AUTO_CREATE_USER%2CNO_ENGINE_SUBSTITUTION%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22M7ksZ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 88,
    "created_at": "2022-04-13T06:11:06.000Z",
    "updated_at": "2023-07-27T02:10:08.000Z",
    "content_updated_at": "2023-07-27T02:10:08.000Z",
    "published_at": "2022-04-13T06:12:07.000Z",
    "first_published_at": "2022-04-13T06:12:06.636Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 926048412,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73330356,
    "type": "Doc",
    "slug": "rzq2we",
    "title": "php - api接口跨域问题",
    "description": "tags: [api,跨域]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netNginx 伪静态配置为：location / {   add_header Access-Control-Allow-Origin '...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u4986ddaf\" class=\"ne-p\"><span class=\"ne-text\">tags: [api,跨域]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"GvYWr\" class=\"ne-hr\"><h3 id=\"uPAQx\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">Nginx 伪静态配置为：</span></h3><pre data-language=\"nginx\" id=\"IWzI2\" class=\"ne-codeblock language-nginx\"><code>location / {\n  add_header Access-Control-Allow-Origin '*';\n  add_header Access-Control-Allow-Methods 'POST,PUT,GET,DELETE';\n  add_header Access-Control-Allow-Headers 'version, access-token, user-token, Accept, apiAuth, User-Agent, Keep-Alive, Origin, No-Cache, X-Requested-With, If-Modified-Since, Pragma, Last-Modified, Cache-Control, Expires, Content-Type, ATJ-Token,ATJ-Device-Type'; \n  \n  if ($request_method = 'OPTIONS') {\n    return 204;\n  }\n  if (!-e $request_filename){\n    rewrite  ^(.*)$  /index.php?s=$1  last;   break;\n  }\n}</code></pre><h3 id=\"uADXZ\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">程序入口文件增加：</span></h3><pre data-language=\"php\" id=\"KBKub\" class=\"ne-codeblock language-php\"><code>header(&quot;Access-Control-Allow-Origin:*&quot;);\nheader(&quot;Access-Control-Allow-Methods:GET, POST, OPTIONS, DELETE&quot;);\nheader(&quot;Access-Control-Allow-Headers:DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type, Accept-Language, Origin, Accept-Encoding,ATJ-Device-Type,ATJ-Token&quot;);</code></pre><p id=\"u2b1f4519\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">其中，Access-Control-Allow-Headers里的值为header传递的自定义字段值</span></p><h3 id=\"JLUUg\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">接口公共方法里增加</span></h3><pre data-language=\"php\" id=\"R7idC\" class=\"ne-codeblock language-php\"><code>protected function initialize()\n{\n    header(&quot;Access-Control-Allow-Origin: *&quot;);\n    header(&quot;Access-Control-Allow-Methods:POST,GET&quot;);\n    header(&quot;Access-Control-Allow-Headers:ATJ-Device-Type,ATJ-Token&quot;);\n    header(&quot;Content-type:text/json;charset=utf-8&quot;);\n}</code></pre></div>",
    "body": "tags: [api,跨域]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"uPAQx\"></a>\n### Nginx 伪静态配置为：\n```nginx\nlocation / {\n  add_header Access-Control-Allow-Origin '*';\n  add_header Access-Control-Allow-Methods 'POST,PUT,GET,DELETE';\n  add_header Access-Control-Allow-Headers 'version, access-token, user-token, Accept, apiAuth, User-Agent, Keep-Alive, Origin, No-Cache, X-Requested-With, If-Modified-Since, Pragma, Last-Modified, Cache-Control, Expires, Content-Type, ATJ-Token,ATJ-Device-Type'; \n  \n  if ($request_method = 'OPTIONS') {\n    return 204;\n  }\n  if (!-e $request_filename){\n    rewrite  ^(.*)$  /index.php?s=$1  last;   break;\n  }\n}\n```\n<a name=\"uADXZ\"></a>\n### 程序入口文件增加：\n```php\nheader(\"Access-Control-Allow-Origin:*\");\nheader(\"Access-Control-Allow-Methods:GET, POST, OPTIONS, DELETE\");\nheader(\"Access-Control-Allow-Headers:DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type, Accept-Language, Origin, Accept-Encoding,ATJ-Device-Type,ATJ-Token\");\n```\n其中，Access-Control-Allow-Headers里的值为header传递的自定义字段值\n<a name=\"JLUUg\"></a>\n### 接口公共方法里增加\n```php\nprotected function initialize()\n{\n    header(\"Access-Control-Allow-Origin: *\");\n    header(\"Access-Control-Allow-Methods:POST,GET\");\n    header(\"Access-Control-Allow-Headers:ATJ-Device-Type,ATJ-Token\");\n    header(\"Content-type:text/json;charset=utf-8\");\n}\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u4986ddaf\" class=\"ne-p\"><span class=\"ne-text\">tags: [api,跨域]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"GvYWr\" class=\"ne-hr\"><h3 id=\"uPAQx\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">Nginx 伪静态配置为：</span></h3><pre data-language=\"nginx\" id=\"IWzI2\" class=\"ne-codeblock language-nginx\">location / {\n  add_header Access-Control-Allow-Origin '*';\n  add_header Access-Control-Allow-Methods 'POST,PUT,GET,DELETE';\n  add_header Access-Control-Allow-Headers 'version, access-token, user-token, Accept, apiAuth, User-Agent, Keep-Alive, Origin, No-Cache, X-Requested-With, If-Modified-Since, Pragma, Last-Modified, Cache-Control, Expires, Content-Type, ATJ-Token,ATJ-Device-Type'; \n  \n  if ($request_method = 'OPTIONS') {\n    return 204;\n  }\n  if (!-e $request_filename){\n    rewrite  ^(.*)$  /index.php?s=$1  last;   break;\n  }\n}</pre><h3 id=\"uADXZ\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">程序入口文件增加：</span></h3><pre data-language=\"php\" id=\"KBKub\" class=\"ne-codeblock language-php\">header(&quot;Access-Control-Allow-Origin:*&quot;);\nheader(&quot;Access-Control-Allow-Methods:GET, POST, OPTIONS, DELETE&quot;);\nheader(&quot;Access-Control-Allow-Headers:DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type, Accept-Language, Origin, Accept-Encoding,ATJ-Device-Type,ATJ-Token&quot;);</pre><p id=\"u2b1f4519\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">其中，Access-Control-Allow-Headers里的值为header传递的自定义字段值</span></p><h3 id=\"JLUUg\"><span class=\"ne-text\" style=\"color: rgb(82, 82, 82)\">接口公共方法里增加</span></h3><pre data-language=\"php\" id=\"R7idC\" class=\"ne-codeblock language-php\">protected function initialize()\n{\n    header(&quot;Access-Control-Allow-Origin: *&quot;);\n    header(&quot;Access-Control-Allow-Methods:POST,GET&quot;);\n    header(&quot;Access-Control-Allow-Headers:ATJ-Device-Type,ATJ-Token&quot;);\n    header(&quot;Content-type:text/json;charset=utf-8&quot;);\n}</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u4986ddaf\" id=\"u4986ddaf\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [api,跨域]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22GvYWr%22%7D\"></card><h3 data-lake-id=\"uPAQx\" id=\"uPAQx\"><span data-lake-id=\"u23d963bc\" id=\"u23d963bc\" style=\"color: rgb(82, 82, 82)\">Nginx 伪静态配置为：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22nginx%22%2C%22code%22%3A%22location%20%2F%20%7B%5Cn%20%20add_header%20Access-Control-Allow-Origin%20'*'%3B%5Cn%20%20add_header%20Access-Control-Allow-Methods%20'POST%2CPUT%2CGET%2CDELETE'%3B%5Cn%20%20add_header%20Access-Control-Allow-Headers%20'version%2C%20access-token%2C%20user-token%2C%20Accept%2C%20apiAuth%2C%20User-Agent%2C%20Keep-Alive%2C%20Origin%2C%20No-Cache%2C%20X-Requested-With%2C%20If-Modified-Since%2C%20Pragma%2C%20Last-Modified%2C%20Cache-Control%2C%20Expires%2C%20Content-Type%2C%20ATJ-Token%2CATJ-Device-Type'%3B%20%5Cn%20%20%5Cn%20%20if%20(%24request_method%20%3D%20'OPTIONS')%20%7B%5Cn%20%20%20%20return%20204%3B%5Cn%20%20%7D%5Cn%20%20if%20(!-e%20%24request_filename)%7B%5Cn%20%20%20%20rewrite%20%20%5E(.*)%24%20%20%2Findex.php%3Fs%3D%241%20%20last%3B%20%20%20break%3B%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IWzI2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"uADXZ\" id=\"uADXZ\"><span data-lake-id=\"u9ce65c9f\" id=\"u9ce65c9f\" style=\"color: rgb(82, 82, 82)\">程序入口文件增加：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22header(%5C%22Access-Control-Allow-Origin%3A*%5C%22)%3B%5Cnheader(%5C%22Access-Control-Allow-Methods%3AGET%2C%20POST%2C%20OPTIONS%2C%20DELETE%5C%22)%3B%5Cnheader(%5C%22Access-Control-Allow-Headers%3ADNT%2CX-Mx-ReqToken%2CKeep-Alive%2CUser-Agent%2CX-Requested-With%2CIf-Modified-Since%2CCache-Control%2CContent-Type%2C%20Accept-Language%2C%20Origin%2C%20Accept-Encoding%2CATJ-Device-Type%2CATJ-Token%5C%22)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KBKub%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u2b1f4519\" id=\"u2b1f4519\"><span data-lake-id=\"ud550daf1\" id=\"ud550daf1\" style=\"color: rgb(82, 82, 82)\">其中，Access-Control-Allow-Headers里的值为header传递的自定义字段值</span></p><h3 data-lake-id=\"JLUUg\" id=\"JLUUg\"><span data-lake-id=\"u4c3fb53b\" id=\"u4c3fb53b\" style=\"color: rgb(82, 82, 82)\">接口公共方法里增加</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22protected%20function%20initialize()%5Cn%7B%5Cn%20%20%20%20header(%5C%22Access-Control-Allow-Origin%3A%20*%5C%22)%3B%5Cn%20%20%20%20header(%5C%22Access-Control-Allow-Methods%3APOST%2CGET%5C%22)%3B%5Cn%20%20%20%20header(%5C%22Access-Control-Allow-Headers%3AATJ-Device-Type%2CATJ-Token%5C%22)%3B%5Cn%20%20%20%20header(%5C%22Content-type%3Atext%2Fjson%3Bcharset%3Dutf-8%5C%22)%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22R7idC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 3,
    "hits": 3,
    "comments_count": 0,
    "word_count": 121,
    "created_at": "2022-04-13T06:08:54.000Z",
    "updated_at": "2023-07-27T02:10:13.000Z",
    "content_updated_at": "2023-07-27T02:10:13.000Z",
    "published_at": "2022-04-13T06:10:12.000Z",
    "first_published_at": "2022-04-13T06:10:12.212Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 926041598,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73312247,
    "type": "Doc",
    "slug": "eb80s0",
    "title": "如何制定一个自定义hexo组件",
    "description": "tags: [hexo]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net有的时候发现官方的组件不够用，所以需要自己制作一个合适的组件。这里我简单写了一个可以互相交流一下。步骤新建js首先我们需要找到修改的位置-h...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1649829760803-7be4fc2d-9d2e-4300-bb28-d0b776097d4a.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u2650e4fe\" class=\"ne-p\"><span class=\"ne-text\">tags: [hexo]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"t2bG7\" class=\"ne-hr\"><p id=\"u9a181b50\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">有的时候发现官方的组件不够用，所以需要自己制作一个合适的组件。这里我简单写了一个可以互相交流一下。</span></p><h2 id=\"YntnG\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: var(--color-h2)\">步骤</span></h2><h3 id=\"EEvsf\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">新建js</span></h3><p id=\"u1bcf636e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">首先我们需要找到修改的位置</span></p><pre data-language=\"javascript\" id=\"hTOKl\" class=\"ne-codeblock language-javascript\"><code>-hexo-theme-volantis\n  -scripts\n  -tags\n\t  -xxx.js</code></pre><p id=\"u82173651\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">我们需要在</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); text-decoration: underline; font-size: 16px\">tags</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">文件夹中创建一个自己的js，例如：</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); text-decoration: underline; font-size: 16px\">moviebox.js</span></p><pre data-language=\"javascript\" id=\"BpBlE\" class=\"ne-codeblock language-javascript\"><code>function postMoviebox(args, content) {\n\treturn `&lt;div class='moviebox'&gt;&lt;img class='moviebox-img' src='/images/mlzg02.webp' alt='豆瓣'/&gt;`\n\t\t+ `&lt;div class='moviebox-msg'&gt;`\n\t\t+ content\n\t\t+ `&lt;/div&gt;&lt;/div&gt;`\n}\n\nfunction postMovieboxTitle(args) {\n\targs = args.join(' ').split(',')\n\treturn `&lt;p&gt;` + args[0] + `&lt;span class='moviebox-tag'&gt;` + args[1] + `&lt;/span&lt;/p&gt;`\n}\n\nfunction postMovieboxMsg(args) {\n\targs = args.join(' ').split(',')\n\treturn `&lt;p&gt;` + args[0] + `&lt;/p&gt;`\n}\n\nfunction postMovieboxStar(args) {\n\targs = args.join(' ').split(',')\n\tvar stars = Math.floor(parseInt(args[0]) / 2)\n\tvar halfStars = parseInt(args[0]) % 2\n\tvar result = '&lt;p&gt;评分:'\n\tif (stars &lt;= 5 &amp;&amp; stars &gt;= 0) {\n\t\tfor (let i = 0; i &lt; stars; i++) {\n\t\t\tresult += '&lt;i class=&quot;fa fa-star&quot; aria-hidden=&quot;true&quot; style=&quot;color:yellow&quot;&gt;&lt;/i&gt;'\n\t\t}\n\t\tif (halfStars &gt;= 1) {\n\t\t\tresult += '&lt;i class=&quot;fa fa-star-half&quot; aria-hidden=&quot;true&quot; style=&quot;color:yellow&quot;&gt;&lt;/i&gt;'\n\t\t\tfor (let i = 0; i &lt; 4 - stars; i++) {\n\t\t\t\tresult += '&lt;i class=&quot;fa fa-star&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;'\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i &lt; 5 - stars; i++) {\n\t\t\t\tresult += '&lt;i class=&quot;fa fa-star&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;'\n\t\t\t}\n\t\t}\n\n\t\tresult += +args[0]\n\t} else {\n\t\tresult += '这可能是个迷'\n\t}\n\n\tresult += '&lt;/p&gt;'\n\treturn result\n}\n\n\nhexo.extend.tag.register('moviebox', postMoviebox, { ends: true });\nhexo.extend.tag.register('title', postMovieboxTitle);\nhexo.extend.tag.register('star', postMovieboxStar);\nhexo.extend.tag.register('msg', postMovieboxMsg);</code></pre><h3 id=\"vwuSK\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">新建对应css文件</span></h3><pre data-language=\"css\" id=\"U2F2X\" class=\"ne-codeblock language-css\"><code>-hexo-theme-volantis\n  -source\n    -css\n\t  -tag-plugins\n\t    -xxx.css</code></pre><p id=\"ud0e16595\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">名字我和上面一样的</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); text-decoration: underline; font-size: 16px\">moviebox.styl</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">,内容如下：</span></p><pre data-language=\"css\" id=\"kAzsW\" class=\"ne-codeblock language-css\"><code>.moviebox {\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\tposition: relative;\n\tmargin-bottom: 10px;\n\twidth: 100%;\n\n\t.moviebox-tag {\n\t\tpadding: 0px 10px;\n\t\tbackground-color: #fcc;\n\t\tfont-size: 12px;\n\t\tcolor: white;\n\t\tborder-radius: 4px;\n\t\tz-index: 20;\n\t\tmargin-left: 5px;\n\t}\n\n\t.moviebox-img {\n\t\twidth: 125px;\n\t\theight: 180px;\n\t\tmargin: 0;\n\t}\n\n\t.moviebox-msg {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tmargin-left: 5px;\n\n\t\tp {\n\t\t\tmargin: 0;\n\t\t\tfont-size: 12px;\n\n\t\t\ti {\n\t\t\t\tmargin-left: 2px;\n\t\t\t}\n\n\t\t\ti:first-child {\n\t\t\t\tmargin-left: 3px;\n\t\t\t}\n\n\t\t\ti:last-child {\n\t\t\t\tmargin-right: 2px;\n\t\t\t}\n\t\t}\n\n\t\tp:first-child {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tfont-size: 14px;\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n</code></pre><h3 id=\"ua1Mj\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">重启程序,清除缓存</span></h3><p id=\"u56e4bbd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">在md文件中使用</span></p><pre data-language=\"markdown\" id=\"v8ha4\" class=\"ne-codeblock language-markdown\"><code>{% moviebox %}\n{% title 标题:弥留之国的爱丽丝2020 , 已追完 %}\n{% star 9.2 %}\n{% msg 导演: 佐藤信介 %}\n{% msg 编剧: 渡部辰城 / 仓光泰子 / 佐藤信介 %}\n{% msg 主演: 山崎贤人 / 土屋太凤 / 村上虹郎 / 森永悠希 / 三吉彩花 / 更多... %}\n{% msg 类型: 动作 / 科幻 / 悬疑 / 惊悚 / 奇幻 %}\n{% msg 制片国家/地区: 日本 %}\n{% msg 首播: 2020-12-10(日本) %}\n{% endmoviebox %}</code></pre><p id=\"u996ddc4a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">成功啦，我们来看下效果图:</span></p><p id=\"uec964add\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649829760803-7be4fc2d-9d2e-4300-bb28-d0b776097d4a.png\" width=\"800\" id=\"u81cd57ab\" class=\"ne-image\"></p></div>",
    "body": "tags: [hexo]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n有的时候发现官方的组件不够用，所以需要自己制作一个合适的组件。这里我简单写了一个可以互相交流一下。\n<a name=\"YntnG\"></a>\n## 步骤\n<a name=\"EEvsf\"></a>\n### 新建js\n首先我们需要找到修改的位置\n```javascript\n-hexo-theme-volantis\n  -scripts\n  -tags\n\t  -xxx.js\n```\n我们需要在tags文件夹中创建一个自己的js，例如：moviebox.js\n```javascript\nfunction postMoviebox(args, content) {\n\treturn `<div class='moviebox'><img class='moviebox-img' src='/images/mlzg02.webp' alt='豆瓣'/>`\n\t\t+ `<div class='moviebox-msg'>`\n\t\t+ content\n\t\t+ `</div></div>`\n}\n\nfunction postMovieboxTitle(args) {\n\targs = args.join(' ').split(',')\n\treturn `<p>` + args[0] + `<span class='moviebox-tag'>` + args[1] + `</span</p>`\n}\n\nfunction postMovieboxMsg(args) {\n\targs = args.join(' ').split(',')\n\treturn `<p>` + args[0] + `</p>`\n}\n\nfunction postMovieboxStar(args) {\n\targs = args.join(' ').split(',')\n\tvar stars = Math.floor(parseInt(args[0]) / 2)\n\tvar halfStars = parseInt(args[0]) % 2\n\tvar result = '<p>评分:'\n\tif (stars <= 5 && stars >= 0) {\n\t\tfor (let i = 0; i < stars; i++) {\n\t\t\tresult += '<i class=\"fa fa-star\" aria-hidden=\"true\" style=\"color:yellow\"></i>'\n\t\t}\n\t\tif (halfStars >= 1) {\n\t\t\tresult += '<i class=\"fa fa-star-half\" aria-hidden=\"true\" style=\"color:yellow\"></i>'\n\t\t\tfor (let i = 0; i < 4 - stars; i++) {\n\t\t\t\tresult += '<i class=\"fa fa-star\" aria-hidden=\"true\"></i>'\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < 5 - stars; i++) {\n\t\t\t\tresult += '<i class=\"fa fa-star\" aria-hidden=\"true\"></i>'\n\t\t\t}\n\t\t}\n\n\t\tresult += +args[0]\n\t} else {\n\t\tresult += '这可能是个迷'\n\t}\n\n\tresult += '</p>'\n\treturn result\n}\n\n\nhexo.extend.tag.register('moviebox', postMoviebox, { ends: true });\nhexo.extend.tag.register('title', postMovieboxTitle);\nhexo.extend.tag.register('star', postMovieboxStar);\nhexo.extend.tag.register('msg', postMovieboxMsg);\n```\n<a name=\"vwuSK\"></a>\n### 新建对应css文件\n```css\n-hexo-theme-volantis\n  -source\n    -css\n\t  -tag-plugins\n\t    -xxx.css\n```\n名字我和上面一样的moviebox.styl,内容如下：\n```css\n.moviebox {\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\tposition: relative;\n\tmargin-bottom: 10px;\n\twidth: 100%;\n\n\t.moviebox-tag {\n\t\tpadding: 0px 10px;\n\t\tbackground-color: #fcc;\n\t\tfont-size: 12px;\n\t\tcolor: white;\n\t\tborder-radius: 4px;\n\t\tz-index: 20;\n\t\tmargin-left: 5px;\n\t}\n\n\t.moviebox-img {\n\t\twidth: 125px;\n\t\theight: 180px;\n\t\tmargin: 0;\n\t}\n\n\t.moviebox-msg {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tmargin-left: 5px;\n\n\t\tp {\n\t\t\tmargin: 0;\n\t\t\tfont-size: 12px;\n\n\t\t\ti {\n\t\t\t\tmargin-left: 2px;\n\t\t\t}\n\n\t\t\ti:first-child {\n\t\t\t\tmargin-left: 3px;\n\t\t\t}\n\n\t\t\ti:last-child {\n\t\t\t\tmargin-right: 2px;\n\t\t\t}\n\t\t}\n\n\t\tp:first-child {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tfont-size: 14px;\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n```\n<a name=\"ua1Mj\"></a>\n### 重启程序,清除缓存\n在md文件中使用\n```markdown\n{% moviebox %}\n{% title 标题:弥留之国的爱丽丝2020 , 已追完 %}\n{% star 9.2 %}\n{% msg 导演: 佐藤信介 %}\n{% msg 编剧: 渡部辰城 / 仓光泰子 / 佐藤信介 %}\n{% msg 主演: 山崎贤人 / 土屋太凤 / 村上虹郎 / 森永悠希 / 三吉彩花 / 更多... %}\n{% msg 类型: 动作 / 科幻 / 悬疑 / 惊悚 / 奇幻 %}\n{% msg 制片国家/地区: 日本 %}\n{% msg 首播: 2020-12-10(日本) %}\n{% endmoviebox %}\n```\n成功啦，我们来看下效果图:<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649829760803-7be4fc2d-9d2e-4300-bb28-d0b776097d4a.png#clientId=u31cc4643-a74e-4&from=paste&id=u81cd57ab&originHeight=517&originWidth=800&originalType=url&ratio=1&rotation=0&showTitle=false&size=105373&status=done&style=none&taskId=uc62231d9-80dd-43df-a56c-ac9180ad5e2&title=)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u2650e4fe\" class=\"ne-p\"><span class=\"ne-text\">tags: [hexo]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"t2bG7\" class=\"ne-hr\"><p id=\"u9a181b50\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">有的时候发现官方的组件不够用，所以需要自己制作一个合适的组件。这里我简单写了一个可以互相交流一下。</span></p><h2 id=\"YntnG\" style=\"text-align: left\"><span class=\"ne-text\" style=\"color: var(--color-h2)\">步骤</span></h2><h3 id=\"EEvsf\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">新建js</span></h3><p id=\"u1bcf636e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">首先我们需要找到修改的位置</span></p><pre data-language=\"javascript\" id=\"hTOKl\" class=\"ne-codeblock language-javascript\">-hexo-theme-volantis\n  -scripts\n  -tags\n\t  -xxx.js</pre><p id=\"u82173651\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">我们需要在</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); text-decoration: underline; font-size: 16px\">tags</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">文件夹中创建一个自己的js，例如：</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); text-decoration: underline; font-size: 16px\">moviebox.js</span></p><pre data-language=\"javascript\" id=\"BpBlE\" class=\"ne-codeblock language-javascript\">function postMoviebox(args, content) {\n\treturn `&lt;div class='moviebox'&gt;&lt;img class='moviebox-img' src='/images/mlzg02.webp' alt='豆瓣'/&gt;`\n\t\t+ `&lt;div class='moviebox-msg'&gt;`\n\t\t+ content\n\t\t+ `&lt;/div&gt;&lt;/div&gt;`\n}\n\nfunction postMovieboxTitle(args) {\n\targs = args.join(' ').split(',')\n\treturn `&lt;p&gt;` + args[0] + `&lt;span class='moviebox-tag'&gt;` + args[1] + `&lt;/span&lt;/p&gt;`\n}\n\nfunction postMovieboxMsg(args) {\n\targs = args.join(' ').split(',')\n\treturn `&lt;p&gt;` + args[0] + `&lt;/p&gt;`\n}\n\nfunction postMovieboxStar(args) {\n\targs = args.join(' ').split(',')\n\tvar stars = Math.floor(parseInt(args[0]) / 2)\n\tvar halfStars = parseInt(args[0]) % 2\n\tvar result = '&lt;p&gt;评分:'\n\tif (stars &lt;= 5 &amp;&amp; stars &gt;= 0) {\n\t\tfor (let i = 0; i &lt; stars; i++) {\n\t\t\tresult += '&lt;i class=&quot;fa fa-star&quot; aria-hidden=&quot;true&quot; style=&quot;color:yellow&quot;&gt;&lt;/i&gt;'\n\t\t}\n\t\tif (halfStars &gt;= 1) {\n\t\t\tresult += '&lt;i class=&quot;fa fa-star-half&quot; aria-hidden=&quot;true&quot; style=&quot;color:yellow&quot;&gt;&lt;/i&gt;'\n\t\t\tfor (let i = 0; i &lt; 4 - stars; i++) {\n\t\t\t\tresult += '&lt;i class=&quot;fa fa-star&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;'\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i &lt; 5 - stars; i++) {\n\t\t\t\tresult += '&lt;i class=&quot;fa fa-star&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;'\n\t\t\t}\n\t\t}\n\n\t\tresult += +args[0]\n\t} else {\n\t\tresult += '这可能是个迷'\n\t}\n\n\tresult += '&lt;/p&gt;'\n\treturn result\n}\n\n\nhexo.extend.tag.register('moviebox', postMoviebox, { ends: true });\nhexo.extend.tag.register('title', postMovieboxTitle);\nhexo.extend.tag.register('star', postMovieboxStar);\nhexo.extend.tag.register('msg', postMovieboxMsg);</pre><h3 id=\"vwuSK\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">新建对应css文件</span></h3><pre data-language=\"css\" id=\"U2F2X\" class=\"ne-codeblock language-css\">-hexo-theme-volantis\n  -source\n    -css\n\t  -tag-plugins\n\t    -xxx.css</pre><p id=\"ud0e16595\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">名字我和上面一样的</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); text-decoration: underline; font-size: 16px\">moviebox.styl</span><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">,内容如下：</span></p><pre data-language=\"css\" id=\"kAzsW\" class=\"ne-codeblock language-css\">.moviebox {\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\tposition: relative;\n\tmargin-bottom: 10px;\n\twidth: 100%;\n\n\t.moviebox-tag {\n\t\tpadding: 0px 10px;\n\t\tbackground-color: #fcc;\n\t\tfont-size: 12px;\n\t\tcolor: white;\n\t\tborder-radius: 4px;\n\t\tz-index: 20;\n\t\tmargin-left: 5px;\n\t}\n\n\t.moviebox-img {\n\t\twidth: 125px;\n\t\theight: 180px;\n\t\tmargin: 0;\n\t}\n\n\t.moviebox-msg {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\tmargin-left: 5px;\n\n\t\tp {\n\t\t\tmargin: 0;\n\t\t\tfont-size: 12px;\n\n\t\t\ti {\n\t\t\t\tmargin-left: 2px;\n\t\t\t}\n\n\t\t\ti:first-child {\n\t\t\t\tmargin-left: 3px;\n\t\t\t}\n\n\t\t\ti:last-child {\n\t\t\t\tmargin-right: 2px;\n\t\t\t}\n\t\t}\n\n\t\tp:first-child {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tfont-size: 14px;\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n</pre><h3 id=\"ua1Mj\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68)\">重启程序,清除缓存</span></h3><p id=\"u56e4bbd9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">在md文件中使用</span></p><pre data-language=\"markdown\" id=\"v8ha4\" class=\"ne-codeblock language-markdown\">{% moviebox %}\n{% title 标题:弥留之国的爱丽丝2020 , 已追完 %}\n{% star 9.2 %}\n{% msg 导演: 佐藤信介 %}\n{% msg 编剧: 渡部辰城 / 仓光泰子 / 佐藤信介 %}\n{% msg 主演: 山崎贤人 / 土屋太凤 / 村上虹郎 / 森永悠希 / 三吉彩花 / 更多... %}\n{% msg 类型: 动作 / 科幻 / 悬疑 / 惊悚 / 奇幻 %}\n{% msg 制片国家/地区: 日本 %}\n{% msg 首播: 2020-12-10(日本) %}\n{% endmoviebox %}</pre><p id=\"u996ddc4a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(68, 68, 68); font-size: 16px\">成功啦，我们来看下效果图:</span></p><p id=\"uec964add\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649829760803-7be4fc2d-9d2e-4300-bb28-d0b776097d4a.png\" width=\"800\" id=\"u81cd57ab\" class=\"ne-image\"></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u2650e4fe\" id=\"u2650e4fe\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [hexo]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22t2bG7%22%7D\"></card><p data-lake-id=\"u9a181b50\" id=\"u9a181b50\"><span data-lake-id=\"u8deb9c02\" id=\"u8deb9c02\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">有的时候发现官方的组件不够用，所以需要自己制作一个合适的组件。这里我简单写了一个可以互相交流一下。</span></p><h2 data-lake-id=\"YntnG\" id=\"YntnG\" style=\"text-align: left\"><span data-lake-id=\"u09b778f0\" id=\"u09b778f0\" style=\"color: var(--color-h2)\">步骤</span></h2><h3 data-lake-id=\"EEvsf\" id=\"EEvsf\"><span data-lake-id=\"u4f3e29cf\" id=\"u4f3e29cf\" style=\"color: rgb(68, 68, 68)\">新建js</span></h3><p data-lake-id=\"u1bcf636e\" id=\"u1bcf636e\"><span data-lake-id=\"u0c95113a\" id=\"u0c95113a\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">首先我们需要找到修改的位置</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22-hexo-theme-volantis%5Cn%20%20-scripts%5Cn%20%20-tags%5Cn%5Ct%20%20-xxx.js%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22hTOKl%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u82173651\" id=\"u82173651\"><span data-lake-id=\"uf5d728d7\" id=\"uf5d728d7\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">我们需要在</span><span style=\"color: rgb(68, 68, 68)\"><u><span data-lake-id=\"u091660ff\" id=\"u091660ff\" class=\"lake-fontsize-12\">tags</span></u></span><span data-lake-id=\"uf7fed604\" id=\"uf7fed604\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">文件夹中创建一个自己的js，例如：</span><span style=\"color: rgb(68, 68, 68)\"><u><span data-lake-id=\"u9f2925a7\" id=\"u9f2925a7\" class=\"lake-fontsize-12\">moviebox.js</span></u></span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22javascript%22%2C%22code%22%3A%22function%20postMoviebox(args%2C%20content)%20%7B%5Cn%5Ctreturn%20%60%3Cdiv%20class%3D'moviebox'%3E%3Cimg%20class%3D'moviebox-img'%20src%3D'%2Fimages%2Fmlzg02.webp'%20alt%3D'%E8%B1%86%E7%93%A3'%2F%3E%60%5Cn%5Ct%5Ct%2B%20%60%3Cdiv%20class%3D'moviebox-msg'%3E%60%5Cn%5Ct%5Ct%2B%20content%5Cn%5Ct%5Ct%2B%20%60%3C%2Fdiv%3E%3C%2Fdiv%3E%60%5Cn%7D%5Cn%5Cnfunction%20postMovieboxTitle(args)%20%7B%5Cn%5Ctargs%20%3D%20args.join('%20').split('%2C')%5Cn%5Ctreturn%20%60%3Cp%3E%60%20%2B%20args%5B0%5D%20%2B%20%60%3Cspan%20class%3D'moviebox-tag'%3E%60%20%2B%20args%5B1%5D%20%2B%20%60%3C%2Fspan%3C%2Fp%3E%60%5Cn%7D%5Cn%5Cnfunction%20postMovieboxMsg(args)%20%7B%5Cn%5Ctargs%20%3D%20args.join('%20').split('%2C')%5Cn%5Ctreturn%20%60%3Cp%3E%60%20%2B%20args%5B0%5D%20%2B%20%60%3C%2Fp%3E%60%5Cn%7D%5Cn%5Cnfunction%20postMovieboxStar(args)%20%7B%5Cn%5Ctargs%20%3D%20args.join('%20').split('%2C')%5Cn%5Ctvar%20stars%20%3D%20Math.floor(parseInt(args%5B0%5D)%20%2F%202)%5Cn%5Ctvar%20halfStars%20%3D%20parseInt(args%5B0%5D)%20%25%202%5Cn%5Ctvar%20result%20%3D%20'%3Cp%3E%E8%AF%84%E5%88%86%3A'%5Cn%5Ctif%20(stars%20%3C%3D%205%20%26%26%20stars%20%3E%3D%200)%20%7B%5Cn%5Ct%5Ctfor%20(let%20i%20%3D%200%3B%20i%20%3C%20stars%3B%20i%2B%2B)%20%7B%5Cn%5Ct%5Ct%5Ctresult%20%2B%3D%20'%3Ci%20class%3D%5C%22fa%20fa-star%5C%22%20aria-hidden%3D%5C%22true%5C%22%20style%3D%5C%22color%3Ayellow%5C%22%3E%3C%2Fi%3E'%5Cn%5Ct%5Ct%7D%5Cn%5Ct%5Ctif%20(halfStars%20%3E%3D%201)%20%7B%5Cn%5Ct%5Ct%5Ctresult%20%2B%3D%20'%3Ci%20class%3D%5C%22fa%20fa-star-half%5C%22%20aria-hidden%3D%5C%22true%5C%22%20style%3D%5C%22color%3Ayellow%5C%22%3E%3C%2Fi%3E'%5Cn%5Ct%5Ct%5Ctfor%20(let%20i%20%3D%200%3B%20i%20%3C%204%20-%20stars%3B%20i%2B%2B)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctresult%20%2B%3D%20'%3Ci%20class%3D%5C%22fa%20fa-star%5C%22%20aria-hidden%3D%5C%22true%5C%22%3E%3C%2Fi%3E'%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%7D%20else%20%7B%5Cn%5Ct%5Ct%5Ctfor%20(let%20i%20%3D%200%3B%20i%20%3C%205%20-%20stars%3B%20i%2B%2B)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctresult%20%2B%3D%20'%3Ci%20class%3D%5C%22fa%20fa-star%5C%22%20aria-hidden%3D%5C%22true%5C%22%3E%3C%2Fi%3E'%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ctresult%20%2B%3D%20%2Bargs%5B0%5D%5Cn%5Ct%7D%20else%20%7B%5Cn%5Ct%5Ctresult%20%2B%3D%20'%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B8%AA%E8%BF%B7'%5Cn%5Ct%7D%5Cn%5Cn%5Ctresult%20%2B%3D%20'%3C%2Fp%3E'%5Cn%5Ctreturn%20result%5Cn%7D%5Cn%5Cn%5Cnhexo.extend.tag.register('moviebox'%2C%20postMoviebox%2C%20%7B%20ends%3A%20true%20%7D)%3B%5Cnhexo.extend.tag.register('title'%2C%20postMovieboxTitle)%3B%5Cnhexo.extend.tag.register('star'%2C%20postMovieboxStar)%3B%5Cnhexo.extend.tag.register('msg'%2C%20postMovieboxMsg)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BpBlE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"vwuSK\" id=\"vwuSK\"><span data-lake-id=\"u2b270620\" id=\"u2b270620\" style=\"color: rgb(68, 68, 68)\">新建对应css文件</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22css%22%2C%22code%22%3A%22-hexo-theme-volantis%5Cn%20%20-source%5Cn%20%20%20%20-css%5Cn%5Ct%20%20-tag-plugins%5Cn%5Ct%20%20%20%20-xxx.css%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22U2F2X%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ud0e16595\" id=\"ud0e16595\"><span data-lake-id=\"u2094a6a6\" id=\"u2094a6a6\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">名字我和上面一样的</span><span style=\"color: rgb(68, 68, 68)\"><u><span data-lake-id=\"u8c087851\" id=\"u8c087851\" class=\"lake-fontsize-12\">moviebox.styl</span></u></span><span data-lake-id=\"uc343ded8\" id=\"uc343ded8\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">,内容如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22css%22%2C%22code%22%3A%22.moviebox%20%7B%5Cn%5Ctdisplay%3A%20flex%3B%5Cn%5Ctjustify-content%3A%20flex-start%3B%5Cn%5Ctposition%3A%20relative%3B%5Cn%5Ctmargin-bottom%3A%2010px%3B%5Cn%5Ctwidth%3A%20100%25%3B%5Cn%5Cn%5Ct.moviebox-tag%20%7B%5Cn%5Ct%5Ctpadding%3A%200px%2010px%3B%5Cn%5Ct%5Ctbackground-color%3A%20%23fcc%3B%5Cn%5Ct%5Ctfont-size%3A%2012px%3B%5Cn%5Ct%5Ctcolor%3A%20white%3B%5Cn%5Ct%5Ctborder-radius%3A%204px%3B%5Cn%5Ct%5Ctz-index%3A%2020%3B%5Cn%5Ct%5Ctmargin-left%3A%205px%3B%5Cn%5Ct%7D%5Cn%5Cn%5Ct.moviebox-img%20%7B%5Cn%5Ct%5Ctwidth%3A%20125px%3B%5Cn%5Ct%5Ctheight%3A%20180px%3B%5Cn%5Ct%5Ctmargin%3A%200%3B%5Cn%5Ct%7D%5Cn%5Cn%5Ct.moviebox-msg%20%7B%5Cn%5Ct%5Ctdisplay%3A%20flex%3B%5Cn%5Ct%5Ctflex-direction%3A%20column%3B%5Cn%5Ct%5Ctjustify-content%3A%20space-between%3B%5Cn%5Ct%5Ctmargin-left%3A%205px%3B%5Cn%5Cn%5Ct%5Ctp%20%7B%5Cn%5Ct%5Ct%5Ctmargin%3A%200%3B%5Cn%5Ct%5Ct%5Ctfont-size%3A%2012px%3B%5Cn%5Cn%5Ct%5Ct%5Cti%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctmargin-left%3A%202px%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ct%5Cti%3Afirst-child%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctmargin-left%3A%203px%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ct%5Cti%3Alast-child%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctmargin-right%3A%202px%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ctp%3Afirst-child%20%7B%5Cn%5Ct%5Ct%5Ctdisplay%3A%20flex%3B%5Cn%5Ct%5Ct%5Ctalign-items%3A%20center%3B%5Cn%5Ct%5Ct%5Ctfont-size%3A%2014px%3B%5Cn%5Ct%5Ct%5Ctfont-weight%3A%20bold%3B%5Cn%5Ct%5Ct%7D%5Cn%5Ct%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kAzsW%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"ua1Mj\" id=\"ua1Mj\"><span data-lake-id=\"u7b87d585\" id=\"u7b87d585\" style=\"color: rgb(68, 68, 68)\">重启程序,清除缓存</span></h3><p data-lake-id=\"u56e4bbd9\" id=\"u56e4bbd9\"><span data-lake-id=\"u11a997e7\" id=\"u11a997e7\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">在md文件中使用</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22markdown%22%2C%22code%22%3A%22%7B%25%20moviebox%20%25%7D%5Cn%7B%25%20title%20%E6%A0%87%E9%A2%98%3A%E5%BC%A5%E7%95%99%E4%B9%8B%E5%9B%BD%E7%9A%84%E7%88%B1%E4%B8%BD%E4%B8%9D2020%20%2C%20%E5%B7%B2%E8%BF%BD%E5%AE%8C%20%25%7D%5Cn%7B%25%20star%209.2%20%25%7D%5Cn%7B%25%20msg%20%E5%AF%BC%E6%BC%94%3A%20%E4%BD%90%E8%97%A4%E4%BF%A1%E4%BB%8B%20%25%7D%5Cn%7B%25%20msg%20%E7%BC%96%E5%89%A7%3A%20%E6%B8%A1%E9%83%A8%E8%BE%B0%E5%9F%8E%20%2F%20%E4%BB%93%E5%85%89%E6%B3%B0%E5%AD%90%20%2F%20%E4%BD%90%E8%97%A4%E4%BF%A1%E4%BB%8B%20%25%7D%5Cn%7B%25%20msg%20%E4%B8%BB%E6%BC%94%3A%20%E5%B1%B1%E5%B4%8E%E8%B4%A4%E4%BA%BA%20%2F%20%E5%9C%9F%E5%B1%8B%E5%A4%AA%E5%87%A4%20%2F%20%E6%9D%91%E4%B8%8A%E8%99%B9%E9%83%8E%20%2F%20%E6%A3%AE%E6%B0%B8%E6%82%A0%E5%B8%8C%20%2F%20%E4%B8%89%E5%90%89%E5%BD%A9%E8%8A%B1%20%2F%20%E6%9B%B4%E5%A4%9A...%20%25%7D%5Cn%7B%25%20msg%20%E7%B1%BB%E5%9E%8B%3A%20%E5%8A%A8%E4%BD%9C%20%2F%20%E7%A7%91%E5%B9%BB%20%2F%20%E6%82%AC%E7%96%91%20%2F%20%E6%83%8A%E6%82%9A%20%2F%20%E5%A5%87%E5%B9%BB%20%25%7D%5Cn%7B%25%20msg%20%E5%88%B6%E7%89%87%E5%9B%BD%E5%AE%B6%2F%E5%9C%B0%E5%8C%BA%3A%20%E6%97%A5%E6%9C%AC%20%25%7D%5Cn%7B%25%20msg%20%E9%A6%96%E6%92%AD%3A%202020-12-10(%E6%97%A5%E6%9C%AC)%20%25%7D%5Cn%7B%25%20endmoviebox%20%25%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22v8ha4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u996ddc4a\" id=\"u996ddc4a\"><span data-lake-id=\"uef941676\" id=\"uef941676\" class=\"lake-fontsize-12\" style=\"color: rgb(68, 68, 68)\">成功啦，我们来看下效果图:</span></p><p data-lake-id=\"uec964add\" id=\"uec964add\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649829760803-7be4fc2d-9d2e-4300-bb28-d0b776097d4a.png%22%2C%22taskId%22%3A%22uc62231d9-80dd-43df-a56c-ac9180ad5e2%22%2C%22clientId%22%3A%22u31cc4643-a74e-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A105373%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A800%2C%22originHeight%22%3A517%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%9C%AA%E6%9D%A5%E8%BF%BD%20%E6%AD%A3%E5%9C%A8%E8%BF%BD%20%E5%B7%B2%E8%BF%BD%E5%AE%8C%20%E5%B7%B2%E8%BF%BD%E5%AE%8C%202020-12-26%E5%BC%A5%E7%95%99%E4%B9%8B%E5%9B%BD%E7%9A%84%E7%88%B1%E4%B8%BD%E4%B8%9D%20%E5%B7%B2%E8%BF%BD%E5%AE%8C%20%E6%A0%87%E9%A2%98%3A%E5%BC%A5%E7%95%99%E4%B9%8B%E5%9B%BD%E7%9A%84%E7%88%B1%E4%B8%BD%E4%B8%9D2020%20%E8%87%AA%E9%A3%9F%E9%A3%9F192%20%E8%AF%84%E5%88%86%3A%20747%20%E5%AF%BC%E6%BC%94%3A%E4%BD%90%E8%97%A4%E4%BF%A1%E4%BB%8B%20%E7%BC%96%E5%89%A7%3A%E6%B8%A1%E9%83%A8%E8%BE%B0%E5%9F%8E%2F%E4%BB%93%E5%85%89%E6%B3%B0%E5%AD%90%2F%E4%BD%90%E8%97%A4%E4%BF%A1%E4%BB%8B%20%E4%B8%BB%E6%BC%94%3A%E5%B1%B1%E5%B3%99%E8%B4%A4%E4%BA%BA%2F%E5%9C%9F%E5%B1%8B%E5%A4%AA%E5%87%A4%2F%E6%9D%91%E4%B8%8A%E8%99%B9%E9%83%8E%2F%E6%A3%AE%E6%B0%B8%E6%82%A0%E5%B8%8C%2F%E4%B8%89%E5%90%89%E5%BD%A9%E8%8A%B1%2F%E6%9B%B4%E5%A4%9A..%20%E7%B1%BB%E5%9E%8B%3A%E5%8A%A8%E4%BD%9C%2F%E7%A7%91%E5%B9%BB%2F%E6%82%AC%E7%96%91%2F%E6%83%8A%E6%82%9A%2F%E5%A5%87%E5%B9%BB%20%E5%88%B6%E7%89%87%E5%9B%BD%E5%AE%B6%2F%E5%9C%B0%E5%8C%BA%3A%E6%97%A5%E6%9C%AC%20%E9%A6%96%E6%92%AD%3A2020-12-10(%E6%97%A5%E6%9C%AC)%20%E6%88%91%E6%89%8D%E5%88%9A%E5%88%9A%E5%BC%80%E5%A7%8B%E5%93%A6%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A148.45403%2C%22y%22%3A35.449085%2C%22width%22%3A44.19192000000001%2C%22height%22%3A16.326660000000004%2C%22text%22%3A%22%E6%9C%AA%E6%9D%A5%E8%BF%BD%22%7D%2C%7B%22x%22%3A88.53412%2C%22y%22%3A35.676006%2C%22width%22%3A43.82750999999999%2C%22height%22%3A15.196694%2C%22text%22%3A%22%E6%AD%A3%E5%9C%A8%E8%BF%BD%22%7D%2C%7B%22x%22%3A29.812653%2C%22y%22%3A36.34366%2C%22width%22%3A42.04091700000001%2C%22height%22%3A14.987627000000003%2C%22text%22%3A%22%E5%B7%B2%E8%BF%BD%E5%AE%8C%22%7D%2C%7B%22x%22%3A30.448202%2C%22y%22%3A158.16713%2C%22width%22%3A70.376608%2C%22height%22%3A23.754970000000014%2C%22text%22%3A%22%E5%B7%B2%E8%BF%BD%E5%AE%8C%22%7D%2C%7B%22x%22%3A52.39284%2C%22y%22%3A226.61426%2C%22width%22%3A193.4945%2C%22height%22%3A14.751869999999997%2C%22text%22%3A%222020-12-26%E5%BC%A5%E7%95%99%E4%B9%8B%E5%9B%BD%E7%9A%84%E7%88%B1%E4%B8%BD%E4%B8%9D%22%7D%2C%7B%22x%22%3A391.97696%2C%22y%22%3A277.07864%2C%22width%22%3A37.085879999999975%2C%22height%22%3A13.012789999999995%2C%22text%22%3A%22%E5%B7%B2%E8%BF%BD%E5%AE%8C%22%7D%2C%7B%22x%22%3A199.27654%2C%22y%22%3A277.15985%2C%22width%22%3A178.6569%2C%22height%22%3A15.014369999999985%2C%22text%22%3A%22%E6%A0%87%E9%A2%98%3A%E5%BC%A5%E7%95%99%E4%B9%8B%E5%9B%BD%E7%9A%84%E7%88%B1%E4%B8%BD%E4%B8%9D2020%22%7D%2C%7B%22x%22%3A236.0039%2C%22y%22%3A300.5043%2C%22width%22%3A89.78280000000001%2C%22height%22%3A14.853000000000009%2C%22text%22%3A%22%E8%87%AA%E9%A3%9F%E9%A3%9F192%22%7D%2C%7B%22x%22%3A198.92882%2C%22y%22%3A302.0159%2C%22width%22%3A27.63521%2C%22height%22%3A13.194180000000017%2C%22text%22%3A%22%E8%AF%84%E5%88%86%3A%22%7D%2C%7B%22x%22%3A91.49259%2C%22y%22%3A305.64444%2C%22width%22%3A78.10977%2C%22height%22%3A32.52466000000004%2C%22text%22%3A%22747%22%7D%2C%7B%22x%22%3A199.35051%2C%22y%22%3A322.74387%2C%22width%22%3A77.36704999999998%2C%22height%22%3A14.470030000000008%2C%22text%22%3A%22%E5%AF%BC%E6%BC%94%3A%E4%BD%90%E8%97%A4%E4%BF%A1%E4%BB%8B%22%7D%2C%7B%22x%22%3A198.42802%2C%22y%22%3A345.37964%2C%22width%22%3A198.56414%2C%22height%22%3A15.975259999999992%2C%22text%22%3A%22%E7%BC%96%E5%89%A7%3A%E6%B8%A1%E9%83%A8%E8%BE%B0%E5%9F%8E%2F%E4%BB%93%E5%85%89%E6%B3%B0%E5%AD%90%2F%E4%BD%90%E8%97%A4%E4%BF%A1%E4%BB%8B%22%7D%2C%7B%22x%22%3A197.90186%2C%22y%22%3A368.10532%2C%22width%22%3A362.33319%2C%22height%22%3A14.575679999999977%2C%22text%22%3A%22%E4%B8%BB%E6%BC%94%3A%E5%B1%B1%E5%B3%99%E8%B4%A4%E4%BA%BA%2F%E5%9C%9F%E5%B1%8B%E5%A4%AA%E5%87%A4%2F%E6%9D%91%E4%B8%8A%E8%99%B9%E9%83%8E%2F%E6%A3%AE%E6%B0%B8%E6%82%A0%E5%B8%8C%2F%E4%B8%89%E5%90%89%E5%BD%A9%E8%8A%B1%2F%E6%9B%B4%E5%A4%9A..%22%7D%2C%7B%22x%22%3A198.40425%2C%22y%22%3A390.17087%2C%22width%22%3A197.07863000000003%2C%22height%22%3A16.02833000000004%2C%22text%22%3A%22%E7%B1%BB%E5%9E%8B%3A%E5%8A%A8%E4%BD%9C%2F%E7%A7%91%E5%B9%BB%2F%E6%82%AC%E7%96%91%2F%E6%83%8A%E6%82%9A%2F%E5%A5%87%E5%B9%BB%22%7D%2C%7B%22x%22%3A198.56757%2C%22y%22%3A413.83353%2C%22width%22%3A109.10275000000001%2C%22height%22%3A12.941100000000006%2C%22text%22%3A%22%E5%88%B6%E7%89%87%E5%9B%BD%E5%AE%B6%2F%E5%9C%B0%E5%8C%BA%3A%E6%97%A5%E6%9C%AC%22%7D%2C%7B%22x%22%3A199.8069%2C%22y%22%3A436.56003%2C%22width%22%3A125.8957%2C%22height%22%3A13.43652000000003%2C%22text%22%3A%22%E9%A6%96%E6%92%AD%3A2020-12-10(%E6%97%A5%E6%9C%AC)%22%7D%2C%7B%22x%22%3A52.048004%2C%22y%22%3A498.46097%2C%22width%22%3A101.272706%2C%22height%22%3A15.064830000000029%2C%22text%22%3A%22%E6%88%91%E6%89%8D%E5%88%9A%E5%88%9A%E5%BC%80%E5%A7%8B%E5%93%A6%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u81cd57ab%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 0,
    "hits": 0,
    "comments_count": 0,
    "word_count": 576,
    "created_at": "2022-04-13T03:59:57.000Z",
    "updated_at": "2023-07-27T02:10:28.000Z",
    "content_updated_at": "2023-07-27T02:10:28.000Z",
    "published_at": "2022-04-13T06:02:48.000Z",
    "first_published_at": "2022-04-13T06:02:48.205Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 926016341,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73230304,
    "type": "Doc",
    "slug": "mxtuec",
    "title": "PHP获取端操作系统类型 客户端和服务器端",
    "description": "tags: [php,操作系统类型]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net如何使用php获取当前操作系统类型呢？严格来说这里分两种情况:一种情况是获取服务器端的操作系统类型，一种是获取客户端的操作系统类...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ubbf9eabf\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,操作系统类型]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"Y4MYR\" class=\"ne-hr\"><p id=\"u521f8b46\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">如何使用</span><a href=\"https://xiaohuihui.net.cn/archives/tag/php/\" data-href=\"https://xiaohuihui.net.cn/archives/tag/php/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">php</span></a><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">获取当前操作系统类型呢？严格来说这里分两种情况:</span></p><p id=\"u0677460e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">一种情况是获取服务器端的操作系统类型，</span></p><p id=\"u21d75f01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">一种是获取客户端的操作系统类型。</span></p><p id=\"ube547cab\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">下面作者将对如何使用</span><a href=\"https://xiaohuihui.net.cn/archives/tag/php/\" data-href=\"https://xiaohuihui.net.cn/archives/tag/php/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">php</span></a><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">获取这两种情况下的操作系统类型和大家做一些分享。</span></p><p id=\"u153cf194\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（1）php获取服务器端的操作系统类型</span></p><p id=\"u8076d5e7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">这个时候可以使用php系统自带的常量 PHP_OS 或者系统函数php_uname('s')。关于这两者返回的值可能的情况基本有如下几种情况：</span></p><ul class=\"ne-ul\"><li id=\"u601c78a5\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">CYGWIN_NT-5.1</span></li><li id=\"u90e41ef8\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Darwin</span></li><li id=\"uae4009fd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">FreeBSD</span></li><li id=\"uf6ed0420\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">HP-UX</span></li><li id=\"u61734591\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">IRIX64</span></li><li id=\"u5020f9d0\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Linux</span></li><li id=\"u557d1685\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">NetBSD</span></li><li id=\"ua4343284\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">OpenBSD</span></li><li id=\"ud92fb471\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">SunOS</span></li><li id=\"uf0667d38\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Unix</span></li><li id=\"uac27f135\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">WIN32</span></li><li id=\"u5d799d3e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">WINNT</span></li><li id=\"ucd8394aa\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Windows</span></li><li id=\"udee8c194\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">CYGWIN_NT-5.1</span></li><li id=\"u3cd7a413\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">IRIX64</span></li><li id=\"u7d6f6d2a\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">SunOS</span></li><li id=\"u176f4618\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">HP-UX</span></li><li id=\"u1302e8cd\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">OpenBSD</span></li></ul><p id=\"uccca2766\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">不过根据具体情况读者还是自行打印出来结果看看最好，也许获得的结果不在上述之列。</span></p><p id=\"u86c65bb9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（2）php获取客户端的操作系统类型，这里分享一个函数，比网上流传的那些判断更加精准，而且没有bug</span></p><p id=\"ucb75d143\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">代码如下：</span></p><p id=\"u09fdbc0b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><pre data-language=\"php\" id=\"zTu5x\" class=\"ne-codeblock language-php\"><code>function get_os(){\n    $os='';\n    $Agent=$_SERVER['HTTP_USER_AGENT'];\n    if (eregi('win',$Agent)&amp;&amp;strpos($Agent, '95')){\n        $os='Windows 95';\n    }elseif(eregi('win 9x',$Agent)&amp;&amp;strpos($Agent, '4.90')){\n        $os='Windows ME';\n    }elseif(eregi('win',$Agent)&amp;&amp;ereg('98',$Agent)){\n        $os='Windows 98';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 5.0',$Agent)){\n        $os='Windows 2000';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 6.0',$Agent)){\n        $os='Windows Vista';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 6.1',$Agent)){\n        $os='Windows 7';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 5.1',$Agent)){\n        $os='Windows XP';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt',$Agent)){\n        $os='Windows NT';\n    }elseif(eregi('win',$Agent)&amp;&amp;ereg('32',$Agent)){\n        $os='Windows 32';\n    }elseif(eregi('linux',$Agent)){\n        $os='Linux';\n    }elseif(eregi('unix',$Agent)){\n        $os='Unix';\n    }else if(eregi('sun',$Agent)&amp;&amp;eregi('os',$Agent)){\n        $os='SunOS';\n    }elseif(eregi('ibm',$Agent)&amp;&amp;eregi('os',$Agent)){\n        $os='IBM OS/2';\n    }elseif(eregi('Mac',$Agent)&amp;&amp;eregi('PC',$Agent)){\n        $os='Macintosh';\n    }elseif(eregi('PowerPC',$Agent)){\n        $os='PowerPC';\n    }elseif(eregi('AIX',$Agent)){\n        $os='AIX';\n    }elseif(eregi('HPUX',$Agent)){\n        $os='HPUX';\n    }elseif(eregi('NetBSD',$Agent)){\n        $os='NetBSD';\n    }elseif(eregi('BSD',$Agent)){\n        $os='BSD';\n    }elseif(ereg('OSF1',$Agent)){\n        $os='OSF1';\n    }elseif(ereg('IRIX',$Agent)){\n        $os='IRIX';\n    }elseif(eregi('FreeBSD',$Agent)){\n        $os='FreeBSD';\n    }elseif($os==''){\n        $os='Unknown';\n    }\n    return $os;\n}</code></pre></div>",
    "body": "tags: [php,操作系统类型]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n如何使用[php](https://xiaohuihui.net.cn/archives/tag/php/)获取当前操作系统类型呢？严格来说这里分两种情况:<br />一种情况是获取服务器端的操作系统类型，<br />一种是获取客户端的操作系统类型。<br />下面作者将对如何使用[php](https://xiaohuihui.net.cn/archives/tag/php/)获取这两种情况下的操作系统类型和大家做一些分享。<br />（1）php获取服务器端的操作系统类型<br />这个时候可以使用php系统自带的常量 PHP_OS 或者系统函数php_uname('s')。关于这两者返回的值可能的情况基本有如下几种情况：\n\n- CYGWIN_NT-5.1\n- Darwin\n- FreeBSD\n- HP-UX\n- IRIX64\n- Linux\n- NetBSD\n- OpenBSD\n- SunOS\n- Unix\n- WIN32\n- WINNT\n- Windows\n- CYGWIN_NT-5.1\n- IRIX64\n- SunOS\n- HP-UX\n- OpenBSD\n\n不过根据具体情况读者还是自行打印出来结果看看最好，也许获得的结果不在上述之列。<br />（2）php获取客户端的操作系统类型，这里分享一个函数，比网上流传的那些判断更加精准，而且没有bug<br />代码如下：\n\n```php\nfunction get_os(){\n    $os='';\n    $Agent=$_SERVER['HTTP_USER_AGENT'];\n    if (eregi('win',$Agent)&&strpos($Agent, '95')){\n        $os='Windows 95';\n    }elseif(eregi('win 9x',$Agent)&&strpos($Agent, '4.90')){\n        $os='Windows ME';\n    }elseif(eregi('win',$Agent)&&ereg('98',$Agent)){\n        $os='Windows 98';\n    }elseif(eregi('win',$Agent)&&eregi('nt 5.0',$Agent)){\n        $os='Windows 2000';\n    }elseif(eregi('win',$Agent)&&eregi('nt 6.0',$Agent)){\n        $os='Windows Vista';\n    }elseif(eregi('win',$Agent)&&eregi('nt 6.1',$Agent)){\n        $os='Windows 7';\n    }elseif(eregi('win',$Agent)&&eregi('nt 5.1',$Agent)){\n        $os='Windows XP';\n    }elseif(eregi('win',$Agent)&&eregi('nt',$Agent)){\n        $os='Windows NT';\n    }elseif(eregi('win',$Agent)&&ereg('32',$Agent)){\n        $os='Windows 32';\n    }elseif(eregi('linux',$Agent)){\n        $os='Linux';\n    }elseif(eregi('unix',$Agent)){\n        $os='Unix';\n    }else if(eregi('sun',$Agent)&&eregi('os',$Agent)){\n        $os='SunOS';\n    }elseif(eregi('ibm',$Agent)&&eregi('os',$Agent)){\n        $os='IBM OS/2';\n    }elseif(eregi('Mac',$Agent)&&eregi('PC',$Agent)){\n        $os='Macintosh';\n    }elseif(eregi('PowerPC',$Agent)){\n        $os='PowerPC';\n    }elseif(eregi('AIX',$Agent)){\n        $os='AIX';\n    }elseif(eregi('HPUX',$Agent)){\n        $os='HPUX';\n    }elseif(eregi('NetBSD',$Agent)){\n        $os='NetBSD';\n    }elseif(eregi('BSD',$Agent)){\n        $os='BSD';\n    }elseif(ereg('OSF1',$Agent)){\n        $os='OSF1';\n    }elseif(ereg('IRIX',$Agent)){\n        $os='IRIX';\n    }elseif(eregi('FreeBSD',$Agent)){\n        $os='FreeBSD';\n    }elseif($os==''){\n        $os='Unknown';\n    }\n    return $os;\n}\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ubbf9eabf\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,操作系统类型]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"Y4MYR\" class=\"ne-hr\"><p id=\"u521f8b46\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">如何使用</span><a href=\"https://xiaohuihui.net.cn/archives/tag/php/\" data-href=\"https://xiaohuihui.net.cn/archives/tag/php/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">php</span></a><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">获取当前操作系统类型呢？严格来说这里分两种情况:</span></p><p id=\"u0677460e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">一种情况是获取服务器端的操作系统类型，</span></p><p id=\"u21d75f01\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">一种是获取客户端的操作系统类型。</span></p><p id=\"ube547cab\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">下面作者将对如何使用</span><a href=\"https://xiaohuihui.net.cn/archives/tag/php/\" data-href=\"https://xiaohuihui.net.cn/archives/tag/php/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">php</span></a><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">获取这两种情况下的操作系统类型和大家做一些分享。</span></p><p id=\"u153cf194\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（1）php获取服务器端的操作系统类型</span></p><p id=\"u8076d5e7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">这个时候可以使用php系统自带的常量 PHP_OS 或者系统函数php_uname('s')。关于这两者返回的值可能的情况基本有如下几种情况：</span></p><ul class=\"ne-ul\"><li id=\"u601c78a5\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">CYGWIN_NT-5.1</span></li><li id=\"u90e41ef8\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Darwin</span></li><li id=\"uae4009fd\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">FreeBSD</span></li><li id=\"uf6ed0420\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">HP-UX</span></li><li id=\"u61734591\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">IRIX64</span></li><li id=\"u5020f9d0\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Linux</span></li><li id=\"u557d1685\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">NetBSD</span></li><li id=\"ua4343284\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">OpenBSD</span></li><li id=\"ud92fb471\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">SunOS</span></li><li id=\"uf0667d38\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Unix</span></li><li id=\"uac27f135\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">WIN32</span></li><li id=\"u5d799d3e\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">WINNT</span></li><li id=\"ucd8394aa\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">Windows</span></li><li id=\"udee8c194\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">CYGWIN_NT-5.1</span></li><li id=\"u3cd7a413\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">IRIX64</span></li><li id=\"u7d6f6d2a\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">SunOS</span></li><li id=\"u176f4618\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">HP-UX</span></li><li id=\"u1302e8cd\"><span class=\"ne-text\" style=\"color: rgb(153, 153, 153)\">OpenBSD</span></li></ul><p id=\"uccca2766\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">不过根据具体情况读者还是自行打印出来结果看看最好，也许获得的结果不在上述之列。</span></p><p id=\"u86c65bb9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（2）php获取客户端的操作系统类型，这里分享一个函数，比网上流传的那些判断更加精准，而且没有bug</span></p><p id=\"ucb75d143\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">代码如下：</span></p><p id=\"u09fdbc0b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><pre data-language=\"php\" id=\"zTu5x\" class=\"ne-codeblock language-php\">function get_os(){\n    $os='';\n    $Agent=$_SERVER['HTTP_USER_AGENT'];\n    if (eregi('win',$Agent)&amp;&amp;strpos($Agent, '95')){\n        $os='Windows 95';\n    }elseif(eregi('win 9x',$Agent)&amp;&amp;strpos($Agent, '4.90')){\n        $os='Windows ME';\n    }elseif(eregi('win',$Agent)&amp;&amp;ereg('98',$Agent)){\n        $os='Windows 98';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 5.0',$Agent)){\n        $os='Windows 2000';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 6.0',$Agent)){\n        $os='Windows Vista';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 6.1',$Agent)){\n        $os='Windows 7';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt 5.1',$Agent)){\n        $os='Windows XP';\n    }elseif(eregi('win',$Agent)&amp;&amp;eregi('nt',$Agent)){\n        $os='Windows NT';\n    }elseif(eregi('win',$Agent)&amp;&amp;ereg('32',$Agent)){\n        $os='Windows 32';\n    }elseif(eregi('linux',$Agent)){\n        $os='Linux';\n    }elseif(eregi('unix',$Agent)){\n        $os='Unix';\n    }else if(eregi('sun',$Agent)&amp;&amp;eregi('os',$Agent)){\n        $os='SunOS';\n    }elseif(eregi('ibm',$Agent)&amp;&amp;eregi('os',$Agent)){\n        $os='IBM OS/2';\n    }elseif(eregi('Mac',$Agent)&amp;&amp;eregi('PC',$Agent)){\n        $os='Macintosh';\n    }elseif(eregi('PowerPC',$Agent)){\n        $os='PowerPC';\n    }elseif(eregi('AIX',$Agent)){\n        $os='AIX';\n    }elseif(eregi('HPUX',$Agent)){\n        $os='HPUX';\n    }elseif(eregi('NetBSD',$Agent)){\n        $os='NetBSD';\n    }elseif(eregi('BSD',$Agent)){\n        $os='BSD';\n    }elseif(ereg('OSF1',$Agent)){\n        $os='OSF1';\n    }elseif(ereg('IRIX',$Agent)){\n        $os='IRIX';\n    }elseif(eregi('FreeBSD',$Agent)){\n        $os='FreeBSD';\n    }elseif($os==''){\n        $os='Unknown';\n    }\n    return $os;\n}</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"ubbf9eabf\" id=\"ubbf9eabf\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,操作系统类型]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Y4MYR%22%7D\"></card><p data-lake-id=\"u521f8b46\" id=\"u521f8b46\"><span data-lake-id=\"u2a791525\" id=\"u2a791525\" style=\"color: rgb(83, 104, 121)\">如何使用</span><a href=\"https://xiaohuihui.net.cn/archives/tag/php/\" target=\"_blank\" data-lake-id=\"ue471098e\" id=\"ue471098e\"><span data-lake-id=\"uc9696048\" id=\"uc9696048\">php</span></a><span data-lake-id=\"u65b8131f\" id=\"u65b8131f\" style=\"color: rgb(83, 104, 121)\">获取当前操作系统类型呢？严格来说这里分两种情况:</span></p><p data-lake-id=\"u0677460e\" id=\"u0677460e\"><span data-lake-id=\"u852612d7\" id=\"u852612d7\" style=\"color: rgb(83, 104, 121)\">一种情况是获取服务器端的操作系统类型，</span></p><p data-lake-id=\"u21d75f01\" id=\"u21d75f01\"><span data-lake-id=\"udae59ef5\" id=\"udae59ef5\" style=\"color: rgb(83, 104, 121)\">一种是获取客户端的操作系统类型。</span></p><p data-lake-id=\"ube547cab\" id=\"ube547cab\"><span data-lake-id=\"ue0da50b1\" id=\"ue0da50b1\" style=\"color: rgb(83, 104, 121)\">下面作者将对如何使用</span><a href=\"https://xiaohuihui.net.cn/archives/tag/php/\" target=\"_blank\" data-lake-id=\"u6ddfd0c3\" id=\"u6ddfd0c3\"><span data-lake-id=\"u975a2cff\" id=\"u975a2cff\">php</span></a><span data-lake-id=\"u59f595af\" id=\"u59f595af\" style=\"color: rgb(83, 104, 121)\">获取这两种情况下的操作系统类型和大家做一些分享。</span></p><p data-lake-id=\"u153cf194\" id=\"u153cf194\"><span data-lake-id=\"u676640f0\" id=\"u676640f0\" style=\"color: rgb(83, 104, 121)\">（1）php获取服务器端的操作系统类型</span></p><p data-lake-id=\"u8076d5e7\" id=\"u8076d5e7\"><span data-lake-id=\"u148897eb\" id=\"u148897eb\" style=\"color: rgb(83, 104, 121)\">这个时候可以使用php系统自带的常量 PHP_OS 或者系统函数php_uname('s')。关于这两者返回的值可能的情况基本有如下几种情况：</span></p><ul list=\"u596ffe3a\"><li fid=\"u38013f7d\" data-lake-id=\"u601c78a5\" id=\"u601c78a5\"><span data-lake-id=\"u3628fce8\" id=\"u3628fce8\" style=\"color: rgb(153, 153, 153)\">CYGWIN_NT-5.1</span></li><li fid=\"u38013f7d\" data-lake-id=\"u90e41ef8\" id=\"u90e41ef8\"><span data-lake-id=\"u74edf0e0\" id=\"u74edf0e0\" style=\"color: rgb(153, 153, 153)\">Darwin</span></li><li fid=\"u38013f7d\" data-lake-id=\"uae4009fd\" id=\"uae4009fd\"><span data-lake-id=\"ue60c917b\" id=\"ue60c917b\" style=\"color: rgb(153, 153, 153)\">FreeBSD</span></li><li fid=\"u38013f7d\" data-lake-id=\"uf6ed0420\" id=\"uf6ed0420\"><span data-lake-id=\"u1cee2f54\" id=\"u1cee2f54\" style=\"color: rgb(153, 153, 153)\">HP-UX</span></li><li fid=\"u38013f7d\" data-lake-id=\"u61734591\" id=\"u61734591\"><span data-lake-id=\"uda43ae0e\" id=\"uda43ae0e\" style=\"color: rgb(153, 153, 153)\">IRIX64</span></li><li fid=\"u38013f7d\" data-lake-id=\"u5020f9d0\" id=\"u5020f9d0\"><span data-lake-id=\"ud30e2a61\" id=\"ud30e2a61\" style=\"color: rgb(153, 153, 153)\">Linux</span></li><li fid=\"u38013f7d\" data-lake-id=\"u557d1685\" id=\"u557d1685\"><span data-lake-id=\"u58869929\" id=\"u58869929\" style=\"color: rgb(153, 153, 153)\">NetBSD</span></li><li fid=\"u38013f7d\" data-lake-id=\"ua4343284\" id=\"ua4343284\"><span data-lake-id=\"u8bed1aee\" id=\"u8bed1aee\" style=\"color: rgb(153, 153, 153)\">OpenBSD</span></li><li fid=\"u38013f7d\" data-lake-id=\"ud92fb471\" id=\"ud92fb471\"><span data-lake-id=\"u112470a0\" id=\"u112470a0\" style=\"color: rgb(153, 153, 153)\">SunOS</span></li><li fid=\"u38013f7d\" data-lake-id=\"uf0667d38\" id=\"uf0667d38\"><span data-lake-id=\"ub758e399\" id=\"ub758e399\" style=\"color: rgb(153, 153, 153)\">Unix</span></li><li fid=\"u38013f7d\" data-lake-id=\"uac27f135\" id=\"uac27f135\"><span data-lake-id=\"ud5814d67\" id=\"ud5814d67\" style=\"color: rgb(153, 153, 153)\">WIN32</span></li><li fid=\"u38013f7d\" data-lake-id=\"u5d799d3e\" id=\"u5d799d3e\"><span data-lake-id=\"u8f09d2ff\" id=\"u8f09d2ff\" style=\"color: rgb(153, 153, 153)\">WINNT</span></li><li fid=\"u38013f7d\" data-lake-id=\"ucd8394aa\" id=\"ucd8394aa\"><span data-lake-id=\"u6c448b38\" id=\"u6c448b38\" style=\"color: rgb(153, 153, 153)\">Windows</span></li><li fid=\"u38013f7d\" data-lake-id=\"udee8c194\" id=\"udee8c194\"><span data-lake-id=\"u2eea1789\" id=\"u2eea1789\" style=\"color: rgb(153, 153, 153)\">CYGWIN_NT-5.1</span></li><li fid=\"u38013f7d\" data-lake-id=\"u3cd7a413\" id=\"u3cd7a413\"><span data-lake-id=\"u72037211\" id=\"u72037211\" style=\"color: rgb(153, 153, 153)\">IRIX64</span></li><li fid=\"u38013f7d\" data-lake-id=\"u7d6f6d2a\" id=\"u7d6f6d2a\"><span data-lake-id=\"udb4bf701\" id=\"udb4bf701\" style=\"color: rgb(153, 153, 153)\">SunOS</span></li><li fid=\"u38013f7d\" data-lake-id=\"u176f4618\" id=\"u176f4618\"><span data-lake-id=\"u25ecfa5e\" id=\"u25ecfa5e\" style=\"color: rgb(153, 153, 153)\">HP-UX</span></li><li fid=\"u38013f7d\" data-lake-id=\"u1302e8cd\" id=\"u1302e8cd\"><span data-lake-id=\"u78e62591\" id=\"u78e62591\" style=\"color: rgb(153, 153, 153)\">OpenBSD</span></li></ul><p data-lake-id=\"uccca2766\" id=\"uccca2766\"><span data-lake-id=\"u20497850\" id=\"u20497850\" style=\"color: rgb(83, 104, 121)\">不过根据具体情况读者还是自行打印出来结果看看最好，也许获得的结果不在上述之列。</span></p><p data-lake-id=\"u86c65bb9\" id=\"u86c65bb9\"><span data-lake-id=\"uf46b0fbf\" id=\"uf46b0fbf\" style=\"color: rgb(83, 104, 121)\">（2）php获取客户端的操作系统类型，这里分享一个函数，比网上流传的那些判断更加精准，而且没有bug</span></p><p data-lake-id=\"ucb75d143\" id=\"ucb75d143\"><span data-lake-id=\"ub3a0cb0d\" id=\"ub3a0cb0d\" style=\"color: rgb(83, 104, 121)\">代码如下：</span></p><p data-lake-id=\"u09fdbc0b\" id=\"u09fdbc0b\"><span data-lake-id=\"ud6de29a6\" id=\"ud6de29a6\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22function%20get_os()%7B%5Cn%20%20%20%20%24os%3D''%3B%5Cn%20%20%20%20%24Agent%3D%24_SERVER%5B'HTTP_USER_AGENT'%5D%3B%5Cn%20%20%20%20if%20(eregi('win'%2C%24Agent)%26%26strpos(%24Agent%2C%20'95'))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%2095'%3B%5Cn%20%20%20%20%7Delseif(eregi('win%209x'%2C%24Agent)%26%26strpos(%24Agent%2C%20'4.90'))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%20ME'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26ereg('98'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%2098'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26eregi('nt%205.0'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%202000'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26eregi('nt%206.0'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%20Vista'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26eregi('nt%206.1'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%207'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26eregi('nt%205.1'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%20XP'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26eregi('nt'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%20NT'%3B%5Cn%20%20%20%20%7Delseif(eregi('win'%2C%24Agent)%26%26ereg('32'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Windows%2032'%3B%5Cn%20%20%20%20%7Delseif(eregi('linux'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Linux'%3B%5Cn%20%20%20%20%7Delseif(eregi('unix'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Unix'%3B%5Cn%20%20%20%20%7Delse%20if(eregi('sun'%2C%24Agent)%26%26eregi('os'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'SunOS'%3B%5Cn%20%20%20%20%7Delseif(eregi('ibm'%2C%24Agent)%26%26eregi('os'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'IBM%20OS%2F2'%3B%5Cn%20%20%20%20%7Delseif(eregi('Mac'%2C%24Agent)%26%26eregi('PC'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Macintosh'%3B%5Cn%20%20%20%20%7Delseif(eregi('PowerPC'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'PowerPC'%3B%5Cn%20%20%20%20%7Delseif(eregi('AIX'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'AIX'%3B%5Cn%20%20%20%20%7Delseif(eregi('HPUX'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'HPUX'%3B%5Cn%20%20%20%20%7Delseif(eregi('NetBSD'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'NetBSD'%3B%5Cn%20%20%20%20%7Delseif(eregi('BSD'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'BSD'%3B%5Cn%20%20%20%20%7Delseif(ereg('OSF1'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'OSF1'%3B%5Cn%20%20%20%20%7Delseif(ereg('IRIX'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'IRIX'%3B%5Cn%20%20%20%20%7Delseif(eregi('FreeBSD'%2C%24Agent))%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'FreeBSD'%3B%5Cn%20%20%20%20%7Delseif(%24os%3D%3D'')%7B%5Cn%20%20%20%20%20%20%20%20%24os%3D'Unknown'%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20return%20%24os%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zTu5x%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 1,
    "read_count": 2,
    "hits": 2,
    "comments_count": 0,
    "word_count": 362,
    "created_at": "2022-04-12T10:12:44.000Z",
    "updated_at": "2024-03-22T09:17:34.000Z",
    "content_updated_at": "2023-07-27T02:10:33.000Z",
    "published_at": "2022-04-12T10:13:33.000Z",
    "first_published_at": "2022-04-12T10:13:12.693Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 924512723,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73229766,
    "type": "Doc",
    "slug": "fwgouk",
    "title": "MySQL查询当天当月数据",
    "description": "tags: [mysql]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net今天 select * from 表名 where to_days(时间字段名) = to_days(now()); 昨天 SELECT ...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u22e75aea\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"P9Et3\" class=\"ne-hr\"><pre data-language=\"sql\" id=\"Xdhgb\" class=\"ne-codeblock language-sql\"><code>今天\nselect * from 表名 where to_days(时间字段名) = to_days(now());\n昨天\nSELECT * FROM 表名 WHERE TO_DAYS( NOW( ) ) - TO_DAYS( 时间字段名) &lt;= 1\n近7天\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 7 DAY) &lt;= date(时间字段名)\n近30天\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 30 DAY) &lt;= date(时间字段名)\n本月\nSELECT * FROM 表名 WHERE DATE_FORMAT( 时间字段名, '%Y%m' ) = DATE_FORMAT( CURDATE( ) , '%Y%m' )\n上一月\nSELECT * FROM 表名 WHERE PERIOD_DIFF( date_format( now( ) , '%Y%m' ) ,date_format( 时间字段名, '%Y%m' ) ) =1\n查询本季度数据\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(now());\n查询上季度数据\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(DATE_SUB(now(),interval 1 QUARTER));\n查询本年数据\nselect * from `ht_invoice_information` where YEAR(create_date)=YEAR(NOW());\n查询上年数据\nselect * from `ht_invoice_information` where year(create_date)=year(date_sub(now(),interval 1 year));\n查询当前这周的数据\nSELECT name,submittime FROMenterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now());\n查询上周的数据\nSELECT name,submittime FROMenterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now())-1;\n查询上个月的数据\n\nselect name,submittime fromenterprise where date_format(submittime,'%Y-%m')=date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH),'%Y-%m')\n\nselect * from user where DATE_FORMAT(pudate,'%Y%m') = DATE_FORMAT(CURDATE(),'%Y%m') ;\n\nselect * from user where WEEKOFYEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = WEEKOFYEAR(now())\n\nselect * from user where MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now())\n\nselect * from user where YEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = YEAR(now()) and MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now())\n\nselect * from user where pudate between  上月最后一天 and 下月第一天\n\n查询当前月份的数据 \nselect name,submittime fromenterprise   wheredate_format(submittime,'%Y-%m')=date_format(now(),'%Y-%m')\n查询距离当前现在6个月的数据\nselect name,submittime fromenterprise where submittime betweendate_sub(now(),interval 6 month) and now();</code></pre><pre data-language=\"sql\" id=\"WJjtE\" class=\"ne-codeblock language-sql\"><code>今天\n\nselect * from 表名 where to_days(时间字段名) = to_days(now());\n昨天\n\nSELECT * FROM 表名 WHERE TO_DAYS( NOW( ) ) - TO_DAYS( 时间字段名) &lt;= 1\n近7天\n\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 7 DAY) &lt;= date(时间字段名)\n近30天\n\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 30 DAY) &lt;= date(时间字段名)\n本月\n\nSELECT * FROM 表名 WHERE DATE_FORMAT( 时间字段名, '%Y%m' ) = DATE_FORMAT( CURDATE( ) , '%Y%m' )\n上一月\n\nSELECT * FROM 表名 WHERE PERIOD_DIFF( date_format( now( ) , '%Y%m' ) , date_format( 时间字段名, '%Y%m' ) ) =1\n查询本季度数据\n\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(now());\n查询上季度数据\n\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(DATE_SUB(now(),interval 1 QUARTER));\n查询本年数据\n\nselect * from `ht_invoice_information` where YEAR(create_date)=YEAR(NOW());\n查询上年数据\n\nselect * from `ht_invoice_information` where year(create_date)=year(date_sub(now(),interval 1 year));\n查询当前这周的数据\n\nSELECT name,submittime FROM enterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now());\n查询上周的数据\n\nSELECT name,submittime FROM enterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now())-1;\n查询上个月的数据\n\n复制代码\nselect name,submittime from enterprise where date_format(submittime,'%Y-%m')=date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH),'%Y-%m')\n\nselect * from user where DATE_FORMAT(pudate,'%Y%m') = DATE_FORMAT(CURDATE(),'%Y%m') ; \n\nselect * from user where WEEKOFYEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = WEEKOFYEAR(now()) \n\nselect * from user where MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now()) \n\nselect * from user where YEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = YEAR(now()) and MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now()) \n\nselect * from user where pudate between  上月最后一天  and 下月第一天 \n复制代码\n查询当前月份的数据 \n\nselect name,submittime from enterprise   where date_format(submittime,'%Y-%m')=date_format(now(),'%Y-%m')\n查询距离当前现在6个月的数据\n\nselect name,submittime from enterprise where submittime between date_sub(now(),interval 6 month) and now();</code></pre></div>",
    "body": "tags: [mysql]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n```sql\n今天\nselect * from 表名 where to_days(时间字段名) = to_days(now());\n昨天\nSELECT * FROM 表名 WHERE TO_DAYS( NOW( ) ) - TO_DAYS( 时间字段名) <= 1\n近7天\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(时间字段名)\n近30天\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 30 DAY) <= date(时间字段名)\n本月\nSELECT * FROM 表名 WHERE DATE_FORMAT( 时间字段名, '%Y%m' ) = DATE_FORMAT( CURDATE( ) , '%Y%m' )\n上一月\nSELECT * FROM 表名 WHERE PERIOD_DIFF( date_format( now( ) , '%Y%m' ) ,date_format( 时间字段名, '%Y%m' ) ) =1\n查询本季度数据\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(now());\n查询上季度数据\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(DATE_SUB(now(),interval 1 QUARTER));\n查询本年数据\nselect * from `ht_invoice_information` where YEAR(create_date)=YEAR(NOW());\n查询上年数据\nselect * from `ht_invoice_information` where year(create_date)=year(date_sub(now(),interval 1 year));\n查询当前这周的数据\nSELECT name,submittime FROMenterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now());\n查询上周的数据\nSELECT name,submittime FROMenterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now())-1;\n查询上个月的数据\n\nselect name,submittime fromenterprise where date_format(submittime,'%Y-%m')=date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH),'%Y-%m')\n\nselect * from user where DATE_FORMAT(pudate,'%Y%m') = DATE_FORMAT(CURDATE(),'%Y%m') ;\n\nselect * from user where WEEKOFYEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = WEEKOFYEAR(now())\n\nselect * from user where MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now())\n\nselect * from user where YEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = YEAR(now()) and MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now())\n\nselect * from user where pudate between  上月最后一天 and 下月第一天\n\n查询当前月份的数据 \nselect name,submittime fromenterprise   wheredate_format(submittime,'%Y-%m')=date_format(now(),'%Y-%m')\n查询距离当前现在6个月的数据\nselect name,submittime fromenterprise where submittime betweendate_sub(now(),interval 6 month) and now();\n```\n```sql\n今天\n\nselect * from 表名 where to_days(时间字段名) = to_days(now());\n昨天\n\nSELECT * FROM 表名 WHERE TO_DAYS( NOW( ) ) - TO_DAYS( 时间字段名) <= 1\n近7天\n\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(时间字段名)\n近30天\n\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 30 DAY) <= date(时间字段名)\n本月\n\nSELECT * FROM 表名 WHERE DATE_FORMAT( 时间字段名, '%Y%m' ) = DATE_FORMAT( CURDATE( ) , '%Y%m' )\n上一月\n\nSELECT * FROM 表名 WHERE PERIOD_DIFF( date_format( now( ) , '%Y%m' ) , date_format( 时间字段名, '%Y%m' ) ) =1\n查询本季度数据\n\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(now());\n查询上季度数据\n\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(DATE_SUB(now(),interval 1 QUARTER));\n查询本年数据\n\nselect * from `ht_invoice_information` where YEAR(create_date)=YEAR(NOW());\n查询上年数据\n\nselect * from `ht_invoice_information` where year(create_date)=year(date_sub(now(),interval 1 year));\n查询当前这周的数据\n\nSELECT name,submittime FROM enterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now());\n查询上周的数据\n\nSELECT name,submittime FROM enterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now())-1;\n查询上个月的数据\n\n复制代码\nselect name,submittime from enterprise where date_format(submittime,'%Y-%m')=date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH),'%Y-%m')\n\nselect * from user where DATE_FORMAT(pudate,'%Y%m') = DATE_FORMAT(CURDATE(),'%Y%m') ; \n\nselect * from user where WEEKOFYEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = WEEKOFYEAR(now()) \n\nselect * from user where MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now()) \n\nselect * from user where YEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = YEAR(now()) and MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now()) \n\nselect * from user where pudate between  上月最后一天  and 下月第一天 \n复制代码\n查询当前月份的数据 \n\nselect name,submittime from enterprise   where date_format(submittime,'%Y-%m')=date_format(now(),'%Y-%m')\n查询距离当前现在6个月的数据\n\nselect name,submittime from enterprise where submittime between date_sub(now(),interval 6 month) and now();\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u22e75aea\" class=\"ne-p\"><span class=\"ne-text\">tags: [mysql]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"P9Et3\" class=\"ne-hr\"><pre data-language=\"sql\" id=\"Xdhgb\" class=\"ne-codeblock language-sql\">今天\nselect * from 表名 where to_days(时间字段名) = to_days(now());\n昨天\nSELECT * FROM 表名 WHERE TO_DAYS( NOW( ) ) - TO_DAYS( 时间字段名) &lt;= 1\n近7天\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 7 DAY) &lt;= date(时间字段名)\n近30天\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 30 DAY) &lt;= date(时间字段名)\n本月\nSELECT * FROM 表名 WHERE DATE_FORMAT( 时间字段名, '%Y%m' ) = DATE_FORMAT( CURDATE( ) , '%Y%m' )\n上一月\nSELECT * FROM 表名 WHERE PERIOD_DIFF( date_format( now( ) , '%Y%m' ) ,date_format( 时间字段名, '%Y%m' ) ) =1\n查询本季度数据\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(now());\n查询上季度数据\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(DATE_SUB(now(),interval 1 QUARTER));\n查询本年数据\nselect * from `ht_invoice_information` where YEAR(create_date)=YEAR(NOW());\n查询上年数据\nselect * from `ht_invoice_information` where year(create_date)=year(date_sub(now(),interval 1 year));\n查询当前这周的数据\nSELECT name,submittime FROMenterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now());\n查询上周的数据\nSELECT name,submittime FROMenterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now())-1;\n查询上个月的数据\n\nselect name,submittime fromenterprise where date_format(submittime,'%Y-%m')=date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH),'%Y-%m')\n\nselect * from user where DATE_FORMAT(pudate,'%Y%m') = DATE_FORMAT(CURDATE(),'%Y%m') ;\n\nselect * from user where WEEKOFYEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = WEEKOFYEAR(now())\n\nselect * from user where MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now())\n\nselect * from user where YEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = YEAR(now()) and MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now())\n\nselect * from user where pudate between  上月最后一天 and 下月第一天\n\n查询当前月份的数据 \nselect name,submittime fromenterprise   wheredate_format(submittime,'%Y-%m')=date_format(now(),'%Y-%m')\n查询距离当前现在6个月的数据\nselect name,submittime fromenterprise where submittime betweendate_sub(now(),interval 6 month) and now();</pre><pre data-language=\"sql\" id=\"WJjtE\" class=\"ne-codeblock language-sql\">今天\n\nselect * from 表名 where to_days(时间字段名) = to_days(now());\n昨天\n\nSELECT * FROM 表名 WHERE TO_DAYS( NOW( ) ) - TO_DAYS( 时间字段名) &lt;= 1\n近7天\n\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 7 DAY) &lt;= date(时间字段名)\n近30天\n\nSELECT * FROM 表名 where DATE_SUB(CURDATE(), INTERVAL 30 DAY) &lt;= date(时间字段名)\n本月\n\nSELECT * FROM 表名 WHERE DATE_FORMAT( 时间字段名, '%Y%m' ) = DATE_FORMAT( CURDATE( ) , '%Y%m' )\n上一月\n\nSELECT * FROM 表名 WHERE PERIOD_DIFF( date_format( now( ) , '%Y%m' ) , date_format( 时间字段名, '%Y%m' ) ) =1\n查询本季度数据\n\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(now());\n查询上季度数据\n\nselect * from `ht_invoice_information` where QUARTER(create_date)=QUARTER(DATE_SUB(now(),interval 1 QUARTER));\n查询本年数据\n\nselect * from `ht_invoice_information` where YEAR(create_date)=YEAR(NOW());\n查询上年数据\n\nselect * from `ht_invoice_information` where year(create_date)=year(date_sub(now(),interval 1 year));\n查询当前这周的数据\n\nSELECT name,submittime FROM enterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now());\n查询上周的数据\n\nSELECT name,submittime FROM enterprise WHERE YEARWEEK(date_format(submittime,'%Y-%m-%d')) = YEARWEEK(now())-1;\n查询上个月的数据\n\n复制代码\nselect name,submittime from enterprise where date_format(submittime,'%Y-%m')=date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH),'%Y-%m')\n\nselect * from user where DATE_FORMAT(pudate,'%Y%m') = DATE_FORMAT(CURDATE(),'%Y%m') ; \n\nselect * from user where WEEKOFYEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = WEEKOFYEAR(now()) \n\nselect * from user where MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now()) \n\nselect * from user where YEAR(FROM_UNIXTIME(pudate,'%y-%m-%d')) = YEAR(now()) and MONTH(FROM_UNIXTIME(pudate,'%y-%m-%d')) = MONTH(now()) \n\nselect * from user where pudate between  上月最后一天  and 下月第一天 \n复制代码\n查询当前月份的数据 \n\nselect name,submittime from enterprise   where date_format(submittime,'%Y-%m')=date_format(now(),'%Y-%m')\n查询距离当前现在6个月的数据\n\nselect name,submittime from enterprise where submittime between date_sub(now(),interval 6 month) and now();</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u22e75aea\" id=\"u22e75aea\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [mysql]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22P9Et3%22%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22%E4%BB%8A%E5%A4%A9%5Cnselect%20*%20from%20%E8%A1%A8%E5%90%8D%20where%20to_days(%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%20%3D%20to_days(now())%3B%5Cn%E6%98%A8%E5%A4%A9%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20WHERE%20TO_DAYS(%20NOW(%20)%20)%20-%20TO_DAYS(%20%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%20%3C%3D%201%5Cn%E8%BF%917%E5%A4%A9%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20where%20DATE_SUB(CURDATE()%2C%20INTERVAL%207%20DAY)%20%3C%3D%20date(%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%5Cn%E8%BF%9130%E5%A4%A9%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20where%20DATE_SUB(CURDATE()%2C%20INTERVAL%2030%20DAY)%20%3C%3D%20date(%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%5Cn%E6%9C%AC%E6%9C%88%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20WHERE%20DATE_FORMAT(%20%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D%2C%20'%25Y%25m'%20)%20%3D%20DATE_FORMAT(%20CURDATE(%20)%20%2C%20'%25Y%25m'%20)%5Cn%E4%B8%8A%E4%B8%80%E6%9C%88%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20WHERE%20PERIOD_DIFF(%20date_format(%20now(%20)%20%2C%20'%25Y%25m'%20)%20%2Cdate_format(%20%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D%2C%20'%25Y%25m'%20)%20)%20%3D1%5Cn%E6%9F%A5%E8%AF%A2%E6%9C%AC%E5%AD%A3%E5%BA%A6%E6%95%B0%E6%8D%AE%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20QUARTER(create_date)%3DQUARTER(now())%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E5%AD%A3%E5%BA%A6%E6%95%B0%E6%8D%AE%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20QUARTER(create_date)%3DQUARTER(DATE_SUB(now()%2Cinterval%201%20QUARTER))%3B%5Cn%E6%9F%A5%E8%AF%A2%E6%9C%AC%E5%B9%B4%E6%95%B0%E6%8D%AE%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20YEAR(create_date)%3DYEAR(NOW())%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E5%B9%B4%E6%95%B0%E6%8D%AE%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20year(create_date)%3Dyear(date_sub(now()%2Cinterval%201%20year))%3B%5Cn%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E8%BF%99%E5%91%A8%E7%9A%84%E6%95%B0%E6%8D%AE%5CnSELECT%20name%2Csubmittime%20FROMenterprise%20WHERE%20YEARWEEK(date_format(submittime%2C'%25Y-%25m-%25d'))%20%3D%20YEARWEEK(now())%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E5%91%A8%E7%9A%84%E6%95%B0%E6%8D%AE%5CnSELECT%20name%2Csubmittime%20FROMenterprise%20WHERE%20YEARWEEK(date_format(submittime%2C'%25Y-%25m-%25d'))%20%3D%20YEARWEEK(now())-1%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E4%B8%AA%E6%9C%88%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%5Cnselect%20name%2Csubmittime%20fromenterprise%20where%20date_format(submittime%2C'%25Y-%25m')%3Ddate_format(DATE_SUB(curdate()%2C%20INTERVAL%201%20MONTH)%2C'%25Y-%25m')%5Cn%5Cnselect%20*%20from%20user%20where%20DATE_FORMAT(pudate%2C'%25Y%25m')%20%3D%20DATE_FORMAT(CURDATE()%2C'%25Y%25m')%20%3B%5Cn%5Cnselect%20*%20from%20user%20where%20WEEKOFYEAR(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20WEEKOFYEAR(now())%5Cn%5Cnselect%20*%20from%20user%20where%20MONTH(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20MONTH(now())%5Cn%5Cnselect%20*%20from%20user%20where%20YEAR(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20YEAR(now())%20and%20MONTH(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20MONTH(now())%5Cn%5Cnselect%20*%20from%20user%20where%20pudate%20between%C2%A0%20%E4%B8%8A%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9%C2%A0and%20%E4%B8%8B%E6%9C%88%E7%AC%AC%E4%B8%80%E5%A4%A9%5Cn%5Cn%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E6%9C%88%E4%BB%BD%E7%9A%84%E6%95%B0%E6%8D%AE%C2%A0%5Cnselect%20name%2Csubmittime%20fromenterprise%C2%A0%C2%A0%20wheredate_format(submittime%2C'%25Y-%25m')%3Ddate_format(now()%2C'%25Y-%25m')%5Cn%E6%9F%A5%E8%AF%A2%E8%B7%9D%E7%A6%BB%E5%BD%93%E5%89%8D%E7%8E%B0%E5%9C%A86%E4%B8%AA%E6%9C%88%E7%9A%84%E6%95%B0%E6%8D%AE%5Cnselect%20name%2Csubmittime%20fromenterprise%20where%20submittime%20betweendate_sub(now()%2Cinterval%206%20month)%20and%20now()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Xdhgb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22%E4%BB%8A%E5%A4%A9%5Cn%5Cnselect%20*%20from%20%E8%A1%A8%E5%90%8D%20where%20to_days(%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%20%3D%20to_days(now())%3B%5Cn%E6%98%A8%E5%A4%A9%5Cn%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20WHERE%20TO_DAYS(%20NOW(%20)%20)%20-%20TO_DAYS(%20%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%20%3C%3D%201%5Cn%E8%BF%917%E5%A4%A9%5Cn%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20where%20DATE_SUB(CURDATE()%2C%20INTERVAL%207%20DAY)%20%3C%3D%20date(%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%5Cn%E8%BF%9130%E5%A4%A9%5Cn%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20where%20DATE_SUB(CURDATE()%2C%20INTERVAL%2030%20DAY)%20%3C%3D%20date(%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D)%5Cn%E6%9C%AC%E6%9C%88%5Cn%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20WHERE%20DATE_FORMAT(%20%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D%2C%20'%25Y%25m'%20)%20%3D%20DATE_FORMAT(%20CURDATE(%20)%20%2C%20'%25Y%25m'%20)%5Cn%E4%B8%8A%E4%B8%80%E6%9C%88%5Cn%5CnSELECT%20*%20FROM%20%E8%A1%A8%E5%90%8D%20WHERE%20PERIOD_DIFF(%20date_format(%20now(%20)%20%2C%20'%25Y%25m'%20)%20%2C%20date_format(%20%E6%97%B6%E9%97%B4%E5%AD%97%E6%AE%B5%E5%90%8D%2C%20'%25Y%25m'%20)%20)%20%3D1%5Cn%E6%9F%A5%E8%AF%A2%E6%9C%AC%E5%AD%A3%E5%BA%A6%E6%95%B0%E6%8D%AE%5Cn%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20QUARTER(create_date)%3DQUARTER(now())%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E5%AD%A3%E5%BA%A6%E6%95%B0%E6%8D%AE%5Cn%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20QUARTER(create_date)%3DQUARTER(DATE_SUB(now()%2Cinterval%201%20QUARTER))%3B%5Cn%E6%9F%A5%E8%AF%A2%E6%9C%AC%E5%B9%B4%E6%95%B0%E6%8D%AE%5Cn%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20YEAR(create_date)%3DYEAR(NOW())%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E5%B9%B4%E6%95%B0%E6%8D%AE%5Cn%5Cnselect%20*%20from%20%60ht_invoice_information%60%20where%20year(create_date)%3Dyear(date_sub(now()%2Cinterval%201%20year))%3B%5Cn%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E8%BF%99%E5%91%A8%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%5CnSELECT%20name%2Csubmittime%20FROM%20enterprise%20WHERE%20YEARWEEK(date_format(submittime%2C'%25Y-%25m-%25d'))%20%3D%20YEARWEEK(now())%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E5%91%A8%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%5CnSELECT%20name%2Csubmittime%20FROM%20enterprise%20WHERE%20YEARWEEK(date_format(submittime%2C'%25Y-%25m-%25d'))%20%3D%20YEARWEEK(now())-1%3B%5Cn%E6%9F%A5%E8%AF%A2%E4%B8%8A%E4%B8%AA%E6%9C%88%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%5Cn%E5%A4%8D%E5%88%B6%E4%BB%A3%E7%A0%81%5Cnselect%20name%2Csubmittime%20from%20enterprise%20where%20date_format(submittime%2C'%25Y-%25m')%3Ddate_format(DATE_SUB(curdate()%2C%20INTERVAL%201%20MONTH)%2C'%25Y-%25m')%5Cn%5Cnselect%20*%20from%20user%20where%20DATE_FORMAT(pudate%2C'%25Y%25m')%20%3D%20DATE_FORMAT(CURDATE()%2C'%25Y%25m')%20%3B%20%5Cn%5Cnselect%20*%20from%20user%20where%20WEEKOFYEAR(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20WEEKOFYEAR(now())%20%5Cn%5Cnselect%20*%20from%20user%20where%20MONTH(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20MONTH(now())%20%5Cn%5Cnselect%20*%20from%20user%20where%20YEAR(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20YEAR(now())%20and%20MONTH(FROM_UNIXTIME(pudate%2C'%25y-%25m-%25d'))%20%3D%20MONTH(now())%20%5Cn%5Cnselect%20*%20from%20user%20where%20pudate%20between%20%20%E4%B8%8A%E6%9C%88%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9%20%20and%20%E4%B8%8B%E6%9C%88%E7%AC%AC%E4%B8%80%E5%A4%A9%20%5Cn%E5%A4%8D%E5%88%B6%E4%BB%A3%E7%A0%81%5Cn%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E6%9C%88%E4%BB%BD%E7%9A%84%E6%95%B0%E6%8D%AE%20%5Cn%5Cnselect%20name%2Csubmittime%20from%20enterprise%20%20%20where%20date_format(submittime%2C'%25Y-%25m')%3Ddate_format(now()%2C'%25Y-%25m')%5Cn%E6%9F%A5%E8%AF%A2%E8%B7%9D%E7%A6%BB%E5%BD%93%E5%89%8D%E7%8E%B0%E5%9C%A86%E4%B8%AA%E6%9C%88%E7%9A%84%E6%95%B0%E6%8D%AE%5Cn%5Cnselect%20name%2Csubmittime%20from%20enterprise%20where%20submittime%20between%20date_sub(now()%2Cinterval%206%20month)%20and%20now()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22WJjtE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 5,
    "hits": 5,
    "comments_count": 0,
    "word_count": 675,
    "created_at": "2022-04-12T10:10:46.000Z",
    "updated_at": "2023-07-27T02:10:38.000Z",
    "content_updated_at": "2023-07-27T02:10:38.000Z",
    "published_at": "2022-04-12T10:11:21.000Z",
    "first_published_at": "2022-04-12T10:11:21.262Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 924507288,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73229105,
    "type": "Doc",
    "slug": "gzi0tw",
    "title": "php简单的生成html静态页面代码",
    "description": "tags: [html静态页,php]categories: 学无止境copyright_author_href: https://www.xiaohuihui.net<?php class CreateHtml {     function mkdir($prefix = 'article'...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u76f35564\" class=\"ne-p\"><span class=\"ne-text\">tags: [html静态页,php]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"eG6mB\" class=\"ne-hr\"><pre data-language=\"php\" id=\"ft7ed\" class=\"ne-codeblock language-php\"><code>&lt;?php\nclass CreateHtml\n{\n    function mkdir($prefix = 'article'){\n        $y = date('Y');\n        $p = DIRECTORY_SEPARATOR;\n        $filePath = 'article' . $p . $y . $p  . $p;\n        $a = explode($p, $filePath);\n        $path='';\n        foreach ($a as $dir) {\n            $path .= $dir . $p;\n            if (!is_dir($path)) {\n                //echo '没有这个目录'.$path;\n                mkdir($path, 0755);\n            }\n        }\n        return $filePath . $p;\n    }\n    \n    function start(){\n        ob_start();\n    }\n    \n    function end(){\n        $info = ob_get_contents();\n        $fileId = '12345';\n        $postfix = '.shtml';\n        $path = $this-&gt;mkdir($prefix = 'article');\n        $fileName = $fileId . $postfix;\n        $file = fopen($path . $fileName, 'w ');\n        fwrite($file, $info);\n        fclose($file);\n        ob_end_flush();\n    }\n}\n\n?&gt;\n&lt;?php\n$s = new CreateHtml();\n$s-&gt;start();\n?&gt;\n&lt;html&gt;\n&lt;body&gt;\n我是要输出的html页面代码， 你呢\n&lt;/body&gt;\n&lt;/html&gt;\n&lt;?php\n$s-&gt;end();\n?&gt;</code></pre></div>",
    "body": "tags: [html静态页,php]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n```php\n<?php\nclass CreateHtml\n{\n    function mkdir($prefix = 'article'){\n        $y = date('Y');\n        $p = DIRECTORY_SEPARATOR;\n        $filePath = 'article' . $p . $y . $p  . $p;\n        $a = explode($p, $filePath);\n        $path='';\n        foreach ($a as $dir) {\n            $path .= $dir . $p;\n            if (!is_dir($path)) {\n                //echo '没有这个目录'.$path;\n                mkdir($path, 0755);\n            }\n        }\n        return $filePath . $p;\n    }\n    \n    function start(){\n        ob_start();\n    }\n    \n    function end(){\n        $info = ob_get_contents();\n        $fileId = '12345';\n        $postfix = '.shtml';\n        $path = $this->mkdir($prefix = 'article');\n        $fileName = $fileId . $postfix;\n        $file = fopen($path . $fileName, 'w ');\n        fwrite($file, $info);\n        fclose($file);\n        ob_end_flush();\n    }\n}\n\n?>\n<?php\n$s = new CreateHtml();\n$s->start();\n?>\n<html>\n<body>\n我是要输出的html页面代码， 你呢\n</body>\n</html>\n<?php\n$s->end();\n?>\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u76f35564\" class=\"ne-p\"><span class=\"ne-text\">tags: [html静态页,php]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"eG6mB\" class=\"ne-hr\"><pre data-language=\"php\" id=\"ft7ed\" class=\"ne-codeblock language-php\">&lt;?php\nclass CreateHtml\n{\n    function mkdir($prefix = 'article'){\n        $y = date('Y');\n        $p = DIRECTORY_SEPARATOR;\n        $filePath = 'article' . $p . $y . $p  . $p;\n        $a = explode($p, $filePath);\n        $path='';\n        foreach ($a as $dir) {\n            $path .= $dir . $p;\n            if (!is_dir($path)) {\n                //echo '没有这个目录'.$path;\n                mkdir($path, 0755);\n            }\n        }\n        return $filePath . $p;\n    }\n    \n    function start(){\n        ob_start();\n    }\n    \n    function end(){\n        $info = ob_get_contents();\n        $fileId = '12345';\n        $postfix = '.shtml';\n        $path = $this-&gt;mkdir($prefix = 'article');\n        $fileName = $fileId . $postfix;\n        $file = fopen($path . $fileName, 'w ');\n        fwrite($file, $info);\n        fclose($file);\n        ob_end_flush();\n    }\n}\n\n?&gt;\n&lt;?php\n$s = new CreateHtml();\n$s-&gt;start();\n?&gt;\n&lt;html&gt;\n&lt;body&gt;\n我是要输出的html页面代码， 你呢\n&lt;/body&gt;\n&lt;/html&gt;\n&lt;?php\n$s-&gt;end();\n?&gt;</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u76f35564\" id=\"u76f35564\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [html静态页,php]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22eG6mB%22%7D\"></card><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%3C%3Fphp%5Cnclass%20CreateHtml%5Cn%7B%5Cn%20%20%20%20function%20mkdir(%24prefix%20%3D%20'article')%7B%5Cn%20%20%20%20%20%20%20%20%24y%20%3D%20date('Y')%3B%5Cn%20%20%20%20%20%20%20%20%24p%20%3D%20DIRECTORY_SEPARATOR%3B%5Cn%20%20%20%20%20%20%20%20%24filePath%20%3D%20'article'%20.%20%24p%20.%20%24y%20.%20%24p%20%20.%20%24p%3B%5Cn%20%20%20%20%20%20%20%20%24a%20%3D%20explode(%24p%2C%20%24filePath)%3B%5Cn%20%20%20%20%20%20%20%20%24path%3D''%3B%5Cn%20%20%20%20%20%20%20%20foreach%20(%24a%20as%20%24dir)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24path%20.%3D%20%24dir%20.%20%24p%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(!is_dir(%24path))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2Fecho%20'%E6%B2%A1%E6%9C%89%E8%BF%99%E4%B8%AA%E7%9B%AE%E5%BD%95'.%24path%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mkdir(%24path%2C%200755)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20return%20%24filePath%20.%20%24p%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20function%20start()%7B%5Cn%20%20%20%20%20%20%20%20ob_start()%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20%5Cn%20%20%20%20function%20end()%7B%5Cn%20%20%20%20%20%20%20%20%24info%20%3D%20ob_get_contents()%3B%5Cn%20%20%20%20%20%20%20%20%24fileId%20%3D%20'12345'%3B%5Cn%20%20%20%20%20%20%20%20%24postfix%20%3D%20'.shtml'%3B%5Cn%20%20%20%20%20%20%20%20%24path%20%3D%20%24this-%3Emkdir(%24prefix%20%3D%20'article')%3B%5Cn%20%20%20%20%20%20%20%20%24fileName%20%3D%20%24fileId%20.%20%24postfix%3B%5Cn%20%20%20%20%20%20%20%20%24file%20%3D%20fopen(%24path%20.%20%24fileName%2C%20'w%20')%3B%5Cn%20%20%20%20%20%20%20%20fwrite(%24file%2C%20%24info)%3B%5Cn%20%20%20%20%20%20%20%20fclose(%24file)%3B%5Cn%20%20%20%20%20%20%20%20ob_end_flush()%3B%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%5Cn%3F%3E%5Cn%3C%3Fphp%5Cn%24s%20%3D%20new%20CreateHtml()%3B%5Cn%24s-%3Estart()%3B%5Cn%3F%3E%5Cn%3Chtml%3E%5Cn%3Cbody%3E%5Cn%E6%88%91%E6%98%AF%E8%A6%81%E8%BE%93%E5%87%BA%E7%9A%84html%E9%A1%B5%E9%9D%A2%E4%BB%A3%E7%A0%81%EF%BC%8C%20%E4%BD%A0%E5%91%A2%5Cn%3C%2Fbody%3E%5Cn%3C%2Fhtml%3E%5Cn%3C%3Fphp%5Cn%24s-%3Eend()%3B%5Cn%3F%3E%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ft7ed%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 4,
    "hits": 4,
    "comments_count": 0,
    "word_count": 141,
    "created_at": "2022-04-12T10:08:19.000Z",
    "updated_at": "2023-07-27T02:10:43.000Z",
    "content_updated_at": "2023-07-27T02:10:43.000Z",
    "published_at": "2022-04-12T10:09:30.000Z",
    "first_published_at": "2022-04-12T10:08:31.972Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 924502221,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 73228741,
    "type": "Doc",
    "slug": "bxx1s8",
    "title": "composer 默认地址改为中国镜像地址",
    "description": "tags: [composer]categories: 学无止境copyright_author_href: https://www.xiaohuihui.netcomposer 默认地址改为中国镜像地址，以及中国镜像地址还原成默认地址一、查看当前镜像地址在命令行输入如下命令，即可查看全局镜像...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u2e0d3cdd\" class=\"ne-p\"><span class=\"ne-text\">tags: [composer]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"dTT51\" class=\"ne-hr\"><p id=\"u7c9be090\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">composer 默认地址改为中国镜像地址，以及中国镜像地址还原成默认地址</span></p><h3 id=\"KyOSY\"><span class=\"ne-text\">一、查看当前镜像地址</span></h3><p id=\"udbbf8c03\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">在命令行输入如下命令，即可查看全局镜像地址：</span></p><p id=\"uaf36c591\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">$ composer config -g repo.packagist</span></p><p id=\"u836d0525\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"u13c0e9d5\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(153, 153, 153) !important; background-color: rgb(221, 221, 221) !important\">PHP</span></strong></p><p id=\"u2a00d204\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"a34I8\" class=\"ne-codeblock language-plain\"><code>{\n&quot;type&quot;:&quot;composer&quot;,\n&quot;url&quot;:&quot;https://packagist.org&quot;,\n&quot;allow_ssl_downgrade&quot;:true\n}</code></pre><p id=\"u8eb16d18\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><p id=\"ua1a84a04\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">下面有把地址修改为中国镜像，如果中国镜像出现了问题，那么您可以还原成官方的默认地址，下面是详细。</span></p><h3 id=\"gVrOq\"><span class=\"ne-text\">二、启用中国全量镜像服务：</span></h3><p id=\"ud761e061\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">启用中国全量镜像服务有两种方式，具体配置方法如下：</span></p><h5 id=\"XQxvr\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">系统全局配置：</span></h5><p id=\"ua3da6736\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">可以使用 composer config -l -g 查看所有全局配置</span></p><p id=\"u4b6753d0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">composer config -l -g</span></p><p id=\"uc28902e5\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(255, 0, 0)\">使用如下命令将地址改为中国镜像地址：</span></strong></p><p id=\"ud0c082f3\" class=\"ne-p\" style=\"text-align: left\"><br></p><div class=\"ne-quote\"><p id=\"ufde1535a\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">composer config -g repo.packagist composer </span><a href=\"https://packagist.phpcomposer.com\" data-href=\"https://packagist.phpcomposer.com\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://packagist.phpcomposer.com</span></a></p></div><p id=\"u25a46a53\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"u7f939b6b\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(255, 0, 0)\">中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）</span></strong></p><p id=\"u34be2b4b\" class=\"ne-p\" style=\"text-align: left\"><br></p><div class=\"ne-quote\"><p id=\"u84186ee0\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">composer config -g repo.packagist composer </span><a href=\"https://packagist.phpcomposer.com\" data-href=\"https://packagist.phpcomposer.com\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://packagist.phpcomposer.com</span></a></p></div><p id=\"uc934839b\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"u1e2b2eca\" class=\"ne-p\" style=\"text-align: left\"><br></p><h5 id=\"eNb5y\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">单个项目配置：</span></h5><p id=\"u9608a523\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">在当前项目根目录可以使用 composer config -l 查看当前项目镜像配置</span></p><p id=\"uec2d0295\" class=\"ne-p\" style=\"text-align: left\"><br></p><div class=\"ne-quote\"><p id=\"ufee40092\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">composer config -l</span></p></div><p id=\"u5cdf8c1d\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"uc28581f2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">即将将配置信息添加到某个项目的 composer.</span><a href=\"https://xiaohuihui.net.cn/archives/tag/js/\" data-href=\"https://xiaohuihui.net.cn/archives/tag/js/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">js</span></a><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">on 文件中。修改当前项目的composer.json配置文件有两种方式，最后都是向文件中添加如下配置信息：</span></p><p id=\"ud0314d21\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"NBeqh\" class=\"ne-codeblock language-plain\"><code>&quot;repositories&quot;: {\n&quot;packagist&quot;: {\n   &quot;type&quot;: &quot;composer&quot;,\n   &quot;url&quot;: &quot;https://packagist.phpcomposer.com&quot;\n}\n}</code></pre><p id=\"uca80821d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><p id=\"udf488f67\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">2.1 打开命令行并进入项目的根目录（也就是 composer.json 文件所在目录），执行如下命令：</span></p><p id=\"u9cdce94d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">将当前项目地址改为中国镜像地址：</span></p><p id=\"u5ced014c\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"qa68h\" class=\"ne-codeblock language-plain\"><code>composer config repo.packagist composer https://packagist.phpcomposer.com</code></pre><p id=\"ua742b87b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">该命令将会在当前项目中的 composer.json 文件的末尾自动添加镜像的配置信息</span></p><p id=\"ucb3e8b18\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">将当前项目中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）</span></p><pre data-language=\"plain\" id=\"npv28\" class=\"ne-codeblock language-plain\"><code>composer config repo.packagist composer https://packagist.org</code></pre><p id=\"ufe0f28d0\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"ud8734973\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">2.2 手动向composer.json文件中添加以上信息</span></p><p id=\"u2519f867\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">默认地址改为中国镜像地址：</span></p><p id=\"ua15f2508\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"MgV22\" class=\"ne-codeblock language-plain\"><code>&quot;repositories&quot;: {\n   &quot;packagist&quot;: {\n       &quot;type&quot;: &quot;composer&quot;,\n       &quot;url&quot;: &quot;https://packagist.phpcomposer.com&quot;\n   }\n}</code></pre><p id=\"ua06f849e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><p id=\"u04c351fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）<br /></span><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">将url的值改为：</span><a href=\"https://xiaohuihui.net.cn/wp-content/themes/begin/inc/go.php?url=https://packagist.org/\" data-href=\"https://xiaohuihui.net.cn/wp-content/themes/begin/inc/go.php?url=https://packagist.org/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://packagist.org</span></a></p></div>",
    "body": "tags: [composer]<br />categories: 学无止境<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\ncomposer 默认地址改为中国镜像地址，以及中国镜像地址还原成默认地址\n<a name=\"KyOSY\"></a>\n### 一、查看当前镜像地址\n在命令行输入如下命令，即可查看全局镜像地址：<br />$ composer config -g repo.packagist\n\n**PHP**\n\n```\n{\n\"type\":\"composer\",\n\"url\":\"https://packagist.org\",\n\"allow_ssl_downgrade\":true\n}\n```\n\n下面有把地址修改为中国镜像，如果中国镜像出现了问题，那么您可以还原成官方的默认地址，下面是详细。\n<a name=\"gVrOq\"></a>\n### 二、启用中国全量镜像服务：\n启用中国全量镜像服务有两种方式，具体配置方法如下：\n<a name=\"XQxvr\"></a>\n##### 系统全局配置：\n可以使用 composer config -l -g 查看所有全局配置<br />composer config -l -g<br />**使用如下命令将地址改为中国镜像地址：**\n\n> composer config -g repo.packagist composer [https://packagist.phpcomposer.com](https://packagist.phpcomposer.com)\n\n\n**中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）**\n\n> composer config -g repo.packagist composer [https://packagist.phpcomposer.com](https://packagist.phpcomposer.com)\n\n\n\n<a name=\"eNb5y\"></a>\n##### 单个项目配置：\n在当前项目根目录可以使用 composer config -l 查看当前项目镜像配置\n\n> composer config -l\n\n\n即将将配置信息添加到某个项目的 composer.[js](https://xiaohuihui.net.cn/archives/tag/js/)on 文件中。修改当前项目的composer.json配置文件有两种方式，最后都是向文件中添加如下配置信息：\n\n```\n\"repositories\": {\n\"packagist\": {\n   \"type\": \"composer\",\n   \"url\": \"https://packagist.phpcomposer.com\"\n}\n}\n```\n\n2.1 打开命令行并进入项目的根目录（也就是 composer.json 文件所在目录），执行如下命令：<br />将当前项目地址改为中国镜像地址：\n\n```\ncomposer config repo.packagist composer https://packagist.phpcomposer.com\n```\n该命令将会在当前项目中的 composer.json 文件的末尾自动添加镜像的配置信息<br />将当前项目中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）\n```\ncomposer config repo.packagist composer https://packagist.org\n```\n\n2.2 手动向composer.json文件中添加以上信息<br />默认地址改为中国镜像地址：\n\n```\n\"repositories\": {\n   \"packagist\": {\n       \"type\": \"composer\",\n       \"url\": \"https://packagist.phpcomposer.com\"\n   }\n}\n```\n\n中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）<br />将url的值改为：[https://packagist.org](https://xiaohuihui.net.cn/wp-content/themes/begin/inc/go.php?url=https://packagist.org/)\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u2e0d3cdd\" class=\"ne-p\"><span class=\"ne-text\">tags: [composer]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: 学无止境</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"dTT51\" class=\"ne-hr\"><p id=\"u7c9be090\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">composer 默认地址改为中国镜像地址，以及中国镜像地址还原成默认地址</span></p><h3 id=\"KyOSY\"><span class=\"ne-text\">一、查看当前镜像地址</span></h3><p id=\"udbbf8c03\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">在命令行输入如下命令，即可查看全局镜像地址：</span></p><p id=\"uaf36c591\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">$ composer config -g repo.packagist</span></p><p id=\"u836d0525\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"u13c0e9d5\" class=\"ne-p\" style=\"text-align: left\"><strong><span class=\"ne-text\" style=\"color: rgb(153, 153, 153) !important; background-color: rgb(221, 221, 221) !important\">PHP</span></strong></p><p id=\"u2a00d204\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"a34I8\" class=\"ne-codeblock language-plain\">{\n&quot;type&quot;:&quot;composer&quot;,\n&quot;url&quot;:&quot;https://packagist.org&quot;,\n&quot;allow_ssl_downgrade&quot;:true\n}</pre><p id=\"u8eb16d18\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><p id=\"ua1a84a04\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">下面有把地址修改为中国镜像，如果中国镜像出现了问题，那么您可以还原成官方的默认地址，下面是详细。</span></p><h3 id=\"gVrOq\"><span class=\"ne-text\">二、启用中国全量镜像服务：</span></h3><p id=\"ud761e061\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">启用中国全量镜像服务有两种方式，具体配置方法如下：</span></p><h5 id=\"XQxvr\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">系统全局配置：</span></h5><p id=\"ua3da6736\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">可以使用 composer config -l -g 查看所有全局配置</span></p><p id=\"u4b6753d0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">composer config -l -g</span></p><p id=\"uc28902e5\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(255, 0, 0)\">使用如下命令将地址改为中国镜像地址：</span></strong></p><p id=\"ud0c082f3\" class=\"ne-p\" style=\"text-align: left\"><br></p><div class=\"ne-quote\"><p id=\"ufde1535a\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">composer config -g repo.packagist composer </span><a href=\"https://packagist.phpcomposer.com\" data-href=\"https://packagist.phpcomposer.com\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://packagist.phpcomposer.com</span></a></p></div><p id=\"u25a46a53\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"u7f939b6b\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(255, 0, 0)\">中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）</span></strong></p><p id=\"u34be2b4b\" class=\"ne-p\" style=\"text-align: left\"><br></p><div class=\"ne-quote\"><p id=\"u84186ee0\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">composer config -g repo.packagist composer </span><a href=\"https://packagist.phpcomposer.com\" data-href=\"https://packagist.phpcomposer.com\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://packagist.phpcomposer.com</span></a></p></div><p id=\"uc934839b\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"u1e2b2eca\" class=\"ne-p\" style=\"text-align: left\"><br></p><h5 id=\"eNb5y\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">单个项目配置：</span></h5><p id=\"u9608a523\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">在当前项目根目录可以使用 composer config -l 查看当前项目镜像配置</span></p><p id=\"uec2d0295\" class=\"ne-p\" style=\"text-align: left\"><br></p><div class=\"ne-quote\"><p id=\"ufee40092\" class=\"ne-p\" style=\"text-align: left\"><span class=\"ne-text\">composer config -l</span></p></div><p id=\"u5cdf8c1d\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"uc28581f2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">即将将配置信息添加到某个项目的 composer.</span><a href=\"https://xiaohuihui.net.cn/archives/tag/js/\" data-href=\"https://xiaohuihui.net.cn/archives/tag/js/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">js</span></a><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">on 文件中。修改当前项目的composer.json配置文件有两种方式，最后都是向文件中添加如下配置信息：</span></p><p id=\"ud0314d21\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"NBeqh\" class=\"ne-codeblock language-plain\">&quot;repositories&quot;: {\n&quot;packagist&quot;: {\n   &quot;type&quot;: &quot;composer&quot;,\n   &quot;url&quot;: &quot;https://packagist.phpcomposer.com&quot;\n}\n}</pre><p id=\"uca80821d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><p id=\"udf488f67\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">2.1 打开命令行并进入项目的根目录（也就是 composer.json 文件所在目录），执行如下命令：</span></p><p id=\"u9cdce94d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">将当前项目地址改为中国镜像地址：</span></p><p id=\"u5ced014c\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"qa68h\" class=\"ne-codeblock language-plain\">composer config repo.packagist composer https://packagist.phpcomposer.com</pre><p id=\"ua742b87b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">该命令将会在当前项目中的 composer.json 文件的末尾自动添加镜像的配置信息</span></p><p id=\"ucb3e8b18\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(125, 163, 60)\">将当前项目中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）</span></p><pre data-language=\"plain\" id=\"npv28\" class=\"ne-codeblock language-plain\">composer config repo.packagist composer https://packagist.org</pre><p id=\"ufe0f28d0\" class=\"ne-p\" style=\"text-align: left\"><br></p><p id=\"ud8734973\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">2.2 手动向composer.json文件中添加以上信息</span></p><p id=\"u2519f867\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">默认地址改为中国镜像地址：</span></p><p id=\"ua15f2508\" class=\"ne-p\" style=\"text-align: left\"><br></p><pre data-language=\"plain\" id=\"MgV22\" class=\"ne-codeblock language-plain\">&quot;repositories&quot;: {\n   &quot;packagist&quot;: {\n       &quot;type&quot;: &quot;composer&quot;,\n       &quot;url&quot;: &quot;https://packagist.phpcomposer.com&quot;\n   }\n}</pre><p id=\"ua06f849e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><p id=\"u04c351fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）<br /></span><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">将url的值改为：</span><a href=\"https://xiaohuihui.net.cn/wp-content/themes/begin/inc/go.php?url=https://packagist.org/\" data-href=\"https://xiaohuihui.net.cn/wp-content/themes/begin/inc/go.php?url=https://packagist.org/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://packagist.org</span></a></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u2e0d3cdd\" id=\"u2e0d3cdd\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [composer]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: 学无止境</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22dTT51%22%7D\"></card><p data-lake-id=\"u7c9be090\" id=\"u7c9be090\"><span data-lake-id=\"uc3473931\" id=\"uc3473931\" style=\"color: rgb(83, 104, 121)\">composer 默认地址改为中国镜像地址，以及中国镜像地址还原成默认地址</span></p><h3 data-lake-id=\"KyOSY\" id=\"KyOSY\"><span data-lake-id=\"u6df27dc8\" id=\"u6df27dc8\">一、查看当前镜像地址</span></h3><p data-lake-id=\"udbbf8c03\" id=\"udbbf8c03\"><span data-lake-id=\"ufeb83981\" id=\"ufeb83981\" style=\"color: rgb(83, 104, 121)\">在命令行输入如下命令，即可查看全局镜像地址：</span></p><p data-lake-id=\"uaf36c591\" id=\"uaf36c591\"><span data-lake-id=\"ufa5ceadf\" id=\"ufa5ceadf\" style=\"color: rgb(125, 163, 60)\">$ composer config -g repo.packagist</span></p><p data-lake-id=\"u836d0525\" id=\"u836d0525\" style=\"text-align: left\"><br></p><p data-lake-id=\"u13c0e9d5\" id=\"u13c0e9d5\" style=\"text-align: left\"><strong><span data-lake-id=\"u38b2c9c5\" id=\"u38b2c9c5\" style=\"color: rgb(153, 153, 153) !important; background-color: rgb(221, 221, 221) !important\">PHP</span></strong></p><p data-lake-id=\"u2a00d204\" id=\"u2a00d204\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%7B%5Cn%5C%22type%5C%22%3A%5C%22composer%5C%22%2C%5Cn%5C%22url%5C%22%3A%5C%22https%3A%2F%2Fpackagist.org%5C%22%2C%5Cn%5C%22allow_ssl_downgrade%5C%22%3Atrue%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22a34I8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8eb16d18\" id=\"u8eb16d18\"><span data-lake-id=\"u3419252b\" id=\"u3419252b\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><p data-lake-id=\"ua1a84a04\" id=\"ua1a84a04\"><span data-lake-id=\"ud53aabc4\" id=\"ud53aabc4\" style=\"color: rgb(83, 104, 121)\">下面有把地址修改为中国镜像，如果中国镜像出现了问题，那么您可以还原成官方的默认地址，下面是详细。</span></p><h3 data-lake-id=\"gVrOq\" id=\"gVrOq\"><span data-lake-id=\"u11cdb3ac\" id=\"u11cdb3ac\">二、启用中国全量镜像服务：</span></h3><p data-lake-id=\"ud761e061\" id=\"ud761e061\"><span data-lake-id=\"u153f941f\" id=\"u153f941f\" style=\"color: rgb(83, 104, 121)\">启用中国全量镜像服务有两种方式，具体配置方法如下：</span></p><h5 data-lake-id=\"XQxvr\" id=\"XQxvr\"><span data-lake-id=\"u8cc1d5ed\" id=\"u8cc1d5ed\" style=\"color: rgb(83, 104, 121)\">系统全局配置：</span></h5><p data-lake-id=\"ua3da6736\" id=\"ua3da6736\"><span data-lake-id=\"u9c951a59\" id=\"u9c951a59\" style=\"color: rgb(83, 104, 121)\">可以使用 composer config -l -g 查看所有全局配置</span></p><p data-lake-id=\"u4b6753d0\" id=\"u4b6753d0\"><span data-lake-id=\"u99e69c2d\" id=\"u99e69c2d\" style=\"color: rgb(125, 163, 60)\">composer config -l -g</span></p><p data-lake-id=\"uc28902e5\" id=\"uc28902e5\"><strong><span data-lake-id=\"u2f78efd8\" id=\"u2f78efd8\" style=\"color: rgb(255, 0, 0)\">使用如下命令将地址改为中国镜像地址：</span></strong></p><p data-lake-id=\"ud0c082f3\" id=\"ud0c082f3\" style=\"text-align: left\"><br></p><blockquote data-lake-id=\"ue7bea292\" id=\"ue7bea292\"><p data-lake-id=\"ufde1535a\" id=\"ufde1535a\" style=\"text-align: left\"><span data-lake-id=\"uc96b61ed\" id=\"uc96b61ed\">composer config -g repo.packagist composer </span><a href=\"https://packagist.phpcomposer.com\" target=\"_blank\" data-lake-id=\"u663a1cc2\" id=\"u663a1cc2\"><span data-lake-id=\"u996ac4eb\" id=\"u996ac4eb\">https://packagist.phpcomposer.com</span></a></p></blockquote><p data-lake-id=\"u25a46a53\" id=\"u25a46a53\" style=\"text-align: left\"><br></p><p data-lake-id=\"u7f939b6b\" id=\"u7f939b6b\"><strong><span data-lake-id=\"u0fb69f21\" id=\"u0fb69f21\" style=\"color: rgb(255, 0, 0)\">中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）</span></strong></p><p data-lake-id=\"u34be2b4b\" id=\"u34be2b4b\" style=\"text-align: left\"><br></p><blockquote data-lake-id=\"ued917faa\" id=\"ued917faa\"><p data-lake-id=\"u84186ee0\" id=\"u84186ee0\" style=\"text-align: left\"><span data-lake-id=\"u5d8ca81c\" id=\"u5d8ca81c\">composer config -g repo.packagist composer </span><a href=\"https://packagist.phpcomposer.com\" target=\"_blank\" data-lake-id=\"uab71c026\" id=\"uab71c026\"><span data-lake-id=\"u7c10c1a9\" id=\"u7c10c1a9\">https://packagist.phpcomposer.com</span></a></p></blockquote><p data-lake-id=\"uc934839b\" id=\"uc934839b\" style=\"text-align: left\"><br></p><p data-lake-id=\"u1e2b2eca\" id=\"u1e2b2eca\" style=\"text-align: left\"><br></p><h5 data-lake-id=\"eNb5y\" id=\"eNb5y\"><span data-lake-id=\"ue86412ee\" id=\"ue86412ee\" style=\"color: rgb(83, 104, 121)\">单个项目配置：</span></h5><p data-lake-id=\"u9608a523\" id=\"u9608a523\"><span data-lake-id=\"u4d1c05e7\" id=\"u4d1c05e7\" style=\"color: rgb(83, 104, 121)\">在当前项目根目录可以使用 composer config -l 查看当前项目镜像配置</span></p><p data-lake-id=\"uec2d0295\" id=\"uec2d0295\" style=\"text-align: left\"><br></p><blockquote data-lake-id=\"uca028e60\" id=\"uca028e60\"><p data-lake-id=\"ufee40092\" id=\"ufee40092\" style=\"text-align: left\"><span data-lake-id=\"ua65a1aae\" id=\"ua65a1aae\">composer config -l</span></p></blockquote><p data-lake-id=\"u5cdf8c1d\" id=\"u5cdf8c1d\" style=\"text-align: left\"><br></p><p data-lake-id=\"uc28581f2\" id=\"uc28581f2\"><span data-lake-id=\"u7c361dc6\" id=\"u7c361dc6\" style=\"color: rgb(83, 104, 121)\">即将将配置信息添加到某个项目的 composer.</span><a href=\"https://xiaohuihui.net.cn/archives/tag/js/\" target=\"_blank\" data-lake-id=\"u12135d33\" id=\"u12135d33\"><span data-lake-id=\"u6eae4272\" id=\"u6eae4272\">js</span></a><span data-lake-id=\"u4b776c41\" id=\"u4b776c41\" style=\"color: rgb(83, 104, 121)\">on 文件中。修改当前项目的composer.json配置文件有两种方式，最后都是向文件中添加如下配置信息：</span></p><p data-lake-id=\"ud0314d21\" id=\"ud0314d21\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5C%22repositories%5C%22%3A%20%7B%5Cn%5C%22packagist%5C%22%3A%20%7B%5Cn%20%20%20%5C%22type%5C%22%3A%20%5C%22composer%5C%22%2C%5Cn%20%20%20%5C%22url%5C%22%3A%20%5C%22https%3A%2F%2Fpackagist.phpcomposer.com%5C%22%5Cn%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22NBeqh%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uca80821d\" id=\"uca80821d\"><span data-lake-id=\"u213a679c\" id=\"u213a679c\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><p data-lake-id=\"udf488f67\" id=\"udf488f67\"><span data-lake-id=\"u563b5b21\" id=\"u563b5b21\" style=\"color: rgb(83, 104, 121)\">2.1 打开命令行并进入项目的根目录（也就是 composer.json 文件所在目录），执行如下命令：</span></p><p data-lake-id=\"u9cdce94d\" id=\"u9cdce94d\"><span data-lake-id=\"u88203b4c\" id=\"u88203b4c\" style=\"color: rgb(125, 163, 60)\">将当前项目地址改为中国镜像地址：</span></p><p data-lake-id=\"u5ced014c\" id=\"u5ced014c\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22composer%20config%20repo.packagist%20composer%20https%3A%2F%2Fpackagist.phpcomposer.com%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22qa68h%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua742b87b\" id=\"ua742b87b\"><span data-lake-id=\"u529c005b\" id=\"u529c005b\" style=\"color: rgb(83, 104, 121)\">该命令将会在当前项目中的 composer.json 文件的末尾自动添加镜像的配置信息</span></p><p data-lake-id=\"ucb3e8b18\" id=\"ucb3e8b18\"><span data-lake-id=\"u23063065\" id=\"u23063065\" style=\"color: rgb(125, 163, 60)\">将当前项目中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22composer%20config%20repo.packagist%20composer%20https%3A%2F%2Fpackagist.org%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22npv28%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufe0f28d0\" id=\"ufe0f28d0\" style=\"text-align: left\"><br></p><p data-lake-id=\"ud8734973\" id=\"ud8734973\"><span data-lake-id=\"ub4a6634a\" id=\"ub4a6634a\" style=\"color: rgb(83, 104, 121)\">2.2 手动向composer.json文件中添加以上信息</span></p><p data-lake-id=\"u2519f867\" id=\"u2519f867\"><span data-lake-id=\"u4df4b094\" id=\"u4df4b094\" style=\"color: rgb(83, 104, 121)\">默认地址改为中国镜像地址：</span></p><p data-lake-id=\"ua15f2508\" id=\"ua15f2508\" style=\"text-align: left\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%5C%22repositories%5C%22%3A%20%7B%5Cn%20%20%20%5C%22packagist%5C%22%3A%20%7B%5Cn%20%20%20%20%20%20%20%5C%22type%5C%22%3A%20%5C%22composer%5C%22%2C%5Cn%20%20%20%20%20%20%20%5C%22url%5C%22%3A%20%5C%22https%3A%2F%2Fpackagist.phpcomposer.com%5C%22%5Cn%20%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22MgV22%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua06f849e\" id=\"ua06f849e\"><span data-lake-id=\"ua0585b49\" id=\"ua0585b49\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><p data-lake-id=\"u04c351fa\" id=\"u04c351fa\"><span data-lake-id=\"ud2b01766\" id=\"ud2b01766\" style=\"color: rgb(83, 104, 121)\">中国镜像地址还原成默认地址：（注意：这个是将中国镜像还原）<br /></span><span data-lake-id=\"u8b0a7956\" id=\"u8b0a7956\" style=\"color: rgb(83, 104, 121)\">将url的值改为：</span><a href=\"https://xiaohuihui.net.cn/wp-content/themes/begin/inc/go.php?url=https://packagist.org/\" target=\"_blank\" data-lake-id=\"u06da9ef6\" id=\"u06da9ef6\"><span data-lake-id=\"u64aa5215\" id=\"u64aa5215\">https://packagist.org</span></a></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 1,
    "hits": 1,
    "comments_count": 0,
    "word_count": 553,
    "created_at": "2022-04-12T10:05:31.000Z",
    "updated_at": "2023-07-27T02:10:49.000Z",
    "content_updated_at": "2023-07-27T02:10:49.000Z",
    "published_at": "2022-04-12T10:09:11.000Z",
    "first_published_at": "2022-04-12T10:08:02.989Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 924501391,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72989195,
    "type": "Doc",
    "slug": "mzaqet",
    "title": "MySQL常用语句",
    "description": "tags: [php,json,mysql]categories:  - 学无止境 - - Msqlcopyright_author_href: https://www.xiaohuihui.netcover: https://www.sxkawzp.cn/upload/2020/2/mysq...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1649645235333-50c0c21c-f619-40d2-a2cc-04e39d484716.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ue94bfc84\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,json,mysql]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span></p><p id=\"u14d662a6\" class=\"ne-p\"><span class=\"ne-text\"> - 学无止境</span></p><p id=\"u3005819f\" class=\"ne-p\"><span class=\"ne-text\"> - - Msql</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><p id=\"u97338b13\" class=\"ne-p\"><span class=\"ne-text\">cover: https://www.sxkawzp.cn/upload/2020/2/mysql1-12a849f2afe54669a6cc3259e9d380ac.jpg</span></p><hr id=\"f6ok7\" class=\"ne-hr\"><p id=\"u317cfbf7\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649645235333-50c0c21c-f619-40d2-a2cc-04e39d484716.png\" width=\"815.0943689560213\" id=\"u9de5a5e2\" class=\"ne-image\"></p><h2 id=\"zoGGd\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">常用的语句</span></h2><h3 id=\"HP43z\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询 </span></h3><div class=\"ne-quote\"><p id=\"u7d6393d7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * from bbs where id=1;</span></p></div><h3 id=\"xDqqP\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加 </span></h3><div class=\"ne-quote\"><p id=\"udefac7d7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">insert into bbs (name,data_year) values (&quot;jack&quot;,&quot;1993-10-01&quot;);</span></p></div><h3 id=\"Ouhuw\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改 </span></h3><div class=\"ne-quote\"><p id=\"u7b23eb7d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">update bbs set name=&quot;tom&quot;,sex=1,age=18 where name=&quot;jack&quot;;</span></p></div><h3 id=\"t4frJ\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除 </span></h3><div class=\"ne-quote\"><p id=\"u19f4a434\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">delete form bbs where id=2;</span></p></div><p id=\"u752fbc10\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><h2 id=\"sWfLm\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">更多语句</span></h2><h3 id=\"DCgrC\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">进入数据库：</span></h3><pre data-language=\"sql\" id=\"wf7ys\" class=\"ne-codeblock language-sql\"><code>mysql -u root -p\nmysql -h localhost -u root -p database_name</code></pre><h3 id=\"dDqHh\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">列出数据库：</span></h3><pre data-language=\"sql\" id=\"WVN5c\" class=\"ne-codeblock language-sql\"><code>show databases;</code></pre><h3 id=\"cSeeI\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">选择数据库：</span></h3><pre data-language=\"sql\" id=\"CEItV\" class=\"ne-codeblock language-sql\"><code>use databases_name;</code></pre><p id=\"ucf407e42\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><h3 id=\"QJI8t\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">列出数据表：</span></h3><pre data-language=\"sql\" id=\"nJEgJ\" class=\"ne-codeblock language-sql\"><code>show tables;</code></pre><h3 id=\"eCAE5\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">显示表格列的属性：</span></h3><pre data-language=\"sql\" id=\"eTfT4\" class=\"ne-codeblock language-sql\"><code>show columns from table_name;\ndescribe table_name;</code></pre><h3 id=\"i4g2V\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导出整个数据库：</span></h3><pre data-language=\"sql\" id=\"akGfn\" class=\"ne-codeblock language-sql\"><code>mysqldump -u user_name -p database_name &gt; /tmp/file_name</code></pre><div class=\"ne-quote\"><p id=\"u7ea2f429\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p test_db &gt; d:/test_db.sql</span></p></div><h3 id=\"FNprO\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导出一个表：</span></h3><pre data-language=\"sql\" id=\"hjia5\" class=\"ne-codeblock language-sql\"><code>mysqldump -u user_name -p database_name table_name &gt; /tmp/file_name</code></pre><div class=\"ne-quote\"><p id=\"uf296b77c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p test_db table1 &gt; d:/table1.sql</span></p></div><h3 id=\"jrdtq\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导出一个数据库结构：</span></h3><pre data-language=\"sql\" id=\"LVNSC\" class=\"ne-codeblock language-sql\"><code>mysqldump -u user_name -p -d --add--table database_name &gt; file_name</code></pre><div class=\"ne-quote\"><p id=\"u4c91d2ba\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p -d --add-drop-table test_db &gt; test_db.sql</span></p></div><h3 id=\"eHoRI\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导入数据库：</span></h3><pre data-language=\"sql\" id=\"bWNAS\" class=\"ne-codeblock language-sql\"><code>source file_name;\n# 或者\nmysql -u user_name -p database_name &lt; file_name</code></pre><div class=\"ne-quote\"><p id=\"uada28d20\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u551ee023\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">source /tmp/bbs.sql；</span></p><p id=\"u32560805\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">source d:/bbs.sql；</span></p><p id=\"uffe24b9c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">mysql -u root -p bbs &lt; &quot;d:/bbs.sql&quot;</span></p><p id=\"u56f68385\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">mysql -u root -p bbs &lt; &quot;/tmp/bbs.sql&quot;</span></p><p id=\"u1c7f7a8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p></div><h3 id=\"OW0RO\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">将文本文件导入数据表中（excel与之相同）</span></h3><pre data-language=\"sql\" id=\"qyxxN\" class=\"ne-codeblock language-sql\"><code>load data infile &quot;tables.txt&quot; into table table_name;</code></pre><div class=\"ne-quote\"><p id=\"u98d75b9a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u5f325c8a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;/tmp/bbs.txt&quot; into table bbs；</span></p><p id=\"u7471e06b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;/tmp/bbs.xls&quot; into table bbs；</span></p><p id=\"ua247fdcb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;d:/bbs.txt&quot; into table bbs；</span></p><p id=\"udd09d51d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;d:/bbs.xls&quot; into table bbs；</span></p></div><p id=\"u74e29e37\" class=\"ne-p\"><br></p><h3 id=\"BGUAs\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">将数据表导出为文本文件（excel与之相同）</span></h3><pre data-language=\"sql\" id=\"i9tQ9\" class=\"ne-codeblock language-sql\"><code>select * into outfile &quot;path_file_name&quot; from table_name;</code></pre><div class=\"ne-quote\"><p id=\"u5c0989b4\" class=\"ne-p\"><span class=\"ne-text\">例如：</span></p><p id=\"u1afa0ba9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select</span><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"> * into outfile &quot;/tmp/bbs.txt&quot; from bbs；</span></p><p id=\"u097834ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;/tmp/bbs.xls&quot; from bbs where id=1;</span></p><p id=\"uaf29acf0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;d:/bbs.txt&quot; from bbs;</span></p><p id=\"u0ad2f8fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;d:/bbs.xls&quot; from bbs where id=1;</span></p></div><h3 id=\"hMfdY\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建数据库时先判断数据库是否存在：</span></h3><pre data-language=\"sql\" id=\"cGYrp\" class=\"ne-codeblock language-sql\"><code>create database if not exists database_name;</code></pre><div class=\"ne-quote\"><p id=\"ucaae5179\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create database if not exists bbs</span></p></div><h3 id=\"oqKhD\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建数据库：</span></h3><pre data-language=\"sql\" id=\"UDup7\" class=\"ne-codeblock language-sql\"><code>create database database_name;</code></pre><div class=\"ne-quote\"><p id=\"ue399c7e7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create database bbs;</span></p></div><h3 id=\"GRw5a\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除数据库：</span></h3><pre data-language=\"sql\" id=\"KIVmU\" class=\"ne-codeblock language-sql\"><code>drop database database_name;</code></pre><div class=\"ne-quote\"><p id=\"u69d66732\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：drop database bbs;</span></p></div><h3 id=\"Kzfyj\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建数据表：</span></h3><pre data-language=\"sql\" id=\"N0XGK\" class=\"ne-codeblock language-sql\"><code>mysql&gt; create table &lt;table_name&gt; ( &lt;column 1 name&gt; &lt;col. 1 type&gt; &lt;col. 1 details&gt;,&lt;column 2 name&gt; &lt;col. 2 type&gt; &lt;col. 2 details&gt;, ...);</code></pre><div class=\"ne-quote\"><p id=\"u136b37d6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create table (id int not null auto_increment primary key,name char(16) not null default &quot;jack&quot;,date_year date not null);</span></p></div><h3 id=\"aY7rn\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除数据表中数据：</span></h3><pre data-language=\"sql\" id=\"oXq1n\" class=\"ne-codeblock language-sql\"><code>delete from table_name;</code></pre><div class=\"ne-quote\"><p id=\"u1a165f86\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"ud7d7c89e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">delete from bbs;</span></p><p id=\"ua60071bb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">delete from bbs where id=2;</span></p></div><p id=\"u1fc75afc\" class=\"ne-p\"><br></p><h3 id=\"ZNQwW\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除数据库中的数据表：</span></h3><pre data-language=\"sql\" id=\"WqjnN\" class=\"ne-codeblock language-sql\"><code>drop table table_name;</code></pre><div class=\"ne-quote\"><p id=\"u631e84ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u8165ecb6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">drop table test_db;</span></p><p id=\"u94b3be33\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">rm -f database_name/table_name.* (linux下）</span></p><p id=\"u2d0967a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u47f9336b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">rm -rf bbs/accp.*</span></p></div><h3 id=\"ui3Gt\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">向数据库中添加数据：</span></h3><pre data-language=\"sql\" id=\"mIi5V\" class=\"ne-codeblock language-sql\"><code>insert into table_name set column_name1=value1,column_name2=value2;</code></pre><div class=\"ne-quote\"><p id=\"u9fc526a3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs set name=&quot;jack&quot;,date_year=&quot;1993-10-01&quot;;</span></p></div><p id=\"uf12de12b\" class=\"ne-p\"><br></p><pre data-language=\"sql\" id=\"L5I1p\" class=\"ne-codeblock language-sql\"><code>insert into table_name values (column1,column2,...);</code></pre><div class=\"ne-quote\"><p id=\"u11b3e0c2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs (&quot;2&quot;,&quot;jack&quot;,&quot;1993-10-02&quot;)</span></p></div><p id=\"ua797434f\" class=\"ne-p\"><br></p><pre data-language=\"sql\" id=\"N8wO8\" class=\"ne-codeblock language-sql\"><code>insert into table_name (column_name1,column_name2,...) values (value1,value2);</code></pre><div class=\"ne-quote\"><p id=\"u3880fd8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs (name,data_year) values (&quot;jack&quot;,&quot;1993-10-01&quot;);</span></p></div><p id=\"u609419f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><h3 id=\"djHab\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询数据表中的数据：</span></h3><pre data-language=\"sql\" id=\"OD3St\" class=\"ne-codeblock language-sql\"><code>select * from table_name;</code></pre><div class=\"ne-quote\"><p id=\"u550735c0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：select * from bbs where id=1;</span></p></div><h3 id=\"a7ItX\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改数据表中的数据：</span></h3><pre data-language=\"sql\" id=\"cKNau\" class=\"ne-codeblock language-sql\"><code>update table_name set col_name=new_value where id=1;</code></pre><div class=\"ne-quote\"><p id=\"u0d7a08c5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：update bbs set name=&quot;tom&quot;,age=18 where name=&quot;jack&quot;;</span></p></div><h3 id=\"Gg1qf\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加一个字段：</span></h3><pre data-language=\"sql\" id=\"H8Fvo\" class=\"ne-codeblock language-sql\"><code>alter table table_name add column field_name datatype not null default &quot;1&quot;;</code></pre><div class=\"ne-quote\"><p id=\"udc0b6a69\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs add column tel char(16) not null;</span></p></div><h3 id=\"f2OQn\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加多个字段：(column可省略不写）</span></h3><pre data-language=\"sql\" id=\"Cbo4S\" class=\"ne-codeblock language-sql\"><code>alter table table_name add column filed_name1 datatype,add column filed_name2 datatype;</code></pre><div class=\"ne-quote\"><p id=\"u6593f478\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs add column tel char(16) not null,add column address text;</span></p></div><h3 id=\"JPskb\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除一个字段：</span></h3><pre data-language=\"sql\" id=\"A6i8z\" class=\"ne-codeblock language-sql\"><code>alter table table_name drop field_name;</code></pre><div class=\"ne-quote\"><p id=\"ud524c419\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs drop tel;</span></p></div><h3 id=\"aitKE\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改字段的数据类型：</span></h3><pre data-language=\"sql\" id=\"CALHB\" class=\"ne-codeblock language-sql\"><code>1. alter table table_name modify id int unsigned;\n#修改列id的类型为int unsigned\n2. alter table table_name change id sid int unsigned;\n#修改列id的名字为sid，而且把属性修改为int unsigned</code></pre><h3 id=\"pougv\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改一个字段的默认值：</span></h3><pre data-language=\"sql\" id=\"iwu3H\" class=\"ne-codeblock language-sql\"><code>alter table table_name modify column_name datatype not null default &quot;&quot;;</code></pre><div class=\"ne-quote\"><p id=\"uf5a0e55b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table test_db modify name char(16) default not null &quot;yourname&quot;;</span></p></div><h3 id=\"yohze\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">对表重新命名：</span></h3><pre data-language=\"sql\" id=\"byGcm\" class=\"ne-codeblock language-sql\"><code>alter table table_name rename as new_table_name;</code></pre><div class=\"ne-quote\"><p id=\"u9ed01061\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs rename as bbs_table;</span></p></div><p id=\"u9289fdb1\" class=\"ne-p\"><br></p><pre data-language=\"sql\" id=\"sFTK6\" class=\"ne-codeblock language-sql\"><code>rename table old_table_name to new_table_name;</code></pre><div class=\"ne-quote\"><p id=\"u22bc5ce0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：rename table test_db to accp;</span></p></div><h3 id=\"DzI6v\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">从已经有的表中复制表的结构：</span></h3><pre data-language=\"sql\" id=\"Yys2d\" class=\"ne-codeblock language-sql\"><code>create table table2 select * from table1 where 1&lt;&gt;1;</code></pre><div class=\"ne-quote\"><p id=\"u2dfb169c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create table test_db select * from accp where 1&lt;&gt;1;</span></p></div><h3 id=\"mEWBN\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询时间：</span></h3><pre data-language=\"sql\" id=\"EkpDz\" class=\"ne-codeblock language-sql\"><code>select now();</code></pre><h3 id=\"bPqbT\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询当前用户：</span></h3><pre data-language=\"sql\" id=\"qlOzR\" class=\"ne-codeblock language-sql\"><code>select user();</code></pre><h3 id=\"Q0Xxq\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询数据库版本：</span></h3><pre data-language=\"plain\" id=\"QF8EM\" class=\"ne-codeblock language-plain\"><code>select version();</code></pre><h3 id=\"mtY3J\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建索引：</span></h3><pre data-language=\"sql\" id=\"VcCcf\" class=\"ne-codeblock language-sql\"><code>alter table table1 add index ind_id(id);\ncreate index ind_id on table1(id);\ncreate unique index ind_id on table1(id);//建立唯一性索引</code></pre><h3 id=\"mDBsR\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除索引：</span></h3><pre data-language=\"sql\" id=\"Jz5iT\" class=\"ne-codeblock language-sql\"><code>drop index idx_id on table1;\nalter table table1 drop index ind_id;</code></pre><h3 id=\"XWCqM\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">联合字符或者多个列（将id与&quot;:&quot;和列name和&quot;=&quot;连接）</span></h3><pre data-language=\"sql\" id=\"hbbhb\" class=\"ne-codeblock language-sql\"><code>select concat(id，':',name,'=') from table;</code></pre><h3 id=\"M1vyc\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">limit（选出10到20条）</span></h3><pre data-language=\"sql\" id=\"u0xOW\" class=\"ne-codeblock language-sql\"><code>select * from bbs order by id limit 9,10;</code></pre><div class=\"ne-quote\"><p id=\"u1763a066\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（从查询结果中列出第几到几条的记录）</span></p></div><h3 id=\"c21sm\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加一个管理员账号：</span></h3><pre data-language=\"sql\" id=\"NiPo9\" class=\"ne-codeblock language-sql\"><code>grant all on *.* to user@localhost identified by &quot;password&quot;;</code></pre><h3 id=\"DY3RY\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建表是先判断表是否存在</span></h3><pre data-language=\"sql\" id=\"eVOya\" class=\"ne-codeblock language-sql\"><code>create table if not exists students(……);</code></pre><h3 id=\"RyxaA\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">复制表：</span></h3><pre data-language=\"sql\" id=\"YhSMY\" class=\"ne-codeblock language-sql\"><code>create table table2 select * from table1;</code></pre><div class=\"ne-quote\"><p id=\"u9674a171\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create table test_db select * from accp;</span></p></div><h3 id=\"ofIc0\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">授于用户远程访问mysql的权限</span></h3><pre data-language=\"sql\" id=\"soT0C\" class=\"ne-codeblock language-sql\"><code>grant all privileges on *.* to &quot;root&quot;@&quot;%&quot; identified by &quot;password&quot; with grant option;\n# 或者是修改mysql数据库中的user表中的host字段\nuse mysql;\nselect user,host from user;\nupdate user set host=&quot;%&quot; where user=&quot;user_name&quot;;</code></pre><h3 id=\"IebNy\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查看当前状态</span></h3><pre data-language=\"sql\" id=\"IZh0I\" class=\"ne-codeblock language-sql\"><code>show status;</code></pre><h3 id=\"mLWaF\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查看当前连接的用户</span></h3><pre data-language=\"sql\" id=\"BD9ql\" class=\"ne-codeblock language-sql\"><code>show processlist;</code></pre><div class=\"ne-quote\"><p id=\"u0dd5e7fd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（如果是root用户，则查看全部的线程，得到的用户连接数同show status;里的 Threads_connected值是相同的）!</span></p></div><h3 id=\"GD1k3\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">替换字段中的部分数据</span></h3><div class=\"ne-quote\"><p id=\"ufc140a8b\" class=\"ne-p\"><span class=\"ne-text\">UPDATE 你的表名 SET 你要查找的字段明=REPLACE(你要查找的字段明,'你要替换的字符串','你需要替换成什么');</span></p></div><p id=\"ue15d6095\" class=\"ne-p\"><span class=\"ne-text\">案例代码：</span></p><pre data-language=\"sql\" id=\"KvLxZ\" class=\"ne-codeblock language-sql\"><code>UPDATE cmf_article SET title=REPLACE(title,'hello','你好');</code></pre></div>",
    "body": "tags: [php,json,mysql]<br />categories: <br /> - 学无止境<br /> - - Msql<br />copyright_author_href: https://www.xiaohuihui.net<br />cover: https://www.sxkawzp.cn/upload/2020/2/mysql1-12a849f2afe54669a6cc3259e9d380ac.jpg\n\n---\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649645235333-50c0c21c-f619-40d2-a2cc-04e39d484716.png#clientId=u78daabba-49db-4&from=paste&height=503&id=u9de5a5e2&originHeight=555&originWidth=900&originalType=binary&ratio=1&rotation=0&showTitle=false&size=116531&status=done&style=none&taskId=uff38ef90-5ac3-4ff7-ad55-dfe5c18811b&title=&width=815.0943689560213)\n<a name=\"zoGGd\"></a>\n## 常用的语句\n<a name=\"HP43z\"></a>\n### 查询 \n> select * from bbs where id=1;\n\n<a name=\"xDqqP\"></a>\n### 增加 \n> insert into bbs (name,data_year) values (\"jack\",\"1993-10-01\");\n\n<a name=\"Ouhuw\"></a>\n### 修改 \n> update bbs set name=\"tom\",sex=1,age=18 where name=\"jack\";\n\n<a name=\"t4frJ\"></a>\n### 删除 \n> delete form bbs where id=2;\n\n\n<a name=\"sWfLm\"></a>\n## 更多语句\n<a name=\"DCgrC\"></a>\n### 进入数据库：\n```sql\nmysql -u root -p\nmysql -h localhost -u root -p database_name\n```\n<a name=\"dDqHh\"></a>\n### 列出数据库：\n```sql\nshow databases;\n```\n<a name=\"cSeeI\"></a>\n### 选择数据库：\n```sql\nuse databases_name;\n```\n\n<a name=\"QJI8t\"></a>\n### 列出数据表：\n```sql\nshow tables;\n```\n<a name=\"eCAE5\"></a>\n### 显示表格列的属性：\n```sql\nshow columns from table_name;\ndescribe table_name;\n```\n<a name=\"i4g2V\"></a>\n### 导出整个数据库：\n```sql\nmysqldump -u user_name -p database_name > /tmp/file_name\n```\n> 例如：mysqldump -u root -p test_db > d:/test_db.sql\n\n<a name=\"FNprO\"></a>\n### 导出一个表：\n```sql\nmysqldump -u user_name -p database_name table_name > /tmp/file_name\n```\n> 例如：mysqldump -u root -p test_db table1 > d:/table1.sql\n\n<a name=\"jrdtq\"></a>\n### 导出一个数据库结构：\n```sql\nmysqldump -u user_name -p -d --add--table database_name > file_name\n```\n> 例如：mysqldump -u root -p -d --add-drop-table test_db > test_db.sql\n\n<a name=\"eHoRI\"></a>\n### 导入数据库：\n```sql\nsource file_name;\n# 或者\nmysql -u user_name -p database_name < file_name\n```\n> 例如：\n> source /tmp/bbs.sql；\n> source d:/bbs.sql；\n> mysql -u root -p bbs < \"d:/bbs.sql\"\n> mysql -u root -p bbs < \"/tmp/bbs.sql\"\n> \n\n<a name=\"OW0RO\"></a>\n### 将文本文件导入数据表中（excel与之相同）\n```sql\nload data infile \"tables.txt\" into table table_name;\n```\n> 例如：\n> load data infile \"/tmp/bbs.txt\" into table bbs；\n> load data infile \"/tmp/bbs.xls\" into table bbs；\n> load data infile \"d:/bbs.txt\" into table bbs；\n> load data infile \"d:/bbs.xls\" into table bbs；\n\n\n<a name=\"BGUAs\"></a>\n### 将数据表导出为文本文件（excel与之相同）\n```sql\nselect * into outfile \"path_file_name\" from table_name;\n```\n> 例如：\n> select * into outfile \"/tmp/bbs.txt\" from bbs；\n> select * into outfile \"/tmp/bbs.xls\" from bbs where id=1;\n> select * into outfile \"d:/bbs.txt\" from bbs;\n> select * into outfile \"d:/bbs.xls\" from bbs where id=1;\n\n<a name=\"hMfdY\"></a>\n### 创建数据库时先判断数据库是否存在：\n```sql\ncreate database if not exists database_name;\n```\n> 例如：create database if not exists bbs\n\n<a name=\"oqKhD\"></a>\n### 创建数据库：\n```sql\ncreate database database_name;\n```\n> 例如：create database bbs;\n\n<a name=\"GRw5a\"></a>\n### 删除数据库：\n```sql\ndrop database database_name;\n```\n> 例如：drop database bbs;\n\n<a name=\"Kzfyj\"></a>\n### 创建数据表：\n```sql\nmysql> create table <table_name> ( <column 1 name> <col. 1 type> <col. 1 details>,<column 2 name> <col. 2 type> <col. 2 details>, ...);\n```\n> 例如：create table (id int not null auto_increment primary key,name char(16) not null default \"jack\",date_year date not null);\n\n<a name=\"aY7rn\"></a>\n### 删除数据表中数据：\n```sql\ndelete from table_name;\n```\n> 例如：\n> delete from bbs;\n> delete from bbs where id=2;\n\n\n<a name=\"ZNQwW\"></a>\n### 删除数据库中的数据表：\n```sql\ndrop table table_name;\n```\n> 例如：\n> drop table test_db;\n> rm -f database_name/table_name.* (linux下）\n> 例如：\n> rm -rf bbs/accp.*\n\n<a name=\"ui3Gt\"></a>\n### 向数据库中添加数据：\n```sql\ninsert into table_name set column_name1=value1,column_name2=value2;\n```\n> 例如：insert into bbs set name=\"jack\",date_year=\"1993-10-01\";\n\n\n```sql\ninsert into table_name values (column1,column2,...);\n```\n> 例如：insert into bbs (\"2\",\"jack\",\"1993-10-02\")\n\n\n```sql\ninsert into table_name (column_name1,column_name2,...) values (value1,value2);\n```\n> 例如：insert into bbs (name,data_year) values (\"jack\",\"1993-10-01\");\n\n\n<a name=\"djHab\"></a>\n### 查询数据表中的数据：\n```sql\nselect * from table_name;\n```\n> 例如：select * from bbs where id=1;\n\n<a name=\"a7ItX\"></a>\n### 修改数据表中的数据：\n```sql\nupdate table_name set col_name=new_value where id=1;\n```\n> 例如：update bbs set name=\"tom\",age=18 where name=\"jack\";\n\n<a name=\"Gg1qf\"></a>\n### 增加一个字段：\n```sql\nalter table table_name add column field_name datatype not null default \"1\";\n```\n> 例如：alter table bbs add column tel char(16) not null;\n\n<a name=\"f2OQn\"></a>\n### 增加多个字段：(column可省略不写）\n```sql\nalter table table_name add column filed_name1 datatype,add column filed_name2 datatype;\n```\n> 例如：alter table bbs add column tel char(16) not null,add column address text;\n\n<a name=\"JPskb\"></a>\n### 删除一个字段：\n```sql\nalter table table_name drop field_name;\n```\n> 例如：alter table bbs drop tel;\n\n<a name=\"aitKE\"></a>\n### 修改字段的数据类型：\n```sql\n1. alter table table_name modify id int unsigned;\n#修改列id的类型为int unsigned\n2. alter table table_name change id sid int unsigned;\n#修改列id的名字为sid，而且把属性修改为int unsigned\n```\n<a name=\"pougv\"></a>\n### 修改一个字段的默认值：\n```sql\nalter table table_name modify column_name datatype not null default \"\";\n```\n> 例如：alter table test_db modify name char(16) default not null \"yourname\";\n\n<a name=\"yohze\"></a>\n### 对表重新命名：\n```sql\nalter table table_name rename as new_table_name;\n```\n> 例如：alter table bbs rename as bbs_table;\n\n\n```sql\nrename table old_table_name to new_table_name;\n```\n> 例如：rename table test_db to accp;\n\n<a name=\"DzI6v\"></a>\n### 从已经有的表中复制表的结构：\n```sql\ncreate table table2 select * from table1 where 1<>1;\n```\n> 例如：create table test_db select * from accp where 1<>1;\n\n<a name=\"mEWBN\"></a>\n### 查询时间：\n```sql\nselect now();\n```\n<a name=\"bPqbT\"></a>\n### 查询当前用户：\n```sql\nselect user();\n```\n<a name=\"Q0Xxq\"></a>\n### 查询数据库版本：\n```\nselect version();\n```\n<a name=\"mtY3J\"></a>\n### 创建索引：\n```sql\nalter table table1 add index ind_id(id);\ncreate index ind_id on table1(id);\ncreate unique index ind_id on table1(id);//建立唯一性索引\n```\n<a name=\"mDBsR\"></a>\n### 删除索引：\n```sql\ndrop index idx_id on table1;\nalter table table1 drop index ind_id;\n```\n<a name=\"XWCqM\"></a>\n### 联合字符或者多个列（将id与\":\"和列name和\"=\"连接）\n```sql\nselect concat(id，':',name,'=') from table;\n```\n<a name=\"M1vyc\"></a>\n### limit（选出10到20条）\n```sql\nselect * from bbs order by id limit 9,10;\n```\n> （从查询结果中列出第几到几条的记录）\n\n<a name=\"c21sm\"></a>\n### 增加一个管理员账号：\n```sql\ngrant all on *.* to user@localhost identified by \"password\";\n```\n<a name=\"DY3RY\"></a>\n### 创建表是先判断表是否存在\n```sql\ncreate table if not exists students(……);\n```\n<a name=\"RyxaA\"></a>\n### 复制表：\n```sql\ncreate table table2 select * from table1;\n```\n> 例如：create table test_db select * from accp;\n\n<a name=\"ofIc0\"></a>\n### 授于用户远程访问mysql的权限\n```sql\ngrant all privileges on *.* to \"root\"@\"%\" identified by \"password\" with grant option;\n# 或者是修改mysql数据库中的user表中的host字段\nuse mysql;\nselect user,host from user;\nupdate user set host=\"%\" where user=\"user_name\";\n```\n<a name=\"IebNy\"></a>\n### 查看当前状态\n```sql\nshow status;\n```\n<a name=\"mLWaF\"></a>\n### 查看当前连接的用户\n```sql\nshow processlist;\n```\n> （如果是root用户，则查看全部的线程，得到的用户连接数同show status;里的 Threads_connected值是相同的）!\n\n<a name=\"GD1k3\"></a>\n### 替换字段中的部分数据\n> UPDATE 你的表名 SET 你要查找的字段明=REPLACE(你要查找的字段明,'你要替换的字符串','你需要替换成什么');\n\n案例代码：\n```sql\nUPDATE cmf_article SET title=REPLACE(title,'hello','你好');\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"ue94bfc84\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,json,mysql]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: </span></p><p id=\"u14d662a6\" class=\"ne-p\"><span class=\"ne-text\"> - 学无止境</span></p><p id=\"u3005819f\" class=\"ne-p\"><span class=\"ne-text\"> - - Msql</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><p id=\"u97338b13\" class=\"ne-p\"><span class=\"ne-text\">cover: https://www.sxkawzp.cn/upload/2020/2/mysql1-12a849f2afe54669a6cc3259e9d380ac.jpg</span></p><hr id=\"f6ok7\" class=\"ne-hr\"><p id=\"u317cfbf7\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649645235333-50c0c21c-f619-40d2-a2cc-04e39d484716.png\" width=\"815.0943689560213\" id=\"u9de5a5e2\" class=\"ne-image\"></p><h2 id=\"zoGGd\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">常用的语句</span></h2><h3 id=\"HP43z\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询 </span></h3><div class=\"ne-quote\"><p id=\"u7d6393d7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * from bbs where id=1;</span></p></div><h3 id=\"xDqqP\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加 </span></h3><div class=\"ne-quote\"><p id=\"udefac7d7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">insert into bbs (name,data_year) values (&quot;jack&quot;,&quot;1993-10-01&quot;);</span></p></div><h3 id=\"Ouhuw\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改 </span></h3><div class=\"ne-quote\"><p id=\"u7b23eb7d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">update bbs set name=&quot;tom&quot;,sex=1,age=18 where name=&quot;jack&quot;;</span></p></div><h3 id=\"t4frJ\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除 </span></h3><div class=\"ne-quote\"><p id=\"u19f4a434\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">delete form bbs where id=2;</span></p></div><p id=\"u752fbc10\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><h2 id=\"sWfLm\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">更多语句</span></h2><h3 id=\"DCgrC\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">进入数据库：</span></h3><pre data-language=\"sql\" id=\"wf7ys\" class=\"ne-codeblock language-sql\">mysql -u root -p\nmysql -h localhost -u root -p database_name</pre><h3 id=\"dDqHh\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">列出数据库：</span></h3><pre data-language=\"sql\" id=\"WVN5c\" class=\"ne-codeblock language-sql\">show databases;</pre><h3 id=\"cSeeI\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">选择数据库：</span></h3><pre data-language=\"sql\" id=\"CEItV\" class=\"ne-codeblock language-sql\">use databases_name;</pre><p id=\"ucf407e42\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><h3 id=\"QJI8t\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">列出数据表：</span></h3><pre data-language=\"sql\" id=\"nJEgJ\" class=\"ne-codeblock language-sql\">show tables;</pre><h3 id=\"eCAE5\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">显示表格列的属性：</span></h3><pre data-language=\"sql\" id=\"eTfT4\" class=\"ne-codeblock language-sql\">show columns from table_name;\ndescribe table_name;</pre><h3 id=\"i4g2V\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导出整个数据库：</span></h3><pre data-language=\"sql\" id=\"akGfn\" class=\"ne-codeblock language-sql\">mysqldump -u user_name -p database_name &gt; /tmp/file_name</pre><div class=\"ne-quote\"><p id=\"u7ea2f429\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p test_db &gt; d:/test_db.sql</span></p></div><h3 id=\"FNprO\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导出一个表：</span></h3><pre data-language=\"sql\" id=\"hjia5\" class=\"ne-codeblock language-sql\">mysqldump -u user_name -p database_name table_name &gt; /tmp/file_name</pre><div class=\"ne-quote\"><p id=\"uf296b77c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p test_db table1 &gt; d:/table1.sql</span></p></div><h3 id=\"jrdtq\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导出一个数据库结构：</span></h3><pre data-language=\"sql\" id=\"LVNSC\" class=\"ne-codeblock language-sql\">mysqldump -u user_name -p -d --add--table database_name &gt; file_name</pre><div class=\"ne-quote\"><p id=\"u4c91d2ba\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p -d --add-drop-table test_db &gt; test_db.sql</span></p></div><h3 id=\"eHoRI\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">导入数据库：</span></h3><pre data-language=\"sql\" id=\"bWNAS\" class=\"ne-codeblock language-sql\">source file_name;\n# 或者\nmysql -u user_name -p database_name &lt; file_name</pre><div class=\"ne-quote\"><p id=\"uada28d20\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u551ee023\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">source /tmp/bbs.sql；</span></p><p id=\"u32560805\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">source d:/bbs.sql；</span></p><p id=\"uffe24b9c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">mysql -u root -p bbs &lt; &quot;d:/bbs.sql&quot;</span></p><p id=\"u56f68385\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">mysql -u root -p bbs &lt; &quot;/tmp/bbs.sql&quot;</span></p><p id=\"u1c7f7a8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p></div><h3 id=\"OW0RO\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">将文本文件导入数据表中（excel与之相同）</span></h3><pre data-language=\"sql\" id=\"qyxxN\" class=\"ne-codeblock language-sql\">load data infile &quot;tables.txt&quot; into table table_name;</pre><div class=\"ne-quote\"><p id=\"u98d75b9a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u5f325c8a\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;/tmp/bbs.txt&quot; into table bbs；</span></p><p id=\"u7471e06b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;/tmp/bbs.xls&quot; into table bbs；</span></p><p id=\"ua247fdcb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;d:/bbs.txt&quot; into table bbs；</span></p><p id=\"udd09d51d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;d:/bbs.xls&quot; into table bbs；</span></p></div><p id=\"u74e29e37\" class=\"ne-p\"><br></p><h3 id=\"BGUAs\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">将数据表导出为文本文件（excel与之相同）</span></h3><pre data-language=\"sql\" id=\"i9tQ9\" class=\"ne-codeblock language-sql\">select * into outfile &quot;path_file_name&quot; from table_name;</pre><div class=\"ne-quote\"><p id=\"u5c0989b4\" class=\"ne-p\"><span class=\"ne-text\">例如：</span></p><p id=\"u1afa0ba9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select</span><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"> * into outfile &quot;/tmp/bbs.txt&quot; from bbs；</span></p><p id=\"u097834ea\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;/tmp/bbs.xls&quot; from bbs where id=1;</span></p><p id=\"uaf29acf0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;d:/bbs.txt&quot; from bbs;</span></p><p id=\"u0ad2f8fa\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;d:/bbs.xls&quot; from bbs where id=1;</span></p></div><h3 id=\"hMfdY\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建数据库时先判断数据库是否存在：</span></h3><pre data-language=\"sql\" id=\"cGYrp\" class=\"ne-codeblock language-sql\">create database if not exists database_name;</pre><div class=\"ne-quote\"><p id=\"ucaae5179\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create database if not exists bbs</span></p></div><h3 id=\"oqKhD\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建数据库：</span></h3><pre data-language=\"sql\" id=\"UDup7\" class=\"ne-codeblock language-sql\">create database database_name;</pre><div class=\"ne-quote\"><p id=\"ue399c7e7\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create database bbs;</span></p></div><h3 id=\"GRw5a\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除数据库：</span></h3><pre data-language=\"sql\" id=\"KIVmU\" class=\"ne-codeblock language-sql\">drop database database_name;</pre><div class=\"ne-quote\"><p id=\"u69d66732\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：drop database bbs;</span></p></div><h3 id=\"Kzfyj\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建数据表：</span></h3><pre data-language=\"sql\" id=\"N0XGK\" class=\"ne-codeblock language-sql\">mysql&gt; create table &lt;table_name&gt; ( &lt;column 1 name&gt; &lt;col. 1 type&gt; &lt;col. 1 details&gt;,&lt;column 2 name&gt; &lt;col. 2 type&gt; &lt;col. 2 details&gt;, ...);</pre><div class=\"ne-quote\"><p id=\"u136b37d6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create table (id int not null auto_increment primary key,name char(16) not null default &quot;jack&quot;,date_year date not null);</span></p></div><h3 id=\"aY7rn\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除数据表中数据：</span></h3><pre data-language=\"sql\" id=\"oXq1n\" class=\"ne-codeblock language-sql\">delete from table_name;</pre><div class=\"ne-quote\"><p id=\"u1a165f86\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"ud7d7c89e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">delete from bbs;</span></p><p id=\"ua60071bb\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">delete from bbs where id=2;</span></p></div><p id=\"u1fc75afc\" class=\"ne-p\"><br></p><h3 id=\"ZNQwW\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除数据库中的数据表：</span></h3><pre data-language=\"sql\" id=\"WqjnN\" class=\"ne-codeblock language-sql\">drop table table_name;</pre><div class=\"ne-quote\"><p id=\"u631e84ca\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u8165ecb6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">drop table test_db;</span></p><p id=\"u94b3be33\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">rm -f database_name/table_name.* (linux下）</span></p><p id=\"u2d0967a6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p id=\"u47f9336b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">rm -rf bbs/accp.*</span></p></div><h3 id=\"ui3Gt\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">向数据库中添加数据：</span></h3><pre data-language=\"sql\" id=\"mIi5V\" class=\"ne-codeblock language-sql\">insert into table_name set column_name1=value1,column_name2=value2;</pre><div class=\"ne-quote\"><p id=\"u9fc526a3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs set name=&quot;jack&quot;,date_year=&quot;1993-10-01&quot;;</span></p></div><p id=\"uf12de12b\" class=\"ne-p\"><br></p><pre data-language=\"sql\" id=\"L5I1p\" class=\"ne-codeblock language-sql\">insert into table_name values (column1,column2,...);</pre><div class=\"ne-quote\"><p id=\"u11b3e0c2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs (&quot;2&quot;,&quot;jack&quot;,&quot;1993-10-02&quot;)</span></p></div><p id=\"ua797434f\" class=\"ne-p\"><br></p><pre data-language=\"sql\" id=\"N8wO8\" class=\"ne-codeblock language-sql\">insert into table_name (column_name1,column_name2,...) values (value1,value2);</pre><div class=\"ne-quote\"><p id=\"u3880fd8e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs (name,data_year) values (&quot;jack&quot;,&quot;1993-10-01&quot;);</span></p></div><p id=\"u609419f9\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\"></span></p><h3 id=\"djHab\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询数据表中的数据：</span></h3><pre data-language=\"sql\" id=\"OD3St\" class=\"ne-codeblock language-sql\">select * from table_name;</pre><div class=\"ne-quote\"><p id=\"u550735c0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：select * from bbs where id=1;</span></p></div><h3 id=\"a7ItX\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改数据表中的数据：</span></h3><pre data-language=\"sql\" id=\"cKNau\" class=\"ne-codeblock language-sql\">update table_name set col_name=new_value where id=1;</pre><div class=\"ne-quote\"><p id=\"u0d7a08c5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：update bbs set name=&quot;tom&quot;,age=18 where name=&quot;jack&quot;;</span></p></div><h3 id=\"Gg1qf\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加一个字段：</span></h3><pre data-language=\"sql\" id=\"H8Fvo\" class=\"ne-codeblock language-sql\">alter table table_name add column field_name datatype not null default &quot;1&quot;;</pre><div class=\"ne-quote\"><p id=\"udc0b6a69\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs add column tel char(16) not null;</span></p></div><h3 id=\"f2OQn\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加多个字段：(column可省略不写）</span></h3><pre data-language=\"sql\" id=\"Cbo4S\" class=\"ne-codeblock language-sql\">alter table table_name add column filed_name1 datatype,add column filed_name2 datatype;</pre><div class=\"ne-quote\"><p id=\"u6593f478\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs add column tel char(16) not null,add column address text;</span></p></div><h3 id=\"JPskb\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除一个字段：</span></h3><pre data-language=\"sql\" id=\"A6i8z\" class=\"ne-codeblock language-sql\">alter table table_name drop field_name;</pre><div class=\"ne-quote\"><p id=\"ud524c419\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs drop tel;</span></p></div><h3 id=\"aitKE\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改字段的数据类型：</span></h3><pre data-language=\"sql\" id=\"CALHB\" class=\"ne-codeblock language-sql\">1. alter table table_name modify id int unsigned;\n#修改列id的类型为int unsigned\n2. alter table table_name change id sid int unsigned;\n#修改列id的名字为sid，而且把属性修改为int unsigned</pre><h3 id=\"pougv\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">修改一个字段的默认值：</span></h3><pre data-language=\"sql\" id=\"iwu3H\" class=\"ne-codeblock language-sql\">alter table table_name modify column_name datatype not null default &quot;&quot;;</pre><div class=\"ne-quote\"><p id=\"uf5a0e55b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table test_db modify name char(16) default not null &quot;yourname&quot;;</span></p></div><h3 id=\"yohze\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">对表重新命名：</span></h3><pre data-language=\"sql\" id=\"byGcm\" class=\"ne-codeblock language-sql\">alter table table_name rename as new_table_name;</pre><div class=\"ne-quote\"><p id=\"u9ed01061\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs rename as bbs_table;</span></p></div><p id=\"u9289fdb1\" class=\"ne-p\"><br></p><pre data-language=\"sql\" id=\"sFTK6\" class=\"ne-codeblock language-sql\">rename table old_table_name to new_table_name;</pre><div class=\"ne-quote\"><p id=\"u22bc5ce0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：rename table test_db to accp;</span></p></div><h3 id=\"DzI6v\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">从已经有的表中复制表的结构：</span></h3><pre data-language=\"sql\" id=\"Yys2d\" class=\"ne-codeblock language-sql\">create table table2 select * from table1 where 1&lt;&gt;1;</pre><div class=\"ne-quote\"><p id=\"u2dfb169c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create table test_db select * from accp where 1&lt;&gt;1;</span></p></div><h3 id=\"mEWBN\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询时间：</span></h3><pre data-language=\"sql\" id=\"EkpDz\" class=\"ne-codeblock language-sql\">select now();</pre><h3 id=\"bPqbT\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询当前用户：</span></h3><pre data-language=\"sql\" id=\"qlOzR\" class=\"ne-codeblock language-sql\">select user();</pre><h3 id=\"Q0Xxq\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查询数据库版本：</span></h3><pre data-language=\"plain\" id=\"QF8EM\" class=\"ne-codeblock language-plain\">select version();</pre><h3 id=\"mtY3J\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建索引：</span></h3><pre data-language=\"sql\" id=\"VcCcf\" class=\"ne-codeblock language-sql\">alter table table1 add index ind_id(id);\ncreate index ind_id on table1(id);\ncreate unique index ind_id on table1(id);//建立唯一性索引</pre><h3 id=\"mDBsR\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">删除索引：</span></h3><pre data-language=\"sql\" id=\"Jz5iT\" class=\"ne-codeblock language-sql\">drop index idx_id on table1;\nalter table table1 drop index ind_id;</pre><h3 id=\"XWCqM\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">联合字符或者多个列（将id与&quot;:&quot;和列name和&quot;=&quot;连接）</span></h3><pre data-language=\"sql\" id=\"hbbhb\" class=\"ne-codeblock language-sql\">select concat(id，':',name,'=') from table;</pre><h3 id=\"M1vyc\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">limit（选出10到20条）</span></h3><pre data-language=\"sql\" id=\"u0xOW\" class=\"ne-codeblock language-sql\">select * from bbs order by id limit 9,10;</pre><div class=\"ne-quote\"><p id=\"u1763a066\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（从查询结果中列出第几到几条的记录）</span></p></div><h3 id=\"c21sm\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">增加一个管理员账号：</span></h3><pre data-language=\"sql\" id=\"NiPo9\" class=\"ne-codeblock language-sql\">grant all on *.* to user@localhost identified by &quot;password&quot;;</pre><h3 id=\"DY3RY\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">创建表是先判断表是否存在</span></h3><pre data-language=\"sql\" id=\"eVOya\" class=\"ne-codeblock language-sql\">create table if not exists students(……);</pre><h3 id=\"RyxaA\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">复制表：</span></h3><pre data-language=\"sql\" id=\"YhSMY\" class=\"ne-codeblock language-sql\">create table table2 select * from table1;</pre><div class=\"ne-quote\"><p id=\"u9674a171\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">例如：create table test_db select * from accp;</span></p></div><h3 id=\"ofIc0\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">授于用户远程访问mysql的权限</span></h3><pre data-language=\"sql\" id=\"soT0C\" class=\"ne-codeblock language-sql\">grant all privileges on *.* to &quot;root&quot;@&quot;%&quot; identified by &quot;password&quot; with grant option;\n# 或者是修改mysql数据库中的user表中的host字段\nuse mysql;\nselect user,host from user;\nupdate user set host=&quot;%&quot; where user=&quot;user_name&quot;;</pre><h3 id=\"IebNy\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查看当前状态</span></h3><pre data-language=\"sql\" id=\"IZh0I\" class=\"ne-codeblock language-sql\">show status;</pre><h3 id=\"mLWaF\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">查看当前连接的用户</span></h3><pre data-language=\"sql\" id=\"BD9ql\" class=\"ne-codeblock language-sql\">show processlist;</pre><div class=\"ne-quote\"><p id=\"u0dd5e7fd\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">（如果是root用户，则查看全部的线程，得到的用户连接数同show status;里的 Threads_connected值是相同的）!</span></p></div><h3 id=\"GD1k3\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">替换字段中的部分数据</span></h3><div class=\"ne-quote\"><p id=\"ufc140a8b\" class=\"ne-p\"><span class=\"ne-text\">UPDATE 你的表名 SET 你要查找的字段明=REPLACE(你要查找的字段明,'你要替换的字符串','你需要替换成什么');</span></p></div><p id=\"ue15d6095\" class=\"ne-p\"><span class=\"ne-text\">案例代码：</span></p><pre data-language=\"sql\" id=\"KvLxZ\" class=\"ne-codeblock language-sql\">UPDATE cmf_article SET title=REPLACE(title,'hello','你好');</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"ue94bfc84\" id=\"ue94bfc84\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,json,mysql]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: </span></p><p data-lake-id=\"u14d662a6\" id=\"u14d662a6\"><span data-lake-id=\"uefc9d4e3\" id=\"uefc9d4e3\"> - 学无止境</span></p><p data-lake-id=\"u3005819f\" id=\"u3005819f\"><span data-lake-id=\"ud51b3a8c\" id=\"ud51b3a8c\"> - - Msql</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><p data-lake-id=\"u97338b13\" id=\"u97338b13\"><span data-lake-id=\"uaf6e3427\" id=\"uaf6e3427\">cover: https://www.sxkawzp.cn/upload/2020/2/mysql1-12a849f2afe54669a6cc3259e9d380ac.jpg</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22f6ok7%22%7D\"></card><p data-lake-id=\"u317cfbf7\" id=\"u317cfbf7\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649645235333-50c0c21c-f619-40d2-a2cc-04e39d484716.png%22%2C%22taskId%22%3A%22uff38ef90-5ac3-4ff7-ad55-dfe5c18811b%22%2C%22clientId%22%3A%22u78daabba-49db-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A815.0943689560213%2C%22height%22%3A503%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A116531%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A900%2C%22originHeight%22%3A555%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22MYSQL%20TM%20SXKAWZP.CN%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A153.07794%2C%22y%22%3A314.4491%2C%22width%22%3A498.27386%2C%22height%22%3A188.49807000000004%2C%22text%22%3A%22MYSQL%22%7D%2C%7B%22x%22%3A721.0005%2C%22y%22%3A452.99884%2C%22width%22%3A45.145560000000046%2C%22height%22%3A21.911620000000028%2C%22text%22%3A%22TM%22%7D%2C%7B%22x%22%3A419.67975%2C%22y%22%3A515.8065%2C%22width%22%3A79.71472%2C%22height%22%3A12.891129999999976%2C%22text%22%3A%22SXKAWZP.CN%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u9de5a5e2%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><h2 data-lake-id=\"zoGGd\" id=\"zoGGd\"><span data-lake-id=\"ufdaf4bf9\" id=\"ufdaf4bf9\" style=\"color: rgb(83, 104, 121)\">常用的语句</span></h2><h3 data-lake-id=\"HP43z\" id=\"HP43z\"><span data-lake-id=\"ub7efdb53\" id=\"ub7efdb53\" style=\"color: rgb(83, 104, 121)\">查询 </span></h3><blockquote data-lake-id=\"u230f788b\" id=\"u230f788b\"><p data-lake-id=\"u7d6393d7\" id=\"u7d6393d7\"><span data-lake-id=\"u9d719b6d\" id=\"u9d719b6d\" style=\"color: rgb(83, 104, 121)\">select * from bbs where id=1;</span></p></blockquote><h3 data-lake-id=\"xDqqP\" id=\"xDqqP\"><span data-lake-id=\"uc240c90a\" id=\"uc240c90a\" style=\"color: rgb(83, 104, 121)\">增加 </span></h3><blockquote data-lake-id=\"u848bf5f9\" id=\"u848bf5f9\"><p data-lake-id=\"udefac7d7\" id=\"udefac7d7\"><span data-lake-id=\"u96d27d68\" id=\"u96d27d68\" style=\"color: rgb(83, 104, 121)\">insert into bbs (name,data_year) values (&quot;jack&quot;,&quot;1993-10-01&quot;);</span></p></blockquote><h3 data-lake-id=\"Ouhuw\" id=\"Ouhuw\"><span data-lake-id=\"ud9e0f566\" id=\"ud9e0f566\" style=\"color: rgb(83, 104, 121)\">修改 </span></h3><blockquote data-lake-id=\"u05c67f3a\" id=\"u05c67f3a\"><p data-lake-id=\"u7b23eb7d\" id=\"u7b23eb7d\"><span data-lake-id=\"u3aab35da\" id=\"u3aab35da\" style=\"color: rgb(83, 104, 121)\">update bbs set name=&quot;tom&quot;,sex=1,age=18 where name=&quot;jack&quot;;</span></p></blockquote><h3 data-lake-id=\"t4frJ\" id=\"t4frJ\"><span data-lake-id=\"u3fd94724\" id=\"u3fd94724\" style=\"color: rgb(83, 104, 121)\">删除 </span></h3><blockquote data-lake-id=\"u0eebe1ca\" id=\"u0eebe1ca\"><p data-lake-id=\"u19f4a434\" id=\"u19f4a434\"><span data-lake-id=\"u7ab12c00\" id=\"u7ab12c00\" style=\"color: rgb(83, 104, 121)\">delete form bbs where id=2;</span></p></blockquote><p data-lake-id=\"u752fbc10\" id=\"u752fbc10\"><span data-lake-id=\"ud4762077\" id=\"ud4762077\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><h2 data-lake-id=\"sWfLm\" id=\"sWfLm\"><span data-lake-id=\"u58b2fbeb\" id=\"u58b2fbeb\" style=\"color: rgb(83, 104, 121)\">更多语句</span></h2><h3 data-lake-id=\"DCgrC\" id=\"DCgrC\"><span data-lake-id=\"u5bbc7894\" id=\"u5bbc7894\" style=\"color: rgb(83, 104, 121)\">进入数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22mysql%20-u%20root%20-p%5Cnmysql%20-h%20localhost%20-u%20root%20-p%20database_name%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22wf7ys%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"dDqHh\" id=\"dDqHh\"><span data-lake-id=\"u34625dfa\" id=\"u34625dfa\" style=\"color: rgb(83, 104, 121)\">列出数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22show%20databases%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22WVN5c%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"cSeeI\" id=\"cSeeI\"><span data-lake-id=\"udd5d650a\" id=\"udd5d650a\" style=\"color: rgb(83, 104, 121)\">选择数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22use%20databases_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22CEItV%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ucf407e42\" id=\"ucf407e42\"><span data-lake-id=\"u24965380\" id=\"u24965380\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><h3 data-lake-id=\"QJI8t\" id=\"QJI8t\"><span data-lake-id=\"u8819d9d6\" id=\"u8819d9d6\" style=\"color: rgb(83, 104, 121)\">列出数据表：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22show%20tables%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22nJEgJ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"eCAE5\" id=\"eCAE5\"><span data-lake-id=\"u2696af58\" id=\"u2696af58\" style=\"color: rgb(83, 104, 121)\">显示表格列的属性：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22show%20columns%20from%20table_name%3B%5Cndescribe%20table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eTfT4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"i4g2V\" id=\"i4g2V\"><span data-lake-id=\"u98c756cf\" id=\"u98c756cf\" style=\"color: rgb(83, 104, 121)\">导出整个数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22mysqldump%20-u%20user_name%20-p%20database_name%20%3E%20%2Ftmp%2Ffile_name%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22akGfn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"uda8c8588\" id=\"uda8c8588\"><p data-lake-id=\"u7ea2f429\" id=\"u7ea2f429\"><span data-lake-id=\"u8db00319\" id=\"u8db00319\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p test_db &gt; d:/test_db.sql</span></p></blockquote><h3 data-lake-id=\"FNprO\" id=\"FNprO\"><span data-lake-id=\"u33600d09\" id=\"u33600d09\" style=\"color: rgb(83, 104, 121)\">导出一个表：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22mysqldump%20-u%20user_name%20-p%20database_name%20table_name%20%3E%20%2Ftmp%2Ffile_name%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22hjia5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u42a31454\" id=\"u42a31454\"><p data-lake-id=\"uf296b77c\" id=\"uf296b77c\"><span data-lake-id=\"uaccfe842\" id=\"uaccfe842\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p test_db table1 &gt; d:/table1.sql</span></p></blockquote><h3 data-lake-id=\"jrdtq\" id=\"jrdtq\"><span data-lake-id=\"uabd6ca51\" id=\"uabd6ca51\" style=\"color: rgb(83, 104, 121)\">导出一个数据库结构：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22mysqldump%20-u%20user_name%20-p%20-d%20--add--table%20database_name%20%3E%20file_name%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22LVNSC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u0b595cae\" id=\"u0b595cae\"><p data-lake-id=\"u4c91d2ba\" id=\"u4c91d2ba\"><span data-lake-id=\"u68321933\" id=\"u68321933\" style=\"color: rgb(83, 104, 121)\">例如：mysqldump -u root -p -d --add-drop-table test_db &gt; test_db.sql</span></p></blockquote><h3 data-lake-id=\"eHoRI\" id=\"eHoRI\"><span data-lake-id=\"u8de72033\" id=\"u8de72033\" style=\"color: rgb(83, 104, 121)\">导入数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22source%20file_name%3B%5Cn%23%20%E6%88%96%E8%80%85%5Cnmysql%20-u%20user_name%20-p%20database_name%20%3C%20file_name%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bWNAS%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u145d9c54\" id=\"u145d9c54\"><p data-lake-id=\"uada28d20\" id=\"uada28d20\"><span data-lake-id=\"uac94027c\" id=\"uac94027c\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p data-lake-id=\"u551ee023\" id=\"u551ee023\"><span data-lake-id=\"ud70ecee4\" id=\"ud70ecee4\" style=\"color: rgb(83, 104, 121)\">source /tmp/bbs.sql；</span></p><p data-lake-id=\"u32560805\" id=\"u32560805\"><span data-lake-id=\"u6529cb4f\" id=\"u6529cb4f\" style=\"color: rgb(83, 104, 121)\">source d:/bbs.sql；</span></p><p data-lake-id=\"uffe24b9c\" id=\"uffe24b9c\"><span data-lake-id=\"u897f122c\" id=\"u897f122c\" style=\"color: rgb(83, 104, 121)\">mysql -u root -p bbs &lt; &quot;d:/bbs.sql&quot;</span></p><p data-lake-id=\"u56f68385\" id=\"u56f68385\"><span data-lake-id=\"u05185ce2\" id=\"u05185ce2\" style=\"color: rgb(83, 104, 121)\">mysql -u root -p bbs &lt; &quot;/tmp/bbs.sql&quot;</span></p><p data-lake-id=\"u1c7f7a8e\" id=\"u1c7f7a8e\"><span data-lake-id=\"u4a323617\" id=\"u4a323617\" style=\"color: rgb(83, 104, 121)\">​</span><br></p></blockquote><h3 data-lake-id=\"OW0RO\" id=\"OW0RO\"><span data-lake-id=\"ufc713e71\" id=\"ufc713e71\" style=\"color: rgb(83, 104, 121)\">将文本文件导入数据表中（excel与之相同）</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22load%20data%20infile%20%5C%22tables.txt%5C%22%20into%20table%20table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22qyxxN%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u8c11c785\" id=\"u8c11c785\"><p data-lake-id=\"u98d75b9a\" id=\"u98d75b9a\"><span data-lake-id=\"u5bdb7f0e\" id=\"u5bdb7f0e\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p data-lake-id=\"u5f325c8a\" id=\"u5f325c8a\"><span data-lake-id=\"uf632f1e3\" id=\"uf632f1e3\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;/tmp/bbs.txt&quot; into table bbs；</span></p><p data-lake-id=\"u7471e06b\" id=\"u7471e06b\"><span data-lake-id=\"u1af39e69\" id=\"u1af39e69\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;/tmp/bbs.xls&quot; into table bbs；</span></p><p data-lake-id=\"ua247fdcb\" id=\"ua247fdcb\"><span data-lake-id=\"u5abbb8a0\" id=\"u5abbb8a0\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;d:/bbs.txt&quot; into table bbs；</span></p><p data-lake-id=\"udd09d51d\" id=\"udd09d51d\"><span data-lake-id=\"u382fb304\" id=\"u382fb304\" style=\"color: rgb(83, 104, 121)\">load data infile &quot;d:/bbs.xls&quot; into table bbs；</span></p></blockquote><p data-lake-id=\"u74e29e37\" id=\"u74e29e37\"><br></p><h3 data-lake-id=\"BGUAs\" id=\"BGUAs\"><span data-lake-id=\"ue2dfb055\" id=\"ue2dfb055\" style=\"color: rgb(83, 104, 121)\">将数据表导出为文本文件（excel与之相同）</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20*%20into%20outfile%20%5C%22path_file_name%5C%22%20from%20table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22i9tQ9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"uacb084ac\" id=\"uacb084ac\"><p data-lake-id=\"u5c0989b4\" id=\"u5c0989b4\"><span data-lake-id=\"u9d609a5d\" id=\"u9d609a5d\">例如：</span></p><p data-lake-id=\"u1afa0ba9\" id=\"u1afa0ba9\"><span data-lake-id=\"ud99e93c7\" id=\"ud99e93c7\" style=\"color: rgb(83, 104, 121)\">select</span><span data-lake-id=\"u4c2dadc8\" id=\"u4c2dadc8\" style=\"color: rgb(83, 104, 121)\"> * into outfile &quot;/tmp/bbs.txt&quot; from bbs；</span></p><p data-lake-id=\"u097834ea\" id=\"u097834ea\"><span data-lake-id=\"u58c4f872\" id=\"u58c4f872\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;/tmp/bbs.xls&quot; from bbs where id=1;</span></p><p data-lake-id=\"uaf29acf0\" id=\"uaf29acf0\"><span data-lake-id=\"uadffdafb\" id=\"uadffdafb\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;d:/bbs.txt&quot; from bbs;</span></p><p data-lake-id=\"u0ad2f8fa\" id=\"u0ad2f8fa\"><span data-lake-id=\"ubb9b4d4b\" id=\"ubb9b4d4b\" style=\"color: rgb(83, 104, 121)\">select * into outfile &quot;d:/bbs.xls&quot; from bbs where id=1;</span></p></blockquote><h3 data-lake-id=\"hMfdY\" id=\"hMfdY\"><span data-lake-id=\"u30d193b3\" id=\"u30d193b3\" style=\"color: rgb(83, 104, 121)\">创建数据库时先判断数据库是否存在：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22create%20database%20if%20not%20exists%20database_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22cGYrp%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"uf0687fc9\" id=\"uf0687fc9\"><p data-lake-id=\"ucaae5179\" id=\"ucaae5179\"><span data-lake-id=\"u026fc2f2\" id=\"u026fc2f2\" style=\"color: rgb(83, 104, 121)\">例如：create database if not exists bbs</span></p></blockquote><h3 data-lake-id=\"oqKhD\" id=\"oqKhD\"><span data-lake-id=\"u73777a8a\" id=\"u73777a8a\" style=\"color: rgb(83, 104, 121)\">创建数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22create%20database%20database_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22UDup7%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u200d8222\" id=\"u200d8222\"><p data-lake-id=\"ue399c7e7\" id=\"ue399c7e7\"><span data-lake-id=\"u1c1e3224\" id=\"u1c1e3224\" style=\"color: rgb(83, 104, 121)\">例如：create database bbs;</span></p></blockquote><h3 data-lake-id=\"GRw5a\" id=\"GRw5a\"><span data-lake-id=\"ub42870d0\" id=\"ub42870d0\" style=\"color: rgb(83, 104, 121)\">删除数据库：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22drop%20database%20database_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KIVmU%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"ue9063474\" id=\"ue9063474\"><p data-lake-id=\"u69d66732\" id=\"u69d66732\"><span data-lake-id=\"u75dc3082\" id=\"u75dc3082\" style=\"color: rgb(83, 104, 121)\">例如：drop database bbs;</span></p></blockquote><h3 data-lake-id=\"Kzfyj\" id=\"Kzfyj\"><span data-lake-id=\"u39f0a720\" id=\"u39f0a720\" style=\"color: rgb(83, 104, 121)\">创建数据表：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22mysql%3E%20create%20table%20%3Ctable_name%3E%20(%20%3Ccolumn%201%20name%3E%20%3Ccol.%201%20type%3E%20%3Ccol.%201%20details%3E%2C%3Ccolumn%202%20name%3E%20%3Ccol.%202%20type%3E%20%3Ccol.%202%20details%3E%2C%20...)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22N0XGK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u1457180e\" id=\"u1457180e\"><p data-lake-id=\"u136b37d6\" id=\"u136b37d6\"><span data-lake-id=\"u1bd3ee61\" id=\"u1bd3ee61\" style=\"color: rgb(83, 104, 121)\">例如：create table (id int not null auto_increment primary key,name char(16) not null default &quot;jack&quot;,date_year date not null);</span></p></blockquote><h3 data-lake-id=\"aY7rn\" id=\"aY7rn\"><span data-lake-id=\"u95ecf84d\" id=\"u95ecf84d\" style=\"color: rgb(83, 104, 121)\">删除数据表中数据：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22delete%20from%20table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22oXq1n%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u020fe5a5\" id=\"u020fe5a5\"><p data-lake-id=\"u1a165f86\" id=\"u1a165f86\"><span data-lake-id=\"u05e52cfa\" id=\"u05e52cfa\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p data-lake-id=\"ud7d7c89e\" id=\"ud7d7c89e\"><span data-lake-id=\"u68c380bb\" id=\"u68c380bb\" style=\"color: rgb(83, 104, 121)\">delete from bbs;</span></p><p data-lake-id=\"ua60071bb\" id=\"ua60071bb\"><span data-lake-id=\"uf15a2dbd\" id=\"uf15a2dbd\" style=\"color: rgb(83, 104, 121)\">delete from bbs where id=2;</span></p></blockquote><p data-lake-id=\"u1fc75afc\" id=\"u1fc75afc\"><br></p><h3 data-lake-id=\"ZNQwW\" id=\"ZNQwW\"><span data-lake-id=\"u9dcde3eb\" id=\"u9dcde3eb\" style=\"color: rgb(83, 104, 121)\">删除数据库中的数据表：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22drop%20table%20table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22WqjnN%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u4661eefb\" id=\"u4661eefb\"><p data-lake-id=\"u631e84ca\" id=\"u631e84ca\"><span data-lake-id=\"u7c7e57bd\" id=\"u7c7e57bd\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p data-lake-id=\"u8165ecb6\" id=\"u8165ecb6\"><span data-lake-id=\"ua5060e98\" id=\"ua5060e98\" style=\"color: rgb(83, 104, 121)\">drop table test_db;</span></p><p data-lake-id=\"u94b3be33\" id=\"u94b3be33\"><span data-lake-id=\"u8deb1c76\" id=\"u8deb1c76\" style=\"color: rgb(83, 104, 121)\">rm -f database_name/table_name.* (linux下）</span></p><p data-lake-id=\"u2d0967a6\" id=\"u2d0967a6\"><span data-lake-id=\"uf7c0fb82\" id=\"uf7c0fb82\" style=\"color: rgb(83, 104, 121)\">例如：</span></p><p data-lake-id=\"u47f9336b\" id=\"u47f9336b\"><span data-lake-id=\"uc6d4d42c\" id=\"uc6d4d42c\" style=\"color: rgb(83, 104, 121)\">rm -rf bbs/accp.*</span></p></blockquote><h3 data-lake-id=\"ui3Gt\" id=\"ui3Gt\"><span data-lake-id=\"uc9f12017\" id=\"uc9f12017\" style=\"color: rgb(83, 104, 121)\">向数据库中添加数据：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22insert%20into%20table_name%20set%20column_name1%3Dvalue1%2Ccolumn_name2%3Dvalue2%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22mIi5V%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u36b5682a\" id=\"u36b5682a\"><p data-lake-id=\"u9fc526a3\" id=\"u9fc526a3\"><span data-lake-id=\"uef0062bf\" id=\"uef0062bf\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs set name=&quot;jack&quot;,date_year=&quot;1993-10-01&quot;;</span></p></blockquote><p data-lake-id=\"uf12de12b\" id=\"uf12de12b\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22insert%20into%20table_name%20values%20(column1%2Ccolumn2%2C...)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22L5I1p%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u19aa307f\" id=\"u19aa307f\"><p data-lake-id=\"u11b3e0c2\" id=\"u11b3e0c2\"><span data-lake-id=\"uc1fe86e7\" id=\"uc1fe86e7\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs (&quot;2&quot;,&quot;jack&quot;,&quot;1993-10-02&quot;)</span></p></blockquote><p data-lake-id=\"ua797434f\" id=\"ua797434f\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22insert%20into%20table_name%20(column_name1%2Ccolumn_name2%2C...)%20values%20(value1%2Cvalue2)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22N8wO8%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"uf16edbcc\" id=\"uf16edbcc\"><p data-lake-id=\"u3880fd8e\" id=\"u3880fd8e\"><span data-lake-id=\"u2d49cc14\" id=\"u2d49cc14\" style=\"color: rgb(83, 104, 121)\">例如：insert into bbs (name,data_year) values (&quot;jack&quot;,&quot;1993-10-01&quot;);</span></p></blockquote><p data-lake-id=\"u609419f9\" id=\"u609419f9\"><span data-lake-id=\"u1c164c30\" id=\"u1c164c30\" style=\"color: rgb(83, 104, 121)\">​</span><br></p><h3 data-lake-id=\"djHab\" id=\"djHab\"><span data-lake-id=\"ue8920513\" id=\"ue8920513\" style=\"color: rgb(83, 104, 121)\">查询数据表中的数据：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20*%20from%20table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OD3St%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u0154ae5c\" id=\"u0154ae5c\"><p data-lake-id=\"u550735c0\" id=\"u550735c0\"><span data-lake-id=\"u7a2927b2\" id=\"u7a2927b2\" style=\"color: rgb(83, 104, 121)\">例如：select * from bbs where id=1;</span></p></blockquote><h3 data-lake-id=\"a7ItX\" id=\"a7ItX\"><span data-lake-id=\"u504bd879\" id=\"u504bd879\" style=\"color: rgb(83, 104, 121)\">修改数据表中的数据：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22update%20table_name%20set%20col_name%3Dnew_value%20where%20id%3D1%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22cKNau%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u8b5ca81a\" id=\"u8b5ca81a\"><p data-lake-id=\"u0d7a08c5\" id=\"u0d7a08c5\"><span data-lake-id=\"u3fa0d063\" id=\"u3fa0d063\" style=\"color: rgb(83, 104, 121)\">例如：update bbs set name=&quot;tom&quot;,age=18 where name=&quot;jack&quot;;</span></p></blockquote><h3 data-lake-id=\"Gg1qf\" id=\"Gg1qf\"><span data-lake-id=\"u19ffe966\" id=\"u19ffe966\" style=\"color: rgb(83, 104, 121)\">增加一个字段：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22alter%20table%20table_name%20add%20column%20field_name%20datatype%20not%20null%20default%20%5C%221%5C%22%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22H8Fvo%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u2e1e2398\" id=\"u2e1e2398\"><p data-lake-id=\"udc0b6a69\" id=\"udc0b6a69\"><span data-lake-id=\"u425c8727\" id=\"u425c8727\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs add column tel char(16) not null;</span></p></blockquote><h3 data-lake-id=\"f2OQn\" id=\"f2OQn\"><span data-lake-id=\"u7c2656ac\" id=\"u7c2656ac\" style=\"color: rgb(83, 104, 121)\">增加多个字段：(column可省略不写）</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22alter%20table%20table_name%20add%20column%20filed_name1%20datatype%2Cadd%20column%20filed_name2%20datatype%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Cbo4S%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u9c49b303\" id=\"u9c49b303\"><p data-lake-id=\"u6593f478\" id=\"u6593f478\"><span data-lake-id=\"u9bc67a51\" id=\"u9bc67a51\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs add column tel char(16) not null,add column address text;</span></p></blockquote><h3 data-lake-id=\"JPskb\" id=\"JPskb\"><span data-lake-id=\"u275f16d0\" id=\"u275f16d0\" style=\"color: rgb(83, 104, 121)\">删除一个字段：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22alter%20table%20table_name%20drop%20field_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22A6i8z%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u741898f9\" id=\"u741898f9\"><p data-lake-id=\"ud524c419\" id=\"ud524c419\"><span data-lake-id=\"uc86c70ee\" id=\"uc86c70ee\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs drop tel;</span></p></blockquote><h3 data-lake-id=\"aitKE\" id=\"aitKE\"><span data-lake-id=\"u20e16a91\" id=\"u20e16a91\" style=\"color: rgb(83, 104, 121)\">修改字段的数据类型：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%221.%20alter%20table%20table_name%20modify%20id%20int%20unsigned%3B%5Cn%23%E4%BF%AE%E6%94%B9%E5%88%97id%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%BAint%20unsigned%5Cn2.%20alter%20table%20table_name%20change%20id%20sid%20int%20unsigned%3B%5Cn%23%E4%BF%AE%E6%94%B9%E5%88%97id%E7%9A%84%E5%90%8D%E5%AD%97%E4%B8%BAsid%EF%BC%8C%E8%80%8C%E4%B8%94%E6%8A%8A%E5%B1%9E%E6%80%A7%E4%BF%AE%E6%94%B9%E4%B8%BAint%20unsigned%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22CALHB%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"pougv\" id=\"pougv\"><span data-lake-id=\"u58ace43c\" id=\"u58ace43c\" style=\"color: rgb(83, 104, 121)\">修改一个字段的默认值：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22alter%20table%20table_name%20modify%20column_name%20datatype%20not%20null%20default%20%5C%22%5C%22%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iwu3H%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u6a186ca9\" id=\"u6a186ca9\"><p data-lake-id=\"uf5a0e55b\" id=\"uf5a0e55b\"><span data-lake-id=\"u065649e1\" id=\"u065649e1\" style=\"color: rgb(83, 104, 121)\">例如：alter table test_db modify name char(16) default not null &quot;yourname&quot;;</span></p></blockquote><h3 data-lake-id=\"yohze\" id=\"yohze\"><span data-lake-id=\"u06409196\" id=\"u06409196\" style=\"color: rgb(83, 104, 121)\">对表重新命名：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22alter%20table%20table_name%20rename%20as%20new_table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22byGcm%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u5f0b348a\" id=\"u5f0b348a\"><p data-lake-id=\"u9ed01061\" id=\"u9ed01061\"><span data-lake-id=\"ubc9d518b\" id=\"ubc9d518b\" style=\"color: rgb(83, 104, 121)\">例如：alter table bbs rename as bbs_table;</span></p></blockquote><p data-lake-id=\"u9289fdb1\" id=\"u9289fdb1\"><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22rename%20table%20old_table_name%20to%20new_table_name%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22sFTK6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u93f39242\" id=\"u93f39242\"><p data-lake-id=\"u22bc5ce0\" id=\"u22bc5ce0\"><span data-lake-id=\"ubce830ae\" id=\"ubce830ae\" style=\"color: rgb(83, 104, 121)\">例如：rename table test_db to accp;</span></p></blockquote><h3 data-lake-id=\"DzI6v\" id=\"DzI6v\"><span data-lake-id=\"ude9e60d4\" id=\"ude9e60d4\" style=\"color: rgb(83, 104, 121)\">从已经有的表中复制表的结构：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22create%20table%20table2%20select%20*%20from%20table1%20where%201%3C%3E1%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Yys2d%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u8c78b453\" id=\"u8c78b453\"><p data-lake-id=\"u2dfb169c\" id=\"u2dfb169c\"><span data-lake-id=\"ubb1cad87\" id=\"ubb1cad87\" style=\"color: rgb(83, 104, 121)\">例如：create table test_db select * from accp where 1&lt;&gt;1;</span></p></blockquote><h3 data-lake-id=\"mEWBN\" id=\"mEWBN\"><span data-lake-id=\"u2dcb03c6\" id=\"u2dcb03c6\" style=\"color: rgb(83, 104, 121)\">查询时间：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20now()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22EkpDz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"bPqbT\" id=\"bPqbT\"><span data-lake-id=\"ubc90b387\" id=\"ubc90b387\" style=\"color: rgb(83, 104, 121)\">查询当前用户：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20user()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22qlOzR%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"Q0Xxq\" id=\"Q0Xxq\"><span data-lake-id=\"u4e496f86\" id=\"u4e496f86\" style=\"color: rgb(83, 104, 121)\">查询数据库版本：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22select%20version()%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22QF8EM%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"mtY3J\" id=\"mtY3J\"><span data-lake-id=\"u25b8ac50\" id=\"u25b8ac50\" style=\"color: rgb(83, 104, 121)\">创建索引：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22alter%20table%20table1%20add%20index%20ind_id(id)%3B%5Cncreate%20index%20ind_id%20on%20table1(id)%3B%5Cncreate%20unique%20index%20ind_id%20on%20table1(id)%3B%2F%2F%E5%BB%BA%E7%AB%8B%E5%94%AF%E4%B8%80%E6%80%A7%E7%B4%A2%E5%BC%95%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22VcCcf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"mDBsR\" id=\"mDBsR\"><span data-lake-id=\"u4626ae44\" id=\"u4626ae44\" style=\"color: rgb(83, 104, 121)\">删除索引：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22drop%20index%20idx_id%20on%20table1%3B%5Cnalter%20table%20table1%20drop%20index%20ind_id%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Jz5iT%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"XWCqM\" id=\"XWCqM\"><span data-lake-id=\"ub224d105\" id=\"ub224d105\" style=\"color: rgb(83, 104, 121)\">联合字符或者多个列（将id与&quot;:&quot;和列name和&quot;=&quot;连接）</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20concat(id%EF%BC%8C'%3A'%2Cname%2C'%3D')%20from%20table%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22hbbhb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"M1vyc\" id=\"M1vyc\"><span data-lake-id=\"ud419f85c\" id=\"ud419f85c\" style=\"color: rgb(83, 104, 121)\">limit（选出10到20条）</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22select%20*%20from%20bbs%20order%20by%20id%20limit%209%2C10%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22u0xOW%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u4a0a08c2\" id=\"u4a0a08c2\"><p data-lake-id=\"u1763a066\" id=\"u1763a066\"><span data-lake-id=\"u52a98690\" id=\"u52a98690\" style=\"color: rgb(83, 104, 121)\">（从查询结果中列出第几到几条的记录）</span></p></blockquote><h3 data-lake-id=\"c21sm\" id=\"c21sm\"><span data-lake-id=\"uf37c3c30\" id=\"uf37c3c30\" style=\"color: rgb(83, 104, 121)\">增加一个管理员账号：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22grant%20all%20on%20*.*%20to%20user%40localhost%20identified%20by%20%5C%22password%5C%22%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22NiPo9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"DY3RY\" id=\"DY3RY\"><span data-lake-id=\"uaa405e65\" id=\"uaa405e65\" style=\"color: rgb(83, 104, 121)\">创建表是先判断表是否存在</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22create%20table%20if%20not%20exists%20students(%E2%80%A6%E2%80%A6)%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eVOya%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"RyxaA\" id=\"RyxaA\"><span data-lake-id=\"uc6f9181a\" id=\"uc6f9181a\" style=\"color: rgb(83, 104, 121)\">复制表：</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22create%20table%20table2%20select%20*%20from%20table1%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22YhSMY%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"udf2dc8f1\" id=\"udf2dc8f1\"><p data-lake-id=\"u9674a171\" id=\"u9674a171\"><span data-lake-id=\"u1028a086\" id=\"u1028a086\" style=\"color: rgb(83, 104, 121)\">例如：create table test_db select * from accp;</span></p></blockquote><h3 data-lake-id=\"ofIc0\" id=\"ofIc0\"><span data-lake-id=\"u32e12fdb\" id=\"u32e12fdb\" style=\"color: rgb(83, 104, 121)\">授于用户远程访问mysql的权限</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22grant%20all%20privileges%20on%20*.*%20to%20%5C%22root%5C%22%40%5C%22%25%5C%22%20identified%20by%20%5C%22password%5C%22%20with%20grant%20option%3B%5Cn%23%20%E6%88%96%E8%80%85%E6%98%AF%E4%BF%AE%E6%94%B9mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84user%E8%A1%A8%E4%B8%AD%E7%9A%84host%E5%AD%97%E6%AE%B5%5Cnuse%20mysql%3B%5Cnselect%20user%2Chost%20from%20user%3B%5Cnupdate%20user%20set%20host%3D%5C%22%25%5C%22%20where%20user%3D%5C%22user_name%5C%22%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22soT0C%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"IebNy\" id=\"IebNy\"><span data-lake-id=\"ucb270bea\" id=\"ucb270bea\" style=\"color: rgb(83, 104, 121)\">查看当前状态</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22show%20status%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22IZh0I%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h3 data-lake-id=\"mLWaF\" id=\"mLWaF\"><span data-lake-id=\"u26b4ba45\" id=\"u26b4ba45\" style=\"color: rgb(83, 104, 121)\">查看当前连接的用户</span></h3><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22show%20processlist%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BD9ql%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u88b4bbbf\" id=\"u88b4bbbf\"><p data-lake-id=\"u0dd5e7fd\" id=\"u0dd5e7fd\"><span data-lake-id=\"uc69b33a1\" id=\"uc69b33a1\" style=\"color: rgb(83, 104, 121)\">（如果是root用户，则查看全部的线程，得到的用户连接数同show status;里的 Threads_connected值是相同的）!</span></p></blockquote><h3 data-lake-id=\"GD1k3\" id=\"GD1k3\"><span data-lake-id=\"ude29c89a\" id=\"ude29c89a\" style=\"color: rgb(83, 104, 121)\">替换字段中的部分数据</span></h3><blockquote data-lake-id=\"ubd1ff76f\" id=\"ubd1ff76f\"><p data-lake-id=\"ufc140a8b\" id=\"ufc140a8b\"><span data-lake-id=\"u60ae347d\" id=\"u60ae347d\">UPDATE 你的表名 SET 你要查找的字段明=REPLACE(你要查找的字段明,'你要替换的字符串','你需要替换成什么');</span></p></blockquote><p data-lake-id=\"ue15d6095\" id=\"ue15d6095\"><span data-lake-id=\"ua82188a7\" id=\"ua82188a7\">案例代码：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22sql%22%2C%22code%22%3A%22UPDATE%20cmf_article%20SET%20title%3DREPLACE(title%2C'hello'%2C'%E4%BD%A0%E5%A5%BD')%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KvLxZ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 6,
    "hits": 6,
    "comments_count": 0,
    "word_count": 1246,
    "created_at": "2022-04-11T02:46:44.000Z",
    "updated_at": "2023-07-27T02:10:55.000Z",
    "content_updated_at": "2023-07-27T02:10:55.000Z",
    "published_at": "2022-04-12T01:45:20.000Z",
    "first_published_at": "2022-04-11T03:13:29.082Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 922855295,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72988519,
    "type": "Doc",
    "slug": "bt6cxp",
    "title": "php json 处理gbk转码utf-8问题（ json_encode转换数组，值为null）",
    "description": "tags: [php,json,转码]categories: [学无止境]copyright_author_href: https://www.xiaohuihui.net遇到个很幼稚的问题，用json_encode把数组转换为json时，发现转化的值为null。怎么回事呢？查找手册：发现了下...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u6cb4a57b\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,json,转码]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"oenrt\" class=\"ne-hr\"><p id=\"u25f65a9c\" class=\"ne-p\"><span class=\"ne-text\">遇到个很幼稚的问题，用json_encode把数组转换为json时，发现转化的值为null。怎么回事呢？查找手册：发现了下面的话：</span></p><p id=\"ue60f227a\" class=\"ne-p\"><span class=\"ne-text\">该函数只能接受 UTF-8 编码的数据（译注：指字符/字符串类型的数据）</span></p><p id=\"u2fb9ee2f\" class=\"ne-p\"><span class=\"ne-text\"> 原来数组中有中文，需要转码哦，写个转换字符编码的函数吧：</span></p><pre data-language=\"php\" id=\"rq9bQ\" class=\"ne-codeblock language-php\"><code>function encodeConvert($str, $fromCode, $toCode)\n{\n    if (strtoupper($toCode) == strtoupper($fromCode)) {\n        return $str;\n    }\n    if (is_string($str)) {\n        if (function_exists('mb_convert_encoding')) {\n            return mb_convert_encoding($str, $toCode, $fromCode);\n        } else {\n            return iconv($fromCode, $toCode, $str);\n        }\n    } elseif (is_array($str)) {\n        foreach ($str as $k =&amp;gt; $v) {\n            $str[$k] = encodeConvert($v, $fromCode, $toCode);\n        }\nreturn $str;\n}\n\n    return $str;\n}</code></pre><p id=\"u2f4d9908\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">对于数组，通过下面方式json_encode调用，一切ok ~~~</span></p><pre data-language=\"php\" id=\"hZAL3\" class=\"ne-codeblock language-php\"><code>$json_api=json_encode(encodeConvert($json_api,'gb2312','utf-8'));\n$json_api=json_decode(json_decode($json_api));</code></pre></div>",
    "body": "tags: [php,json,转码]<br />categories: [学无止境]<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n遇到个很幼稚的问题，用json_encode把数组转换为json时，发现转化的值为null。怎么回事呢？查找手册：发现了下面的话：<br />该函数只能接受 UTF-8 编码的数据（译注：指字符/字符串类型的数据）<br /> 原来数组中有中文，需要转码哦，写个转换字符编码的函数吧：\n```php\nfunction encodeConvert($str, $fromCode, $toCode)\n{\n    if (strtoupper($toCode) == strtoupper($fromCode)) {\n        return $str;\n    }\n    if (is_string($str)) {\n        if (function_exists('mb_convert_encoding')) {\n            return mb_convert_encoding($str, $toCode, $fromCode);\n        } else {\n            return iconv($fromCode, $toCode, $str);\n        }\n    } elseif (is_array($str)) {\n        foreach ($str as $k =&gt; $v) {\n            $str[$k] = encodeConvert($v, $fromCode, $toCode);\n        }\nreturn $str;\n}\n\n    return $str;\n}\n```\n对于数组，通过下面方式json_encode调用，一切ok ~~~\n```php\n$json_api=json_encode(encodeConvert($json_api,'gb2312','utf-8'));\n$json_api=json_decode(json_decode($json_api));\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u6cb4a57b\" class=\"ne-p\"><span class=\"ne-text\">tags: [php,json,转码]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"oenrt\" class=\"ne-hr\"><p id=\"u25f65a9c\" class=\"ne-p\"><span class=\"ne-text\">遇到个很幼稚的问题，用json_encode把数组转换为json时，发现转化的值为null。怎么回事呢？查找手册：发现了下面的话：</span></p><p id=\"ue60f227a\" class=\"ne-p\"><span class=\"ne-text\">该函数只能接受 UTF-8 编码的数据（译注：指字符/字符串类型的数据）</span></p><p id=\"u2fb9ee2f\" class=\"ne-p\"><span class=\"ne-text\"> 原来数组中有中文，需要转码哦，写个转换字符编码的函数吧：</span></p><pre data-language=\"php\" id=\"rq9bQ\" class=\"ne-codeblock language-php\">function encodeConvert($str, $fromCode, $toCode)\n{\n    if (strtoupper($toCode) == strtoupper($fromCode)) {\n        return $str;\n    }\n    if (is_string($str)) {\n        if (function_exists('mb_convert_encoding')) {\n            return mb_convert_encoding($str, $toCode, $fromCode);\n        } else {\n            return iconv($fromCode, $toCode, $str);\n        }\n    } elseif (is_array($str)) {\n        foreach ($str as $k =&amp;gt; $v) {\n            $str[$k] = encodeConvert($v, $fromCode, $toCode);\n        }\nreturn $str;\n}\n\n    return $str;\n}</pre><p id=\"u2f4d9908\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(83, 104, 121)\">对于数组，通过下面方式json_encode调用，一切ok ~~~</span></p><pre data-language=\"php\" id=\"hZAL3\" class=\"ne-codeblock language-php\">$json_api=json_encode(encodeConvert($json_api,'gb2312','utf-8'));\n$json_api=json_decode(json_decode($json_api));</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u6cb4a57b\" id=\"u6cb4a57b\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [php,json,转码]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: [学无止境]</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22oenrt%22%7D\"></card><p data-lake-id=\"u25f65a9c\" id=\"u25f65a9c\"><span data-lake-id=\"ued758d27\" id=\"ued758d27\">遇到个很幼稚的问题，用json_encode把数组转换为json时，发现转化的值为null。怎么回事呢？查找手册：发现了下面的话：</span></p><p data-lake-id=\"ue60f227a\" id=\"ue60f227a\"><span data-lake-id=\"u57a2f39f\" id=\"u57a2f39f\">该函数只能接受 UTF-8 编码的数据（译注：指字符/字符串类型的数据）</span></p><p data-lake-id=\"u2fb9ee2f\" id=\"u2fb9ee2f\"><span data-lake-id=\"u320215c9\" id=\"u320215c9\"> 原来数组中有中文，需要转码哦，写个转换字符编码的函数吧：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22function%20encodeConvert(%24str%2C%20%24fromCode%2C%20%24toCode)%5Cn%7B%5Cn%20%20%20%20if%20(strtoupper(%24toCode)%20%3D%3D%20strtoupper(%24fromCode))%20%7B%5Cn%20%20%20%20%20%20%20%20return%20%24str%3B%5Cn%20%20%20%20%7D%5Cn%20%20%20%20if%20(is_string(%24str))%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(function_exists('mb_convert_encoding'))%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20mb_convert_encoding(%24str%2C%20%24toCode%2C%20%24fromCode)%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20iconv(%24fromCode%2C%20%24toCode%2C%20%24str)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20elseif%20(is_array(%24str))%20%7B%5Cn%20%20%20%20%20%20%20%20foreach%20(%24str%20as%20%24k%20%3D%26gt%3B%20%24v)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%24str%5B%24k%5D%20%3D%20encodeConvert(%24v%2C%20%24fromCode%2C%20%24toCode)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cnreturn%20%24str%3B%5Cn%7D%5Cn%5Cn%20%20%20%20return%20%24str%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22rq9bQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u2f4d9908\" id=\"u2f4d9908\"><span data-lake-id=\"uf83067eb\" id=\"uf83067eb\" style=\"color: rgb(83, 104, 121)\">对于数组，通过下面方式json_encode调用，一切ok ~~~</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%24json_api%3Djson_encode(encodeConvert(%24json_api%2C'gb2312'%2C'utf-8'))%3B%5Cn%24json_api%3Djson_decode(json_decode(%24json_api))%3B%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22hZAL3%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 1,
    "read_count": 4,
    "hits": 4,
    "comments_count": 0,
    "word_count": 196,
    "created_at": "2022-04-11T02:44:16.000Z",
    "updated_at": "2023-07-27T02:11:02.000Z",
    "content_updated_at": "2023-07-27T02:11:02.000Z",
    "published_at": "2022-04-11T02:56:14.000Z",
    "first_published_at": "2022-04-11T02:46:13.369Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 920548748,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72784178,
    "type": "Doc",
    "slug": "mb7ums",
    "title": "宝塔WebHook拉取git命令",
    "description": "tags: [webhook,宝塔]categories: [学无止境]copyright_author_href: https://www.xiaohuihui.net在宝塔控制面板-》软件商店 找到webhook，点击安装并编辑如下命令：#!/bin/bash echo \"\" #输出当前时...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u9e914c13\" class=\"ne-p\"><span class=\"ne-text\">tags: [webhook,宝塔]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"lzAit\" class=\"ne-hr\"><p id=\"u58fe481c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在宝塔控制面板-》软件商店 找到webhook，点击安装并编辑如下命令：</span></p><pre data-language=\"plain\" id=\"iIXEk\" class=\"ne-codeblock language-plain\"><code>#!/bin/bash\necho &quot;&quot;\n#输出当前时间\ndate --date='0 days ago' &quot;+%Y-%m-%d %H:%M:%S&quot;\necho &quot;Start&quot;\n#判断宝塔WebHook参数是否存在\nif [ ! -n &quot;$1&quot; ]; then\n                echo &quot;param参数错误&quot;\n        echo &quot;End&quot;\n        exit\nfi\n#git项目路径\ngitPath=&quot;/www/wwwroot/$1&quot;\n#git 网址\ngitHttp=&quot;git@github.com:xianrenqh/hui_blog_hexo_pages.git&quot;\n\necho &quot;Web站点路径：$gitPath&quot;\n\n#判断项目路径是否存在\nif [ -d &quot;$gitPath&quot; ]; then\n        cd $gitPath\n        #判断是否存在git目录\n        if [ ! -d &quot;.git&quot; ]; then\n                echo &quot;在该目录下克隆 git&quot;\n                echo &quot;$gitHttp&quot;\n                git clone $gitHttp gittemp\n                mv gittemp/.git .\n\t\t\t\trm -rf gittemp\n        fi\n        #拉取最新的项目文件\n        git reset --hard origin/master\n        git pull\n        #设置目录权限\n        chown -R www:www $gitPath\n        echo &quot;End&quot;\n        exit\nelse\n        echo &quot;该项目路径不存在&quot;\n        echo &quot;End&quot;\n        exit\nfi</code></pre></div>",
    "body": "tags: [webhook,宝塔]<br />categories: [学无止境]<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n在宝塔控制面板-》软件商店 找到webhook，点击安装并编辑如下命令：\n```\n#!/bin/bash\necho \"\"\n#输出当前时间\ndate --date='0 days ago' \"+%Y-%m-%d %H:%M:%S\"\necho \"Start\"\n#判断宝塔WebHook参数是否存在\nif [ ! -n \"$1\" ]; then\n                echo \"param参数错误\"\n        echo \"End\"\n        exit\nfi\n#git项目路径\ngitPath=\"/www/wwwroot/$1\"\n#git 网址\ngitHttp=\"git@github.com:xianrenqh/hui_blog_hexo_pages.git\"\n\necho \"Web站点路径：$gitPath\"\n\n#判断项目路径是否存在\nif [ -d \"$gitPath\" ]; then\n        cd $gitPath\n        #判断是否存在git目录\n        if [ ! -d \".git\" ]; then\n                echo \"在该目录下克隆 git\"\n                echo \"$gitHttp\"\n                git clone $gitHttp gittemp\n                mv gittemp/.git .\n\t\t\t\trm -rf gittemp\n        fi\n        #拉取最新的项目文件\n        git reset --hard origin/master\n        git pull\n        #设置目录权限\n        chown -R www:www $gitPath\n        echo \"End\"\n        exit\nelse\n        echo \"该项目路径不存在\"\n        echo \"End\"\n        exit\nfi\n```\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u9e914c13\" class=\"ne-p\"><span class=\"ne-text\">tags: [webhook,宝塔]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"ud59f1d7b\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"lzAit\" class=\"ne-hr\"><p id=\"u58fe481c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在宝塔控制面板-》软件商店 找到webhook，点击安装并编辑如下命令：</span></p><pre data-language=\"plain\" id=\"iIXEk\" class=\"ne-codeblock language-plain\">#!/bin/bash\necho &quot;&quot;\n#输出当前时间\ndate --date='0 days ago' &quot;+%Y-%m-%d %H:%M:%S&quot;\necho &quot;Start&quot;\n#判断宝塔WebHook参数是否存在\nif [ ! -n &quot;$1&quot; ]; then\n                echo &quot;param参数错误&quot;\n        echo &quot;End&quot;\n        exit\nfi\n#git项目路径\ngitPath=&quot;/www/wwwroot/$1&quot;\n#git 网址\ngitHttp=&quot;git@github.com:xianrenqh/hui_blog_hexo_pages.git&quot;\n\necho &quot;Web站点路径：$gitPath&quot;\n\n#判断项目路径是否存在\nif [ -d &quot;$gitPath&quot; ]; then\n        cd $gitPath\n        #判断是否存在git目录\n        if [ ! -d &quot;.git&quot; ]; then\n                echo &quot;在该目录下克隆 git&quot;\n                echo &quot;$gitHttp&quot;\n                git clone $gitHttp gittemp\n                mv gittemp/.git .\n\t\t\t\trm -rf gittemp\n        fi\n        #拉取最新的项目文件\n        git reset --hard origin/master\n        git pull\n        #设置目录权限\n        chown -R www:www $gitPath\n        echo &quot;End&quot;\n        exit\nelse\n        echo &quot;该项目路径不存在&quot;\n        echo &quot;End&quot;\n        exit\nfi</pre></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u9e914c13\" id=\"u9e914c13\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [webhook,宝塔]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: [学无止境]</span></p><p data-lake-id=\"ud59f1d7b\" id=\"ud59f1d7b\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22lzAit%22%7D\"></card><p data-lake-id=\"u58fe481c\" id=\"u58fe481c\"><span data-lake-id=\"u2a86492a\" id=\"u2a86492a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">在宝塔控制面板-》软件商店 找到webhook，点击安装并编辑如下命令：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23!%2Fbin%2Fbash%5Cnecho%20%5C%22%5C%22%5Cn%23%E8%BE%93%E5%87%BA%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%5Cndate%20--date%3D'0%20days%20ago'%20%5C%22%2B%25Y-%25m-%25d%20%25H%3A%25M%3A%25S%5C%22%5Cnecho%20%5C%22Start%5C%22%5Cn%23%E5%88%A4%E6%96%AD%E5%AE%9D%E5%A1%94WebHook%E5%8F%82%E6%95%B0%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cnif%20%5B%20!%20-n%20%5C%22%241%5C%22%20%5D%3B%20then%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%5C%22param%E5%8F%82%E6%95%B0%E9%94%99%E8%AF%AF%5C%22%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22End%5C%22%5Cn%20%20%20%20%20%20%20%20exit%5Cnfi%5Cn%23git%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%5CngitPath%3D%5C%22%2Fwww%2Fwwwroot%2F%241%5C%22%5Cn%23git%20%E7%BD%91%E5%9D%80%5CngitHttp%3D%5C%22git%40github.com%3Axianrenqh%2Fhui_blog_hexo_pages.git%5C%22%5Cn%5Cnecho%20%5C%22Web%E7%AB%99%E7%82%B9%E8%B7%AF%E5%BE%84%EF%BC%9A%24gitPath%5C%22%5Cn%5Cn%23%E5%88%A4%E6%96%AD%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%5Cnif%20%5B%20-d%20%5C%22%24gitPath%5C%22%20%5D%3B%20then%5Cn%20%20%20%20%20%20%20%20cd%20%24gitPath%5Cn%20%20%20%20%20%20%20%20%23%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8git%E7%9B%AE%E5%BD%95%5Cn%20%20%20%20%20%20%20%20if%20%5B%20!%20-d%20%5C%22.git%5C%22%20%5D%3B%20then%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%5C%22%E5%9C%A8%E8%AF%A5%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%85%8B%E9%9A%86%20git%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%5C%22%24gitHttp%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20git%20clone%20%24gitHttp%20gittemp%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mv%20gittemp%2F.git%20.%5Cn%5Ct%5Ct%5Ct%5Ctrm%20-rf%20gittemp%5Cn%20%20%20%20%20%20%20%20fi%5Cn%20%20%20%20%20%20%20%20%23%E6%8B%89%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%5Cn%20%20%20%20%20%20%20%20git%20reset%20--hard%20origin%2Fmaster%5Cn%20%20%20%20%20%20%20%20git%20pull%5Cn%20%20%20%20%20%20%20%20%23%E8%AE%BE%E7%BD%AE%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90%5Cn%20%20%20%20%20%20%20%20chown%20-R%20www%3Awww%20%24gitPath%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22End%5C%22%5Cn%20%20%20%20%20%20%20%20exit%5Cnelse%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22%E8%AF%A5%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84%E4%B8%8D%E5%AD%98%E5%9C%A8%5C%22%5Cn%20%20%20%20%20%20%20%20echo%20%5C%22End%5C%22%5Cn%20%20%20%20%20%20%20%20exit%5Cnfi%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iIXEk%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 8,
    "hits": 8,
    "comments_count": 0,
    "word_count": 216,
    "created_at": "2022-04-09T01:45:10.000Z",
    "updated_at": "2023-07-27T02:11:12.000Z",
    "content_updated_at": "2023-07-27T02:11:12.000Z",
    "published_at": "2022-04-11T01:24:09.000Z",
    "first_published_at": "2022-04-09T01:47:47.963Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 920197321,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72782821,
    "type": "Doc",
    "slug": "hle57d",
    "title": "Hexo使用ButterFly主题",
    "description": "tags: [hexo,博客,主题]categories: [学无止境]copyright_author_href: https://www.xiaohuihui.net安装主题参考主题官网：https://butterfly.js.org/posts/21cfbf15github安装稳定版【...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u9e914c13\" class=\"ne-p\"><span class=\"ne-text\">tags: [hexo,博客,主题]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u31feb1aa\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"Y4NJW\" class=\"ne-hr\"><h1 id=\"A0Rr3\"><span class=\"ne-text\">安装主题</span></h1><p id=\"uc145a3e7\" class=\"ne-p\"><span class=\"ne-text\">参考主题官网：</span></p><p id=\"ucf3195df\" class=\"ne-p\"><a href=\"https://butterfly.js.org/posts/21cfbf15#%E5%AE%89%E8%A3%9D\" data-href=\"https://butterfly.js.org/posts/21cfbf15#%E5%AE%89%E8%A3%9D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://butterfly.js.org/posts/21cfbf15</span></a></p><h2 id=\"iGfwe\"><span class=\"ne-text\">github安装</span></h2><p id=\"ud69c2d4f\" class=\"ne-p\"><span class=\"ne-text\">稳定版【建议】</span></p><p id=\"u9d1fcad0\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"uf46ced9b\" class=\"ne-p\"><span class=\"ne-text\">在你的 Hexo 根目录里</span></p><p id=\"u872f1ac0\" class=\"ne-p\"><span class=\"ne-text\"></span></p><pre data-language=\"powershell\" id=\"bbUss\" class=\"ne-codeblock language-powershell\"><code>git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</code></pre><p id=\"u6d3c2522\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u2d5b840e\" class=\"ne-p\"><span class=\"ne-text\">测试版可能存在 bug，追求稳定的请安装稳定版</span></p><p id=\"u1eb0a31c\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u07828385\" class=\"ne-p\"><span class=\"ne-text\">如果想要安装比较新的 dev 分支，可以</span></p><p id=\"ue5051650\" class=\"ne-p\"><span class=\"ne-text\"></span></p><pre data-language=\"powershell\" id=\"S21iw\" class=\"ne-codeblock language-powershell\"><code>git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</code></pre><div class=\"ne-quote\"><p id=\"u51d297f1\" class=\"ne-p\"><span class=\"ne-text\">升级方法：在主题目录下，运行 git pull</span></p></div><p id=\"uf1fcbdf1\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ua88ccdbe\" class=\"ne-p\"><br></p></div>",
    "body": "tags: [hexo,博客,主题]<br />categories: [学无止境]<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"A0Rr3\"></a>\n# 安装主题\n参考主题官网：<br />[https://butterfly.js.org/posts/21cfbf15](https://butterfly.js.org/posts/21cfbf15#%E5%AE%89%E8%A3%9D)\n<a name=\"iGfwe\"></a>\n## github安装\n稳定版【建议】\n\n在你的 Hexo 根目录里\n\n```powershell\ngit clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly\n```\n\n测试版可能存在 bug，追求稳定的请安装稳定版\n\n如果想要安装比较新的 dev 分支，可以\n\n```powershell\ngit clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly\n```\n> 升级方法：在主题目录下，运行 git pull\n\n\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u9e914c13\" class=\"ne-p\"><span class=\"ne-text\">tags: [hexo,博客,主题]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u31feb1aa\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"Y4NJW\" class=\"ne-hr\"><h1 id=\"A0Rr3\"><span class=\"ne-text\">安装主题</span></h1><p id=\"uc145a3e7\" class=\"ne-p\"><span class=\"ne-text\">参考主题官网：</span></p><p id=\"ucf3195df\" class=\"ne-p\"><a href=\"https://butterfly.js.org/posts/21cfbf15#%E5%AE%89%E8%A3%9D\" data-href=\"https://butterfly.js.org/posts/21cfbf15#%E5%AE%89%E8%A3%9D\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">https://butterfly.js.org/posts/21cfbf15</span></a></p><h2 id=\"iGfwe\"><span class=\"ne-text\">github安装</span></h2><p id=\"ud69c2d4f\" class=\"ne-p\"><span class=\"ne-text\">稳定版【建议】</span></p><p id=\"u9d1fcad0\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"uf46ced9b\" class=\"ne-p\"><span class=\"ne-text\">在你的 Hexo 根目录里</span></p><p id=\"u872f1ac0\" class=\"ne-p\"><span class=\"ne-text\"></span></p><pre data-language=\"powershell\" id=\"bbUss\" class=\"ne-codeblock language-powershell\">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</pre><p id=\"u6d3c2522\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u2d5b840e\" class=\"ne-p\"><span class=\"ne-text\">测试版可能存在 bug，追求稳定的请安装稳定版</span></p><p id=\"u1eb0a31c\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u07828385\" class=\"ne-p\"><span class=\"ne-text\">如果想要安装比较新的 dev 分支，可以</span></p><p id=\"ue5051650\" class=\"ne-p\"><span class=\"ne-text\"></span></p><pre data-language=\"powershell\" id=\"S21iw\" class=\"ne-codeblock language-powershell\">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</pre><div class=\"ne-quote\"><p id=\"u51d297f1\" class=\"ne-p\"><span class=\"ne-text\">升级方法：在主题目录下，运行 git pull</span></p></div><p id=\"uf1fcbdf1\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ua88ccdbe\" class=\"ne-p\"><br></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u9e914c13\" id=\"u9e914c13\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [hexo,博客,主题]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: [学无止境]</span></p><p data-lake-id=\"u31feb1aa\" id=\"u31feb1aa\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22Y4NJW%22%7D\"></card><h1 data-lake-id=\"A0Rr3\" id=\"A0Rr3\"><span data-lake-id=\"u10b6aec9\" id=\"u10b6aec9\">安装主题</span></h1><p data-lake-id=\"uc145a3e7\" id=\"uc145a3e7\"><span data-lake-id=\"u0a8ba0b0\" id=\"u0a8ba0b0\">参考主题官网：</span></p><p data-lake-id=\"ucf3195df\" id=\"ucf3195df\"><a href=\"https://butterfly.js.org/posts/21cfbf15#%E5%AE%89%E8%A3%9D\" target=\"_blank\" data-lake-id=\"u6f379137\" id=\"u6f379137\"><span data-lake-id=\"u22a2ea5b\" id=\"u22a2ea5b\">https://butterfly.js.org/posts/21cfbf15</span></a></p><h2 data-lake-id=\"iGfwe\" id=\"iGfwe\"><span data-lake-id=\"u29348f74\" id=\"u29348f74\">github安装</span></h2><p data-lake-id=\"ud69c2d4f\" id=\"ud69c2d4f\"><span data-lake-id=\"udf51f500\" id=\"udf51f500\">稳定版【建议】</span></p><p data-lake-id=\"u9d1fcad0\" id=\"u9d1fcad0\"><span data-lake-id=\"uc8dc4b0b\" id=\"uc8dc4b0b\">​</span><br></p><p data-lake-id=\"uf46ced9b\" id=\"uf46ced9b\"><span data-lake-id=\"u2b6be83c\" id=\"u2b6be83c\">在你的 Hexo 根目录里</span></p><p data-lake-id=\"u872f1ac0\" id=\"u872f1ac0\"><span data-lake-id=\"u9a91bf46\" id=\"u9a91bf46\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22powershell%22%2C%22code%22%3A%22git%20clone%20-b%20master%20https%3A%2F%2Fgithub.com%2Fjerryc127%2Fhexo-theme-butterfly.git%20themes%2Fbutterfly%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22bbUss%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u6d3c2522\" id=\"u6d3c2522\"><span data-lake-id=\"u3ca70799\" id=\"u3ca70799\">​</span><br></p><p data-lake-id=\"u2d5b840e\" id=\"u2d5b840e\"><span data-lake-id=\"ubdba9748\" id=\"ubdba9748\">测试版可能存在 bug，追求稳定的请安装稳定版</span></p><p data-lake-id=\"u1eb0a31c\" id=\"u1eb0a31c\"><span data-lake-id=\"uf4c0a4c9\" id=\"uf4c0a4c9\">​</span><br></p><p data-lake-id=\"u07828385\" id=\"u07828385\"><span data-lake-id=\"uaac78eee\" id=\"uaac78eee\">如果想要安装比较新的 dev 分支，可以</span></p><p data-lake-id=\"ue5051650\" id=\"ue5051650\"><span data-lake-id=\"uc59b9f81\" id=\"uc59b9f81\">​</span><br></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22powershell%22%2C%22code%22%3A%22git%20clone%20-b%20dev%20https%3A%2F%2Fgithub.com%2Fjerryc127%2Fhexo-theme-butterfly.git%20themes%2Fbutterfly%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22S21iw%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"u2fe56f3a\" id=\"u2fe56f3a\"><p data-lake-id=\"u51d297f1\" id=\"u51d297f1\"><span data-lake-id=\"u2422fa57\" id=\"u2422fa57\">升级方法：在主题目录下，运行 git pull</span></p></blockquote><p data-lake-id=\"uf1fcbdf1\" id=\"uf1fcbdf1\"><span data-lake-id=\"u08b0ed65\" id=\"u08b0ed65\">​</span><br></p><p data-lake-id=\"ua88ccdbe\" id=\"ua88ccdbe\"><br></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 11,
    "hits": 11,
    "comments_count": 0,
    "word_count": 111,
    "created_at": "2022-04-09T01:29:05.000Z",
    "updated_at": "2023-07-27T02:11:17.000Z",
    "content_updated_at": "2023-07-27T02:11:17.000Z",
    "published_at": "2022-04-11T01:28:53.000Z",
    "first_published_at": "2022-04-09T01:33:49.914Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 920210571,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72685107,
    "type": "Doc",
    "slug": "xo8csy",
    "title": "使用Hexo搭建博客",
    "description": "tags: [hexo,博客,安装]categories: [学无止境]cover: https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgitee.com%2Fwangbowen97%2FBlogImgs%2Fraw%2Fmaster%...",
    "cover": "",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u87811124\" class=\"ne-p\"><span class=\"ne-text\">tags: [hexo,博客,安装]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u8122209a\" class=\"ne-p\"><span class=\"ne-text\">cover: https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgitee.com%2Fwangbowen97%2FBlogImgs%2Fraw%2Fmaster%2FpostImages%2FHexoCover.jpg&amp;refer=http%3A%2F%2Fgitee.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652059164&amp;t=ac7f746ad7621718ece964ce547ba635</span></p><p id=\"u36159cb3\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"duTWI\" class=\"ne-hr\"><h1 id=\"OnbZR\"><span class=\"ne-text\">一、安装node.js</span></h1><ul class=\"ne-ul\"><li id=\"u602cf172\" data-lake-index-type=\"0\"><a href=\"https://nodejs.org/en/\" data-href=\"https://nodejs.org/en/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">node.js官方下载地址</span></a></li><li id=\"u9f932ddf\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">从上面的链接下载node.js，并安装。</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"udd95d472\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">注意：官方链接可能需要</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">fanqiang</span></strong></li><li id=\"udb27e5d6\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">注意：我的操作系统是</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Windows 7 (64bit)</span></strong></li></ul></ul><h2 id=\"lGSQG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">设置npm淘宝镜像站</span></h2><ul class=\"ne-ul\"><li id=\"ub74f3eef\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">npm默认的源的下载速度可能很慢，建议使用淘宝镜像替换。</span></li><li id=\"u716c7ed7\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">执行下面的命令，将npm的源设置成淘宝镜像站。</span></li></ul><pre data-language=\"plain\" id=\"RLxJs\" class=\"ne-codeblock language-plain\"><code>npm config set registry &quot;https://registry.npm.taobao.org&quot;</code></pre><p id=\"u8dc785a4\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\"></span></p><h1 id=\"qFbGd\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">二、安装hexo</span></h1><ul class=\"ne-ul\"><li id=\"uc505a14e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">执行以下命令安装hexo。</span></li></ul><pre data-language=\"plain\" id=\"cNjKB\" class=\"ne-codeblock language-plain\"><code># 安装hexo\nnpm install hexo-cli g\n# 初始化博客文件夹\nhexo init blog\n# 切换到该路径\ncd blog\n# 安装hexo的扩展插件\nnpm install\n# 安装其它插件\nnpm install hexo-server --save\nnpm install hexo-admin --save\nnpm install hexo-generator-archive --save\nnpm install hexo-generator-feed --save\nnpm install hexo-generator-search --save\nnpm install hexo-generator-tag --save\nnpm install hexo-deployer-git --save\nnpm install hexo-generator-sitemap --save\n</code></pre><p id=\"u6e01e889\" class=\"ne-p\"><span class=\"ne-text\">初探hexo<br /></span><span class=\"ne-text\">第一次使用hexo，在本地创建服务器使用。</span></p><p id=\"ua70f6208\" class=\"ne-p\"><br></p><h1 id=\"ef9524d8\"><span class=\"ne-text\">生成静态页面</span></h1><p id=\"u68ee8ab5\" class=\"ne-p\"><br></p><p id=\"u076f128f\" class=\"ne-p\"><span class=\"ne-text\">hexo generate</span></p><p id=\"u92cf2f77\" class=\"ne-p\"><br></p><h1 id=\"8b56e1ca\"><span class=\"ne-text\">三、开启本地服务器</span></h1><pre data-language=\"plain\" id=\"FqeSL\" class=\"ne-codeblock language-plain\"><code># 生成静态页面\nhexo generate\n# 开启本地服务器\nhexo s</code></pre><p id=\"uddb04cfb\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">打开浏览器，地址栏中输入：http://localhost:4000/,应该可以看见刚刚创建的博客了。<br /></span><span class=\"ne-text\">问题：为什么访问http://localhost:4000/，无反应？<br /></span><span class=\"ne-text\">解决方法：可能是由于端口问题引起的。使用Ctrl+C中断本地服务，使用命令hexo s -p 5000重新开启本地服务，访问</span><a href=\"http://localhost:5000/\" data-href=\"http://localhost:5000/\" target=\"_blank\" class=\"ne-link\"><strong><span class=\"ne-text\">http://localhost:5000/</span></strong></a><span class=\"ne-text\">可以看到博客页面了。</span></p><p id=\"u09605b54\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u36503bdc\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"X9Zmb\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">四、hexo命令缩写</span></h1><ul class=\"ne-ul\"><li id=\"ud5f22c08\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">hexo支持命令缩写，如下所示。</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">hexo g</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">等价于</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">hexo generate</span></li></ul><pre data-language=\"plain\" id=\"KwtZE\" class=\"ne-codeblock language-plain\"><code>hexo g：hexo generate\nhexo c：hexo clean\nhexo s：hexo server\nhexo d：hexo deploy</code></pre><h1 id=\"bt0fb\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">hexo组合命令</span></h1><pre data-language=\"plain\" id=\"D7HcP\" class=\"ne-codeblock language-plain\"><code># 清除、生成、启动\nhexo clean &amp;&amp; hexo g -s\n# 清除、生成、部署\nhexo clean &amp;&amp; hexo g -d</code></pre><h1 id=\"wIgBE\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">常见问题</span></h1><h2 id=\"MW4a3\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">hexo deploy没有反应？</span></h2><ul class=\"ne-ul\"><li id=\"ud2b03b80\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">修改配置文件：</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">_config.yml</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">时，冒号后面没加空格。</span></li></ul><h2 id=\"LD2Ev\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">hexo s 网站打不开？</span></h2><ul class=\"ne-ul\"><li id=\"uc9d83b79\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">端口占用，换个端口就好了。执行命令</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">hexo s -p 5000</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">，并在浏览器地址栏输入http://localhost:5000，回车访问。</span></li></ul><h2 id=\"Wg7F1\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">如何换主题？</span></h2><ul class=\"ne-ul\"><li id=\"ufa074d65\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">将主题下载后，放到themes文件夹中即可。例如，下面命令安装next主题：</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">。</span></li></ul></div>",
    "body": "tags: [hexo,博客,安装]<br />categories: [学无止境]<br />cover: https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgitee.com%2Fwangbowen97%2FBlogImgs%2Fraw%2Fmaster%2FpostImages%2FHexoCover.jpg&refer=http%3A%2F%2Fgitee.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1652059164&t=ac7f746ad7621718ece964ce547ba635<br />copyright_author_href: https://www.xiaohuihui.cc\n\n---\n\n<a name=\"OnbZR\"></a>\n# 一、安装node.js\n\n- [node.js官方下载地址](https://nodejs.org/en/)\n- 从上面的链接下载node.js，并安装。\n   - 注意：官方链接可能需要**fanqiang**\n   - 注意：我的操作系统是**Windows 7 (64bit)**\n<a name=\"lGSQG\"></a>\n## 设置npm淘宝镜像站\n\n- npm默认的源的下载速度可能很慢，建议使用淘宝镜像替换。\n- 执行下面的命令，将npm的源设置成淘宝镜像站。\n```\nnpm config set registry \"https://registry.npm.taobao.org\"\n```\n\n<a name=\"qFbGd\"></a>\n# 二、安装hexo\n\n- 执行以下命令安装hexo。\n```\n# 安装hexo\nnpm install hexo-cli g\n# 初始化博客文件夹\nhexo init blog\n# 切换到该路径\ncd blog\n# 安装hexo的扩展插件\nnpm install\n# 安装其它插件\nnpm install hexo-server --save\nnpm install hexo-admin --save\nnpm install hexo-generator-archive --save\nnpm install hexo-generator-feed --save\nnpm install hexo-generator-search --save\nnpm install hexo-generator-tag --save\nnpm install hexo-deployer-git --save\nnpm install hexo-generator-sitemap --save\n\n```\n初探hexo<br />第一次使用hexo，在本地创建服务器使用。\n\n<a name=\"ef9524d8\"></a>\n# 生成静态页面\n\nhexo generate\n\n<a name=\"8b56e1ca\"></a>\n# 三、开启本地服务器\n```\n# 生成静态页面\nhexo generate\n# 开启本地服务器\nhexo s\n```\n<br />打开浏览器，地址栏中输入：http://localhost:4000/,应该可以看见刚刚创建的博客了。<br />问题：为什么访问http://localhost:4000/，无反应？<br />解决方法：可能是由于端口问题引起的。使用Ctrl+C中断本地服务，使用命令hexo s -p 5000重新开启本地服务，访问[**http://localhost:5000/**](http://localhost:5000/)可以看到博客页面了。\n\n\n<a name=\"X9Zmb\"></a>\n# 四、hexo命令缩写\n\n- hexo支持命令缩写，如下所示。hexo g等价于hexo generate\n```\nhexo g：hexo generate\nhexo c：hexo clean\nhexo s：hexo server\nhexo d：hexo deploy\n```\n<a name=\"bt0fb\"></a>\n# hexo组合命令\n```\n# 清除、生成、启动\nhexo clean && hexo g -s\n# 清除、生成、部署\nhexo clean && hexo g -d\n```\n<a name=\"wIgBE\"></a>\n# 常见问题\n<a name=\"MW4a3\"></a>\n## hexo deploy没有反应？\n\n- 修改配置文件：**_config.yml**时，冒号后面没加空格。\n<a name=\"LD2Ev\"></a>\n## hexo s 网站打不开？\n\n- 端口占用，换个端口就好了。执行命令hexo s -p 5000，并在浏览器地址栏输入http://localhost:5000，回车访问。\n<a name=\"Wg7F1\"></a>\n## 如何换主题？\n\n- 将主题下载后，放到themes文件夹中即可。例如，下面命令安装next主题：git clone https://github.com/iissnan/hexo-theme-next themes/next。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u87811124\" class=\"ne-p\"><span class=\"ne-text\">tags: [hexo,博客,安装]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u8122209a\" class=\"ne-p\"><span class=\"ne-text\">cover: https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgitee.com%2Fwangbowen97%2FBlogImgs%2Fraw%2Fmaster%2FpostImages%2FHexoCover.jpg&amp;refer=http%3A%2F%2Fgitee.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652059164&amp;t=ac7f746ad7621718ece964ce547ba635</span></p><p id=\"u36159cb3\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"duTWI\" class=\"ne-hr\"><h1 id=\"OnbZR\"><span class=\"ne-text\">一、安装node.js</span></h1><ul class=\"ne-ul\"><li id=\"u602cf172\" data-lake-index-type=\"0\"><a href=\"https://nodejs.org/en/\" data-href=\"https://nodejs.org/en/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">node.js官方下载地址</span></a></li><li id=\"u9f932ddf\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">从上面的链接下载node.js，并安装。</span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"udd95d472\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">注意：官方链接可能需要</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">fanqiang</span></strong></li><li id=\"udb27e5d6\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">注意：我的操作系统是</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Windows 7 (64bit)</span></strong></li></ul></ul><h2 id=\"lGSQG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">设置npm淘宝镜像站</span></h2><ul class=\"ne-ul\"><li id=\"ub74f3eef\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">npm默认的源的下载速度可能很慢，建议使用淘宝镜像替换。</span></li><li id=\"u716c7ed7\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">执行下面的命令，将npm的源设置成淘宝镜像站。</span></li></ul><pre data-language=\"plain\" id=\"RLxJs\" class=\"ne-codeblock language-plain\"><code>npm config set registry &quot;https://registry.npm.taobao.org&quot;</code></pre><p id=\"u8dc785a4\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 16px\"></span></p><h1 id=\"qFbGd\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">二、安装hexo</span></h1><ul class=\"ne-ul\"><li id=\"uc505a14e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">执行以下命令安装hexo。</span></li></ul><pre data-language=\"plain\" id=\"cNjKB\" class=\"ne-codeblock language-plain\"><code># 安装hexo\nnpm install hexo-cli g\n# 初始化博客文件夹\nhexo init blog\n# 切换到该路径\ncd blog\n# 安装hexo的扩展插件\nnpm install\n# 安装其它插件\nnpm install hexo-server --save\nnpm install hexo-admin --save\nnpm install hexo-generator-archive --save\nnpm install hexo-generator-feed --save\nnpm install hexo-generator-search --save\nnpm install hexo-generator-tag --save\nnpm install hexo-deployer-git --save\nnpm install hexo-generator-sitemap --save\n</code></pre><p id=\"u6e01e889\" class=\"ne-p\"><span class=\"ne-text\">初探hexo<br /></span><span class=\"ne-text\">第一次使用hexo，在本地创建服务器使用。</span></p><p id=\"ua70f6208\" class=\"ne-p\"><br></p><h1 id=\"ef9524d8\"><span class=\"ne-text\">生成静态页面</span></h1><p id=\"u68ee8ab5\" class=\"ne-p\"><br></p><p id=\"u076f128f\" class=\"ne-p\"><span class=\"ne-text\">hexo generate</span></p><p id=\"u92cf2f77\" class=\"ne-p\"><br></p><h1 id=\"8b56e1ca\"><span class=\"ne-text\">三、开启本地服务器</span></h1><pre data-language=\"plain\" id=\"FqeSL\" class=\"ne-codeblock language-plain\"><code># 生成静态页面\nhexo generate\n# 开启本地服务器\nhexo s</code></pre><p id=\"uddb04cfb\" class=\"ne-p\"><span class=\"ne-text\"><br /></span><span class=\"ne-text\">打开浏览器，地址栏中输入：http://localhost:4000/,应该可以看见刚刚创建的博客了。<br /></span><span class=\"ne-text\">问题：为什么访问http://localhost:4000/，无反应？<br /></span><span class=\"ne-text\">解决方法：可能是由于端口问题引起的。使用Ctrl+C中断本地服务，使用命令hexo s -p 5000重新开启本地服务，访问</span><a href=\"http://localhost:5000/\" data-href=\"http://localhost:5000/\" target=\"_blank\" class=\"ne-link\"><strong><span class=\"ne-text\">http://localhost:5000/</span></strong></a><span class=\"ne-text\">可以看到博客页面了。</span></p><p id=\"u09605b54\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u36503bdc\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"X9Zmb\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">四、hexo命令缩写</span></h1><ul class=\"ne-ul\"><li id=\"ud5f22c08\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">hexo支持命令缩写，如下所示。</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">hexo g</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">等价于</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">hexo generate</span></li></ul><pre data-language=\"plain\" id=\"KwtZE\" class=\"ne-codeblock language-plain\"><code>hexo g：hexo generate\nhexo c：hexo clean\nhexo s：hexo server\nhexo d：hexo deploy</code></pre><h1 id=\"bt0fb\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">hexo组合命令</span></h1><pre data-language=\"plain\" id=\"D7HcP\" class=\"ne-codeblock language-plain\"><code># 清除、生成、启动\nhexo clean &amp;&amp; hexo g -s\n# 清除、生成、部署\nhexo clean &amp;&amp; hexo g -d</code></pre><h1 id=\"wIgBE\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">常见问题</span></h1><h2 id=\"MW4a3\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">hexo deploy没有反应？</span></h2><ul class=\"ne-ul\"><li id=\"ud2b03b80\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">修改配置文件：</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">_config.yml</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">时，冒号后面没加空格。</span></li></ul><h2 id=\"LD2Ev\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">hexo s 网站打不开？</span></h2><ul class=\"ne-ul\"><li id=\"uc9d83b79\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">端口占用，换个端口就好了。执行命令</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">hexo s -p 5000</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">，并在浏览器地址栏输入http://localhost:5000，回车访问。</span></li></ul><h2 id=\"Wg7F1\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">如何换主题？</span></h2><ul class=\"ne-ul\"><li id=\"ufa074d65\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">将主题下载后，放到themes文件夹中即可。例如，下面命令安装next主题：</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">。</span></li></ul></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><p data-lake-id=\"u87811124\" id=\"u87811124\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [hexo,博客,安装]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: [学无止境]</span></p><p data-lake-id=\"u8122209a\" id=\"u8122209a\"><span data-lake-id=\"uae9b0a12\" id=\"uae9b0a12\">cover: https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgitee.com%2Fwangbowen97%2FBlogImgs%2Fraw%2Fmaster%2FpostImages%2FHexoCover.jpg&amp;refer=http%3A%2F%2Fgitee.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652059164&amp;t=ac7f746ad7621718ece964ce547ba635</span></p><p data-lake-id=\"u36159cb3\" id=\"u36159cb3\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"u4150ab19\" id=\"u4150ab19\" style=\"color: rgb(38, 38, 38)\">cc</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22duTWI%22%7D\"></card><h1 data-lake-id=\"OnbZR\" id=\"OnbZR\"><span data-lake-id=\"u9df6b788\" id=\"u9df6b788\">一、安装node.js</span></h1><ul list=\"u9cb130e5\"><li fid=\"u7e019491\" data-lake-id=\"u602cf172\" id=\"u602cf172\"><a href=\"https://nodejs.org/en/\" target=\"_blank\" data-lake-id=\"uef69e077\" id=\"uef69e077\"><span data-lake-id=\"u3cbce192\" id=\"u3cbce192\">node.js官方下载地址</span></a></li><li fid=\"u7e019491\" data-lake-id=\"u9f932ddf\" id=\"u9f932ddf\"><span data-lake-id=\"u808f2f91\" id=\"u808f2f91\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">从上面的链接下载node.js，并安装。</span></li></ul><ul list=\"u9cb130e5\" data-lake-indent=\"1\"><li fid=\"u4a5e5df1\" data-lake-id=\"udd95d472\" id=\"udd95d472\"><span data-lake-id=\"u04ba0028\" id=\"u04ba0028\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">注意：官方链接可能需要</span><strong><span data-lake-id=\"ue2c85495\" id=\"ue2c85495\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">fanqiang</span></strong></li><li fid=\"u4a5e5df1\" data-lake-id=\"udb27e5d6\" id=\"udb27e5d6\"><span data-lake-id=\"u8975482f\" id=\"u8975482f\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">注意：我的操作系统是</span><strong><span data-lake-id=\"u375ce976\" id=\"u375ce976\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">Windows 7 (64bit)</span></strong></li></ul><h2 data-lake-id=\"lGSQG\" id=\"lGSQG\"><span data-lake-id=\"u38595ede\" id=\"u38595ede\" style=\"color: rgb(79, 79, 79)\">设置npm淘宝镜像站</span></h2><ul list=\"u2d987438\"><li fid=\"ufa8531d6\" data-lake-id=\"ub74f3eef\" id=\"ub74f3eef\"><span data-lake-id=\"ua55df433\" id=\"ua55df433\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">npm默认的源的下载速度可能很慢，建议使用淘宝镜像替换。</span></li><li fid=\"ufa8531d6\" data-lake-id=\"u716c7ed7\" id=\"u716c7ed7\"><span data-lake-id=\"u86c6fc93\" id=\"u86c6fc93\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">执行下面的命令，将npm的源设置成淘宝镜像站。</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22npm%20config%20set%20registry%20%5C%22https%3A%2F%2Fregistry.npm.taobao.org%5C%22%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22RLxJs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8dc785a4\" id=\"u8dc785a4\"><span data-lake-id=\"u2e3a8345\" id=\"u2e3a8345\" class=\"lake-fontsize-12\">​</span><br></p><h1 data-lake-id=\"qFbGd\" id=\"qFbGd\"><span data-lake-id=\"u734c1c93\" id=\"u734c1c93\" style=\"color: rgb(79, 79, 79)\">二、安装hexo</span></h1><ul list=\"u6dd7c89a\"><li fid=\"u995babd1\" data-lake-id=\"uc505a14e\" id=\"uc505a14e\"><span data-lake-id=\"ufdf45bd9\" id=\"ufdf45bd9\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">执行以下命令安装hexo。</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%20%E5%AE%89%E8%A3%85hexo%5Cnnpm%20install%20hexo-cli%20g%5Cn%23%20%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8D%9A%E5%AE%A2%E6%96%87%E4%BB%B6%E5%A4%B9%5Cnhexo%20init%20blog%5Cn%23%20%E5%88%87%E6%8D%A2%E5%88%B0%E8%AF%A5%E8%B7%AF%E5%BE%84%5Cncd%20blog%5Cn%23%20%E5%AE%89%E8%A3%85hexo%E7%9A%84%E6%89%A9%E5%B1%95%E6%8F%92%E4%BB%B6%5Cnnpm%20install%5Cn%23%20%E5%AE%89%E8%A3%85%E5%85%B6%E5%AE%83%E6%8F%92%E4%BB%B6%5Cnnpm%20install%20hexo-server%20--save%5Cnnpm%20install%20hexo-admin%20--save%5Cnnpm%20install%20hexo-generator-archive%20--save%5Cnnpm%20install%20hexo-generator-feed%20--save%5Cnnpm%20install%20hexo-generator-search%20--save%5Cnnpm%20install%20hexo-generator-tag%20--save%5Cnnpm%20install%20hexo-deployer-git%20--save%5Cnnpm%20install%20hexo-generator-sitemap%20--save%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22cNjKB%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u6e01e889\" id=\"u6e01e889\"><span data-lake-id=\"u1892fbb8\" id=\"u1892fbb8\">初探hexo<br /></span><span data-lake-id=\"u5a1bb641\" id=\"u5a1bb641\">第一次使用hexo，在本地创建服务器使用。</span></p><p data-lake-id=\"ua70f6208\" id=\"ua70f6208\"><br></p><h1 data-lake-id=\"ef9524d8\" id=\"ef9524d8\"><span data-lake-id=\"u9215e49f\" id=\"u9215e49f\">生成静态页面</span></h1><p data-lake-id=\"u68ee8ab5\" id=\"u68ee8ab5\"><br></p><p data-lake-id=\"u076f128f\" id=\"u076f128f\"><span data-lake-id=\"u2c3577eb\" id=\"u2c3577eb\">hexo generate</span></p><p data-lake-id=\"u92cf2f77\" id=\"u92cf2f77\"><br></p><h1 data-lake-id=\"8b56e1ca\" id=\"8b56e1ca\"><span data-lake-id=\"u38a44acf\" id=\"u38a44acf\">三、开启本地服务器</span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%20%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2%5Cnhexo%20generate%5Cn%23%20%E5%BC%80%E5%90%AF%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%5Cnhexo%20s%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22FqeSL%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uddb04cfb\" id=\"uddb04cfb\"><span data-lake-id=\"ue84cc724\" id=\"ue84cc724\"><br /></span><span data-lake-id=\"ubfac7705\" id=\"ubfac7705\">打开浏览器，地址栏中输入：http://localhost:4000/,应该可以看见刚刚创建的博客了。<br /></span><span data-lake-id=\"u51df4385\" id=\"u51df4385\">问题：为什么访问http://localhost:4000/，无反应？<br /></span><span data-lake-id=\"uac74d954\" id=\"uac74d954\">解决方法：可能是由于端口问题引起的。使用Ctrl+C中断本地服务，使用命令hexo s -p 5000重新开启本地服务，访问</span><a href=\"http://localhost:5000/\" target=\"_blank\" data-lake-id=\"u9d0f1df9\" id=\"u9d0f1df9\"><strong><span data-lake-id=\"ud61a90ef\" id=\"ud61a90ef\">http://localhost:5000/</span></strong></a><span data-lake-id=\"u28e2998a\" id=\"u28e2998a\">可以看到博客页面了。</span></p><p data-lake-id=\"u09605b54\" id=\"u09605b54\"><span data-lake-id=\"u4ebf2f2d\" id=\"u4ebf2f2d\">​</span><br></p><p data-lake-id=\"u36503bdc\" id=\"u36503bdc\"><span data-lake-id=\"u99af9ed2\" id=\"u99af9ed2\">​</span><br></p><h1 data-lake-id=\"X9Zmb\" id=\"X9Zmb\"><span data-lake-id=\"ueec3364a\" id=\"ueec3364a\" style=\"color: rgb(79, 79, 79)\">四、hexo命令缩写</span></h1><ul list=\"uf7d9bca9\"><li fid=\"ub544ce4f\" data-lake-id=\"ud5f22c08\" id=\"ud5f22c08\"><span data-lake-id=\"u99b4f2ca\" id=\"u99b4f2ca\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">hexo支持命令缩写，如下所示。</span><span data-lake-id=\"uc7394686\" id=\"uc7394686\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">hexo g</span><span data-lake-id=\"u76569d1d\" id=\"u76569d1d\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">等价于</span><span data-lake-id=\"u2cbb1777\" id=\"u2cbb1777\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">hexo generate</span></li></ul><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22hexo%20g%EF%BC%9Ahexo%20generate%5Cnhexo%20c%EF%BC%9Ahexo%20clean%5Cnhexo%20s%EF%BC%9Ahexo%20server%5Cnhexo%20d%EF%BC%9Ahexo%20deploy%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22KwtZE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"bt0fb\" id=\"bt0fb\"><span data-lake-id=\"u4f809e71\" id=\"u4f809e71\" style=\"color: rgb(79, 79, 79)\">hexo组合命令</span></h1><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23%20%E6%B8%85%E9%99%A4%E3%80%81%E7%94%9F%E6%88%90%E3%80%81%E5%90%AF%E5%8A%A8%5Cnhexo%20clean%20%26%26%20hexo%20g%20-s%5Cn%23%20%E6%B8%85%E9%99%A4%E3%80%81%E7%94%9F%E6%88%90%E3%80%81%E9%83%A8%E7%BD%B2%5Cnhexo%20clean%20%26%26%20hexo%20g%20-d%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22D7HcP%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"wIgBE\" id=\"wIgBE\"><span data-lake-id=\"u6fd84c75\" id=\"u6fd84c75\" style=\"color: rgb(79, 79, 79)\">常见问题</span></h1><h2 data-lake-id=\"MW4a3\" id=\"MW4a3\"><span data-lake-id=\"u1c5b6cc8\" id=\"u1c5b6cc8\" style=\"color: rgb(79, 79, 79)\">hexo deploy没有反应？</span></h2><ul list=\"uef29aad8\"><li fid=\"u8ff614e3\" data-lake-id=\"ud2b03b80\" id=\"ud2b03b80\"><span data-lake-id=\"u78516d56\" id=\"u78516d56\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">修改配置文件：</span><strong><span data-lake-id=\"u41a818c3\" id=\"u41a818c3\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">_config.yml</span></strong><span data-lake-id=\"u58e34ff6\" id=\"u58e34ff6\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">时，冒号后面没加空格。</span></li></ul><h2 data-lake-id=\"LD2Ev\" id=\"LD2Ev\"><span data-lake-id=\"ua5d5f086\" id=\"ua5d5f086\" style=\"color: rgb(79, 79, 79)\">hexo s 网站打不开？</span></h2><ul list=\"u71647650\"><li fid=\"u68468078\" data-lake-id=\"uc9d83b79\" id=\"uc9d83b79\"><span data-lake-id=\"uba0bd125\" id=\"uba0bd125\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">端口占用，换个端口就好了。执行命令</span><span data-lake-id=\"u95647a3e\" id=\"u95647a3e\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">hexo s -p 5000</span><span data-lake-id=\"uc1c35303\" id=\"uc1c35303\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">，并在浏览器地址栏输入http://localhost:5000，回车访问。</span></li></ul><h2 data-lake-id=\"Wg7F1\" id=\"Wg7F1\"><span data-lake-id=\"u7f5990f9\" id=\"u7f5990f9\" style=\"color: rgb(79, 79, 79)\">如何换主题？</span></h2><ul list=\"ud974a1eb\"><li fid=\"u919fe1f8\" data-lake-id=\"ufa074d65\" id=\"ufa074d65\"><span data-lake-id=\"u2739d7c1\" id=\"u2739d7c1\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">将主题下载后，放到themes文件夹中即可。例如，下面命令安装next主题：</span><span data-lake-id=\"ufae36287\" id=\"ufae36287\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">git clone https://github.com/iissnan/hexo-theme-next themes/next</span><span data-lake-id=\"u0a6d1105\" id=\"u0a6d1105\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">。</span></li></ul>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 25,
    "hits": 25,
    "comments_count": 0,
    "word_count": 591,
    "created_at": "2022-04-08T05:39:46.000Z",
    "updated_at": "2023-08-09T02:42:09.000Z",
    "content_updated_at": "2023-08-09T02:41:47.000Z",
    "published_at": "2023-08-09T02:42:08.000Z",
    "first_published_at": "2022-04-08T09:10:07.262Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 1913907646,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72684867,
    "type": "Doc",
    "slug": "vibciy",
    "title": "语雀+Hexo+serverless云函数自动同步",
    "description": "tags: [语雀,云函数,自动发布,hexo]categories: [学无止境]copyright_author_href: https://www.xiaohuihui.cc一、搭建Hexo博客本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u7b176150\" class=\"ne-p\"><span class=\"ne-text\">tags: [语雀,云函数,自动发布,hexo]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u0a28e27d\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"otyoz\" class=\"ne-hr\"><h1 id=\"Nalyr\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">一、搭建Hexo博客</span></h1><p id=\"uefc6e03d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。</span></p><p id=\"ubd755138\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">使用hexo搭建博客地址：</span></p><div id=\"Zcow6\" class=\"ne-bookmark\"><a href=\"https://xiaohuihui.cc/posts/eb656981.html\" target=\"_blank\">https://xiaohuihui.cc/posts/eb656981.html</a></div><p id=\"udd9214d1\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"vralO\"><span class=\"ne-text\">二、Hexo同步语雀内容</span></h1><p id=\"u50bc18ca\" class=\"ne-p\"><br></p><div data-type=\"color1\" class=\"ne-alert\"><p id=\"u6fa9d82f\" class=\"ne-p\"><span class=\"ne-text\">语雀免费版是无法发布“互联网可见”的文章的，使用语雀发布，需要开通会员 （99/年）</span></p></div><p id=\"u725e9704\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><p id=\"ua77e3081\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">用到了这个项目：</span></p><div class=\"ne-quote\"><p id=\"ub7f9349e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">https://github.com/x-cold/yuque-hexo</span></p></div><div class=\"ne-quote\"><p id=\"u204c5376\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">安装：npm i -g yuque-hexo</span></p></div><p id=\"u8bf5f2da\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后把 package.json 的内容添加上下面这些：</span></p><pre data-language=\"json\" id=\"J8lFC\" class=\"ne-codeblock language-json\"><code>  &quot;yuqueConfig&quot;: {\n    &quot;postPath&quot;: &quot;source/_posts&quot;,\n    &quot;cachePath&quot;: &quot;yuque.json&quot;,\n    &quot;mdNameFormat&quot;: &quot;slug&quot;,\n    &quot;adapter&quot;: &quot;hexo&quot;,\n    &quot;concurrency&quot;: 5,\n    &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;,\n    &quot;login&quot;: &quot;hxfqg9&quot;,\n    &quot;repo&quot;: &quot;web&quot;,\n    &quot;token&quot;: &quot;语雀token&quot;,\n    &quot;onlyPublished&quot;: true,\n    &quot;onlyPublic&quot;: true\n  },\n  &quot;devDependencies&quot;: {\n    &quot;yuque-hexo&quot;: &quot;^1.6.0&quot;\n  },\n  &quot;hexo&quot;: {\n    &quot;version&quot;: &quot;4.2.1&quot;\n  },\n</code></pre><p id=\"ufcd87a00\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">这里需要说明：</span></p><p id=\"u41e3806f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">baseurl 是固定的</span></p><p id=\"u40e66bd3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">login 和 repo 是如下图这样对应的，个人界面和团队界面都可以</span></p><p id=\"ua3ad5a49\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png\" width=\"1080\" id=\"u0d64e7b4\" class=\"ne-image\"></p><p id=\"ua07492e9\" class=\"ne-p\"><br></p><p id=\"u378a68de\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">token 是在右上角头像 -&gt; 账户设置 -&gt; Token 添加的，权限的话只给读取就可以</span></p><p id=\"uc5690ce0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">ps.公开的知识库也要设置 Token。</span></p><p id=\"ufa62067b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">接着，</span></p><p id=\"u6c5b1449\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在 &quot;scripts&quot; 中添加</span></p><pre data-language=\"plain\" id=\"NwusZ\" class=\"ne-codeblock language-plain\"><code>    &quot;sync&quot;: &quot;yuque-hexo sync&quot;,\n    &quot;clean:yuque&quot;: &quot;yuque-hexo clean&quot;,</code></pre><p id=\"u7c436989\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这样整体下来我的 package.json 内容如下（参考）：</span></p><pre data-language=\"json\" id=\"OtMzs\" class=\"ne-codeblock language-json\"><code>{\n  &quot;name&quot;: &quot;hexo-site&quot;,\n  &quot;version&quot;: &quot;0.0.0&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;build&quot;: &quot;hexo generate&quot;,\n    &quot;clean&quot;: &quot;hexo clean&quot;,\n    &quot;deploy&quot;: &quot;hexo deploy&quot;,\n    &quot;server&quot;: &quot;hexo server&quot;,\n    &quot;sync&quot;: &quot;yuque-hexo sync&quot;,\n    &quot;clean:yuque&quot;: &quot;yuque-hexo clean&quot;\n  },\n  &quot;yuqueConfig&quot;: {\n    &quot;postPath&quot;: &quot;source/_posts&quot;,\n    &quot;cachePath&quot;: &quot;yuque.json&quot;,\n    &quot;mdNameFormat&quot;: &quot;slug&quot;,\n    &quot;adapter&quot;: &quot;hexo&quot;,\n    &quot;concurrency&quot;: 5,\n    &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;,\n    &quot;login&quot;: &quot;hxfqg9&quot;,\n    &quot;repo&quot;: &quot;web&quot;,\n    &quot;token&quot;: &quot;语雀token&quot;,\n    &quot;onlyPublished&quot;: true,\n    &quot;onlyPublic&quot;: true\n  },\n  &quot;devDependencies&quot;: {\n    &quot;yuque-hexo&quot;: &quot;^1.6.0&quot;\n  },\n  &quot;hexo&quot;: {\n    &quot;version&quot;: &quot;4.2.1&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;hexo&quot;: &quot;^4.2.1&quot;,\n    &quot;hexo-deployer-git&quot;: &quot;^2.1.0&quot;,\n    &quot;hexo-generator-archive&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-generator-baidu-sitemap&quot;: &quot;^0.1.6&quot;,\n    &quot;hexo-generator-category&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-generator-feed&quot;: &quot;^2.2.0&quot;,\n    &quot;hexo-generator-index&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-generator-json-content&quot;: &quot;^4.2.3&quot;,\n    &quot;hexo-generator-searchdb&quot;: &quot;^1.3.1&quot;,\n    &quot;hexo-generator-sitemap&quot;: &quot;^2.0.0&quot;,\n    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-renderer-marked&quot;: &quot;^2.0.0&quot;,\n    &quot;hexo-renderer-stylus&quot;: &quot;^1.1.0&quot;,\n    &quot;hexo-server&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-wordcount&quot;: &quot;^6.0.1&quot;\n  }\n}\n</code></pre><p id=\"uf5c7f86d\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">这时候，在本地调试的时候使用命令：</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">yuque-hexo sync </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">就会把语雀的文章给下载下来，下载到 \\source\\_posts</span></p><p id=\"u18577d9b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: #F759AB; font-size: 14px\">（使用以上命令前先备份本地的_posts文件夹下的md文章，使用语雀下载的时候会先清空此文件夹）</span></p><p id=\"u538ac320\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">hexo g &amp;&amp; hexo s</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 就可以访问 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">127.0.0.1:4000</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 本地看一下了</span></p><p id=\"ueef52dc2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">手动发布是 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">hexo g &amp;&amp; hexo d</span></p><p id=\"u7e0f6ed6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\"></span></p><h3 id=\"qAkfj\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">针对语雀图片无法正常显示的解决办法</span></h3><p id=\"u3d27d011\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在主题的 layout 文件夹中的 post.ejs 文件中加上一句（不同主题加的位置不同）</span></p><pre data-language=\"plain\" id=\"wGBUw\" class=\"ne-codeblock language-plain\"><code>&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt;</code></pre><p id=\"u1caa6671\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649404362200-7eafd317-d235-4af8-afe9-4f9c54d4dee2.png\" width=\"841\" id=\"u4d9c66af\" class=\"ne-image\"></p><p id=\"ubba63287\" class=\"ne-p\"><br></p><p id=\"udffcc68a\" class=\"ne-p\"><span class=\"ne-text\">小灰灰用的是butterFly主题，加的位置在：</span></p><p id=\"uc993bd76\" class=\"ne-p\"><span class=\"ne-text\">\\themes\\butterfly\\layout\\includes\\head.pug 文件：</span></p><p id=\"u8cce8a4b\" class=\"ne-p\"><span class=\"ne-text\">大概在第40行左右添加：</span></p><p id=\"ueb1d1afb\" class=\"ne-p\"><span class=\"ne-text\">（PS：放在这个位置是因为百度统计的referrer问题。只能放在统计后面）</span></p><pre data-language=\"plain\" id=\"n6Sbf\" class=\"ne-codeblock language-plain\"><code>meta(name=&quot;referrer&quot; content=&quot;no-referrer&quot;)\n#如果上面不生效，提示 referrer被禁用，可以使用以下代码试试\nmeta(name=&quot;referrer&quot; content=&quot;no-referrer&quot;)</code></pre><p id=\"u8a5dfd20\" class=\"ne-p\"><span class=\"ne-text\">如图：</span></p><p id=\"ua3f2a4ce\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649641758436-1971a415-4efc-45ff-87b9-1e47f9617353.png\" width=\"1013.4339987353198\" id=\"u651955ce\" class=\"ne-image\"></p><p id=\"u30a773cb\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"X6P2n\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">三、github actions自动更新</span></strong></h1><p id=\"ub90a52b6\" class=\"ne-p\"><br></p><p id=\"u0927227f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓</span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">（用来存放hexo源码）</span></strong></p><p id=\"u90956d13\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">注意</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">.git</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 文件夹给删掉</span></p><p id=\"u51a1643e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中</span></p><pre data-language=\"git\" id=\"RBavs\" class=\"ne-codeblock language-git\"><code>git init\ngit add .\ngit commit -m &quot;first commit&quot;\ngit remote add origin https://github.com/yichen115/blog.git\ngit push -u origin master\n</code></pre><p id=\"ua34c3477\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">去 github 的 settings 创建一个 token </span><span class=\"ne-text\" style=\"color: #CF1322; font-size: 14px\">（ps:个人中心的设置，非项目的设置）</span></p><p id=\"uf2700179\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png\" width=\"1080\" id=\"uac4e5e7e\" class=\"ne-image\"></p><p id=\"u2e1100f7\" class=\"ne-p\"><br></p><p id=\"u94daed52\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">只勾上这一个即可：</span></p><p id=\"u54a8c9f7\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png\" width=\"746\" id=\"u1e211b98\" class=\"ne-image\"></p><p id=\"ub8af6175\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png\" width=\"1015\" id=\"u4cbbdb00\" class=\"ne-image\"></p><p id=\"u6be5e2e5\" class=\"ne-p\"><br></p><p id=\"u9415a80c\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: #FF4D4F; font-size: 14px\">生成了 token 之后一定要记下来</span></strong><span class=\"ne-text\" style=\"color: #FF4D4F; font-size: 14px\">，再回来就没法看了</span></p><p id=\"u7e421076\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后来到刚才创建的私有仓库的 settings</span></p><p id=\"ua6bcee18\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png\" width=\"1080\" id=\"u71d114fa\" class=\"ne-image\"></p><p id=\"uf117f76a\" class=\"ne-p\"><br></p><p id=\"u5a2ba37f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">添加三个 secret</span></p><p id=\"u2d63d190\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">GH_REF</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 是你博客的仓库地址 github.com/******/******.github.io</span></p><p id=\"ud6ad2ded\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">注意去掉前面 https://</span></p><p id=\"ud75b6a6c\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">GE_TOKEN</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 是刚才生成的 token</span></p><p id=\"u4f74441c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后来到 actions，点击 set up a workflow yourself</span></p><p id=\"ub5c52b88\" class=\"ne-p\"><strong><span class=\"ne-text\">HEXO_DEPLOY_PRI  </span></strong><span class=\"ne-text\">是新增的ssh 密钥</span></p><p id=\"ua4fec53b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\">在命令行中输入：</span></p><div class=\"ne-quote\"><p id=\"ud3340961\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\"></span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(242, 242, 242); font-size: 12px\">ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span></p></div><p id=\"uf8a9e3f2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">备注：</span></p><p id=\"u3f583f38\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">同时生成的公钥，要放到Hexo 生成page的项目的公钥下面</span></p><p id=\"u39b8ff56\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page项目））</span></p><p id=\"u5d38b53e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><p id=\"u127a2d9d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">编辑内容如下：</span></p><pre data-language=\"yaml\" id=\"HTFWI\" class=\"ne-codeblock language-yaml\"><code>name: Hexo Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - master\n  schedule:\n    - cron: '0 21 * * 0' # 每周日 UTC 时间 21:00, 北京时间周一凌晨5点\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout source  # 将仓库内master分支的内容下载到工作目录1\n        uses: actions/checkout@v2 # 脚本来自 https://github.com/actions/checkout\n        with:\n          ref: master\n          submodules: 'true'\n\n      - name: Setup Node\n        uses: actions/setup-node@v1\n        with:\n          node-version: '14.x'\n\n      - name: Checkout Submodules\n        run: |\n          auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;\n          git submodule sync --recursive\n          git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --force --recursive --depth=1\n\n      - name: Setup Hexo\n        env:\n          HEXO_DEPLOY_PRI: ${{ secrets.HEXO_DEPLOY_PRI }}\n        run: |\n          mkdir -p ~/.ssh/\n          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa\n          chmod 700 ~/.ssh\n          chmod 600 ~/.ssh/id_rsa\n          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts\n          git config --global user.email &quot;xianrenqh@163.com&quot;\n          git config --global user.name &quot;xianrenqh&quot;\n          npm install hexo-cli -g\n          npm install yuque-hexo -g\n          yuque-hexo clean\n          yuque-hexo sync\n\n      - name: Setup Yuque #更新yuque 拉取的文章到GitHub仓库\n        run: |\n          git config --global user.email &quot;xianrenqh@163.com&quot;\n          git config --global user.name &quot;xianrenqh&quot;\n          git add .\n          git commit -m &quot;Refresh yuque json&quot; -a\n\n      - name: Push Yuque #推送修改后的yuque json\n        uses: ad-m/github-push-action@master\n        with:\n          github_token: ${{ secrets.GE_TOKEN }}\n\n      - name: Cache Hexo\n        uses: actions/cache@v1\n        id: cache\n        with:\n          path: node_modules\n          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}\n\n      - name: Install dependencies\n        if: steps.cache.outputs.cache-hit != 'true'\n        run: |\n          npm install --save\n\n      - name: Hexo Deploy\n        run: |\n          hexo clean\n          hexo generate\n          hexo deploy\n</code></pre><p id=\"ue32831ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐</span></p><p id=\"u3d86f5ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新</span></p><p id=\"uaf16d287\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h1 id=\"s10jE\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">四、配置ServerLess云函数</span></h1><div id=\"AArGN\" class=\"ne-bookmark\"><a href=\"https://xiaohuihui.cc/posts/3c85ac91.html\" target=\"_blank\">https://xiaohuihui.cc/posts/3c85ac91.html</a></div><h1 id=\"Elum4\"><span class=\"ne-text\">五、发布博文到服务器（vps）上</span></h1><p id=\"ucf82d819\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">小灰灰使用的是 webhooks的功能同步推送到服务器上的</span></p><p id=\"ucf95d013\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h1 id=\"RqhEX\"><span class=\"ne-text\">⑥、PS：</span></h1><p id=\"u04f0372e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">小灰灰的Hexo博客地址：</span></p><div id=\"ofnQ4\" class=\"ne-bookmark\"><a href=\"https://www.xiaohuihui.cc\" target=\"_blank\">https://www.xiaohuihui.cc</a></div><p id=\"ube122584\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><p id=\"u44ce385d\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">PS：</span></p><p id=\"uea6d5971\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">听说使用github action 执行ssh可能会出现封号的情况。</span></p><p id=\"u0aa5817d\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">另外同步到github速度比较慢，</span></p><p id=\"uee5f6fd5\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">所以小灰灰的博客代码直接使用自己的服务器搭建的，然后加个webhook到语雀上，这样语雀更新之后请求webhook执行命令直接在服务器上更新了。</span></p><p id=\"u43d2984b\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">宝塔的webhook代码：</span></p><pre data-language=\"plain\" id=\"BDWgQ\" class=\"ne-codeblock language-plain\"><code>#!/bin/bash\necho &quot;&quot;\n#输出当前时间\ndate --date='0 days ago' &quot;+%Y-%m-%d %H:%M:%S&quot;\necho &quot;Start&quot;\n\ncd &quot;/www/wwwroot/node_js/你的Hexo博客源码文件夹/&quot;\necho &quot;清除缓存&quot;\nnpx hexo clean\n\necho &quot;开始下载语雀文章.....&quot;\nnpx yuque-hexo clean\nnpx yuque-hexo sync\n\necho &quot;创建文章&quot;\nnpx hexo g\n\ngitPath=&quot;/www/wwwroot/node_js/你的Hexo博客源码文件夹/public&quot;\n\nif [ -d &quot;$gitPath&quot; ]; then\n  # 需要先编辑文件\n  #vi ~/.bashrc，在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆，使用cp -r -f就可以了\n   cp -r -f /www/wwwroot/node_js/你的Hexo博客源码文件夹/public/* /www/wwwroot/你要运行的静态文件夹\n\necho &quot;完成&quot;\nexit\nfi</code></pre><div class=\"ne-quote\"><p id=\"u85722fb8\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">服务器需要改动，要求copy命令的时候不要提示询问。改动方法：</span></p><p id=\"u02c03a7d\" class=\"ne-p\"><span class=\"ne-text\">执行：vi ~/.bashrc</span></p><p id=\"u5ee3efd7\" class=\"ne-p\"><span class=\"ne-text\">在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆。</span></p><p id=\"ubb63345e\" class=\"ne-p\"><span class=\"ne-text\">最后使用cp -r -f就可以了</span></p></div></div>",
    "body": "tags: [语雀,云函数,自动发布,hexo]<br />categories: [学无止境]<br />copyright_author_href: https://www.xiaohuihui.cc\n\n---\n\n<a name=\"Nalyr\"></a>\n# 一、搭建Hexo博客\n本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。<br />使用hexo搭建博客地址：<br />[使用Hexo搭建博客 | 小灰灰的世界](https://xiaohuihui.cc/posts/eb656981.html)\n\n<a name=\"vralO\"></a>\n# 二、Hexo同步语雀内容\n\n> 语雀免费版是无法发布“互联网可见”的文章的，使用语雀发布，需要开通会员 （99/年）\n\n\n用到了这个项目：\n> https://github.com/x-cold/yuque-hexo\n\n> 安装：npm i -g yuque-hexo\n\n然后把 package.json 的内容添加上下面这些：\n```json\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"slug\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"hxfqg9\",\n    \"repo\": \"web\",\n    \"token\": \"语雀token\",\n    \"onlyPublished\": true,\n    \"onlyPublic\": true\n  },\n  \"devDependencies\": {\n    \"yuque-hexo\": \"^1.6.0\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.1\"\n  },\n\n```\n这里需要说明：<br />baseurl 是固定的<br />login 和 repo 是如下图这样对应的，个人界面和团队界面都可以<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png#averageHue=%23e9e8e8&clientId=udcfe64c5-982a-4&from=paste&id=u0d64e7b4&originHeight=545&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&size=189765&status=done&style=none&taskId=u57aea17f-fb57-435f-8a44-af6dbe6c1cc&title=)\n\ntoken 是在右上角头像 -> 账户设置 -> Token 添加的，权限的话只给读取就可以<br />ps.公开的知识库也要设置 Token。<br />接着，<br />在 \"scripts\" 中添加\n```\n    \"sync\": \"yuque-hexo sync\",\n    \"clean:yuque\": \"yuque-hexo clean\",\n```\n这样整体下来我的 package.json 内容如下（参考）：\n```json\n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"build\": \"hexo generate\",\n    \"clean\": \"hexo clean\",\n    \"deploy\": \"hexo deploy\",\n    \"server\": \"hexo server\",\n    \"sync\": \"yuque-hexo sync\",\n    \"clean:yuque\": \"yuque-hexo clean\"\n  },\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"slug\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"hxfqg9\",\n    \"repo\": \"web\",\n    \"token\": \"语雀token\",\n    \"onlyPublished\": true,\n    \"onlyPublic\": true\n  },\n  \"devDependencies\": {\n    \"yuque-hexo\": \"^1.6.0\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.1\"\n  },\n  \"dependencies\": {\n    \"hexo\": \"^4.2.1\",\n    \"hexo-deployer-git\": \"^2.1.0\",\n    \"hexo-generator-archive\": \"^1.0.0\",\n    \"hexo-generator-baidu-sitemap\": \"^0.1.6\",\n    \"hexo-generator-category\": \"^1.0.0\",\n    \"hexo-generator-feed\": \"^2.2.0\",\n    \"hexo-generator-index\": \"^1.0.0\",\n    \"hexo-generator-json-content\": \"^4.2.3\",\n    \"hexo-generator-searchdb\": \"^1.3.1\",\n    \"hexo-generator-sitemap\": \"^2.0.0\",\n    \"hexo-generator-tag\": \"^1.0.0\",\n    \"hexo-renderer-ejs\": \"^1.0.0\",\n    \"hexo-renderer-marked\": \"^2.0.0\",\n    \"hexo-renderer-stylus\": \"^1.1.0\",\n    \"hexo-server\": \"^1.0.0\",\n    \"hexo-wordcount\": \"^6.0.1\"\n  }\n}\n\n```\n这时候，在本地调试的时候使用命令：yuque-hexo sync 就会把语雀的文章给下载下来，下载到 \\source\\_posts<br />（使用以上命令前先备份本地的_posts文件夹下的md文章，使用语雀下载的时候会先清空此文件夹）<br />然后 hexo g && hexo s 就可以访问 127.0.0.1:4000 本地看一下了<br />手动发布是 hexo g && hexo d\n\n<a name=\"qAkfj\"></a>\n### 针对语雀图片无法正常显示的解决办法\n在主题的 layout 文件夹中的 post.ejs 文件中加上一句（不同主题加的位置不同）\n```\n<meta name=\"referrer\" content=\"no-referrer\" />\n```\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649404362200-7eafd317-d235-4af8-afe9-4f9c54d4dee2.png#averageHue=%23f1eeec&clientId=u68da2bd8-69aa-4&from=paste&id=u4d9c66af&originHeight=351&originWidth=841&originalType=url&ratio=1&rotation=0&showTitle=false&size=46710&status=done&style=none&taskId=ufd914241-d133-43ab-b845-e08191199df&title=)\n\n小灰灰用的是butterFly主题，加的位置在：<br />\\themes\\butterfly\\layout\\includes\\head.pug 文件：<br />大概在第40行左右添加：<br />（PS：放在这个位置是因为百度统计的referrer问题。只能放在统计后面）\n```\nmeta(name=\"referrer\" content=\"no-referrer\")\n#如果上面不生效，提示 referrer被禁用，可以使用以下代码试试\nmeta(name=\"referrer\" content=\"no-referrer\")\n```\n如图：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649641758436-1971a415-4efc-45ff-87b9-1e47f9617353.png#averageHue=%232d2a2e&clientId=u6e1ca8df-731b-4&from=paste&height=700&id=u651955ce&originHeight=773&originWidth=1119&originalType=binary&ratio=1&rotation=0&showTitle=false&size=134271&status=done&style=none&taskId=u1edc2856-0d56-4f15-9454-c218fcf937a&title=&width=1013.4339987353198)\n\n<a name=\"X6P2n\"></a>\n# **三、github actions自动更新**\n\n在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓**（用来存放hexo源码）**<br />**注意**：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 .git 文件夹给删掉<br />然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中\n```git\ngit init\ngit add .\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/yichen115/blog.git\ngit push -u origin master\n\n```\n去 github 的 settings 创建一个 token （ps:个人中心的设置，非项目的设置）<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png#averageHue=%23fdfdfc&clientId=udcfe64c5-982a-4&from=paste&id=uac4e5e7e&originHeight=390&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&size=89765&status=done&style=none&taskId=uc2174048-c4a7-45e5-8b7e-a72c318831b&title=)\n\n只勾上这一个即可：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png#averageHue=%23fefdfc&clientId=udcfe64c5-982a-4&from=paste&id=u1e211b98&originHeight=627&originWidth=746&originalType=url&ratio=1&rotation=0&showTitle=false&size=53298&status=done&style=none&taskId=ua795b964-947a-41ce-bafa-a59b4ecd46b&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png#averageHue=%23edf2e3&clientId=udcfe64c5-982a-4&from=paste&id=u4cbbdb00&originHeight=445&originWidth=1015&originalType=url&ratio=1&rotation=0&showTitle=false&size=45407&status=done&style=none&taskId=u4adc989a-ec2a-4dcc-9a1d-66a0017e2b1&title=)\n\n**生成了 token 之后一定要记下来**，再回来就没法看了<br />然后来到刚才创建的私有仓库的 settings<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png#averageHue=%23dbcbb9&clientId=udcfe64c5-982a-4&from=paste&id=u71d114fa&originHeight=419&originWidth=1080&originalType=url&ratio=1&rotation=0&showTitle=false&size=91140&status=done&style=none&taskId=u2e8da352-5627-4745-98cb-0fad22bf7af&title=)\n\n添加三个 secret<br />**GH_REF** 是你博客的仓库地址 github.com/******/******.github.io<br />注意去掉前面 https://<br />**GE_TOKEN** 是刚才生成的 token<br />然后来到 actions，点击 set up a workflow yourself<br />**HEXO_DEPLOY_PRI  **是新增的ssh 密钥<br />在命令行中输入：\n> ssh-keygen -t rsa -C \"your_email@example.com\"\n\n备注：<br />同时生成的公钥，要放到Hexo 生成page的项目的公钥下面<br />（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page项目））\n\n编辑内容如下：\n```yaml\nname: Hexo Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - master\n  schedule:\n    - cron: '0 21 * * 0' # 每周日 UTC 时间 21:00, 北京时间周一凌晨5点\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout source  # 将仓库内master分支的内容下载到工作目录1\n        uses: actions/checkout@v2 # 脚本来自 https://github.com/actions/checkout\n        with:\n          ref: master\n          submodules: 'true'\n\n      - name: Setup Node\n        uses: actions/setup-node@v1\n        with:\n          node-version: '14.x'\n\n      - name: Checkout Submodules\n        run: |\n          auth_header=\"$(git config --local --get http.https://github.com/.extraheader)\"\n          git submodule sync --recursive\n          git -c \"http.extraheader=$auth_header\" -c protocol.version=2 submodule update --init --force --recursive --depth=1\n\n      - name: Setup Hexo\n        env:\n          HEXO_DEPLOY_PRI: ${{ secrets.HEXO_DEPLOY_PRI }}\n        run: |\n          mkdir -p ~/.ssh/\n          echo \"$HEXO_DEPLOY_PRI\" > ~/.ssh/id_rsa\n          chmod 700 ~/.ssh\n          chmod 600 ~/.ssh/id_rsa\n          ssh-keyscan github.com >> ~/.ssh/known_hosts\n          git config --global user.email \"xianrenqh@163.com\"\n          git config --global user.name \"xianrenqh\"\n          npm install hexo-cli -g\n          npm install yuque-hexo -g\n          yuque-hexo clean\n          yuque-hexo sync\n\n      - name: Setup Yuque #更新yuque 拉取的文章到GitHub仓库\n        run: |\n          git config --global user.email \"xianrenqh@163.com\"\n          git config --global user.name \"xianrenqh\"\n          git add .\n          git commit -m \"Refresh yuque json\" -a\n\n      - name: Push Yuque #推送修改后的yuque json\n        uses: ad-m/github-push-action@master\n        with:\n          github_token: ${{ secrets.GE_TOKEN }}\n\n      - name: Cache Hexo\n        uses: actions/cache@v1\n        id: cache\n        with:\n          path: node_modules\n          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}\n\n      - name: Install dependencies\n        if: steps.cache.outputs.cache-hit != 'true'\n        run: |\n          npm install --save\n\n      - name: Hexo Deploy\n        run: |\n          hexo clean\n          hexo generate\n          hexo deploy\n\n```\n下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐<br />弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新\n\n<a name=\"s10jE\"></a>\n# 四、配置ServerLess云函数\n[Github Action 使用云函数调度服务 | 小灰灰的世界](https://xiaohuihui.cc/posts/3c85ac91.html)\n<a name=\"Elum4\"></a>\n# 五、发布博文到服务器（vps）上\n小灰灰使用的是 webhooks的功能同步推送到服务器上的\n\n<a name=\"RqhEX\"></a>\n# ⑥、PS：\n小灰灰的Hexo博客地址：<br />[小灰灰的世界 - 小灰灰的世界](https://www.xiaohuihui.cc)\n\nPS：<br />听说使用github action 执行ssh可能会出现封号的情况。<br />另外同步到github速度比较慢，<br />所以小灰灰的博客代码直接使用自己的服务器搭建的，然后加个webhook到语雀上，这样语雀更新之后请求webhook执行命令直接在服务器上更新了。<br />宝塔的webhook代码：\n```\n#!/bin/bash\necho \"\"\n#输出当前时间\ndate --date='0 days ago' \"+%Y-%m-%d %H:%M:%S\"\necho \"Start\"\n\ncd \"/www/wwwroot/node_js/你的Hexo博客源码文件夹/\"\necho \"清除缓存\"\nnpx hexo clean\n\necho \"开始下载语雀文章.....\"\nnpx yuque-hexo clean\nnpx yuque-hexo sync\n\necho \"创建文章\"\nnpx hexo g\n\ngitPath=\"/www/wwwroot/node_js/你的Hexo博客源码文件夹/public\"\n\nif [ -d \"$gitPath\" ]; then\n  # 需要先编辑文件\n  #vi ~/.bashrc，在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆，使用cp -r -f就可以了\n   cp -r -f /www/wwwroot/node_js/你的Hexo博客源码文件夹/public/* /www/wwwroot/你要运行的静态文件夹\n\necho \"完成\"\nexit\nfi\n```\n> 服务器需要改动，要求copy命令的时候不要提示询问。改动方法：\n> 执行：vi ~/.bashrc\n> 在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆。\n> 最后使用cp -r -f就可以了\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u7b176150\" class=\"ne-p\"><span class=\"ne-text\">tags: [语雀,云函数,自动发布,hexo]</span></p><p id=\"u2fbf79cc\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u0a28e27d\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"otyoz\" class=\"ne-hr\"><h1 id=\"Nalyr\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">一、搭建Hexo博客</span></h1><p id=\"uefc6e03d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。</span></p><p id=\"ubd755138\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">使用hexo搭建博客地址：</span></p><div id=\"Zcow6\" class=\"ne-bookmark\"><a href=\"https://xiaohuihui.cc/posts/eb656981.html\" target=\"_blank\">https://xiaohuihui.cc/posts/eb656981.html</a></div><p id=\"udd9214d1\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"vralO\"><span class=\"ne-text\">二、Hexo同步语雀内容</span></h1><p id=\"u50bc18ca\" class=\"ne-p\"><br></p><div data-type=\"color1\" class=\"ne-alert\"><p id=\"u6fa9d82f\" class=\"ne-p\"><span class=\"ne-text\">语雀免费版是无法发布“互联网可见”的文章的，使用语雀发布，需要开通会员 （99/年）</span></p></div><p id=\"u725e9704\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><p id=\"ua77e3081\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">用到了这个项目：</span></p><div class=\"ne-quote\"><p id=\"ub7f9349e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">https://github.com/x-cold/yuque-hexo</span></p></div><div class=\"ne-quote\"><p id=\"u204c5376\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">安装：npm i -g yuque-hexo</span></p></div><p id=\"u8bf5f2da\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后把 package.json 的内容添加上下面这些：</span></p><pre data-language=\"json\" id=\"J8lFC\" class=\"ne-codeblock language-json\"><code>  &quot;yuqueConfig&quot;: {\n    &quot;postPath&quot;: &quot;source/_posts&quot;,\n    &quot;cachePath&quot;: &quot;yuque.json&quot;,\n    &quot;mdNameFormat&quot;: &quot;slug&quot;,\n    &quot;adapter&quot;: &quot;hexo&quot;,\n    &quot;concurrency&quot;: 5,\n    &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;,\n    &quot;login&quot;: &quot;hxfqg9&quot;,\n    &quot;repo&quot;: &quot;web&quot;,\n    &quot;token&quot;: &quot;语雀token&quot;,\n    &quot;onlyPublished&quot;: true,\n    &quot;onlyPublic&quot;: true\n  },\n  &quot;devDependencies&quot;: {\n    &quot;yuque-hexo&quot;: &quot;^1.6.0&quot;\n  },\n  &quot;hexo&quot;: {\n    &quot;version&quot;: &quot;4.2.1&quot;\n  },\n</code></pre><p id=\"ufcd87a00\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">这里需要说明：</span></p><p id=\"u41e3806f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">baseurl 是固定的</span></p><p id=\"u40e66bd3\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">login 和 repo 是如下图这样对应的，个人界面和团队界面都可以</span></p><p id=\"ua3ad5a49\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png\" width=\"1080\" id=\"u0d64e7b4\" class=\"ne-image\"></p><p id=\"ua07492e9\" class=\"ne-p\"><br></p><p id=\"u378a68de\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">token 是在右上角头像 -&gt; 账户设置 -&gt; Token 添加的，权限的话只给读取就可以</span></p><p id=\"uc5690ce0\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">ps.公开的知识库也要设置 Token。</span></p><p id=\"ufa62067b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">接着，</span></p><p id=\"u6c5b1449\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在 &quot;scripts&quot; 中添加</span></p><pre data-language=\"plain\" id=\"NwusZ\" class=\"ne-codeblock language-plain\"><code>    &quot;sync&quot;: &quot;yuque-hexo sync&quot;,\n    &quot;clean:yuque&quot;: &quot;yuque-hexo clean&quot;,</code></pre><p id=\"u7c436989\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">这样整体下来我的 package.json 内容如下（参考）：</span></p><pre data-language=\"json\" id=\"OtMzs\" class=\"ne-codeblock language-json\"><code>{\n  &quot;name&quot;: &quot;hexo-site&quot;,\n  &quot;version&quot;: &quot;0.0.0&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;build&quot;: &quot;hexo generate&quot;,\n    &quot;clean&quot;: &quot;hexo clean&quot;,\n    &quot;deploy&quot;: &quot;hexo deploy&quot;,\n    &quot;server&quot;: &quot;hexo server&quot;,\n    &quot;sync&quot;: &quot;yuque-hexo sync&quot;,\n    &quot;clean:yuque&quot;: &quot;yuque-hexo clean&quot;\n  },\n  &quot;yuqueConfig&quot;: {\n    &quot;postPath&quot;: &quot;source/_posts&quot;,\n    &quot;cachePath&quot;: &quot;yuque.json&quot;,\n    &quot;mdNameFormat&quot;: &quot;slug&quot;,\n    &quot;adapter&quot;: &quot;hexo&quot;,\n    &quot;concurrency&quot;: 5,\n    &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;,\n    &quot;login&quot;: &quot;hxfqg9&quot;,\n    &quot;repo&quot;: &quot;web&quot;,\n    &quot;token&quot;: &quot;语雀token&quot;,\n    &quot;onlyPublished&quot;: true,\n    &quot;onlyPublic&quot;: true\n  },\n  &quot;devDependencies&quot;: {\n    &quot;yuque-hexo&quot;: &quot;^1.6.0&quot;\n  },\n  &quot;hexo&quot;: {\n    &quot;version&quot;: &quot;4.2.1&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;hexo&quot;: &quot;^4.2.1&quot;,\n    &quot;hexo-deployer-git&quot;: &quot;^2.1.0&quot;,\n    &quot;hexo-generator-archive&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-generator-baidu-sitemap&quot;: &quot;^0.1.6&quot;,\n    &quot;hexo-generator-category&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-generator-feed&quot;: &quot;^2.2.0&quot;,\n    &quot;hexo-generator-index&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-generator-json-content&quot;: &quot;^4.2.3&quot;,\n    &quot;hexo-generator-searchdb&quot;: &quot;^1.3.1&quot;,\n    &quot;hexo-generator-sitemap&quot;: &quot;^2.0.0&quot;,\n    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-renderer-marked&quot;: &quot;^2.0.0&quot;,\n    &quot;hexo-renderer-stylus&quot;: &quot;^1.1.0&quot;,\n    &quot;hexo-server&quot;: &quot;^1.0.0&quot;,\n    &quot;hexo-wordcount&quot;: &quot;^6.0.1&quot;\n  }\n}\n</code></pre><p id=\"uf5c7f86d\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">这时候，在本地调试的时候使用命令：</span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">yuque-hexo sync </span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">就会把语雀的文章给下载下来，下载到 \\source\\_posts</span></p><p id=\"u18577d9b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: #F759AB; font-size: 14px\">（使用以上命令前先备份本地的_posts文件夹下的md文章，使用语雀下载的时候会先清空此文件夹）</span></p><p id=\"u538ac320\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">hexo g &amp;&amp; hexo s</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 就可以访问 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">127.0.0.1:4000</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 本地看一下了</span></p><p id=\"ueef52dc2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">手动发布是 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">hexo g &amp;&amp; hexo d</span></p><p id=\"u7e0f6ed6\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\"></span></p><h3 id=\"qAkfj\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">针对语雀图片无法正常显示的解决办法</span></h3><p id=\"u3d27d011\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在主题的 layout 文件夹中的 post.ejs 文件中加上一句（不同主题加的位置不同）</span></p><pre data-language=\"plain\" id=\"wGBUw\" class=\"ne-codeblock language-plain\"><code>&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt;</code></pre><p id=\"u1caa6671\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649404362200-7eafd317-d235-4af8-afe9-4f9c54d4dee2.png\" width=\"841\" id=\"u4d9c66af\" class=\"ne-image\"></p><p id=\"ubba63287\" class=\"ne-p\"><br></p><p id=\"udffcc68a\" class=\"ne-p\"><span class=\"ne-text\">小灰灰用的是butterFly主题，加的位置在：</span></p><p id=\"uc993bd76\" class=\"ne-p\"><span class=\"ne-text\">\\themes\\butterfly\\layout\\includes\\head.pug 文件：</span></p><p id=\"u8cce8a4b\" class=\"ne-p\"><span class=\"ne-text\">大概在第40行左右添加：</span></p><p id=\"ueb1d1afb\" class=\"ne-p\"><span class=\"ne-text\">（PS：放在这个位置是因为百度统计的referrer问题。只能放在统计后面）</span></p><pre data-language=\"plain\" id=\"n6Sbf\" class=\"ne-codeblock language-plain\"><code>meta(name=&quot;referrer&quot; content=&quot;no-referrer&quot;)\n#如果上面不生效，提示 referrer被禁用，可以使用以下代码试试\nmeta(name=&quot;referrer&quot; content=&quot;no-referrer&quot;)</code></pre><p id=\"u8a5dfd20\" class=\"ne-p\"><span class=\"ne-text\">如图：</span></p><p id=\"ua3f2a4ce\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649641758436-1971a415-4efc-45ff-87b9-1e47f9617353.png\" width=\"1013.4339987353198\" id=\"u651955ce\" class=\"ne-image\"></p><p id=\"u30a773cb\" class=\"ne-p\"><span class=\"ne-text\"></span></p><h1 id=\"X6P2n\"><strong><span class=\"ne-text\" style=\"color: rgb(0, 0, 0)\">三、github actions自动更新</span></strong></h1><p id=\"ub90a52b6\" class=\"ne-p\"><br></p><p id=\"u0927227f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓</span><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">（用来存放hexo源码）</span></strong></p><p id=\"u90956d13\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">注意</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 </span><span class=\"ne-text\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249); font-size: 14px\">.git</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 文件夹给删掉</span></p><p id=\"u51a1643e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中</span></p><pre data-language=\"git\" id=\"RBavs\" class=\"ne-codeblock language-git\"><code>git init\ngit add .\ngit commit -m &quot;first commit&quot;\ngit remote add origin https://github.com/yichen115/blog.git\ngit push -u origin master\n</code></pre><p id=\"ua34c3477\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">去 github 的 settings 创建一个 token </span><span class=\"ne-text\" style=\"color: #CF1322; font-size: 14px\">（ps:个人中心的设置，非项目的设置）</span></p><p id=\"uf2700179\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png\" width=\"1080\" id=\"uac4e5e7e\" class=\"ne-image\"></p><p id=\"u2e1100f7\" class=\"ne-p\"><br></p><p id=\"u94daed52\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">只勾上这一个即可：</span></p><p id=\"u54a8c9f7\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png\" width=\"746\" id=\"u1e211b98\" class=\"ne-image\"></p><p id=\"ub8af6175\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png\" width=\"1015\" id=\"u4cbbdb00\" class=\"ne-image\"></p><p id=\"u6be5e2e5\" class=\"ne-p\"><br></p><p id=\"u9415a80c\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: #FF4D4F; font-size: 14px\">生成了 token 之后一定要记下来</span></strong><span class=\"ne-text\" style=\"color: #FF4D4F; font-size: 14px\">，再回来就没法看了</span></p><p id=\"u7e421076\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后来到刚才创建的私有仓库的 settings</span></p><p id=\"ua6bcee18\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png\" width=\"1080\" id=\"u71d114fa\" class=\"ne-image\"></p><p id=\"uf117f76a\" class=\"ne-p\"><br></p><p id=\"u5a2ba37f\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">添加三个 secret</span></p><p id=\"u2d63d190\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">GH_REF</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 是你博客的仓库地址 github.com/******/******.github.io</span></p><p id=\"ud6ad2ded\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">注意去掉前面 https://</span></p><p id=\"ud75b6a6c\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">GE_TOKEN</span></strong><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"> 是刚才生成的 token</span></p><p id=\"u4f74441c\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">然后来到 actions，点击 set up a workflow yourself</span></p><p id=\"ub5c52b88\" class=\"ne-p\"><strong><span class=\"ne-text\">HEXO_DEPLOY_PRI  </span></strong><span class=\"ne-text\">是新增的ssh 密钥</span></p><p id=\"ua4fec53b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\">在命令行中输入：</span></p><div class=\"ne-quote\"><p id=\"ud3340961\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(64, 64, 64); font-size: 16px\"></span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(242, 242, 242); font-size: 12px\">ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span></p></div><p id=\"uf8a9e3f2\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">备注：</span></p><p id=\"u3f583f38\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">同时生成的公钥，要放到Hexo 生成page的项目的公钥下面</span></p><p id=\"u39b8ff56\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page项目））</span></p><p id=\"u5d38b53e\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><p id=\"u127a2d9d\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">编辑内容如下：</span></p><pre data-language=\"yaml\" id=\"HTFWI\" class=\"ne-codeblock language-yaml\"><code>name: Hexo Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - master\n  schedule:\n    - cron: '0 21 * * 0' # 每周日 UTC 时间 21:00, 北京时间周一凌晨5点\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout source  # 将仓库内master分支的内容下载到工作目录1\n        uses: actions/checkout@v2 # 脚本来自 https://github.com/actions/checkout\n        with:\n          ref: master\n          submodules: 'true'\n\n      - name: Setup Node\n        uses: actions/setup-node@v1\n        with:\n          node-version: '14.x'\n\n      - name: Checkout Submodules\n        run: |\n          auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;\n          git submodule sync --recursive\n          git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --force --recursive --depth=1\n\n      - name: Setup Hexo\n        env:\n          HEXO_DEPLOY_PRI: ${{ secrets.HEXO_DEPLOY_PRI }}\n        run: |\n          mkdir -p ~/.ssh/\n          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa\n          chmod 700 ~/.ssh\n          chmod 600 ~/.ssh/id_rsa\n          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts\n          git config --global user.email &quot;xianrenqh@163.com&quot;\n          git config --global user.name &quot;xianrenqh&quot;\n          npm install hexo-cli -g\n          npm install yuque-hexo -g\n          yuque-hexo clean\n          yuque-hexo sync\n\n      - name: Setup Yuque #更新yuque 拉取的文章到GitHub仓库\n        run: |\n          git config --global user.email &quot;xianrenqh@163.com&quot;\n          git config --global user.name &quot;xianrenqh&quot;\n          git add .\n          git commit -m &quot;Refresh yuque json&quot; -a\n\n      - name: Push Yuque #推送修改后的yuque json\n        uses: ad-m/github-push-action@master\n        with:\n          github_token: ${{ secrets.GE_TOKEN }}\n\n      - name: Cache Hexo\n        uses: actions/cache@v1\n        id: cache\n        with:\n          path: node_modules\n          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}\n\n      - name: Install dependencies\n        if: steps.cache.outputs.cache-hit != 'true'\n        run: |\n          npm install --save\n\n      - name: Hexo Deploy\n        run: |\n          hexo clean\n          hexo generate\n          hexo deploy\n</code></pre><p id=\"ue32831ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐</span></p><p id=\"u3d86f5ef\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新</span></p><p id=\"uaf16d287\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\"></span></p><h1 id=\"s10jE\"><span class=\"ne-text\" style=\"color: rgb(51, 51, 51)\">四、配置ServerLess云函数</span></h1><div id=\"AArGN\" class=\"ne-bookmark\"><a href=\"https://xiaohuihui.cc/posts/3c85ac91.html\" target=\"_blank\">https://xiaohuihui.cc/posts/3c85ac91.html</a></div><h1 id=\"Elum4\"><span class=\"ne-text\">五、发布博文到服务器（vps）上</span></h1><p id=\"ucf82d819\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">小灰灰使用的是 webhooks的功能同步推送到服务器上的</span></p><p id=\"ucf95d013\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><h1 id=\"RqhEX\"><span class=\"ne-text\">⑥、PS：</span></h1><p id=\"u04f0372e\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">小灰灰的Hexo博客地址：</span></p><div id=\"ofnQ4\" class=\"ne-bookmark\"><a href=\"https://www.xiaohuihui.cc\" target=\"_blank\">https://www.xiaohuihui.cc</a></div><p id=\"ube122584\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\"></span></p><p id=\"u44ce385d\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">PS：</span></p><p id=\"uea6d5971\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">听说使用github action 执行ssh可能会出现封号的情况。</span></p><p id=\"u0aa5817d\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">另外同步到github速度比较慢，</span></p><p id=\"uee5f6fd5\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">所以小灰灰的博客代码直接使用自己的服务器搭建的，然后加个webhook到语雀上，这样语雀更新之后请求webhook执行命令直接在服务器上更新了。</span></p><p id=\"u43d2984b\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">宝塔的webhook代码：</span></p><pre data-language=\"plain\" id=\"BDWgQ\" class=\"ne-codeblock language-plain\"><code>#!/bin/bash\necho &quot;&quot;\n#输出当前时间\ndate --date='0 days ago' &quot;+%Y-%m-%d %H:%M:%S&quot;\necho &quot;Start&quot;\n\ncd &quot;/www/wwwroot/node_js/你的Hexo博客源码文件夹/&quot;\necho &quot;清除缓存&quot;\nnpx hexo clean\n\necho &quot;开始下载语雀文章.....&quot;\nnpx yuque-hexo clean\nnpx yuque-hexo sync\n\necho &quot;创建文章&quot;\nnpx hexo g\n\ngitPath=&quot;/www/wwwroot/node_js/你的Hexo博客源码文件夹/public&quot;\n\nif [ -d &quot;$gitPath&quot; ]; then\n  # 需要先编辑文件\n  #vi ~/.bashrc，在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆，使用cp -r -f就可以了\n   cp -r -f /www/wwwroot/node_js/你的Hexo博客源码文件夹/public/* /www/wwwroot/你要运行的静态文件夹\n\necho &quot;完成&quot;\nexit\nfi</code></pre><div class=\"ne-quote\"><p id=\"u85722fb8\" class=\"ne-p\"><span class=\"ne-text\" style=\"font-size: 14px\">服务器需要改动，要求copy命令的时候不要提示询问。改动方法：</span></p><p id=\"u02c03a7d\" class=\"ne-p\"><span class=\"ne-text\">执行：vi ~/.bashrc</span></p><p id=\"u5ee3efd7\" class=\"ne-p\"><span class=\"ne-text\">在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆。</span></p><p id=\"ubb63345e\" class=\"ne-p\"><span class=\"ne-text\">最后使用cp -r -f就可以了</span></p></div></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"viewport\" content=\"fixed\" /><meta name=\"typography\" content=\"classic\" /><p data-lake-id=\"u7b176150\" id=\"u7b176150\"><span data-lake-id=\"u0a901806\" id=\"u0a901806\">tags: [语雀,云函数,自动发布,hexo]</span></p><p data-lake-id=\"u2fbf79cc\" id=\"u2fbf79cc\"><span data-lake-id=\"u1daa6f84\" id=\"u1daa6f84\">categories: [学无止境]</span></p><p data-lake-id=\"u0a28e27d\" id=\"u0a28e27d\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.</span><span data-lake-id=\"u00775063\" id=\"u00775063\" style=\"color: rgb(38, 38, 38)\">cc</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22otyoz%22%7D\"></card><h1 data-lake-id=\"Nalyr\" id=\"Nalyr\"><span data-lake-id=\"ua0cac265\" id=\"ua0cac265\" style=\"color: rgb(51, 51, 51)\">一、搭建Hexo博客</span></h1><p data-lake-id=\"uefc6e03d\" id=\"uefc6e03d\"><span data-lake-id=\"u3f18f29a\" id=\"u3f18f29a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。</span></p><p data-lake-id=\"ubd755138\" id=\"ubd755138\"><span data-lake-id=\"ua674cfc9\" id=\"ua674cfc9\" class=\"lake-fontsize-11\">使用hexo搭建博客地址：</span></p><card type=\"block\" name=\"bookmarklink\" value=\"data:%7B%22mode%22%3A%22card%22%2C%22src%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fposts%2Feb656981.html%22%2C%22text%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fposts%2Feb656981.html%22%2C%22detail%22%3A%7B%22icon%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fimg%2Ffavicon.png%22%2C%22image%22%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhAQABAIAAAAAAAP%2F%2F%2FyH5BAEAAAAALAAAAAABAAEAAAIBRAA7%22%2C%22title%22%3A%22%E4%BD%BF%E7%94%A8Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%20%7C%20%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22belong%22%3A%22%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22belong_url%22%3Anull%2C%22desc%22%3A%22%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85%20node.js%20node.js%20%E5%AE%98%E6%96%B9%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80%20%E4%BB%8E%E4%B8%8A%E9%9D%A2%E7%9A%84%E9%93%BE%E6%8E%A5%E4%B8%8B%E8%BD%BD%20node.js%EF%BC%8C%E5%B9%B6%E5%AE%89%E8%A3%85%E3%80%82%20%E6%B3%A8%E6%84%8F%EF%BC%9A%E5%AE%98%E6%96%B9%E9%93%BE%E6%8E%A5%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81fanqiang%20%E6%B3%A8%E6%84%8F%EF%BC%9A%E6%88%91%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%98%AFWindows%207%20(64bit)%20%E8%AE%BE%E7%BD%AE%20npm%20%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F%E7%AB%99%20npm%20%E9%BB%98%E8%AE%A4%E7%9A%84%E6%BA%90%E7%9A%84%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6%E5%8F%AF%E8%83%BD%E5%BE%88%E6%85%A2%EF%BC%8C%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F%E6%9B%BF%E6%8D%A2%E3%80%82%20%E6%89%A7%E8%A1%8C%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%91%BD%22%2C%22url%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fposts%2Feb656981.html%22%2C%22extra%22%3A%7B%7D%2C%22_serializer%22%3A%22web.editor_link_detail%22%7D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Zcow6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"udd9214d1\" id=\"udd9214d1\"><span data-lake-id=\"u6f01feec\" id=\"u6f01feec\">​</span><br></p><h1 data-lake-id=\"vralO\" id=\"vralO\"><span data-lake-id=\"u236183fd\" id=\"u236183fd\">二、Hexo同步语雀内容</span></h1><p data-lake-id=\"u50bc18ca\" id=\"u50bc18ca\"><br></p><blockquote data-lake-id=\"u18f957cf\" id=\"u18f957cf\" class=\"lake-alert lake-alert-color1\"><p data-lake-id=\"u6fa9d82f\" id=\"u6fa9d82f\"><span data-lake-id=\"u414eb423\" id=\"u414eb423\">语雀免费版是无法发布“互联网可见”的文章的，使用语雀发布，需要开通会员 （99/年）</span></p></blockquote><p data-lake-id=\"u725e9704\" id=\"u725e9704\"><span data-lake-id=\"u9ce891c2\" id=\"u9ce891c2\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><p data-lake-id=\"ua77e3081\" id=\"ua77e3081\"><span data-lake-id=\"ub2af86b1\" id=\"ub2af86b1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">用到了这个项目：</span></p><blockquote data-lake-id=\"uc70c44bc\" id=\"uc70c44bc\"><p data-lake-id=\"ub7f9349e\" id=\"ub7f9349e\"><span data-lake-id=\"udfca2496\" id=\"udfca2496\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">https://github.com/x-cold/yuque-hexo</span></p></blockquote><blockquote data-lake-id=\"ua4aa560e\" id=\"ua4aa560e\"><p data-lake-id=\"u204c5376\" id=\"u204c5376\"><span data-lake-id=\"u9e8fdda1\" id=\"u9e8fdda1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">安装：npm i -g yuque-hexo</span></p></blockquote><p data-lake-id=\"u8bf5f2da\" id=\"u8bf5f2da\"><span data-lake-id=\"u06138d2d\" id=\"u06138d2d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">然后把 package.json 的内容添加上下面这些：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22json%22%2C%22code%22%3A%22%20%20%5C%22yuqueConfig%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22postPath%5C%22%3A%20%5C%22source%2F_posts%5C%22%2C%5Cn%20%20%20%20%5C%22cachePath%5C%22%3A%20%5C%22yuque.json%5C%22%2C%5Cn%20%20%20%20%5C%22mdNameFormat%5C%22%3A%20%5C%22slug%5C%22%2C%5Cn%20%20%20%20%5C%22adapter%5C%22%3A%20%5C%22hexo%5C%22%2C%5Cn%20%20%20%20%5C%22concurrency%5C%22%3A%205%2C%5Cn%20%20%20%20%5C%22baseUrl%5C%22%3A%20%5C%22https%3A%2F%2Fwww.yuque.com%2Fapi%2Fv2%5C%22%2C%5Cn%20%20%20%20%5C%22login%5C%22%3A%20%5C%22hxfqg9%5C%22%2C%5Cn%20%20%20%20%5C%22repo%5C%22%3A%20%5C%22web%5C%22%2C%5Cn%20%20%20%20%5C%22token%5C%22%3A%20%5C%22%E8%AF%AD%E9%9B%80token%5C%22%2C%5Cn%20%20%20%20%5C%22onlyPublished%5C%22%3A%20true%2C%5Cn%20%20%20%20%5C%22onlyPublic%5C%22%3A%20true%5Cn%20%20%7D%2C%5Cn%20%20%5C%22devDependencies%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22yuque-hexo%5C%22%3A%20%5C%22%5E1.6.0%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22hexo%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22version%5C%22%3A%20%5C%224.2.1%5C%22%5Cn%20%20%7D%2C%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22J8lFC%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ufcd87a00\" id=\"ufcd87a00\"><span data-lake-id=\"u262beee1\" id=\"u262beee1\" class=\"lake-fontsize-11\">这里需要说明：</span></p><p data-lake-id=\"u41e3806f\" id=\"u41e3806f\"><span data-lake-id=\"u7ede2186\" id=\"u7ede2186\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">baseurl 是固定的</span></p><p data-lake-id=\"u40e66bd3\" id=\"u40e66bd3\"><span data-lake-id=\"u6ece77b6\" id=\"u6ece77b6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">login 和 repo 是如下图这样对应的，个人界面和团队界面都可以</span></p><p data-lake-id=\"ua3ad5a49\" id=\"ua3ad5a49\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png%22%2C%22taskId%22%3A%22u57aea17f-fb57-435f-8a44-af6dbe6c1cc%22%2C%22clientId%22%3A%22udcfe64c5-982a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A189765%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1080%2C%22originHeight%22%3A545%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22YUQUE.COM%2FHXFQG9%2FWEB%20WIKI%20%E4%BF%A1%E5%AE%89%20%E5%BA%94%E7%94%A8%20%E6%94%B6%E8%97%8F%E5%A4%B9%20%E6%97%A5%E7%AC%AC%20%E5%A0%86%E6%95%99%E7%A8%8B%20%E7%BF%BB%E8%AF%91%20D.%5C%5CGITHUB%5C%5CBLOG%5C%5CPACKAGE.JSON%20-%20NOTEPAD%2B%2B%20%5BADMINISTRATOR%5D%20%E6%96%87%E4%BB%B6(F)%20%E7%BC%96%E6%A0%87(E)%20%20%E6%90%9C%E7%B4%A2(S)%20%20%E8%A7%86%20%E7%AA%97%E5%8F%A3(W)%20)%20%E8%A7%86%E5%9B%BE(N)%20%20%E8%AF%AD%E8%A8%80(L)%20%E8%AF%AD%E8%A8%80(L)%20%E5%B7%A5%E5%85%B7%20%E5%AE%8F(M)%20%E8%BF%90%E8%A1%8C(R)%20%20%E6%8F%92%E4%BB%B6(P)%20%E8%AF%AD%E9%9B%80%20)%E5%B7%A5%E5%85%B7(0)%20%E5%8F%8D%E9%A6%88%20%E5%8F%91%E7%8E%B0%20%E5%B8%AE%E5%8A%A9%20%E7%A9%BA%E9%97%B4%20%E5%B7%A5%E4%BD%9C%E5%8F%B0%20%E5%87%BA%E5%8F%A3%20UN%20LF%20ACKAGE.JSON%20%20%E5%B7%B2%E5%85%B3%E6%B3%A8%20YICHEN%E7%9A%84%E4%BF%A1%E5%AE%89%E7%9F%A5%E8%AF%86%E5%BA%93%2FWEB%E6%96%B9%E5%90%91%20AME%5C%22%3AHEXO-SITE%5C%22.%20HEXO.GENERATE'.%20THEXO.CLEAN%20'DEPLOY%20%3A.%5C%22HEXO-DEPLOY'.%20TSERVEN'%3AHEXOSERVERVEN.%20%5C%22SYNC*%3A.%5C%22YUQUE-HEXO.SYNC*%2C%20%5C%22CLEAN%3AYUQUE*%3A.%5C%22YUQUE-HEXO.CLEAN%5C%22%20WEB%E6%96%B9%E5%90%91%20%E7%99%BD%20YUQUECONRIG*%3A%5B%20%5C%22POSTPATH%5C%22%3A%5C%22SOURCE%2F_POSTS'%2C%20CACHEPATH%5C%22%3A%5C%22YUQUE.JSON%5C%22.%20WEB!!%20'NDNAMEFORMAT%5C%22%3A%5C%22SLUG%5C%22.%20%5C%22ADAPTER%5C%22%3A%5C%22HEXO%5C%22.%20TENCURRENCY'%3A5.%20HTTPS%3A%2F%2FWWW.YUQUE.COM%2FAPI%2FV2%5C%22%2C%20THXFQG9*%2C%20%5C%22REPO*%3A%5C%22WEB*L%20%5C%22TOKEN'%3A%5C%22TY%20'ONLYPUBLISHED%5C%22%3ATRUE.%20%E8%AF%AD%E9%9B%80%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5HEXO%E5%8D%9A%E5%AE%A2%2024%20ONLYPUBLIC'%3ATRUE%2025%2026%20%E9%9D%B6%E6%9C%BA%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB%20DEVDEPENDENCIES%5C%22%3A%2027%20'YUQUE-HEXO*%3A-**1.6.0%2028%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%2029%20%5C%22HEXO*%3A%2023338333333%20%5C%22VERSION%5C%22%3A%5C%224.2.1%5C%22%20NC%E4%BD%BF%E7%94%A8%20DEPENDENCIES*%3A%20THEXO*%3A.4.2.1*.1*.%20SQL%E6%B3%A8%E5%85%A5%20%5C%22HEXO-DEPLOYER-AIT%5C%22%3A%5C%22%5C%222.1.0*.%20HEXO-GENERATOR-ARCHIVE%20%3A%20%20%20%20%20%20%20%20%20%20HEXOR-ARCHIVE%20%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20GENEXO-GENER%20%20%5C%22HEXO-QENERATON-BAIDU-SITEMAP%5C%22%3A%5C%22.%20%5C%22.6*%2C%20XSS%2FCSRF%2FSSRF%20JSON%20FILE%20LN%3A21%20COL%3A19%20SEL%3A010%20LENGTH%3A1.340%20LINES%3A51%20%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A103.55587%2C%22y%22%3A6.729502%2C%22width%22%3A120.58059%2C%22height%22%3A11.260895999999999%2C%22text%22%3A%22YUQUE.COM%2FHXFQG9%2FWEB%22%7D%2C%7B%22x%22%3A267.0082%2C%22y%22%3A29.643099%2C%22width%22%3A25.122320000000002%2C%22height%22%3A10.798597000000001%2C%22text%22%3A%22WIKI%22%7D%2C%7B%22x%22%3A218.89941%2C%22y%22%3A29.72732%2C%22width%22%3A27.038990000000013%2C%22height%22%3A11.951532%2C%22text%22%3A%22%E4%BF%A1%E5%AE%89%22%7D%2C%7B%22x%22%3A25.454073%2C%22y%22%3A30.154455%2C%22width%22%3A21.18833%2C%22height%22%3A10.966675000000002%2C%22text%22%3A%22%E5%BA%94%E7%94%A8%22%7D%2C%7B%22x%22%3A119.94971%2C%22y%22%3A30.184017%2C%22width%22%3A30.95452999999999%2C%22height%22%3A10.195018999999998%2C%22text%22%3A%22%E6%94%B6%E8%97%8F%E5%A4%B9%22%7D%2C%7B%22x%22%3A176.60374%2C%22y%22%3A30.374723%2C%22width%22%3A19.14772000000002%2C%22height%22%3A10.399930999999999%2C%22text%22%3A%22%E6%97%A5%E7%AC%AC%22%7D%2C%7B%22x%22%3A318.36746%2C%22y%22%3A30.447233%2C%22width%22%3A28.430819999999983%2C%22height%22%3A9.861696999999996%2C%22text%22%3A%22%E5%A0%86%E6%95%99%E7%A8%8B%22%7D%2C%7B%22x%22%3A73.48727%2C%22y%22%3A30.634365%2C%22width%22%3A20.08744%2C%22height%22%3A10.227367000000005%2C%22text%22%3A%22%E7%BF%BB%E8%AF%91%22%7D%2C%7B%22x%22%3A649.2192%2C%22y%22%3A42.865643%2C%22width%22%3A248.85130000000004%2C%22height%22%3A12.174157000000001%2C%22text%22%3A%22D.%5C%5CGITHUB%5C%5CBLOG%5C%5CPACKAGE.JSON%20-%20NOTEPAD%2B%2B%20%5BADMINISTRATOR%5D%22%7D%2C%7B%22x%22%3A629.5607%2C%22y%22%3A61.194336%2C%22width%22%3A117.44410000000005%2C%22height%22%3A13.033123999999994%2C%22text%22%3A%22%E6%96%87%E4%BB%B6(F)%20%E7%BC%96%E6%A0%87(E)%20%20%E6%90%9C%E7%B4%A2(S)%20%20%E8%A7%86%22%7D%2C%7B%22x%22%3A1034.1866%2C%22y%22%3A61.64934%2C%22width%22%3A35.664999999999964%2C%22height%22%3A11.868479999999998%2C%22text%22%3A%22%E7%AA%97%E5%8F%A3(W)%22%7D%2C%7B%22x%22%3A736.1762%2C%22y%22%3A61.75833%2C%22width%22%3A163.97040000000004%2C%22height%22%3A12.570669999999993%2C%22text%22%3A%22)%20%E8%A7%86%E5%9B%BE(N)%20%20%E8%AF%AD%E8%A8%80(L)%20%E8%AF%AD%E8%A8%80(L)%20%E5%B7%A5%E5%85%B7%22%7D%2C%7B%22x%22%3A928.4841%2C%22y%22%3A61.856564%2C%22width%22%3A98.80290000000002%2C%22height%22%3A11.367899999999999%2C%22text%22%3A%22%E5%AE%8F(M)%20%E8%BF%90%E8%A1%8C(R)%20%20%E6%8F%92%E4%BB%B6(P)%22%7D%2C%7B%22x%22%3A188.2079%2C%22y%22%3A62.56103%2C%22width%22%3A31.32196000000002%2C%22height%22%3A13.820579999999993%2C%22text%22%3A%22%E8%AF%AD%E9%9B%80%22%7D%2C%7B%22x%22%3A880.5242%2C%22y%22%3A62.784405%2C%22width%22%3A40.8370000000001%2C%22height%22%3A10.462261000000005%2C%22text%22%3A%22)%E5%B7%A5%E5%85%B7(0)%22%7D%2C%7B%22x%22%3A597.7215%2C%22y%22%3A63.662235%2C%22width%22%3A21.46289999999999%2C%22height%22%3A13.118999999999993%2C%22text%22%3A%22%E5%8F%8D%E9%A6%88%22%7D%2C%7B%22x%22%3A509.8109%2C%22y%22%3A64.08799%2C%22width%22%3A29.63960000000003%2C%22height%22%3A13.004829999999998%2C%22text%22%3A%22%E5%8F%91%E7%8E%B0%22%7D%2C%7B%22x%22%3A556.5042%2C%22y%22%3A64.18957%2C%22width%22%3A22.271740000000023%2C%22height%22%3A12.740960000000001%2C%22text%22%3A%22%E5%B8%AE%E5%8A%A9%22%7D%2C%7B%22x%22%3A470.9806%2C%22y%22%3A64.56296%2C%22width%22%3A27.00576000000001%2C%22height%22%3A12.218274999999991%2C%22text%22%3A%22%E7%A9%BA%E9%97%B4%22%7D%2C%7B%22x%22%3A421.2327%2C%22y%22%3A64.78968%2C%22width%22%3A33.649069999999995%2C%22height%22%3A12.585979999999992%2C%22text%22%3A%22%E5%B7%A5%E4%BD%9C%E5%8F%B0%22%7D%2C%7B%22x%22%3A745.49603%2C%22y%22%3A75.895615%2C%22width%22%3A25.45667000000003%2C%22height%22%3A12.00117499999999%2C%22text%22%3A%22%E5%87%BA%E5%8F%A3%22%7D%2C%7B%22x%22%3A795.6956%2C%22y%22%3A75.93749%2C%22width%22%3A27.804399999999987%2C%22height%22%3A12.66565%2C%22text%22%3A%22UN%22%7D%2C%7B%22x%22%3A955.8441%2C%22y%22%3A76.910095%2C%22width%22%3A10.659559999999942%2C%22height%22%3A10.377485000000007%2C%22text%22%3A%22LF%22%7D%2C%7B%22x%22%3A651.73846%2C%22y%22%3A97.484024%2C%22width%22%3A56.993240000000014%2C%22height%22%3A9.764585999999994%2C%22text%22%3A%22ACKAGE.JSON%20%22%7D%2C%7B%22x%22%3A413.03903%2C%22y%22%3A115.971115%2C%22width%22%3A35.666139999999984%2C%22height%22%3A11.450805000000003%2C%22text%22%3A%22%E5%B7%B2%E5%85%B3%E6%B3%A8%22%7D%2C%7B%22x%22%3A188.70435%2C%22y%22%3A116.74812%2C%22width%22%3A150.75759000000002%2C%22height%22%3A13.094760000000008%2C%22text%22%3A%22YICHEN%E7%9A%84%E4%BF%A1%E5%AE%89%E7%9F%A5%E8%AF%86%E5%BA%93%2FWEB%E6%96%B9%E5%90%91%22%7D%2C%7B%22x%22%3A695.36554%2C%22y%22%3A123.63799%2C%22width%22%3A95.46705999999995%2C%22height%22%3A8.687479999999994%2C%22text%22%3A%22AME%5C%22%3AHEXO-SITE%5C%22.%22%7D%2C%7B%22x%22%3A740.2409%2C%22y%22%3A168.86444%2C%22width%22%3A88.54549999999995%2C%22height%22%3A10.430509999999998%2C%22text%22%3A%22HEXO.GENERATE'.%22%7D%2C%7B%22x%22%3A736.8276%2C%22y%22%3A179.90758%2C%22width%22%3A83.29790000000003%2C%22height%22%3A9.960280000000012%2C%22text%22%3A%22THEXO.CLEAN%22%7D%2C%7B%22x%22%3A690.09686%2C%22y%22%3A190.71266%2C%22width%22%3A130.97573999999997%2C%22height%22%3A10.62709000000001%2C%22text%22%3A%22'DEPLOY%20%3A.%5C%22HEXO-DEPLOY'.%22%7D%2C%7B%22x%22%3A690.844%2C%22y%22%3A201.77086%2C%22width%22%3A133.9601399999999%2C%22height%22%3A11.020690000000002%2C%22text%22%3A%22TSERVEN'%3AHEXOSERVERVEN.%22%7D%2C%7B%22x%22%3A689.6603%2C%22y%22%3A211.9289%2C%22width%22%3A154.90419999999995%2C%22height%22%3A12.793650000000014%2C%22text%22%3A%22%5C%22SYNC*%3A.%5C%22YUQUE-HEXO.SYNC*%2C%22%7D%2C%7B%22x%22%3A690.3751%2C%22y%22%3A223.41003%2C%22width%22%3A186.60620000000006%2C%22height%22%3A11.23617999999999%2C%22text%22%3A%22%5C%22CLEAN%3AYUQUE*%3A.%5C%22YUQUE-HEXO.CLEAN%5C%22%22%7D%2C%7B%22x%22%3A497.71237%2C%22y%22%3A239.8064%2C%22width%22%3A70.72269%2C%22height%22%3A18.15379999999999%2C%22text%22%3A%22WEB%E6%96%B9%E5%90%91%22%7D%2C%7B%22x%22%3A659.82886%2C%22y%22%3A244.28223%2C%22width%22%3A10.198039999999992%2C%22height%22%3A15.02507%2C%22text%22%3A%22%E7%99%BD%22%7D%2C%7B%22x%22%3A683.7621%2C%22y%22%3A245.77522%2C%22width%22%3A92.35609999999997%2C%22height%22%3A11.84026%2C%22text%22%3A%22YUQUECONRIG*%3A%5B%22%7D%2C%7B%22x%22%3A688.5258%2C%22y%22%3A257.98837%2C%22width%22%3A159.61479999999995%2C%22height%22%3A11.113990000000001%2C%22text%22%3A%22%5C%22POSTPATH%5C%22%3A%5C%22SOURCE%2F_POSTS'%2C%22%7D%2C%7B%22x%22%3A690.5644%2C%22y%22%3A269.60776%2C%22width%22%3A152.83410000000003%2C%22height%22%3A10.559239999999988%2C%22text%22%3A%22CACHEPATH%5C%22%3A%5C%22YUQUE.JSON%5C%22.%22%7D%2C%7B%22x%22%3A511.83994%2C%22y%22%3A273.20828%2C%22width%22%3A35.08651000000003%2C%22height%22%3A10.009619999999984%2C%22text%22%3A%22WEB!!%22%7D%2C%7B%22x%22%3A690.1448%2C%22y%22%3A280.00592%2C%22width%22%3A129.22403999999995%2C%22height%22%3A10.804750000000013%2C%22text%22%3A%22'NDNAMEFORMAT%5C%22%3A%5C%22SLUG%5C%22.%22%7D%2C%7B%22x%22%3A690.45435%2C%22y%22%3A291.73022%2C%22width%22%3A103.29984999999999%2C%22height%22%3A9.79278000000005%2C%22text%22%3A%22%5C%22ADAPTER%5C%22%3A%5C%22HEXO%5C%22.%22%7D%2C%7B%22x%22%3A700.09326%2C%22y%22%3A303.3455%2C%22width%22%3A111.02243999999996%2C%22height%22%3A11.04534000000001%2C%22text%22%3A%22TENCURRENCY'%3A5.%22%7D%2C%7B%22x%22%3A744.1871%2C%22y%22%3A311.0938%2C%22width%22%3A182.13059999999996%2C%22height%22%3A14.614000000000033%2C%22text%22%3A%22HTTPS%3A%2F%2FWWW.YUQUE.COM%2FAPI%2FV2%5C%22%2C%22%7D%2C%7B%22x%22%3A742.4164%2C%22y%22%3A324.58218%2C%22width%22%3A63.793300000000045%2C%22height%22%3A12.299469999999985%2C%22text%22%3A%22THXFQG9*%2C%22%7D%2C%7B%22x%22%3A690.8461%2C%22y%22%3A335.97684%2C%22width%22%3A79.87125000000003%2C%22height%22%3A11.022160000000042%2C%22text%22%3A%22%5C%22REPO*%3A%5C%22WEB*L%22%7D%2C%7B%22x%22%3A690.3342%2C%22y%22%3A347.8909%2C%22width%22%3A79.4914%2C%22height%22%3A9.922820000000002%2C%22text%22%3A%22%5C%22TOKEN'%3A%5C%22TY%22%7D%2C%7B%22x%22%3A690.94855%2C%22y%22%3A359.85416%2C%22width%22%3A120.81549000000007%2C%22height%22%3A9.34784000000002%2C%22text%22%3A%22'ONLYPUBLISHED%5C%22%3ATRUE.%22%7D%2C%7B%22x%22%3A291.75723%2C%22y%22%3A365.20874%2C%22width%22%3A107.99087000000003%2C%22height%22%3A13.619380000000035%2C%22text%22%3A%22%E8%AF%AD%E9%9B%80%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5HEXO%E5%8D%9A%E5%AE%A2%22%7D%2C%7B%22x%22%3A637.0905%2C%22y%22%3A370.38232%2C%22width%22%3A11.812940000000026%2C%22height%22%3A10.45587999999998%2C%22text%22%3A%2224%22%7D%2C%7B%22x%22%3A692.2736%2C%22y%22%3A371.73636%2C%22width%22%3A101.62935000000004%2C%22height%22%3A9.28140000000002%2C%22text%22%3A%22ONLYPUBLIC'%3ATRUE%22%7D%2C%7B%22x%22%3A636.8544%2C%22y%22%3A381.31088%2C%22width%22%3A13.723659999999995%2C%22height%22%3A11.413920000000019%2C%22text%22%3A%2225%22%7D%2C%7B%22x%22%3A637.1477%2C%22y%22%3A393.18277%2C%22width%22%3A14.765800000000013%2C%22height%22%3A9.825530000000015%2C%22text%22%3A%2226%22%7D%2C%7B%22x%22%3A292.61948%2C%22y%22%3A394.14865%2C%22width%22%3A63.18887000000001%2C%22height%22%3A13.04627000000005%2C%22text%22%3A%22%E9%9D%B6%E6%9C%BA%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB%22%7D%2C%7B%22x%22%3A680.8449%2C%22y%22%3A394.31808%2C%22width%22%3A120.20399999999995%2C%22height%22%3A8.682819999999992%2C%22text%22%3A%22DEVDEPENDENCIES%5C%22%3A%22%7D%2C%7B%22x%22%3A636.72736%2C%22y%22%3A405.1131%2C%22width%22%3A12.904780000000073%2C%22height%22%3A9.09250000000003%2C%22text%22%3A%2227%22%7D%2C%7B%22x%22%3A696.6099%2C%22y%22%3A404.4538%2C%22width%22%3A113.44830000000002%2C%22height%22%3A10.018860000000018%2C%22text%22%3A%22'YUQUE-HEXO*%3A-**1.6.0%22%7D%2C%7B%22x%22%3A636.7636%2C%22y%22%3A415.88712%2C%22width%22%3A13.480999999999995%2C%22height%22%3A10.292779999999993%2C%22text%22%3A%2228%22%7D%2C%7B%22x%22%3A292.80826%2C%22y%22%3A422.31464%2C%22width%22%3A42.505089999999996%2C%22height%22%3A11.804460000000006%2C%22text%22%3A%22%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%22%7D%2C%7B%22x%22%3A637.03125%2C%22y%22%3A425.25%2C%22width%22%3A12.65625%2C%22height%22%3A12.65625%2C%22text%22%3A%2229%22%7D%2C%7B%22x%22%3A672.92633%2C%22y%22%3A426.9375%2C%22width%22%3A63.82246999999995%2C%22height%22%3A10.333860000000016%2C%22text%22%3A%22%5C%22HEXO*%3A%22%7D%2C%7B%22x%22%3A635.88074%2C%22y%22%3A431.71942%2C%22width%22%3A15.081910000000107%2C%22height%22%3A84.96137999999996%2C%22text%22%3A%2223338333333%22%7D%2C%7B%22x%22%3A689.0641%2C%22y%22%3A436.9652%2C%22width%22%3A102.57289999999989%2C%22height%22%3A10.911900000000003%2C%22text%22%3A%22%5C%22VERSION%5C%22%3A%5C%224.2.1%5C%22%22%7D%2C%7B%22x%22%3A306.00473%2C%22y%22%3A451.54102%2C%22width%22%3A33.96902%2C%22height%22%3A11.789940000000001%2C%22text%22%3A%22NC%E4%BD%BF%E7%94%A8%22%7D%2C%7B%22x%22%3A682.776%2C%22y%22%3A461.55298%2C%22width%22%3A94.14650000000006%2C%22height%22%3A8.742670000000032%2C%22text%22%3A%22DEPENDENCIES*%3A%22%7D%2C%7B%22x%22%3A689.204%2C%22y%22%3A473.18875%2C%22width%22%3A93.17454000000009%2C%22height%22%3A9.44644999999997%2C%22text%22%3A%22THEXO*%3A.4.2.1*.1*.%22%7D%2C%7B%22x%22%3A300.65756%2C%22y%22%3A477.381%2C%22width%22%3A46.61038000000002%2C%22height%22%3A13.500530000000026%2C%22text%22%3A%22SQL%E6%B3%A8%E5%85%A5%22%7D%2C%7B%22x%22%3A690.13434%2C%22y%22%3A482.3913%2C%22width%22%3A167.84222%2C%22height%22%3A10.796539999999993%2C%22text%22%3A%22%5C%22HEXO-DEPLOYER-AIT%5C%22%3A%5C%22%5C%222.1.0*.%22%7D%2C%7B%22x%22%3A690.54926%2C%22y%22%3A495.89264%2C%22width%22%3A160.91984000000002%2C%22height%22%3A8.854000000000042%2C%22text%22%3A%22HEXO-GENERATOR-ARCHIVE%20%3A%20%20%20%20%20%20%20%20%20%20HEXOR-ARCHIVE%20%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20GENEXO-GENER%20%22%7D%2C%7B%22x%22%3A691.6804%2C%22y%22%3A504.98834%2C%22width%22%3A224.95644000000004%2C%22height%22%3A10.41615999999999%2C%22text%22%3A%22%5C%22HEXO-QENERATON-BAIDU-SITEMAP%5C%22%3A%5C%22.%20%5C%22.6*%2C%22%7D%2C%7B%22x%22%3A303.07138%2C%22y%22%3A506.0116%2C%22width%22%3A76.42020000000002%2C%22height%22%3A12.476200000000006%2C%22text%22%3A%22XSS%2FCSRF%2FSSRF%22%7D%2C%7B%22x%22%3A627.70624%2C%22y%22%3A521.59265%2C%22width%22%3A41.241859999999974%2C%22height%22%3A11.535549999999944%2C%22text%22%3A%22JSON%20FILE%22%7D%2C%7B%22x%22%3A902.9122%2C%22y%22%3A522.1125%2C%22width%22%3A125.66229999999996%2C%22height%22%3A11.322740000000067%2C%22text%22%3A%22LN%3A21%20COL%3A19%20SEL%3A010%22%7D%2C%7B%22x%22%3A756.80334%2C%22y%22%3A522.7854%2C%22width%22%3A109.82470999999998%2C%22height%22%3A9.88463999999999%2C%22text%22%3A%22LENGTH%3A1.340%20LINES%3A51%22%7D%2C%7B%22x%22%3A303.30148%2C%22y%22%3A533.0042%2C%22width%22%3A48.61014%2C%22height%22%3A12.619460000000004%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23e9e8e8%22%2C%22id%22%3A%22u0d64e7b4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ua07492e9\" id=\"ua07492e9\"><br></p><p data-lake-id=\"u378a68de\" id=\"u378a68de\"><span data-lake-id=\"uffb3bfd1\" id=\"uffb3bfd1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">token 是在右上角头像 -&gt; 账户设置 -&gt; Token 添加的，权限的话只给读取就可以</span></p><p data-lake-id=\"uc5690ce0\" id=\"uc5690ce0\"><span data-lake-id=\"u83572edc\" id=\"u83572edc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">ps.公开的知识库也要设置 Token。</span></p><p data-lake-id=\"ufa62067b\" id=\"ufa62067b\"><span data-lake-id=\"u62e377e6\" id=\"u62e377e6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">接着，</span></p><p data-lake-id=\"u6c5b1449\" id=\"u6c5b1449\"><span data-lake-id=\"u91827c8d\" id=\"u91827c8d\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">在 &quot;scripts&quot; 中添加</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%20%20%20%20%5C%22sync%5C%22%3A%20%5C%22yuque-hexo%20sync%5C%22%2C%5Cn%20%20%20%20%5C%22clean%3Ayuque%5C%22%3A%20%5C%22yuque-hexo%20clean%5C%22%2C%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22NwusZ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u7c436989\" id=\"u7c436989\"><span data-lake-id=\"uffe83f1f\" id=\"uffe83f1f\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">这样整体下来我的 package.json 内容如下（参考）：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22json%22%2C%22code%22%3A%22%7B%5Cn%20%20%5C%22name%5C%22%3A%20%5C%22hexo-site%5C%22%2C%5Cn%20%20%5C%22version%5C%22%3A%20%5C%220.0.0%5C%22%2C%5Cn%20%20%5C%22private%5C%22%3A%20true%2C%5Cn%20%20%5C%22scripts%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22build%5C%22%3A%20%5C%22hexo%20generate%5C%22%2C%5Cn%20%20%20%20%5C%22clean%5C%22%3A%20%5C%22hexo%20clean%5C%22%2C%5Cn%20%20%20%20%5C%22deploy%5C%22%3A%20%5C%22hexo%20deploy%5C%22%2C%5Cn%20%20%20%20%5C%22server%5C%22%3A%20%5C%22hexo%20server%5C%22%2C%5Cn%20%20%20%20%5C%22sync%5C%22%3A%20%5C%22yuque-hexo%20sync%5C%22%2C%5Cn%20%20%20%20%5C%22clean%3Ayuque%5C%22%3A%20%5C%22yuque-hexo%20clean%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22yuqueConfig%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22postPath%5C%22%3A%20%5C%22source%2F_posts%5C%22%2C%5Cn%20%20%20%20%5C%22cachePath%5C%22%3A%20%5C%22yuque.json%5C%22%2C%5Cn%20%20%20%20%5C%22mdNameFormat%5C%22%3A%20%5C%22slug%5C%22%2C%5Cn%20%20%20%20%5C%22adapter%5C%22%3A%20%5C%22hexo%5C%22%2C%5Cn%20%20%20%20%5C%22concurrency%5C%22%3A%205%2C%5Cn%20%20%20%20%5C%22baseUrl%5C%22%3A%20%5C%22https%3A%2F%2Fwww.yuque.com%2Fapi%2Fv2%5C%22%2C%5Cn%20%20%20%20%5C%22login%5C%22%3A%20%5C%22hxfqg9%5C%22%2C%5Cn%20%20%20%20%5C%22repo%5C%22%3A%20%5C%22web%5C%22%2C%5Cn%20%20%20%20%5C%22token%5C%22%3A%20%5C%22%E8%AF%AD%E9%9B%80token%5C%22%2C%5Cn%20%20%20%20%5C%22onlyPublished%5C%22%3A%20true%2C%5Cn%20%20%20%20%5C%22onlyPublic%5C%22%3A%20true%5Cn%20%20%7D%2C%5Cn%20%20%5C%22devDependencies%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22yuque-hexo%5C%22%3A%20%5C%22%5E1.6.0%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22hexo%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22version%5C%22%3A%20%5C%224.2.1%5C%22%5Cn%20%20%7D%2C%5Cn%20%20%5C%22dependencies%5C%22%3A%20%7B%5Cn%20%20%20%20%5C%22hexo%5C%22%3A%20%5C%22%5E4.2.1%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-deployer-git%5C%22%3A%20%5C%22%5E2.1.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-archive%5C%22%3A%20%5C%22%5E1.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-baidu-sitemap%5C%22%3A%20%5C%22%5E0.1.6%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-category%5C%22%3A%20%5C%22%5E1.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-feed%5C%22%3A%20%5C%22%5E2.2.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-index%5C%22%3A%20%5C%22%5E1.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-json-content%5C%22%3A%20%5C%22%5E4.2.3%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-searchdb%5C%22%3A%20%5C%22%5E1.3.1%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-sitemap%5C%22%3A%20%5C%22%5E2.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-generator-tag%5C%22%3A%20%5C%22%5E1.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-renderer-ejs%5C%22%3A%20%5C%22%5E1.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-renderer-marked%5C%22%3A%20%5C%22%5E2.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-renderer-stylus%5C%22%3A%20%5C%22%5E1.1.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-server%5C%22%3A%20%5C%22%5E1.0.0%5C%22%2C%5Cn%20%20%20%20%5C%22hexo-wordcount%5C%22%3A%20%5C%22%5E6.0.1%5C%22%5Cn%20%20%7D%5Cn%7D%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22OtMzs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"uf5c7f86d\" id=\"uf5c7f86d\"><span data-lake-id=\"u9de0f332\" id=\"u9de0f332\" class=\"lake-fontsize-11\">这时候，在本地调试的时候使用命令：</span><span data-lake-id=\"u7f4e15cc\" id=\"u7f4e15cc\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">yuque-hexo sync </span><span data-lake-id=\"u7435b1c6\" id=\"u7435b1c6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">就会把语雀的文章给下载下来，下载到 \\source\\_posts</span></p><p data-lake-id=\"u18577d9b\" id=\"u18577d9b\"><span data-lake-id=\"ud6d6981b\" id=\"ud6d6981b\" class=\"lake-fontsize-11\" style=\"color: #F759AB\">（使用以上命令前先备份本地的_posts文件夹下的md文章，使用语雀下载的时候会先清空此文件夹）</span></p><p data-lake-id=\"u538ac320\" id=\"u538ac320\"><span data-lake-id=\"u9d6df506\" id=\"u9d6df506\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">然后 </span><span data-lake-id=\"uf005bff1\" id=\"uf005bff1\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">hexo g &amp;&amp; hexo s</span><span data-lake-id=\"u1a206f39\" id=\"u1a206f39\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"> 就可以访问 </span><span data-lake-id=\"ubec2d5aa\" id=\"ubec2d5aa\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">127.0.0.1:4000</span><span data-lake-id=\"u547a2d6b\" id=\"u547a2d6b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"> 本地看一下了</span></p><p data-lake-id=\"ueef52dc2\" id=\"ueef52dc2\"><span data-lake-id=\"ua0201639\" id=\"ua0201639\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">手动发布是 </span><span data-lake-id=\"uf04f864d\" id=\"uf04f864d\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">hexo g &amp;&amp; hexo d</span></p><p data-lake-id=\"u7e0f6ed6\" id=\"u7e0f6ed6\"><span data-lake-id=\"u26d6054a\" id=\"u26d6054a\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">​</span><br></p><h3 data-lake-id=\"qAkfj\" id=\"qAkfj\"><span data-lake-id=\"u24fee861\" id=\"u24fee861\" style=\"color: rgb(51, 51, 51)\">针对语雀图片无法正常显示的解决办法</span></h3><p data-lake-id=\"u3d27d011\" id=\"u3d27d011\"><span data-lake-id=\"u03c9069c\" id=\"u03c9069c\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">在主题的 layout 文件夹中的 post.ejs 文件中加上一句（不同主题加的位置不同）</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%3Cmeta%20name%3D%5C%22referrer%5C%22%20content%3D%5C%22no-referrer%5C%22%20%2F%3E%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22wGBUw%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u1caa6671\" id=\"u1caa6671\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649404362200-7eafd317-d235-4af8-afe9-4f9c54d4dee2.png%22%2C%22taskId%22%3A%22ufd914241-d133-43ab-b845-e08191199df%22%2C%22clientId%22%3A%22u68da2bd8-69aa-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A46710%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A841%2C%22originHeight%22%3A351%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%5BADMINISTRATOR%5D%20D%3A%5C%5CGITHUB%5C%5CBLOG%5C%5CTHEMES%5C%5CIND%20%5C%5CINDIGO%5C%5CLAYOUT%5C%5CPOST.EJS%20-%20NOTEPAD%2B%20%E6%96%87%E4%BB%B6(F)%E7%BC%96%E8%BE%91(E)%20%E8%AE%BE%E7%BD%AE(T)%20%E6%90%9C%E7%B4%A2(S)%20%E5%B7%A5%E5%85%B7(O)%20%E8%A7%86%E5%9B%BE(V)%E7%BC%96%E7%A0%81(N)%E8%AF%AD%E8%A8%80(L)%E8%AE%BE%E7%BD%AE%20%E5%AE%8F(M)%E8%BF%90%E8%A1%8C(R)%E6%8F%92%E4%BB%B6(P)%E7%AA%97%E5%8F%A3(W)%20PACKAGE.%20JSON%20X%20POST.EJS%20_CONFIG.YMLX%20PARTIAL('PARTIAL%2FHEADER'%2C%7B%20123%20%E5%85%A500%20TITLE%3A%20PAGE.TITLE%2C%20HDCLASS%3A%20'POST-HEADER'%204%201)%20.%3E%3CMETA%20%5C%22NAME-%5C%22REFERRER%5C%22.CONTENT-%5C%22NO-REFERRER%5C%22%2015678%20%2F0%20THEME.REWARD%20REWARD'INPAGE.%3F(THEME.REWARD%26%26PAGE.REWARD)%20PAGE.REWARD%20%E5%A4%A7%E5%8F%B7%20CLASS%5C%22CONTAINER%20BODY-WRAP%5C%22%3E%20%3CDIV.CLAS%209%20%3C%26-PARTIAL(%5C%22%20PARTIAL%2FPOST'%2C%7BPOST%3APAGE%20%5D)%20%3C%2FDIV%3E%2010%2011%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A494.31723%2C%22y%22%3A10.621661%2C%22width%22%3A115.85276999999996%2C%22height%22%3A16.408292%2C%22text%22%3A%22%5BADMINISTRATOR%5D%22%7D%2C%7B%22x%22%3A31.22695%2C%22y%22%3A9.124046%2C%22width%22%3A198.41058%2C%22height%22%3A18.82782%2C%22text%22%3A%22D%3A%5C%5CGITHUB%5C%5CBLOG%5C%5CTHEMES%5C%5CIND%22%7D%2C%7B%22x%22%3A215.94017%2C%22y%22%3A10.672511%2C%22width%22%3A254.86443%2C%22height%22%3A17.45959%2C%22text%22%3A%22%5C%5CINDIGO%5C%5CLAYOUT%5C%5CPOST.EJS%20-%20NOTEPAD%2B%22%7D%2C%7B%22x%22%3A3.3128736%2C%22y%22%3A40.42773%2C%22width%22%3A117.4777764%2C%22height%22%3A19.962830000000004%2C%22text%22%3A%22%E6%96%87%E4%BB%B6(F)%E7%BC%96%E8%BE%91(E)%22%7D%2C%7B%22x%22%3A396.43616%2C%22y%22%3A41.800655%2C%22width%22%3A55.608540000000005%2C%22height%22%3A17.790625%2C%22text%22%3A%22%E8%AE%BE%E7%BD%AE(T)%22%7D%2C%7B%22x%22%3A134.53075%2C%22y%22%3A41.828228%2C%22width%22%3A50.98686999999998%2C%22height%22%3A18.237475999999994%2C%22text%22%3A%22%E6%90%9C%E7%B4%A2(S)%22%7D%2C%7B%22x%22%3A461.88586%2C%22y%22%3A41.8976%2C%22width%22%3A60.82348999999999%2C%22height%22%3A16.943133000000003%2C%22text%22%3A%22%E5%B7%A5%E5%85%B7(O)%22%7D%2C%7B%22x%22%3A198.25114%2C%22y%22%3A42.33798%2C%22width%22%3A224.16948%2C%22height%22%3A17.283353999999996%2C%22text%22%3A%22%E8%A7%86%E5%9B%BE(V)%E7%BC%96%E7%A0%81(N)%E8%AF%AD%E8%A8%80(L)%E8%AE%BE%E7%BD%AE%22%7D%2C%7B%22x%22%3A531.01%2C%22y%22%3A42.102703%2C%22width%22%3A249.3274%2C%22height%22%3A18.038897%2C%22text%22%3A%22%E5%AE%8F(M)%E8%BF%90%E8%A1%8C(R)%E6%8F%92%E4%BB%B6(P)%E7%AA%97%E5%8F%A3(W)%22%7D%2C%7B%22x%22%3A27.65283%2C%22y%22%3A104.19549%2C%22width%22%3A114.35134%2C%22height%22%3A16.07074999999999%2C%22text%22%3A%22PACKAGE.%20JSON%20X%22%7D%2C%7B%22x%22%3A318.39395%2C%22y%22%3A106.05546%2C%22width%22%3A65.76024999999998%2C%22height%22%3A14.275840000000002%2C%22text%22%3A%22POST.EJS%22%7D%2C%7B%22x%22%3A185.4294%2C%22y%22%3A105.82443%2C%22width%22%3A98.10368%2C%22height%22%3A14.707544999999996%2C%22text%22%3A%22_CONFIG.YMLX%22%7D%2C%7B%22x%22%3A94.24463%2C%22y%22%3A128.35817%2C%22width%22%3A284.26855%2C%22height%22%3A19.224400000000003%2C%22text%22%3A%22PARTIAL('PARTIAL%2FHEADER'%2C%7B%22%7D%2C%7B%22x%22%3A26.253984%2C%22y%22%3A130.41435%2C%22width%22%3A13.371278999999998%2C%22height%22%3A58.723149999999976%2C%22text%22%3A%22123%22%7D%2C%7B%22x%22%3A59.172863%2C%22y%22%3A131.08463%2C%22width%22%3A20.923443%2C%22height%22%3A13.46996999999999%2C%22text%22%3A%22%E5%85%A500%22%7D%2C%7B%22x%22%3A102.25152%2C%22y%22%3A150.5454%2C%22width%22%3A52.72027%2C%22height%22%3A14.384209999999996%2C%22text%22%3A%22TITLE%3A%22%7D%2C%7B%22x%22%3A165.83592%2C%22y%22%3A150.60869%2C%22width%22%3A112.75353000000001%2C%22height%22%3A16.774850000000015%2C%22text%22%3A%22PAGE.TITLE%2C%22%7D%2C%7B%22x%22%3A95.096214%2C%22y%22%3A170.46356%2C%22width%22%3A76.13890599999999%2C%22height%22%3A15.49475000000001%2C%22text%22%3A%22HDCLASS%3A%22%7D%2C%7B%22x%22%3A194.61566%2C%22y%22%3A168.9647%2C%22width%22%3A119.99317000000002%2C%22height%22%3A17.65604000000002%2C%22text%22%3A%22'POST-HEADER'%22%7D%2C%7B%22x%22%3A27.459692%2C%22y%22%3A185.71193%2C%22width%22%3A9.549234000000002%2C%22height%22%3A21.873819999999995%2C%22text%22%3A%224%22%7D%2C%7B%22x%22%3A56.55011%2C%22y%22%3A189.95447%2C%22width%22%3A101.80620000000002%2C%22height%22%3A15.77519000000001%2C%22text%22%3A%221)%20.%3E%3CMETA%22%7D%2C%7B%22x%22%3A167.02292%2C%22y%22%3A190.15369%2C%22width%22%3A367.01351999999997%2C%22height%22%3A14.81932999999998%2C%22text%22%3A%22%5C%22NAME-%5C%22REFERRER%5C%22.CONTENT-%5C%22NO-REFERRER%5C%22%22%7D%2C%7B%22x%22%3A25.285154%2C%22y%22%3A201.35072%2C%22width%22%3A13.199171%2C%22height%22%3A86.16288%2C%22text%22%3A%2215678%22%7D%2C%7B%22x%22%3A57.59695%2C%22y%22%3A211.46588%2C%22width%22%3A18.802299999999995%2C%22height%22%3A13.23499000000001%2C%22text%22%3A%22%2F0%22%7D%2C%7B%22x%22%3A705.30304%2C%22y%22%3A231.12251%2C%22width%22%3A123.09636%2C%22height%22%3A13.505949999999984%2C%22text%22%3A%22THEME.REWARD%22%7D%2C%7B%22x%22%3A205.14793%2C%22y%22%3A230.4623%2C%22width%22%3A469.75887%2C%22height%22%3A17.03976%2C%22text%22%3A%22REWARD'INPAGE.%3F(THEME.REWARD%26%26PAGE.REWARD)%22%7D%2C%7B%22x%22%3A55.946087%2C%22y%22%3A232.16692%2C%22width%22%3A114.42281299999999%2C%22height%22%3A14.311479999999989%2C%22text%22%3A%22PAGE.REWARD%22%7D%2C%7B%22x%22%3A57.41844%2C%22y%22%3A250.66502%2C%22width%22%3A16.93081%2C%22height%22%3A13.965180000000004%2C%22text%22%3A%22%E5%A4%A7%E5%8F%B7%22%7D%2C%7B%22x%22%3A114.61972%2C%22y%22%3A269.486%2C%22width%22%3A272.87978%2C%22height%22%3A15.623249999999985%2C%22text%22%3A%22CLASS%5C%22CONTAINER%20BODY-WRAP%5C%22%3E%22%7D%2C%7B%22x%22%3A57.589527%2C%22y%22%3A269.90402%2C%22width%22%3A85.937423%2C%22height%22%3A14.992529999999988%2C%22text%22%3A%22%3CDIV.CLAS%22%7D%2C%7B%22x%22%3A25.33333%2C%22y%22%3A283.67075%2C%22width%22%3A11.464685999999997%2C%22height%22%3A20.99590999999998%2C%22text%22%3A%229%22%7D%2C%7B%22x%22%3A98.32638%2C%22y%22%3A288.80057%2C%22width%22%3A459.25815%2C%22height%22%3A18.588099999999997%2C%22text%22%3A%22%3C%26-PARTIAL(%5C%22%20PARTIAL%2FPOST'%2C%7BPOST%3APAGE%20%5D)%22%7D%2C%7B%22x%22%3A56.552048%2C%22y%22%3A309.7793%2C%22width%22%3A59.899772%2C%22height%22%3A14.899170000000026%2C%22text%22%3A%22%3C%2FDIV%3E%22%7D%2C%7B%22x%22%3A17.146908%2C%22y%22%3A310.09537%2C%22width%22%3A19.753998%2C%22height%22%3A14.226069999999993%2C%22text%22%3A%2210%22%7D%2C%7B%22x%22%3A16.72735%2C%22y%22%3A330.00003%2C%22width%22%3A20.00817%2C%22height%22%3A14.666690000000017%2C%22text%22%3A%2211%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23f1eeec%22%2C%22id%22%3A%22u4d9c66af%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ubba63287\" id=\"ubba63287\"><br></p><p data-lake-id=\"udffcc68a\" id=\"udffcc68a\"><span data-lake-id=\"u8ceee437\" id=\"u8ceee437\">小灰灰用的是butterFly主题，加的位置在：</span></p><p data-lake-id=\"uc993bd76\" id=\"uc993bd76\"><span data-lake-id=\"u62bf475c\" id=\"u62bf475c\">\\themes\\butterfly\\layout\\includes\\head.pug 文件：</span></p><p data-lake-id=\"u8cce8a4b\" id=\"u8cce8a4b\"><span data-lake-id=\"u97ae6b12\" id=\"u97ae6b12\">大概在第40行左右添加：</span></p><p data-lake-id=\"ueb1d1afb\" id=\"ueb1d1afb\"><span data-lake-id=\"u33798ded\" id=\"u33798ded\">（PS：放在这个位置是因为百度统计的referrer问题。只能放在统计后面）</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22meta(name%3D%5C%22referrer%5C%22%20content%3D%5C%22no-referrer%5C%22)%5Cn%23%E5%A6%82%E6%9E%9C%E4%B8%8A%E9%9D%A2%E4%B8%8D%E7%94%9F%E6%95%88%EF%BC%8C%E6%8F%90%E7%A4%BA%20referrer%E8%A2%AB%E7%A6%81%E7%94%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%AF%95%E8%AF%95%5Cnmeta(name%3D%5C%22referrer%5C%22%20content%3D%5C%22no-referrer%5C%22)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22n6Sbf%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u8a5dfd20\" id=\"u8a5dfd20\"><span data-lake-id=\"ue727d19b\" id=\"ue727d19b\">如图：</span></p><p data-lake-id=\"ua3f2a4ce\" id=\"ua3f2a4ce\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649641758436-1971a415-4efc-45ff-87b9-1e47f9617353.png%22%2C%22taskId%22%3A%22u1edc2856-0d56-4f15-9454-c218fcf937a%22%2C%22clientId%22%3A%22u6e1ca8df-731b-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A1013.4339987353198%2C%22height%22%3A700%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A134271%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1119%2C%22originHeight%22%3A773%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%2225%20PAGEKEYWORDS%2026%20CONTENTPAGEKEYWORDS)%20META(NAME%5C%22KEYWORDS%5C%22%2027%20META(NAME%3A%5C%22AUTHOR%5C%22%20CONTENTPAGEAUTHOR)%20META(NAME%3A%5C%22COPYRIGHT%5C%22%20CONTENT-PAGECOPYRIGHT)%2028%2029%20META(NAME%20%E4%B8%89%5C%22FORMAT-DETECTION%5C%22%20CONTENT-%5C%22TELEPHONE-NO%5C%22)%20META(NAME%3A%5C%22THEME-COLOR%5C%22%20CONTENT-THEMECOLOR)%2030%2031%2032%20OPEN_GRAPH%2033%20INCLUDE%20.%2FHEAD%2FOPEN_G%20N_GRAPH.PUG%2034%20CONFIG.FAVICON)%20FAVICON%20TAG(THEME.FAVICON%2035%20LINK(REL-%5C%22CANONICAL%5C%22%20HREF-URLNOINDEX()%2036%2037%201%2F-%E9%A2%84%E8%A7%A3%E6%9E%90%2038%20%E4%B8%AD%20%7BCACHE%3A%20TRUE%2039%20PARTIAL('INCLUDES%2FHEAD%2FPRECONNECT%2040%20CONTENT%3A%5C%22NO-REFERRER%5C%22)%20META(NAME%3A%5C%22REFERRER%201%2F-%E7%BD%91%E7%AB%99%E9%AA%8C%E8%AF%81%2041%20%7B%7D%2C%7BCACHE%3AT%2042%20!-PARTIAL('INCLUDES%2FHEAD%2FSITE_VERIFICATION'%2C)%2043%20%2F%2F-%20PWA%2044%20IF%20OWA%20%26%26%20THEME.PWA.ENABLE)%2045%20(THEME.PWA%2046%20!-PARTIAL('INCLUDES%2FHEAD%2FPWA'%2C%20%7B%7D%2C%20%7BCACHE%3A%20TRUE%7D)%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A8.601667%2C%22y%22%3A1.4854939%2C%22width%22%3A22.277473%2C%22height%22%3A18.2289431%2C%22text%22%3A%2225%22%7D%2C%7B%22x%22%3A119.66217%2C%22y%22%3A3.4978187%2C%22width%22%3A133.04659999999998%2C%22height%22%3A17.8365093%2C%22text%22%3A%22PAGEKEYWORDS%22%7D%2C%7B%22x%22%3A8.367895%2C%22y%22%3A36.638912%2C%22width%22%3A23.379254%2C%22height%22%3A17.067068%2C%22text%22%3A%2226%22%7D%2C%7B%22x%22%3A339.0178%2C%22y%22%3A36.39561%2C%22width%22%3A227.68%2C%22height%22%3A19.475520000000003%2C%22text%22%3A%22CONTENTPAGEKEYWORDS)%22%7D%2C%7B%22x%22%3A108.07849%2C%22y%22%3A37.330116%2C%22width%22%3A218.65036000000003%2C%22height%22%3A18.471077%2C%22text%22%3A%22META(NAME%5C%22KEYWORDS%5C%22%22%7D%2C%7B%22x%22%3A9.214656%2C%22y%22%3A71.697685%2C%22width%22%3A22.569834%2C%22height%22%3A16.97695499999999%2C%22text%22%3A%2227%22%7D%2C%7B%22x%22%3A82.48088%2C%22y%22%3A71.20053%2C%22width%22%3A205.96927999999997%2C%22height%22%3A18.102090000000004%2C%22text%22%3A%22META(NAME%3A%5C%22AUTHOR%5C%22%22%7D%2C%7B%22x%22%3A298.71118%2C%22y%22%3A74.344666%2C%22width%22%3A199.60363999999998%2C%22height%22%3A15.108713999999992%2C%22text%22%3A%22CONTENTPAGEAUTHOR)%22%7D%2C%7B%22x%22%3A84.65907%2C%22y%22%3A104.56744%2C%22width%22%3A481.47057%2C%22height%22%3A21.45635%2C%22text%22%3A%22META(NAME%3A%5C%22COPYRIGHT%5C%22%20CONTENT-PAGECOPYRIGHT)%22%7D%2C%7B%22x%22%3A10.166552%2C%22y%22%3A106.45218%2C%22width%22%3A22.766386%2C%22height%22%3A16.037540000000007%2C%22text%22%3A%2228%22%7D%2C%7B%22x%22%3A10.351557%2C%22y%22%3A139.54713%2C%22width%22%3A22.319353%2C%22height%22%3A17.267949999999985%2C%22text%22%3A%2229%22%7D%2C%7B%22x%22%3A85.29625%2C%22y%22%3A140.35791%2C%22width%22%3A580.18275%2C%22height%22%3A16.990769999999998%2C%22text%22%3A%22META(NAME%20%E4%B8%89%5C%22FORMAT-DETECTION%5C%22%20CONTENT-%5C%22TELEPHONE-NO%5C%22)%22%7D%2C%7B%22x%22%3A85.29396%2C%22y%22%3A173.64534%2C%22width%22%3A470.61607000000004%2C%22height%22%3A17.834959999999995%2C%22text%22%3A%22META(NAME%3A%5C%22THEME-COLOR%5C%22%20CONTENT-THEMECOLOR)%22%7D%2C%7B%22x%22%3A9.615819%2C%22y%22%3A173.91463%2C%22width%22%3A21.602331999999997%2C%22height%22%3A15.76137%2C%22text%22%3A%2230%22%7D%2C%7B%22x%22%3A10.208735%2C%22y%22%3A208.8217%2C%22width%22%3A20.550096%2C%22height%22%3A15.872070000000008%2C%22text%22%3A%2231%22%7D%2C%7B%22x%22%3A8.9046335%2C%22y%22%3A242.77586%2C%22width%22%3A23.474780499999998%2C%22height%22%3A17.22288999999998%2C%22text%22%3A%2232%22%7D%2C%7B%22x%22%3A129.27423%2C%22y%22%3A242.92783%2C%22width%22%3A112.48343%2C%22height%22%3A19.084269999999975%2C%22text%22%3A%22OPEN_GRAPH%22%7D%2C%7B%22x%22%3A8.977532%2C%22y%22%3A276.3322%2C%22width%22%3A23.720115000000003%2C%22height%22%3A17.33850000000001%2C%22text%22%3A%2233%22%7D%2C%7B%22x%22%3A86.12126%2C%22y%22%3A277.18716%2C%22width%22%3A223.98528%2C%22height%22%3A19.424109999999985%2C%22text%22%3A%22INCLUDE%20.%2FHEAD%2FOPEN_G%22%7D%2C%7B%22x%22%3A292.50076%2C%22y%22%3A277.63%2C%22width%22%3A114.09168%2C%22height%22%3A18.03503999999998%2C%22text%22%3A%22N_GRAPH.PUG%22%7D%2C%7B%22x%22%3A8.945463%2C%22y%22%3A311.1385%2C%22width%22%3A22.793749%2C%22height%22%3A16.472069999999974%2C%22text%22%3A%2234%22%7D%2C%7B%22x%22%3A425.1017%2C%22y%22%3A344.00235%2C%22width%22%3A164.09089999999998%2C%22height%22%3A20.23275000000001%2C%22text%22%3A%22CONFIG.FAVICON)%22%7D%2C%7B%22x%22%3A95.25169%2C%22y%22%3A344.93942%2C%22width%22%3A289.34021%2C%22height%22%3A19.58238%2C%22text%22%3A%22FAVICON%20TAG(THEME.FAVICON%22%7D%2C%7B%22x%22%3A8.674158%2C%22y%22%3A345.26715%2C%22width%22%3A23.323962%2C%22height%22%3A16.152469999999994%2C%22text%22%3A%2235%22%7D%2C%7B%22x%22%3A86.38072%2C%22y%22%3A378.6509%2C%22width%22%3A405.00758%2C%22height%22%3A19.211600000000033%2C%22text%22%3A%22LINK(REL-%5C%22CANONICAL%5C%22%20HREF-URLNOINDEX()%22%7D%2C%7B%22x%22%3A8.882638%2C%22y%22%3A379.46146%2C%22width%22%3A23.647886999999997%2C%22height%22%3A16.968200000000024%2C%22text%22%3A%2236%22%7D%2C%7B%22x%22%3A10.027504%2C%22y%22%3A413.02258%2C%22width%22%3A21.847226%2C%22height%22%3A18.411749999999984%2C%22text%22%3A%2237%22%7D%2C%7B%22x%22%3A87.80053%2C%22y%22%3A445.71555%2C%22width%22%3A98.93476%2C%22height%22%3A23.151749999999993%2C%22text%22%3A%221%2F-%E9%A2%84%E8%A7%A3%E6%9E%90%22%7D%2C%7B%22x%22%3A10.499293%2C%22y%22%3A448.08603%2C%22width%22%3A21.023398999999998%2C%22height%22%3A16.244020000000035%2C%22text%22%3A%2238%22%7D%2C%7B%22x%22%3A499.97977%2C%22y%22%3A481.27536%2C%22width%22%3A30.309829999999977%2C%22height%22%3A18.683240000000012%2C%22text%22%3A%22%E4%B8%AD%22%7D%2C%7B%22x%22%3A553.80695%2C%22y%22%3A482.1636%2C%22width%22%3A128.20494999999994%2C%22height%22%3A18.153480000000002%2C%22text%22%3A%22%7BCACHE%3A%20TRUE%22%7D%2C%7B%22x%22%3A10.149222%2C%22y%22%3A482.82742%2C%22width%22%3A20.308193000000003%2C%22height%22%3A14.484809999999982%2C%22text%22%3A%2239%22%7D%2C%7B%22x%22%3A93.88548%2C%22y%22%3A482.32657%2C%22width%22%3A380.57935999999995%2C%22height%22%3A18.63540999999998%2C%22text%22%3A%22PARTIAL('INCLUDES%2FHEAD%2FPRECONNECT%22%7D%2C%7B%22x%22%3A10.5534935%2C%22y%22%3A517.4663%2C%22width%22%3A21.8993665%2C%22height%22%3A14.930499999999938%2C%22text%22%3A%2240%22%7D%2C%7B%22x%22%3A316.56335%2C%22y%22%3A515.5985%2C%22width%22%3A239.94145000000003%2C%22height%22%3A18.266730000000052%2C%22text%22%3A%22CONTENT%3A%5C%22NO-REFERRER%5C%22)%22%7D%2C%7B%22x%22%3A85.08498%2C%22y%22%3A517.4682%2C%22width%22%3A222.22486%2C%22height%22%3A16.90764999999999%2C%22text%22%3A%22META(NAME%3A%5C%22REFERRER%22%7D%2C%7B%22x%22%3A87.41699%2C%22y%22%3A549.9181%2C%22width%22%3A119.5857%2C%22height%22%3A20.80709999999999%2C%22text%22%3A%221%2F-%E7%BD%91%E7%AB%99%E9%AA%8C%E8%AF%81%22%7D%2C%7B%22x%22%3A10.789571%2C%22y%22%3A551.33453%2C%22width%22%3A20.615006%2C%22height%22%3A16.507470000000012%2C%22text%22%3A%2241%22%7D%2C%7B%22x%22%3A578.9533%2C%22y%22%3A583.4603%2C%22width%22%3A145.82600000000002%2C%22height%22%3A21.09590000000003%2C%22text%22%3A%22%7B%7D%2C%7BCACHE%3AT%22%7D%2C%7B%22x%22%3A10.343062%2C%22y%22%3A584.55396%2C%22width%22%3A22.470257999999998%2C%22height%22%3A17.64444000000003%2C%22text%22%3A%2242%22%7D%2C%7B%22x%22%3A90.01297%2C%22y%22%3A584.47363%2C%22width%22%3A465.55183%2C%22height%22%3A21.4826700000001%2C%22text%22%3A%22!-PARTIAL('INCLUDES%2FHEAD%2FSITE_VERIFICATION'%2C)%22%7D%2C%7B%22x%22%3A9.442447%2C%22y%22%3A617.85913%2C%22width%22%3A22.36164%2C%22height%22%3A17.94966999999997%2C%22text%22%3A%2243%22%7D%2C%7B%22x%22%3A86.8445%2C%22y%22%3A651.56116%2C%22width%22%3A77.11004000000001%2C%22height%22%3A21.326239999999984%2C%22text%22%3A%22%2F%2F-%20PWA%22%7D%2C%7B%22x%22%3A8.969915%2C%22y%22%3A654.54565%2C%22width%22%3A22.803205%2C%22height%22%3A15.96614999999997%2C%22text%22%3A%2244%22%7D%2C%7B%22x%22%3A85.775345%2C%22y%22%3A685.8486%2C%22width%22%3A23.562785000000005%2C%22height%22%3A21.025199999999927%2C%22text%22%3A%22IF%22%7D%2C%7B%22x%22%3A210.62772%2C%22y%22%3A686.67395%2C%22width%22%3A248.19774999999998%2C%22height%22%3A20.846949999999993%2C%22text%22%3A%22OWA%20%26%26%20THEME.PWA.ENABLE)%22%7D%2C%7B%22x%22%3A10.0681305%2C%22y%22%3A687.3756%2C%22width%22%3A22.067497499999995%2C%22height%22%3A17.468700000000013%2C%22text%22%3A%2245%22%7D%2C%7B%22x%22%3A126.07271%2C%22y%22%3A688.7352%2C%22width%22%3A98.41910999999999%2C%22height%22%3A16.9615%2C%22text%22%3A%22(THEME.PWA%22%7D%2C%7B%22x%22%3A10.498338%2C%22y%22%3A721.75226%2C%22width%22%3A20.824231%2C%22height%22%3A16.728700000000003%2C%22text%22%3A%2246%22%7D%2C%7B%22x%22%3A118.01935%2C%22y%22%3A719.61957%2C%22width%22%3A531.8865499999999%2C%22height%22%3A25.62683000000004%2C%22text%22%3A%22!-PARTIAL('INCLUDES%2FHEAD%2FPWA'%2C%20%7B%7D%2C%20%7BCACHE%3A%20TRUE%7D)%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%232d2a2e%22%2C%22id%22%3A%22u651955ce%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u30a773cb\" id=\"u30a773cb\"><span data-lake-id=\"ueb656cff\" id=\"ueb656cff\">​</span><br></p><h1 data-lake-id=\"X6P2n\" id=\"X6P2n\"><strong><span data-lake-id=\"u2394300d\" id=\"u2394300d\" style=\"color: rgb(0, 0, 0)\">三、github actions自动更新</span></strong></h1><p data-lake-id=\"ub90a52b6\" id=\"ub90a52b6\"><br></p><p data-lake-id=\"u0927227f\" id=\"u0927227f\"><span data-lake-id=\"u69738972\" id=\"u69738972\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓</span><strong><span data-lake-id=\"ub320cab6\" id=\"ub320cab6\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">（用来存放hexo源码）</span></strong></p><p data-lake-id=\"u90956d13\" id=\"u90956d13\"><strong><span data-lake-id=\"u2847b498\" id=\"u2847b498\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">注意</span></strong><span data-lake-id=\"ud9f3a1b0\" id=\"ud9f3a1b0\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 </span><span data-lake-id=\"u09c4b6cb\" id=\"u09c4b6cb\" class=\"lake-fontsize-11\" style=\"color: rgb(10, 191, 91); background-color: rgb(243, 245, 249)\">.git</span><span data-lake-id=\"u179d8653\" id=\"u179d8653\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"> 文件夹给删掉</span></p><p data-lake-id=\"u51a1643e\" id=\"u51a1643e\"><span data-lake-id=\"u343d81f0\" id=\"u343d81f0\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22git%22%2C%22code%22%3A%22git%20init%5Cngit%20add%20.%5Cngit%20commit%20-m%20%5C%22first%20commit%5C%22%5Cngit%20remote%20add%20origin%20https%3A%2F%2Fgithub.com%2Fyichen115%2Fblog.git%5Cngit%20push%20-u%20origin%20master%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22RBavs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua34c3477\" id=\"ua34c3477\"><span data-lake-id=\"ueb4b5973\" id=\"ueb4b5973\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">去 github 的 settings 创建一个 token </span><span data-lake-id=\"u66198b33\" id=\"u66198b33\" class=\"lake-fontsize-11\" style=\"color: #CF1322\">（ps:个人中心的设置，非项目的设置）</span></p><p data-lake-id=\"uf2700179\" id=\"uf2700179\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png%22%2C%22taskId%22%3A%22uc2174048-c4a7-45e5-8b7e-a72c318831b%22%2C%22clientId%22%3A%22udcfe64c5-982a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A89765%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1080%2C%22originHeight%22%3A390%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22EXPLORE%20PULL%20REQUESTS%20ISSUES%20MARKETPLACE%20SIGNED%20IN%20AS%20YICHEN115%20SETTINGS%20DEVELOPER%20SETTINGS%20WORKING%20FROM%20HO...%20PERSONAL%20ACCESS%20TOKENS%20REVOKE%20ALL%20GENERATE%20NEW%20TOKEN%20GITHUB%20APPS%20YOUR%20PROFILE%20YOUR%20REPOSITORIES%20OAUTH%20APPS%20TOKENS%20YOU%20HAVE%20GENERATED%20THAT%20CAN%20BE%20USED%20TO%20ACCESS%20THE%20GITHUB%20API.%20YOUR%20PROJECTS%20PERSONAL%20ACCESS%20TOKENS%20YOUR%20STARS%20YUQUEBLOGREPO%20LAST%20USED%20WITHIN%20THE%20LAST%20WEEK%20DELETE%20YOUR%20GISTS%20PERSONAL%20ACCESS%20TDKENS%20FUNCION%20FKE%20ORFFNARY%20OAUTH%20ACCESS%20TOKERS%20THEY%20%20CAN%20BE%20USED%20OFA%20PASWORD%20GITTPS%2C%20USED%20TO%20AUTHENTICATE%20TO%20THE%20APL%20OVER%20BASIC%20AUTHENTICATION.%20UPGRADE%20FEATURE%20PREVIEW%20HELP%20SETTINGS%20CONTACT%20GITHUB%20PRICING%20API%20TRAINING%20BLOG%20ABOUT%202020%20GITHUB%2CINC.%20INC.%20TERMS%20PRIVACY%20SECURITY%20STATUS%20HELP%20SIGN%20OUT%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A340.31195%2C%22y%22%3A10.532586%2C%22width%22%3A44.31088%2C%22height%22%3A13.380522999999998%2C%22text%22%3A%22EXPLORE%22%7D%2C%7B%22x%22%3A128.82074%2C%22y%22%3A10.820962%2C%22width%22%3A121.64926%2C%22height%22%3A12.148299%2C%22text%22%3A%22PULL%20REQUESTS%20ISSUES%22%7D%2C%7B%22x%22%3A258.06015%2C%22y%22%3A11.260181%2C%22width%22%3A74.01516999999996%2C%22height%22%3A12.180327000000002%2C%22text%22%3A%22MARKETPLACE%22%7D%2C%7B%22x%22%3A922.57874%2C%22y%22%3A42.882572%2C%22width%22%3A123.95485999999994%2C%22height%22%3A15.181045999999995%2C%22text%22%3A%22SIGNED%20IN%20AS%20YICHEN115%22%7D%2C%7B%22x%22%3A12.491953%2C%22y%22%3A56.045197%2C%22width%22%3A45.605363999999994%2C%22height%22%3A13.582112999999993%2C%22text%22%3A%22SETTINGS%22%7D%2C%7B%22x%22%3A72.981445%2C%22y%22%3A56.444122%2C%22width%22%3A101.591695%2C%22height%22%3A12.415187999999993%2C%22text%22%3A%22DEVELOPER%20SETTINGS%22%7D%2C%7B%22x%22%3A955.05725%2C%22y%22%3A80.95284%2C%22width%22%3A89.97214999999994%2C%22height%22%3A12.496775%2C%22text%22%3A%22WORKING%20FROM%20HO...%22%7D%2C%7B%22x%22%3A225.61583%2C%22y%22%3A109.55498%2C%22width%22%3A176.99901000000003%2C%22height%22%3A15.90549%2C%22text%22%3A%22PERSONAL%20ACCESS%20TOKENS%22%7D%2C%7B%22x%22%3A804.8359%2C%22y%22%3A110.531235%2C%22width%22%3A50.62942999999996%2C%22height%22%3A11.465505000000007%2C%22text%22%3A%22REVOKE%20ALL%22%7D%2C%7B%22x%22%3A682.0661%2C%22y%22%3A111.85803%2C%22width%22%3A96.07529999999997%2C%22height%22%3A9.607339999999994%2C%22text%22%3A%22GENERATE%20NEW%20TOKEN%22%7D%2C%7B%22x%22%3A26.855066%2C%22y%22%3A113.60848%2C%22width%22%3A72.79746800000001%2C%22height%22%3A13.396135999999998%2C%22text%22%3A%22GITHUB%20APPS%22%7D%2C%7B%22x%22%3A924.27014%2C%22y%22%3A119.418434%2C%22width%22%3A63.235900000000015%2C%22height%22%3A13.444995999999989%2C%22text%22%3A%22YOUR%20PROFILE%22%7D%2C%7B%22x%22%3A923.4271%2C%22y%22%3A146.38515%2C%22width%22%3A93.1526%2C%22height%22%3A11.38585999999998%2C%22text%22%3A%22YOUR%20REPOSITORIES%22%7D%2C%7B%22x%22%3A27.565912%2C%22y%22%3A146.62297%2C%22width%22%3A68.080084%2C%22height%22%3A13.499929999999978%2C%22text%22%3A%22OAUTH%20APPS%22%7D%2C%7B%22x%22%3A225.0426%2C%22y%22%3A153.02647%2C%22width%22%3A380.5684%2C%22height%22%3A14.015530000000012%2C%22text%22%3A%22TOKENS%20YOU%20HAVE%20GENERATED%20THAT%20CAN%20BE%20USED%20TO%20ACCESS%20THE%20GITHUB%20API.%22%7D%2C%7B%22x%22%3A923.6618%2C%22y%22%3A170.72426%2C%22width%22%3A71.92600000000004%2C%22height%22%3A12.526580000000024%2C%22text%22%3A%22YOUR%20PROJECTS%22%7D%2C%7B%22x%22%3A29.503292%2C%22y%22%3A180.95288%2C%22width%22%3A123.032608%2C%22height%22%3A11.580479999999994%2C%22text%22%3A%22PERSONAL%20ACCESS%20TOKENS%22%7D%2C%7B%22x%22%3A924.1458%2C%22y%22%3A195.55441%2C%22width%22%3A53.773000000000025%2C%22height%22%3A12.14667%2C%22text%22%3A%22YOUR%20STARS%22%7D%2C%7B%22x%22%3A233.74767%2C%22y%22%3A196.93956%2C%22width%22%3A98.68800000000002%2C%22height%22%3A13.975770000000011%2C%22text%22%3A%22YUQUEBLOGREPO%22%7D%2C%7B%22x%22%3A653.1325%2C%22y%22%3A197.82907%2C%22width%22%3A135.70434999999998%2C%22height%22%3A10.651049999999998%2C%22text%22%3A%22LAST%20USED%20WITHIN%20THE%20LAST%20WEEK%22%7D%2C%7B%22x%22%3A812.6588%2C%22y%22%3A199.5069%2C%22width%22%3A32.82857000000001%2C%22height%22%3A10.445889999999991%2C%22text%22%3A%22DELETE%22%7D%2C%7B%22x%22%3A924.0079%2C%22y%22%3A220.82318%2C%22width%22%3A53.33567000000005%2C%22height%22%3A12.467099999999988%2C%22text%22%3A%22YOUR%20GISTS%22%7D%2C%7B%22x%22%3A225.66357%2C%22y%22%3A241.2401%2C%22width%22%3A630.0311899999999%2C%22height%22%3A13.656599999999997%2C%22text%22%3A%22PERSONAL%20ACCESS%20TDKENS%20FUNCION%20FKE%20ORFFNARY%20OAUTH%20ACCESS%20TOKERS%20THEY%20%20CAN%20BE%20USED%20OFA%20PASWORD%20GITTPS%2C%22%7D%2C%7B%22x%22%3A225.40388%2C%22y%22%3A258.63342%2C%22width%22%3A269.04142%2C%22height%22%3A12.478279999999984%2C%22text%22%3A%22USED%20TO%20AUTHENTICATE%20TO%20THE%20APL%20OVER%20BASIC%20AUTHENTICATION.%22%7D%2C%7B%22x%22%3A923.07513%2C%22y%22%3A260.46143%2C%22width%22%3A50.484770000000026%2C%22height%22%3A13.51967000000002%2C%22text%22%3A%22UPGRADE%22%7D%2C%7B%22x%22%3A924.3816%2C%22y%22%3A286.0888%2C%22width%22%3A85.86613999999997%2C%22height%22%3A10.964670000000012%2C%22text%22%3A%22FEATURE%20PREVIEW%22%7D%2C%7B%22x%22%3A924.5226%2C%22y%22%3A309.96286%2C%22width%22%3A22.744370000000004%2C%22height%22%3A11.340210000000013%2C%22text%22%3A%22HELP%22%7D%2C%7B%22x%22%3A922.92346%2C%22y%22%3A335.36584%2C%22width%22%3A46.64728000000002%2C%22height%22%3A12.43706000000003%2C%22text%22%3A%22SETTINGS%22%7D%2C%7B%22x%22%3A592.30865%2C%22y%22%3A343.54413%2C%22width%22%3A274.1532000000001%2C%22height%22%3A13.030550000000005%2C%22text%22%3A%22CONTACT%20GITHUB%20PRICING%20API%20TRAINING%20BLOG%20ABOUT%22%7D%2C%7B%22x%22%3A16.414925%2C%22y%22%3A343.58774%2C%22width%22%3A272.276515%2C%22height%22%3A12.835289999999986%2C%22text%22%3A%222020%20GITHUB%2CINC.%20INC.%20TERMS%20PRIVACY%20SECURITY%20STATUS%22%7D%2C%7B%22x%22%3A294.655%2C%22y%22%3A344.87625%2C%22width%22%3A25.446300000000008%2C%22height%22%3A10.750249999999994%2C%22text%22%3A%22HELP%22%7D%2C%7B%22x%22%3A922.93475%2C%22y%22%3A359.95798%2C%22width%22%3A47.95434999999998%2C%22height%22%3A12.75824%2C%22text%22%3A%22SIGN%20OUT%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23fdfdfc%22%2C%22id%22%3A%22uac4e5e7e%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u2e1100f7\" id=\"u2e1100f7\"><br></p><p data-lake-id=\"u94daed52\" id=\"u94daed52\"><span data-lake-id=\"u1b62f7bb\" id=\"u1b62f7bb\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">只勾上这一个即可：</span></p><p data-lake-id=\"u54a8c9f7\" id=\"u54a8c9f7\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png%22%2C%22taskId%22%3A%22ua795b964-947a-41ce-bafa-a59b4ecd46b%22%2C%22clientId%22%3A%22udcfe64c5-982a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A53298%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A746%2C%22originHeight%22%3A627%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22ACCESS%20TOKEN%20NEW%20PERSONAL%20PERSONAL%20ACCESS%20TOKENS%20FUNCTION%20LIKE%20ORDINARY%20OAUTH%20ACCESS%20TOKENS.%20THEY%20CAN%20BE%20USED%20INSTE%20HE%20API%20OVER%20BASIC%20AUTHENTICATION.%20HTTPS%2C%20OR%20CAN%20BE%20USED%20TO%20AUTHENTICATE%20TO%20THE%20APLE%20NOTE%20%E9%9A%8F%E6%84%8F%20WHAT'S%20THIS%20TOKEN%20FOR%3F%20SELECT%20SCOPES%20SCOPES%20DEFINE%20THE%20ACCESS%20FOR%20PERSONAL%20TOKENS.%20READ%20MORE%20ABOUT%20OAUTH%20SCOPES.%20FULL%20CONTROL%20OF%20PRIVATE%20REPOSITORIES%20REPO%20ACCESS%20COMMIT%20STATUS%20REPO%3ASTATUS%20ACCESS%20DEPLOYMENT%20STATUS%20REPO_DEPLOYMENT%20PUBLIC_REPO%20ACCESS%20PUBLIC%20REPOSITORIES%20ACCESS%20REPOSITORY%20INVITATIONS%20REPO%3AINVITE%20READ%20AND%20WRITE%20SECURITY%20EVENTS%20SECURITY_EVENTS%20UPLOAD%20PACKAGES%20TO%20GITHUB%20PACKAGE%20REGISTRY%20WRITE%3APACKAGES%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A224.03285%2C%22y%22%3A10.499924%2C%22width%22%3A172.45503000000002%2C%22height%22%3A23.888309%2C%22text%22%3A%22ACCESS%20TOKEN%22%7D%2C%7B%22x%22%3A24.133041%2C%22y%22%3A10.781886%2C%22width%22%3A187.514179%2C%22height%22%3A27.72255%2C%22text%22%3A%22NEW%20PERSONAL%22%7D%2C%7B%22x%22%3A29.296877%2C%22y%22%3A78.733696%2C%22width%22%3A716.898123%2C%22height%22%3A21.065369000000004%2C%22text%22%3A%22PERSONAL%20ACCESS%20TOKENS%20FUNCTION%20LIKE%20ORDINARY%20OAUTH%20ACCESS%20TOKENS.%20THEY%20CAN%20BE%20USED%20INSTE%22%7D%2C%7B%22x%22%3A379.52063%2C%22y%22%3A106.325836%2C%22width%22%3A249.54637000000002%2C%22height%22%3A18.550174%2C%22text%22%3A%22HE%20API%20OVER%20BASIC%20AUTHENTICATION.%22%7D%2C%7B%22x%22%3A23.870398%2C%22y%22%3A108.2485%2C%22width%22%3A382.277152%2C%22height%22%3A17.388949999999994%2C%22text%22%3A%22HTTPS%2C%20OR%20CAN%20BE%20USED%20TO%20AUTHENTICATE%20TO%20THE%20APLE%22%7D%2C%7B%22x%22%3A24.893906%2C%22y%22%3A155.81058%2C%22width%22%3A40.932164%2C%22height%22%3A14.855160000000012%2C%22text%22%3A%22NOTE%22%7D%2C%7B%22x%22%3A41.39721%2C%22y%22%3A195.3626%2C%22width%22%3A36.43446%2C%22height%22%3A17.295560000000023%2C%22text%22%3A%22%E9%9A%8F%E6%84%8F%22%7D%2C%7B%22x%22%3A24.60575%2C%22y%22%3A235.57658%2C%22width%22%3A151.0557%2C%22height%22%3A13.81171999999998%2C%22text%22%3A%22WHAT'S%20THIS%20TOKEN%20FOR%3F%22%7D%2C%7B%22x%22%3A24.3943%2C%22y%22%3A278.75955%2C%22width%22%3A113.71442%2C%22height%22%3A18.964200000000005%2C%22text%22%3A%22SELECT%20SCOPES%22%7D%2C%7B%22x%22%3A22.859041%2C%22y%22%3A314.0685%2C%22width%22%3A631.5558189999999%2C%22height%22%3A19.67912000000001%2C%22text%22%3A%22SCOPES%20DEFINE%20THE%20ACCESS%20FOR%20PERSONAL%20TOKENS.%20READ%20MORE%20ABOUT%20OAUTH%20SCOPES.%22%7D%2C%7B%22x%22%3A304.21045%2C%22y%22%3A363.89407%2C%22width%22%3A254.20409999999998%2C%22height%22%3A19.057630000000017%2C%22text%22%3A%22FULL%20CONTROL%20OF%20PRIVATE%20REPOSITORIES%22%7D%2C%7B%22x%22%3A66.05949%2C%22y%22%3A368.09244%2C%22width%22%3A35.686580000000006%2C%22height%22%3A12.683760000000007%2C%22text%22%3A%22REPO%22%7D%2C%7B%22x%22%3A304.032%2C%22y%22%3A399.93008%2C%22width%22%3A161.35777000000002%2C%22height%22%3A14.583350000000053%2C%22text%22%3A%22ACCESS%20COMMIT%20STATUS%22%7D%2C%7B%22x%22%3A92.1557%2C%22y%22%3A401.8645%2C%22width%22%3A83.92058%2C%22height%22%3A14.218899999999962%2C%22text%22%3A%22REPO%3ASTATUS%22%7D%2C%7B%22x%22%3A303.4511%2C%22y%22%3A432.71304%2C%22width%22%3A195.44392%2C%22height%22%3A18.450630000000046%2C%22text%22%3A%22ACCESS%20DEPLOYMENT%20STATUS%22%7D%2C%7B%22x%22%3A91.91509%2C%22y%22%3A434.10257%2C%22width%22%3A132.67372999999998%2C%22height%22%3A17.046389999999974%2C%22text%22%3A%22REPO_DEPLOYMENT%22%7D%2C%7B%22x%22%3A90.98081%2C%22y%22%3A467.32852%2C%22width%22%3A90.31532%2C%22height%22%3A20.44677999999999%2C%22text%22%3A%22PUBLIC_REPO%22%7D%2C%7B%22x%22%3A303.69498%2C%22y%22%3A468.6145%2C%22width%22%3A193.7138%2C%22height%22%3A15.417730000000006%2C%22text%22%3A%22ACCESS%20PUBLIC%20REPOSITORIES%22%7D%2C%7B%22x%22%3A303.59692%2C%22y%22%3A503.3049%2C%22width%22%3A213.68243999999999%2C%22height%22%3A14.603500000000054%2C%22text%22%3A%22ACCESS%20REPOSITORY%20INVITATIONS%22%7D%2C%7B%22x%22%3A91.019714%2C%22y%22%3A502.20956%2C%22width%22%3A80.97575600000002%2C%22height%22%3A17.558539999999994%2C%22text%22%3A%22REPO%3AINVITE%22%7D%2C%7B%22x%22%3A303.23303%2C%22y%22%3A534.5108%2C%22width%22%3A230.30023000000006%2C%22height%22%3A18.719100000000026%2C%22text%22%3A%22READ%20AND%20WRITE%20SECURITY%20EVENTS%22%7D%2C%7B%22x%22%3A91.856995%2C%22y%22%3A537.1366%2C%22width%22%3A115.19148500000001%2C%22height%22%3A15.771049999999946%2C%22text%22%3A%22SECURITY_EVENTS%22%7D%2C%7B%22x%22%3A304.5771%2C%22y%22%3A583.34155%2C%22width%22%3A332.2599%2C%22height%22%3A21.39740000000006%2C%22text%22%3A%22UPLOAD%20PACKAGES%20TO%20GITHUB%20PACKAGE%20REGISTRY%22%7D%2C%7B%22x%22%3A66.295204%2C%22y%22%3A585.16174%2C%22width%22%3A115.98544600000001%2C%22height%22%3A16.86139000000003%2C%22text%22%3A%22WRITE%3APACKAGES%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23fefdfc%22%2C%22id%22%3A%22u1e211b98%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ub8af6175\" id=\"ub8af6175\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png%22%2C%22taskId%22%3A%22u4adc989a-ec2a-4dcc-9a1d-66a0017e2b1%22%2C%22clientId%22%3A%22udcfe64c5-982a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A45407%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1015%2C%22originHeight%22%3A445%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22PERSONAL%20ACCESS%20TOKENS%20REVOKE%20ALL%20GENERATE%20NEW%20TOKEN%20TOKENS%20YOU%20HAVE%20GENERATED%20THAT%20CAN%20BE%20USED%20TO%20ACCESS%20THE%20GITHUB%20API.%20MAKE%20SURE%20TO%20COPY%20YOUR%20NEW%20PERSONAL%20ACCESS%20TOKEN%20NOW.%20YOU%20WON'T%20BE%20ABLE%20TO%20SEE%20IT%20AGAIN!%20AFD.%20409C%20DELETE%20YUQUEBLOGREPO%20LAST%20USED%20WITHIN%20THE%20LAST%20WEEK%20DELETE%20PERSOND%20ACCESS%20TOKENS%20UNTION%20THE%20ADINAY%20OAUTH%20ACCERS%20THEYS%20THEY%20%20CAN%20BEUSED%20INSTA%20PASMORD%20FOR%20HTTPS%20B%20USED%20TO%20AUTHENTICATE%20TO%20THE%20API%20OVER%20BASIC%20AUTHENTICATION.%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A28.147943%2C%22y%22%3A31.886696%2C%22width%22%3A263.329077%2C%22height%22%3A24.334784%2C%22text%22%3A%22PERSONAL%20ACCESS%20TOKENS%22%7D%2C%7B%22x%22%3A895.8739%2C%22y%22%3A34.63134%2C%22width%22%3A75.67969999999991%2C%22height%22%3A16.315086%2C%22text%22%3A%22REVOKE%20ALL%22%7D%2C%7B%22x%22%3A711.1865%2C%22y%22%3A35.63834%2C%22width%22%3A144.92085999999995%2C%22height%22%3A14.999943000000002%2C%22text%22%3A%22GENERATE%20NEW%20TOKEN%22%7D%2C%7B%22x%22%3A28.135727%2C%22y%22%3A98.71645%2C%22width%22%3A567.602313%2C%22height%22%3A19.269140000000007%2C%22text%22%3A%22TOKENS%20YOU%20HAVE%20GENERATED%20THAT%20CAN%20BE%20USED%20TO%20ACCESS%20THE%20GITHUB%20API.%22%7D%2C%7B%22x%22%3A49.315517%2C%22y%22%3A175.45636%2C%22width%22%3A726.921483%2C%22height%22%3A17.18848%2C%22text%22%3A%22MAKE%20SURE%20TO%20COPY%20YOUR%20NEW%20PERSONAL%20ACCESS%20TOKEN%20NOW.%20YOU%20WON'T%20BE%20ABLE%20TO%20SEE%20IT%20AGAIN!%22%7D%2C%7B%22x%22%3A68.72302%2C%22y%22%3A260.0326%2C%22width%22%3A36.152834%2C%22height%22%3A15.180020000000013%2C%22text%22%3A%22AFD.%22%7D%2C%7B%22x%22%3A428.90637%2C%22y%22%3A261.03998%2C%22width%22%3A39.63083%2C%22height%22%3A13.934289999999976%2C%22text%22%3A%22409C%22%7D%2C%7B%22x%22%3A908.7247%2C%22y%22%3A263.5557%2C%22width%22%3A47.863500000000045%2C%22height%22%3A13.54946000000001%2C%22text%22%3A%22DELETE%22%7D%2C%7B%22x%22%3A39.677586%2C%22y%22%3A322.89658%2C%22width%22%3A146.322674%2C%22height%22%3A20.230950000000007%2C%22text%22%3A%22YUQUEBLOGREPO%22%7D%2C%7B%22x%22%3A670.5323%2C%22y%22%3A325.32993%2C%22width%22%3A200.23610000000008%2C%22height%22%3A12.510800000000017%2C%22text%22%3A%22LAST%20USED%20WITHIN%20THE%20LAST%20WEEK%22%7D%2C%7B%22x%22%3A907.3516%2C%22y%22%3A327.14923%2C%22width%22%3A49.03690000000006%2C%22height%22%3A14.509220000000028%2C%22text%22%3A%22DELETE%22%7D%2C%7B%22x%22%3A27.982962%2C%22y%22%3A390.6905%2C%22width%22%3A941.8835379999999%2C%22height%22%3A16.646479999999997%2C%22text%22%3A%22PERSOND%20ACCESS%20TOKENS%20UNTION%20THE%20ADINAY%20OAUTH%20ACCERS%20THEYS%20THEY%20%20CAN%20BEUSED%20INSTA%20PASMORD%20FOR%20HTTPS%20B%22%7D%2C%7B%22x%22%3A27.245972%2C%22y%22%3A413.40015%2C%22width%22%3A398.071288%2C%22height%22%3A17.316849999999988%2C%22text%22%3A%22USED%20TO%20AUTHENTICATE%20TO%20THE%20API%20OVER%20BASIC%20AUTHENTICATION.%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23edf2e3%22%2C%22id%22%3A%22u4cbbdb00%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u6be5e2e5\" id=\"u6be5e2e5\"><br></p><p data-lake-id=\"u9415a80c\" id=\"u9415a80c\"><strong><span data-lake-id=\"u51da9f9b\" id=\"u51da9f9b\" class=\"lake-fontsize-11\" style=\"color: #FF4D4F\">生成了 token 之后一定要记下来</span></strong><span data-lake-id=\"ue78e2650\" id=\"ue78e2650\" class=\"lake-fontsize-11\" style=\"color: #FF4D4F\">，再回来就没法看了</span></p><p data-lake-id=\"u7e421076\" id=\"u7e421076\"><span data-lake-id=\"u6fce1fc1\" id=\"u6fce1fc1\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">然后来到刚才创建的私有仓库的 settings</span></p><p data-lake-id=\"ua6bcee18\" id=\"ua6bcee18\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png%22%2C%22taskId%22%3A%22u2e8da352-5627-4745-98cb-0fad22bf7af%22%2C%22clientId%22%3A%22udcfe64c5-982a-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A91140%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1080%2C%22originHeight%22%3A419%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22YICHEN115%2FBLOG%20WATCH%20PRIVATE%20%E5%AE%89%20ETTINGS%20SECURITY%2087%20PULL%20REQUESTS%20INSIGHTS%20PROJECTS%20CODE%20ACTIONS%20ISSUES%20SECRETS%20NEW%20SECRET%20OPTIONS%20MANAGE%20ACCESS%20SECTERETS%20RNIRENTENTVORENT%20THOTED%20%20ENYE%20ENARATOR%20OND%20OND%20ON%20USE%20THESE%20SECRETS%20IN%20A%20WORKFLOW.%20SECURITY%26ANALYSIS%20SECRETS%20ARE%20NOT%20PASSED%20TO%20WORKFLOWS%20THAT%20ARE%20TRIGGERED%20BY%20A%20PULL%20REQUEST%20FROM%20A%20FORK.LEARN%20MORE.%20BRANCHES%20WEBHOOKS%20%E6%97%A5%20GH_REF%20UPDATED%201%20HOUR%20AGO%20UPDATE%20REMOVE%20NOTIFICATIONS%20INTEGRATIONS%20GH%20TOKEN%20UPDATE%20UPDATED%201%20HOUR%20AGO%20REMOVE%20DEPLOY%20KEYS%20SECRETS%20ACTIONS%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A29.432669%2C%22y%22%3A12.090079%2C%22width%22%3A124.723761%2C%22height%22%3A19.052457%2C%22text%22%3A%22YICHEN115%2FBLOG%22%7D%2C%7B%22x%22%3A874.3037%2C%22y%22%3A15.253976%2C%22width%22%3A28.967399999999998%2C%22height%22%3A10.108054000000001%2C%22text%22%3A%22WATCH%22%7D%2C%7B%22x%22%3A163.01399%2C%22y%22%3A16.63714%2C%22width%22%3A33.16128999999998%2C%22height%22%3A9.316714000000001%2C%22text%22%3A%22PRIVATE%22%7D%2C%7B%22x%22%3A608.5238%2C%22y%22%3A56.60902%2C%22width%22%3A58.28639999999996%2C%22height%22%3A14.606799999999993%2C%22text%22%3A%22%E5%AE%89%20ETTINGS%22%7D%2C%7B%22x%22%3A457.10013%2C%22y%22%3A57.214718%2C%22width%22%3A42.074400000000026%2C%22height%22%3A13.747318%2C%22text%22%3A%22SECURITY%22%7D%2C%7B%22x%22%3A167.94685%2C%22y%22%3A57.25279%2C%22width%22%3A84.57066999999998%2C%22height%22%3A13.837466%2C%22text%22%3A%2287%20PULL%20REQUESTS%22%7D%2C%7B%22x%22%3A537.77637%2C%22y%22%3A57.899563%2C%22width%22%3A44.020029999999906%2C%22height%22%3A14.208536999999993%2C%22text%22%3A%22INSIGHTS%22%7D%2C%7B%22x%22%3A375.39102%2C%22y%22%3A58.18681%2C%22width%22%3A41.250309999999956%2C%22height%22%3A12.271039999999992%2C%22text%22%3A%22PROJECTS%22%7D%2C%7B%22x%22%3A46.956844%2C%22y%22%3A59.08286%2C%22width%22%3A28.113356000000003%2C%22height%22%3A11.009259999999998%2C%22text%22%3A%22CODE%22%7D%2C%7B%22x%22%3A295.22098%2C%22y%22%3A59.358532%2C%22width%22%3A38.59541999999999%2C%22height%22%3A10.785688000000007%2C%22text%22%3A%22ACTIONS%22%7D%2C%7B%22x%22%3A113.776566%2C%22y%22%3A59.85134%2C%22width%22%3A31.772043999999994%2C%22height%22%3A10.188970000000005%2C%22text%22%3A%22ISSUES%22%7D%2C%7B%22x%22%3A333.21964%2C%22y%22%3A117.01535%2C%22width%22%3A61.81352999999996%2C%22height%22%3A15.708219999999997%2C%22text%22%3A%22SECRETS%22%7D%2C%7B%22x%22%3A981.9227%2C%22y%22%3A118.79901%2C%22width%22%3A59.51380000000006%2C%22height%22%3A10.294969999999992%2C%22text%22%3A%22NEW%20SECRET%22%7D%2C%7B%22x%22%3A97.61157%2C%22y%22%3A120.104324%2C%22width%22%3A42.24960999999999%2C%22height%22%3A11.161435999999995%2C%22text%22%3A%22OPTIONS%22%7D%2C%7B%22x%22%3A97.807625%2C%22y%22%3A150.19899%2C%22width%22%3A77.10520500000001%2C%22height%22%3A11.275849999999991%2C%22text%22%3A%22MANAGE%20ACCESS%22%7D%2C%7B%22x%22%3A331.57886%2C%22y%22%3A159.15286%2C%22width%22%3A721.4930399999998%2C%22height%22%3A15.005529999999993%2C%22text%22%3A%22SECTERETS%20RNIRENTENTVORENT%20THOTED%20%20ENYE%20ENARATOR%20OND%20OND%20ON%22%7D%2C%7B%22x%22%3A332.26456%2C%22y%22%3A177.7532%2C%22width%22%3A159.42519999999996%2C%22height%22%3A11.144900000000007%2C%22text%22%3A%22USE%20THESE%20SECRETS%20IN%20A%20WORKFLOW.%22%7D%2C%7B%22x%22%3A97.88029%2C%22y%22%3A179.15977%2C%22width%22%3A95.20917%2C%22height%22%3A12.39443%2C%22text%22%3A%22SECURITY%26ANALYSIS%22%7D%2C%7B%22x%22%3A332.59537%2C%22y%22%3A201.3925%2C%22width%22%3A475.10123%2C%22height%22%3A12.635999999999996%2C%22text%22%3A%22SECRETS%20ARE%20NOT%20PASSED%20TO%20WORKFLOWS%20THAT%20ARE%20TRIGGERED%20BY%20A%20PULL%20REQUEST%20FROM%20A%20FORK.LEARN%20MORE.%22%7D%2C%7B%22x%22%3A98.03731%2C%22y%22%3A209.153%2C%22width%22%3A47.66378999999999%2C%22height%22%3A11.413470000000018%2C%22text%22%3A%22BRANCHES%22%7D%2C%7B%22x%22%3A97.59226%2C%22y%22%3A239.19525%2C%22width%22%3A54.21531%2C%22height%22%3A11.338760000000008%2C%22text%22%3A%22WEBHOOKS%22%7D%2C%7B%22x%22%3A348.1923%2C%22y%22%3A250.15143%2C%22width%22%3A11.757159999999999%2C%22height%22%3A15.13594999999998%2C%22text%22%3A%22%E6%97%A5%22%7D%2C%7B%22x%22%3A370.2659%2C%22y%22%3A252.32515%2C%22width%22%3A39.968140000000005%2C%22height%22%3A12.09471000000002%2C%22text%22%3A%22GH_REF%22%7D%2C%7B%22x%22%3A717.3518%2C%22y%22%3A253.86269%2C%22width%22%3A102.74079999999992%2C%22height%22%3A12.354780000000005%2C%22text%22%3A%22UPDATED%201%20HOUR%20AGO%22%7D%2C%7B%22x%22%3A934.60803%2C%22y%22%3A253.94753%2C%22width%22%3A34.63247000000001%2C%22height%22%3A9.854689999999977%2C%22text%22%3A%22UPDATE%22%7D%2C%7B%22x%22%3A993.75604%2C%22y%22%3A255.19232%2C%22width%22%3A36.863059999999905%2C%22height%22%3A8.327380000000005%2C%22text%22%3A%22REMOVE%22%7D%2C%7B%22x%22%3A97.47239%2C%22y%22%3A267.79825%2C%22width%22%3A65.77398000000001%2C%22height%22%3A12.560420000000022%2C%22text%22%3A%22NOTIFICATIONS%22%7D%2C%7B%22x%22%3A97.3702%2C%22y%22%3A298.66333%2C%22width%22%3A62.313779999999994%2C%22height%22%3A12.991300000000024%2C%22text%22%3A%22INTEGRATIONS%22%7D%2C%7B%22x%22%3A370.97086%2C%22y%22%3A299.80536%2C%22width%22%3A52.49856%2C%22height%22%3A11.873170000000016%2C%22text%22%3A%22GH%20TOKEN%22%7D%2C%7B%22x%22%3A933.8464%2C%22y%22%3A300.49866%2C%22width%22%3A34.06533999999999%2C%22height%22%3A11.074340000000007%2C%22text%22%3A%22UPDATE%22%7D%2C%7B%22x%22%3A717.93475%2C%22y%22%3A300.81372%2C%22width%22%3A101.17274999999995%2C%22height%22%3A12.847199999999987%2C%22text%22%3A%22UPDATED%201%20HOUR%20AGO%22%7D%2C%7B%22x%22%3A994.3808%2C%22y%22%3A302.6291%2C%22width%22%3A36.045799999999986%2C%22height%22%3A8.304520000000025%2C%22text%22%3A%22REMOVE%22%7D%2C%7B%22x%22%3A96.18858%2C%22y%22%3A328.1415%2C%22width%22%3A64.4103%2C%22height%22%3A15.292550000000006%2C%22text%22%3A%22DEPLOY%20KEYS%22%7D%2C%7B%22x%22%3A97.1588%2C%22y%22%3A358.4401%2C%22width%22%3A39.98818999999999%2C%22height%22%3A13.513000000000034%2C%22text%22%3A%22SECRETS%22%7D%2C%7B%22x%22%3A97.93313%2C%22y%22%3A390.48065%2C%22width%22%3A39.54542000000001%2C%22height%22%3A11.00631999999996%2C%22text%22%3A%22ACTIONS%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23dbcbb9%22%2C%22id%22%3A%22u71d114fa%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"uf117f76a\" id=\"uf117f76a\"><br></p><p data-lake-id=\"u5a2ba37f\" id=\"u5a2ba37f\"><span data-lake-id=\"uefc76cbe\" id=\"uefc76cbe\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">添加三个 secret</span></p><p data-lake-id=\"u2d63d190\" id=\"u2d63d190\"><strong><span data-lake-id=\"u18cf7244\" id=\"u18cf7244\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">GH_REF</span></strong><span data-lake-id=\"u24e307cc\" id=\"u24e307cc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"> 是你博客的仓库地址 github.com/******/******.github.io</span></p><p data-lake-id=\"ud6ad2ded\" id=\"ud6ad2ded\"><span data-lake-id=\"ua3900e2a\" id=\"ua3900e2a\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">注意去掉前面 https://</span></p><p data-lake-id=\"ud75b6a6c\" id=\"ud75b6a6c\"><strong><span data-lake-id=\"uf9936f28\" id=\"uf9936f28\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">GE_TOKEN</span></strong><span data-lake-id=\"u2880c96f\" id=\"u2880c96f\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\"> 是刚才生成的 token</span></p><p data-lake-id=\"u4f74441c\" id=\"u4f74441c\"><span data-lake-id=\"u395e02df\" id=\"u395e02df\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">然后来到 actions，点击 set up a workflow yourself</span></p><p data-lake-id=\"ub5c52b88\" id=\"ub5c52b88\"><strong><span data-lake-id=\"uf0c72768\" id=\"uf0c72768\">HEXO_DEPLOY_PRI  </span></strong><span data-lake-id=\"u9238bd74\" id=\"u9238bd74\">是新增的ssh 密钥</span></p><p data-lake-id=\"ua4fec53b\" id=\"ua4fec53b\"><span data-lake-id=\"ub80c47af\" id=\"ub80c47af\" class=\"lake-fontsize-12\" style=\"color: rgb(64, 64, 64)\">在命令行中输入：</span></p><blockquote data-lake-id=\"u947bfad1\" id=\"u947bfad1\"><p data-lake-id=\"ud3340961\" id=\"ud3340961\"><span data-lake-id=\"u7352de1e\" id=\"u7352de1e\" class=\"lake-fontsize-12\" style=\"color: rgb(64, 64, 64)\">​</span><span data-lake-id=\"ufe8be3e7\" id=\"ufe8be3e7\" class=\"lake-fontsize-9\" style=\"color: rgb(199, 37, 78); background-color: rgb(242, 242, 242)\">ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</span></p></blockquote><p data-lake-id=\"uf8a9e3f2\" id=\"uf8a9e3f2\"><span data-lake-id=\"u518295a3\" id=\"u518295a3\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">备注：</span></p><p data-lake-id=\"u3f583f38\" id=\"u3f583f38\"><span data-lake-id=\"ub632e0b9\" id=\"ub632e0b9\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">同时生成的公钥，要放到Hexo 生成page的项目的公钥下面</span></p><p data-lake-id=\"u39b8ff56\" id=\"u39b8ff56\"><span data-lake-id=\"u66a3611b\" id=\"u66a3611b\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page项目））</span></p><p data-lake-id=\"u5d38b53e\" id=\"u5d38b53e\"><span data-lake-id=\"u38e73669\" id=\"u38e73669\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><p data-lake-id=\"u127a2d9d\" id=\"u127a2d9d\"><span data-lake-id=\"u171a2c17\" id=\"u171a2c17\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">编辑内容如下：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22yaml%22%2C%22code%22%3A%22name%3A%20Hexo%20Deploy%5Cn%5Cnon%3A%5Cn%20%20workflow_dispatch%3A%5Cn%20%20push%3A%5Cn%20%20%20%20branches%3A%5Cn%20%20%20%20%20%20-%20master%5Cn%20%20schedule%3A%5Cn%20%20%20%20-%20cron%3A%20'0%2021%20*%20*%200'%20%23%20%E6%AF%8F%E5%91%A8%E6%97%A5%20UTC%20%E6%97%B6%E9%97%B4%2021%3A00%2C%20%E5%8C%97%E4%BA%AC%E6%97%B6%E9%97%B4%E5%91%A8%E4%B8%80%E5%87%8C%E6%99%A85%E7%82%B9%5Cn%5Cnjobs%3A%5Cn%20%20build%3A%5Cn%20%20%20%20runs-on%3A%20ubuntu-latest%5Cn%5Cn%20%20%20%20steps%3A%5Cn%20%20%20%20%20%20-%20name%3A%20Checkout%20source%20%20%23%20%E5%B0%86%E4%BB%93%E5%BA%93%E5%86%85master%E5%88%86%E6%94%AF%E7%9A%84%E5%86%85%E5%AE%B9%E4%B8%8B%E8%BD%BD%E5%88%B0%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%951%5Cn%20%20%20%20%20%20%20%20uses%3A%20actions%2Fcheckout%40v2%20%23%20%E8%84%9A%E6%9C%AC%E6%9D%A5%E8%87%AA%20https%3A%2F%2Fgithub.com%2Factions%2Fcheckout%5Cn%20%20%20%20%20%20%20%20with%3A%5Cn%20%20%20%20%20%20%20%20%20%20ref%3A%20master%5Cn%20%20%20%20%20%20%20%20%20%20submodules%3A%20'true'%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Setup%20Node%5Cn%20%20%20%20%20%20%20%20uses%3A%20actions%2Fsetup-node%40v1%5Cn%20%20%20%20%20%20%20%20with%3A%5Cn%20%20%20%20%20%20%20%20%20%20node-version%3A%20'14.x'%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Checkout%20Submodules%5Cn%20%20%20%20%20%20%20%20run%3A%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20auth_header%3D%5C%22%24(git%20config%20--local%20--get%20http.https%3A%2F%2Fgithub.com%2F.extraheader)%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20git%20submodule%20sync%20--recursive%5Cn%20%20%20%20%20%20%20%20%20%20git%20-c%20%5C%22http.extraheader%3D%24auth_header%5C%22%20-c%20protocol.version%3D2%20submodule%20update%20--init%20--force%20--recursive%20--depth%3D1%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Setup%20Hexo%5Cn%20%20%20%20%20%20%20%20env%3A%5Cn%20%20%20%20%20%20%20%20%20%20HEXO_DEPLOY_PRI%3A%20%24%7B%7B%20secrets.HEXO_DEPLOY_PRI%20%7D%7D%5Cn%20%20%20%20%20%20%20%20run%3A%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20mkdir%20-p%20~%2F.ssh%2F%5Cn%20%20%20%20%20%20%20%20%20%20echo%20%5C%22%24HEXO_DEPLOY_PRI%5C%22%20%3E%20~%2F.ssh%2Fid_rsa%5Cn%20%20%20%20%20%20%20%20%20%20chmod%20700%20~%2F.ssh%5Cn%20%20%20%20%20%20%20%20%20%20chmod%20600%20~%2F.ssh%2Fid_rsa%5Cn%20%20%20%20%20%20%20%20%20%20ssh-keyscan%20github.com%20%3E%3E%20~%2F.ssh%2Fknown_hosts%5Cn%20%20%20%20%20%20%20%20%20%20git%20config%20--global%20user.email%20%5C%22xianrenqh%40163.com%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20git%20config%20--global%20user.name%20%5C%22xianrenqh%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20npm%20install%20hexo-cli%20-g%5Cn%20%20%20%20%20%20%20%20%20%20npm%20install%20yuque-hexo%20-g%5Cn%20%20%20%20%20%20%20%20%20%20yuque-hexo%20clean%5Cn%20%20%20%20%20%20%20%20%20%20yuque-hexo%20sync%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Setup%20Yuque%20%23%E6%9B%B4%E6%96%B0yuque%20%E6%8B%89%E5%8F%96%E7%9A%84%E6%96%87%E7%AB%A0%E5%88%B0GitHub%E4%BB%93%E5%BA%93%5Cn%20%20%20%20%20%20%20%20run%3A%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20git%20config%20--global%20user.email%20%5C%22xianrenqh%40163.com%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20git%20config%20--global%20user.name%20%5C%22xianrenqh%5C%22%5Cn%20%20%20%20%20%20%20%20%20%20git%20add%20.%5Cn%20%20%20%20%20%20%20%20%20%20git%20commit%20-m%20%5C%22Refresh%20yuque%20json%5C%22%20-a%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Push%20Yuque%20%23%E6%8E%A8%E9%80%81%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84yuque%20json%5Cn%20%20%20%20%20%20%20%20uses%3A%20ad-m%2Fgithub-push-action%40master%5Cn%20%20%20%20%20%20%20%20with%3A%5Cn%20%20%20%20%20%20%20%20%20%20github_token%3A%20%24%7B%7B%20secrets.GE_TOKEN%20%7D%7D%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Cache%20Hexo%5Cn%20%20%20%20%20%20%20%20uses%3A%20actions%2Fcache%40v1%5Cn%20%20%20%20%20%20%20%20id%3A%20cache%5Cn%20%20%20%20%20%20%20%20with%3A%5Cn%20%20%20%20%20%20%20%20%20%20path%3A%20node_modules%5Cn%20%20%20%20%20%20%20%20%20%20key%3A%20%24%7B%7Brunner.OS%7D%7D-%24%7B%7BhashFiles('**%2Fpackage-lock.json')%7D%7D%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Install%20dependencies%5Cn%20%20%20%20%20%20%20%20if%3A%20steps.cache.outputs.cache-hit%20!%3D%20'true'%5Cn%20%20%20%20%20%20%20%20run%3A%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20npm%20install%20--save%5Cn%5Cn%20%20%20%20%20%20-%20name%3A%20Hexo%20Deploy%5Cn%20%20%20%20%20%20%20%20run%3A%20%7C%5Cn%20%20%20%20%20%20%20%20%20%20hexo%20clean%5Cn%20%20%20%20%20%20%20%20%20%20hexo%20generate%5Cn%20%20%20%20%20%20%20%20%20%20hexo%20deploy%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22HTFWI%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ue32831ef\" id=\"ue32831ef\"><span data-lake-id=\"u12d62afc\" id=\"u12d62afc\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐</span></p><p data-lake-id=\"u3d86f5ef\" id=\"u3d86f5ef\"><span data-lake-id=\"uba6b1837\" id=\"uba6b1837\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新</span></p><p data-lake-id=\"uaf16d287\" id=\"uaf16d287\"><span data-lake-id=\"uea4ff839\" id=\"uea4ff839\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">​</span><br></p><h1 data-lake-id=\"s10jE\" id=\"s10jE\"><span data-lake-id=\"u7f840e3d\" id=\"u7f840e3d\" style=\"color: rgb(51, 51, 51)\">四、配置ServerLess云函数</span></h1><card type=\"block\" name=\"bookmarklink\" value=\"data:%7B%22mode%22%3A%22card%22%2C%22src%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fposts%2F3c85ac91.html%22%2C%22text%22%3A%22Github%20Action%20%E4%BD%BF%E7%94%A8%E4%BA%91%E5%87%BD%E6%95%B0%E8%B0%83%E5%BA%A6%E6%9C%8D%E5%8A%A1%22%2C%22detail%22%3A%7B%22icon%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fimg%2Ffavicon.png%22%2C%22image%22%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhAQABAIAAAAAAAP%2F%2F%2FyH5BAEAAAAALAAAAAABAAEAAAIBRAA7%22%2C%22title%22%3A%22Github%20Action%20%E4%BD%BF%E7%94%A8%E4%BA%91%E5%87%BD%E6%95%B0%E8%B0%83%E5%BA%A6%E6%9C%8D%E5%8A%A1%20%7C%20%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22belong%22%3A%22%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22belong_url%22%3Anull%2C%22desc%22%3A%22%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%20GitHubAction%20%E7%9A%84%20workflow_dispatch%20%E8%A7%A6%E5%8F%91%E5%99%A8%E5%9C%A8%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%9A%84%20yml%20%E6%96%87%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%9A%84%20on%20%E4%B8%AD%EF%BC%8C%E6%8F%90%E4%BE%9B%20workflow_dispatch%20%E8%A7%A6%E5%8F%91%E5%99%A8%20%E3%80%90%E5%BF%85%E9%A1%BB%E3%80%91%20123456789%23%E9%80%9A%E8%BF%87%20workflow_dispatch%20%E8%A7%A6%E5%8F%91%EF%BC%8Ccron%E4%BB%BB%E5%8A%A1%E9%83%A8%E7%BD%B2%E5%9C%A8%E4%BA%91%E5%87%BD%E6%95%B0name%3A%20%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%90%8D%22%2C%22url%22%3A%22https%3A%2F%2Fxiaohuihui.cc%2Fposts%2F3c85ac91.html%22%2C%22extra%22%3A%7B%7D%2C%22_serializer%22%3A%22web.editor_link_detail%22%7D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22AArGN%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><h1 data-lake-id=\"Elum4\" id=\"Elum4\"><span data-lake-id=\"u94215a56\" id=\"u94215a56\">五、发布博文到服务器（vps）上</span></h1><p data-lake-id=\"ucf82d819\" id=\"ucf82d819\"><span data-lake-id=\"u95b8b705\" id=\"u95b8b705\" class=\"lake-fontsize-11\">小灰灰使用的是 webhooks的功能同步推送到服务器上的</span></p><p data-lake-id=\"ucf95d013\" id=\"ucf95d013\"><span data-lake-id=\"u61a0dd40\" id=\"u61a0dd40\" class=\"lake-fontsize-11\">​</span><br></p><h1 data-lake-id=\"RqhEX\" id=\"RqhEX\"><span data-lake-id=\"u3dd09eef\" id=\"u3dd09eef\">⑥、PS：</span></h1><p data-lake-id=\"u04f0372e\" id=\"u04f0372e\"><span data-lake-id=\"uf25afe54\" id=\"uf25afe54\" class=\"lake-fontsize-11\">小灰灰的Hexo博客地址：</span></p><card type=\"block\" name=\"bookmarklink\" value=\"data:%7B%22mode%22%3A%22card%22%2C%22src%22%3A%22https%3A%2F%2Fwww.xiaohuihui.cc%22%2C%22text%22%3A%22https%3A%2F%2Fwww.xiaohuihui.cc%22%2C%22detail%22%3A%7B%22icon%22%3A%22https%3A%2F%2Fwww.xiaohuihui.cc%2Fimg%2Ffavicon.png%22%2C%22image%22%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhAQABAIAAAAAAAP%2F%2F%2FyH5BAEAAAAALAAAAAABAAEAAAIBRAA7%22%2C%22title%22%3A%22%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%20-%20%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22belong%22%3A%22%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22belong_url%22%3Anull%2C%22desc%22%3A%22%E5%B0%8F%E7%81%B0%E7%81%B0%E7%9A%84%E4%B8%96%E7%95%8C%22%2C%22url%22%3A%22https%3A%2F%2Fwww.xiaohuihui.cc%22%2C%22extra%22%3A%7B%7D%2C%22_serializer%22%3A%22web.editor_link_detail%22%7D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ofnQ4%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ube122584\" id=\"ube122584\"><span data-lake-id=\"u03fbe710\" id=\"u03fbe710\" class=\"lake-fontsize-11\">​</span><br></p><p data-lake-id=\"u44ce385d\" id=\"u44ce385d\"><span data-lake-id=\"u8bd12fb9\" id=\"u8bd12fb9\" class=\"lake-fontsize-11\">PS：</span></p><p data-lake-id=\"uea6d5971\" id=\"uea6d5971\"><span data-lake-id=\"ub7659ec6\" id=\"ub7659ec6\" class=\"lake-fontsize-11\">听说使用github action 执行ssh可能会出现封号的情况。</span></p><p data-lake-id=\"u0aa5817d\" id=\"u0aa5817d\"><span data-lake-id=\"u940696d3\" id=\"u940696d3\" class=\"lake-fontsize-11\">另外同步到github速度比较慢，</span></p><p data-lake-id=\"uee5f6fd5\" id=\"uee5f6fd5\"><span data-lake-id=\"uf5c2c207\" id=\"uf5c2c207\" class=\"lake-fontsize-11\">所以小灰灰的博客代码直接使用自己的服务器搭建的，然后加个webhook到语雀上，这样语雀更新之后请求webhook执行命令直接在服务器上更新了。</span></p><p data-lake-id=\"u43d2984b\" id=\"u43d2984b\"><span data-lake-id=\"ucca40299\" id=\"ucca40299\" class=\"lake-fontsize-11\">宝塔的webhook代码：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22plain%22%2C%22code%22%3A%22%23!%2Fbin%2Fbash%5Cnecho%20%5C%22%5C%22%5Cn%23%E8%BE%93%E5%87%BA%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%5Cndate%20--date%3D'0%20days%20ago'%20%5C%22%2B%25Y-%25m-%25d%20%25H%3A%25M%3A%25S%5C%22%5Cnecho%20%5C%22Start%5C%22%5Cn%5Cncd%20%5C%22%2Fwww%2Fwwwroot%2Fnode_js%2F%E4%BD%A0%E7%9A%84Hexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9%2F%5C%22%5Cnecho%20%5C%22%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98%5C%22%5Cnnpx%20hexo%20clean%5Cn%5Cnecho%20%5C%22%E5%BC%80%E5%A7%8B%E4%B8%8B%E8%BD%BD%E8%AF%AD%E9%9B%80%E6%96%87%E7%AB%A0.....%5C%22%5Cnnpx%20yuque-hexo%20clean%5Cnnpx%20yuque-hexo%20sync%5Cn%5Cnecho%20%5C%22%E5%88%9B%E5%BB%BA%E6%96%87%E7%AB%A0%5C%22%5Cnnpx%20hexo%20g%5Cn%5CngitPath%3D%5C%22%2Fwww%2Fwwwroot%2Fnode_js%2F%E4%BD%A0%E7%9A%84Hexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9%2Fpublic%5C%22%5Cn%5Cnif%20%5B%20-d%20%5C%22%24gitPath%5C%22%20%5D%3B%20then%5Cn%20%20%23%20%E9%9C%80%E8%A6%81%E5%85%88%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6%5Cn%20%20%23vi%20~%2F.bashrc%EF%BC%8C%E5%9C%A8alias%20cp%3D%E2%80%99cp%20-i%E2%80%99%E5%89%8D%E5%8A%A0%E4%B8%8A%E2%80%9D%23%E2%80%9D%E6%B3%A8%E9%87%8A%E6%8E%89%E8%BF%99%E8%A1%8C%EF%BC%8C%3Awq!%20%E4%BF%9D%E5%AD%98%E9%80%80%E5%87%BA%EF%BC%8C%E7%84%B6%E5%90%8E%E9%87%8D%E6%96%B0%E7%99%BB%E9%99%86%EF%BC%8C%E4%BD%BF%E7%94%A8cp%20-r%20-f%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%5Cn%20%20%20cp%20-r%20-f%20%2Fwww%2Fwwwroot%2Fnode_js%2F%E4%BD%A0%E7%9A%84Hexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9%2Fpublic%2F*%20%2Fwww%2Fwwwroot%2F%E4%BD%A0%E8%A6%81%E8%BF%90%E8%A1%8C%E7%9A%84%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%5Cn%5Cnecho%20%5C%22%E5%AE%8C%E6%88%90%5C%22%5Cnexit%5Cnfi%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22BDWgQ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><blockquote data-lake-id=\"uce5d59cb\" id=\"uce5d59cb\"><p data-lake-id=\"u85722fb8\" id=\"u85722fb8\"><span data-lake-id=\"u8aae9257\" id=\"u8aae9257\" class=\"lake-fontsize-11\">服务器需要改动，要求copy命令的时候不要提示询问。改动方法：</span></p><p data-lake-id=\"u02c03a7d\" id=\"u02c03a7d\"><span data-lake-id=\"u778a230b\" id=\"u778a230b\">执行：vi ~/.bashrc</span></p><p data-lake-id=\"u5ee3efd7\" id=\"u5ee3efd7\"><span data-lake-id=\"u7310ce2a\" id=\"u7310ce2a\">在alias cp=’cp -i’前加上”#”注释掉这行，:wq! 保存退出，然后重新登陆。</span></p><p data-lake-id=\"ubb63345e\" id=\"ubb63345e\"><span data-lake-id=\"ub042a96a\" id=\"ub042a96a\">最后使用cp -r -f就可以了</span></p></blockquote>",
    "public": 1,
    "status": 1,
    "likes_count": 0,
    "read_count": 11,
    "hits": 11,
    "comments_count": 0,
    "word_count": 1769,
    "created_at": "2022-04-08T05:37:45.000Z",
    "updated_at": "2024-04-28T08:41:30.000Z",
    "content_updated_at": "2024-04-28T08:41:28.000Z",
    "published_at": "2024-04-28T08:41:29.000Z",
    "first_published_at": "2022-04-08T06:33:59.717Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 2482281900,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72674001,
    "type": "Doc",
    "slug": "awh8vd",
    "title": "Github Action 使用云函数调度服务",
    "description": "categories: [学无止境]tags: [github,action,云函数,调度]cover: https://tse1-mm.cn.bing.net/th/id/R-C.5660045af32fb6185303af27f36acf0d?rik=8qDr8OVk%2fmSILA&ri...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u087fc3f2\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u8c18a9fe\" class=\"ne-p\"><span class=\"ne-text\">tags: [github,action,云函数,调度]</span></p><p id=\"u474eb186\" class=\"ne-p\"><span class=\"ne-text\">cover: https://tse1-mm.cn.bing.net/th/id/R-C.5660045af32fb6185303af27f36acf0d?rik=8qDr8OVk%2fmSILA&amp;riu=http%3a%2f%2fblog-images.qiniu.wqf31415.xyz%2fgithub_action_3.png&amp;ehk=ZPqfDfyFjW6CUcyKK4prggpXliv5%2f907uHUt%2b371uZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0</span></p><p id=\"u5f6ac847\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"TK5ka\" class=\"ne-hr\"><h2 id=\"TLECG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">如何开启GitHubAction的 </span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">workflow_dispatch </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">触发器</span></h2><p id=\"u663b2822\" class=\"ne-p\"><br></p><p id=\"u793ad701\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在工作流的 </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">yml</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 文件定义的 </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">on</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 中，提供</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">workflow_dispatch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">触发器 【必须】</span></p><pre data-language=\"yaml\" id=\"sksyV\" class=\"ne-codeblock language-yaml\"><code>#通过 workflow_dispatch 触发，cron任务部署在云函数\nname: 你的工作流名称\n\non:\n  workflow_dispatch:\n    \njobs:\n  start:\n#以下省略\n</code></pre><p id=\"ua928be08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">开启</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">workflow_dispatch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">后，你的工作流中会出现运行工作流的按钮,手动点击</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">Run workflow</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">按钮，将会执行一次工作流：</span></p><p id=\"u5f060b53\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png\" width=\"1253\" id=\"u5a24dfb6\" class=\"ne-image\"></p><p id=\"ub4c33496\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><p id=\"udc1d4200\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">现在可以进入下一步，使用 </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">cron</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 调度触发工作流的手动执行。</span></p><h2 id=\"wla8Q\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">使用云函数提供cron调度服务</span></h2><p id=\"uc0d2134b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我选择的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">cron</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">调度是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> </span><a href=\"https://cloud.tencent.com/product/scf/\" data-href=\"https://cloud.tencent.com/product/scf/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">腾讯云函数SCF</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">.。简单的POST一个链接，不会达到收费标准。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我们打开云函数的创建界面：</span></p><ol class=\"ne-ol\"><li id=\"u33ebcabb\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">选择自定义创建</span></li><li id=\"u68927ae0\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">函数名称为默认的helloworld-1623250991 ，可以自己输入名称。</span></li><li id=\"u7107d5ff\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">地域使用任何地域即可，这里默认选择了广州</span></li><li id=\"u3d395217\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">运行环境选择 Python3.6 （Python 2.7版本也行）</span></li><li id=\"ubf7956ba\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">提交方法选择在线编辑。</span></li><li id=\"u29247148\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">执行方法使用默认值：index.main_handler</span></li><li id=\"u2a65ca20\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">函数代码如下：</span></li></ol><p id=\"u5cee9009\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"></span></p><p id=\"u2b61f06d\" class=\"ne-p\"><strong><span class=\"ne-text\">Python 2.7版本代码：</span></strong></p><pre data-language=\"python\" id=\"XTq9S\" class=\"ne-codeblock language-python\"><code># -*- coding: utf8 -*-\nimport requests\ndef main_handler(event, context):\n    r = requests.post(&quot;https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches&quot;,\n    json = {&quot;ref&quot;: &quot;master&quot;},\n    headers = {&quot;User-Agent&quot;:'curl/7.52.1',\n              'Content-Type': 'application/json',\n              'Accept': 'application/vnd.github.v3+json',\n              'Authorization': 'token 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'})\n    if r.status_code == 204:\n        return &quot;This's OK!&quot; \n    else:\n        return r.status_code\n</code></pre><p id=\"u0bc4795e\" class=\"ne-p\"><strong><span class=\"ne-text\">Python 3.6 版本代码：</span></strong></p><pre data-language=\"python\" id=\"tpV63\" class=\"ne-codeblock language-python\"><code>import requests\nimport json\n\ndef run():\n        payload = json.dumps({&quot;ref&quot;: &quot;master&quot;})\n        header = {'Authorization': 'token GitHubToken',\n                  &quot;Accept&quot;: &quot;application/vnd.github.v3+json&quot;}\n        response_decoded_json = requests.post(\n            f'https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches',\n            data=payload, headers=header)\n\n# 云函数入口\ndef main_handler(event, context):\n    return run()\n</code></pre><ol start=\"8\" class=\"ne-ol\"><li id=\"ub27a9ef2\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">函数代码中的 </span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">GitHubToken、Github账号、Github项目名、GithubAction工作流名称或ID</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"> 需要根据自己的账号及项目填写。具体的API调用规则可参考: </span><a href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\" data-href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">GithubDoc</span></a><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">.</span></li></ol><p id=\"uc8def2c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"></span></p><p id=\"uf6fffc2d\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">获取GithubAction工作流ID接口：</span></strong></p><p id=\"u160a1418\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">url: </span></strong><span class=\"ne-text\">https://api.github.com/repos/你的用户名/你的项目名/actions/workflows</span></p><p id=\"ua3e6cc9a\" class=\"ne-p\"><span class=\"ne-text\">method: get</span></p><p id=\"ue30637ab\" class=\"ne-p\"><span class=\"ne-text\">header:</span></p><table id=\"pYGzu\" class=\"ne-table\" style=\"width: 557px\"><tbody><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u6e9a3ae7\" class=\"ne-p\"><span class=\"ne-text\">Authorization</span></p></td><td width=\"307\"><p id=\"uf77ec238\" class=\"ne-p\"><span class=\"ne-text\">token 你的token</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u698ea179\" class=\"ne-p\"><span class=\"ne-text\">Accept</span></p></td><td width=\"307\"><p id=\"ud99dc9f1\" class=\"ne-p\"><span class=\"ne-text\">application/vnd.github.v3+json</span></p></td></tr></tbody></table><p id=\"u146deb29\" class=\"ne-p\"><span class=\"ne-text\">body: {ref:master'}</span></p><p id=\"u3d932b65\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u19e1913b\" class=\"ne-p\" style=\"text-indent: 2em\"><span class=\"ne-text\"></span></p><p id=\"uf84209ab\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">PHP请求案例：</span></strong></p><pre data-language=\"php\" id=\"R03kz\" class=\"ne-codeblock language-php\"><code>// Generated by ApiPost: https://www.apipost.cn/\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, 'https://api.github.com/repos/你的用户名/你的项目名/actions/workflows');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');\n\ncurl_setopt($ch, CURLOPT_POSTFIELDS, &quot;{ref:master'}'&quot;);\n\n$headers = array();\n$headers[] = 'User-Agent: Apipost client Runtime/+https://www.apipost.cn/';\n$headers[] = 'Authorization: token 你的TOKEN';\n$headers[] = 'Accept: application/vnd.github.v3+json';\n$headers[] = 'Content-Type: application/json';\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n\n$result = curl_exec($ch);\nif (curl_errno($ch)) {\n    echo 'Error:' . curl_error($ch);\n}\ncurl_close($ch);\n</code></pre><p id=\"ua9738bac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Python请求案例：</span></p><pre data-language=\"python\" id=\"W6n9W\" class=\"ne-codeblock language-python\"><code>import requests\n\nheaders = {\n    'User-Agent': 'Apipost client Runtime/+https://www.apipost.cn/',\n    'Authorization': 'token 你的token',\n    'Accept': 'application/vnd.github.v3+json',\n    'Content-Type': 'application/json',\n}\n\ndata = '{ref:master}'\n\nresponse = requests.post('https://api.github.com/repos/你的用户名/你的项目名/actions/workflows', headers=headers, data=data)\n</code></pre><p id=\"u54b649a5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"></span></p><ol start=\"9\" class=\"ne-ol\"><li id=\"u6f332f45\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">具体填写如下图所示：</span></li></ol><p id=\"ufb2ae483\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png\" width=\"1642\" id=\"u6ebd4bae\" class=\"ne-image\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"><br /></span></p><ol start=\"10\" class=\"ne-ol\"><li id=\"u04f9304e\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">900</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">秒：</span></li></ol><p id=\"u547aa1d9\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png\" width=\"527\" id=\"ua156c086\" class=\"ne-image\"></p><ol start=\"11\" class=\"ne-ol\"><li id=\"u16b44e74\" data-lake-index-type=\"0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的Cron表达式，这里的</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Cron</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：</span></li></ol><div class=\"ne-quote\"><p id=\"u48adafc9\" class=\"ne-p\"><span class=\"ne-text\">0 0 16 * * * *</span></p></div><p id=\"u95440f81\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">表示了每天16点执行1次。</span></p><p id=\"u7480ba2d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png\" width=\"576\" id=\"ud642effb\" class=\"ne-image\"></p><p id=\"u7ac738be\" class=\"ne-p\"><br></p><p id=\"u56f3674a\" class=\"ne-p\"><span class=\"ne-text\">触发器也可以选择api调用，创建好后会生成一个api url （webhook地址）。粘贴到对应的位置调用即可。</span></p></div>",
    "body": "categories: [学无止境]<br />tags: [github,action,云函数,调度]<br />cover: https://tse1-mm.cn.bing.net/th/id/R-C.5660045af32fb6185303af27f36acf0d?rik=8qDr8OVk%2fmSILA&riu=http%3a%2f%2fblog-images.qiniu.wqf31415.xyz%2fgithub_action_3.png&ehk=ZPqfDfyFjW6CUcyKK4prggpXliv5%2f907uHUt%2b371uZ8%3d&risl=&pid=ImgRaw&r=0<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n<a name=\"TLECG\"></a>\n## 如何开启GitHubAction的 workflow_dispatch 触发器\n\n在工作流的 **yml** 文件定义的 **on** 中，提供workflow_dispatch触发器 【必须】\n```yaml\n#通过 workflow_dispatch 触发，cron任务部署在云函数\nname: 你的工作流名称\n\non:\n  workflow_dispatch:\n    \njobs:\n  start:\n#以下省略\n\n```\n开启workflow_dispatch后，你的工作流中会出现运行工作流的按钮,手动点击Run workflow按钮，将会执行一次工作流：<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png#clientId=u382e8e49-5c96-4&from=paste&id=u5a24dfb6&originHeight=266&originWidth=1253&originalType=url&ratio=1&rotation=0&showTitle=false&size=40929&status=done&style=none&taskId=u8795a4a8-3e99-4e80-8dcd-61142d8fc6c&title=)\n\n现在可以进入下一步，使用 **cron** 调度触发工作流的手动执行。\n<a name=\"wla8Q\"></a>\n## 使用云函数提供cron调度服务\n工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。<br />我选择的 **cron** 调度是 [腾讯云函数SCF](https://cloud.tencent.com/product/scf/).。简单的POST一个链接，不会达到收费标准。<br />我们打开云函数的创建界面：\n\n1. 选择自定义创建\n2. 函数名称为默认的helloworld-1623250991 ，可以自己输入名称。\n3. 地域使用任何地域即可，这里默认选择了广州\n4. 运行环境选择 Python3.6 （Python 2.7版本也行）\n5. 提交方法选择在线编辑。\n6. 执行方法使用默认值：index.main_handler\n7. 函数代码如下：\n\n**Python 2.7版本代码：**\n```python\n# -*- coding: utf8 -*-\nimport requests\ndef main_handler(event, context):\n    r = requests.post(\"https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches\",\n    json = {\"ref\": \"master\"},\n    headers = {\"User-Agent\":'curl/7.52.1',\n              'Content-Type': 'application/json',\n              'Accept': 'application/vnd.github.v3+json',\n              'Authorization': 'token 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'})\n    if r.status_code == 204:\n        return \"This's OK!\" \n    else:\n        return r.status_code\n\n```\n**Python 3.6 版本代码：**\n```python\nimport requests\nimport json\n\ndef run():\n        payload = json.dumps({\"ref\": \"master\"})\n        header = {'Authorization': 'token GitHubToken',\n                  \"Accept\": \"application/vnd.github.v3+json\"}\n        response_decoded_json = requests.post(\n            f'https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches',\n            data=payload, headers=header)\n\n# 云函数入口\ndef main_handler(event, context):\n    return run()\n\n```\n\n8. 函数代码中的 **GitHubToken、Github账号、Github项目名、GithubAction工作流名称或ID** 需要根据自己的账号及项目填写。具体的API调用规则可参考: [GithubDoc](https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event).\n\n**获取GithubAction工作流ID接口：**<br />**url: **https://api.github.com/repos/你的用户名/你的项目名/actions/workflows<br />method: get<br />header:\n\n| Authorization | token 你的token |\n| --- | --- |\n| Accept | application/vnd.github.v3+json |\n\nbody: {ref:master'}\n\n\n**PHP请求案例：**\n```php\n// Generated by ApiPost: https://www.apipost.cn/\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, 'https://api.github.com/repos/你的用户名/你的项目名/actions/workflows');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');\n\ncurl_setopt($ch, CURLOPT_POSTFIELDS, \"{ref:master'}'\");\n\n$headers = array();\n$headers[] = 'User-Agent: Apipost client Runtime/+https://www.apipost.cn/';\n$headers[] = 'Authorization: token 你的TOKEN';\n$headers[] = 'Accept: application/vnd.github.v3+json';\n$headers[] = 'Content-Type: application/json';\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n\n$result = curl_exec($ch);\nif (curl_errno($ch)) {\n    echo 'Error:' . curl_error($ch);\n}\ncurl_close($ch);\n\n```\nPython请求案例：\n```python\nimport requests\n\nheaders = {\n    'User-Agent': 'Apipost client Runtime/+https://www.apipost.cn/',\n    'Authorization': 'token 你的token',\n    'Accept': 'application/vnd.github.v3+json',\n    'Content-Type': 'application/json',\n}\n\ndata = '{ref:master}'\n\nresponse = requests.post('https://api.github.com/repos/你的用户名/你的项目名/actions/workflows', headers=headers, data=data)\n\n```\n\n9. 具体填写如下图所示：\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png#clientId=ufda8d8b7-9673-4&from=ui&id=u6ebd4bae&originHeight=1204&originWidth=1642&originalType=binary&ratio=1&rotation=0&showTitle=false&size=156866&status=done&style=none&taskId=uf157aaf6-4213-4b8f-a03f-0a14cc3be20&title=)\n\n10. 在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值**900**秒：\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png#clientId=u382e8e49-5c96-4&from=paste&id=ua156c086&originHeight=424&originWidth=527&originalType=url&ratio=1&rotation=0&showTitle=false&size=37309&status=done&style=none&taskId=u1a87cab6-45c8-4639-900e-a9517e8d1a8&title=)\n\n11. 触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的Cron表达式，这里的**Cron**当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：\n> 0 0 16 * * * *\n\n表示了每天16点执行1次。<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png#clientId=u382e8e49-5c96-4&from=paste&id=ud642effb&originHeight=517&originWidth=576&originalType=url&ratio=1&rotation=0&showTitle=false&size=50170&status=done&style=none&taskId=u81d4f3b3-5f0e-4f8c-a2a4-7ca54a07540&title=)\n\n触发器也可以选择api调用，创建好后会生成一个api url （webhook地址）。粘贴到对应的位置调用即可。\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"u087fc3f2\" class=\"ne-p\"><span class=\"ne-text\">categories: [学无止境]</span></p><p id=\"u8c18a9fe\" class=\"ne-p\"><span class=\"ne-text\">tags: [github,action,云函数,调度]</span></p><p id=\"u474eb186\" class=\"ne-p\"><span class=\"ne-text\">cover: https://tse1-mm.cn.bing.net/th/id/R-C.5660045af32fb6185303af27f36acf0d?rik=8qDr8OVk%2fmSILA&amp;riu=http%3a%2f%2fblog-images.qiniu.wqf31415.xyz%2fgithub_action_3.png&amp;ehk=ZPqfDfyFjW6CUcyKK4prggpXliv5%2f907uHUt%2b371uZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0</span></p><p id=\"u5f6ac847\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"TK5ka\" class=\"ne-hr\"><h2 id=\"TLECG\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">如何开启GitHubAction的 </span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">workflow_dispatch </span><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">触发器</span></h2><p id=\"u663b2822\" class=\"ne-p\"><br></p><p id=\"u793ad701\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">在工作流的 </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">yml</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 文件定义的 </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">on</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 中，提供</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">workflow_dispatch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">触发器 【必须】</span></p><pre data-language=\"yaml\" id=\"sksyV\" class=\"ne-codeblock language-yaml\">#通过 workflow_dispatch 触发，cron任务部署在云函数\nname: 你的工作流名称\n\non:\n  workflow_dispatch:\n    \njobs:\n  start:\n#以下省略\n</pre><p id=\"ua928be08\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">开启</span><span class=\"ne-text\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); font-size: 14px\">workflow_dispatch</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">后，你的工作流中会出现运行工作流的按钮,手动点击</span><span class=\"ne-text\" style=\"color: rgb(51, 51, 51); font-size: 14px\">Run workflow</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">按钮，将会执行一次工作流：</span></p><p id=\"u5f060b53\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png\" width=\"1253\" id=\"u5a24dfb6\" class=\"ne-image\"></p><p id=\"ub4c33496\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"></span></p><p id=\"udc1d4200\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">现在可以进入下一步，使用 </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">cron</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> 调度触发工作流的手动执行。</span></p><h2 id=\"wla8Q\"><span class=\"ne-text\" style=\"color: rgb(79, 79, 79)\">使用云函数提供cron调度服务</span></h2><p id=\"uc0d2134b\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我选择的</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> </span><strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">cron</span></strong><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> </span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">调度是</span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\"> </span><a href=\"https://cloud.tencent.com/product/scf/\" data-href=\"https://cloud.tencent.com/product/scf/\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">腾讯云函数SCF</span></a><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">.。简单的POST一个链接，不会达到收费标准。<br /></span><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">我们打开云函数的创建界面：</span></p><ol class=\"ne-ol\"><li id=\"u33ebcabb\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">选择自定义创建</span></li><li id=\"u68927ae0\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">函数名称为默认的helloworld-1623250991 ，可以自己输入名称。</span></li><li id=\"u7107d5ff\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">地域使用任何地域即可，这里默认选择了广州</span></li><li id=\"u3d395217\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">运行环境选择 Python3.6 （Python 2.7版本也行）</span></li><li id=\"ubf7956ba\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">提交方法选择在线编辑。</span></li><li id=\"u29247148\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">执行方法使用默认值：index.main_handler</span></li><li id=\"u2a65ca20\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">函数代码如下：</span></li></ol><p id=\"u5cee9009\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"></span></p><p id=\"u2b61f06d\" class=\"ne-p\"><strong><span class=\"ne-text\">Python 2.7版本代码：</span></strong></p><pre data-language=\"python\" id=\"XTq9S\" class=\"ne-codeblock language-python\"># -*- coding: utf8 -*-\nimport requests\ndef main_handler(event, context):\n    r = requests.post(&quot;https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches&quot;,\n    json = {&quot;ref&quot;: &quot;master&quot;},\n    headers = {&quot;User-Agent&quot;:'curl/7.52.1',\n              'Content-Type': 'application/json',\n              'Accept': 'application/vnd.github.v3+json',\n              'Authorization': 'token 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'})\n    if r.status_code == 204:\n        return &quot;This's OK!&quot; \n    else:\n        return r.status_code\n</pre><p id=\"u0bc4795e\" class=\"ne-p\"><strong><span class=\"ne-text\">Python 3.6 版本代码：</span></strong></p><pre data-language=\"python\" id=\"tpV63\" class=\"ne-codeblock language-python\">import requests\nimport json\n\ndef run():\n        payload = json.dumps({&quot;ref&quot;: &quot;master&quot;})\n        header = {'Authorization': 'token GitHubToken',\n                  &quot;Accept&quot;: &quot;application/vnd.github.v3+json&quot;}\n        response_decoded_json = requests.post(\n            f'https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches',\n            data=payload, headers=header)\n\n# 云函数入口\ndef main_handler(event, context):\n    return run()\n</pre><ol start=\"8\" class=\"ne-ol\"><li id=\"ub27a9ef2\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">函数代码中的 </span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">GitHubToken、Github账号、Github项目名、GithubAction工作流名称或ID</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"> 需要根据自己的账号及项目填写。具体的API调用规则可参考: </span><a href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\" data-href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">GithubDoc</span></a><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">.</span></li></ol><p id=\"uc8def2c4\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"></span></p><p id=\"uf6fffc2d\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">获取GithubAction工作流ID接口：</span></strong></p><p id=\"u160a1418\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">url: </span></strong><span class=\"ne-text\">https://api.github.com/repos/你的用户名/你的项目名/actions/workflows</span></p><p id=\"ua3e6cc9a\" class=\"ne-p\"><span class=\"ne-text\">method: get</span></p><p id=\"ue30637ab\" class=\"ne-p\"><span class=\"ne-text\">header:</span></p><table id=\"pYGzu\" class=\"ne-table\" style=\"width: 557px\"><tbody><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u6e9a3ae7\" class=\"ne-p\"><span class=\"ne-text\">Authorization</span></p></td><td width=\"307\"><p id=\"uf77ec238\" class=\"ne-p\"><span class=\"ne-text\">token 你的token</span></p></td></tr><tr style=\"height: 33px\"><td width=\"250\"><p id=\"u698ea179\" class=\"ne-p\"><span class=\"ne-text\">Accept</span></p></td><td width=\"307\"><p id=\"ud99dc9f1\" class=\"ne-p\"><span class=\"ne-text\">application/vnd.github.v3+json</span></p></td></tr></tbody></table><p id=\"u146deb29\" class=\"ne-p\"><span class=\"ne-text\">body: {ref:master'}</span></p><p id=\"u3d932b65\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"u19e1913b\" class=\"ne-p\" style=\"text-indent: 2em\"><span class=\"ne-text\"></span></p><p id=\"uf84209ab\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">PHP请求案例：</span></strong></p><pre data-language=\"php\" id=\"R03kz\" class=\"ne-codeblock language-php\">// Generated by ApiPost: https://www.apipost.cn/\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, 'https://api.github.com/repos/你的用户名/你的项目名/actions/workflows');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');\n\ncurl_setopt($ch, CURLOPT_POSTFIELDS, &quot;{ref:master'}'&quot;);\n\n$headers = array();\n$headers[] = 'User-Agent: Apipost client Runtime/+https://www.apipost.cn/';\n$headers[] = 'Authorization: token 你的TOKEN';\n$headers[] = 'Accept: application/vnd.github.v3+json';\n$headers[] = 'Content-Type: application/json';\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n\n$result = curl_exec($ch);\nif (curl_errno($ch)) {\n    echo 'Error:' . curl_error($ch);\n}\ncurl_close($ch);\n</pre><p id=\"ua9738bac\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Python请求案例：</span></p><pre data-language=\"python\" id=\"W6n9W\" class=\"ne-codeblock language-python\">import requests\n\nheaders = {\n    'User-Agent': 'Apipost client Runtime/+https://www.apipost.cn/',\n    'Authorization': 'token 你的token',\n    'Accept': 'application/vnd.github.v3+json',\n    'Content-Type': 'application/json',\n}\n\ndata = '{ref:master}'\n\nresponse = requests.post('https://api.github.com/repos/你的用户名/你的项目名/actions/workflows', headers=headers, data=data)\n</pre><p id=\"u54b649a5\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"></span></p><ol start=\"9\" class=\"ne-ol\"><li id=\"u6f332f45\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">具体填写如下图所示：</span></li></ol><p id=\"ufb2ae483\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png\" width=\"1642\" id=\"u6ebd4bae\" class=\"ne-image\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\"><br /></span></p><ol start=\"10\" class=\"ne-ol\"><li id=\"u04f9304e\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">900</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">秒：</span></li></ol><p id=\"u547aa1d9\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png\" width=\"527\" id=\"ua156c086\" class=\"ne-image\"></p><ol start=\"11\" class=\"ne-ol\"><li id=\"u16b44e74\"><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的Cron表达式，这里的</span><strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">Cron</span></strong><span class=\"ne-text\" style=\"color: rgba(0, 0, 0, 0.75); font-size: 16px\">当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：</span></li></ol><div class=\"ne-quote\"><p id=\"u48adafc9\" class=\"ne-p\"><span class=\"ne-text\">0 0 16 * * * *</span></p></div><p id=\"u95440f81\" class=\"ne-p\"><span class=\"ne-text\" style=\"color: rgb(77, 77, 77); font-size: 16px\">表示了每天16点执行1次。</span></p><p id=\"u7480ba2d\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png\" width=\"576\" id=\"ud642effb\" class=\"ne-image\"></p><p id=\"u7ac738be\" class=\"ne-p\"><br></p><p id=\"u56f3674a\" class=\"ne-p\"><span class=\"ne-text\">触发器也可以选择api调用，创建好后会生成一个api url （webhook地址）。粘贴到对应的位置调用即可。</span></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"u087fc3f2\" id=\"u087fc3f2\"><span data-lake-id=\"uf1c3413d\" id=\"uf1c3413d\">categories: [学无止境]</span></p><p data-lake-id=\"u8c18a9fe\" id=\"u8c18a9fe\"><span data-lake-id=\"u7f759bcd\" id=\"u7f759bcd\">tags: [github,action,云函数,调度]</span></p><p data-lake-id=\"u474eb186\" id=\"u474eb186\"><span data-lake-id=\"ucdf9b651\" id=\"ucdf9b651\">cover: https://tse1-mm.cn.bing.net/th/id/R-C.5660045af32fb6185303af27f36acf0d?rik=8qDr8OVk%2fmSILA&amp;riu=http%3a%2f%2fblog-images.qiniu.wqf31415.xyz%2fgithub_action_3.png&amp;ehk=ZPqfDfyFjW6CUcyKK4prggpXliv5%2f907uHUt%2b371uZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0</span></p><p data-lake-id=\"u5f6ac847\" id=\"u5f6ac847\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22TK5ka%22%7D\"></card><h2 data-lake-id=\"TLECG\" id=\"TLECG\"><span data-lake-id=\"u5bd2c84d\" id=\"u5bd2c84d\" style=\"color: rgb(79, 79, 79)\">如何开启GitHubAction的 </span><span data-lake-id=\"uc0715ae7\" id=\"uc0715ae7\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">workflow_dispatch </span><span data-lake-id=\"uaad901f4\" id=\"uaad901f4\" style=\"color: rgb(79, 79, 79)\">触发器</span></h2><p data-lake-id=\"u663b2822\" id=\"u663b2822\"><br></p><p data-lake-id=\"u793ad701\" id=\"u793ad701\"><span data-lake-id=\"u6eaa17c9\" id=\"u6eaa17c9\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">在工作流的 </span><strong><span data-lake-id=\"u5a1e1943\" id=\"u5a1e1943\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">yml</span></strong><span data-lake-id=\"u3e54b806\" id=\"u3e54b806\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> 文件定义的 </span><strong><span data-lake-id=\"u104c2f77\" id=\"u104c2f77\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">on</span></strong><span data-lake-id=\"uc424a74e\" id=\"uc424a74e\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> 中，提供</span><span data-lake-id=\"ua6a501d3\" id=\"ua6a501d3\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">workflow_dispatch</span><span data-lake-id=\"u4e5bd868\" id=\"u4e5bd868\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">触发器 【必须】</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22yaml%22%2C%22code%22%3A%22%23%E9%80%9A%E8%BF%87%20workflow_dispatch%20%E8%A7%A6%E5%8F%91%EF%BC%8Ccron%E4%BB%BB%E5%8A%A1%E9%83%A8%E7%BD%B2%E5%9C%A8%E4%BA%91%E5%87%BD%E6%95%B0%5Cnname%3A%20%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%90%8D%E7%A7%B0%5Cn%5Cnon%3A%5Cn%20%20workflow_dispatch%3A%5Cn%20%20%20%20%5Cnjobs%3A%5Cn%20%20start%3A%5Cn%23%E4%BB%A5%E4%B8%8B%E7%9C%81%E7%95%A5%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22sksyV%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua928be08\" id=\"ua928be08\"><span data-lake-id=\"u0592fb45\" id=\"u0592fb45\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">开启</span><span data-lake-id=\"u54f0b68e\" id=\"u54f0b68e\" class=\"lake-fontsize-11\" style=\"color: rgb(199, 37, 78); background-color: rgb(249, 242, 244)\">workflow_dispatch</span><span data-lake-id=\"u85ca2db3\" id=\"u85ca2db3\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">后，你的工作流中会出现运行工作流的按钮,手动点击</span><span data-lake-id=\"u44aba372\" id=\"u44aba372\" class=\"lake-fontsize-11\" style=\"color: rgb(51, 51, 51)\">Run workflow</span><span data-lake-id=\"u664356ab\" id=\"u664356ab\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">按钮，将会执行一次工作流：</span></p><p data-lake-id=\"u5f060b53\" id=\"u5f060b53\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png%22%2C%22taskId%22%3A%22u8795a4a8-3e99-4e80-8dcd-61142d8fc6c%22%2C%22clientId%22%3A%22u382e8e49-5c96-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A40929%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1253%2C%22originHeight%22%3A266%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22CRDS%20NEW%20WORKFLOW%20WORKFLOWS%20MAIN.YML%20ALL%20WORKFLOWS%20FILTER%20WORKFLOW%20RUNS%20CRDS%2023%20WORKFLOW%20RUNS%20ACTOR%20BRANCH%20EVENT%20STATUS%20THIS%20WORKFLOW%20HAS%20A%20WORKFLOW_DISPATCH%20EVENT%20TRIGGER.%20RUN%20WORKFLOW%20HTTPS%3A%2F%2FBLOG.CSDN.NET%2F1937GZJLZY%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A330.45737%2C%22y%22%3A31.940346%2C%22width%22%3A41.517179999999996%2C%22height%22%3A17.888640999999996%2C%22text%22%3A%22CRDS%22%7D%2C%7B%22x%22%3A209.24168%2C%22y%22%3A34.3874%2C%22width%22%3A78.92736%2C%22height%22%3A12.721609999999998%2C%22text%22%3A%22NEW%20WORKFLOW%22%7D%2C%7B%22x%22%3A29.98152%2C%22y%22%3A35.491615%2C%22width%22%3A75.48881%2C%22height%22%3A12.676219999999994%2C%22text%22%3A%22WORKFLOWS%22%7D%2C%7B%22x%22%3A331.0039%2C%22y%22%3A58.147877%2C%22width%22%3A59.84504000000004%2C%22height%22%3A13.005753000000006%2C%22text%22%3A%22MAIN.YML%22%7D%2C%7B%22x%22%3A49.073807%2C%22y%22%3A74.82334%2C%22width%22%3A80.63826300000001%2C%22height%22%3A14.262460000000004%2C%22text%22%3A%22ALL%20WORKFLOWS%22%7D%2C%7B%22x%22%3A362.53458%2C%22y%22%3A98.732834%2C%22width%22%3A125.28195%2C%22height%22%3A15.665745999999999%2C%22text%22%3A%22FILTER%20WORKFLOW%20RUNS%22%7D%2C%7B%22x%22%3A75.15201%2C%22y%22%3A116.7126%2C%22width%22%3A26.29983999999999%2C%22height%22%3A13.096540000000019%2C%22text%22%3A%22CRDS%22%7D%2C%7B%22x%22%3A346.8744%2C%22y%22%3A157.89407%2C%22width%22%3A120.16002000000003%2C%22height%22%3A16.54274000000001%2C%22text%22%3A%2223%20WORKFLOW%20RUNS%22%7D%2C%7B%22x%22%3A1165.9713%2C%22y%22%3A159.56223%2C%22width%22%3A48.53390000000013%2C%22height%22%3A14.521950000000004%2C%22text%22%3A%22ACTOR%22%7D%2C%7B%22x%22%3A1080.8613%2C%22y%22%3A159.97368%2C%22width%22%3A52.85329999999999%2C%22height%22%3A13.696089999999998%2C%22text%22%3A%22BRANCH%22%7D%2C%7B%22x%22%3A922.26697%2C%22y%22%3A160.19353%2C%22width%22%3A39.95492999999999%2C%22height%22%3A12.234019999999987%2C%22text%22%3A%22EVENT%22%7D%2C%7B%22x%22%3A999.9449%2C%22y%22%3A160.22166%2C%22width%22%3A42.44620000000009%2C%22height%22%3A12.739079999999973%2C%22text%22%3A%22STATUS%22%7D%2C%7B%22x%22%3A348.13058%2C%22y%22%3A215.57889%2C%22width%22%3A338.88162%2C%22height%22%3A17.942149999999998%2C%22text%22%3A%22THIS%20WORKFLOW%20HAS%20A%20WORKFLOW_DISPATCH%20EVENT%20TRIGGER.%22%7D%2C%7B%22x%22%3A1110.7573%2C%22y%22%3A216.90718%2C%22width%22%3A85.50829999999996%2C%22height%22%3A12.667209999999983%2C%22text%22%3A%22RUN%20WORKFLOW%22%7D%2C%7B%22x%22%3A1015.94025%2C%22y%22%3A238.10568%2C%22width%22%3A227.0104500000001%2C%22height%22%3A16.87138999999999%2C%22text%22%3A%22HTTPS%3A%2F%2FBLOG.CSDN.NET%2F1937GZJLZY%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u5a24dfb6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ub4c33496\" id=\"ub4c33496\"><span data-lake-id=\"u1d679242\" id=\"u1d679242\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">​</span><br></p><p data-lake-id=\"udc1d4200\" id=\"udc1d4200\"><span data-lake-id=\"u3cf52242\" id=\"u3cf52242\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">现在可以进入下一步，使用 </span><strong><span data-lake-id=\"u23241bd7\" id=\"u23241bd7\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">cron</span></strong><span data-lake-id=\"u2196a4ca\" id=\"u2196a4ca\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> 调度触发工作流的手动执行。</span></p><h2 data-lake-id=\"wla8Q\" id=\"wla8Q\"><span data-lake-id=\"u7a6ba887\" id=\"u7a6ba887\" style=\"color: rgb(79, 79, 79)\">使用云函数提供cron调度服务</span></h2><p data-lake-id=\"uc0d2134b\" id=\"uc0d2134b\"><span data-lake-id=\"ua092da69\" id=\"ua092da69\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。<br /></span><span data-lake-id=\"u87da8ec4\" id=\"u87da8ec4\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">我选择的</span><span data-lake-id=\"u989aa66d\" id=\"u989aa66d\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> </span><strong><span data-lake-id=\"u82e1882a\" id=\"u82e1882a\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">cron</span></strong><span data-lake-id=\"u6fa23b23\" id=\"u6fa23b23\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> </span><span data-lake-id=\"u21b39d9b\" id=\"u21b39d9b\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">调度是</span><span data-lake-id=\"ucf13bb90\" id=\"ucf13bb90\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\"> </span><a href=\"https://cloud.tencent.com/product/scf/\" target=\"_blank\" data-lake-id=\"u70b8150e\" id=\"u70b8150e\"><span data-lake-id=\"u239ab47e\" id=\"u239ab47e\">腾讯云函数SCF</span></a><span data-lake-id=\"ucf31c00c\" id=\"ucf31c00c\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">.。简单的POST一个链接，不会达到收费标准。<br /></span><span data-lake-id=\"u499ef8ca\" id=\"u499ef8ca\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">我们打开云函数的创建界面：</span></p><ol list=\"u4b0ecfe0\"><li fid=\"u89626c14\" data-lake-id=\"u33ebcabb\" id=\"u33ebcabb\"><span data-lake-id=\"u5911365b\" id=\"u5911365b\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">选择自定义创建</span></li><li fid=\"u89626c14\" data-lake-id=\"u68927ae0\" id=\"u68927ae0\"><span data-lake-id=\"u4b2747b4\" id=\"u4b2747b4\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">函数名称为默认的helloworld-1623250991 ，可以自己输入名称。</span></li><li fid=\"u89626c14\" data-lake-id=\"u7107d5ff\" id=\"u7107d5ff\"><span data-lake-id=\"u12bfd823\" id=\"u12bfd823\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">地域使用任何地域即可，这里默认选择了广州</span></li><li fid=\"u89626c14\" data-lake-id=\"u3d395217\" id=\"u3d395217\"><span data-lake-id=\"uf0033d57\" id=\"uf0033d57\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">运行环境选择 Python3.6 （Python 2.7版本也行）</span></li><li fid=\"u89626c14\" data-lake-id=\"ubf7956ba\" id=\"ubf7956ba\"><span data-lake-id=\"ud235473e\" id=\"ud235473e\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">提交方法选择在线编辑。</span></li><li fid=\"u89626c14\" data-lake-id=\"u29247148\" id=\"u29247148\"><span data-lake-id=\"u54bb5c0c\" id=\"u54bb5c0c\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">执行方法使用默认值：index.main_handler</span></li><li fid=\"u89626c14\" data-lake-id=\"u2a65ca20\" id=\"u2a65ca20\"><span data-lake-id=\"ue6ac6957\" id=\"ue6ac6957\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">函数代码如下：</span></li></ol><p data-lake-id=\"u5cee9009\" id=\"u5cee9009\"><span data-lake-id=\"u77e0df4b\" id=\"u77e0df4b\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">​</span><br></p><p data-lake-id=\"u2b61f06d\" id=\"u2b61f06d\"><strong><span data-lake-id=\"u4d1e0470\" id=\"u4d1e0470\">Python 2.7版本代码：</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22python%22%2C%22code%22%3A%22%23%20-*-%20coding%3A%20utf8%20-*-%5Cnimport%20requests%5Cndef%20main_handler(event%2C%20context)%3A%5Cn%20%20%20%20r%20%3D%20requests.post(%5C%22https%3A%2F%2Fapi.github.com%2Frepos%2Fxianrenqh%2Fhui_blog_hexo%2Factions%2Fworkflows%2F23465728%2Fdispatches%5C%22%2C%5Cn%20%20%20%20json%20%3D%20%7B%5C%22ref%5C%22%3A%20%5C%22master%5C%22%7D%2C%5Cn%20%20%20%20headers%20%3D%20%7B%5C%22User-Agent%5C%22%3A'curl%2F7.52.1'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Accept'%3A%20'application%2Fvnd.github.v3%2Bjson'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20'Authorization'%3A%20'token%20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'%7D)%5Cn%20%20%20%20if%20r.status_code%20%3D%3D%20204%3A%5Cn%20%20%20%20%20%20%20%20return%20%5C%22This's%20OK!%5C%22%20%5Cn%20%20%20%20else%3A%5Cn%20%20%20%20%20%20%20%20return%20r.status_code%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22XTq9S%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u0bc4795e\" id=\"u0bc4795e\"><strong><span data-lake-id=\"u32912d24\" id=\"u32912d24\">Python 3.6 版本代码：</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22python%22%2C%22code%22%3A%22import%20requests%5Cnimport%20json%5Cn%5Cndef%20run()%3A%5Cn%20%20%20%20%20%20%20%20payload%20%3D%20json.dumps(%7B%5C%22ref%5C%22%3A%20%5C%22master%5C%22%7D)%5Cn%20%20%20%20%20%20%20%20header%20%3D%20%7B'Authorization'%3A%20'token%20GitHubToken'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5C%22Accept%5C%22%3A%20%5C%22application%2Fvnd.github.v3%2Bjson%5C%22%7D%5Cn%20%20%20%20%20%20%20%20response_decoded_json%20%3D%20requests.post(%5Cn%20%20%20%20%20%20%20%20%20%20%20%20f'https%3A%2F%2Fapi.github.com%2Frepos%2FGithub%E8%B4%A6%E5%8F%B7%2FGithub%E9%A1%B9%E7%9B%AE%E5%90%8D%2Factions%2Fworkflows%2FGithubAction%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%90%8D%E7%A7%B0%E6%88%96ID%2Fdispatches'%2C%5Cn%20%20%20%20%20%20%20%20%20%20%20%20data%3Dpayload%2C%20headers%3Dheader)%5Cn%5Cn%23%20%E4%BA%91%E5%87%BD%E6%95%B0%E5%85%A5%E5%8F%A3%5Cndef%20main_handler(event%2C%20context)%3A%5Cn%20%20%20%20return%20run()%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22tpV63%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><ol list=\"u2879c976\" start=\"8\"><li fid=\"ud6f5e768\" data-lake-id=\"ub27a9ef2\" id=\"ub27a9ef2\"><span data-lake-id=\"ucceff958\" id=\"ucceff958\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">函数代码中的 </span><strong><span data-lake-id=\"u87ab1f27\" id=\"u87ab1f27\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">GitHubToken、Github账号、Github项目名、GithubAction工作流名称或ID</span></strong><span data-lake-id=\"ua0b368de\" id=\"ua0b368de\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\"> 需要根据自己的账号及项目填写。具体的API调用规则可参考: </span><a href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\" target=\"_blank\" data-lake-id=\"ub240d8da\" id=\"ub240d8da\"><span data-lake-id=\"ua304c28c\" id=\"ua304c28c\">GithubDoc</span></a><span data-lake-id=\"u25df7810\" id=\"u25df7810\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">.</span></li></ol><p data-lake-id=\"uc8def2c4\" id=\"uc8def2c4\"><span data-lake-id=\"uc4ca5017\" id=\"uc4ca5017\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">​</span><br></p><p data-lake-id=\"uf6fffc2d\" id=\"uf6fffc2d\"><strong><span data-lake-id=\"udc08fa67\" id=\"udc08fa67\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">获取GithubAction工作流ID接口：</span></strong></p><p data-lake-id=\"u160a1418\" id=\"u160a1418\"><strong><span data-lake-id=\"u6b9792ee\" id=\"u6b9792ee\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">url: </span></strong><span data-lake-id=\"udb0f91c0\" id=\"udb0f91c0\">https://api.github.com/repos/你的用户名/你的项目名/actions/workflows</span></p><p data-lake-id=\"ua3e6cc9a\" id=\"ua3e6cc9a\"><span data-lake-id=\"u98957c20\" id=\"u98957c20\">method: get</span></p><p data-lake-id=\"ue30637ab\" id=\"ue30637ab\"><span data-lake-id=\"u7e0e50a9\" id=\"u7e0e50a9\">header:</span></p><card type=\"block\" name=\"table\" value=\"data:%7B%22id%22%3A%22pYGzu%22%2C%22rows%22%3A2%2C%22cols%22%3A2%2C%22html%22%3A%22%3Ctable%20data-lake-id%3D%5C%22pYGzu%5C%22%20id%3D%5C%22pYGzu%5C%22%20class%3D%5C%22lake-table%5C%22%20style%3D%5C%22width%3A%20557px%5C%22%3E%3Ccolgroup%3E%3Ccol%20width%3D%5C%22250%5C%22%3E%3Ccol%20width%3D%5C%22307%5C%22%3E%3C%2Fcolgroup%3E%3Ctbody%3E%3Ctr%20data-lake-id%3D%5C%22u4de2e0c4%5C%22%20id%3D%5C%22u4de2e0c4%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u0dac481b%5C%22%20id%3D%5C%22u0dac481b%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u6e9a3ae7%5C%22%20id%3D%5C%22u6e9a3ae7%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22udf9b8980%5C%22%20id%3D%5C%22udf9b8980%5C%22%3EAuthorization%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ucee8986e%5C%22%20id%3D%5C%22ucee8986e%5C%22%3E%3Cp%20data-lake-id%3D%5C%22uf77ec238%5C%22%20id%3D%5C%22uf77ec238%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u8390ab32%5C%22%20id%3D%5C%22u8390ab32%5C%22%3Etoken%20%E4%BD%A0%E7%9A%84token%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%20data-lake-id%3D%5C%22u80cf27a8%5C%22%20id%3D%5C%22u80cf27a8%5C%22%3E%3Ctd%20data-lake-id%3D%5C%22u88c00f86%5C%22%20id%3D%5C%22u88c00f86%5C%22%3E%3Cp%20data-lake-id%3D%5C%22u698ea179%5C%22%20id%3D%5C%22u698ea179%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22ubab26e8d%5C%22%20id%3D%5C%22ubab26e8d%5C%22%3EAccept%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3Ctd%20data-lake-id%3D%5C%22ud2e4d70d%5C%22%20id%3D%5C%22ud2e4d70d%5C%22%3E%3Cp%20data-lake-id%3D%5C%22ud99dc9f1%5C%22%20id%3D%5C%22ud99dc9f1%5C%22%3E%3Cspan%20data-lake-id%3D%5C%22u09c877bc%5C%22%20id%3D%5C%22u09c877bc%5C%22%3Eapplication%2Fvnd.github.v3%2Bjson%3C%2Fspan%3E%3C%2Fp%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftbody%3E%3C%2Ftable%3E%22%2C%22margin%22%3Atrue%2C%22widthMode%22%3A%22contain%22%7D\"></card><p data-lake-id=\"u146deb29\" id=\"u146deb29\"><span data-lake-id=\"u5125bbd6\" id=\"u5125bbd6\">body: {ref:master'}</span></p><p data-lake-id=\"u3d932b65\" id=\"u3d932b65\"><span data-lake-id=\"u188aad5c\" id=\"u188aad5c\">​</span><br></p><p data-lake-id=\"u19e1913b\" id=\"u19e1913b\" style=\"text-indent: 2em\"><span data-lake-id=\"uc6b4487e\" id=\"uc6b4487e\">​</span><br></p><p data-lake-id=\"uf84209ab\" id=\"uf84209ab\"><strong><span data-lake-id=\"u139362cd\" id=\"u139362cd\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">PHP请求案例：</span></strong></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22php%22%2C%22code%22%3A%22%2F%2F%20Generated%20by%20ApiPost%3A%20https%3A%2F%2Fwww.apipost.cn%2F%5Cn%24ch%20%3D%20curl_init()%3B%5Cn%5Cncurl_setopt(%24ch%2C%20CURLOPT_URL%2C%20'https%3A%2F%2Fapi.github.com%2Frepos%2F%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%2F%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D%2Factions%2Fworkflows')%3B%5Cncurl_setopt(%24ch%2C%20CURLOPT_RETURNTRANSFER%2C%201)%3B%5Cncurl_setopt(%24ch%2C%20CURLOPT_CUSTOMREQUEST%2C%20'GET')%3B%5Cn%5Cncurl_setopt(%24ch%2C%20CURLOPT_POSTFIELDS%2C%20%5C%22%7Bref%3Amaster'%7D'%5C%22)%3B%5Cn%5Cn%24headers%20%3D%20array()%3B%5Cn%24headers%5B%5D%20%3D%20'User-Agent%3A%20Apipost%20client%20Runtime%2F%2Bhttps%3A%2F%2Fwww.apipost.cn%2F'%3B%5Cn%24headers%5B%5D%20%3D%20'Authorization%3A%20token%20%E4%BD%A0%E7%9A%84TOKEN'%3B%5Cn%24headers%5B%5D%20%3D%20'Accept%3A%20application%2Fvnd.github.v3%2Bjson'%3B%5Cn%24headers%5B%5D%20%3D%20'Content-Type%3A%20application%2Fjson'%3B%5Cncurl_setopt(%24ch%2C%20CURLOPT_HTTPHEADER%2C%20%24headers)%3B%5Cn%5Cn%24result%20%3D%20curl_exec(%24ch)%3B%5Cnif%20(curl_errno(%24ch))%20%7B%5Cn%20%20%20%20echo%20'Error%3A'%20.%20curl_error(%24ch)%3B%5Cn%7D%5Cncurl_close(%24ch)%3B%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22R03kz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"ua9738bac\" id=\"ua9738bac\"><span data-lake-id=\"uc0050a30\" id=\"uc0050a30\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">Python请求案例：</span></p><card type=\"inline\" name=\"codeblock\" value=\"data:%7B%22mode%22%3A%22python%22%2C%22code%22%3A%22import%20requests%5Cn%5Cnheaders%20%3D%20%7B%5Cn%20%20%20%20'User-Agent'%3A%20'Apipost%20client%20Runtime%2F%2Bhttps%3A%2F%2Fwww.apipost.cn%2F'%2C%5Cn%20%20%20%20'Authorization'%3A%20'token%20%E4%BD%A0%E7%9A%84token'%2C%5Cn%20%20%20%20'Accept'%3A%20'application%2Fvnd.github.v3%2Bjson'%2C%5Cn%20%20%20%20'Content-Type'%3A%20'application%2Fjson'%2C%5Cn%7D%5Cn%5Cndata%20%3D%20'%7Bref%3Amaster%7D'%5Cn%5Cnresponse%20%3D%20requests.post('https%3A%2F%2Fapi.github.com%2Frepos%2F%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%2F%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D%2Factions%2Fworkflows'%2C%20headers%3Dheaders%2C%20data%3Ddata)%5Cn%22%2C%22autoWrap%22%3Afalse%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22Github%20Light%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22W6n9W%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card><p data-lake-id=\"u54b649a5\" id=\"u54b649a5\"><span data-lake-id=\"u2ea7a155\" id=\"u2ea7a155\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">​</span><br></p><ol list=\"u2879c976\" start=\"9\"><li fid=\"ud6f5e768\" data-lake-id=\"u6f332f45\" id=\"u6f332f45\"><span data-lake-id=\"u45543b28\" id=\"u45543b28\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">具体填写如下图所示：</span></li></ol><p data-lake-id=\"ufb2ae483\" id=\"ufb2ae483\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649401818211-43e43680-9183-420c-af31-9011030b7073.png%22%2C%22taskId%22%3A%22uf157aaf6-4213-4b8f-a03f-0a14cc3be20%22%2C%22clientId%22%3A%22ufda8d8b7-9673-4%22%2C%22originalType%22%3A%22binary%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A156866%2C%22from%22%3A%22ui%22%2C%22originWidth%22%3A1642%2C%22originHeight%22%3A1204%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E6%96%B0%E5%BB%BA%20%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%20%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%20%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E6%A8%A1%E7%89%88%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E6%88%96%E5%BA%94%E7%94%A8%20%E4%BD%BF%E7%94%A8HELLOWORLD%E7%A4%BA%E4%BE%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0%20%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%20%E5%87%BD%E6%95%B0%E5%90%8D%E7%A7%B0%20HELLOWORLD-1623250991%20%E5%8F%AA%E8%83%BD%E5%8C%85%E5%90%AB%E5%AD%97%E6%AF%8D%2C%E6%95%B0%E5%AD%97%2C%E4%B8%8B%E5%88%92%E7%BA%BF%2C%E8%BF%9E%E5%AD%97%E7%AC%A6%2C%E4%BB%A5%E5%AD%97%E6%AF%8D%E5%BC%80%E5%A4%B4%2C%E4%BB%A5%E6%95%B0%E5%AD%97%E6%88%96%E5%AD%97%E6%AF%8D%E7%BB%93%E5%B0%BE%2C2-60%E4%B8%AA%E5%AD%97%E7%AC%A6%20%E5%B9%BF%E5%B7%9E%20%E5%9C%B0%E5%9F%9F%20%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%20PYTHON3.6%20%E5%87%BD%E6%95%B0%E4%BB%A3%E7%A0%81%20%E9%80%9A%E8%BF%87COS%20%E4%B8%8A%E4%BC%A0AP%E5%8C%85%20%E6%9C%AC%E5%9C%B0%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%A4%B9%20%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%20%E6%9C%AC%E5%9C%B0%E4%B8%8A%E4%BC%A0ZIP%E5%8C%85%20%E6%8F%90%E4%BA%A4%E6%96%B9%E6%B3%95%20%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95%20INDEXMAIN_HANDIER%20%E7%BC%96%E8%BE%91%20%E7%AA%97%E5%8F%A3%20%E6%96%87%E4%BB%B6%20LITE%20CLOUD%20STUDIO%20INDEXPY%20REQUESTS%20INDEXPY%20RUN()%3A%20PAYLOAD%20%3A%20JSON.DUMPS(F'REF%5C%22%3A%20%5C%22MAIN%5C%22%5D)%20('AUTHORIZATION'%3A'TOKEN%20%20GITHUBTOKEN'%2C%20HEADER%20%5C%22ACCEPT*%3A%5C%22APPLICATION%2FVND.GITHUB.V3%2BJSON%5C%22%20ESPONSE_DECODED_JSON%20%5C%22%20REQUESTS.POST(%20HTTPS%3A%2F%2FAP%2F.BITHUB%3ACOB%2FTEPOS%2FGITHUO%E7%B3%BB%E5%8F%B7%2F6STHUB%E9%A1%B9%E7%9B%AE%E5%90%8D%2F8CTIONS%2FWORKFLOWS%2FGITHUBACTION%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%90%8D%E6%A0%B8%E6%88%901D%2F%20RE%20DATA%20PAYLOAD%2CHEADERSHEADER)%20%E4%BA%91%E5%87%BD%E6%95%B0%E5%85%A5%E5%8F%A3%20DEF%20MAIN_HANDLER(EVENT%2C%20CONTEXT)%3A%20RETURN%20RUN()%20%E8%A1%8C%3A12%E5%88%97%3A8%20H.HELLOWORLD-1623250991%20UTF-8%20PYTHON%20%E5%8F%96%E6%B6%88%20%E5%AE%8C%E6%88%90%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A53.846443%2C%22y%22%3A11.54531%2C%22width%22%3A39.671457%2C%22height%22%3A20.525005999999998%2C%22text%22%3A%22%E6%96%B0%E5%BB%BA%22%7D%2C%7B%22x%22%3A241.14072%2C%22y%22%3A97.19254%2C%22width%22%3A51.50310999999999%2C%22height%22%3A13.883410000000012%2C%22text%22%3A%22%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F%22%7D%2C%7B%22x%22%3A586.92786%2C%22y%22%3A112.80414%2C%22width%22%3A74.65521000000001%2C%22height%22%3A18.949519999999993%2C%22text%22%3A%22%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%22%7D%2C%7B%22x%22%3A347.34906%2C%22y%22%3A113.449875%2C%22width%22%3A58.23116999999996%2C%22height%22%3A16.286124999999984%2C%22text%22%3A%22%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%22%7D%2C%7B%22x%22%3A345.55704%2C%22y%22%3A136.67055%2C%22width%22%3A209.49046000000004%2C%22height%22%3A15.971310000000017%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E6%A8%A1%E7%89%88%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0%E6%88%96%E5%BA%94%E7%94%A8%22%7D%2C%7B%22x%22%3A587.17346%2C%22y%22%3A137.43112%2C%22width%22%3A193.42627000000005%2C%22height%22%3A17.492220000000003%2C%22text%22%3A%22%E4%BD%BF%E7%94%A8HELLOWORLD%E7%A4%BA%E4%BE%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0%22%7D%2C%7B%22x%22%3A240.85934%2C%22y%22%3A188.85854%2C%22width%22%3A59.09076000000002%2C%22height%22%3A18.799769999999995%2C%22text%22%3A%22%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%22%7D%2C%7B%22x%22%3A239.95341%2C%22y%22%3A235.30858%2C%22width%22%3A57.36494999999999%2C%22height%22%3A17.11667%2C%22text%22%3A%22%E5%87%BD%E6%95%B0%E5%90%8D%E7%A7%B0%22%7D%2C%7B%22x%22%3A342.92117%2C%22y%22%3A238.6543%2C%22width%22%3A135.85535%2C%22height%22%3A12.88046%2C%22text%22%3A%22HELLOWORLD-1623250991%22%7D%2C%7B%22x%22%3A331.4465%2C%22y%22%3A265.96967%2C%22width%22%3A467.62216%2C%22height%22%3A19.675110000000018%2C%22text%22%3A%22%E5%8F%AA%E8%83%BD%E5%8C%85%E5%90%AB%E5%AD%97%E6%AF%8D%2C%E6%95%B0%E5%AD%97%2C%E4%B8%8B%E5%88%92%E7%BA%BF%2C%E8%BF%9E%E5%AD%97%E7%AC%A6%2C%E4%BB%A5%E5%AD%97%E6%AF%8D%E5%BC%80%E5%A4%B4%2C%E4%BB%A5%E6%95%B0%E5%AD%97%E6%88%96%E5%AD%97%E6%AF%8D%E7%BB%93%E5%B0%BE%2C2-60%E4%B8%AA%E5%AD%97%E7%AC%A6%22%7D%2C%7B%22x%22%3A354.02203%2C%22y%22%3A306.55737%2C%22width%22%3A39.14295000000004%2C%22height%22%3A17.704330000000027%2C%22text%22%3A%22%E5%B9%BF%E5%B7%9E%22%7D%2C%7B%22x%22%3A240.8758%2C%22y%22%3A308.46915%2C%22width%22%3A33.12764999999999%2C%22height%22%3A14.386349999999993%2C%22text%22%3A%22%E5%9C%B0%E5%9F%9F%22%7D%2C%7B%22x%22%3A239.60342%2C%22y%22%3A354.6888%2C%22width%22%3A57.53542999999999%2C%22height%22%3A14.660300000000007%2C%22text%22%3A%22%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%22%7D%2C%7B%22x%22%3A346.19647%2C%22y%22%3A356.0339%2C%22width%22%3A55.260230000000035%2C%22height%22%3A13.616499999999974%2C%22text%22%3A%22PYTHON3.6%22%7D%2C%7B%22x%22%3A241.61674%2C%22y%22%3A434.87344%2C%22width%22%3A57.306910000000016%2C%22height%22%3A15.39382999999998%2C%22text%22%3A%22%E5%87%BD%E6%95%B0%E4%BB%A3%E7%A0%81%22%7D%2C%7B%22x%22%3A676.3889%2C%22y%22%3A494.1387%2C%22width%22%3A95.8963%2C%22height%22%3A14.900800000000004%2C%22text%22%3A%22%E9%80%9A%E8%BF%87COS%20%E4%B8%8A%E4%BC%A0AP%E5%8C%85%22%7D%2C%7B%22x%22%3A550.1033%2C%22y%22%3A494.1923%2C%22width%22%3A89.19780000000003%2C%22height%22%3A14.669730000000015%2C%22text%22%3A%22%E6%9C%AC%E5%9C%B0%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%A4%B9%22%7D%2C%7B%22x%22%3A355.41455%2C%22y%22%3A494.42648%2C%22width%22%3A47.51124999999996%2C%22height%22%3A14.052369999999996%2C%22text%22%3A%22%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%22%7D%2C%7B%22x%22%3A441.35782%2C%22y%22%3A495.02435%2C%22width%22%3A77.46022999999997%2C%22height%22%3A14.560819999999978%2C%22text%22%3A%22%E6%9C%AC%E5%9C%B0%E4%B8%8A%E4%BC%A0ZIP%E5%8C%85%22%7D%2C%7B%22x%22%3A240.19124%2C%22y%22%3A496.17368%2C%22width%22%3A57.88896%2C%22height%22%3A13.082969999999989%2C%22text%22%3A%22%E6%8F%90%E4%BA%A4%E6%96%B9%E6%B3%95%22%7D%2C%7B%22x%22%3A240.41556%2C%22y%22%3A533.5213%2C%22width%22%3A57.43762000000001%2C%22height%22%3A14.363339999999994%2C%22text%22%3A%22%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95%22%7D%2C%7B%22x%22%3A343.83228%2C%22y%22%3A534.29834%2C%22width%22%3A112.07265999999998%2C%22height%22%3A13.543699999999944%2C%22text%22%3A%22INDEXMAIN_HANDIER%22%7D%2C%7B%22x%22%3A497.16483%2C%22y%22%3A576.1529%2C%22width%22%3A31.865669999999966%2C%22height%22%3A17.926699999999983%2C%22text%22%3A%22%E7%BC%96%E8%BE%91%22%7D%2C%7B%22x%22%3A554.8654%2C%22y%22%3A577.1142%2C%22width%22%3A29.794199999999933%2C%22height%22%3A16.7346%2C%22text%22%3A%22%E7%AA%97%E5%8F%A3%22%7D%2C%7B%22x%22%3A440.44742%2C%22y%22%3A577.26556%2C%22width%22%3A29.21483999999998%2C%22height%22%3A16.48703999999998%2C%22text%22%3A%22%E6%96%87%E4%BB%B6%22%7D%2C%7B%22x%22%3A380.39603%2C%22y%22%3A578.39386%2C%22width%22%3A26.310870000000023%2C%22height%22%3A14.167789999999968%2C%22text%22%3A%22LITE%22%7D%2C%7B%22x%22%3A269.33905%2C%22y%22%3A578.4446%2C%22width%22%3A100.02100000000002%2C%22height%22%3A16.256599999999935%2C%22text%22%3A%22CLOUD%20STUDIO%22%7D%2C%7B%22x%22%3A262.0294%2C%22y%22%3A606.3571%2C%22width%22%3A56.948350000000005%2C%22height%22%3A15.629000000000019%2C%22text%22%3A%22INDEXPY%22%7D%2C%7B%22x%22%3A619.0119%2C%22y%22%3A664.1422%2C%22width%22%3A55.97064%2C%22height%22%3A12.718200000000024%2C%22text%22%3A%22REQUESTS%22%7D%2C%7B%22x%22%3A317.95715%2C%22y%22%3A668.00885%2C%22width%22%3A47.50732999999997%2C%22height%22%3A13.753909999999905%2C%22text%22%3A%22INDEXPY%22%7D%2C%7B%22x%22%3A600.0682%2C%22y%22%3A712.9318%2C%22width%22%3A39.988599999999906%2C%22height%22%3A11.981160000000045%2C%22text%22%3A%22RUN()%3A%22%7D%2C%7B%22x%22%3A621.44556%2C%22y%22%3A725.9829%2C%22width%22%3A273.64333999999997%2C%22height%22%3A15.727200000000039%2C%22text%22%3A%22PAYLOAD%20%3A%20JSON.DUMPS(F'REF%5C%22%3A%20%5C%22MAIN%5C%22%5D)%22%7D%2C%7B%22x%22%3A693.4275%2C%22y%22%3A743.76715%2C%22width%22%3A267.2871%2C%22height%22%3A13.722599999999943%2C%22text%22%3A%22('AUTHORIZATION'%3A'TOKEN%20%20GITHUBTOKEN'%2C%22%7D%2C%7B%22x%22%3A625.77997%2C%22y%22%3A744.7015%2C%22width%22%3A41.08098999999993%2C%22height%22%3A12.884900000000016%2C%22text%22%3A%22HEADER%22%7D%2C%7B%22x%22%3A694.7103%2C%22y%22%3A759.5974%2C%22width%22%3A302.0371%2C%22height%22%3A14.348799999999983%2C%22text%22%3A%22%5C%22ACCEPT*%3A%5C%22APPLICATION%2FVND.GITHUB.V3%2BJSON%5C%22%22%7D%2C%7B%22x%22%3A641.3942%2C%22y%22%3A775.8396%2C%22width%22%3A275.65150000000006%2C%22height%22%3A14.869929999999954%2C%22text%22%3A%22ESPONSE_DECODED_JSON%20%5C%22%20REQUESTS.POST(%22%7D%2C%7B%22x%22%3A671.4511%2C%22y%22%3A788.86786%2C%22width%22%3A661.0686000000001%2C%22height%22%3A20.890340000000037%2C%22text%22%3A%22HTTPS%3A%2F%2FAP%2F.BITHUB%3ACOB%2FTEPOS%2FGITHUO%E7%B3%BB%E5%8F%B7%2F6STHUB%E9%A1%B9%E7%9B%AE%E5%90%8D%2F8CTIONS%2FWORKFLOWS%2FGITHUBACTION%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%90%8D%E6%A0%B8%E6%88%901D%2F%22%7D%2C%7B%22x%22%3A530.38727%2C%22y%22%3A822.46643%2C%22width%22%3A15.285760000000096%2C%22height%22%3A18.969420000000014%2C%22text%22%3A%22RE%22%7D%2C%7B%22x%22%3A655.978%2C%22y%22%3A824.3163%2C%22width%22%3A200.0317%2C%22height%22%3A12.506600000000049%2C%22text%22%3A%22DATA%20PAYLOAD%2CHEADERSHEADER)%22%7D%2C%7B%22x%22%3A574.69135%2C%22y%22%3A854.93427%2C%22width%22%3A69.33474999999999%2C%22height%22%3A13.541870000000017%2C%22text%22%3A%22%E4%BA%91%E5%87%BD%E6%95%B0%E5%85%A5%E5%8F%A3%22%7D%2C%7B%22x%22%3A568.4269%2C%22y%22%3A871.16956%2C%22width%22%3A233.57304%2C%22height%22%3A14.083039999999983%2C%22text%22%3A%22DEF%20MAIN_HANDLER(EVENT%2C%20CONTEXT)%3A%22%7D%2C%7B%22x%22%3A597.2365%2C%22y%22%3A888.4658%2C%22width%22%3A86.55100000000004%2C%22height%22%3A13.0073000000001%2C%22text%22%3A%22RETURN%20RUN()%22%7D%2C%7B%22x%22%3A1315.5837%2C%22y%22%3A1049.3069%2C%22width%22%3A57.390300000000025%2C%22height%22%3A15.770399999999881%2C%22text%22%3A%22%E8%A1%8C%3A12%E5%88%97%3A8%22%7D%2C%7B%22x%22%3A294.0775%2C%22y%22%3A1050.1919%2C%22width%22%3A144.07622000000003%2C%22height%22%3A13.276900000000069%2C%22text%22%3A%22H.HELLOWORLD-1623250991%22%7D%2C%7B%22x%22%3A1408.9469%2C%22y%22%3A1050.6234%2C%22width%22%3A36.78280000000018%2C%22height%22%3A14.110900000000129%2C%22text%22%3A%22UTF-8%22%7D%2C%7B%22x%22%3A1479.9486%2C%22y%22%3A1051.5483%2C%22width%22%3A40.56079999999997%2C%22height%22%3A14.410000000000082%2C%22text%22%3A%22PYTHON%22%7D%2C%7B%22x%22%3A318.59656%2C%22y%22%3A1172.8607%2C%22width%22%3A28.066370000000006%2C%22height%22%3A14.173199999999952%2C%22text%22%3A%22%E5%8F%96%E6%B6%88%22%7D%2C%7B%22x%22%3A240.66383%2C%22y%22%3A1173.2751%2C%22width%22%3A30.70201%2C%22height%22%3A13.54469999999992%2C%22text%22%3A%22%E5%AE%8C%E6%88%90%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u6ebd4bae%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\"></card><span data-lake-id=\"ucfcecbea\" id=\"ucfcecbea\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\"><br /><br /></span></p><ol list=\"u2879c976\" start=\"10\"><li fid=\"ud6f5e768\" data-lake-id=\"u04f9304e\" id=\"u04f9304e\"><span data-lake-id=\"ua115685e\" id=\"ua115685e\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值</span><strong><span data-lake-id=\"u33118e3a\" id=\"u33118e3a\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">900</span></strong><span data-lake-id=\"u5f7797e2\" id=\"u5f7797e2\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">秒：</span></li></ol><p data-lake-id=\"u547aa1d9\" id=\"u547aa1d9\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png%22%2C%22taskId%22%3A%22u1a87cab6-45c8-4639-900e-a9517e8d1a8%22%2C%22clientId%22%3A%22u382e8e49-5c96-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A37309%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A527%2C%22originHeight%22%3A424%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%20%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%97%A5%E5%BF%97%E4%BC%9A%E9%BB%98%E8%AE%A4%E6%8A%95%E9%80%92%E5%88%B0%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1SCF%E4%B8%93%E7%94%A8%E6%97%A5%E5%BF%97%E4%B8%BB%E9%A2%98.%E8%85%BE%E8%AE%AF%E4%BA%91%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1(%20%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%20DEFAULT%20%E6%8F%8F%E8%BF%B0%20HELLOWORLD%E7%A9%BA%E7%99%BD%E6%A8%A1%E6%9D%BF%E5%87%BD%E6%95%B0%20%E6%9C%80%E5%A4%A7%E6%94%AF%E6%8C%811000%E4%B8%AA%E8%8B%B1%E6%96%87%E5%AD%97%E6%AF%8D%2C%E6%95%B0%E5%AD%97%2C%E7%A9%BA%E6%A0%BC%2C%E9%80%97%E5%8F%B7%2C%E5%8F%A5%E5%8F%B7%2C%E4%B8%AD%E6%96%87%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%20%E5%86%85%E5%AD%98%20128MB%20%E6%89%A7%E8%A1%8C%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%20%E7%A7%92%20900%20HTTPS%3A%2F%2FBLOG.CSDN.NET%2F1937GZJLZY%20%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%3A1-900%E7%A7%92%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A33.784588%2C%22y%22%3A13.751564%2C%22width%22%3A58.850421999999995%2C%22height%22%3A16.484949%2C%22text%22%3A%22%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%22%7D%2C%7B%22x%22%3A131.06332%2C%22y%22%3A14.162007%2C%22width%22%3A395.21078%2C%22height%22%3A15.508617000000001%2C%22text%22%3A%22%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%97%A5%E5%BF%97%E4%BC%9A%E9%BB%98%E8%AE%A4%E6%8A%95%E9%80%92%E5%88%B0%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1SCF%E4%B8%93%E7%94%A8%E6%97%A5%E5%BF%97%E4%B8%BB%E9%A2%98.%E8%85%BE%E8%AE%AF%E4%BA%91%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1(%22%7D%2C%7B%22x%22%3A35.110134%2C%22y%22%3A74.75589%2C%22width%22%3A51.078745999999995%2C%22height%22%3A12.562520000000006%2C%22text%22%3A%22%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%22%7D%2C%7B%22x%22%3A138.67671%2C%22y%22%3A76.599%2C%22width%22%3A38.70760999999999%2C%22height%22%3A10.627049999999997%2C%22text%22%3A%22DEFAULT%22%7D%2C%7B%22x%22%3A33.642567%2C%22y%22%3A120.5679%2C%22width%22%3A27.58596%2C%22height%22%3A14.319020000000009%2C%22text%22%3A%22%E6%8F%8F%E8%BF%B0%22%7D%2C%7B%22x%22%3A136.90938%2C%22y%22%3A126.43972%2C%22width%22%3A135.47615000000002%2C%22height%22%3A13.807639999999992%2C%22text%22%3A%22HELLOWORLD%E7%A9%BA%E7%99%BD%E6%A8%A1%E6%9D%BF%E5%87%BD%E6%95%B0%22%7D%2C%7B%22x%22%3A126.82357%2C%22y%22%3A228.53386%2C%22width%22%3A318.50323%2C%22height%22%3A14.166259999999994%2C%22text%22%3A%22%E6%9C%80%E5%A4%A7%E6%94%AF%E6%8C%811000%E4%B8%AA%E8%8B%B1%E6%96%87%E5%AD%97%E6%AF%8D%2C%E6%95%B0%E5%AD%97%2C%E7%A9%BA%E6%A0%BC%2C%E9%80%97%E5%8F%B7%2C%E5%8F%A5%E5%8F%B7%2C%E4%B8%AD%E6%96%87%22%7D%2C%7B%22x%22%3A35.887737%2C%22y%22%3A266.61444%2C%22width%22%3A57.622213%2C%22height%22%3A15.845860000000016%2C%22text%22%3A%22%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%22%7D%2C%7B%22x%22%3A34.70481%2C%22y%22%3A313.67587%2C%22width%22%3A26.547815%2C%22height%22%3A14.234560000000045%2C%22text%22%3A%22%E5%86%85%E5%AD%98%22%7D%2C%7B%22x%22%3A139.66594%2C%22y%22%3A320.15808%2C%22width%22%3A37.424679999999995%2C%22height%22%3A12.23132000000004%2C%22text%22%3A%22128MB%22%7D%2C%7B%22x%22%3A34.219437%2C%22y%22%3A365.14294%2C%22width%22%3A75.134303%2C%22height%22%3A14.083989999999972%2C%22text%22%3A%22%E6%89%A7%E8%A1%8C%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%22%7D%2C%7B%22x%22%3A335.8715%2C%22y%22%3A365.48093%2C%22width%22%3A15.711259999999982%2C%22height%22%3A16.432129999999972%2C%22text%22%3A%22%E7%A7%92%22%7D%2C%7B%22x%22%3A138.09671%2C%22y%22%3A367.99167%2C%22width%22%3A21.41776999999999%2C%22height%22%3A10.241930000000025%2C%22text%22%3A%22900%22%7D%2C%7B%22x%22%3A290.4638%2C%22y%22%3A397.55966%2C%22width%22%3A228.60109999999997%2C%22height%22%3A17.720039999999983%2C%22text%22%3A%22HTTPS%3A%2F%2FBLOG.CSDN.NET%2F1937GZJLZY%22%7D%2C%7B%22x%22%3A126.48014%2C%22y%22%3A398.02975%2C%22width%22%3A106.15421%2C%22height%22%3A12.776280000000042%2C%22text%22%3A%22%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%3A1-900%E7%A7%92%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ua156c086%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><ol list=\"u2879c976\" start=\"11\"><li fid=\"ud6f5e768\" data-lake-id=\"u16b44e74\" id=\"u16b44e74\"><span data-lake-id=\"ua6b45bfe\" id=\"ua6b45bfe\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的Cron表达式，这里的</span><strong><span data-lake-id=\"u393c3f26\" id=\"u393c3f26\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">Cron</span></strong><span data-lake-id=\"u2183298c\" id=\"u2183298c\" class=\"lake-fontsize-12\" style=\"color: rgba(0, 0, 0, 0.75)\">当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：</span></li></ol><blockquote data-lake-id=\"u09a00c42\" id=\"u09a00c42\"><p data-lake-id=\"u48adafc9\" id=\"u48adafc9\"><span data-lake-id=\"u095b1ff5\" id=\"u095b1ff5\">0 0 16 * * * *</span></p></blockquote><p data-lake-id=\"u95440f81\" id=\"u95440f81\"><span data-lake-id=\"uea319cba\" id=\"uea319cba\" class=\"lake-fontsize-12\" style=\"color: rgb(77, 77, 77)\">表示了每天16点执行1次。</span></p><p data-lake-id=\"u7480ba2d\" id=\"u7480ba2d\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png%22%2C%22taskId%22%3A%22u81d4f3b3-5f0e-4f8c-a2a4-7ca54a07540%22%2C%22clientId%22%3A%22u382e8e49-5c96-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A50170%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A576%2C%22originHeight%22%3A517%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E8%A7%A6%E5%8F%91%E5%99%A8%E9%85%8D%E7%BD%AE%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%20%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%20%E9%BB%98%E8%AE%A4%E6%B5%81%E9%87%8F%20%E8%A7%A6%E5%8F%91%E7%89%88%E6%9C%AC%20%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%20%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F%20%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BC%9A%E6%8C%89%E7%85%A7%E6%8C%87%E5%AE%9A%E5%91%A8%E6%9C%9F%E8%87%AA%E5%8A%A8%E8%A7%A6%E5%8F%91SCF%E5%87%BD%E6%95%B0%2C%E8%AF%A6%E6%83%85%E8%AF%B7%E6%9F%A5%E9%98%85%E6%96%87%E6%A1%A3%20%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%90%8D%E7%A7%B0%20SCF-TIMER-1623250991%20%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%A6%E5%8F%91%E5%91%A8%E6%9C%9F%20%E8%A7%A6%E5%8F%91%E5%91%A8%E6%9C%9F%20CRON%E8%A1%A8%E8%BE%BE%E5%BC%8F%200016***%20CRON%E5%BD%93%E5%89%8D%E4%BB%A5UTC%20%2B8%20%E4%B8%AD%E5%9B%BD%E6%A0%87%E5%87%86%E6%97%B6%E9%97%B4%20%20(CHINA%20%20STANDARD%20%20TIME)%E8%BF%90%E8%A1%8C%20%E5%90%A6%20%E9%99%84%E5%8A%A0%E4%BF%A1%E6%81%AFG%20%E5%90%AF%E7%94%A8%20%E7%AB%8B%E5%8D%B3%E5%90%AF%E7%94%A8%20%E6%9A%82%E4%B8%8D%E5%88%9B%E5%BB%BA%20HTTPS%3A%2F%2FBLOG.CSDN.NET%2F1937GZJLZY%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A16.636131%2C%22y%22%3A6.6780343%2C%22width%22%3A73.97730899999999%2C%22height%22%3A17.3137557%2C%22text%22%3A%22%E8%A7%A6%E5%8F%91%E5%99%A8%E9%85%8D%E7%BD%AE%22%7D%2C%7B%22x%22%3A117.85709%2C%22y%22%3A46.781246%2C%22width%22%3A60.91987%2C%22height%22%3A13.303078%2C%22text%22%3A%22%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%22%7D%2C%7B%22x%22%3A17.891073%2C%22y%22%3A47.911045%2C%22width%22%3A60.954691000000004%2C%22height%22%3A13.154441999999996%2C%22text%22%3A%22%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%22%7D%2C%7B%22x%22%3A236.84875%2C%22y%22%3A110.48151%2C%22width%22%3A49.80941999999999%2C%22height%22%3A13.93365%2C%22text%22%3A%22%E9%BB%98%E8%AE%A4%E6%B5%81%E9%87%8F%22%7D%2C%7B%22x%22%3A117.74642%2C%22y%22%3A110.691895%2C%22width%22%3A50.43376000000001%2C%22height%22%3A13.443480999999991%2C%22text%22%3A%22%E8%A7%A6%E5%8F%91%E7%89%88%E6%9C%AC%22%7D%2C%7B%22x%22%3A236.78967%2C%22y%22%3A156.04955%2C%22width%22%3A49.41708999999997%2C%22height%22%3A13.984949999999998%2C%22text%22%3A%22%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%22%7D%2C%7B%22x%22%3A117.630165%2C%22y%22%3A157.19618%2C%22width%22%3A50.22261499999999%2C%22height%22%3A12.92362%2C%22text%22%3A%22%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F%22%7D%2C%7B%22x%22%3A225.84624%2C%22y%22%3A187.6668%2C%22width%22%3A348.1394200000001%2C%22height%22%3A14.758620000000008%2C%22text%22%3A%22%E5%AE%9A%E6%97%B6%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BC%9A%E6%8C%89%E7%85%A7%E6%8C%87%E5%AE%9A%E5%91%A8%E6%9C%9F%E8%87%AA%E5%8A%A8%E8%A7%A6%E5%8F%91SCF%E5%87%BD%E6%95%B0%2C%E8%AF%A6%E6%83%85%E8%AF%B7%E6%9F%A5%E9%98%85%E6%96%87%E6%A1%A3%22%7D%2C%7B%22x%22%3A116.749725%2C%22y%22%3A227.52922%2C%22width%22%3A89.87666499999999%2C%22height%22%3A17.072180000000003%2C%22text%22%3A%22%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%90%8D%E7%A7%B0%22%7D%2C%7B%22x%22%3A237.12447%2C%22y%22%3A229.90137%2C%22width%22%3A130.48175999999998%2C%22height%22%3A12.656930000000017%2C%22text%22%3A%22SCF-TIMER-1623250991%22%7D%2C%7B%22x%22%3A237.3336%2C%22y%22%3A274.72836%2C%22width%22%3A85.30200000000002%2C%22height%22%3A13.449469999999963%2C%22text%22%3A%22%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%A6%E5%8F%91%E5%91%A8%E6%9C%9F%22%7D%2C%7B%22x%22%3A117.5325%2C%22y%22%3A274.85266%2C%22width%22%3A50.41945000000001%2C%22height%22%3A13.393190000000004%2C%22text%22%3A%22%E8%A7%A6%E5%8F%91%E5%91%A8%E6%9C%9F%22%7D%2C%7B%22x%22%3A117.89853%2C%22y%22%3A319.85577%2C%22width%22%3A64.84939%2C%22height%22%3A14.76452999999998%2C%22text%22%3A%22CRON%E8%A1%A8%E8%BE%BE%E5%BC%8F%22%7D%2C%7B%22x%22%3A236.41077%2C%22y%22%3A321.98785%2C%22width%22%3A60.291709999999966%2C%22height%22%3A11.971930000000043%2C%22text%22%3A%220016***%22%7D%2C%7B%22x%22%3A224.87439%2C%22y%22%3A350.57422%2C%22width%22%3A349.26881%2C%22height%22%3A16.844329999999957%2C%22text%22%3A%22CRON%E5%BD%93%E5%89%8D%E4%BB%A5UTC%20%2B8%20%E4%B8%AD%E5%9B%BD%E6%A0%87%E5%87%86%E6%97%B6%E9%97%B4%20%20(CHINA%20%20STANDARD%20%20TIME)%E8%BF%90%E8%A1%8C%22%7D%2C%7B%22x%22%3A234.94084%2C%22y%22%3A391.85233%2C%22width%22%3A16.7115%2C%22height%22%3A15.03842000000003%2C%22text%22%3A%22%E5%90%A6%22%7D%2C%7B%22x%22%3A118.309395%2C%22y%22%3A392.66623%2C%22width%22%3A63.83586500000001%2C%22height%22%3A13.000300000000038%2C%22text%22%3A%22%E9%99%84%E5%8A%A0%E4%BF%A1%E6%81%AFG%22%7D%2C%7B%22x%22%3A246.01033%2C%22y%22%3A437.96777%2C%22width%22%3A25.701070000000016%2C%22height%22%3A13.166030000000035%2C%22text%22%3A%22%E5%90%AF%E7%94%A8%22%7D%2C%7B%22x%22%3A118.2165%2C%22y%22%3A439.33142%2C%22width%22%3A50.45075%2C%22height%22%3A12.79776000000004%2C%22text%22%3A%22%E7%AB%8B%E5%8D%B3%E5%90%AF%E7%94%A8%22%7D%2C%7B%22x%22%3A116.14255%2C%22y%22%3A488.57266%2C%22width%22%3A50.56288000000001%2C%22height%22%3A14.064459999999997%2C%22text%22%3A%22%E6%9A%82%E4%B8%8D%E5%88%9B%E5%BB%BA%22%7D%2C%7B%22x%22%3A340.63205%2C%22y%22%3A490.73734%2C%22width%22%3A227.68914999999998%2C%22height%22%3A18.006429999999966%2C%22text%22%3A%22HTTPS%3A%2F%2FBLOG.CSDN.NET%2F1937GZJLZY%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22ud642effb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"u7ac738be\" id=\"u7ac738be\"><br></p><p data-lake-id=\"u56f3674a\" id=\"u56f3674a\"><span data-lake-id=\"uf9967cc9\" id=\"uf9967cc9\">触发器也可以选择api调用，创建好后会生成一个api url （webhook地址）。粘贴到对应的位置调用即可。</span></p>",
    "public": 1,
    "status": 0,
    "likes_count": 0,
    "read_count": 145,
    "hits": 145,
    "comments_count": 0,
    "word_count": 827,
    "created_at": "2022-04-08T03:49:09.000Z",
    "updated_at": "2024-04-28T08:34:34.000Z",
    "content_updated_at": "2024-04-28T08:34:34.000Z",
    "published_at": "2022-04-11T01:29:15.000Z",
    "first_published_at": "2022-04-08T05:59:53.823Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 920211722,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  },
  {
    "id": 72580997,
    "type": "Doc",
    "slug": "mgg0te",
    "title": "小灰灰博客hexo版本上线了",
    "description": "categories: [网络集锦]tags: [小灰灰,博客,随笔]cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png#cl...",
    "cover": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png",
    "user_id": 27022430,
    "book_id": 26347916,
    "last_editor_id": 27022430,
    "format": "lake",
    "body_draft": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"uf6fbe31f\" class=\"ne-p\"><span class=\"ne-text\">categories: [网络集锦]</span></p><p id=\"u3e1067c1\" class=\"ne-p\"><span class=\"ne-text\">tags: [小灰灰,博客,随笔]</span></p><p id=\"ue669d1db\" class=\"ne-p\"><span class=\"ne-text\">cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png#clientId=u7f87a94d-b3a6-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u05c878ee&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=351&amp;originWidth=657&amp;originalType=url%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=83954&amp;status=done&amp;style=none&amp;taskId=u8cbb1d27-73c6-4361-91bd-d6f58bc7509&amp;title=</span></p><p id=\"ub6272444\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.</span><span class=\"ne-text\" style=\"color: rgb(38, 38, 38)\">cc</span></p><hr id=\"ljxba\" class=\"ne-hr\"><p id=\"u5db7170d\" class=\"ne-p\"><br></p><h3 id=\"vsM72\"><span class=\"ne-text\">Hello World </span></h3><p id=\"u626aed5e\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ub60bd4d8\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 19px\">首发镇博~~</span></strong></p><p id=\"uf5a1694e\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"uacd21003\" class=\"ne-p\"><span class=\"ne-text\">上线时间：2022-04-07 12:00:00</span></p><p id=\"u8024a72f\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ud665c94a\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png\" width=\"657\" id=\"u05c878ee\" class=\"ne-image\"></p><p id=\"ub6401a5d\" class=\"ne-p\"><br></p></div>",
    "body": "categories: [网络集锦]<br />tags: [小灰灰,博客,随笔]<br />cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png#clientId=u7f87a94d-b3a6-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u05c878ee&margin=%5Bobject%20Object%5D&name=image.png&originHeight=351&originWidth=657&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=83954&status=done&style=none&taskId=u8cbb1d27-73c6-4361-91bd-d6f58bc7509&title=<br />copyright_author_href: https://www.xiaohuihui.net\n\n---\n\n\n<a name=\"vsM72\"></a>\n### Hello World \n\n**首发镇博~~**\n\n上线时间：2022-04-07 12:00:00\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png#clientId=u7f87a94d-b3a6-4&from=paste&id=u05c878ee&originHeight=351&originWidth=657&originalType=url&ratio=1&rotation=0&showTitle=false&size=83954&status=done&style=none&taskId=u8cbb1d27-73c6-4361-91bd-d6f58bc7509&title=)\n\n",
    "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><p id=\"uf6fbe31f\" class=\"ne-p\"><span class=\"ne-text\">categories: [网络集锦]</span></p><p id=\"u3e1067c1\" class=\"ne-p\"><span class=\"ne-text\">tags: [小灰灰,博客,随笔]</span></p><p id=\"ue669d1db\" class=\"ne-p\"><span class=\"ne-text\">cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png#clientId=u7f87a94d-b3a6-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u05c878ee&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=351&amp;originWidth=657&amp;originalType=url%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=83954&amp;status=done&amp;style=none&amp;taskId=u8cbb1d27-73c6-4361-91bd-d6f58bc7509&amp;title=</span></p><p id=\"ub6272444\" class=\"ne-p\"><span class=\"ne-text\">copyright_author_href: https://www.xiaohuihui.net</span></p><hr id=\"ljxba\" class=\"ne-hr\"><p id=\"u5db7170d\" class=\"ne-p\"><br></p><h3 id=\"vsM72\"><span class=\"ne-text\">Hello World </span></h3><p id=\"u626aed5e\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ub60bd4d8\" class=\"ne-p\"><strong><span class=\"ne-text\" style=\"font-size: 19px\">首发镇博~~</span></strong></p><p id=\"uf5a1694e\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"uacd21003\" class=\"ne-p\"><span class=\"ne-text\">上线时间：2022-04-07 12:00:00</span></p><p id=\"u8024a72f\" class=\"ne-p\"><span class=\"ne-text\"></span></p><p id=\"ud665c94a\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png\" width=\"657\" id=\"u05c878ee\" class=\"ne-image\"></p><p id=\"ub6401a5d\" class=\"ne-p\"><br></p></div>",
    "body_lake": "<!doctype lake><meta name=\"doc-version\" content=\"1\" /><meta name=\"typography\" content=\"classic\" /><meta name=\"viewport\" content=\"fixed\" /><p data-lake-id=\"uf6fbe31f\" id=\"uf6fbe31f\"><span data-lake-id=\"ub2f974af\" id=\"ub2f974af\">categories: [网络集锦]</span></p><p data-lake-id=\"u3e1067c1\" id=\"u3e1067c1\"><span data-lake-id=\"ua66f1b17\" id=\"ua66f1b17\">tags: [小灰灰,博客,随笔]</span></p><p data-lake-id=\"ue669d1db\" id=\"ue669d1db\"><span data-lake-id=\"u98718bf3\" id=\"u98718bf3\">cover: https://cdn.nlark.com/yuque/0/2022/png/27022430/1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png#clientId=u7f87a94d-b3a6-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u05c878ee&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=351&amp;originWidth=657&amp;originalType=url%E2%88%B6=1&amp;rotation=0&amp;showTitle=false&amp;size=83954&amp;status=done&amp;style=none&amp;taskId=u8cbb1d27-73c6-4361-91bd-d6f58bc7509&amp;title=</span></p><p data-lake-id=\"ub6272444\" id=\"ub6272444\"><span data-lake-id=\"u11efc98d\" id=\"u11efc98d\">copyright_author_href: https://www.xiaohuihui.net</span></p><card type=\"block\" name=\"hr\" value=\"data:%7B%22id%22%3A%22ljxba%22%7D\"></card><p data-lake-id=\"u5db7170d\" id=\"u5db7170d\"><br></p><h3 data-lake-id=\"vsM72\" id=\"vsM72\"><span data-lake-id=\"ua0986c48\" id=\"ua0986c48\">Hello World </span></h3><p data-lake-id=\"u626aed5e\" id=\"u626aed5e\"><span data-lake-id=\"uc1f214df\" id=\"uc1f214df\">​</span><br></p><p data-lake-id=\"ub60bd4d8\" id=\"ub60bd4d8\"><strong><span data-lake-id=\"uc7f68de1\" id=\"uc7f68de1\" class=\"lake-fontsize-14\">首发镇博~~</span></strong></p><p data-lake-id=\"uf5a1694e\" id=\"uf5a1694e\"><span data-lake-id=\"u8a6ee2fc\" id=\"u8a6ee2fc\">​</span><br></p><p data-lake-id=\"uacd21003\" id=\"uacd21003\"><span data-lake-id=\"u74c84c97\" id=\"u74c84c97\">上线时间：2022-04-07 12:00:00</span></p><p data-lake-id=\"u8024a72f\" id=\"u8024a72f\"><span data-lake-id=\"ud2ae99b8\" id=\"ud2ae99b8\">​</span><br></p><p data-lake-id=\"ud665c94a\" id=\"ud665c94a\"><card type=\"inline\" name=\"image\" value=\"data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2022%2Fpng%2F27022430%2F1649412642465-cba1fe67-6bcd-4869-82b3-115486a6eb3a.png%22%2C%22taskId%22%3A%22u8cbb1d27-73c6-4361-91bd-d6f58bc7509%22%2C%22clientId%22%3A%22u7f87a94d-b3a6-4%22%2C%22originalType%22%3A%22url%22%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A83954%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A657%2C%22originHeight%22%3A351%2C%22ratio%22%3A1%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22search%22%3A%22%E7%94%9F%E6%B4%BB%E6%98%AF%E7%82%B9%E7%82%B9%E6%BB%B4%E6%BB%B4%E7%9A%84%E7%B4%AF%E7%A7%AF%22%2C%22ocrLocations%22%3A%5B%7B%22x%22%3A130.10522%2C%22y%22%3A247.29858%2C%22width%22%3A394.31152999999995%2C%22height%22%3A34.70214999999999%2C%22text%22%3A%22%E7%94%9F%E6%B4%BB%E6%98%AF%E7%82%B9%E7%82%B9%E6%BB%B4%E6%BB%B4%E7%9A%84%E7%B4%AF%E7%A7%AF%22%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22id%22%3A%22u05c878ee%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D\"></card></p><p data-lake-id=\"ub6401a5d\" id=\"ub6401a5d\"><br></p>",
    "public": 1,
    "status": 0,
    "likes_count": 2,
    "read_count": 15,
    "hits": 15,
    "comments_count": 0,
    "word_count": 37,
    "created_at": "2022-04-07T09:09:59.000Z",
    "updated_at": "2023-10-18T00:44:11.000Z",
    "content_updated_at": "2023-07-27T02:11:43.000Z",
    "published_at": "2022-04-12T10:33:00.000Z",
    "first_published_at": "2022-04-07T09:10:38.307Z",
    "book": {
      "id": 26347916,
      "type": "Book",
      "slug": "kyeqhg",
      "name": "【公共】小灰灰博客",
      "user_id": 27022430,
      "description": "小灰灰博客-hexo",
      "creator_id": 27022430,
      "public": 1,
      "items_count": 68,
      "likes_count": 0,
      "watches_count": 1,
      "content_updated_at": "2024-07-18T02:53:41.706Z",
      "created_at": "2022-04-07T09:06:45.000Z",
      "updated_at": "2024-07-18T02:53:42.000Z",
      "user": {
        "id": 27022430,
        "type": "User",
        "login": "xianrenqh",
        "name": "小灰灰",
        "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
        "books_count": 6,
        "public_books_count": 1,
        "followers_count": 1,
        "following_count": 0,
        "public": 1,
        "description": "爱摸鱼爱打酱油的小码农搬运工",
        "created_at": "2022-03-24T03:27:24.000Z",
        "updated_at": "2024-08-02T02:27:58.000Z",
        "work_id": "",
        "_serializer": "v2.user"
      },
      "namespace": "xianrenqh/kyeqhg",
      "_serializer": "v2.book"
    },
    "user": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "tags": [],
    "latest_version_id": 924553798,
    "creator": {
      "id": 27022430,
      "type": "User",
      "login": "xianrenqh",
      "name": "小灰灰",
      "avatar_url": "https://cdn.nlark.com/yuque/0/2022/png/27022430/1651022795959-avatar/b257100b-a64e-4b2e-97f3-81d37888421a.png",
      "books_count": 6,
      "public_books_count": 1,
      "followers_count": 1,
      "following_count": 0,
      "public": 1,
      "description": "爱摸鱼爱打酱油的小码农搬运工",
      "created_at": "2022-03-24T03:27:24.000Z",
      "updated_at": "2024-08-02T02:27:58.000Z",
      "work_id": "",
      "_serializer": "v2.user"
    },
    "_serializer": "v2.doc_detail"
  }
]