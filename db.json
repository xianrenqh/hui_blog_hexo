{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/default_list.jpg","path":"img/default_list.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/default_list2.jpg","path":"img/default_list2.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/error_404.png","path":"img/error_404.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/index_img.webp","path":"img/index_img.webp","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/Lete.js","path":"js/Lete.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/_data/link.yml","hash":"dfd72bd0f89d451b51bebd474e8e2024aa780081","modified":1649319722462},{"_id":"source/_posts/awh8vd.md","hash":"18d8a2d74f34656dd8b32b3bcfe15646b57e3f1b","modified":1649401864816},{"_id":"source/_posts/vibciy.md","hash":"a0800eceac46c54e4ed8152231b3a11ba9173905","modified":1649401864822},{"_id":"source/_posts/mgg0te.md","hash":"ab1fb16fdc230b01e366aa65c80f8939f4163a2b","modified":1649401864820},{"_id":"source/categories/index.md","hash":"03cd16cb4f25baad4d118149de2e953fc7c9f910","modified":1649319722463},{"_id":"source/about/index.md","hash":"b2c5698ee038017407ca4c3bdc7a12a6c8f82e9f","modified":1649319722463},{"_id":"source/link/index.md","hash":"fcac6d1064319351e670a157721aa59b53d02a1a","modified":1649319722463},{"_id":"source/timeline/index.md","hash":"bb410c17e3ef518e9b1cc35d202f9b3e688fa54a","modified":1649319722465},{"_id":"source/messageboard/index.md","hash":"57d05221ce853fe27d5c5a292576fe0e5e71a7fc","modified":1649319722464},{"_id":"source/tags/index.md","hash":"8a2c93f3cef3b9e33f83ffea2176c74b308ad941","modified":1649319722464},{"_id":"themes/butterfly/source/js/Lete.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1649319722524},{"_id":"themes/butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1649319722465},{"_id":"themes/butterfly/README.md","hash":"6ee27baf95a5741abbc224ef8938d679b6597665","modified":1649319722465},{"_id":"themes/butterfly/README_CN.md","hash":"49ace5208f98783344f17a00adab7641cda43280","modified":1649319722465},{"_id":"themes/butterfly/_config.yml","hash":"5226d8a64a56d9addeff7e92dbe36600960f02b3","modified":1649319722466},{"_id":"themes/butterfly/package.json","hash":"80ebdf46caa7266fc43cd51c96c97731adbc5694","modified":1649319722499},{"_id":"themes/butterfly/languages/default.yml","hash":"7fd2950554e99a6f15232267621f36f026a85380","modified":1649319722466},{"_id":"themes/butterfly/languages/en.yml","hash":"4b2c351f2b5fd4f8497e806085364928e1af0b5b","modified":1649319722467},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"6c35255c196ea8e9817b85b6d7729d00cf18f231","modified":1649319722467},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"ef035065ebb37fce3e56e51f8b56deb596db78b2","modified":1649319722467},{"_id":"themes/butterfly/layout/archive.pug","hash":"bd62286afb64a51c97e800c5945620d51605d5fa","modified":1649319722467},{"_id":"themes/butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1649319722468},{"_id":"themes/butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1649319722498},{"_id":"themes/butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1649319722498},{"_id":"themes/butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1649319722498},{"_id":"themes/butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1649319722499},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1649319722468},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"ab3bdeb6e0acd3d58091698c1335afb069eea7e5","modified":1649319722468},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1649319722468},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"18827e0b9ee946f0ed1f8128fa94fd62f5f7efa8","modified":1649402009203},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"6f2608c4d93d3d10ae6b2cd7f8918f303f024321","modified":1649319722474},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"0b80f04950bd0fe5e6c4e7b7559adf4d0ce28436","modified":1649319722477},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"f093ab771257a6a939b194f68607a2038c8d7da3","modified":1649319722478},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"699d0d2cff233628752956c4434125c8203f7d63","modified":1649319722478},{"_id":"themes/butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1649319722499},{"_id":"themes/butterfly/scripts/events/config.js","hash":"a72c2020c87c4998aa124a16e9f8560875b9f86d","modified":1649319722500},{"_id":"themes/butterfly/scripts/events/init.js","hash":"a7f567b3d3110afe2f99c967b8e15351a7f5bd6d","modified":1649319722500},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"9819f0996234fbd80d6c50a9e526c56ebf22588d","modified":1649319722500},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"3cfc46c749e2fd7ae9c2a17206238ed0e0e17e7d","modified":1649319722500},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"932df912976261929f809b7dbd4eb473e7787345","modified":1649319722501},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"21379ed2dccb69c43b893895c9d56238c11e5f43","modified":1649319722501},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1649319722501},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1649319722502},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"c6611d97087c51845cb1ab4821696a62fa33daeb","modified":1649319722502},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"6a103a2472903289bdecd5240eb89cac0b9e13d9","modified":1649319722502},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"21556f9cb412ddc500ad12ecfd419f3ea6c9f663","modified":1649319722503},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"91d954f6e9fe6e571eb8ec9f8996294b2dc3688e","modified":1649319722503},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":1649319722503},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"f79c99f6c5b626c272dc2bed2b0250d6b91bb28a","modified":1649319722503},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"396c3ab1bcf1c7693ad7e506eadd13016c6769b6","modified":1649319722504},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1649319722504},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1649319722504},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"531808a290b8bdd66bac2faab211ada8e9646a37","modified":1649319722504},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"c16c6eb058af2b36bcd583b2591076c7ebdd51ad","modified":1649319722505},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1649319722505},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1649319722505},{"_id":"themes/butterfly/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1649319722518},{"_id":"themes/butterfly/source/css/var.styl","hash":"4890a40366d6443f8b8942a4e9a6dce9fe3494f5","modified":1649319722519},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1649319722519},{"_id":"themes/butterfly/source/img/default_list.jpg","hash":"dc766d7f0161cd4a36ebf31d30f736a93d4ef36e","modified":1649319722520},{"_id":"themes/butterfly/source/img/error_404.png","hash":"d2519710498a871ca3e913c57e2ba20a805b6430","modified":1649319722521},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1649319722522},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1649319722523},{"_id":"themes/butterfly/source/js/main.js","hash":"04efcbd28b37875cfec88eb87cab7256a9ebb327","modified":1649319722524},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1649319722525},{"_id":"themes/butterfly/source/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1649319722525},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"6c41f49a3e682067533dd9384e6e4511fc3a1349","modified":1649319722469},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"15530d9ac59c576d79af75dd687efe71e8d261b0","modified":1649319722469},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"9e58c80af8bbd0c66ccb4f94d3781818cebf0d66","modified":1649319722470},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1649319722471},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1649319722471},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1649319722471},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"65a23b5170204e55b813ce13a79d799b66b7382c","modified":1649319722471},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1649319722471},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1649319722472},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"65fa23680af0daf64930a399c2f2ca37809a8149","modified":1649319722472},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1649319722473},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"dc3913c1a6dd207051c3d3414a33851ae8bc0a45","modified":1649319722473},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1649319722474},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"78a3abd90bb3c18cd773d3d5abac3541e7f415e5","modified":1649319722473},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"4cfcf0100e37ce91864703cd44f1cb99cb5493ea","modified":1649319722475},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"5276937fbcceb9d62879dc47be880cd469a27349","modified":1649319722475},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"2fb74d0b0e4b98749427c5a1a1b0acb6c85fadc4","modified":1649319722475},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"b9ebb02af8ccf43e3f73be43db19254fa913c57b","modified":1649319722475},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1649319722476},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1649319722476},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"6311eda08e4515281c51bd49f43902a51832383c","modified":1649319722476},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"fed069baa9b383f57db32bb631115071d29bdc60","modified":1649319722476},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"88e3b611b03149665e4113cfa39595c1a3fca7e5","modified":1649319722477},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"864869c43fe5b5bb6f4ac6b13dd4bfb16ea47550","modified":1649319722477},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"292646dfab135973b09f0fa9e3931e83da2ed30e","modified":1649319722478},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"b9d54a01d7c2a7a183cb7209e99430ce7fea1fe3","modified":1649319722486},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"d5fec7dedc52ab23865fb4db002755e9bdaadc9f","modified":1649319722490},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"d4072f9ab79f4ac49aa251ae470abc45a2fddbd6","modified":1649319722490},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"1fbecfd299068f90d727f0c8c65e2a792fa6e3e2","modified":1649319722490},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"b63fd8ec48d782f51ee11226753fed1998bbf34a","modified":1649319722494},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1649319722495},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":1649319722495},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1649319722495},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"0380a1e048e6219ea4b4a8a4eadba960edf308f0","modified":1649319722495},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1649319722496},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"6d93564a8bd13cb9b52ee5e178db3bcbf18b1bc6","modified":1649319722496},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1649319722496},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1649319722496},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"9c1229af6ab48961021886882c473514101fba21","modified":1649319722497},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"438aea3e713ed16b7559b9a80a9c5ec0221263df","modified":1649319722497},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1649319722497},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"0612aaee878f33ea8d3da0293c7dc3b6cd871466","modified":1649319722497},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"7fb096656c8a6c21a4b6a5100885b1081d6021ed","modified":1649319722498},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"f7fd855593396b30932a06627287a73a407aff88","modified":1649319722505},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"cc487bde630aa1ade631d6138d4935ff0df93aa4","modified":1649319722505},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"2f95e99b8351fbecd9037a1bbdc3fee9d6ea8a77","modified":1649319722507},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1649319722508},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"2d3b0386c8b62a61734e10bab2cf86842cbb1673","modified":1649319722508},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"29f48f9370f245e6e575b5836bccf47eb5688d8b","modified":1649319722508},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"c61dccca690d486c3d9c29cf028d87b777385141","modified":1649319722510},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"26be2afa9d4e7016cf3c42a6cd166f01e8e4ad5c","modified":1649319722510},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"d97c1722ce0fcc319f1f90ec2d51f9d746748e2b","modified":1649319722510},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"ef21990de28bd75dcd0f88b8d616e1a7a137502f","modified":1649319722511},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":1649319722511},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"84d4f27fde933bdf839629eb3bddcbc0f4592836","modified":1649319722511},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1649319722511},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"c5cfed620708807a48076b5ee59b0ba84e29aa80","modified":1649319722512},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"1bcbc80dff19cd53d0b367c3b9a3c751d3a1f10d","modified":1649319722512},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"e5008f43897d8482b4831cd4c13a0af40e496762","modified":1649319722512},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"bd88ee30ebf8ca2e7b4d3a034c317fd61733921f","modified":1649319722512},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"f67177310f5594954b25a591d186d28d5d450b18","modified":1649319722513},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"69f8e9414526dfda3af9a71c8e528fdd0ecbbfe5","modified":1649319722513},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"6f4b4ede52305bce9b22c8c897dcbde8af6e2ce4","modified":1649319722513},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1649319722513},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a58d35d698885f1034dedbe99f7dbc1a801412c6","modified":1649319722513},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1649319722513},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":1649319722514},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"826dae759062d8f84eb2bf5ab8fdb80e0f79d58b","modified":1649319722514},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1649319722514},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1649319722515},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1649319722516},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":1649319722516},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"a310e48f826a4cacc55d8e68f43806e5085554f6","modified":1649319722516},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1649319722517},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"08493b66b9f31f2bd3e9a3115017a0ce16142b20","modified":1649319722517},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1649319722517},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"bf9568444dd54e39dc59b461323dcd38942f27d9","modified":1649319722517},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1649319722518},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"656f9007d94cf29a20532705d94fb7f22827e6fe","modified":1649319722514},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"0290605c4984882990059eefe3ad18d2ac6a19ef","modified":1649319722515},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"e4c987c0202162b50dec91e1df74665d0fa933c9","modified":1649319722515},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"345de0b8cd9a5f16000b852b51aa3b8a0121f319","modified":1649319722518},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"aaa5e44125dcf321866bc2355a73773b11db8c9c","modified":1649319722524},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"ec62117f38e095425f295b1170c222c7a1399425","modified":1649319722525},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"7848ec58c6ec03243abf80a3b22b4dc10f3edf53","modified":1649319722479},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1649319722479},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"e3bf847553515174f6085df982f0623e9783db7a","modified":1649319722479},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"ef1b2b5b980d6aeaa5d06b97d1afc9644b155a16","modified":1649319722479},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"bba9871f446c10ffcc8fa9023f5a2eb701a86bae","modified":1649319722479},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"400ce038548d6f9ddb486150c724c87b6923a88b","modified":1649319722480},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1649319722480},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1649319722481},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1649319722481},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"d1d2474420bf4edc2e43ccdff6f92b8b082143df","modified":1649319722481},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"3f05f8311ae559d768ee3d0925e84ed767c314d3","modified":1649319722481},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1649319722481},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"a111407fdcafcf1099e26ffa69786f8822c5d9fb","modified":1649319722482},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"143236e395c18d80ab8dc794821eb337c85f6b32","modified":1649319722482},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"fe684aaad4c99b908dc4499c85afd9a2cd893aae","modified":1649319722482},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"0764709381fa29778f6390d645ed137d2f91228f","modified":1649319722483},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"9c96e6e67931977268b218b99084b98597c2e42b","modified":1649319722483},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"e4850f2c9ba5f6b2248808f7257662679e0fab0a","modified":1649319722483},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"9302837f1e35f153323bb4f166514c7e96e8ecdd","modified":1649319722484},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1649319722484},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"c271cacbac14ed665bbf47aa9c6e74e94c69dcef","modified":1649319722484},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"c1c75abe5c899618ed6699c97ac999544840098a","modified":1649319722484},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"59c22ebf3aaee90152e7cdb17ff5841c888fcd82","modified":1649319722486},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"7648e4cb0b224f480b5f1356d64f62c9235f6723","modified":1649319722486},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1649319722487},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"f9b00ead54573ba6e6eb33481588af144aab648d","modified":1649319722487},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"a47d8f9f593091cc91192c0c49deaa2c0d2317fd","modified":1649319722487},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"0a7587a0211011b5942edba2aa80d51169561d30","modified":1649319722487},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"04b2a5882e789a988e41d45abe606f0617b08e38","modified":1649319722488},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"e846ddfe4a63b15d1416f6055f5756af5e3da7c6","modified":1649319722488},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"f6506ccfd1ce994b9e53aa95588d0b6dbad11411","modified":1649319722489},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"ac811c1d6e0bf08aeb933ade1b9557e0c560d0c9","modified":1649319722489},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"9028efac78e4122acd734edd5ef9110ef3f05cd1","modified":1649319722489},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"5e32d903903c76db55a625640f9417d15a3a312f","modified":1649319722489},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"c92df4f9d0611cf44c1a4491e226f242ec80f5bb","modified":1649319722491},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"da3b9437d061ee68dbc383057db5c73034c49605","modified":1649319722491},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"8ce336a4c8cae81b58ee26ff51040ca650ff1519","modified":1649319722491},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1649319722493},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"309f51bc5302e72fc469d54c577fbcfe57fb07a8","modified":1649319722493},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1649319722494},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"006acc91ce25fc7c7d778ca043e970f57dc46b83","modified":1649319722494},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1649319722507},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1649319722507},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1649319722507},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1649319722507},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1649319722507},{"_id":"themes/butterfly/source/img/default_list2.jpg","hash":"be3e78820f6ac3aec03503460edf37d1e5072850","modified":1649319722521},{"_id":"themes/butterfly/source/img/index_img.webp","hash":"235fb2258bab24377565e20573a3641f94e62652","modified":1649319722523}],"Category":[{"name":"学无止境","_id":"cl1q3du1w0004sku5dv8h5bp9"},{"name":"网络集锦","_id":"cl1q3du21000asku5b17a5h8r"}],"Data":[{"_id":"link","data":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}],"Page":[{"title":"关于","date":"2022-04-06T13:32:15.000Z","type":"about","_content":"# 个人简介\n昵称：\n性别：\n爱好：\n<span id=\"yellow-block\">黄色色块</span>\n<span id=\"green-block\">绿色色块</span>\n<span id=\"gray-block\">灰色色块</span>","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2022-04-06 21:32:15\ntype: about\n---\n# 个人简介\n昵称：\n性别：\n爱好：\n<span id=\"yellow-block\">黄色色块</span>\n<span id=\"green-block\">绿色色块</span>\n<span id=\"gray-block\">灰色色块</span>","updated":"2022-04-07T08:22:02.463Z","path":"about/index.html","comments":1,"layout":"page","_id":"cl1q3du1n0000sku5bsb24dck","content":"<h1 id=\"个人简介\"><a href=\"#个人简介\" class=\"headerlink\" title=\"个人简介\"></a>个人简介</h1><p>昵称：<br>性别：<br>爱好：<br><span id=\"yellow-block\">黄色色块</span><br><span id=\"green-block\">绿色色块</span><br><span id=\"gray-block\">灰色色块</span></p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list2.jpg","excerpt":"","more":"<h1 id=\"个人简介\"><a href=\"#个人简介\" class=\"headerlink\" title=\"个人简介\"></a>个人简介</h1><p>昵称：<br>性别：<br>爱好：<br><span id=\"yellow-block\">黄色色块</span><br><span id=\"green-block\">绿色色块</span><br><span id=\"gray-block\">灰色色块</span></p>\n"},{"title":"友情链接","date":"2022-04-06T13:32:03.000Z","type":"link","_content":"","source":"link/index.md","raw":"---\ntitle: 友情链接\ndate: 2022-04-06 21:32:03\ntype: \"link\"\n---\n","updated":"2022-04-07T08:22:02.463Z","path":"link/index.html","comments":1,"layout":"page","_id":"cl1q3du1t0002sku5fmog96u4","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list2.jpg","excerpt":"","more":""},{"title":"分类","date":"2022-04-07T01:43:13.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2022-04-07 09:43:13\ntype: \"categories\"\n---\n","updated":"2022-04-07T08:22:02.463Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cl1q3du1y0006sku5ed2dainv","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list.jpg","excerpt":"","more":""},{"title":"messageboard","date":"2022-04-06T13:32:37.000Z","type":"messageboard","_content":"\n# 有什么想和小灰灰说的吗？？","source":"messageboard/index.md","raw":"---\ntitle: messageboard\ndate: 2022-04-06 21:32:37\ntype: \"messageboard\"\n---\n\n# 有什么想和小灰灰说的吗？？","updated":"2022-04-07T08:22:02.464Z","path":"messageboard/index.html","comments":1,"layout":"page","_id":"cl1q3du200008sku57hbwdute","content":"<h1 id=\"有什么想和小灰灰说的吗？？\"><a href=\"#有什么想和小灰灰说的吗？？\" class=\"headerlink\" title=\"有什么想和小灰灰说的吗？？\"></a>有什么想和小灰灰说的吗？？</h1>","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list2.jpg","excerpt":"","more":"<h1 id=\"有什么想和小灰灰说的吗？？\"><a href=\"#有什么想和小灰灰说的吗？？\" class=\"headerlink\" title=\"有什么想和小灰灰说的吗？？\"></a>有什么想和小灰灰说的吗？？</h1>"},{"title":"标签","date":"2022-04-06T13:31:29.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2022-04-06 21:31:29\ntype: \"tags\"\n---\n","updated":"2022-04-07T08:22:02.464Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cl1q3du200009sku5boqu7ypb","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list2.jpg","excerpt":"","more":""},{"title":"日志","date":"2022-04-06T13:32:23.000Z","type":"timeline","_content":"","source":"timeline/index.md","raw":"---\ntitle: 日志\ndate: 2022-04-06 21:32:23\ntype: timeline\n---\n","updated":"2022-04-07T08:22:02.465Z","path":"timeline/index.html","comments":1,"layout":"page","_id":"cl1q3du21000csku59764c0f7","content":"","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list2.jpg","excerpt":"","more":""}],"Post":[{"title":"Github Action 使用云函数调度服务","urlname":"awh8vd","date":"2022-04-08T03:49:09.000Z","abbrlink":"3c85ac91","_content":"\n## 如何开启 GitHubAction 的 workflow_dispatch 触发器\n\n在工作流的 **yml** 文件定义的 **on** 中，提供 workflow_dispatch 触发器 【必须】\n\n```yaml\n#通过 workflow_dispatch 触发，cron任务部署在云函数\nname: 你的工作流名称\n\non:\n  workflow_dispatch:\n\njobs:\n  start:\n#以下省略\n```\n\n开启 workflow_dispatch 后，你的工作流中会出现运行工作流的按钮,手动点击 Run workflow 按钮，将会执行一次工作流：\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u5a24dfb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=266&originWidth=1253&originalType=url∶=1&rotation=0&showTitle=false&size=40929&status=done&style=none&taskId=u8795a4a8-3e99-4e80-8dcd-61142d8fc6c&title=)\n\n现在可以进入下一步，使用 **cron** 调度触发工作流的手动执行。\n\n## 使用云函数提供 cron 调度服务\n\n工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。\n我选择的 **cron** 调度是 [腾讯云函数 SCF](https://cloud.tencent.com/product/scf/).。简单的 POST 一个链接，不会达到收费标准。\n我们打开云函数的创建界面：\n\n1. 选择自定义创建\n1. 函数名称为默认的 helloworld-1623250991 ，可以自己输入名称。\n1. 地域使用任何地域即可，这里默认选择了广州\n1. 运行环境选择 Python3.6 （Python 2.7 版本也行）\n1. 提交方法选择在线编辑。\n1. 执行方法使用默认值：index.main_handler\n1. 函数代码如下：\n\n**Python 2.7 版本代码：**\n\n```python\n# -*- coding: utf8 -*-\nimport requests\ndef main_handler(event, context):\n    r = requests.post(\"https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches\",\n    json = {\"ref\": \"master\"},\n    headers = {\"User-Agent\":'curl/7.52.1',\n              'Content-Type': 'application/json',\n              'Accept': 'application/vnd.github.v3+json',\n              'Authorization': 'token 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'})\n    if r.status_code == 204:\n        return \"This's OK!\"\n    else:\n        return r.status_code\n\n```\n\n**Python 3.6 版本代码：**\n\n```python\nimport requests\nimport json\n\ndef run():\n        payload = json.dumps({\"ref\": \"master\"})\n        header = {'Authorization': 'token GitHubToken',\n                  \"Accept\": \"application/vnd.github.v3+json\"}\n        response_decoded_json = requests.post(\n            f'https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches',\n            data=payload, headers=header)\n\n# 云函数入口\ndef main_handler(event, context):\n    return run()\n\n```\n\n8. 函数代码中的 **GitHubToken、Github 账号、Github 项目名、GithubAction 工作流名称或 ID** 需要根据自己的账号及项目填写。具体的 API 调用规则可参考: [GithubDoc](https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event).\n\n**获取 GithubAction 工作流 ID 接口：**\n**url: **https://api.github.com/repos/你的用户名/你的项目名/actions/workflows\nmethod: get\nheader:\n\n| Authorization | token 你的 token               |\n| ------------- | ------------------------------ |\n| Accept        | application/vnd.github.v3+json |\n\nbody: {ref:master'}\n\n**PHP 请求案例：**\n\n```php\n// Generated by ApiPost: https://www.apipost.cn/\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, 'https://api.github.com/repos/你的用户名/你的项目名/actions/workflows');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');\n\ncurl_setopt($ch, CURLOPT_POSTFIELDS, \"{ref:master'}'\");\n\n$headers = array();\n$headers[] = 'User-Agent: Apipost client Runtime/+https://www.apipost.cn/';\n$headers[] = 'Authorization: token 你的TOKEN';\n$headers[] = 'Accept: application/vnd.github.v3+json';\n$headers[] = 'Content-Type: application/json';\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n\n$result = curl_exec($ch);\nif (curl_errno($ch)) {\n    echo 'Error:' . curl_error($ch);\n}\ncurl_close($ch);\n\n```\n\nPython 请求案例：\n\n```python\nimport requests\n\nheaders = {\n    'User-Agent': 'Apipost client Runtime/+https://www.apipost.cn/',\n    'Authorization': 'token 你的token',\n    'Accept': 'application/vnd.github.v3+json',\n    'Content-Type': 'application/json',\n}\n\ndata = '{ref:master}'\n\nresponse = requests.post('https://api.github.com/repos/你的用户名/你的项目名/actions/workflows', headers=headers, data=data)\n\n```\n\n9. 具体填写如下图所示：\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png#clientId=ufda8d8b7-9673-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u6ebd4bae&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1204&originWidth=1642&originalType=binary∶=1&rotation=0&showTitle=false&size=156866&status=done&style=none&taskId=uf157aaf6-4213-4b8f-a03f-0a14cc3be20&title=)\n\n10. 在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值**900**秒：\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua156c086&margin=%5Bobject%20Object%5D&name=image.png&originHeight=424&originWidth=527&originalType=url∶=1&rotation=0&showTitle=false&size=37309&status=done&style=none&taskId=u1a87cab6-45c8-4639-900e-a9517e8d1a8&title=)\n\n11. 触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的 Cron 表达式，这里的**Cron**当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：\n    > 0 0 16 \\* \\* \\* \\*\n\n表示了每天 16 点执行 1 次。\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ud642effb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=517&originWidth=576&originalType=url∶=1&rotation=0&showTitle=false&size=50170&status=done&style=none&taskId=u81d4f3b3-5f0e-4f8c-a2a4-7ca54a07540&title=)\n\n触发器也可以选择 api 调用，创建好后会生成一个 api url （webhook 地址）。粘贴到对应的位置调用即可。\n","source":"_posts/awh8vd.md","raw":"---\ntitle: Github Action 使用云函数调度服务\nurlname: awh8vd\ndate: '2022-04-08 11:49:09 +0800'\ncategories:\n  - 学无止境\ntags:\n  - github\n  - action\n  - 云函数\n  - 调度\nabbrlink: 3c85ac91\n---\n\n## 如何开启 GitHubAction 的 workflow_dispatch 触发器\n\n在工作流的 **yml** 文件定义的 **on** 中，提供 workflow_dispatch 触发器 【必须】\n\n```yaml\n#通过 workflow_dispatch 触发，cron任务部署在云函数\nname: 你的工作流名称\n\non:\n  workflow_dispatch:\n\njobs:\n  start:\n#以下省略\n```\n\n开启 workflow_dispatch 后，你的工作流中会出现运行工作流的按钮,手动点击 Run workflow 按钮，将会执行一次工作流：\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u5a24dfb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=266&originWidth=1253&originalType=url∶=1&rotation=0&showTitle=false&size=40929&status=done&style=none&taskId=u8795a4a8-3e99-4e80-8dcd-61142d8fc6c&title=)\n\n现在可以进入下一步，使用 **cron** 调度触发工作流的手动执行。\n\n## 使用云函数提供 cron 调度服务\n\n工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。\n我选择的 **cron** 调度是 [腾讯云函数 SCF](https://cloud.tencent.com/product/scf/).。简单的 POST 一个链接，不会达到收费标准。\n我们打开云函数的创建界面：\n\n1. 选择自定义创建\n1. 函数名称为默认的 helloworld-1623250991 ，可以自己输入名称。\n1. 地域使用任何地域即可，这里默认选择了广州\n1. 运行环境选择 Python3.6 （Python 2.7 版本也行）\n1. 提交方法选择在线编辑。\n1. 执行方法使用默认值：index.main_handler\n1. 函数代码如下：\n\n**Python 2.7 版本代码：**\n\n```python\n# -*- coding: utf8 -*-\nimport requests\ndef main_handler(event, context):\n    r = requests.post(\"https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches\",\n    json = {\"ref\": \"master\"},\n    headers = {\"User-Agent\":'curl/7.52.1',\n              'Content-Type': 'application/json',\n              'Accept': 'application/vnd.github.v3+json',\n              'Authorization': 'token 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'})\n    if r.status_code == 204:\n        return \"This's OK!\"\n    else:\n        return r.status_code\n\n```\n\n**Python 3.6 版本代码：**\n\n```python\nimport requests\nimport json\n\ndef run():\n        payload = json.dumps({\"ref\": \"master\"})\n        header = {'Authorization': 'token GitHubToken',\n                  \"Accept\": \"application/vnd.github.v3+json\"}\n        response_decoded_json = requests.post(\n            f'https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches',\n            data=payload, headers=header)\n\n# 云函数入口\ndef main_handler(event, context):\n    return run()\n\n```\n\n8. 函数代码中的 **GitHubToken、Github 账号、Github 项目名、GithubAction 工作流名称或 ID** 需要根据自己的账号及项目填写。具体的 API 调用规则可参考: [GithubDoc](https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event).\n\n**获取 GithubAction 工作流 ID 接口：**\n**url: **https://api.github.com/repos/你的用户名/你的项目名/actions/workflows\nmethod: get\nheader:\n\n| Authorization | token 你的 token               |\n| ------------- | ------------------------------ |\n| Accept        | application/vnd.github.v3+json |\n\nbody: {ref:master'}\n\n**PHP 请求案例：**\n\n```php\n// Generated by ApiPost: https://www.apipost.cn/\n$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, 'https://api.github.com/repos/你的用户名/你的项目名/actions/workflows');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');\n\ncurl_setopt($ch, CURLOPT_POSTFIELDS, \"{ref:master'}'\");\n\n$headers = array();\n$headers[] = 'User-Agent: Apipost client Runtime/+https://www.apipost.cn/';\n$headers[] = 'Authorization: token 你的TOKEN';\n$headers[] = 'Accept: application/vnd.github.v3+json';\n$headers[] = 'Content-Type: application/json';\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n\n$result = curl_exec($ch);\nif (curl_errno($ch)) {\n    echo 'Error:' . curl_error($ch);\n}\ncurl_close($ch);\n\n```\n\nPython 请求案例：\n\n```python\nimport requests\n\nheaders = {\n    'User-Agent': 'Apipost client Runtime/+https://www.apipost.cn/',\n    'Authorization': 'token 你的token',\n    'Accept': 'application/vnd.github.v3+json',\n    'Content-Type': 'application/json',\n}\n\ndata = '{ref:master}'\n\nresponse = requests.post('https://api.github.com/repos/你的用户名/你的项目名/actions/workflows', headers=headers, data=data)\n\n```\n\n9. 具体填写如下图所示：\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png#clientId=ufda8d8b7-9673-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u6ebd4bae&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1204&originWidth=1642&originalType=binary∶=1&rotation=0&showTitle=false&size=156866&status=done&style=none&taskId=uf157aaf6-4213-4b8f-a03f-0a14cc3be20&title=)\n\n10. 在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值**900**秒：\n\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua156c086&margin=%5Bobject%20Object%5D&name=image.png&originHeight=424&originWidth=527&originalType=url∶=1&rotation=0&showTitle=false&size=37309&status=done&style=none&taskId=u1a87cab6-45c8-4639-900e-a9517e8d1a8&title=)\n\n11. 触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的 Cron 表达式，这里的**Cron**当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：\n    > 0 0 16 \\* \\* \\* \\*\n\n表示了每天 16 点执行 1 次。\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ud642effb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=517&originWidth=576&originalType=url∶=1&rotation=0&showTitle=false&size=50170&status=done&style=none&taskId=u81d4f3b3-5f0e-4f8c-a2a4-7ca54a07540&title=)\n\n触发器也可以选择 api 调用，创建好后会生成一个 api url （webhook 地址）。粘贴到对应的位置调用即可。\n","slug":"awh8vd","published":1,"updated":"2022-04-08T07:11:04.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1q3du1r0001sku56z20ft4p","content":"<h2 id=\"如何开启-GitHubAction-的-workflow-dispatch-触发器\"><a href=\"#如何开启-GitHubAction-的-workflow-dispatch-触发器\" class=\"headerlink\" title=\"如何开启 GitHubAction 的 workflow_dispatch 触发器\"></a>如何开启 GitHubAction 的 workflow_dispatch 触发器</h2><p>在工作流的 <strong>yml</strong> 文件定义的 <strong>on</strong> 中，提供 workflow_dispatch 触发器 【必须】</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#通过 workflow_dispatch 触发，cron任务部署在云函数</span></span><br><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">你的工作流名称</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">workflow_dispatch:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">start:</span></span><br><span class=\"line\"><span class=\"comment\">#以下省略</span></span><br></pre></td></tr></table></figure>\n\n<p>开启 workflow_dispatch 后，你的工作流中会出现运行工作流的按钮,手动点击 Run workflow 按钮，将会执行一次工作流：<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u5a24dfb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=266&originWidth=1253&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=40929&status=done&style=none&taskId=u8795a4a8-3e99-4e80-8dcd-61142d8fc6c&title=\" alt=\"image.png\"></p>\n<p>现在可以进入下一步，使用 <strong>cron</strong> 调度触发工作流的手动执行。</p>\n<h2 id=\"使用云函数提供-cron-调度服务\"><a href=\"#使用云函数提供-cron-调度服务\" class=\"headerlink\" title=\"使用云函数提供 cron 调度服务\"></a>使用云函数提供 cron 调度服务</h2><p>工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。<br>我选择的 <strong>cron</strong> 调度是 <a href=\"https://cloud.tencent.com/product/scf/\">腾讯云函数 SCF</a>.。简单的 POST 一个链接，不会达到收费标准。<br>我们打开云函数的创建界面：</p>\n<ol>\n<li>选择自定义创建</li>\n<li>函数名称为默认的 helloworld-1623250991 ，可以自己输入名称。</li>\n<li>地域使用任何地域即可，这里默认选择了广州</li>\n<li>运行环境选择 Python3.6 （Python 2.7 版本也行）</li>\n<li>提交方法选择在线编辑。</li>\n<li>执行方法使用默认值：index.main_handler</li>\n<li>函数代码如下：</li>\n</ol>\n<p><strong>Python 2.7 版本代码：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main_handler</span>(<span class=\"params\">event, context</span>):</span><br><span class=\"line\">    r = requests.post(<span class=\"string\">&quot;https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches&quot;</span>,</span><br><span class=\"line\">    json = &#123;<span class=\"string\">&quot;ref&quot;</span>: <span class=\"string\">&quot;master&quot;</span>&#125;,</span><br><span class=\"line\">    headers = &#123;<span class=\"string\">&quot;User-Agent&quot;</span>:<span class=\"string\">&#x27;curl/7.52.1&#x27;</span>,</span><br><span class=\"line\">              <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>,</span><br><span class=\"line\">              <span class=\"string\">&#x27;Accept&#x27;</span>: <span class=\"string\">&#x27;application/vnd.github.v3+json&#x27;</span>,</span><br><span class=\"line\">              <span class=\"string\">&#x27;Authorization&#x27;</span>: <span class=\"string\">&#x27;token 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&#x27;</span>&#125;)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> r.status_code == <span class=\"number\">204</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;This&#x27;s OK!&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r.status_code</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Python 3.6 版本代码：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">run</span>():</span><br><span class=\"line\">        payload = json.dumps(&#123;<span class=\"string\">&quot;ref&quot;</span>: <span class=\"string\">&quot;master&quot;</span>&#125;)</span><br><span class=\"line\">        header = &#123;<span class=\"string\">&#x27;Authorization&#x27;</span>: <span class=\"string\">&#x27;token GitHubToken&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"string\">&quot;Accept&quot;</span>: <span class=\"string\">&quot;application/vnd.github.v3+json&quot;</span>&#125;</span><br><span class=\"line\">        response_decoded_json = requests.post(</span><br><span class=\"line\">            <span class=\"string\">f&#x27;https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches&#x27;</span>,</span><br><span class=\"line\">            data=payload, headers=header)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 云函数入口</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main_handler</span>(<span class=\"params\">event, context</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> run()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li>函数代码中的 <strong>GitHubToken、Github 账号、Github 项目名、GithubAction 工作流名称或 ID</strong> 需要根据自己的账号及项目填写。具体的 API 调用规则可参考: <a href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\">GithubDoc</a>.</li>\n</ol>\n<p><strong>获取 GithubAction 工作流 ID 接口：</strong><br>**url: **<a href=\"https://api.github.com/repos/%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D/%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D/actions/workflows\">https://api.github.com/repos/你的用户名/你的项目名/actions/workflows</a><br>method: get<br>header:</p>\n<table>\n<thead>\n<tr>\n<th>Authorization</th>\n<th>token 你的 token</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Accept</td>\n<td>application&#x2F;vnd.github.v3+json</td>\n</tr>\n</tbody></table>\n<p>body: {ref:master’}</p>\n<p><strong>PHP 请求案例：</strong></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Generated by ApiPost: https://www.apipost.cn/</span></span><br><span class=\"line\"><span class=\"variable\">$ch</span> = <span class=\"title function_ invoke__\">curl_init</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_URL, <span class=\"string\">&#x27;https://api.github.com/repos/你的用户名/你的项目名/actions/workflows&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_RETURNTRANSFER, <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_CUSTOMREQUEST, <span class=\"string\">&#x27;GET&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_POSTFIELDS, <span class=\"string\">&quot;&#123;ref:master&#x27;&#125;&#x27;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$headers</span> = <span class=\"keyword\">array</span>();</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;User-Agent: Apipost client Runtime/+https://www.apipost.cn/&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;Authorization: token 你的TOKEN&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;Accept: application/vnd.github.v3+json&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;Content-Type: application/json&#x27;</span>;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_HTTPHEADER, <span class=\"variable\">$headers</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"title function_ invoke__\">curl_exec</span>(<span class=\"variable\">$ch</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">curl_errno</span>(<span class=\"variable\">$ch</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Error:&#x27;</span> . <span class=\"title function_ invoke__\">curl_error</span>(<span class=\"variable\">$ch</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_close</span>(<span class=\"variable\">$ch</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Python 请求案例：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Apipost client Runtime/+https://www.apipost.cn/&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Authorization&#x27;</span>: <span class=\"string\">&#x27;token 你的token&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Accept&#x27;</span>: <span class=\"string\">&#x27;application/vnd.github.v3+json&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">data = <span class=\"string\">&#x27;&#123;ref:master&#125;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">response = requests.post(<span class=\"string\">&#x27;https://api.github.com/repos/你的用户名/你的项目名/actions/workflows&#x27;</span>, headers=headers, data=data)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol start=\"9\">\n<li>具体填写如下图所示：</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png#clientId=ufda8d8b7-9673-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u6ebd4bae&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1204&originWidth=1642&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=156866&status=done&style=none&taskId=uf157aaf6-4213-4b8f-a03f-0a14cc3be20&title=\" alt=\"image.png\"></p>\n<ol start=\"10\">\n<li>在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值<strong>900</strong>秒：</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua156c086&margin=%5Bobject%20Object%5D&name=image.png&originHeight=424&originWidth=527&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=37309&status=done&style=none&taskId=u1a87cab6-45c8-4639-900e-a9517e8d1a8&title=\" alt=\"image.png\"></p>\n<ol start=\"11\">\n<li>触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的 Cron 表达式，这里的<strong>Cron</strong>当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：<blockquote>\n<p>0 0 16 * * * *</p>\n</blockquote>\n</li>\n</ol>\n<p>表示了每天 16 点执行 1 次。<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ud642effb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=517&originWidth=576&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=50170&status=done&style=none&taskId=u81d4f3b3-5f0e-4f8c-a2a4-7ca54a07540&title=\" alt=\"image.png\"></p>\n<p>触发器也可以选择 api 调用，创建好后会生成一个 api url （webhook 地址）。粘贴到对应的位置调用即可。</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list.jpg","excerpt":"","more":"<h2 id=\"如何开启-GitHubAction-的-workflow-dispatch-触发器\"><a href=\"#如何开启-GitHubAction-的-workflow-dispatch-触发器\" class=\"headerlink\" title=\"如何开启 GitHubAction 的 workflow_dispatch 触发器\"></a>如何开启 GitHubAction 的 workflow_dispatch 触发器</h2><p>在工作流的 <strong>yml</strong> 文件定义的 <strong>on</strong> 中，提供 workflow_dispatch 触发器 【必须】</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#通过 workflow_dispatch 触发，cron任务部署在云函数</span></span><br><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">你的工作流名称</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">workflow_dispatch:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">start:</span></span><br><span class=\"line\"><span class=\"comment\">#以下省略</span></span><br></pre></td></tr></table></figure>\n\n<p>开启 workflow_dispatch 后，你的工作流中会出现运行工作流的按钮,手动点击 Run workflow 按钮，将会执行一次工作流：<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390027837-ee2a2970-3e9f-4557-984b-a7c403e9693c.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u5a24dfb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=266&originWidth=1253&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=40929&status=done&style=none&taskId=u8795a4a8-3e99-4e80-8dcd-61142d8fc6c&title=\" alt=\"image.png\"></p>\n<p>现在可以进入下一步，使用 <strong>cron</strong> 调度触发工作流的手动执行。</p>\n<h2 id=\"使用云函数提供-cron-调度服务\"><a href=\"#使用云函数提供-cron-调度服务\" class=\"headerlink\" title=\"使用云函数提供 cron 调度服务\"></a>使用云函数提供 cron 调度服务</h2><p>工具的选择上，人们总是会选择便捷且有效。如果恰好是免费的，那就大快人心。<br>我选择的 <strong>cron</strong> 调度是 <a href=\"https://cloud.tencent.com/product/scf/\">腾讯云函数 SCF</a>.。简单的 POST 一个链接，不会达到收费标准。<br>我们打开云函数的创建界面：</p>\n<ol>\n<li>选择自定义创建</li>\n<li>函数名称为默认的 helloworld-1623250991 ，可以自己输入名称。</li>\n<li>地域使用任何地域即可，这里默认选择了广州</li>\n<li>运行环境选择 Python3.6 （Python 2.7 版本也行）</li>\n<li>提交方法选择在线编辑。</li>\n<li>执行方法使用默认值：index.main_handler</li>\n<li>函数代码如下：</li>\n</ol>\n<p><strong>Python 2.7 版本代码：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main_handler</span>(<span class=\"params\">event, context</span>):</span><br><span class=\"line\">    r = requests.post(<span class=\"string\">&quot;https://api.github.com/repos/xianrenqh/hui_blog_hexo/actions/workflows/23465728/dispatches&quot;</span>,</span><br><span class=\"line\">    json = &#123;<span class=\"string\">&quot;ref&quot;</span>: <span class=\"string\">&quot;master&quot;</span>&#125;,</span><br><span class=\"line\">    headers = &#123;<span class=\"string\">&quot;User-Agent&quot;</span>:<span class=\"string\">&#x27;curl/7.52.1&#x27;</span>,</span><br><span class=\"line\">              <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>,</span><br><span class=\"line\">              <span class=\"string\">&#x27;Accept&#x27;</span>: <span class=\"string\">&#x27;application/vnd.github.v3+json&#x27;</span>,</span><br><span class=\"line\">              <span class=\"string\">&#x27;Authorization&#x27;</span>: <span class=\"string\">&#x27;token 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&#x27;</span>&#125;)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> r.status_code == <span class=\"number\">204</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;This&#x27;s OK!&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r.status_code</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><strong>Python 3.6 版本代码：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">run</span>():</span><br><span class=\"line\">        payload = json.dumps(&#123;<span class=\"string\">&quot;ref&quot;</span>: <span class=\"string\">&quot;master&quot;</span>&#125;)</span><br><span class=\"line\">        header = &#123;<span class=\"string\">&#x27;Authorization&#x27;</span>: <span class=\"string\">&#x27;token GitHubToken&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"string\">&quot;Accept&quot;</span>: <span class=\"string\">&quot;application/vnd.github.v3+json&quot;</span>&#125;</span><br><span class=\"line\">        response_decoded_json = requests.post(</span><br><span class=\"line\">            <span class=\"string\">f&#x27;https://api.github.com/repos/Github账号/Github项目名/actions/workflows/GithubAction工作流名称或ID/dispatches&#x27;</span>,</span><br><span class=\"line\">            data=payload, headers=header)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 云函数入口</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main_handler</span>(<span class=\"params\">event, context</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> run()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li>函数代码中的 <strong>GitHubToken、Github 账号、Github 项目名、GithubAction 工作流名称或 ID</strong> 需要根据自己的账号及项目填写。具体的 API 调用规则可参考: <a href=\"https://docs.github.com/en/rest/reference/actions#create-a-workflow-dispatch-event\">GithubDoc</a>.</li>\n</ol>\n<p><strong>获取 GithubAction 工作流 ID 接口：</strong><br>**url: **<a href=\"https://api.github.com/repos/%E4%BD%A0%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D/%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D/actions/workflows\">https://api.github.com/repos/你的用户名/你的项目名/actions/workflows</a><br>method: get<br>header:</p>\n<table>\n<thead>\n<tr>\n<th>Authorization</th>\n<th>token 你的 token</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Accept</td>\n<td>application&#x2F;vnd.github.v3+json</td>\n</tr>\n</tbody></table>\n<p>body: {ref:master’}</p>\n<p><strong>PHP 请求案例：</strong></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Generated by ApiPost: https://www.apipost.cn/</span></span><br><span class=\"line\"><span class=\"variable\">$ch</span> = <span class=\"title function_ invoke__\">curl_init</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_URL, <span class=\"string\">&#x27;https://api.github.com/repos/你的用户名/你的项目名/actions/workflows&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_RETURNTRANSFER, <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_CUSTOMREQUEST, <span class=\"string\">&#x27;GET&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_POSTFIELDS, <span class=\"string\">&quot;&#123;ref:master&#x27;&#125;&#x27;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$headers</span> = <span class=\"keyword\">array</span>();</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;User-Agent: Apipost client Runtime/+https://www.apipost.cn/&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;Authorization: token 你的TOKEN&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;Accept: application/vnd.github.v3+json&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$headers</span>[] = <span class=\"string\">&#x27;Content-Type: application/json&#x27;</span>;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_setopt</span>(<span class=\"variable\">$ch</span>, CURLOPT_HTTPHEADER, <span class=\"variable\">$headers</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"title function_ invoke__\">curl_exec</span>(<span class=\"variable\">$ch</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">curl_errno</span>(<span class=\"variable\">$ch</span>)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Error:&#x27;</span> . <span class=\"title function_ invoke__\">curl_error</span>(<span class=\"variable\">$ch</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">curl_close</span>(<span class=\"variable\">$ch</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Python 请求案例：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"></span><br><span class=\"line\">headers = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;User-Agent&#x27;</span>: <span class=\"string\">&#x27;Apipost client Runtime/+https://www.apipost.cn/&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Authorization&#x27;</span>: <span class=\"string\">&#x27;token 你的token&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Accept&#x27;</span>: <span class=\"string\">&#x27;application/vnd.github.v3+json&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">data = <span class=\"string\">&#x27;&#123;ref:master&#125;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">response = requests.post(<span class=\"string\">&#x27;https://api.github.com/repos/你的用户名/你的项目名/actions/workflows&#x27;</span>, headers=headers, data=data)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ol start=\"9\">\n<li>具体填写如下图所示：</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649401818211-43e43680-9183-420c-af31-9011030b7073.png#clientId=ufda8d8b7-9673-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u6ebd4bae&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1204&originWidth=1642&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=156866&status=done&style=none&taskId=uf157aaf6-4213-4b8f-a03f-0a14cc3be20&title=\" alt=\"image.png\"></p>\n<ol start=\"10\">\n<li>在高级配置中，将执行超过时间设置为合适的时间，这里我设置为最大值<strong>900</strong>秒：</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390134784-9f7e3870-5676-4dab-b85e-fffd90989239.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ua156c086&margin=%5Bobject%20Object%5D&name=image.png&originHeight=424&originWidth=527&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=37309&status=done&style=none&taskId=u1a87cab6-45c8-4639-900e-a9517e8d1a8&title=\" alt=\"image.png\"></p>\n<ol start=\"11\">\n<li>触发器配置选择默认流量 - 定时触发 - 自定义触发周期，并填入合适的 Cron 表达式，这里的<strong>Cron</strong>当前以 UTC +8 中国标准时间 （China Standard Time）运行，即北京时间。我输入的：<blockquote>\n<p>0 0 16 * * * *</p>\n</blockquote>\n</li>\n</ol>\n<p>表示了每天 16 点执行 1 次。<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649390185893-a04dcb9c-cb6d-4c29-825e-91b9c250b807.png#clientId=u382e8e49-5c96-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ud642effb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=517&originWidth=576&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=50170&status=done&style=none&taskId=u81d4f3b3-5f0e-4f8c-a2a4-7ca54a07540&title=\" alt=\"image.png\"></p>\n<p>触发器也可以选择 api 调用，创建好后会生成一个 api url （webhook 地址）。粘贴到对应的位置调用即可。</p>\n"},{"title":"小灰灰博客hexo版本上线了","urlname":"mgg0te","date":"2022-04-07T09:09:59.000Z","abbrlink":"f6467537","_content":"\n### Hello World\n\n首发镇博~~~~~~\n\n上线时间：2022-04-07\n","source":"_posts/mgg0te.md","raw":"---\ntitle: 小灰灰博客hexo版本上线了\nurlname: mgg0te\ndate: '2022-04-07 17:09:59 +0800'\ncategories:\n  - 网络集锦\ntags:\n  - 小灰灰\n  - 博客\n  - 随笔\nabbrlink: f6467537\n---\n\n### Hello World\n\n首发镇博~~~~~~\n\n上线时间：2022-04-07\n","slug":"mgg0te","published":1,"updated":"2022-04-08T07:11:04.820Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1q3du1u0003sku5fb6udhxt","content":"<h3 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h3><p>首发镇博~~~~~~</p>\n<p>上线时间：2022-04-07</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list2.jpg","excerpt":"","more":"<h3 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h3><p>首发镇博~~~~~~</p>\n<p>上线时间：2022-04-07</p>\n"},{"title":"语雀+Hexo+serverless云函数自动同步","urlname":"vibciy","date":"2022-04-08T05:37:45.000Z","abbrlink":"ec39ff9","_content":"\n# 一、搭建 Hexo 博客\n\n本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。\n使用 hexo 搭建博客地址：\n[https://www.yuque.com/xianrenqh/kyeqhg/xo8csy](https://www.yuque.com/xianrenqh/kyeqhg/xo8csy)\n\n# 二、Hexo 同步语雀内容\n\n用到了这个项目：\n\n> https://github.com/x-cold/yuque-hexo\n\n> 安装：npm i -g yuque-hexo\n\n然后把 package.json 的内容添加上下面这些：\n\n```json\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"slug\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"hxfqg9\",\n    \"repo\": \"web\",\n    \"token\": \"语雀token\",\n    \"onlyPublished\": true,\n    \"onlyPublic\": true\n  },\n  \"devDependencies\": {\n    \"yuque-hexo\": \"^1.6.0\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.1\"\n  },\n\n```\n\n这里需要说明：\nbaseurl 是固定的\nlogin 和 repo 是如下图这样对应的，个人界面和团队界面都可以\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u0d64e7b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=545&originWidth=1080&originalType=url∶=1&rotation=0&showTitle=false&size=189765&status=done&style=none&taskId=u57aea17f-fb57-435f-8a44-af6dbe6c1cc&title=)\n\ntoken 是在右上角头像 -> 账户设置 -> Token 添加的，权限的话只给读取就可以\nps.公开的知识库也要设置 Token。\n接着，\n在 \"scripts\" 中添加\n\n```\n    \"sync\": \"yuque-hexo sync\",\n    \"clean:yuque\": \"yuque-hexo clean\",\n```\n\n这样整体下来我的 package.json 内容如下（参考）：\n\n```json\n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"build\": \"hexo generate\",\n    \"clean\": \"hexo clean\",\n    \"deploy\": \"hexo deploy\",\n    \"server\": \"hexo server\",\n    \"sync\": \"yuque-hexo sync\",\n    \"clean:yuque\": \"yuque-hexo clean\"\n  },\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"slug\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"hxfqg9\",\n    \"repo\": \"web\",\n    \"token\": \"语雀token\",\n    \"onlyPublished\": true,\n    \"onlyPublic\": true\n  },\n  \"devDependencies\": {\n    \"yuque-hexo\": \"^1.6.0\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.1\"\n  },\n  \"dependencies\": {\n    \"hexo\": \"^4.2.1\",\n    \"hexo-deployer-git\": \"^2.1.0\",\n    \"hexo-generator-archive\": \"^1.0.0\",\n    \"hexo-generator-baidu-sitemap\": \"^0.1.6\",\n    \"hexo-generator-category\": \"^1.0.0\",\n    \"hexo-generator-feed\": \"^2.2.0\",\n    \"hexo-generator-index\": \"^1.0.0\",\n    \"hexo-generator-json-content\": \"^4.2.3\",\n    \"hexo-generator-searchdb\": \"^1.3.1\",\n    \"hexo-generator-sitemap\": \"^2.0.0\",\n    \"hexo-generator-tag\": \"^1.0.0\",\n    \"hexo-renderer-ejs\": \"^1.0.0\",\n    \"hexo-renderer-marked\": \"^2.0.0\",\n    \"hexo-renderer-stylus\": \"^1.1.0\",\n    \"hexo-server\": \"^1.0.0\",\n    \"hexo-wordcount\": \"^6.0.1\"\n  }\n}\n```\n\n这时候，在本地调试的时候使用命令：yuque-hexo sync 就会把语雀的文章给下载下来，下载到 \\source_posts\n（使用以上命令前先备份本地的\\_posts 文件夹下的 md 文章，使用语雀下载的时候会先清空此文件夹）\n然后 hexo g && hexo s 就可以访问 127.0.0.1:4000 本地看一下了\n手动发布是 hexo g && hexo d\n\n# **三、github actions 自动更新**\n\n在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓**（用来存放 hexo 源码）**\n**注意**：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 .git 文件夹给删掉\n然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中\n\n```git\ngit init\ngit add .\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/yichen115/blog.git\ngit push -u origin master\n\n```\n\n去 github 的 settings 创建一个 token （ps:个人中心的设置，非项目的设置）\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uac4e5e7e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1080&originalType=url∶=1&rotation=0&showTitle=false&size=89765&status=done&style=none&taskId=uc2174048-c4a7-45e5-8b7e-a72c318831b&title=)\n\n只勾上这一个即可：\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u1e211b98&margin=%5Bobject%20Object%5D&name=image.png&originHeight=627&originWidth=746&originalType=url∶=1&rotation=0&showTitle=false&size=53298&status=done&style=none&taskId=ua795b964-947a-41ce-bafa-a59b4ecd46b&title=)\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u4cbbdb00&margin=%5Bobject%20Object%5D&name=image.png&originHeight=445&originWidth=1015&originalType=url∶=1&rotation=0&showTitle=false&size=45407&status=done&style=none&taskId=u4adc989a-ec2a-4dcc-9a1d-66a0017e2b1&title=)\n\n**生成了 token 之后一定要记下来**，再回来就没法看了\n然后来到刚才创建的私有仓库的 settings\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u71d114fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=419&originWidth=1080&originalType=url∶=1&rotation=0&showTitle=false&size=91140&status=done&style=none&taskId=u2e8da352-5627-4745-98cb-0fad22bf7af&title=)\n\n添加三个 secret\n**GH_REF** 是你博客的仓库地址 github.com/**\\*\\***/**\\*\\***.github.io\n注意去掉前面 https://\n**GE_TOKEN** 是刚才生成的 token\n然后来到 actions，点击 set up a workflow yourself\n**HEXO_DEPLOY_PRI **是新增的 ssh 密钥\n在命令行中输入：\n\n> ssh-keygen -t rsa -C \"your_email@example.com\"\n\n备注：\n同时生成的公钥，要放到 Hexo 生成 page 的项目的公钥下面\n（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page 项目））\n\n编辑内容如下：\n\n```yaml\nname: Hexo Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - master\n  schedule:\n    - cron: \"0 21 * * 0\" # 每周日 UTC 时间 21:00, 北京时间周一凌晨5点\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout source # 将仓库内master分支的内容下载到工作目录1\n        uses: actions/checkout@v2 # 脚本来自 https://github.com/actions/checkout\n        with:\n          ref: master\n          submodules: \"true\"\n\n      - name: Setup Node\n        uses: actions/setup-node@v1\n        with:\n          node-version: \"14.x\"\n\n      - name: Checkout Submodules\n        run: |\n          auth_header=\"$(git config --local --get http.https://github.com/.extraheader)\"\n          git submodule sync --recursive\n          git -c \"http.extraheader=$auth_header\" -c protocol.version=2 submodule update --init --force --recursive --depth=1\n\n      - name: Setup Hexo\n        env:\n          HEXO_DEPLOY_PRI: ${{ secrets.HEXO_DEPLOY_PRI }}\n        run: |\n          mkdir -p ~/.ssh/\n          echo \"$HEXO_DEPLOY_PRI\" > ~/.ssh/id_rsa\n          chmod 700 ~/.ssh\n          chmod 600 ~/.ssh/id_rsa\n          ssh-keyscan github.com >> ~/.ssh/known_hosts\n          git config --global user.email \"xianrenqh@163.com\"\n          git config --global user.name \"xianrenqh\"\n          npm install hexo-cli -g\n          npm install yuque-hexo -g\n          yuque-hexo clean\n          yuque-hexo sync\n\n      - name: Setup Yuque #更新yuque 拉取的文章到GitHub仓库\n        run: |\n          git config --global user.email \"xianrenqh@163.com\"\n          git config --global user.name \"xianrenqh\"\n          git add .\n          git commit -m \"Refresh yuque json\" -a\n\n      - name: Push Yuque #推送修改后的yuque json\n        uses: ad-m/github-push-action@master\n        with:\n          github_token: ${{ secrets.GE_TOKEN }}\n\n      - name: Cache Hexo\n        uses: actions/cache@v1\n        id: cache\n        with:\n          path: node_modules\n          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}\n\n      - name: Install dependencies\n        if: steps.cache.outputs.cache-hit != 'true'\n        run: |\n          npm install --save\n\n      - name: Hexo Deploy\n        run: |\n          hexo clean\n          hexo generate\n          hexo deploy\n```\n\n下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐\n弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新\n\n# 四、配置 ServerLess 云函数\n\n[Github Action 使用云函数调度服务](https://www.yuque.com/xianrenqh/kyeqhg/awh8vd?view=doc_embed)\n\n# 五、发布博文到服务器（vps）上\n\n小灰灰使用的是 webhooks 的功能同步推送到服务器上的\n","source":"_posts/vibciy.md","raw":"---\ntitle: 语雀+Hexo+serverless云函数自动同步\nurlname: vibciy\ndate: '2022-04-08 13:37:45 +0800'\ntags:\n  - 语雀\n  - 云函数\n  - 自动发布\n  - hexo\ncategories:\n  - 学无止境\nabbrlink: ec39ff9\n---\n\n# 一、搭建 Hexo 博客\n\n本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。\n使用 hexo 搭建博客地址：\n[https://www.yuque.com/xianrenqh/kyeqhg/xo8csy](https://www.yuque.com/xianrenqh/kyeqhg/xo8csy)\n\n# 二、Hexo 同步语雀内容\n\n用到了这个项目：\n\n> https://github.com/x-cold/yuque-hexo\n\n> 安装：npm i -g yuque-hexo\n\n然后把 package.json 的内容添加上下面这些：\n\n```json\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"slug\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"hxfqg9\",\n    \"repo\": \"web\",\n    \"token\": \"语雀token\",\n    \"onlyPublished\": true,\n    \"onlyPublic\": true\n  },\n  \"devDependencies\": {\n    \"yuque-hexo\": \"^1.6.0\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.1\"\n  },\n\n```\n\n这里需要说明：\nbaseurl 是固定的\nlogin 和 repo 是如下图这样对应的，个人界面和团队界面都可以\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u0d64e7b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=545&originWidth=1080&originalType=url∶=1&rotation=0&showTitle=false&size=189765&status=done&style=none&taskId=u57aea17f-fb57-435f-8a44-af6dbe6c1cc&title=)\n\ntoken 是在右上角头像 -> 账户设置 -> Token 添加的，权限的话只给读取就可以\nps.公开的知识库也要设置 Token。\n接着，\n在 \"scripts\" 中添加\n\n```\n    \"sync\": \"yuque-hexo sync\",\n    \"clean:yuque\": \"yuque-hexo clean\",\n```\n\n这样整体下来我的 package.json 内容如下（参考）：\n\n```json\n{\n  \"name\": \"hexo-site\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"build\": \"hexo generate\",\n    \"clean\": \"hexo clean\",\n    \"deploy\": \"hexo deploy\",\n    \"server\": \"hexo server\",\n    \"sync\": \"yuque-hexo sync\",\n    \"clean:yuque\": \"yuque-hexo clean\"\n  },\n  \"yuqueConfig\": {\n    \"postPath\": \"source/_posts\",\n    \"cachePath\": \"yuque.json\",\n    \"mdNameFormat\": \"slug\",\n    \"adapter\": \"hexo\",\n    \"concurrency\": 5,\n    \"baseUrl\": \"https://www.yuque.com/api/v2\",\n    \"login\": \"hxfqg9\",\n    \"repo\": \"web\",\n    \"token\": \"语雀token\",\n    \"onlyPublished\": true,\n    \"onlyPublic\": true\n  },\n  \"devDependencies\": {\n    \"yuque-hexo\": \"^1.6.0\"\n  },\n  \"hexo\": {\n    \"version\": \"4.2.1\"\n  },\n  \"dependencies\": {\n    \"hexo\": \"^4.2.1\",\n    \"hexo-deployer-git\": \"^2.1.0\",\n    \"hexo-generator-archive\": \"^1.0.0\",\n    \"hexo-generator-baidu-sitemap\": \"^0.1.6\",\n    \"hexo-generator-category\": \"^1.0.0\",\n    \"hexo-generator-feed\": \"^2.2.0\",\n    \"hexo-generator-index\": \"^1.0.0\",\n    \"hexo-generator-json-content\": \"^4.2.3\",\n    \"hexo-generator-searchdb\": \"^1.3.1\",\n    \"hexo-generator-sitemap\": \"^2.0.0\",\n    \"hexo-generator-tag\": \"^1.0.0\",\n    \"hexo-renderer-ejs\": \"^1.0.0\",\n    \"hexo-renderer-marked\": \"^2.0.0\",\n    \"hexo-renderer-stylus\": \"^1.1.0\",\n    \"hexo-server\": \"^1.0.0\",\n    \"hexo-wordcount\": \"^6.0.1\"\n  }\n}\n```\n\n这时候，在本地调试的时候使用命令：yuque-hexo sync 就会把语雀的文章给下载下来，下载到 \\source_posts\n（使用以上命令前先备份本地的\\_posts 文件夹下的 md 文章，使用语雀下载的时候会先清空此文件夹）\n然后 hexo g && hexo s 就可以访问 127.0.0.1:4000 本地看一下了\n手动发布是 hexo g && hexo d\n\n# **三、github actions 自动更新**\n\n在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓**（用来存放 hexo 源码）**\n**注意**：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 .git 文件夹给删掉\n然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中\n\n```git\ngit init\ngit add .\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/yichen115/blog.git\ngit push -u origin master\n\n```\n\n去 github 的 settings 创建一个 token （ps:个人中心的设置，非项目的设置）\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uac4e5e7e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1080&originalType=url∶=1&rotation=0&showTitle=false&size=89765&status=done&style=none&taskId=uc2174048-c4a7-45e5-8b7e-a72c318831b&title=)\n\n只勾上这一个即可：\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u1e211b98&margin=%5Bobject%20Object%5D&name=image.png&originHeight=627&originWidth=746&originalType=url∶=1&rotation=0&showTitle=false&size=53298&status=done&style=none&taskId=ua795b964-947a-41ce-bafa-a59b4ecd46b&title=)\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u4cbbdb00&margin=%5Bobject%20Object%5D&name=image.png&originHeight=445&originWidth=1015&originalType=url∶=1&rotation=0&showTitle=false&size=45407&status=done&style=none&taskId=u4adc989a-ec2a-4dcc-9a1d-66a0017e2b1&title=)\n\n**生成了 token 之后一定要记下来**，再回来就没法看了\n然后来到刚才创建的私有仓库的 settings\n![image.png](https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u71d114fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=419&originWidth=1080&originalType=url∶=1&rotation=0&showTitle=false&size=91140&status=done&style=none&taskId=u2e8da352-5627-4745-98cb-0fad22bf7af&title=)\n\n添加三个 secret\n**GH_REF** 是你博客的仓库地址 github.com/**\\*\\***/**\\*\\***.github.io\n注意去掉前面 https://\n**GE_TOKEN** 是刚才生成的 token\n然后来到 actions，点击 set up a workflow yourself\n**HEXO_DEPLOY_PRI **是新增的 ssh 密钥\n在命令行中输入：\n\n> ssh-keygen -t rsa -C \"your_email@example.com\"\n\n备注：\n同时生成的公钥，要放到 Hexo 生成 page 的项目的公钥下面\n（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page 项目））\n\n编辑内容如下：\n\n```yaml\nname: Hexo Deploy\n\non:\n  workflow_dispatch:\n  push:\n    branches:\n      - master\n  schedule:\n    - cron: \"0 21 * * 0\" # 每周日 UTC 时间 21:00, 北京时间周一凌晨5点\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout source # 将仓库内master分支的内容下载到工作目录1\n        uses: actions/checkout@v2 # 脚本来自 https://github.com/actions/checkout\n        with:\n          ref: master\n          submodules: \"true\"\n\n      - name: Setup Node\n        uses: actions/setup-node@v1\n        with:\n          node-version: \"14.x\"\n\n      - name: Checkout Submodules\n        run: |\n          auth_header=\"$(git config --local --get http.https://github.com/.extraheader)\"\n          git submodule sync --recursive\n          git -c \"http.extraheader=$auth_header\" -c protocol.version=2 submodule update --init --force --recursive --depth=1\n\n      - name: Setup Hexo\n        env:\n          HEXO_DEPLOY_PRI: ${{ secrets.HEXO_DEPLOY_PRI }}\n        run: |\n          mkdir -p ~/.ssh/\n          echo \"$HEXO_DEPLOY_PRI\" > ~/.ssh/id_rsa\n          chmod 700 ~/.ssh\n          chmod 600 ~/.ssh/id_rsa\n          ssh-keyscan github.com >> ~/.ssh/known_hosts\n          git config --global user.email \"xianrenqh@163.com\"\n          git config --global user.name \"xianrenqh\"\n          npm install hexo-cli -g\n          npm install yuque-hexo -g\n          yuque-hexo clean\n          yuque-hexo sync\n\n      - name: Setup Yuque #更新yuque 拉取的文章到GitHub仓库\n        run: |\n          git config --global user.email \"xianrenqh@163.com\"\n          git config --global user.name \"xianrenqh\"\n          git add .\n          git commit -m \"Refresh yuque json\" -a\n\n      - name: Push Yuque #推送修改后的yuque json\n        uses: ad-m/github-push-action@master\n        with:\n          github_token: ${{ secrets.GE_TOKEN }}\n\n      - name: Cache Hexo\n        uses: actions/cache@v1\n        id: cache\n        with:\n          path: node_modules\n          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}\n\n      - name: Install dependencies\n        if: steps.cache.outputs.cache-hit != 'true'\n        run: |\n          npm install --save\n\n      - name: Hexo Deploy\n        run: |\n          hexo clean\n          hexo generate\n          hexo deploy\n```\n\n下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐\n弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新\n\n# 四、配置 ServerLess 云函数\n\n[Github Action 使用云函数调度服务](https://www.yuque.com/xianrenqh/kyeqhg/awh8vd?view=doc_embed)\n\n# 五、发布博文到服务器（vps）上\n\n小灰灰使用的是 webhooks 的功能同步推送到服务器上的\n","slug":"vibciy","published":1,"updated":"2022-04-08T07:11:04.822Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1q3du1y0007sku54oahf9em","content":"<h1 id=\"一、搭建-Hexo-博客\"><a href=\"#一、搭建-Hexo-博客\" class=\"headerlink\" title=\"一、搭建 Hexo 博客\"></a>一、搭建 Hexo 博客</h1><p>本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。<br>使用 hexo 搭建博客地址：<br><a href=\"https://www.yuque.com/xianrenqh/kyeqhg/xo8csy\">https://www.yuque.com/xianrenqh/kyeqhg/xo8csy</a></p>\n<h1 id=\"二、Hexo-同步语雀内容\"><a href=\"#二、Hexo-同步语雀内容\" class=\"headerlink\" title=\"二、Hexo 同步语雀内容\"></a>二、Hexo 同步语雀内容</h1><p>用到了这个项目：</p>\n<blockquote>\n<p><a href=\"https://github.com/x-cold/yuque-hexo\">https://github.com/x-cold/yuque-hexo</a></p>\n</blockquote>\n<blockquote>\n<p>安装：npm i -g yuque-hexo</p>\n</blockquote>\n<p>然后把 package.json 的内容添加上下面这些：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;yuqueConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;postPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;source/_posts&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;cachePath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque.json&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mdNameFormat&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;slug&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;adapter&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;concurrency&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;baseUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;https://www.yuque.com/api/v2&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;login&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hxfqg9&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;repo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;web&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;token&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;语雀token&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;onlyPublished&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;onlyPublic&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;devDependencies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;yuque-hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.6.0&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;4.2.1&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>这里需要说明：<br>baseurl 是固定的<br>login 和 repo 是如下图这样对应的，个人界面和团队界面都可以<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u0d64e7b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=545&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=189765&status=done&style=none&taskId=u57aea17f-fb57-435f-8a44-af6dbe6c1cc&title=\" alt=\"image.png\"></p>\n<p>token 是在右上角头像 -&gt; 账户设置 -&gt; Token 添加的，权限的话只给读取就可以<br>ps.公开的知识库也要设置 Token。<br>接着，<br>在 “scripts” 中添加</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;sync&quot;: &quot;yuque-hexo sync&quot;,</span><br><span class=\"line\">&quot;clean:yuque&quot;: &quot;yuque-hexo clean&quot;,</span><br></pre></td></tr></table></figure>\n\n<p>这样整体下来我的 package.json 内容如下（参考）：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo-site&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;private&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;build&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo generate&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;clean&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo clean&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;deploy&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo deploy&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;server&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo server&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;sync&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque-hexo sync&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;clean:yuque&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque-hexo clean&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;yuqueConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;postPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;source/_posts&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;cachePath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque.json&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;mdNameFormat&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;slug&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;adapter&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;concurrency&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;https://www.yuque.com/api/v2&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;login&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hxfqg9&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;repo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;web&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;token&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;语雀token&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;onlyPublished&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;onlyPublic&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;devDependencies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;yuque-hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.6.0&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;4.2.1&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;dependencies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^4.2.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-deployer-git&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.1.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-archive&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-baidu-sitemap&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^0.1.6&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-category&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-feed&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.2.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-index&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-json-content&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^4.2.3&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-searchdb&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.3.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-sitemap&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-tag&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-renderer-ejs&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-renderer-marked&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-renderer-stylus&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.1.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-server&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-wordcount&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^6.0.1&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>这时候，在本地调试的时候使用命令：yuque-hexo sync 就会把语雀的文章给下载下来，下载到 \\source_posts<br>（使用以上命令前先备份本地的_posts 文件夹下的 md 文章，使用语雀下载的时候会先清空此文件夹）<br>然后 hexo g &amp;&amp; hexo s 就可以访问 127.0.0.1:4000 本地看一下了<br>手动发布是 hexo g &amp;&amp; hexo d</p>\n<h1 id=\"三、github-actions-自动更新\"><a href=\"#三、github-actions-自动更新\" class=\"headerlink\" title=\"三、github actions 自动更新\"></a><strong>三、github actions 自动更新</strong></h1><p>在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓<strong>（用来存放 hexo 源码）</strong><br><strong>注意</strong>：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 .git 文件夹给删掉<br>然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;first commit&quot;</span><br><span class=\"line\">git remote add origin https://github.com/yichen115/blog.git</span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>去 github 的 settings 创建一个 token （ps:个人中心的设置，非项目的设置）<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uac4e5e7e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=89765&status=done&style=none&taskId=uc2174048-c4a7-45e5-8b7e-a72c318831b&title=\" alt=\"image.png\"></p>\n<p>只勾上这一个即可：<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u1e211b98&margin=%5Bobject%20Object%5D&name=image.png&originHeight=627&originWidth=746&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=53298&status=done&style=none&taskId=ua795b964-947a-41ce-bafa-a59b4ecd46b&title=\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u4cbbdb00&margin=%5Bobject%20Object%5D&name=image.png&originHeight=445&originWidth=1015&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=45407&status=done&style=none&taskId=u4adc989a-ec2a-4dcc-9a1d-66a0017e2b1&title=\" alt=\"image.png\"></p>\n<p><strong>生成了 token 之后一定要记下来</strong>，再回来就没法看了<br>然后来到刚才创建的私有仓库的 settings<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u71d114fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=419&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=91140&status=done&style=none&taskId=u2e8da352-5627-4745-98cb-0fad22bf7af&title=\" alt=\"image.png\"></p>\n<p>添加三个 secret<br><strong>GH_REF</strong> 是你博客的仓库地址 github.com&#x2F;<strong>**</strong>&#x2F;<strong>**</strong>.github.io<br>注意去掉前面 https:&#x2F;&#x2F;<br><strong>GE_TOKEN</strong> 是刚才生成的 token<br>然后来到 actions，点击 set up a workflow yourself<br>**HEXO_DEPLOY_PRI **是新增的 ssh 密钥<br>在命令行中输入：</p>\n<blockquote>\n<p>ssh-keygen -t rsa -C “<a href=\"mailto:&#x79;&#x6f;&#117;&#114;&#95;&#x65;&#x6d;&#97;&#x69;&#x6c;&#x40;&#101;&#x78;&#97;&#109;&#x70;&#x6c;&#101;&#x2e;&#x63;&#111;&#109;\">&#x79;&#x6f;&#117;&#114;&#95;&#x65;&#x6d;&#97;&#x69;&#x6c;&#x40;&#101;&#x78;&#97;&#109;&#x70;&#x6c;&#101;&#x2e;&#x63;&#111;&#109;</a>“</p>\n</blockquote>\n<p>备注：<br>同时生成的公钥，要放到 Hexo 生成 page 的项目的公钥下面<br>（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page 项目））</p>\n<p>编辑内容如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Hexo</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">workflow_dispatch:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">master</span></span><br><span class=\"line\">  <span class=\"attr\">schedule:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">cron:</span> <span class=\"string\">&quot;0 21 * * 0&quot;</span> <span class=\"comment\"># 每周日 UTC 时间 21:00, 北京时间周一凌晨5点</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span> <span class=\"string\">source</span> <span class=\"comment\"># 将仓库内master分支的内容下载到工作目录1</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span> <span class=\"comment\"># 脚本来自 https://github.com/actions/checkout</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">ref:</span> <span class=\"string\">master</span></span><br><span class=\"line\">          <span class=\"attr\">submodules:</span> <span class=\"string\">&quot;true&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Node</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&quot;14.x&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span> <span class=\"string\">Submodules</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git submodule sync --recursive</span></span><br><span class=\"line\"><span class=\"string\">          git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --force --recursive --depth=1</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Hexo</span></span><br><span class=\"line\">        <span class=\"attr\">env:</span></span><br><span class=\"line\">          <span class=\"attr\">HEXO_DEPLOY_PRI:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.HEXO_DEPLOY_PRI</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          mkdir -p ~/.ssh/</span></span><br><span class=\"line\"><span class=\"string\">          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class=\"line\"><span class=\"string\">          chmod 700 ~/.ssh</span></span><br><span class=\"line\"><span class=\"string\">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class=\"line\"><span class=\"string\">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.email &quot;xianrenqh@163.com&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.name &quot;xianrenqh&quot;</span></span><br><span class=\"line\"><span class=\"string\">          npm install hexo-cli -g</span></span><br><span class=\"line\"><span class=\"string\">          npm install yuque-hexo -g</span></span><br><span class=\"line\"><span class=\"string\">          yuque-hexo clean</span></span><br><span class=\"line\"><span class=\"string\">          yuque-hexo sync</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Yuque</span> <span class=\"comment\">#更新yuque 拉取的文章到GitHub仓库</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.email &quot;xianrenqh@163.com&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.name &quot;xianrenqh&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git add .</span></span><br><span class=\"line\"><span class=\"string\">          git commit -m &quot;Refresh yuque json&quot; -a</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Push</span> <span class=\"string\">Yuque</span> <span class=\"comment\">#推送修改后的yuque json</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">ad-m/github-push-action@master</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GE_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">Hexo</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v1</span></span><br><span class=\"line\">        <span class=\"attr\">id:</span> <span class=\"string\">cache</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">if:</span> <span class=\"string\">steps.cache.outputs.cache-hit</span> <span class=\"type\">!=</span> <span class=\"string\">&#x27;true&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          npm install --save</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Hexo</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          hexo clean</span></span><br><span class=\"line\"><span class=\"string\">          hexo generate</span></span><br><span class=\"line\"><span class=\"string\">          hexo deploy</span></span><br></pre></td></tr></table></figure>\n\n<p>下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐<br>弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新</p>\n<h1 id=\"四、配置-ServerLess-云函数\"><a href=\"#四、配置-ServerLess-云函数\" class=\"headerlink\" title=\"四、配置 ServerLess 云函数\"></a>四、配置 ServerLess 云函数</h1><p><a href=\"https://www.yuque.com/xianrenqh/kyeqhg/awh8vd?view=doc_embed\">Github Action 使用云函数调度服务</a></p>\n<h1 id=\"五、发布博文到服务器（vps）上\"><a href=\"#五、发布博文到服务器（vps）上\" class=\"headerlink\" title=\"五、发布博文到服务器（vps）上\"></a>五、发布博文到服务器（vps）上</h1><p>小灰灰使用的是 webhooks 的功能同步推送到服务器上的</p>\n","site":{"data":{"link":[{"class_name":"友情链接","class_desc":"那些人，那些事","link_list":[{"name":"小灰灰博客网","link":"https://xiaohuihui.net.cn/","avatar":"https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg","descr":"快速、简单且强大的网站博客"},{"name":"Hexo","link":"https://hexo.io/zh-tw/","descr":"快速、简单且强大的网誌框架"}]},{"class_name":"网站","class_desc":"值得推荐的网站","link_list":[{"name":"Youtube","link":"https://www.youtube.com/","avatar":"https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png","descr":"视频网站"},{"name":"Weibo","link":"https://www.weibo.com/","avatar":"https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png","descr":"中国最大社交分享平臺"},{"name":"Twitter","link":"https://twitter.com/","avatar":"https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png","descr":"社交分享平臺"}]}]}},"cover":"/img/default_list.jpg","excerpt":"","more":"<h1 id=\"一、搭建-Hexo-博客\"><a href=\"#一、搭建-Hexo-博客\" class=\"headerlink\" title=\"一、搭建 Hexo 博客\"></a>一、搭建 Hexo 博客</h1><p>本文针对已经搭建好 hexo 博客的，如果没有搭好正常的 hexo 博客的可以去看另一篇博文，搭建很方便的。<br>使用 hexo 搭建博客地址：<br><a href=\"https://www.yuque.com/xianrenqh/kyeqhg/xo8csy\">https://www.yuque.com/xianrenqh/kyeqhg/xo8csy</a></p>\n<h1 id=\"二、Hexo-同步语雀内容\"><a href=\"#二、Hexo-同步语雀内容\" class=\"headerlink\" title=\"二、Hexo 同步语雀内容\"></a>二、Hexo 同步语雀内容</h1><p>用到了这个项目：</p>\n<blockquote>\n<p><a href=\"https://github.com/x-cold/yuque-hexo\">https://github.com/x-cold/yuque-hexo</a></p>\n</blockquote>\n<blockquote>\n<p>安装：npm i -g yuque-hexo</p>\n</blockquote>\n<p>然后把 package.json 的内容添加上下面这些：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;yuqueConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;postPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;source/_posts&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;cachePath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque.json&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;mdNameFormat&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;slug&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;adapter&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;concurrency&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;baseUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;https://www.yuque.com/api/v2&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;login&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hxfqg9&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;repo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;web&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;token&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;语雀token&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;onlyPublished&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;onlyPublic&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;devDependencies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;yuque-hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.6.0&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;4.2.1&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>这里需要说明：<br>baseurl 是固定的<br>login 和 repo 是如下图这样对应的，个人界面和团队界面都可以<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396601747-fc1e332a-2b6a-4ad0-bf0b-85b45608f17b.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u0d64e7b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=545&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=189765&status=done&style=none&taskId=u57aea17f-fb57-435f-8a44-af6dbe6c1cc&title=\" alt=\"image.png\"></p>\n<p>token 是在右上角头像 -&gt; 账户设置 -&gt; Token 添加的，权限的话只给读取就可以<br>ps.公开的知识库也要设置 Token。<br>接着，<br>在 “scripts” 中添加</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;sync&quot;: &quot;yuque-hexo sync&quot;,</span><br><span class=\"line\">&quot;clean:yuque&quot;: &quot;yuque-hexo clean&quot;,</span><br></pre></td></tr></table></figure>\n\n<p>这样整体下来我的 package.json 内容如下（参考）：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo-site&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;0.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;private&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;build&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo generate&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;clean&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo clean&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;deploy&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo deploy&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;server&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo server&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;sync&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque-hexo sync&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;clean:yuque&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque-hexo clean&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;yuqueConfig&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;postPath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;source/_posts&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;cachePath&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;yuque.json&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;mdNameFormat&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;slug&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;adapter&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hexo&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;concurrency&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">5</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;https://www.yuque.com/api/v2&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;login&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hxfqg9&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;repo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;web&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;token&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;语雀token&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;onlyPublished&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;onlyPublic&quot;</span><span class=\"punctuation\">:</span> <span class=\"keyword\">true</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;devDependencies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;yuque-hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.6.0&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;4.2.1&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;dependencies&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^4.2.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-deployer-git&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.1.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-archive&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-baidu-sitemap&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^0.1.6&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-category&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-feed&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.2.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-index&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-json-content&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^4.2.3&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-searchdb&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.3.1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-sitemap&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-generator-tag&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-renderer-ejs&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-renderer-marked&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^2.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-renderer-stylus&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.1.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-server&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;hexo-wordcount&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;^6.0.1&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>这时候，在本地调试的时候使用命令：yuque-hexo sync 就会把语雀的文章给下载下来，下载到 \\source_posts<br>（使用以上命令前先备份本地的_posts 文件夹下的 md 文章，使用语雀下载的时候会先清空此文件夹）<br>然后 hexo g &amp;&amp; hexo s 就可以访问 127.0.0.1:4000 本地看一下了<br>手动发布是 hexo g &amp;&amp; hexo d</p>\n<h1 id=\"三、github-actions-自动更新\"><a href=\"#三、github-actions-自动更新\" class=\"headerlink\" title=\"三、github actions 自动更新\"></a><strong>三、github actions 自动更新</strong></h1><p>在 github 上创建一个私有仓库（因为会涉及到一些 token 啥的）仓库名字无所谓<strong>（用来存放 hexo 源码）</strong><br><strong>注意</strong>：在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，导致后期博客成了空白页面，最简单粗暴的办法就是把你 git clone 的 hexo 主题里的 .git 文件夹给删掉<br>然后在 hexo 的目录下运行如下命令，把 hexo 的源码传到 github 远程仓库中</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;first commit&quot;</span><br><span class=\"line\">git remote add origin https://github.com/yichen115/blog.git</span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>去 github 的 settings 创建一个 token （ps:个人中心的设置，非项目的设置）<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396898326-2a09cbe8-9587-4f19-9f13-ead9e3bd6fc1.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uac4e5e7e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=89765&status=done&style=none&taskId=uc2174048-c4a7-45e5-8b7e-a72c318831b&title=\" alt=\"image.png\"></p>\n<p>只勾上这一个即可：<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396909568-f0df156b-9310-4954-9350-da49c64404d2.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u1e211b98&margin=%5Bobject%20Object%5D&name=image.png&originHeight=627&originWidth=746&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=53298&status=done&style=none&taskId=ua795b964-947a-41ce-bafa-a59b4ecd46b&title=\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396921676-0e84a878-d94d-44d7-bd5b-0d1490dd65c6.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u4cbbdb00&margin=%5Bobject%20Object%5D&name=image.png&originHeight=445&originWidth=1015&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=45407&status=done&style=none&taskId=u4adc989a-ec2a-4dcc-9a1d-66a0017e2b1&title=\" alt=\"image.png\"></p>\n<p><strong>生成了 token 之后一定要记下来</strong>，再回来就没法看了<br>然后来到刚才创建的私有仓库的 settings<br><img src=\"https://cdn.nlark.com/yuque/0/2022/png/27022430/1649396944906-f483bf94-9454-4d5b-8fcb-5ad1d02e9003.png#clientId=udcfe64c5-982a-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u71d114fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=419&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=91140&status=done&style=none&taskId=u2e8da352-5627-4745-98cb-0fad22bf7af&title=\" alt=\"image.png\"></p>\n<p>添加三个 secret<br><strong>GH_REF</strong> 是你博客的仓库地址 github.com&#x2F;<strong>**</strong>&#x2F;<strong>**</strong>.github.io<br>注意去掉前面 https:&#x2F;&#x2F;<br><strong>GE_TOKEN</strong> 是刚才生成的 token<br>然后来到 actions，点击 set up a workflow yourself<br>**HEXO_DEPLOY_PRI **是新增的 ssh 密钥<br>在命令行中输入：</p>\n<blockquote>\n<p>ssh-keygen -t rsa -C “<a href=\"mailto:&#x79;&#x6f;&#117;&#114;&#95;&#x65;&#x6d;&#97;&#x69;&#x6c;&#x40;&#101;&#x78;&#97;&#109;&#x70;&#x6c;&#101;&#x2e;&#x63;&#111;&#109;\">&#x79;&#x6f;&#117;&#114;&#95;&#x65;&#x6d;&#97;&#x69;&#x6c;&#x40;&#101;&#x78;&#97;&#109;&#x70;&#x6c;&#101;&#x2e;&#x63;&#111;&#109;</a>“</p>\n</blockquote>\n<p>备注：<br>同时生成的公钥，要放到 Hexo 生成 page 的项目的公钥下面<br>（只有密钥和公钥相互匹配，才能推送静态文件到公开的项目下（page 项目））</p>\n<p>编辑内容如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Hexo</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">workflow_dispatch:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">master</span></span><br><span class=\"line\">  <span class=\"attr\">schedule:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">cron:</span> <span class=\"string\">&quot;0 21 * * 0&quot;</span> <span class=\"comment\"># 每周日 UTC 时间 21:00, 北京时间周一凌晨5点</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">build:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span> <span class=\"string\">source</span> <span class=\"comment\"># 将仓库内master分支的内容下载到工作目录1</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span> <span class=\"comment\"># 脚本来自 https://github.com/actions/checkout</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">ref:</span> <span class=\"string\">master</span></span><br><span class=\"line\">          <span class=\"attr\">submodules:</span> <span class=\"string\">&quot;true&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Node</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&quot;14.x&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span> <span class=\"string\">Submodules</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git submodule sync --recursive</span></span><br><span class=\"line\"><span class=\"string\">          git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --force --recursive --depth=1</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Hexo</span></span><br><span class=\"line\">        <span class=\"attr\">env:</span></span><br><span class=\"line\">          <span class=\"attr\">HEXO_DEPLOY_PRI:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.HEXO_DEPLOY_PRI</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          mkdir -p ~/.ssh/</span></span><br><span class=\"line\"><span class=\"string\">          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class=\"line\"><span class=\"string\">          chmod 700 ~/.ssh</span></span><br><span class=\"line\"><span class=\"string\">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class=\"line\"><span class=\"string\">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.email &quot;xianrenqh@163.com&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.name &quot;xianrenqh&quot;</span></span><br><span class=\"line\"><span class=\"string\">          npm install hexo-cli -g</span></span><br><span class=\"line\"><span class=\"string\">          npm install yuque-hexo -g</span></span><br><span class=\"line\"><span class=\"string\">          yuque-hexo clean</span></span><br><span class=\"line\"><span class=\"string\">          yuque-hexo sync</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Yuque</span> <span class=\"comment\">#更新yuque 拉取的文章到GitHub仓库</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.email &quot;xianrenqh@163.com&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git config --global user.name &quot;xianrenqh&quot;</span></span><br><span class=\"line\"><span class=\"string\">          git add .</span></span><br><span class=\"line\"><span class=\"string\">          git commit -m &quot;Refresh yuque json&quot; -a</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Push</span> <span class=\"string\">Yuque</span> <span class=\"comment\">#推送修改后的yuque json</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">ad-m/github-push-action@master</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GE_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">Hexo</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v1</span></span><br><span class=\"line\">        <span class=\"attr\">id:</span> <span class=\"string\">cache</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">if:</span> <span class=\"string\">steps.cache.outputs.cache-hit</span> <span class=\"type\">!=</span> <span class=\"string\">&#x27;true&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          npm install --save</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Hexo</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">          hexo clean</span></span><br><span class=\"line\"><span class=\"string\">          hexo generate</span></span><br><span class=\"line\"><span class=\"string\">          hexo deploy</span></span><br></pre></td></tr></table></figure>\n\n<p>下面那个 user.name 和 user.email 根据自己的情况改一下，注意对齐<br>弄完之后每当 push 或 repository_dispatch 的时候都会自动的进行更新</p>\n<h1 id=\"四、配置-ServerLess-云函数\"><a href=\"#四、配置-ServerLess-云函数\" class=\"headerlink\" title=\"四、配置 ServerLess 云函数\"></a>四、配置 ServerLess 云函数</h1><p><a href=\"https://www.yuque.com/xianrenqh/kyeqhg/awh8vd?view=doc_embed\">Github Action 使用云函数调度服务</a></p>\n<h1 id=\"五、发布博文到服务器（vps）上\"><a href=\"#五、发布博文到服务器（vps）上\" class=\"headerlink\" title=\"五、发布博文到服务器（vps）上\"></a>五、发布博文到服务器（vps）上</h1><p>小灰灰使用的是 webhooks 的功能同步推送到服务器上的</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cl1q3du1r0001sku56z20ft4p","category_id":"cl1q3du1w0004sku5dv8h5bp9","_id":"cl1q3du22000dsku5cm2kdgfv"},{"post_id":"cl1q3du1u0003sku5fb6udhxt","category_id":"cl1q3du21000asku5b17a5h8r","_id":"cl1q3du24000gsku5eg0t9s3h"},{"post_id":"cl1q3du1y0007sku54oahf9em","category_id":"cl1q3du1w0004sku5dv8h5bp9","_id":"cl1q3du24000isku52svxh2l7"}],"PostTag":[{"post_id":"cl1q3du1r0001sku56z20ft4p","tag_id":"cl1q3du1x0005sku542ex0ijb","_id":"cl1q3du24000ksku5dz9nckzh"},{"post_id":"cl1q3du1r0001sku56z20ft4p","tag_id":"cl1q3du21000bsku59pqah8sl","_id":"cl1q3du24000lsku5114480qg"},{"post_id":"cl1q3du1r0001sku56z20ft4p","tag_id":"cl1q3du22000fsku595ke92be","_id":"cl1q3du25000nsku5fanac6nw"},{"post_id":"cl1q3du1r0001sku56z20ft4p","tag_id":"cl1q3du24000hsku56lmm3d3w","_id":"cl1q3du25000osku54gu1hvv7"},{"post_id":"cl1q3du1u0003sku5fb6udhxt","tag_id":"cl1q3du24000jsku5d162dlhc","_id":"cl1q3du26000rsku5bznsfmum"},{"post_id":"cl1q3du1u0003sku5fb6udhxt","tag_id":"cl1q3du25000msku5al237adg","_id":"cl1q3du26000ssku5f76w7uue"},{"post_id":"cl1q3du1u0003sku5fb6udhxt","tag_id":"cl1q3du25000psku56a992pu4","_id":"cl1q3du26000usku58s4a0g4z"},{"post_id":"cl1q3du1y0007sku54oahf9em","tag_id":"cl1q3du25000qsku5awjlh0iv","_id":"cl1q3du28000xsku5dwc07vlq"},{"post_id":"cl1q3du1y0007sku54oahf9em","tag_id":"cl1q3du22000fsku595ke92be","_id":"cl1q3du28000ysku59wohdi37"},{"post_id":"cl1q3du1y0007sku54oahf9em","tag_id":"cl1q3du26000vsku5e38fg95y","_id":"cl1q3du28000zsku53y6r72u8"},{"post_id":"cl1q3du1y0007sku54oahf9em","tag_id":"cl1q3du27000wsku5gfs6d26d","_id":"cl1q3du280010sku5993whs6e"}],"Tag":[{"name":"github","_id":"cl1q3du1x0005sku542ex0ijb"},{"name":"action","_id":"cl1q3du21000bsku59pqah8sl"},{"name":"云函数","_id":"cl1q3du22000fsku595ke92be"},{"name":"调度","_id":"cl1q3du24000hsku56lmm3d3w"},{"name":"小灰灰","_id":"cl1q3du24000jsku5d162dlhc"},{"name":"博客","_id":"cl1q3du25000msku5al237adg"},{"name":"随笔","_id":"cl1q3du25000psku56a992pu4"},{"name":"语雀","_id":"cl1q3du25000qsku5awjlh0iv"},{"name":"自动发布","_id":"cl1q3du26000vsku5e38fg95y"},{"name":"hexo","_id":"cl1q3du27000wsku5gfs6d26d"}]}}